<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>DRY không hiệu quả, hãy dùng WET - VuiLapTrinh.com</title><meta name="gridsome:hash" content="0ea6a5c7ec18fcd2d372c0c225289996c79af9fc"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.21"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="Tutorials, Blog, Hướng dẫn, chia sẽ kinh nghiệm về Frontend, react, vue, ux, ui"><meta data-vue-tag="ssr" name="desc" content="Khi bạn học lập trình bạn sẽ được nghe tới khái niệm DRY (Don&#x27;t Repeat Yourself), bạn rất có thể đã vận dụng sai ý nghĩa của nó."><link rel="preload" href="/blog/assets/css/0.styles.d493c61a.css" as="style"><link rel="preload" href="/blog/assets/js/app.f8d91bd5.js" as="script"><link rel="preload" href="/blog/assets/js/page--src-templates-post-vue.980fbd47.js" as="script"><link rel="prefetch" href="/blog/assets/js/page--node-modules-gridsome-app-pages-404-vue.b044eecd.js"><link rel="prefetch" href="/blog/assets/js/page--src-pages-index-vue.bd4a2964.js"><link rel="prefetch" href="/blog/assets/js/page--src-templates-tag-vue.4999789e.js"><link rel="stylesheet" href="/blog/assets/css/0.styles.d493c61a.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/blog/" class="logo active"><span class="logo__text">
    ← VuiLapTrinh.com
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">DRY không hiệu quả, hãy dùng WET</h1><div class="post-meta">
  Đăng ngày 2020-08-24.
  
    Mất khoảng
    <strong>2 phút</strong> để đọc.
  </div></div><div class="post content-box"><div class="post__header"><!----></div><div class="post__content"><p>Trên wiki: DRY là nguyên tắc bạn đừng viết lặp lại một đoạn code</p>
<p>Bạn: Ok, những phần code bị trùng mình sẽ chuyển thành abstraction</p>
<p>Giải pháp trông có vẻ hiển nhiên đúng, nhưng không, abstraction của bạn thường là sai.</p>
<p>Đây là lý do tại sao:</p>
<ol>
<li>Bạn thấy code bị duplicate</li>
<li>Bạn đưa đoạn duplicate ra thành một abstract (method, class)</li>
<li>Bạn thay thể toàn bộ phần duplicate bằng abstraction mới</li>
<li>Bạn nghĩ code đã hoàn hảo</li>
<li>Thời gian trôi đi</li>
<li>PM đưa thêm các yêu cầu mới.</li>
<li>Bạn bắt đầu hiện thực các yêu cầu mới</li>
<li>Với yêu cầu mới này, bạn phải chỉnh sửa vài đoạn trong abstraction, <code class="language-text">if...else</code> các kiểu, đổi parameter, abstraction của chúng ta có thể đưa ra những action khác nhau theo những điều kiện khác nhau</li>
<li>Giờ abstraction của trọng sẽ cho ra những kết quả khác nhau trên những case khác nhau</li>
<li>Yêu cầu mới lại đến, thêm parameter tiếp, thêm câu điều kiện tiếp</li>
<li>Và giờ đây đoạn code của bạn không còn dễ maintain, nói thẳng ra là một đống hầm bà lằng khó nuốt</li>
<li>Chúc mừng, bạn đã bị over engineer và gây ra một abstract quá đỗi phức tạp</li>
</ol>
<p>Vậy thì sao? Hãy thử WET (Write everything twice)</p>
<h2 id="wet"><a href="#wet" aria-hidden="true"><span class="icon icon-link"></span></a>WET</h2>
<p>Như cách chơi chữ đã thể hiện, nó là trường phái đối nghịch hoàn toàn với DRY, khi bắt đầu viết code, bạn sẽ không thể nào lường trước được mọi yêu cầu, mọi tính năng. Vì thế đừng vội vàng áp dụng abstraction</p>
<p>Bạn hãy nhớ</p>
<blockquote>
<p>Cái giá phải trả cho duplicate vẫn rẻ hơn nhiều cho một abstract viết sai</p>
</blockquote>
<p>Ví dụ bạn viết một ứng dụng, bạn dựng ra một component tên <code class="language-text">Button</code> để sử dụng nhiều nơi, nghe rất hợp lý. Một yêu cầu mới xuất hiện, ở trang landing page họ muốn có một nút bấm rất <em>fancy</em> và không giống với tất cả những nút bấm trước đây.</p>
<p>Ok, thay đổi cũng nhỏ thôi, chỉ cần thêm tí điều kiện <code class="language-text">if...else</code>, 90% phần code là của <code class="language-text">Button</code> và 10% code là của <code class="language-text">FancyButton</code></p>
<p>Sự thật đáng buồn là sẽ có rất nhiều những thay đổi như thế xuất hiện và khả năng rất cao là bạn không đủ kinh nghiệm để có hiện thực những abstraction đủ dễ hiểu, dễ maintain.</p>
<p>Lời khuyên? <strong>Copy copy code đó ra, đừng ngần ngại</strong></p>
<p>Bạn thấy quan điểm của mình <em>bậy quá bậy!</em>, bạn có thể tham khảo thêm quan điểm của Dan Abramov</p>
<p><a href="https://overreacted.io/the-wet-codebase/" target="_blank" rel="nofollow noopener noreferrer">The WET Codebase</a></p>
<blockquote>
<p>In this talk, my aim was to show why strict adherence to writing code that is free of duplication inevitably leads to software we can’t understand</p>
</blockquote>
<p>Tạm dịch, tuân thủ nghiêm ngặc quy tắc DRY sẽ dẫn đến một phần mềm mà chúng ta không hiểu nổi nó.</p>
<p><a href="https://www.deconstructconf.com/2019/dan-abramov-the-wet-codebase" target="_blank" rel="nofollow noopener noreferrer">Watch: The Wet Codebase</a></p>
<p><a href="https://dev.to/bulljsdev/when-dry-doesn-t-work-go-wet-4536" target="_blank" rel="nofollow noopener noreferrer">When DRY Doesn't Work, Go WET - Tác giả Nick Bull JS</a></p>
</div><div class="post__footer"><div class="post-tags"><a href="/blog/tag/javascript/" class="post-tags__link"><span>#</span> javascript
		</a><a href="/blog/tag/hoc-thuat/" class="post-tags__link"><span>#</span> hoc-thuat
		</a></div></div></div><div class="post-comments"></div><div class="author post-author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-52311ff214b737f722259e901102d6b3'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-52311ff214b737f722259e901102d6b3)' width='180' height='180' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAABwEDBAUGCAAC/8QAMxAAAQMCAwcBBgYDAAAAAAAAAQIDEQAEBRIhBhMxQVFhcQciIzJCgbEIFDORodEWgsH/xAAZAQEBAQEBAQAAAAAAAAAAAAAEAwUGAAH/xAAhEQABBAMAAgMBAAAAAAAAAAABAAIDEQQSISJBBRNRMf/aAAwDAQACEQMRAD8A6Pr1fOalmvLyUAk6AnxS5VROUx4oR%2bvmPXNjZYbhti48DcKUt9LRIJAHsgkaxMmO1ByzxnG8PeQ/a3d5bOIIUVJdUOHMifvWjB8c6aMP2q0CfPbC/TW119SVz9YetmOMLYRfWWH3TaSA4pKVNrWOuhgH6UYtkNrsK2stFvYU65nbjesOpyrbnhPIjuKhPhSwDZw4qw5kU5ph6r%2blpCYFNOLKflV5o1JSXMkDlS5xy1qtDo4mfrWe2/xhWEbJ3t400%2b6oZWyGpkBRiTGoSNJj/tVbEXEN/VMyAC1iPUTaS2xjG3bO3IS3ay2HNJc1lR6xPDx3oa4g0RvVlQcSfhFRLrEF3V0LpSAh10layOMzw7eKl3jqLhxsxLaRw4610MUYiAa1ZMxMosrPugpJJ0nlwiiJ%2bH69eZ28NulfuX7R0LTOhygKB8yKxWLaWoC0BJKpgfL2rdfh8sV3G1F9iBTLNnalGbkFuEADzAVVMpwOO6/xCx4izJaAuiSsT8UV8KKyBznmKih1J714OqIiCa5jVdJsqk4ggL9oRPSqDbty4/w/GnLVzKPyypBkaEif4p5N2RwA/anlPtvsrafAW0tJStChKVA8QR0p4ZqQQil1ilz5Y5nGloXKkcNev908G8iUoSCUiiHtVhFhhdou6wu2O6JyuNg/pzwUCdY5a8JrAXtwErWi3RmIEZwZE9utaccm/QEVzKVZjVrltN4JyJMqFdGemuz7OzmyFjbBGS5eQLm6PMuLAMf6iE/SgBavuMPNOON75wKC0tr4GDPtdqO%2bxm0i8ew0O3O7RfJnett6J4mCnXhH81DNDzGK/i%2b4/wBbZSb7S1xQ2IIVBHWvb2BAIioBcVxMCml3KgYFZQZadtSzAK460hCpkk%2bBTzahmmnXnRA0APmadsj0ol1uE2T6r5SEWgbO9K%2bARGs0H7stto3luczSyS3mEKUJIBI66VrvUnGWlJZwlKsuaHnjmgafCk/f9qwD6y%2b2pbjhKU%2bylWaJ8dabjxmtne0HInolrVcYThj18w5clKzl1KOZ/sVLRtJ%2bQbQ7akpum/01oEA9c3bvULB8WtGbRYuW1vvBOVtTivm48eVUt9Z3dwpKlIbaZIhJQZEdJq7fJxDxxHcdWgxnvtFbZz1ItsQCWMWyWb8hJcn3ZV3Pyz14eK2e9WpUBJoGYHhVpmCQyCtTZBMaHz1oq7DYxvmBh11IeZT7pR%2bZA5eR9vFCyoGs8owm4sz38kK//9k=' /%3e%3c/svg%3e" width="180" data-src="/blog/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" data-srcset="/blog/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/blog/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript><!----><p class="author__intro">Hiện tại site đang nâng cấp, các bạn xài tạm</p></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2020.</span><span class="footer__links">luckyluu</span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"DRY không hiệu quả, hãy dùng WET","path":"\u002Fdry-khong-hieu-qua-hay-dung-wet\u002F","date":"2020-08-24","timeToRead":2,"tags":[{"id":"javascript","title":"javascript","path":"\u002Ftag\u002Fjavascript\u002F"},{"id":"hoc-thuat","title":"hoc-thuat","path":"\u002Ftag\u002Fhoc-thuat\u002F"}],"desc":"Khi bạn học lập trình bạn sẽ được nghe tới khái niệm DRY (Don't Repeat Yourself), bạn rất có thể đã vận dụng sai ý nghĩa của nó.","content":"\u003Cp\u003ETrên wiki: DRY là nguyên tắc bạn đừng viết lặp lại một đoạn code\u003C\u002Fp\u003E\n\u003Cp\u003EBạn: Ok, những phần code bị trùng mình sẽ chuyển thành abstraction\u003C\u002Fp\u003E\n\u003Cp\u003EGiải pháp trông có vẻ hiển nhiên đúng, nhưng không, abstraction của bạn thường là sai.\u003C\u002Fp\u003E\n\u003Cp\u003EĐây là lý do tại sao:\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003EBạn thấy code bị duplicate\u003C\u002Fli\u003E\n\u003Cli\u003EBạn đưa đoạn duplicate ra thành một abstract (method, class)\u003C\u002Fli\u003E\n\u003Cli\u003EBạn thay thể toàn bộ phần duplicate bằng abstraction mới\u003C\u002Fli\u003E\n\u003Cli\u003EBạn nghĩ code đã hoàn hảo\u003C\u002Fli\u003E\n\u003Cli\u003EThời gian trôi đi\u003C\u002Fli\u003E\n\u003Cli\u003EPM đưa thêm các yêu cầu mới.\u003C\u002Fli\u003E\n\u003Cli\u003EBạn bắt đầu hiện thực các yêu cầu mới\u003C\u002Fli\u003E\n\u003Cli\u003EVới yêu cầu mới này, bạn phải chỉnh sửa vài đoạn trong abstraction, \u003Ccode class=\"language-text\"\u003Eif...else\u003C\u002Fcode\u003E các kiểu, đổi parameter, abstraction của chúng ta có thể đưa ra những action khác nhau theo những điều kiện khác nhau\u003C\u002Fli\u003E\n\u003Cli\u003EGiờ abstraction của trọng sẽ cho ra những kết quả khác nhau trên những case khác nhau\u003C\u002Fli\u003E\n\u003Cli\u003EYêu cầu mới lại đến, thêm parameter tiếp, thêm câu điều kiện tiếp\u003C\u002Fli\u003E\n\u003Cli\u003EVà giờ đây đoạn code của bạn không còn dễ maintain, nói thẳng ra là một đống hầm bà lằng khó nuốt\u003C\u002Fli\u003E\n\u003Cli\u003EChúc mừng, bạn đã bị over engineer và gây ra một abstract quá đỗi phức tạp\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003EVậy thì sao? Hãy thử WET (Write everything twice)\u003C\u002Fp\u003E\n\u003Ch2 id=\"wet\"\u003E\u003Ca href=\"#wet\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EWET\u003C\u002Fh2\u003E\n\u003Cp\u003ENhư cách chơi chữ đã thể hiện, nó là trường phái đối nghịch hoàn toàn với DRY, khi bắt đầu viết code, bạn sẽ không thể nào lường trước được mọi yêu cầu, mọi tính năng. Vì thế đừng vội vàng áp dụng abstraction\u003C\u002Fp\u003E\n\u003Cp\u003EBạn hãy nhớ\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003ECái giá phải trả cho duplicate vẫn rẻ hơn nhiều cho một abstract viết sai\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003EVí dụ bạn viết một ứng dụng, bạn dựng ra một component tên \u003Ccode class=\"language-text\"\u003EButton\u003C\u002Fcode\u003E để sử dụng nhiều nơi, nghe rất hợp lý. Một yêu cầu mới xuất hiện, ở trang landing page họ muốn có một nút bấm rất \u003Cem\u003Efancy\u003C\u002Fem\u003E và không giống với tất cả những nút bấm trước đây.\u003C\u002Fp\u003E\n\u003Cp\u003EOk, thay đổi cũng nhỏ thôi, chỉ cần thêm tí điều kiện \u003Ccode class=\"language-text\"\u003Eif...else\u003C\u002Fcode\u003E, 90% phần code là của \u003Ccode class=\"language-text\"\u003EButton\u003C\u002Fcode\u003E và 10% code là của \u003Ccode class=\"language-text\"\u003EFancyButton\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ESự thật đáng buồn là sẽ có rất nhiều những thay đổi như thế xuất hiện và khả năng rất cao là bạn không đủ kinh nghiệm để có hiện thực những abstraction đủ dễ hiểu, dễ maintain.\u003C\u002Fp\u003E\n\u003Cp\u003ELời khuyên? \u003Cstrong\u003ECopy copy code đó ra, đừng ngần ngại\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EBạn thấy quan điểm của mình \u003Cem\u003Ebậy quá bậy!\u003C\u002Fem\u003E, bạn có thể tham khảo thêm quan điểm của Dan Abramov\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Foverreacted.io\u002Fthe-wet-codebase\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EThe WET Codebase\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EIn this talk, my aim was to show why strict adherence to writing code that is free of duplication inevitably leads to software we can’t understand\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003ETạm dịch, tuân thủ nghiêm ngặc quy tắc DRY sẽ dẫn đến một phần mềm mà chúng ta không hiểu nổi nó.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fwww.deconstructconf.com\u002F2019\u002Fdan-abramov-the-wet-codebase\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EWatch: The Wet Codebase\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fdev.to\u002Fbulljsdev\u002Fwhen-dry-doesn-t-work-go-wet-4536\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EWhen DRY Doesn't Work, Go WET - Tác giả Nick Bull JS\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n","cover_image":""}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/blog/assets/js/app.f8d91bd5.js" defer></script><script src="/blog/assets/js/page--src-templates-post-vue.980fbd47.js" defer></script>
  </body>
</html>