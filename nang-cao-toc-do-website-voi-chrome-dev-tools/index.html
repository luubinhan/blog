<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Nâng cao tốc độ website với Chrome DevTools - VuiLapTrinh.com</title><meta name="gridsome:hash" content="0395a9475e6dcec202a1209b8bd40b74ee081359"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.21"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="Tutorials, Blog, Hướng dẫn, chia sẽ kinh nghiệm về Frontend, react, vue, ux, ui"><meta data-vue-tag="ssr" name="desc" content="Hướng dẫn sử dụng Chrome DevTools để phân tích và tối ưu hóa tốc độ website"><link rel="preload" href="/assets/css/0.styles.4e7b3092.css" as="style"><link rel="preload" href="/assets/js/app.88e72233.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-post-vue.0d21aba4.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules-gridsome-app-pages-404-vue.204466f8.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.0b0d171f.js"><link rel="prefetch" href="/assets/js/page--src-templates-tag-vue.854eb99f.js"><link rel="stylesheet" href="/assets/css/0.styles.4e7b3092.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true" class="layout-blog"><header class="header"><div class="header__left"><a href="/" class="logo active"><span class="logo__text">
    ← VuiLapTrinh.com
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header><main class="main"><div class="single-post"><div class="single-post-container"><article><header><div class="post-title"><h1 class="post-title__text single-post-title">Nâng cao tốc độ website với Chrome DevTools</h1><div class="post-meta">
  Đăng ngày 2018-07-09.
  
    Mất khoảng
    <strong>6 phút</strong> để đọc.
  </div></div></header><div class="post content-box"><div class="post__header"><!----></div><div className="blog-post"><div class="post-content"><div class="post__content"><!-- TOC -->
<ul>
<li>
<p><a href="#b%C6%B0%E1%BB%9Bc-1-ki%E1%BB%83m-tra-trang-web-hi%E1%BB%87n-t%E1%BA%A1i-audits">Bước 1: Kiểm tra trang web hiện tại (Audits)</a></p>
<ul>
<li><a href="#x%C3%A1c-%C4%91%E1%BB%8Bnh-baseline">Xác định baseline</a></li>
<li><a href="#%C4%91%E1%BB%8Dc-hi%E1%BB%83u-report">Đọc hiểu report</a></li>
</ul>
</li>
<li>
<p><a href="#b%C6%B0%E1%BB%9Bc-2-th%E1%BB%AD-nghi%E1%BB%87m">Bước 2: Thử nghiệm</a></p>
<ul>
<li><a href="#b%E1%BA%ADt-text-compression">Bật text compression</a></li>
<li><a href="#gi%E1%BA%A3m-k%C3%ADch-th%C6%B0%E1%BB%9Bc-%E1%BA%A3nh">Giảm kích thước ảnh</a></li>
<li><a href="#b%E1%BB%8F-h%E1%BA%BFt-nh%E1%BB%AFng-resource-n%C3%A0o-block-vi%E1%BB%87c-render">Bỏ hết những resource nào block việc render</a></li>
<li><a href="#h%E1%BA%A1n-ch%E1%BA%BF-t%E1%BB%91i-%C4%91a-c%C3%A1c-x%E1%BB%AD-l%C3%BD-%E1%BB%9F-main-threat">Hạn chế tối đa các xử lý ở main threat</a></li>
</ul>
</li>
<li><a href="#t%E1%BB%95ng-k%E1%BA%BFt">Tổng kết</a></li>
</ul>
<!-- /TOC -->
<h1 id="bước-1-kiểm-tra-trang-web-hiện-tại-audits"><a href="#b%C6%B0%E1%BB%9Bc-1-ki%E1%BB%83m-tra-trang-web-hi%E1%BB%87n-t%E1%BA%A1i-audits" aria-hidden="true"><span class="icon icon-link"></span></a>Bước 1: Kiểm tra trang web hiện tại (Audits)</h1>
<p>Bước đầu tiên này có 2 công dụng chính</p>
<ol>
<li>Làm thước đo cho các thay đổi đã áp dụng</li>
<li>Gợi ý những thay đổi nào thực sự ảnh hưởng nhiều tới tốc độ</li>
</ol>
<p>Trong bài này tác giả sẽ sử dụng trang <a href="https://glitch.com/edit/#!/tony?path=server.js:1:0" target="_blank" rel="nofollow noopener noreferrer">https://glitch.com/edit/#!/tony?path=server.js:1:0</a> để làm demo</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/editor.png"></p>
<h2 id="xác-định-baseline"><a href="#x%C3%A1c-%C4%91%E1%BB%8Bnh-baseline" aria-hidden="true"><span class="icon icon-link"></span></a>Xác định baseline</h2>
<p>Mở Chrome DevTools, chuyển qua tab <strong>Audits</strong>, nó có thể bị ẩn sau nút <strong>More Panels</strong>, có hình cái hải đăng</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/audits.png" alt="Thiết đặt chính cho baseline"></p>
<p>Thiết đặt như hình trên, sau đó click <strong>Run Audits</strong>, đợi nó chạy một tí sẽ có 1 cái report performance của site</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/report.png"></p>
<p>Nếu thấy bất kỳ lỗi nào trên report, thử chạy trong 1 tab ẩn danh mới</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/error.png"></p>
<h2 id="đọc-hiểu-report"><a href="#%C4%91%E1%BB%8Dc-hi%E1%BB%83u-report" aria-hidden="true"><span class="icon icon-link"></span></a>Đọc hiểu report</h2>
<p>Cái số ở trên cùng là thang điểm tổng hợp, càng cao càng tốt</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/overall.png"></p>
<p>Ở mục <strong>Metrics</strong> cho kết quả các cách đánh giá, ví dụ như <strong>First Contentful Paint</strong> cho biết thời gian khi màn hình bắt đầu xuất hiện nội dung cho user, một milestone quan trọng để làm hài lòng user, <strong>First CPU Idle</strong> là thời điểm mà user có thể tương tác với site như click hay input gì đó, lúc này CPU của user đã có có thể xử lý yêu cầu</p>
<p>Hover lên mỗi metric để hiển thị phần description của nó, và click <strong>Learn More</strong> để đọc document.</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/fmp.png"></p>
<p>Bên dưới Metric là một số hình screenshoot trên từng thời gian khác nhau</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/screenshots.png"></p>
<p><strong>Opportunities</strong> sẽ đưa ra những tips để improve page load</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/opportunities.png"></p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/compression.png"></p>
<p><strong>Diagnostics</strong> cung cấp thêm thông tin các nhân tố tác động lên tốc độ load</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/diagnostics.png"></p>
<p><strong>Passed Audits</strong> là những điều trang hiện tại làm tốt</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/passed.png"></p>
<h1 id="bước-2-thử-nghiệm"><a href="#b%C6%B0%E1%BB%9Bc-2-th%E1%BB%AD-nghi%E1%BB%87m" aria-hidden="true"><span class="icon icon-link"></span></a>Bước 2: Thử nghiệm</h1>
<p>Trong mục <strong>Oppourtunities</strong> của audit report cung cấp gợi ý để improve performance, chúng ta sẽ làm theo những gợi ý này</p>
<h2 id="bật-text-compression"><a href="#b%E1%BA%ADt-text-compression" aria-hidden="true"><span class="icon icon-link"></span></a>Bật text compression</h2>
<p>Top trong những điều có thể làm để improve, reduce, compress kích thước của file xuống trước khi send, giống như chúng ta zip file lại trước khi quăng vô email</p>
<p>Check cái file dạng text này trong tab <strong>Network</strong></p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/network.png"></p>
<p>Click <strong>use large request rows</strong> <img src="https://developers.google.com/web/tools/chrome-devtools/network-performance/imgs/large-resource-rows-button.png"> để hiển thị nhiều thông tin hơn.</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/largerows.png"></p>
<p>Tren cột <strong>Size</strong> sẽ có 2 giá trị. Giá trị ở trên là kích thước download, bên dưới là kích thước đã giải nén, nếu 2 giá trị này bằng nhau thì hiển nhiên là resource đó chưa compress trước khi gởi.</p>
<p>Xem giá trị của <code class="language-text">content-encoding</code> trong HTTP header cũng sẽ biết được resource này đã compress chưa</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/headers.png"></p>
<p>Như file <code class="language-text">bundle.js</code> chúng ta không thấy <code class="language-text">content-encoding</code> trong Response Headers, nghĩa là file chưa compress, thường giá compress cho nó sẽ là <code class="language-text">gzip</code>, <code class="language-text">deflate</code>, hay <code class="language-text">br</code>. Xem thêm về các <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Encoding#Directives" target="_blank" rel="nofollow noopener noreferrer">kiểu compress này</a></p>
<p>Giải thích đủ rồi giờ ta đi compress thôi. Mở trang ví dụ của tác giả ra</p>
<p>File <code class="language-text">server.js</code></p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/server.png"></p>
<p>Thêm đoạn code sau vào <code class="language-text">server.js</code>. Dùng <code class="language-text">app.use(compression())</code> trước <code class="language-text">app.use(express.static(&#39;build&#39;))</code></p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compression <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'compression'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span><span class="token function">compression</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token method function property-access">static</span><span class="token punctuation">(</span><span class="token string">'build'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Đợi Glitch deploy một tí. Quay lại trang demo và reload.</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/requests.png"></p>
<p>File <code class="language-text">bundle.js</code> lúc này đã compress</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/gzip.png"></p>
<p>Chúng ta quay lại tab <strong>Audits</strong> để đánh giá kết quả, click <strong>Perform an audit</strong>, dùng các thiết đặt như trước, rồi chạy <strong>Run Audit</strong></p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/report2.png"></p>
<h2 id="giảm-kích-thước-ảnh"><a href="#gi%E1%BA%A3m-k%C3%ADch-th%C6%B0%E1%BB%9Bc-%E1%BA%A3nh" aria-hidden="true"><span class="icon icon-link"></span></a>Giảm kích thước ảnh</h2>
<p>Nếu user đang xài điện thoại có kích thước màn hình chỉ 500px chiều ngang thì việc load một cái hình rộng 1500px là ko thông minh lắm.</p>
<p>Trên trang report, click <strong>Properly size images</strong> để xem những hình nào nên resize, ví dụ bên dưới có 4 hình có thể tối ưu</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/resize.png"></p>
<p>Tốt nhất</p>
<ul>
<li>Resize lại toàn bộ ảnh trong lúc build</li>
<li>Tạo nhiều kích thước file khác nhau trong lúc build và sử dụng <code class="language-text">srcset</code> của thẻ <code class="language-text">img</code>, như vậy lúc hiển thị, trình duyệt sẽ đảm nhiệm chọn file nào để phù hợp với thiết bị đang xem. <a href="https://developers.google.com/web/fundamentals/design-and-ux/responsive/images#relative_sized_images" target="_blank" rel="nofollow noopener noreferrer">Xem thêm</a></li>
<li>Sử dụng image CDN để tự động thay đổi kích thước của hình khi request</li>
<li>Xem thêm <a href="https://images.guide/" target="_blank" rel="nofollow noopener noreferrer">một số gợi ý này</a></li>
</ul>
<h2 id="bỏ-hết-những-resource-nào-block-việc-render"><a href="#b%E1%BB%8F-h%E1%BA%BFt-nh%E1%BB%AFng-resource-n%C3%A0o-block-vi%E1%BB%87c-render" aria-hidden="true"><span class="icon icon-link"></span></a>Bỏ hết những resource nào block việc render</h2>
<p><strong>render-blocking resource</strong> là những file javascript hoặc CSS báo với trình duyệt rằng tụi tao file được load xong xui thì mày hả render nội dung trang web.</p>
<p>Trước tiên tìm xem những resource nào có thể được load mà ko cần chạy lúc page load.</p>
<ol>
<li>Click <strong>Eliminate render-blocking resources</strong> để xem các resources, ví dụ ở đây là <code class="language-text">lodash.js</code> và <code class="language-text">jquery.js</code></li>
<li>Ấn Control+Shift+P để mở Command Menu, gõ vào <code class="language-text">Coverage</code> sau đó chọn <code class="language-text">Show Coverage</code></li>
</ol>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/commandmenu.png"></p>
<p>Một tab mới Coverage sẽ mở ra</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/coverage.png"></p>
<ol start="3">
<li>Click <strong>Reload</strong>. Trong tab Coverage sẽ cung cấp thông tin tổng quát về việc các đoạn code trong <code class="language-text">bundle.js</code>, <code class="language-text">jquery.js</code>, <code class="language-text">lodash.js</code> trong lúc page load thì nó sẽ được sử dụng bao nhiêu. Kết quả bên dưới cho thấy có 76% code jQuery và 30% của Lodash ko được sử dụng</li>
</ol>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/coveragereport.png"></p>
<ol start="4">
<li>Click vào <code class="language-text">jQuery</code>. DevTools sẽ mở ra tab Source Panel, những đoạn code nào chạy lúc page sẽ có màu xanh, màu đỏ là phần code không chạy</li>
</ol>
<p>Để xem chuyện gì sẽ xảy ra nếu ta không load jQuery và Lodash</p>
<ol>
<li>Mở tab Network</li>
<li>Ấn Control+Shift+P</li>
<li>Nhập <code class="language-text">blocking</code> sau đó chọn <code class="language-text">Show Request Blocking</code></li>
</ol>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/blocking.png"></p>
<ol start="4">
<li>Click <code class="language-text">Add pattern</code> <img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/addpattern.png">, nhập <code class="language-text">/libs/*</code> sau đó <code class="language-text">Enter</code> để confirm</li>
<li>Reload lại trang. File jQuery và Lodash sẽ được đánh dấu đỏ vì chúng ta ko load nó</li>
</ol>
<p>Xem thử kết quả trên Audit khi chúng ta xóa hẳn 2 file này</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/report4.png"></p>
<h2 id="hạn-chế-tối-đa-các-xử-lý-ở-main-threat"><a href="#h%E1%BA%A1n-ch%E1%BA%BF-t%E1%BB%91i-%C4%91a-c%C3%A1c-x%E1%BB%AD-l%C3%BD-%E1%BB%9F-main-threat" aria-hidden="true"><span class="icon icon-link"></span></a>Hạn chế tối đa các xử lý ở main threat</h2>
<p>Main threat là thời điểm mà trình duyệt xử lý trước tiên để hiển thị nội dung trang, chẳng hạn như parsing, executing HTML, CSS, Javascript.</p>
<p>Mục tiêu ta sẽ dùng <strong>Performance</strong> panel để analyze những xử lý gì đang xảy ra ở main threat, tìm cách để defer hoặc bỏ hẳn</p>
<ol>
<li>Click <strong>Performance</strong> tab</li>
<li>Chọn <strong>Capture Settings</strong> <img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/capture.png"></li>
<li>Thiết đặt <strong>Network</strong> ở <strong>Slow 3G</strong> và <strong>CPU</strong> xuống 6x slowdown để giả lập trang web được load ở nơi mạng chậm rì và thiết bị cùi mía.</li>
<li>Click <strong>Reload</strong> <img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/reload.png"></li>
</ol>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/performance.png"></p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/overview.png"></p>
<p>Expand mục <strong>User Timing</strong>, dựa trên kết quả này để đánh giá, ở đây site Tony này đăng chạy React Development mode nên tiêu tốn khá nhiều thời gian</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/usertiming.png"></p>
<p>Expand mục <strong>Main</strong>, kéo xuống ở dưới cùng, do đang xử dụng framework nên những gì xảy ra ở trên thuộc về framework chúng ta sẽ không can thiệp gì được. Kết quả bên dưới cho thấy hàm <code class="language-text">App</code> gọi khá nhiều lần đến <code class="language-text">mineBitcoin</code></p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/mine.png"></p>
<p>Mở mục <strong>Bottom-Up</strong> để xem nhưng xử lý nào tiêu tốn nhiều thời gian nhất</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/bottomup.png"></p>
<p>Cột <strong>Self Time</strong> hiển thị bao nhiều thời gian cho việc thực thi function. Ví dụ trên cho thấy 57% thời gian tiêu tốn ở main threat là chon function <code class="language-text">maineBitcoin</code></p>
<p>Thay đổi một tí trong source code, chuyển qua mode production, xóa hàm mineBitcoin rồi chạy lại xem kết quả</p>
<p><img src="https://developers.google.com/web/tools/chrome-devtools/speed/imgs/report6.png"></p>
<h1 id="tổng-kết"><a href="#t%E1%BB%95ng-k%E1%BA%BFt" aria-hidden="true"><span class="icon icon-link"></span></a>Tổng kết</h1>
<ul>
<li>Luôn bắt đầu với <strong>Audit</strong>, xác lập baseline trước khi thực hiện tối ưu</li>
<li>Mỗi lần thay đổi một thứ thôi, sau đó chạy lại Audit để ghi nhận kết quả của thay đổi</li>
</ul>
<p><a href="https://developers.google.com/web/tools/chrome-devtools/speed/get-started" target="_blank" rel="nofollow noopener noreferrer">Link bài gốc</a></p>
</div></div></div><div class="post__footer"><div class="post-tags"><a href="/tag/chrome/" class="post-tags__link"><span>#</span> chrome
		</a><a href="/tag/performance/" class="post-tags__link"><span>#</span> performance
		</a></div></div></div><div class="post-comments"></div><div class="author post-author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-52311ff214b737f722259e901102d6b3'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-52311ff214b737f722259e901102d6b3)' width='180' height='180' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAABwEDBAUGCAAC/8QAMxAAAQMCAwcBBgYDAAAAAAAAAQIDEQAEBRIhBhMxQVFhcQciIzJCgbEIFDORodEWgsH/xAAZAQEBAQEBAQAAAAAAAAAAAAAEAwUGAAH/xAAhEQABBAMAAgMBAAAAAAAAAAABAAIDEQQSISJBBRNRMf/aAAwDAQACEQMRAD8A6Pr1fOalmvLyUAk6AnxS5VROUx4oR%2bvmPXNjZYbhti48DcKUt9LRIJAHsgkaxMmO1ByzxnG8PeQ/a3d5bOIIUVJdUOHMifvWjB8c6aMP2q0CfPbC/TW119SVz9YetmOMLYRfWWH3TaSA4pKVNrWOuhgH6UYtkNrsK2stFvYU65nbjesOpyrbnhPIjuKhPhSwDZw4qw5kU5ph6r%2blpCYFNOLKflV5o1JSXMkDlS5xy1qtDo4mfrWe2/xhWEbJ3t400%2b6oZWyGpkBRiTGoSNJj/tVbEXEN/VMyAC1iPUTaS2xjG3bO3IS3ay2HNJc1lR6xPDx3oa4g0RvVlQcSfhFRLrEF3V0LpSAh10layOMzw7eKl3jqLhxsxLaRw4610MUYiAa1ZMxMosrPugpJJ0nlwiiJ%2bH69eZ28NulfuX7R0LTOhygKB8yKxWLaWoC0BJKpgfL2rdfh8sV3G1F9iBTLNnalGbkFuEADzAVVMpwOO6/xCx4izJaAuiSsT8UV8KKyBznmKih1J714OqIiCa5jVdJsqk4ggL9oRPSqDbty4/w/GnLVzKPyypBkaEif4p5N2RwA/anlPtvsrafAW0tJStChKVA8QR0p4ZqQQil1ilz5Y5nGloXKkcNev908G8iUoSCUiiHtVhFhhdou6wu2O6JyuNg/pzwUCdY5a8JrAXtwErWi3RmIEZwZE9utaccm/QEVzKVZjVrltN4JyJMqFdGemuz7OzmyFjbBGS5eQLm6PMuLAMf6iE/SgBavuMPNOON75wKC0tr4GDPtdqO%2bxm0i8ew0O3O7RfJnett6J4mCnXhH81DNDzGK/i%2b4/wBbZSb7S1xQ2IIVBHWvb2BAIioBcVxMCml3KgYFZQZadtSzAK460hCpkk%2bBTzahmmnXnRA0APmadsj0ol1uE2T6r5SEWgbO9K%2bARGs0H7stto3luczSyS3mEKUJIBI66VrvUnGWlJZwlKsuaHnjmgafCk/f9qwD6y%2b2pbjhKU%2bylWaJ8dabjxmtne0HInolrVcYThj18w5clKzl1KOZ/sVLRtJ%2bQbQ7akpum/01oEA9c3bvULB8WtGbRYuW1vvBOVtTivm48eVUt9Z3dwpKlIbaZIhJQZEdJq7fJxDxxHcdWgxnvtFbZz1ItsQCWMWyWb8hJcn3ZV3Pyz14eK2e9WpUBJoGYHhVpmCQyCtTZBMaHz1oq7DYxvmBh11IeZT7pR%2bZA5eR9vFCyoGs8owm4sz38kK//9k=' /%3e%3c/svg%3e" width="180" data-src="/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" data-srcset="/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript><!----><p class="author__intro">Hiện tại site đang nâng cấp, các bạn xài tạm</p></div></article></div></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2020.</span><span class="footer__links">luckyluu</span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Nâng cao tốc độ website với Chrome DevTools","path":"\u002Fnang-cao-toc-do-website-voi-chrome-dev-tools\u002F","date":"2018-07-09","timeToRead":6,"tags":[{"id":"chrome","title":"chrome","path":"\u002Ftag\u002Fchrome\u002F"},{"id":"performance","title":"performance","path":"\u002Ftag\u002Fperformance\u002F"}],"desc":"Hướng dẫn sử dụng Chrome DevTools để phân tích và tối ưu hóa tốc độ website","content":"\u003C!-- TOC --\u003E\n\u003Cul\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Ca href=\"#b%C6%B0%E1%BB%9Bc-1-ki%E1%BB%83m-tra-trang-web-hi%E1%BB%87n-t%E1%BA%A1i-audits\"\u003EBước 1: Kiểm tra trang web hiện tại (Audits)\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"#x%C3%A1c-%C4%91%E1%BB%8Bnh-baseline\"\u003EXác định baseline\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#%C4%91%E1%BB%8Dc-hi%E1%BB%83u-report\"\u003EĐọc hiểu report\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Ca href=\"#b%C6%B0%E1%BB%9Bc-2-th%E1%BB%AD-nghi%E1%BB%87m\"\u003EBước 2: Thử nghiệm\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"#b%E1%BA%ADt-text-compression\"\u003EBật text compression\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#gi%E1%BA%A3m-k%C3%ADch-th%C6%B0%E1%BB%9Bc-%E1%BA%A3nh\"\u003EGiảm kích thước ảnh\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#b%E1%BB%8F-h%E1%BA%BFt-nh%E1%BB%AFng-resource-n%C3%A0o-block-vi%E1%BB%87c-render\"\u003EBỏ hết những resource nào block việc render\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#h%E1%BA%A1n-ch%E1%BA%BF-t%E1%BB%91i-%C4%91a-c%C3%A1c-x%E1%BB%AD-l%C3%BD-%E1%BB%9F-main-threat\"\u003EHạn chế tối đa các xử lý ở main threat\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#t%E1%BB%95ng-k%E1%BA%BFt\"\u003ETổng kết\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C!-- \u002FTOC --\u003E\n\u003Ch1 id=\"bước-1-kiểm-tra-trang-web-hiện-tại-audits\"\u003E\u003Ca href=\"#b%C6%B0%E1%BB%9Bc-1-ki%E1%BB%83m-tra-trang-web-hi%E1%BB%87n-t%E1%BA%A1i-audits\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBước 1: Kiểm tra trang web hiện tại (Audits)\u003C\u002Fh1\u003E\n\u003Cp\u003EBước đầu tiên này có 2 công dụng chính\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003ELàm thước đo cho các thay đổi đã áp dụng\u003C\u002Fli\u003E\n\u003Cli\u003EGợi ý những thay đổi nào thực sự ảnh hưởng nhiều tới tốc độ\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003ETrong bài này tác giả sẽ sử dụng trang \u003Ca href=\"https:\u002F\u002Fglitch.com\u002Fedit\u002F#!\u002Ftony?path=server.js:1:0\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fglitch.com\u002Fedit\u002F#!\u002Ftony?path=server.js:1:0\u003C\u002Fa\u003E để làm demo\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Feditor.png\"\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"xác-định-baseline\"\u003E\u003Ca href=\"#x%C3%A1c-%C4%91%E1%BB%8Bnh-baseline\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EXác định baseline\u003C\u002Fh2\u003E\n\u003Cp\u003EMở Chrome DevTools, chuyển qua tab \u003Cstrong\u003EAudits\u003C\u002Fstrong\u003E, nó có thể bị ẩn sau nút \u003Cstrong\u003EMore Panels\u003C\u002Fstrong\u003E, có hình cái hải đăng\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Faudits.png\" alt=\"Thiết đặt chính cho baseline\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThiết đặt như hình trên, sau đó click \u003Cstrong\u003ERun Audits\u003C\u002Fstrong\u003E, đợi nó chạy một tí sẽ có 1 cái report performance của site\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Freport.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ENếu thấy bất kỳ lỗi nào trên report, thử chạy trong 1 tab ẩn danh mới\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Ferror.png\"\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"đọc-hiểu-report\"\u003E\u003Ca href=\"#%C4%91%E1%BB%8Dc-hi%E1%BB%83u-report\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EĐọc hiểu report\u003C\u002Fh2\u003E\n\u003Cp\u003ECái số ở trên cùng là thang điểm tổng hợp, càng cao càng tốt\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Foverall.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EỞ mục \u003Cstrong\u003EMetrics\u003C\u002Fstrong\u003E cho kết quả các cách đánh giá, ví dụ như \u003Cstrong\u003EFirst Contentful Paint\u003C\u002Fstrong\u003E cho biết thời gian khi màn hình bắt đầu xuất hiện nội dung cho user, một milestone quan trọng để làm hài lòng user, \u003Cstrong\u003EFirst CPU Idle\u003C\u002Fstrong\u003E là thời điểm mà user có thể tương tác với site như click hay input gì đó, lúc này CPU của user đã có có thể xử lý yêu cầu\u003C\u002Fp\u003E\n\u003Cp\u003EHover lên mỗi metric để hiển thị phần description của nó, và click \u003Cstrong\u003ELearn More\u003C\u002Fstrong\u003E để đọc document.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Ffmp.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EBên dưới Metric là một số hình screenshoot trên từng thời gian khác nhau\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fscreenshots.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EOpportunities\u003C\u002Fstrong\u003E sẽ đưa ra những tips để improve page load\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fopportunities.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fcompression.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EDiagnostics\u003C\u002Fstrong\u003E cung cấp thêm thông tin các nhân tố tác động lên tốc độ load\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fdiagnostics.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003EPassed Audits\u003C\u002Fstrong\u003E là những điều trang hiện tại làm tốt\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fpassed.png\"\u003E\u003C\u002Fp\u003E\n\u003Ch1 id=\"bước-2-thử-nghiệm\"\u003E\u003Ca href=\"#b%C6%B0%E1%BB%9Bc-2-th%E1%BB%AD-nghi%E1%BB%87m\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBước 2: Thử nghiệm\u003C\u002Fh1\u003E\n\u003Cp\u003ETrong mục \u003Cstrong\u003EOppourtunities\u003C\u002Fstrong\u003E của audit report cung cấp gợi ý để improve performance, chúng ta sẽ làm theo những gợi ý này\u003C\u002Fp\u003E\n\u003Ch2 id=\"bật-text-compression\"\u003E\u003Ca href=\"#b%E1%BA%ADt-text-compression\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBật text compression\u003C\u002Fh2\u003E\n\u003Cp\u003ETop trong những điều có thể làm để improve, reduce, compress kích thước của file xuống trước khi send, giống như chúng ta zip file lại trước khi quăng vô email\u003C\u002Fp\u003E\n\u003Cp\u003ECheck cái file dạng text này trong tab \u003Cstrong\u003ENetwork\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fnetwork.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EClick \u003Cstrong\u003Euse large request rows\u003C\u002Fstrong\u003E \u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fnetwork-performance\u002Fimgs\u002Flarge-resource-rows-button.png\"\u003E để hiển thị nhiều thông tin hơn.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Flargerows.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETren cột \u003Cstrong\u003ESize\u003C\u002Fstrong\u003E sẽ có 2 giá trị. Giá trị ở trên là kích thước download, bên dưới là kích thước đã giải nén, nếu 2 giá trị này bằng nhau thì hiển nhiên là resource đó chưa compress trước khi gởi.\u003C\u002Fp\u003E\n\u003Cp\u003EXem giá trị của \u003Ccode class=\"language-text\"\u003Econtent-encoding\u003C\u002Fcode\u003E trong HTTP header cũng sẽ biết được resource này đã compress chưa\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fheaders.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ENhư file \u003Ccode class=\"language-text\"\u003Ebundle.js\u003C\u002Fcode\u003E chúng ta không thấy \u003Ccode class=\"language-text\"\u003Econtent-encoding\u003C\u002Fcode\u003E trong Response Headers, nghĩa là file chưa compress, thường giá compress cho nó sẽ là \u003Ccode class=\"language-text\"\u003Egzip\u003C\u002Fcode\u003E, \u003Ccode class=\"language-text\"\u003Edeflate\u003C\u002Fcode\u003E, hay \u003Ccode class=\"language-text\"\u003Ebr\u003C\u002Fcode\u003E. Xem thêm về các \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FHTTP\u002FHeaders\u002FContent-Encoding#Directives\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ekiểu compress này\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EGiải thích đủ rồi giờ ta đi compress thôi. Mở trang ví dụ của tác giả ra\u003C\u002Fp\u003E\n\u003Cp\u003EFile \u003Ccode class=\"language-text\"\u003Eserver.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fserver.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThêm đoạn code sau vào \u003Ccode class=\"language-text\"\u003Eserver.js\u003C\u002Fcode\u003E. Dùng \u003Ccode class=\"language-text\"\u003Eapp.use(compression())\u003C\u002Fcode\u003E trước \u003Ccode class=\"language-text\"\u003Eapp.use(express.static(&#39;build&#39;))\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E fs \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'fs'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E compression \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'compression'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\napp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Euse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ecompression\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\napp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Euse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eexpress\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Estatic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'build'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EĐợi Glitch deploy một tí. Quay lại trang demo và reload.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Frequests.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EFile \u003Ccode class=\"language-text\"\u003Ebundle.js\u003C\u002Fcode\u003E lúc này đã compress\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fgzip.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EChúng ta quay lại tab \u003Cstrong\u003EAudits\u003C\u002Fstrong\u003E để đánh giá kết quả, click \u003Cstrong\u003EPerform an audit\u003C\u002Fstrong\u003E, dùng các thiết đặt như trước, rồi chạy \u003Cstrong\u003ERun Audit\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Freport2.png\"\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"giảm-kích-thước-ảnh\"\u003E\u003Ca href=\"#gi%E1%BA%A3m-k%C3%ADch-th%C6%B0%E1%BB%9Bc-%E1%BA%A3nh\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EGiảm kích thước ảnh\u003C\u002Fh2\u003E\n\u003Cp\u003ENếu user đang xài điện thoại có kích thước màn hình chỉ 500px chiều ngang thì việc load một cái hình rộng 1500px là ko thông minh lắm.\u003C\u002Fp\u003E\n\u003Cp\u003ETrên trang report, click \u003Cstrong\u003EProperly size images\u003C\u002Fstrong\u003E để xem những hình nào nên resize, ví dụ bên dưới có 4 hình có thể tối ưu\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fresize.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETốt nhất\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EResize lại toàn bộ ảnh trong lúc build\u003C\u002Fli\u003E\n\u003Cli\u003ETạo nhiều kích thước file khác nhau trong lúc build và sử dụng \u003Ccode class=\"language-text\"\u003Esrcset\u003C\u002Fcode\u003E của thẻ \u003Ccode class=\"language-text\"\u003Eimg\u003C\u002Fcode\u003E, như vậy lúc hiển thị, trình duyệt sẽ đảm nhiệm chọn file nào để phù hợp với thiết bị đang xem. \u003Ca href=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ffundamentals\u002Fdesign-and-ux\u002Fresponsive\u002Fimages#relative_sized_images\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EXem thêm\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003ESử dụng image CDN để tự động thay đổi kích thước của hình khi request\u003C\u002Fli\u003E\n\u003Cli\u003EXem thêm \u003Ca href=\"https:\u002F\u002Fimages.guide\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Emột số gợi ý này\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2 id=\"bỏ-hết-những-resource-nào-block-việc-render\"\u003E\u003Ca href=\"#b%E1%BB%8F-h%E1%BA%BFt-nh%E1%BB%AFng-resource-n%C3%A0o-block-vi%E1%BB%87c-render\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBỏ hết những resource nào block việc render\u003C\u002Fh2\u003E\n\u003Cp\u003E\u003Cstrong\u003Erender-blocking resource\u003C\u002Fstrong\u003E là những file javascript hoặc CSS báo với trình duyệt rằng tụi tao file được load xong xui thì mày hả render nội dung trang web.\u003C\u002Fp\u003E\n\u003Cp\u003ETrước tiên tìm xem những resource nào có thể được load mà ko cần chạy lúc page load.\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003EClick \u003Cstrong\u003EEliminate render-blocking resources\u003C\u002Fstrong\u003E để xem các resources, ví dụ ở đây là \u003Ccode class=\"language-text\"\u003Elodash.js\u003C\u002Fcode\u003E và \u003Ccode class=\"language-text\"\u003Ejquery.js\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EẤn Control+Shift+P để mở Command Menu, gõ vào \u003Ccode class=\"language-text\"\u003ECoverage\u003C\u002Fcode\u003E sau đó chọn \u003Ccode class=\"language-text\"\u003EShow Coverage\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fcommandmenu.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EMột tab mới Coverage sẽ mở ra\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fcoverage.png\"\u003E\u003C\u002Fp\u003E\n\u003Col start=\"3\"\u003E\n\u003Cli\u003EClick \u003Cstrong\u003EReload\u003C\u002Fstrong\u003E. Trong tab Coverage sẽ cung cấp thông tin tổng quát về việc các đoạn code trong \u003Ccode class=\"language-text\"\u003Ebundle.js\u003C\u002Fcode\u003E, \u003Ccode class=\"language-text\"\u003Ejquery.js\u003C\u002Fcode\u003E, \u003Ccode class=\"language-text\"\u003Elodash.js\u003C\u002Fcode\u003E trong lúc page load thì nó sẽ được sử dụng bao nhiêu. Kết quả bên dưới cho thấy có 76% code jQuery và 30% của Lodash ko được sử dụng\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fcoveragereport.png\"\u003E\u003C\u002Fp\u003E\n\u003Col start=\"4\"\u003E\n\u003Cli\u003EClick vào \u003Ccode class=\"language-text\"\u003EjQuery\u003C\u002Fcode\u003E. DevTools sẽ mở ra tab Source Panel, những đoạn code nào chạy lúc page sẽ có màu xanh, màu đỏ là phần code không chạy\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003EĐể xem chuyện gì sẽ xảy ra nếu ta không load jQuery và Lodash\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003EMở tab Network\u003C\u002Fli\u003E\n\u003Cli\u003EẤn Control+Shift+P\u003C\u002Fli\u003E\n\u003Cli\u003ENhập \u003Ccode class=\"language-text\"\u003Eblocking\u003C\u002Fcode\u003E sau đó chọn \u003Ccode class=\"language-text\"\u003EShow Request Blocking\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fblocking.png\"\u003E\u003C\u002Fp\u003E\n\u003Col start=\"4\"\u003E\n\u003Cli\u003EClick \u003Ccode class=\"language-text\"\u003EAdd pattern\u003C\u002Fcode\u003E \u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Faddpattern.png\"\u003E, nhập \u003Ccode class=\"language-text\"\u003E\u002Flibs\u002F*\u003C\u002Fcode\u003E sau đó \u003Ccode class=\"language-text\"\u003EEnter\u003C\u002Fcode\u003E để confirm\u003C\u002Fli\u003E\n\u003Cli\u003EReload lại trang. File jQuery và Lodash sẽ được đánh dấu đỏ vì chúng ta ko load nó\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003EXem thử kết quả trên Audit khi chúng ta xóa hẳn 2 file này\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Freport4.png\"\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"hạn-chế-tối-đa-các-xử-lý-ở-main-threat\"\u003E\u003Ca href=\"#h%E1%BA%A1n-ch%E1%BA%BF-t%E1%BB%91i-%C4%91a-c%C3%A1c-x%E1%BB%AD-l%C3%BD-%E1%BB%9F-main-threat\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EHạn chế tối đa các xử lý ở main threat\u003C\u002Fh2\u003E\n\u003Cp\u003EMain threat là thời điểm mà trình duyệt xử lý trước tiên để hiển thị nội dung trang, chẳng hạn như parsing, executing HTML, CSS, Javascript.\u003C\u002Fp\u003E\n\u003Cp\u003EMục tiêu ta sẽ dùng \u003Cstrong\u003EPerformance\u003C\u002Fstrong\u003E panel để analyze những xử lý gì đang xảy ra ở main threat, tìm cách để defer hoặc bỏ hẳn\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003EClick \u003Cstrong\u003EPerformance\u003C\u002Fstrong\u003E tab\u003C\u002Fli\u003E\n\u003Cli\u003EChọn \u003Cstrong\u003ECapture Settings\u003C\u002Fstrong\u003E \u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fcapture.png\"\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EThiết đặt \u003Cstrong\u003ENetwork\u003C\u002Fstrong\u003E ở \u003Cstrong\u003ESlow 3G\u003C\u002Fstrong\u003E và \u003Cstrong\u003ECPU\u003C\u002Fstrong\u003E xuống 6x slowdown để giả lập trang web được load ở nơi mạng chậm rì và thiết bị cùi mía.\u003C\u002Fli\u003E\n\u003Cli\u003EClick \u003Cstrong\u003EReload\u003C\u002Fstrong\u003E \u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Freload.png\"\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fperformance.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Foverview.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EExpand mục \u003Cstrong\u003EUser Timing\u003C\u002Fstrong\u003E, dựa trên kết quả này để đánh giá, ở đây site Tony này đăng chạy React Development mode nên tiêu tốn khá nhiều thời gian\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fusertiming.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EExpand mục \u003Cstrong\u003EMain\u003C\u002Fstrong\u003E, kéo xuống ở dưới cùng, do đang xử dụng framework nên những gì xảy ra ở trên thuộc về framework chúng ta sẽ không can thiệp gì được. Kết quả bên dưới cho thấy hàm \u003Ccode class=\"language-text\"\u003EApp\u003C\u002Fcode\u003E gọi khá nhiều lần đến \u003Ccode class=\"language-text\"\u003EmineBitcoin\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fmine.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EMở mục \u003Cstrong\u003EBottom-Up\u003C\u002Fstrong\u003E để xem nhưng xử lý nào tiêu tốn nhiều thời gian nhất\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Fbottomup.png\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ECột \u003Cstrong\u003ESelf Time\u003C\u002Fstrong\u003E hiển thị bao nhiều thời gian cho việc thực thi function. Ví dụ trên cho thấy 57% thời gian tiêu tốn ở main threat là chon function \u003Ccode class=\"language-text\"\u003EmaineBitcoin\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThay đổi một tí trong source code, chuyển qua mode production, xóa hàm mineBitcoin rồi chạy lại xem kết quả\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fimgs\u002Freport6.png\"\u003E\u003C\u002Fp\u003E\n\u003Ch1 id=\"tổng-kết\"\u003E\u003Ca href=\"#t%E1%BB%95ng-k%E1%BA%BFt\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ETổng kết\u003C\u002Fh1\u003E\n\u003Cul\u003E\n\u003Cli\u003ELuôn bắt đầu với \u003Cstrong\u003EAudit\u003C\u002Fstrong\u003E, xác lập baseline trước khi thực hiện tối ưu\u003C\u002Fli\u003E\n\u003Cli\u003EMỗi lần thay đổi một thứ thôi, sau đó chạy lại Audit để ghi nhận kết quả của thay đổi\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fdevelopers.google.com\u002Fweb\u002Ftools\u002Fchrome-devtools\u002Fspeed\u002Fget-started\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ELink bài gốc\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n","cover_image":""}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.88e72233.js" defer></script><script src="/assets/js/page--src-templates-post-vue.0d21aba4.js" defer></script>
  </body>
</html>