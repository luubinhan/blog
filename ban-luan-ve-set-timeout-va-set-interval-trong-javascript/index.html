<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Bàn luận về setTimeout và setInterval trong javascript - VuiLapTrinh.com</title><meta name="gridsome:hash" content="2220dd7e21ec580c079d73e55205e2a635c3762b"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.21"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="A simple, hackable &amp; minimalistic starter for Gridsome that uses Markdown for content."><meta data-vue-tag="ssr" name="desc" content="Một số vấn đề về setTimeout đáng để bạn cân nhắc trước khi sử dụng"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/blog/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/blog/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/blog/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/blog/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/blog/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/blog/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/blog/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/blog/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/blog/assets/css/0.styles.9ab035e6.css" as="style"><link rel="preload" href="/blog/assets/js/app.24a01750.js" as="script"><link rel="preload" href="/blog/assets/js/page--src-templates-post-vue.da685d0f.js" as="script"><link rel="prefetch" href="/blog/assets/js/page--node-modules-gridsome-app-pages-404-vue.1906fe28.js"><link rel="prefetch" href="/blog/assets/js/page--src-pages-index-vue.267eee57.js"><link rel="prefetch" href="/blog/assets/js/page--src-templates-tag-vue.12682fb0.js"><link rel="stylesheet" href="/blog/assets/css/0.styles.9ab035e6.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/blog/" class="logo active"><span class="logo__text">
    ← VuiLapTrinh.com
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">Bàn luận về setTimeout và setInterval trong javascript</h1><div class="post-meta">
   Posted 2019-11-16.
   <strong>3 min read.</strong></div></div><div class="post content-box"><div class="post__header"><!----></div><div class="post__content"><!-- TOC -->
<ul>
<li><a href="#setinterval">setInterval</a></li>
<li><a href="#settimeout">setTimeout</a></li>
</ul>
<!-- /TOC -->
<p>Nếu bạn cần gọi một hàm <strong>lặp lại</strong> theo một khoản thời gian nhất định trong javascript bạn sẽ dùng gì? Một là dùng <code class="language-text">setInterval</code>  hay là đệ quy <code class="language-text">setTimeout</code></p>
<p>Vì sao bạn nên cân nhắc trước khi sử dụng <code class="language-text">setInterval</code>, nó đã gây ra tội tình gì? Vì sao sẽ tốt hơn nếu chúng ta lắng nghe và đợi một <em>tín hiệu</em> nào đó rồi chạy</p>
<pre class="language-js"><code class="language-js"><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// đợi tính hiệu nào đó rồi thực thi một số việc</span>
  <span class="token comment">// sẽ luôn là lựa chọn tốt nhất</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>Nếu ông bà có dạy <em>đợi mua bò mới đi làm chuồng thì đã muộn</em> không đúng trong trường hợp này. <strong>CÓ</strong> trước hẳn làm gì thì làm.</p>
<h3 id="setinterval"><a href="#setinterval" aria-hidden="true"><span class="icon icon-link"></span></a>setInterval</h3>
<p>Với <code class="language-text">setInterval</code> nó sẽ tiếp tục chạy cho tới khi chúng ta ra lệnh xóa nó hoặc đóng luôn trình duyệt.</p>
<p><code class="language-text">setInterval</code> cam kết đoạn code của chúng ta nó sẽ được đưa vào <strong>STACK</strong> theo đúng một chu kỳ thời gian. <em>Tuy nhiên</em>, đoạn code này của bạn <strong>không được cam kết</strong> sẽ chạy theo đúng chu kỳ thời gian, phụ thuộc vào các yếu tố khác nữa, và đã phần là có độ trễ, theo một cách dân gian ta gọi nó là <strong>HÊN XUI</strong></p>
<p><img src="https://miro.medium.com/max/1837/1*A138JkWveIfKajztvhu60g.png" alt="Bàn luận về setTimeout và setInterval trong javascript"></p>
<p>Thời gian chạy của hàm <code class="language-text">dummyMethod1</code> tốn nhiều thời gian hơn dự tính, <em>lý do thì không rõ</em>.</p>
<blockquote>
<p>Javascript được thiết kế để chạy single thread, nó <strong>không</strong> thực hiện hai công việc cùng một lúc.</p>
</blockquote>
<p>Điều đó có nghĩa, các phương thức khác phía trên stack phải <strong>đợi</strong> cho đến khi <code class="language-text">dummyMethod1</code> làm xong công chuyện của nó.</p>
<p>Thêm một ví dụ khác, nếu hàm khai báo bên trong <code class="language-text">setInterval</code> có thời gian chạy lớn hơn giá trị delay của <code class="language-text">setInterval</code> (ví dụ như hàm gọi ajax), chúng ta sẽ có vấn đề như thế này</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> <span class="token function-variable function">fakeCallToServer</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'returning from server'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">let</span> insideSetInterval <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'insideSetInterval'</span><span class="token punctuation">,</span> insideSetInterval<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">fakeCallToServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//insideSetInterval 14:13:47</span>
<span class="token comment">//insideSetInterval 14:13:49</span>
<span class="token comment">//insideSetInterval 14:13:51</span>
<span class="token comment">//returning from server 14:13:51</span>
<span class="token comment">//insideSetInterval 14:13:53</span>
<span class="token comment">//returning from server 14:13:53</span>
<span class="token comment">//insideSetInterval 14:13:55</span>
<span class="token comment">//returning from server 14:13:55</span></code></pre>
<p>Như kết quả ở trên cho thấy, câu <code class="language-text">console.log(&quot;insideSetInterval&quot;)</code> sẽ liên tục gọi ajax bất kể trước đó đã gọi thành công chưa. Đáng lẽ chúng ta phải kết thúc việc gọi liên tục này, đa phần chúng ta quên <code class="language-text">clearInterval</code>. Nó sẽ tạo ra một hàng đợi <em>dài ngoằn</em> trong stack.</p>
<p>Giờ thử một xử lý tuần tự trong <code class="language-text">setInterval</code></p>
<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">fakeTimeIntensiveOperation</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> <span class="token number">50000000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">getElementById</span><span class="token punctuation">(</span><span class="token string">'random'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> insideTimeTakingFunction  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'insideTimeTakingFunction'</span><span class="token punctuation">,</span> insideTimeTakingFunction<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> insideSetInterval <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'insideSetInterval'</span><span class="token punctuation">,</span> insideSetInterval<span class="token punctuation">)</span><span class="token punctuation">;</span>

    counter<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>counter <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">fakeTimeIntensiveOperation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>counter <span class="token operator">>=</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//insideSetInterval 13:50:53</span>
<span class="token comment">//insideTimeTakingFunction 13:50:55</span>
<span class="token comment">//insideSetInterval 13:50:55 &lt;---- mất tiêu câu gọi lúc 54 giây</span>
<span class="token comment">//insideSetInterval 13:50:56</span>
<span class="token comment">//insideSetInterval 13:50:57</span>
<span class="token comment">//insideSetInterval 13:50:58</span></code></pre>
<p>Những gì đang diễn ra ở trên, với một thao tác tốn <em>kha khá</em> thời gian xử lý, nó mất hẳn đoạn code <code class="language-text">console.log(&quot;insideSetInterval&quot;)</code>, nôm na là nó bị <em>đứt một nhịp</em>, tình huống này xảy ra với Chrome, nó tạo ra một <em>nhịp</em> mới.</p>
<p>Thay vì dùng <code class="language-text">setInterval</code>, chúng ta có thể dùng đệ quy <code class="language-text">setTimeout</code></p>
<h3 id="settimeout"><a href="#settimeout" aria-hidden="true"><span class="icon icon-link"></span></a>setTimeout</h3>
<p>Mặc dù cũng chưa hẳn cam kết 100% đoạn code của chúng chạy đúng theo một chu kỳ đã định với đệ quy <code class="language-text">setTimeout</code>. Chí ít nó cũng không gây ra chuyện đưa hàng đống lệnh chờ chạy vào trong stack</p>
<p><img src="https://miro.medium.com/max/1920/1*A9gNYo3pOtnzuXi30NHjfA.png" alt="Bàn luận về setTimeout và setInterval trong javascript"></p>
<p>Khi thực hiện bằng <code class="language-text">setTimeout</code>, bên trong vòng đệ quy chúng ta đã có bước kiểm tra <strong>có nên</strong> gọi thêm lần nữa không.</p>
<p>Lưu ý khi bạn dùng setTimeout, chớ có <strong>thực thi</strong> hàm đó luôn (kèm dấu <code class="language-text">()</code>), chúng ta chỉ truyền hàm đó thôi</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// ☠ Lỗi</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token comment">// 👍 OK</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>sayHi<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span></code></pre>
<p><strong>Nguồn tham khảo</strong></p>
<p><a href="https://dev.to/akanksha_9560/why-not-to-use-setinterval--2na9" target="_blank" rel="nofollow noopener noreferrer">Why not to use setInterval</a></p>
<p><a href="https://develoger.com/settimeout-vs-setinterval-cff85142555b" target="_blank" rel="nofollow noopener noreferrer">setTimeout VS setInterval</a></p>
<p><a href="https://javascript.info/settimeout-setinterval" target="_blank" rel="nofollow noopener noreferrer">Scheduling: setTimeout and setInterval</a></p>
</div><div class="post__footer"><div class="post-tags"><a href="/blog/tag/hoc-thuat/" class="post-tags__link"><span>#</span> hoc-thuat
		</a><a href="/blog/tag/javascript/" class="post-tags__link"><span>#</span> javascript
		</a></div></div></div><div class="post-comments"></div><div class="author post-author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-52311ff214b737f722259e901102d6b3'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-52311ff214b737f722259e901102d6b3)' width='180' height='180' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAABwEDBAUGCAAC/8QAMxAAAQMCAwcBBgYDAAAAAAAAAQIDEQAEBRIhBhMxQVFhcQciIzJCgbEIFDORodEWgsH/xAAZAQEBAQEBAQAAAAAAAAAAAAAEAwUGAAH/xAAhEQABBAMAAgMBAAAAAAAAAAABAAIDEQQSISJBBRNRMf/aAAwDAQACEQMRAD8A6Pr1fOalmvLyUAk6AnxS5VROUx4oR%2bvmPXNjZYbhti48DcKUt9LRIJAHsgkaxMmO1ByzxnG8PeQ/a3d5bOIIUVJdUOHMifvWjB8c6aMP2q0CfPbC/TW119SVz9YetmOMLYRfWWH3TaSA4pKVNrWOuhgH6UYtkNrsK2stFvYU65nbjesOpyrbnhPIjuKhPhSwDZw4qw5kU5ph6r%2blpCYFNOLKflV5o1JSXMkDlS5xy1qtDo4mfrWe2/xhWEbJ3t400%2b6oZWyGpkBRiTGoSNJj/tVbEXEN/VMyAC1iPUTaS2xjG3bO3IS3ay2HNJc1lR6xPDx3oa4g0RvVlQcSfhFRLrEF3V0LpSAh10layOMzw7eKl3jqLhxsxLaRw4610MUYiAa1ZMxMosrPugpJJ0nlwiiJ%2bH69eZ28NulfuX7R0LTOhygKB8yKxWLaWoC0BJKpgfL2rdfh8sV3G1F9iBTLNnalGbkFuEADzAVVMpwOO6/xCx4izJaAuiSsT8UV8KKyBznmKih1J714OqIiCa5jVdJsqk4ggL9oRPSqDbty4/w/GnLVzKPyypBkaEif4p5N2RwA/anlPtvsrafAW0tJStChKVA8QR0p4ZqQQil1ilz5Y5nGloXKkcNev908G8iUoSCUiiHtVhFhhdou6wu2O6JyuNg/pzwUCdY5a8JrAXtwErWi3RmIEZwZE9utaccm/QEVzKVZjVrltN4JyJMqFdGemuz7OzmyFjbBGS5eQLm6PMuLAMf6iE/SgBavuMPNOON75wKC0tr4GDPtdqO%2bxm0i8ew0O3O7RfJnett6J4mCnXhH81DNDzGK/i%2b4/wBbZSb7S1xQ2IIVBHWvb2BAIioBcVxMCml3KgYFZQZadtSzAK460hCpkk%2bBTzahmmnXnRA0APmadsj0ol1uE2T6r5SEWgbO9K%2bARGs0H7stto3luczSyS3mEKUJIBI66VrvUnGWlJZwlKsuaHnjmgafCk/f9qwD6y%2b2pbjhKU%2bylWaJ8dabjxmtne0HInolrVcYThj18w5clKzl1KOZ/sVLRtJ%2bQbQ7akpum/01oEA9c3bvULB8WtGbRYuW1vvBOVtTivm48eVUt9Z3dwpKlIbaZIhJQZEdJq7fJxDxxHcdWgxnvtFbZz1ItsQCWMWyWb8hJcn3ZV3Pyz14eK2e9WpUBJoGYHhVpmCQyCtTZBMaHz1oq7DYxvmBh11IeZT7pR%2bZA5eR9vFCyoGs8owm4sz38kK//9k=' /%3e%3c/svg%3e" width="180" data-src="/blog/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" data-srcset="/blog/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/blog/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript><!----><p class="author__intro">Hiện tại site đang nâng cấp, các bạn xài tạm</p></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2020. </span><span class="footer__links">Powered by <a href="//gridsome.org"> Gridsome </a></span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Bàn luận về setTimeout và setInterval trong javascript","path":"\u002Fban-luan-ve-set-timeout-va-set-interval-trong-javascript\u002F","date":"2019-11-16","timeToRead":3,"tags":[{"id":"hoc-thuat","title":"hoc-thuat","path":"\u002Ftag\u002Fhoc-thuat\u002F"},{"id":"javascript","title":"javascript","path":"\u002Ftag\u002Fjavascript\u002F"}],"desc":"Một số vấn đề về setTimeout đáng để bạn cân nhắc trước khi sử dụng","content":"\u003C!-- TOC --\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"#setinterval\"\u003EsetInterval\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#settimeout\"\u003EsetTimeout\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C!-- \u002FTOC --\u003E\n\u003Cp\u003ENếu bạn cần gọi một hàm \u003Cstrong\u003Elặp lại\u003C\u002Fstrong\u003E theo một khoản thời gian nhất định trong javascript bạn sẽ dùng gì? Một là dùng \u003Ccode class=\"language-text\"\u003EsetInterval\u003C\u002Fcode\u003E  hay là đệ quy \u003Ccode class=\"language-text\"\u003EsetTimeout\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EVì sao bạn nên cân nhắc trước khi sử dụng \u003Ccode class=\"language-text\"\u003EsetInterval\u003C\u002Fcode\u003E, nó đã gây ra tội tình gì? Vì sao sẽ tốt hơn nếu chúng ta lắng nghe và đợi một \u003Cem\u003Etín hiệu\u003C\u002Fem\u003E nào đó rồi chạy\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token dom variable\"\u003Ewindow\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method-variable function-variable method function property-access\"\u003Eonload\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token arrow operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F đợi tính hiệu nào đó rồi thực thi một số việc\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token comment\"\u003E\u002F\u002F sẽ luôn là lựa chọn tốt nhất\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENếu ông bà có dạy \u003Cem\u003Eđợi mua bò mới đi làm chuồng thì đã muộn\u003C\u002Fem\u003E không đúng trong trường hợp này. \u003Cstrong\u003ECÓ\u003C\u002Fstrong\u003E trước hẳn làm gì thì làm.\u003C\u002Fp\u003E\n\u003Ch3 id=\"setinterval\"\u003E\u003Ca href=\"#setinterval\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EsetInterval\u003C\u002Fh3\u003E\n\u003Cp\u003EVới \u003Ccode class=\"language-text\"\u003EsetInterval\u003C\u002Fcode\u003E nó sẽ tiếp tục chạy cho tới khi chúng ta ra lệnh xóa nó hoặc đóng luôn trình duyệt.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode class=\"language-text\"\u003EsetInterval\u003C\u002Fcode\u003E cam kết đoạn code của chúng ta nó sẽ được đưa vào \u003Cstrong\u003ESTACK\u003C\u002Fstrong\u003E theo đúng một chu kỳ thời gian. \u003Cem\u003ETuy nhiên\u003C\u002Fem\u003E, đoạn code này của bạn \u003Cstrong\u003Ekhông được cam kết\u003C\u002Fstrong\u003E sẽ chạy theo đúng chu kỳ thời gian, phụ thuộc vào các yếu tố khác nữa, và đã phần là có độ trễ, theo một cách dân gian ta gọi nó là \u003Cstrong\u003EHÊN XUI\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F1837\u002F1*A138JkWveIfKajztvhu60g.png\" alt=\"Bàn luận về setTimeout và setInterval trong javascript\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThời gian chạy của hàm \u003Ccode class=\"language-text\"\u003EdummyMethod1\u003C\u002Fcode\u003E tốn nhiều thời gian hơn dự tính, \u003Cem\u003Elý do thì không rõ\u003C\u002Fem\u003E.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EJavascript được thiết kế để chạy single thread, nó \u003Cstrong\u003Ekhông\u003C\u002Fstrong\u003E thực hiện hai công việc cùng một lúc.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003EĐiều đó có nghĩa, các phương thức khác phía trên stack phải \u003Cstrong\u003Eđợi\u003C\u002Fstrong\u003E cho đến khi \u003Ccode class=\"language-text\"\u003EdummyMethod1\u003C\u002Fcode\u003E làm xong công chuyện của nó.\u003C\u002Fp\u003E\n\u003Cp\u003EThêm một ví dụ khác, nếu hàm khai báo bên trong \u003Ccode class=\"language-text\"\u003EsetInterval\u003C\u002Fcode\u003E có thời gian chạy lớn hơn giá trị delay của \u003Ccode class=\"language-text\"\u003EsetInterval\u003C\u002Fcode\u003E (ví dụ như hàm gọi ajax), chúng ta sẽ có vấn đề như thế này\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003EfakeCallToServer\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token function\"\u003EsetTimeout\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token console class-name\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'returning from server'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EDate\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003EtoLocaleTimeString\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E4000\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token function\"\u003EsetInterval\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E insideSetInterval \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EDate\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003EtoLocaleTimeString\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n \u003Cspan class=\"token console class-name\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'insideSetInterval'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E insideSetInterval\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n \u003Cspan class=\"token function\"\u003EfakeCallToServer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2000\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002FinsideSetInterval 14:13:47\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002FinsideSetInterval 14:13:49\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002FinsideSetInterval 14:13:51\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002Freturning from server 14:13:51\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002FinsideSetInterval 14:13:53\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002Freturning from server 14:13:53\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002FinsideSetInterval 14:13:55\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002Freturning from server 14:13:55\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENhư kết quả ở trên cho thấy, câu \u003Ccode class=\"language-text\"\u003Econsole.log(&quot;insideSetInterval&quot;)\u003C\u002Fcode\u003E sẽ liên tục gọi ajax bất kể trước đó đã gọi thành công chưa. Đáng lẽ chúng ta phải kết thúc việc gọi liên tục này, đa phần chúng ta quên \u003Ccode class=\"language-text\"\u003EclearInterval\u003C\u002Fcode\u003E. Nó sẽ tạo ra một hàng đợi \u003Cem\u003Edài ngoằn\u003C\u002Fem\u003E trong stack.\u003C\u002Fp\u003E\n\u003Cp\u003EGiờ thử một xử lý tuần tự trong \u003Ccode class=\"language-text\"\u003EsetInterval\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E counter \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"token function-variable function\"\u003EfakeTimeIntensiveOperation\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E i \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E i\u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E50000000\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E i\u003Cspan class=\"token operator\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token dom variable\"\u003Edocument\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003EgetElementById\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'random'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E insideTimeTakingFunction  \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EDate\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003EtoLocaleTimeString\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token console class-name\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'insideTimeTakingFunction'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E insideTimeTakingFunction\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E timer \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EsetInterval\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Elet\u003C\u002Fspan\u003E insideSetInterval \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EDate\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003EtoLocaleTimeString\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token console class-name\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'insideSetInterval'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E insideSetInterval\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n    counter\u003Cspan class=\"token operator\"\u003E++\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecounter \u003Cspan class=\"token operator\"\u003E==\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token function\"\u003EfakeTimeIntensiveOperation\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecounter \u003Cspan class=\"token operator\"\u003E\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n       \u003Cspan class=\"token function\"\u003EclearInterval\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Etimer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1000\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002FinsideSetInterval 13:50:53\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002FinsideTimeTakingFunction 13:50:55\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002FinsideSetInterval 13:50:55 &lt;---- mất tiêu câu gọi lúc 54 giây\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002FinsideSetInterval 13:50:56\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002FinsideSetInterval 13:50:57\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002FinsideSetInterval 13:50:58\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENhững gì đang diễn ra ở trên, với một thao tác tốn \u003Cem\u003Ekha khá\u003C\u002Fem\u003E thời gian xử lý, nó mất hẳn đoạn code \u003Ccode class=\"language-text\"\u003Econsole.log(&quot;insideSetInterval&quot;)\u003C\u002Fcode\u003E, nôm na là nó bị \u003Cem\u003Eđứt một nhịp\u003C\u002Fem\u003E, tình huống này xảy ra với Chrome, nó tạo ra một \u003Cem\u003Enhịp\u003C\u002Fem\u003E mới.\u003C\u002Fp\u003E\n\u003Cp\u003EThay vì dùng \u003Ccode class=\"language-text\"\u003EsetInterval\u003C\u002Fcode\u003E, chúng ta có thể dùng đệ quy \u003Ccode class=\"language-text\"\u003EsetTimeout\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Ch3 id=\"settimeout\"\u003E\u003Ca href=\"#settimeout\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EsetTimeout\u003C\u002Fh3\u003E\n\u003Cp\u003EMặc dù cũng chưa hẳn cam kết 100% đoạn code của chúng chạy đúng theo một chu kỳ đã định với đệ quy \u003Ccode class=\"language-text\"\u003EsetTimeout\u003C\u002Fcode\u003E. Chí ít nó cũng không gây ra chuyện đưa hàng đống lệnh chờ chạy vào trong stack\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fmiro.medium.com\u002Fmax\u002F1920\u002F1*A9gNYo3pOtnzuXi30NHjfA.png\" alt=\"Bàn luận về setTimeout và setInterval trong javascript\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EKhi thực hiện bằng \u003Ccode class=\"language-text\"\u003EsetTimeout\u003C\u002Fcode\u003E, bên trong vòng đệ quy chúng ta đã có bước kiểm tra \u003Cstrong\u003Ecó nên\u003C\u002Fstrong\u003E gọi thêm lần nữa không.\u003C\u002Fp\u003E\n\u003Cp\u003ELưu ý khi bạn dùng setTimeout, chớ có \u003Cstrong\u003Ethực thi\u003C\u002Fstrong\u003E hàm đó luôn (kèm dấu \u003Ccode class=\"language-text\"\u003E()\u003C\u002Fcode\u003E), chúng ta chỉ truyền hàm đó thôi\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EsayHi\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F ☠ Lỗi\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003EsetTimeout\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EsayHi\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1000\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F 👍 OK\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003EsetTimeout\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EsayHi\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E1000\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Cstrong\u003ENguồn tham khảo\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fdev.to\u002Fakanksha_9560\u002Fwhy-not-to-use-setinterval--2na9\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EWhy not to use setInterval\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fdeveloger.com\u002Fsettimeout-vs-setinterval-cff85142555b\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EsetTimeout VS setInterval\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fjavascript.info\u002Fsettimeout-setinterval\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EScheduling: setTimeout and setInterval\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n","cover_image":""}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/blog/assets/js/app.24a01750.js" defer></script><script src="/blog/assets/js/page--src-templates-post-vue.da685d0f.js" defer></script>
  </body>
</html>