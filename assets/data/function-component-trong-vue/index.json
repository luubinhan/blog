{"hash":"f761b32cc486b7bfe2ae86510c063c7ac35e02e7","data":{"post":{"title":"Function Component trong Vue","path":"/function-component-trong-vue/","slug":"/2019-07-21-function-component-trong-vue","date":"2019-07-21","timeToRead":2,"tags":[{"id":"vuejs","title":"vuejs","path":"/tag/vuejs/"},{"id":"hoc-thuat","title":"hoc-thuat","path":"/tag/hoc-thuat/"}],"desc":"Không được xuất chúng như là function component của React, nên function component trong Vue không có nhiều người để ý. Hy vọng tương lai nó sẽ được nâng cấp để cạnh tranh với bên React đang quảng bá quá rầm rộ.","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#function-component-trong-vue-l%C3%A0-g%C3%AC\">Function Component trong Vue là gì</a></li>\n<li><a href=\"#truy-xu%E1%BA%A5t-d%E1%BB%AF-li%E1%BB%87u\">Truy xuất dữ liệu</a></li>\n<li><a href=\"#attribute\">Attribute</a></li>\n<li><a href=\"#k%E1%BA%BFt\">Kết</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"function-component-trong-vue-là-gì\"><a href=\"#function-component-trong-vue-l%C3%A0-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Function Component trong Vue là gì</h2>\n<p>Component <strong>không</strong> chứa <code>state</code> và không có <code>instance</code>, không thể tham chiếu đến chính nó bằng từ khóa <code>this</code></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// dùng vue template</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span> <span class=\"token attr-name\">functional</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// dùng render function</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\nexport default {\n\tfunctional: true,\n\n\trender(h) {\n\t\t//...\n\t}\n}\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"truy-xuất-dữ-liệu\"><a href=\"#truy-xu%E1%BA%A5t-d%E1%BB%AF-li%E1%BB%87u\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Truy xuất dữ liệu</h2>\n<p>Nếu không có <code>state</code> hay <code>instance</code> vậy làm sao chúng ta có thể tham chiếu đến dữ liệu và phương thức? Vue cung cấp tham số <code>context</code> bên dưới hàm render để chúng ta truy xuất: <strong>prop, children, slot, scopedSlot, data, parent, listener, injection</strong></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span> <span class=\"token attr-name\">functional</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> props<span class=\"token punctuation\">.</span><span class=\"token property-access\">someProp</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\nexport default {\n\tprops: {\n\t\tsomeProp: String\n\t}\n}\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\nexport default {\n\tfunctional: true,\n\n\tprops: {\n\t\tsomeProp: String\n\t},\n\n\trender(h, ctx) {\n\t\tconst someProp = ctx.props.someProp\n\t}\n}\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"attribute\"><a href=\"#attribute\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Attribute</h2>\n<p><strong>attribute không được truyền xuống tự động, ví dụ như <code>class</code> và <code>id</code> mặc định bị bỏ qua</strong></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> src<span class=\"token operator\">/</span>components<span class=\"token operator\">/</span><span class=\"token maybe-class-name\">ArticleTeaser</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">vue</span> <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t&lt;UiHeadline\n\t\tid=\"hyphenCase(article.title)\"\n\t\tclass=\"ArticleTeaser__title\"\n\t\t@click=\"readMore\"\n\t>\t\n\t\t</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> article<span class=\"token punctuation\">.</span><span class=\"token property-access\">title</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">UiHeadline</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> src<span class=\"token operator\">/</span>components<span class=\"token operator\">/</span><span class=\"token maybe-class-name\">UiHeadline</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">vue</span> <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span> <span class=\"token attr-name\">functional</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>slot</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></code></pre>\n<p><code>id</code>, <code>class</code>, kể cả <code>@click</code> cũng không được truyền xuống. Nếu không mở source code đó ai mà biết được tại sao truyền các attribute này xuống mà nó không chạy.</p>\n<p>Hên là có cách giải quyết, nếu bạn đã viết function component thì bạn phải chịu trách nhiệm bổ sung cách giải quyết cho nó</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span> <span class=\"token attr-name\">functional</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span>\n\t\t<span class=\"token attr-name\">v-bind</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>data.attrs<span class=\"token punctuation\">\"</span></span>\n\t\t<span class=\"token attr-name\">v-on</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>listeners<span class=\"token punctuation\">\"</span></span>\n\t<span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>slot</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Tuy nhiên, chưa xong hết được, vì <code>class</code> nó lại không nằm trong <code>data.attrs</code></p>\n<p>Bạn phải thông qua <code>data.class</code>/ <code>data.staticClass</code> và <code>data.style</code>/<code>data.staticStyle</code></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> Đưa vào <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">data.class</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UiHeadline</span></span> <span class=\"token attr-name\">:class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>[<span class=\"token punctuation\">'</span>my-class<span class=\"token punctuation\">'</span>]<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> Đưa vào <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">data.staticClass</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UiHeadline</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>my-class<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></code></pre>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span> <span class=\"token attr-name\">functional</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span>\n\t\t<span class=\"token attr-name\">:class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>[data.class, data.staticClass]<span class=\"token punctuation\">\"</span></span>\n\t\t<span class=\"token attr-name\">:style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>[data.style, data.staticStyle]<span class=\"token punctuation\">\"</span></span>\n\t\t<span class=\"token attr-name\">v-bind</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>data.attrs<span class=\"token punctuation\">\"</span></span>\n\t\t<span class=\"token attr-name\">v-on</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>listeners<span class=\"token punctuation\">\"</span></span>\n\t<span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>slot</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"kết\"><a href=\"#k%E1%BA%BFt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kết</h2>\n<p>Thế quái nào chúng ta lại muốn viết function component, khi mà ta phải tự xử nhiều thứ quá hiển nhiên như vậy.</p>\n<p>Anh Austin Gil ảnh có đo, thì thấy <a href=\"https://codesandbox.io/s/vue-stateful-vs-functional-yterr\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">function component nó nhanh hơn chút xíu so với một component có state</a>. Cái này theo bên React họ lại bảo bây giờ các js engine của trình duyệt nó handle dạng function và class gần như không khác nhiều </p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://stegosource.com/vue-js-functional-components-what-why-and-when/\">Vue.js functional components: What, Why, and When?</a></p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://markus.oberlehner.net/blog/working-with-functional-vue-components/\">Working With Functional Vue.js Components</a></p>\n","cover_image":"","related":[{"id":"24b7e84e1d0d2990366d4f07829affcb","path":"/nhung-ung-dung-tuyet-voi-cua-renderless-component-trong-vue/","title":"Những ứng dụng tuyệt vời của Renderless component trong Vue","desc":"Cùng điểm qua các phương pháp để giải quyết bài toán 'DRY' trong Vue, các bạn sẽ biết thêm các kỹ thuật tương đối nâng cao để lên bật Vue lão làng."},{"id":"5eadb4fb31a8a53f91d7af473359e9f1","path":"/function-component-khac-class-component-nhu-the-nao-trong-react/","title":"Function Component khác Class component như thế nào trong React","desc":"Ngày xưa khi chưa có hook, thì rất dễ để trả lời câu này, nhưng từ ngày hook được sử dụng, câu hỏi lại này lại được đặt ra, ủa vậy 2 thằng nó khác nhau ở điểm nào."},{"id":"4c523279be8f4f4319a15bbafd883c6f","path":"/su-dung-flat-state-trong-vue-store/","title":"Sử dụng flat state trong Vue Store","desc":"Nhét những tập dữ liệu lớn trong Vuex store, đặc biệt là các cấu trúc dữ liệu lồng nhau luôn gây ra vấn đề không sớm thì muộn. Bài viết giới thiệu cách tiếp cận với flat state trong Vuex store"},{"id":"2357b01f4fedb762de94f08f22517a13","path":"/gioi-thieu-higher-order-component-trong-react/","title":"Giới thiệu Higher-Order Component trong React","desc":"Higher-Order Component (HOC) là kỹ thuật mà các bạn lập trình viên Việt Nam rất thích khi nhắc đến React, riêng mình thì không"}]}},"context":{}}