{"hash":"084851c55e1477b257044c7ff732964430b45419","data":{"post":{"title":"Sort trong javascript","path":"/sort-trong-javascript/","slug":"/2017-10-19-sort-trong-javascript","date":"2017-10-19","timeToRead":2,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"}],"desc":"Nếu nghĩ đã hiểu rõ hàm Array.sort() trong javascript, hãy nghĩ lại!","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#v%E1%BA%ADy-mu%E1%BB%91n-sort-m%E1%BA%A3ng-s%E1%BB%91-l%C3%A0m-sao-\">Vậy muốn <code class=\"language-text\">sort</code> mảng số làm sao ?</a></li>\n<li><a href=\"#v%C3%A0-h%C6%A1n-th%E1%BA%BF-n%E1%BB%AFa\">Và hơn thế nữa</a></li>\n</ul>\n<!-- /TOC -->\n<p>Dù cho đang ở level nào của javascript thì trước sau, ít nhiều cũng đụng tới vấn để <strong>sort</strong> một mảng trong javascript, tài liệu trên mozila có câu này hết sức nguy hiểm <strong>sort is not necessarily stable.</strong>, giờ thử xem tại sao gọi là không <strong>stable</strong></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">33</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">98</span><span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span>\nmyArray<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// [ 2, 25, 33, 4, 98 ]</span></code></pre>\n<p>Vâng, <strong>25 > 33 > 4</strong> </p>\n<p>Mảng số này sẽ được javascript sort theo thứ tự alphabet, mỗi giá trị số được đưa về <code class=\"language-text\">string</code> để so sánh.</p>\n<p>Hàm <code class=\"language-text\">sort</code> có thể số truyền vào là <code class=\"language-text\">function</code> dùng để so sánh, nếu bạn không đưa hàm này vào, mặc định nó sẽ convert giá trị cần so sánh về <code class=\"language-text\">string</code> và <strong>so sánh mã unicode</strong> của này</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">]</span>\nnumbers<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// [80, 9]</span>\n\n<span class=\"token keyword\">const</span> strings <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'80'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'9'</span><span class=\"token punctuation\">]</span>\nstrings<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ['80', '9']</span></code></pre>\n<p>Như vậy thì viết như thế này cũng hoàn toàn hợp lệ</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> emojis <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"😍\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"😂\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"😰\"</span><span class=\"token punctuation\">]</span>\nemojis<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// [\"😂\", \"😍\", \"😰\"]</span>\n\n<span class=\"token keyword\">const</span> wtfJavaScript <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">390</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"😂\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2325\"</span><span class=\"token punctuation\">]</span>  \nwtfJavaScript<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// [1, \"2325\", 390, \"😂\"]</span></code></pre>\n<h2 id=\"vậy-muốn-sort-mảng-số-làm-sao-\"><a href=\"#v%E1%BA%ADy-mu%E1%BB%91n-sort-m%E1%BA%A3ng-s%E1%BB%91-l%C3%A0m-sao-\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Vậy muốn <code class=\"language-text\">sort</code> mảng số làm sao ?</h2>\n<p>Như đã đề cập, cần đưa một hàm dùng để so sánh, hàm này đặc điểm như sau</p>\n<ul>\n<li>Nếu giá trị trả về của hàm <code class=\"language-text\">compareFunction(a,b)</code> &#x3C; 0, giá trị a sẽ đứng trước b</li>\n<li>Nếu giá trị trả về = 0, a và b bằng nhau</li>\n<li>Giá trị trả về > 0, a đứng sau b</li>\n</ul>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">33</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">98</span><span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span>\nmyArray<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> a <span class=\"token operator\">-</span> b<span class=\"token punctuation\">)</span> <span class=\"token comment\">// [ 2, 4, 25, 33, 98 ]</span></code></pre>\n<h2 id=\"và-hơn-thế-nữa\"><a href=\"#v%C3%A0-h%C6%A1n-th%E1%BA%BF-n%E1%BB%AFa\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Và hơn thế nữa</h2>\n<p>ECMAScript không đưa ra chuẩn mực nào về thuật toán cho cách <code class=\"language-text\">sort</code>, nghĩa là Javascript engine muốn áp dụng thuật toán nào thì tùy nó, Google's V8 (Javascript engine của Chrome) và NodeJS sử dụng thuật toán <code class=\"language-text\">quick sort</code> và kết quả thì không hẳn là chính xác 100%. Do đó nên nhớ là <code class=\"language-text\">sort</code> trên những trình duyệt khác nhau cũng có khả năng cho kết quả khác nhau nếu nó dùng khác Javascript Engine.</p>\n<p>Nếu rảnh, và có trình, thì nên tự implement một sort function để xài, một số thuật toán sort có thể nghiên cứu như <code class=\"language-text\">InsertionSort</code>, <code class=\"language-text\">MergeSort</code>, <code class=\"language-text\">QuickSort</code></p>\n","cover_image":"","related":[{"id":"6bf82a08f5432f44fc057c0a8a89dd0a","path":"/copy-object-trong-javascript/","title":"Copy object trong javascript","desc":"Luận bàn các cách mà chúng ta copy một object trong javascript, shallow copy và deep copy"},{"id":"1e8ab1319aa1bda2523cf924754b6c46","path":"/dependency-injection-trong-javascript/","title":"Dependency injection trong Javascript","desc":"Dependency injection là một khái niệm hay gặp không chỉ trong Angular mà còn ở nhiều ngôn ngữ lập trình khác, Dependency injection không có gì ghê gớm cả, chỉ do cách dùng từ có vẻ to lớn vậy thôi"},{"id":"1e87499ea6ebb8b16acfd36afb69a738","path":"/cau-dieu-kien-trong-javascript/","title":"Câu điều kiện trong javascript","desc":"Nắm vững conditional expression trong javascript để viết code sạch sẽ hơn"},{"id":"9e18a8f5cfadfdf44a0271d48b1b6e35","path":"/tao-array-trong-javascript/","title":"Tạo Array trong Javascript","desc":"Cùng xem qua các cách để tạo một array mới"}]}},"context":{}}