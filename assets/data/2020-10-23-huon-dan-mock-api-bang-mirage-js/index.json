{"hash":"2a4106ecca1a0d3da8cd127d6742ebf19d0f0109","data":{"post":{"title":"Mock API báº±ng Mirage JS","path":"/2020-10-23-huon-dan-mock-api-bang-mirage-js/","date":"2020-10-23","timeToRead":4,"tags":[{"id":"thuat-thuat","title":"thuat-thuat","path":"/tag/thuat-thuat/"},{"id":"javascript","title":"javascript","path":"/tag/javascript/"}],"desc":"HÆ°á»›ng dáº«n báº¡n giáº£ láº­p API khi chÆ°a cÃ¡c báº¡n BE Ä‘ang báº­n lÃ m viá»‡c lá»›n","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#t%E1%BA%A1i-sao-b%E1%BA%A1n-c%E1%BA%A7n-gi%E1%BA%A3-l%E1%BA%ADp-mock-api\">Táº¡i sao báº¡n cáº§n giáº£ láº­p (mock) API</a></li>\n<li><a href=\"#l%C3%A0m-nh%C6%B0-th%E1%BA%BF-n%C3%A0o\">LÃ m nhÆ° tháº¿ nÃ o</a></li>\n<li><a href=\"#th%C3%AAm-n%E1%BB%99i-dung-%C4%91%E1%BB%99ng\">ThÃªm ná»™i dung Ä‘á»™ng</a></li>\n<li><a href=\"#th%C3%AAm-route-%C4%91%E1%BB%99ng\">ThÃªm route Ä‘á»™ng</a></li>\n<li><a href=\"#gi%E1%BA%A3-l%E1%BA%ADp-nh%E1%BB%AFng-route-ch%E1%BB%89-%C4%91%E1%BB%8Bnh\">Giáº£ láº­p nhá»¯ng route chá»‰ Ä‘á»‹nh</a></li>\n<li><a href=\"#k%E1%BA%BFt\">Káº¿t</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"táº¡i-sao-báº¡n-cáº§n-giáº£-láº­p-mock-api\"><a href=\"#t%E1%BA%A1i-sao-b%E1%BA%A1n-c%E1%BA%A7n-gi%E1%BA%A3-l%E1%BA%ADp-mock-api\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Táº¡i sao báº¡n cáº§n giáº£ láº­p (mock) API</h2>\n<p>FE sáº½ <strong>ko pháº£i Ä‘á»£i</strong> Ä‘áº¿n khi BE lÃ m xong API má»›i cÃ³ thá»ƒ báº¯t Ä‘áº§u integrate, náº¿u báº¡n cÃ³ thá»ƒ mock nhá»¯ng API sáº½ Ä‘Æ°á»£c tráº£ vá» dá»±a trÃªn <em>contract</em> Ä‘Ã£ thá»‘ng nháº¥t, thÃ¬ <em>gáº§n nhÆ°</em> lÃ  khÃ´ng cÃ²n quÃ¡ nhiá»u viá»‡c pháº£i lÃ m khi API lÃ m xong.</p>\n<h2 id=\"lÃ m-nhÆ°-tháº¿-nÃ o\"><a href=\"#l%C3%A0m-nh%C6%B0-th%E1%BA%BF-n%C3%A0o\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>LÃ m nhÆ° tháº¿ nÃ o</h2>\n<p>Äá»ƒ mock API, ká»ƒ thá»ƒ dÃ¹ng nhiá»u cÃ¡ch nhÆ° <a href=\"https://www.npmjs.com/package/json-server\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JSON Server</a>, <a href=\"http://www.mbtest.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">mountebank</a>, hÃ´m nay mÃ¬nh hÆ°á»›ng dáº«n dÃ¹ng <a href=\"https://miragejs.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Mirage</a> mÃ¬nh má»›i biáº¿t, káº¿t há»£p vá»›i Vue nhÃ©, React cÅ©ng tÆ°Æ¡ng tá»± thÃ´i.</p>\n<ol>\n<li>CÃ i Ä‘áº·t vÃ o devDependencies</li>\n</ol>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i miragejs -D</code></pre>\n<ol start=\"2\">\n<li>MÃ¬nh chá»n tá»• chá»©c thÆ° má»¥c theo kiá»ƒu nÃ y, báº¡n cÃ³ thá»ƒ Ä‘á»ƒ nÃ³ á»Ÿ chá»— khÃ¡c thÃ¬ tÃ¹y Ã½</li>\n</ol>\n<pre class=\"language-text\"><code class=\"language-text\">/\nâ”œâ”€â”€ public\nâ”œâ”€â”€ src\nâ”‚   â”œâ”€â”€ api\nâ”‚   â”‚   â””â”€â”€ mock\nâ”‚   â”‚       â”œâ”€â”€ fixtures\nâ”‚   â”‚       â”‚   â””â”€â”€ get-tasks.js\nâ”‚   â”‚       â””â”€â”€ index.js\nâ”‚   â””â”€â”€ main.js\nâ”œâ”€â”€ package.json\nâ””â”€â”€ package-lock.json</code></pre>\n<ol start=\"3\">\n<li>Táº¡o mock server </li>\n</ol>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// api/mock/index.js</span>\n<span class=\"token keyword module\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token maybe-class-name\">Server</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'miragejs'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> environment <span class=\"token operator\">=</span> <span class=\"token string\">'development'</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Server</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    environment<span class=\"token punctuation\">,</span>\n    <span class=\"token function\">routes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// chÃºt thÃªm routes á»Ÿ Ä‘Ã¢y</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<ol start=\"4\">\n<li>Má»Ÿ file dÃ¹ng Ä‘á»ƒ bootstrap app cá»§a chÃºng ta, Ä‘ang dÃ¹ng Vue nÃ³ sáº½ lÃ  <code class=\"language-text\">src/main.js</code> (<code class=\"language-text\">src/index.js</code> náº¿u báº¡n dÃ¹ng vá»›i React)</li>\n</ol>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword module\">import</span> createServer <span class=\"token keyword module\">from</span> <span class=\"token string\">'./api/mock'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// chá»‰ táº¡o fake server trong lÃºc cháº¡y dev mode</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token property-access\">env</span><span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">'development'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>VÃ­ dá»¥ báº¡n gá»i API trong code nhÆ° tháº¿ nÃ y</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/tasks'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>ChÃºng ta sáº½ cáº­p nháº­p láº¡i file <code class=\"language-text\">api/mock/index.js</code>, bá»• sung route <code class=\"language-text\">/api/tasks</code> cho mock server</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// api/mock/index.js</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> environment <span class=\"token operator\">=</span> <span class=\"token string\">'development'</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token function\">routes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/tasks'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        tasks<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> text<span class=\"token operator\">:</span> <span class=\"token string\">\"Feed the cat\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> text<span class=\"token operator\">:</span> <span class=\"token string\">\"Wash the dishes\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token comment\">//...</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>TÆ°Æ¡ng tá»± Ä‘á»ƒ mock cÃ¡c HTTP method khÃ¡c</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/tasks'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">schema<span class=\"token punctuation\">,</span> request</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token spread operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/tasks'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">schema<span class=\"token punctuation\">,</span> request</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token spread operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">patch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/tasks/:id'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">schema<span class=\"token punctuation\">,</span> request</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token spread operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/tasks/:id'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">schema<span class=\"token punctuation\">,</span> request</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token spread operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">del</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/tasks/:id'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">schema<span class=\"token punctuation\">,</span> request</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token spread operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">options</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/tasks'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">schema<span class=\"token punctuation\">,</span> request</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token spread operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Náº¿u má»i thá»© <em>Ãªm Ä‘áº¹p</em> báº¡n sáº½ Ä‘Æ°á»£c thÃ´ng bÃ¡o trÃªn cá»­a sá»• console</p>\n<p><img src=\"https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/07/image-32.png?resize=1208%2C296&#x26;ssl=1\" alt=\"Screenshot of a Mirage response in the console showing data for two task objects with IDs 1 and 2.\"></p>\n<h2 id=\"thÃªm-ná»™i-dung-Ä‘á»™ng\"><a href=\"#th%C3%AAm-n%E1%BB%99i-dung-%C4%91%E1%BB%99ng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ThÃªm ná»™i dung Ä‘á»™ng</h2>\n<p>Báº¡n cÃ³ thá»ƒ dÃ¹ng <a href=\"https://github.com/marak/Faker.js/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">fakerjs</a> Ä‘á»ƒ chÃ¨n thÃªm dá»¯ liá»‡u má»™t cÃ¡ch ngáº«u nhiÃªn.</p>\n<p>Äá»ƒ cÃ³ dá»¯ liá»‡u <strong>init</strong> cho fake server, chÃºng ta sáº½ sá»­ dá»¥ng <code class=\"language-text\">seeds()</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> environment <span class=\"token operator\">=</span> <span class=\"token string\">'development'</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">seeds</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">server</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        server<span class=\"token punctuation\">.</span><span class=\"token property-access\">db</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">loadData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            tasks<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> text<span class=\"token operator\">:</span> <span class=\"token string\">\"Feed the cat\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> text<span class=\"token operator\">:</span> <span class=\"token string\">\"Wash the dishes\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">routes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/tasks'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">schema</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> schema<span class=\"token punctuation\">.</span><span class=\"token property-access\">db</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">tasks</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/tasks'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">schema<span class=\"token punctuation\">,</span> request</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">// nháº­n data Ä‘Æ°á»£c gá»­i tá»« post</span>\n          <span class=\"token keyword\">const</span> task <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">parse</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token property-access\">requestBody</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">data</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">return</span> schema<span class=\"token punctuation\">.</span><span class=\"token property-access\">db</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">tasks</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">insert</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token spread operator\">...</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"thÃªm-route-Ä‘á»™ng\"><a href=\"#th%C3%AAm-route-%C4%91%E1%BB%99ng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ThÃªm route Ä‘á»™ng</h2>\n<p>Route Ä‘á»™ng lÃ  gÃ¬, vÃ­ dá»¥ nhÆ° báº¡n dÃ¹ng phÆ°Æ¡ng thá»©c delete hay update báº±ng má»™t route nhÆ° tháº¿ nÃ y</p>\n<pre class=\"language-text\"><code class=\"language-text\">DELETE: /api/tasks/8lVzv5lv2n6Mu912x19UdKDC08\nPUT: /api/tasks/8lVzv5lv2n6Mu912x19UdKDC08</code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// api/mock/index.js</span>\n<span class=\"token spread operator\">...</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">delete</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/tasks/:id'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">schema<span class=\"token punctuation\">,</span> request</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  \t<span class=\"token comment\">// id tá»« url</span>\n    <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token property-access\">params</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">id</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> schema<span class=\"token punctuation\">.</span><span class=\"token property-access\">db</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">tasks</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">remove</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token spread operator\">...</span></code></pre>\n<p>Náº¿u báº¡n Ä‘á»ƒ Ã½, táº¥t cáº£ Ä‘á»u báº¯t Ä‘áº§u báº±ng <code class=\"language-text\">api</code>, <code class=\"language-text\">namespace</code> sinh ra lÃ  Ä‘á»ƒ phá»¥c vá»¥ Ä‘á»‘i tÆ°á»£ng lÆ°á»i biáº¿ng nhÆ° chÃºng ta</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">routes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// bá»n dÆ°á»›i sáº½ báº¯t Ä‘áº§u báº±ng /api háº¿t</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">namespace</span> <span class=\"token operator\">=</span> <span class=\"token string\">'/api'</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/tasks'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token spread operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">delete</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/tasks/:id'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token spread operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/tasks'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token spread operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"giáº£-láº­p-nhá»¯ng-route-chá»‰-Ä‘á»‹nh\"><a href=\"#gi%E1%BA%A3-l%E1%BA%ADp-nh%E1%BB%AFng-route-ch%E1%BB%89-%C4%91%E1%BB%8Bnh\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Giáº£ láº­p nhá»¯ng route chá»‰ Ä‘á»‹nh</h2>\n<p>Náº¿u nhÆ° báº¡n Ä‘Ã£ cÃ³ má»™t sá»‘ API, má»™t sá»‘ BE Ä‘ang implement, táº¥t nhiÃªn chÃºng ta chá»‰ mock nhá»¯ng API chÆ°a lÃ m, cÃ²n cÃ¡i nÃ o lÃ m rá»“i thÃ¬ cá»© xÃ i cÃ¡i tháº­t luÃ´n</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">routes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// chá»‰ giáº£ láº­p GET /task</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/task'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token spread operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// cÃ²n láº¡i dÃ¹ng hÃ ng tháº­t</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">passthrough</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>NhÆ°ng Ä‘a pháº§n API tháº­t sáº½ náº±m Ä‘Ã¢u Ä‘Ã³ chá»© khÃ´ng pháº£i <code class=\"language-text\">localhost:3000</code>, thÃªm Ä‘oáº¡n sau</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">routes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// api thá»±c náº±m á»Ÿ Ä‘Ã¢y</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">urlPrefix</span> <span class=\"token operator\">=</span> <span class=\"token string\">'https://devenv.ourapp.example'</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// chá»‰ giáº£ láº­p GET /task</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/task'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token spread operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// cÃ²n láº¡i dÃ¹ng hÃ ng tháº­t</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">passthrough</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>LÃºc nÃ y táº¥t cáº£ API Ä‘á»u sáº½ gá»i lÃªn <code class=\"language-text\">https://devenv.ourapp.example</code>, duy chá»‰ gáº·p tháº±ng <code class=\"language-text\"></code><a href=\"https://devenv.ourapp.example/task%60\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://devenv.ourapp.example/task`</a>, mirage sáº½ <strong>intercept</strong> vÃ  Ä‘Æ°a hÃ ng giáº£ vÃ o.</p>\n<h2 id=\"káº¿t\"><a href=\"#k%E1%BA%BFt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Káº¿t</h2>\n<p>Sá»­ dá»¥ng cÅ©ng Ä‘Æ°á»£c vÃ i cÃ¡i thÆ° viá»‡n lÃ m mock API, MirageJS lÃ  tháº±ng mÃ¬nh tháº¥y Æ°ng nháº¥t, khÃ´ng quÃ¡ phá»©c táº¡p, giáº£i quyáº¿t Ä‘Æ°á»£c nhá»¯ng váº¥n Ä‘á» ráº¥t cÄƒn cÆ¡ cá»§a FE.</p>\n<p>Mirage JS cÃ²n khÃ¡ nhiá»u chiÃªu trÃ² thÃº vá»‹ chá» báº¡n khÃ¡m phÃ¡ trÃªn <a href=\"https://miragejs.com/docs/getting-started/introduction/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">tÃ i liá»‡u chÃ­nh thá»©c cá»§a nÃ³</a>, náº¿u tháº¥y hay Ä‘á»«ng quÃªn nháº¥t <strong>like</strong> vÃ  contribute cho dá»± Ã¡n trÃªn <a href=\"https://github.com/miragejs/miragejs\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Github</a></p>\n<p><strong>Happy coding</strong> ğŸ‰ğŸ™Œ</p>\n","cover_image":"","related":[{"id":"c288e21d08d57a4cc39d7265faf2e95f","path":"/2019-09-20-gioi-thieu-iife-cua-javascript/","title":"IIFE trong javascript lÃ  cÃ¡i gÃ¬ váº¡i","desc":"Giá»›i thiá»‡u vá» Ãp-Phi trong javascript, tuy khÃ´ng cÃ²n dÃ¹ng nhiá»u ná»¯a, nhÆ°ng váº«n lÃ  má»™t kiáº¿n thá»©c tá»‘t cáº§n biáº¿t"},{"id":"bf4e1b9fbb5e25cb5df5a22e50560552","path":"/2017-10-20-react-lifecycle-la-gi/","title":"Giáº£i thÃ­ch React Component Lifecycle","desc":"TÃ¬m hiá»ƒu vÃ²ng Ä‘á»i cá»§a má»™t Component React, khi nÃ o vÃ  sá»­ dá»¥ng ra sao"},{"id":"c919a56a3b126ea31da9b991ff155b3d","path":"/2018-01-12-huong-dan-react-router-dom-gioi-thieu-react-router-4/","title":"Giá»›i thiá»‡u React Router v4 (react router dom)","desc":"TrÆ°á»›c Ä‘Ã¢y cÃ³ bÃ i giá»›i thiá»‡u vá» React Router rá»“i, nhÆ°ng giá» React Router 4 ra, gáº§n nhÆ° Ä‘áº­p Ä‘i lÃ m láº¡i chá»© ko káº¿ thá»«a nhiá»u."}]}},"context":{}}