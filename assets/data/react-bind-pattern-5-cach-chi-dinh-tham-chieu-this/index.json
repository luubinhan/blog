{"hash":"185c8bc97550c8db053262169b1d747bb2a28014","data":{"post":{"title":"React Bind Pattern: 5 cách chỉ định tham chiếu this","path":"/react-bind-pattern-5-cach-chi-dinh-tham-chieu-this/","date":"2017-10-11","timeToRead":1,"tags":[{"id":"react","title":"react","path":"/tag/react/"},{"id":"javascript","title":"javascript","path":"/tag/javascript/"}],"desc":"Để thay đổi ngữ cảnh của chữ this trong javascript, sử dụng ở đâu và như thế nào cho hợp lý nhất","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-reactcreateclass\">Sử dụng <code class=\"language-text\">React.createClass</code></a></li>\n<li><a href=\"#bind-trong-l%C3%BAc-render\">Bind trong lúc render</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-arrow-function\">Sử dụng Arrow function</a></li>\n<li><a href=\"#bind-trong-cunstructor\">Bind trong cunstructor</a></li>\n<li><a href=\"#s%E1%BB%AD--d%E1%BB%A5ng-arrow-function-trong-thu%E1%BB%99c-t%C3%ADnh-c%E1%BB%A7a-class\">Sử  dụng <code class=\"language-text\">Arrow Function</code> trong thuộc tính của class</a></li>\n</ul>\n<!-- /TOC -->\n<h1 id=\"sử-dụng-reactcreateclass\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-reactcreateclass\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sử dụng <code class=\"language-text\">React.createClass</code></h1>\n<p>Nếu sử dụng <code class=\"language-text\">React.createClass</code> react tự động <strong>bind toàn bộ</strong> từ khóa <code class=\"language-text\">this</code></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token maybe-class-name\">Contacts</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">createClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">handChange</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Tuy nhiên từ khi ES6 có hỗ trợ <code class=\"language-text\">class</code>, React.createClass có thể bị tách ra các release trong tương lai.</p>\n<h1 id=\"bind-trong-lúc-render\"><a href=\"#bind-trong-l%C3%BAc-render\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Bind trong lúc render</h1>\n<p>Nếu khai báo một component React bằng cách <code class=\"language-text\">extends React.Component</code>, <code class=\"language-text\">this</code> sẽ không được tự động bind như đã nói ở trên</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Contacts</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">handChange</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Cách này tuy là sạch sẽ gọn ràng dễ hiểu, tuy nhiên lại ảnh hưởng nhiều tới performance vì mỗi function sẽ <em>reallocated</em> lúc render. <strong>Kinh nghiệm không bind bằng cách này</strong></p>\n<h1 id=\"sử-dụng-arrow-function\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-arrow-function\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sử dụng Arrow function</h1>\n<p>Tương tự như cách trên, sử dụng <strong>arrow function</strong> để không thay đổi giá trị của <code class=\"language-text\">this</code> lúc render</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Contacts</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token arrow operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">handChange</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Cách này cũng không nên làm vì ảnh hương tới performance luôn</p>\n<h1 id=\"bind-trong-cunstructor\"><a href=\"#bind-trong-cunstructor\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Bind trong cunstructor</h1>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">handleChange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Đây là cách được khuyến cáo sử dụng, nếu thật sự quan tâm tới performance thì nên sử dụng cách này khi muốn bind từ khóa <code class=\"language-text\">this</code>.</p>\n<h1 id=\"sử--dụng-arrow-function-trong-thuộc-tính-của-class\"><a href=\"#s%E1%BB%AD--d%E1%BB%A5ng-arrow-function-trong-thu%E1%BB%99c-t%C3%ADnh-c%E1%BB%A7a-class\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sử  dụng <code class=\"language-text\">Arrow Function</code> trong thuộc tính của class</h1>\n<p>Muốn sử dụng cách này, phải bật tính năng <em>transform-class-properties</em> trong Babel, xem thêm package này tại <a href=\"http://babeljs.io/docs/plugins/transform-class-properties\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://babeljs.io/docs/plugins/transform-class-properties</a></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function-variable function\">handleChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// call this function from render </span>\n  <span class=\"token comment\">// and this.whatever in here works fine.</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Đây cũng là cách mà mình thường sử dụng nhất vì vừa sạch vừa tốt cho performance</p>\n","cover_image":"","related":[{"id":"5056f121bf99a2d9c1b987942c928592","path":"/5-cau-hoi-javascript-va-cach-danh-bai-chung/","title":"5 câu hỏi javascript và cách đánh bại chúng","desc":"Mỗi công ty mỗi kiểu phỏng vấn, điều hay bị phàn nàn trong các buổi phỏng vấn là phần lớn nó không liên quan tới những công việc hằng ngày mà vị trí đó đòi hỏi."},{"id":"83955bb941ea7b4b3979e074ed210fcf","path":"/5-cach-viet-hay-su-dung-trong-react/","title":"5 cách viết hay sử dụng trong React","desc":"Điểm qua 6 React Pattern hay gặp trong React"},{"id":"8eedc3591fcf6d3c79f1d05a3ad61ae6","path":"/danh-sach-do-choi-de-bat-dau-voi-react-native/","title":"Danh sách đồ chơi để bắt đầu với React Native","desc":"Để bắt đầu và đào sâu vọc vạch với React Native, bạn sẽ cần đụng tới những món đồ chơi sau"},{"id":"3a6380cc71f067cbeb40825b4adb02e4","path":"/giai-thich-flux-pattern-theo-phong-cach-john-wick/","title":"Giải thích Flux Pattern theo phong cách John Wick","desc":"Điểm lại các khái niệm trong Flux action, dispatch, store, điều kiện tiên quyết đề đọc bài này là nên xem lại John Wick"}]}},"context":{}}