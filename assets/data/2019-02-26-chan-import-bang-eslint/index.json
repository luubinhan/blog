{"hash":"0b850c1ecbd24bffff99e8513198ea7381cb23bf","data":{"post":{"title":"Không cho phép import với ESlint","path":"/2019-02-26-chan-import-bang-eslint/","slug":"/2019-02-26-chan-import-bang-eslint","date":"2019-02-26","timeToRead":1,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"}],"desc":"Với ESlint chúng ta có thể cấm import những thư viện lớn, tránh để bà con trong team import tá lả.","content":"<p>Sử dụng rule <code class=\"language-inline-text\">no-restricted-imports</code></p>\n<p>Ví dụ chúng ta nghiêm cấm import <em>moment.js</em>, một thư viện khiến cục bundle của chúng ta phình to. Nếu được các bạn nên cân nhắc sử dụng <a href=\"https://date-fns.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">date-fns</a> hoặc <a href=\"https://moment.github.io/luxon/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Luxon</a></p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"rules\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"no-restricted-imports\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"paths\"</span><span class=\"token operator\">:</span>  <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"moment\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Sử dụng date-fns hoặc Luxon đi cưng à\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Khi <em>bọn nó</em> cố ý import sẽ nhận được cảnh báo</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> moment <span class=\"token keyword\">from</span> <span class=\"token string\">'moment'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ví dụ khác, chặn ko cho import <strong>lodash</strong>, khuyến cáo dùng <a href=\"https://www.npmjs.com/package/lodash-es\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">lodash-es</a></p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"rules\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"no-restricted-imports\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"lodash\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Use lodash-es instead!\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Có thể dùng message mặc định, truyền vào một mảng các thư viện bị cấm</p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"rules\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"no-restricted-imports\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"underscore\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"bluebird\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Trong trường hợp phức tạp hơn,  chúng ta có thể chặn tất cả những module nào khớp với pattern <code class=\"language-inline-text\">legacy/*</code>, kiểu như <code class=\"language-inline-text\">import helpers from 'legacy/helpers'</code> là cấm</p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"rules\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"no-restricted-imports\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"patterns\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"legacy/*\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://addyosmani.com/blog/disallow-imports/\">Disallow large imports from JavaScript projects</a></p>\n","cover_image":"","related":[{"id":"3fc010c23eda34d2e63e8432026d5760","path":"/2019-06-07-huong-dang-xu-ly-modal-va-scroll/","title":"Không cho cuộn trang khi mở Modal","desc":"Xử lý cuộn trang khi mở modal"},{"id":"a1364f5619accd5fccc571ac43e797e6","path":"/2020-01-09-phuong-phap-test-react-component/","title":"Phương pháp test React Component","desc":"Bài viết được dịch từ tài liệu chính thức của React"},{"id":"fa6427dbf45972e462dae10dc617d76e","path":"/2017-10-18-import-va-export-trong-javascript/","title":"Import và Export trong Javascript bằng Webpack","desc":"Bàn về các kiểu import và export module trong javascript với Webpack"},{"id":"b96fe15a72c8084949568607882b071a","path":"/2019-09-13-giai-thich-phuong-phap-atomic/","title":"Làm quen với phương pháp Atomic để structure source code, design","desc":"Atom, molecule, organism, template, và page là những khái niệm chính của phương pháp này"}]}},"context":{}}