{"hash":"6000b69201124b9452c41d38889aba5b11cf5e89","data":{"post":{"title":"TÃ¹y biáº¿n code theo tá»‘c Ä‘á»™ máº¡ng","path":"/2019-08-23-tuy-bien-code-theo-toc-do-mang/","date":"2019-08-23","timeToRead":2,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"},{"id":"thu-thuat","title":"thu-thuat","path":"/tag/thu-thuat/"}],"desc":"Responsive vá»›i CSS chÃºng ta tÃ¹y biáº¿n code báº±ng @media, váº­y vá»›i JS, ta thÃªm cÃ¡c Ä‘iá»u kiá»‡n theo tá»‘c Ä‘á»™ máº¡ng báº±ng cÃ¡ch nÃ o?","content":"<p>Responsive vá»›i CSS chÃºng ta tÃ¹y biáº¿n code báº±ng @media, váº­y vá»›i JS, ta thÃªm cÃ¡c Ä‘iá»u kiá»‡n theo tá»‘c Ä‘á»™ máº¡ng báº±ng cÃ¡ch nÃ o?</p>\n<p>ChÃºng ta sáº½ sá»­ dá»¥ng API cá»§a trÃ¬nh duyá»‡t <code class=\"language-text\">navigator.connection.effectiveType</code> Ä‘á»ƒ tá»‘i Æ°u theo tá»‘c Ä‘á»™ káº¿t ná»‘i máº¡ng cá»§a user</p>\n<p>CÃ¡c thÃ´ng tin vá» máº¡ng cá»§a user cÃ³ thá»ƒ láº¥y qua <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Navigator/connection\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">navigator.connection</a>, trong Ä‘Ã³ cÃ³ giÃ¡ trá»‹ <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/NetworkInformation/effectiveType\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">effectiveType</a> lÃ  má»™t trong cÃ¡c giÃ¡ trá»‹ 'slow-2g', '2g', '3g', '4g'</p>\n<p>Chrome 62 trá»Ÿ vá» trÆ°á»›c, chÃºng ta chá»‰ cÃ³ giÃ¡ trá»‹ <code class=\"language-text\">navigator.connection.type</code>, giÃ¡ trá»‹ nÃ y khÃ´ng pháº£i tá»‘c Ä‘á»™ máº¡ng. Máº·c dÃ¹ <code class=\"language-text\">type</code> lÃ  wifi, nhÆ°ng láº¡i lÃ  má»™t wifi cÃ¹i mÃ­a, tá»‘c Ä‘á»™ ngang ngá»­a 2g, Chrome sau nÃ y cÃ³ <em>phÃ¡t minh</em> thÃªm giÃ¡ trá»‹ <code class=\"language-text\">effectiveType</code>, tÃ­nh theo tá»‘c Ä‘á»™ Ä‘i-vá» cá»§a cá»¥c dá»¯ liá»‡u cho chÃ­nh xÃ¡c.</p>\n<p><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--T54UF-7H--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/wqeuhx12frs3k126bmrv.png\" alt=\"ÄÃ¡p á»©ng theo tá»‘c Ä‘á»™ máº¡ng\"></p>\n<p>CÃ²n trÆ°á»ng há»£p, trong nhÃ  cÃ³ thanh niÃªn nÃ o Ä‘Ã³ má»Ÿ link down film Nháº­t, tá»‘c Ä‘á»™ máº¡ng Ä‘ang \"nhÆ° tia chá»›p\", thÃ¬ chuyá»ƒn sang \"cÃ¹i mÃ­a\", biáº¿t Ä‘Æ°á»£c sá»± thay Ä‘á»•i nÃ y cáº§n add thÃªm cÃ¡i listener cho Ä‘á»‘i tÆ°á»£ng <code class=\"language-text\">navigator.connection</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">onConnectionChange</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n        rtt<span class=\"token punctuation\">,</span>\n        downlink<span class=\"token punctuation\">,</span>\n        effectiveType<span class=\"token punctuation\">,</span>\n        saveData\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token dom variable\">navigator</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">connection</span>\n\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Effective network connection type: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>effectiveType<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Downlink Speed/bandwidth estimate: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>downlink<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">Mb/s</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Round-trip time estimate: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>rtt<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">ms</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Data-saver mode on/requested: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>saveData<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token dom variable\">navigator</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">connection</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span> onConnectionChange<span class=\"token punctuation\">)</span></code></pre>\n<p>DÃ¹ng Chrome DevTools Ä‘á»ƒ giáº£ láº­p cÃ¡c tá»‘c Ä‘á»™ máº¡ng khÃ¡c nhau Ä‘á»ƒ test, chá»© Ä‘á»«ng down film Ä‘á»ƒ test tá»‘c Ä‘á»™</p>\n<p><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--gdIz0VyD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/t9zadl65erjhll14zbcp.png\" alt=\"ÄÃ¡p á»©ng theo tá»‘c Ä‘á»™ máº¡ng\"></p>\n<p>Máº¥y trÃ¬nh duyá»‡t xá»‹n xá»‹n nhÆ° Chrome, Opera, Firefox lÃ  dÃ¹ng Ä‘Æ°á»£c <code class=\"language-text\">navigator.connection</code> chá»© khÃ´ng riÃªng gÃ¬ Chrome</p>\n<p>DÃ¹ng má»™t regex Ä‘á»ƒ gom máº¥y káº¿t quáº£ <em>gá» gá»</em> lÃ  máº¡ng cháº­m háº¿t, 3g Viá»‡t Nam thÃ¬ cÅ©ng nhÆ° 2g thÃ´i</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token language-regex\"><span class=\"token charclass class-name\">\\s</span>low-2g<span class=\"token alternation keyword\">|</span>2g<span class=\"token alternation keyword\">|</span>3g</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">test</span><span class=\"token punctuation\">(</span><span class=\"token dom variable\">navigator</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">connection</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">effectiveType</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">connection</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"slow\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">connection</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"fast\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>MÃ¬nh sá»­ dá»¥ng Vue.js, khÃ´ng pháº£i HTML thuáº§n nÃªn Ä‘á»«ng tháº¯c máº¯c sao cÃ³ cÃ¡i <code class=\"language-text\">v-if</code> nhÃ©</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>home<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">v-if</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>connection === <span class=\"token punctuation\">'</span>fast<span class=\"token punctuation\">'</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token comment\">&lt;!-- 1.3MB video --></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theatre<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">autoplay</span> <span class=\"token attr-name\">muted</span> <span class=\"token attr-name\">playsinline</span> <span class=\"token attr-name\">control</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/static/img/doodle-theatre.webm<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video/webm<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/static/img/doodle-theatre.mp4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video/mp4<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- 28KB image --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">v-if</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>connection === <span class=\"token punctuation\">'</span>slow<span class=\"token punctuation\">'</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theatre<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/static/img/doodle-theatre-poster.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></code></pre>\n<p><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--_tvmKtK---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/8jukzhdu62nbghw0cfx3.png\" alt=\"ÄÃ¡p á»©ng theo tá»‘c Ä‘á»™ máº¡ng\"></p>\n<p>Náº¿u báº¡n viáº¿t React, cÃ³ <a href=\"https://mxb.dev/blog/connection-aware-components/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">bÃ i nÃ y cÅ©ng hay</a>, nÃ³i vá» viá»‡c lÃ m component Ä‘Ã¡p á»©ng theo tá»‘c Ä‘á»™ káº¿t ná»‘i</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://dev.to/addyosmani/adaptive-serving-using-javascript-and-the-network-information-api-331p\">ğŸ“œ Adaptive Serving using JavaScript and the Network Information API</a></p>\n","cover_image":"","related":[{"id":"a6bf825820a31e190743bacb8f4eb5a7","path":"/2019-05-15-huong-dan-layout-masonry-bang-flexbox/","title":"LÃ m layout masonry báº±ng flexbox","desc":"Nhá»¯ng ngÃ y lÃ m masonry layout vá»›i cÃ¡c thÆ° viá»‡n jquery Ä‘Ã£ ko cÃ²n ná»¯a"},{"id":"f02dded9ad9f7d551fceb0d7b68f7bcd","path":"/2017-03-07-thoi-dai-cua-pixel-perfect-da-het-phan-2/","title":"Thá»i Ä‘áº¡i cá»§a Pixel Perfect Design Ä‘Ã£ háº¿t tá»« lÃ¢u","desc":"Khi báº¯t dáº§u dÃ n trang cho web, hÃ£y sá»­ dá»¥ng nhá»¯ng há»‡ thá»‘ng grid phá»• biáº¿n hiá»‡n nay nhÆ° Bootstrap Grid. Náº¿u báº¡n lÃ  designer mÃ  chÆ°a biáº¿t Ä‘áº¿n CSS framework nÃ y thÃ¬ thiá»‡t thiáº¿u xÃ³t tráº§m trá»ng..."},{"id":"f1e7e7301a64eaa87386851839352f42","path":"/2020-02-03-huong-dan-cai-dat-eslint-react-javascript-typescript-vscode/","title":"Chá»‰ dáº«n thiáº¿t Ä‘áº·t ESLint trong nhiá»u tÃ¬nh huá»‘ng sá»­ dá»¥ng Javascript, Typescript, React","desc":"ChÃºng ta báº¯t Ä‘áº§u vá»›i Javascript trÆ°á»›c, sau Ä‘Ã³ sáº½ lÃ  TypeScript, vÃ  React. Má»¥c tiÃªu lÃ  lÃ m Ä‘Ãºng, trÃ¡nh trÆ°á»ng há»£p cÃ i package khÃ´ng cáº§n thiáº¿t hoáº·c copy/paste cÃ¡c config tá»›i khi nÃ³ cháº¡y Ä‘Æ°á»£c thÃ¬ thÃ´i."}]}},"context":{}}