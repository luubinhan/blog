{"hash":"6000b69201124b9452c41d38889aba5b11cf5e89","data":{"post":{"title":"T√πy bi·∫øn code theo t·ªëc ƒë·ªô m·∫°ng","path":"/2019-08-23-tuy-bien-code-theo-toc-do-mang/","date":"2019-08-23","timeToRead":2,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"},{"id":"thu-thuat","title":"thu-thuat","path":"/tag/thu-thuat/"}],"desc":"Responsive v·ªõi CSS ch√∫ng ta t√πy bi·∫øn code b·∫±ng @media, v·∫≠y v·ªõi JS, ta th√™m c√°c ƒëi·ªÅu ki·ªán theo t·ªëc ƒë·ªô m·∫°ng b·∫±ng c√°ch n√†o?","content":"<p>Responsive v·ªõi CSS ch√∫ng ta t√πy bi·∫øn code b·∫±ng @media, v·∫≠y v·ªõi JS, ta th√™m c√°c ƒëi·ªÅu ki·ªán theo t·ªëc ƒë·ªô m·∫°ng b·∫±ng c√°ch n√†o?</p>\n<p>Ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng API c·ªßa tr√¨nh duy·ªát <code class=\"language-text\">navigator.connection.effectiveType</code> ƒë·ªÉ t·ªëi ∆∞u theo t·ªëc ƒë·ªô k·∫øt n·ªëi m·∫°ng c·ªßa user</p>\n<p>C√°c th√¥ng tin v·ªÅ m·∫°ng c·ªßa user c√≥ th·ªÉ l·∫•y qua <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Navigator/connection\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">navigator.connection</a>, trong ƒë√≥ c√≥ gi√° tr·ªã <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/NetworkInformation/effectiveType\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">effectiveType</a> l√† m·ªôt trong c√°c gi√° tr·ªã 'slow-2g', '2g', '3g', '4g'</p>\n<p>Chrome 62 tr·ªü v·ªÅ tr∆∞·ªõc, ch√∫ng ta ch·ªâ c√≥ gi√° tr·ªã <code class=\"language-text\">navigator.connection.type</code>, gi√° tr·ªã n√†y kh√¥ng ph·∫£i t·ªëc ƒë·ªô m·∫°ng. M·∫∑c d√π <code class=\"language-text\">type</code> l√† wifi, nh∆∞ng l·∫°i l√† m·ªôt wifi c√πi m√≠a, t·ªëc ƒë·ªô ngang ng·ª≠a 2g, Chrome sau n√†y c√≥ <em>ph√°t minh</em> th√™m gi√° tr·ªã <code class=\"language-text\">effectiveType</code>, t√≠nh theo t·ªëc ƒë·ªô ƒëi-v·ªÅ c·ªßa c·ª•c d·ªØ li·ªáu cho ch√≠nh x√°c.</p>\n<p><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--T54UF-7H--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/wqeuhx12frs3k126bmrv.png\" alt=\"ƒê√°p ·ª©ng theo t·ªëc ƒë·ªô m·∫°ng\"></p>\n<p>C√≤n tr∆∞·ªùng h·ª£p, trong nh√† c√≥ thanh ni√™n n√†o ƒë√≥ m·ªü link down film Nh·∫≠t, t·ªëc ƒë·ªô m·∫°ng ƒëang \"nh∆∞ tia ch·ªõp\", th√¨ chuy·ªÉn sang \"c√πi m√≠a\", bi·∫øt ƒë∆∞·ª£c s·ª± thay ƒë·ªïi n√†y c·∫ßn add th√™m c√°i listener cho ƒë·ªëi t∆∞·ª£ng <code class=\"language-text\">navigator.connection</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">onConnectionChange</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n        rtt<span class=\"token punctuation\">,</span>\n        downlink<span class=\"token punctuation\">,</span>\n        effectiveType<span class=\"token punctuation\">,</span>\n        saveData\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token dom variable\">navigator</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">connection</span>\n\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Effective network connection type: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>effectiveType<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Downlink Speed/bandwidth estimate: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>downlink<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">Mb/s</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Round-trip time estimate: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>rtt<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">ms</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Data-saver mode on/requested: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>saveData<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token dom variable\">navigator</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">connection</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span> onConnectionChange<span class=\"token punctuation\">)</span></code></pre>\n<p>D√πng Chrome DevTools ƒë·ªÉ gi·∫£ l·∫≠p c√°c t·ªëc ƒë·ªô m·∫°ng kh√°c nhau ƒë·ªÉ test, ch·ª© ƒë·ª´ng down film ƒë·ªÉ test t·ªëc ƒë·ªô</p>\n<p><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--gdIz0VyD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/t9zadl65erjhll14zbcp.png\" alt=\"ƒê√°p ·ª©ng theo t·ªëc ƒë·ªô m·∫°ng\"></p>\n<p>M·∫•y tr√¨nh duy·ªát x·ªãn x·ªãn nh∆∞ Chrome, Opera, Firefox l√† d√πng ƒë∆∞·ª£c <code class=\"language-text\">navigator.connection</code> ch·ª© kh√¥ng ri√™ng g√¨ Chrome</p>\n<p>D√πng m·ªôt regex ƒë·ªÉ gom m·∫•y k·∫øt qu·∫£ <em>g·ªù g·ªù</em> l√† m·∫°ng ch·∫≠m h·∫øt, 3g Vi·ªát Nam th√¨ c≈©ng nh∆∞ 2g th√¥i</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token language-regex\"><span class=\"token charclass class-name\">\\s</span>low-2g<span class=\"token alternation keyword\">|</span>2g<span class=\"token alternation keyword\">|</span>3g</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">test</span><span class=\"token punctuation\">(</span><span class=\"token dom variable\">navigator</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">connection</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">effectiveType</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">connection</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"slow\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">connection</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"fast\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>M√¨nh s·ª≠ d·ª•ng Vue.js, kh√¥ng ph·∫£i HTML thu·∫ßn n√™n ƒë·ª´ng th·∫Øc m·∫Øc sao c√≥ c√°i <code class=\"language-text\">v-if</code> nh√©</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>home<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">v-if</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>connection === <span class=\"token punctuation\">'</span>fast<span class=\"token punctuation\">'</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token comment\">&lt;!-- 1.3MB video --></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theatre<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">autoplay</span> <span class=\"token attr-name\">muted</span> <span class=\"token attr-name\">playsinline</span> <span class=\"token attr-name\">control</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/static/img/doodle-theatre.webm<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video/webm<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/static/img/doodle-theatre.mp4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video/mp4<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- 28KB image --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">v-if</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>connection === <span class=\"token punctuation\">'</span>slow<span class=\"token punctuation\">'</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theatre<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/static/img/doodle-theatre-poster.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></code></pre>\n<p><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--_tvmKtK---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/8jukzhdu62nbghw0cfx3.png\" alt=\"ƒê√°p ·ª©ng theo t·ªëc ƒë·ªô m·∫°ng\"></p>\n<p>N·∫øu b·∫°n vi·∫øt React, c√≥ <a href=\"https://mxb.dev/blog/connection-aware-components/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">b√†i n√†y c≈©ng hay</a>, n√≥i v·ªÅ vi·ªác l√†m component ƒë√°p ·ª©ng theo t·ªëc ƒë·ªô k·∫øt n·ªëi</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://dev.to/addyosmani/adaptive-serving-using-javascript-and-the-network-information-api-331p\">üìú Adaptive Serving using JavaScript and the Network Information API</a></p>\n","cover_image":"","related":[{"id":"460e9534f3d5ad0264e84a16d55b6eab","path":"/2019-10-02-giai-thich-jwt-la-gi/","title":"Authentication b·∫±ng Token - B√†i 2: Gi·ªõi thi·ªáu JWT","desc":"Ph·∫ßn m·ªÅm ng√†y nay ƒë∆∞·ª£c ph√°t tri·ªÉn theo h∆∞·ªõng s·ª≠ d·ª•ng token ƒë·ªÉ l√†m authentication, ƒë·ªÉ c√≥ th·ªÉ t√°ch ch·ª©c nƒÉng n√†y ra nh∆∞ m·ªôt ph·∫ßn ƒë·ªôc l·∫≠p, cho ph√©p ph·∫ßn m·ªÅm c√≥ th·ªÉ scale ·ªü m·ª©c cao nh·∫•t"},{"id":"5e3c368c783a403a32943f42293ddde0","path":"/2018-09-12-huong-dan-build-notify-system-voi-react-redux/","title":"L√†m toast notification system trong React/Redux","desc":"C√≥ l·∫Ω ko c√≥ ·ª©ng d·ª•ng web n√†o l·∫°i ko c·∫ßn th√¥ng b√°o ƒë·∫øn user k·∫øt qu·∫£ c·ªßa m·ªôt thao t√°c n√†o ƒë√≥, x√¢y m·ªôt notification system ƒë·ªÉ s·ª≠ d·ª•ng l√† h·∫øt s·ª©c c·∫ßn thi·∫øt"},{"id":"1791be0a9e147d1a847171d0eaedb2be","path":"/2018-04-16-huong-dan-react-native-bat-dau-voi-expo/","title":"Gi·ªõi thi·ªáu Expo, nh·∫≠p m√¥n React Native","desc":"ƒê·ªÉ b·∫Øt ƒë·∫ßu v·ªõi React Native, c√°ch nhanh nh·∫•t kh√¥ng c·∫ßn c√†i Android Studio, Xcode c√≥ ngay m√¥i tr∆∞·ªùng ƒë·ªÉ ch·∫°y test React Native th√¨ Expo ch√≠nh l√† c√°i b·∫°n c·∫ßn"}]}},"context":{}}