{"hash":"6175dd7c207af29dae90f46c78c7f1565a54745e","data":{"post":{"title":"Giới thiệu RxJS và Redux Observer","path":"/gioi-thieu-rx-js-va-redux-observer/","slug":"/2018-07-18-huong-dan-gioi-thieu-ve-redux-observer","date":"2018-07-18","timeToRead":3,"tags":[{"id":"react","title":"react","path":"/tag/react/"},{"id":"javascript","title":"javascript","path":"/tag/javascript/"}],"desc":"Một middleware mạnh hơn redux-thunk, ít phức tạp hơn redux-saga. Chúng ta sẽ điểm qua những khái niệm chính để bắt đầu với middleware này","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#nh%E1%BB%AFng-kh%C3%A1i-ni%E1%BB%87m-ch%C3%ADnh-c%E1%BA%A7n-hi%E1%BB%83u-khi-l%C3%A0m-vi%E1%BB%87c-v%E1%BB%9Bi-rxjs\">Những khái niệm chính cần hiểu khi làm việc với RxJS</a></li>\n<li>\n<p><a href=\"#kh%E1%BB%9Fi-t%E1%BA%A1o-observable\">Khởi tạo <code>Observable</code></a></p>\n<ul>\n<li><a href=\"#m%E1%BB%99t-ho%E1%BA%B7c-nhi%E1%BB%81u-gi%C3%A1-tr%E1%BB%8B\">một hoặc nhiều giá trị</a></li>\n<li><a href=\"#t%E1%BB%AB-m%E1%BB%99t-s%E1%BB%B1-ki%E1%BB%87n\">Từ một sự kiện</a></li>\n<li><a href=\"#t%E1%BB%AB-m%E1%BB%99t-promise\">Từ một promise</a></li>\n</ul>\n</li>\n<li><a href=\"#mergemap--alias-l%C3%A0-flatmap\">mergeMap ( alias là flatMap)</a></li>\n<li><a href=\"#redux-observable\">Redux-Observable</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"những-khái-niệm-chính-cần-hiểu-khi-làm-việc-với-rxjs\"><a href=\"#nh%E1%BB%AFng-kh%C3%A1i-ni%E1%BB%87m-ch%C3%ADnh-c%E1%BA%A7n-hi%E1%BB%83u-khi-l%C3%A0m-vi%E1%BB%87c-v%E1%BB%9Bi-rxjs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Những khái niệm chính cần hiểu khi làm việc với RxJS</h2>\n<ul>\n<li><strong>Observable</strong> một interface sẽ lắng nghe những notification trong <em>một khoản thời gian</em> và push cho những interface khác sẽ làm gì đó khi có notification này.</li>\n<li><strong>Subscription</strong> Khi <em>observable</em> bắt đầu được thực thi, ví dụ như lắng nghe sự kiện, và push</li>\n<li><strong>Observer</strong> một interface sẽ làm gì đó với data được push từ <em>observable</em></li>\n<li><strong>Operators</strong> các phương thức được sử dụng để tương tác với output của <em>Observable</em></li>\n</ul>\n<p>Ví dụ đăng ký listen lên một sự kiện nào đó</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nbutton<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Clicked'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Trong RxJS chúng ta viết như sau</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> button <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Clicked!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"khởi-tạo-observable\"><a href=\"#kh%E1%BB%9Fi-t%E1%BA%A1o-observable\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Khởi tạo <code>Observable</code></h2>\n<p>Chúng ta có thể tạo observable bằng cách convert từ</p>\n<h3 id=\"một-hoặc-nhiều-giá-trị\"><a href=\"#m%E1%BB%99t-ho%E1%BA%B7c-nhi%E1%BB%81u-gi%C3%A1-tr%E1%BB%8B\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>một hoặc nhiều giá trị</h3>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span><span class=\"token punctuation\">.</span><span class=\"token keyword module\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h3 id=\"từ-một-sự-kiện\"><a href=\"#t%E1%BB%AB-m%E1%BB%99t-s%E1%BB%B1-ki%E1%BB%87n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Từ một sự kiện</h3>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span><span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h3 id=\"từ-một-promise\"><a href=\"#t%E1%BB%AB-m%E1%BB%99t-promise\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Từ một promise</h3>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromPromise</span><span class=\"token punctuation\">(</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/users'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Chúng ta cũng có thể tạo observable sử dụng <code>Observable.create</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">create</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">observer</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  observer<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">next</span><span class=\"token punctuation\">(</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  observer<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">next</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  observer<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">next</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    observer<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">next</span><span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  observer<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">complete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfoo<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Để ý là <code>observer</code> có phương thức <code>next</code> và <code>complete</code>.</p>\n<h2 id=\"mergemap--alias-là-flatmap\"><a href=\"#mergemap--alias-l%C3%A0-flatmap\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>mergeMap ( alias là flatMap)</h2>\n<p>Phương thức phổ biến nhất cho phép transform output của observable.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>text<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>input1<span class=\"token punctuation\">'</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>text<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>input2<span class=\"token punctuation\">'</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Combined value: <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Nếu chúng ta muốn <code>subscribe</code> lên sự kiện user input giá trị vô <code>&#x3C;input/></code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> input1 <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#input1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> input2 <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#input2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> span <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'span'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> obs1 <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>input1<span class=\"token punctuation\">,</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span> <span class=\"token arrow operator\">=></span> span<span class=\"token punctuation\">.</span><span class=\"token property-access\">textContext</span> <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> obs2 <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>input2<span class=\"token punctuation\">,</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span> <span class=\"token arrow operator\">=></span> span<span class=\"token punctuation\">.</span><span class=\"token property-access\">textContext</span> <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Giá trị span sẽ thay đổi khi ta nhập giá trị cho 1 trong 2 input, tuy nhiên nó sẽ override giá trị cũ. Nếu muốn có một kết quả combine từ cả 2 giá trị nhập vào từ input, ta <code>mergeMap</code> 2 observable lại.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> obs1 <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>input1<span class=\"token punctuation\">,</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> obs2 <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>input2<span class=\"token punctuation\">,</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nobs1<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">mergeMap</span><span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\">event1</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword control-flow\">return</span> obs2<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event2</span> <span class=\"token arrow operator\">=></span> event1<span class=\"token punctuation\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">value</span> <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> event2<span class=\"token punctuation\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">value</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\">combineValue</span> <span class=\"token arrow operator\">=></span> span<span class=\"token punctuation\">.</span><span class=\"token property-access\">textContext</span> <span class=\"token operator\">=</span> combineValue\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"redux-observable\"><a href=\"#redux-observable\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Redux-Observable</h2>\n<p>Redux-Observable cho phép chúng ta đưa các khái niệm của RxJS vào trong Redux. Nó sẽ tạo ra các Observable lắng nghe <code>action</code>, xào nấu trước khi <code>dispatch</code> một action khác đến <code>reducer</code>. Nó được gọi một cái tên chảnh chó là <strong>Epic</strong> (mình gọi nó là chảnh chó vì mình thấy nó méo có gì để được gọi là epic cả)</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> ajax <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'rxjs/observable/dom/ajax'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Action creators</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchUser</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">username</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">'FETCH_USER'</span><span class=\"token punctuation\">,</span> payload<span class=\"token operator\">:</span> username <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchUserFulfilled</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">payload</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">'FETCH_USER_FULFILLED'</span><span class=\"token punctuation\">,</span> payload <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Epic</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchUserEpic</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">action$</span> <span class=\"token arrow operator\">=></span>\n  action$<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">ofType</span><span class=\"token punctuation\">(</span><span class=\"token string\">'FETCH_USER'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">mergeMap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">action</span> <span class=\"token arrow operator\">=></span>\n      ajax<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getJSON</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://api.github.com/users/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>action<span class=\"token punctuation\">.</span><span class=\"token property-access\">payload</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token arrow operator\">=></span> <span class=\"token function\">fetchUserFulfilled</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Dispatch FETCH_USER action</span>\n<span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">fetchUser</span><span class=\"token punctuation\">(</span><span class=\"token string\">'torvalds'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Khi action type <code>FETCH_USER</code> được dispatch ra, <code>fetchUserEpic</code> lắng nghe tất cả sự kiện, nếu type là <code>FETCH_USER</code>, nó không đưa ngay xuống <code>reducer</code> của redux mà dừng lại và gọi ajax, sau khi có kết quả ajax, nó lại dispatch ra một sự kiện khác với type là <code>FETCH_USER_FULFILLED</code>, rồi trả về cho <code>reducer</code></p>\n<p><a href=\"https://medium.com/@johnvoon/understanding-rxjs-and-redux-observable-93d953d436c6\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Link bài gốc</a>\n<a href=\"http://www.hay16.com/videob59tcUwfpWU/mergemaprxjs-tutorial-watch.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Video giải thích mergeMap</a></p>\n","cover_image":"","related":[{"id":"e9d2a9d4a3ed5b8ecc39c580a3f2ffb8","path":"/gioi-thieu-markdown/","title":"Giới thiệu Markdown","desc":"Markdown vở lòng cho bạn nào chưa biết"},{"id":"0be257d7b6339261c05ba76120350279","path":"/gioi-thieu-react-router/","title":"Giới thiệu React Router","desc":"React không phải một framework, nó chỉ là một thư viện javascript, bởi vì vậy nó không thể giải quyết tất cả các yêu cầu một ứng dụng. Việc mà React làm rất tốt là tạo component và cách thức quản lý state của component, nhưng để tạo một Single Page App (sẽ viết tắt là SPA) phức tạp, nó cần những thư viện khác nữa, đầu tiên cần nhắc đến là React Router"},{"id":"5d93819d1a5c10be427112a7e0bf625b","path":"/gioi-thieu-react-memo/","title":"Giới thiệu React.memo","desc":"Api mới của React 16.6"},{"id":"fa886c080ce0cc5ae7c411b14a1be10f","path":"/gioi-thieu-react-portal/","title":"Giới thiệu React Portal","desc":"Tìm hiểu về Portals, bản hỗ trợ chính thức của react-dom"}]}},"context":{}}