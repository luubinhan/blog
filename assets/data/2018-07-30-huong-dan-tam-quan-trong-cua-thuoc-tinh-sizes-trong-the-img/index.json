{"hash":"e7cd9c5d01ce1d92a79e9b2d1377b8916f87e6c3","data":{"post":{"title":"Tầm quan trọng của thuộc tính sizes, srcset trong thẻ img","path":"/2018-07-30-huong-dan-tam-quan-trong-cua-thuoc-tinh-sizes-trong-the-img/","date":"2018-07-30","timeToRead":3,"tags":[{"id":"css","title":"css","path":"/tag/css/"},{"id":"mobile-web-specialist","title":"mobile-web-specialist","path":"/tag/mobile-web-specialist/"}],"desc":"Hướng dẫn sử dụng srcset và sizes để tối ưu việc load ảnh responsive","content":"<h2 id=\"srcset\"><a href=\"#srcset\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">srcset</code></h2>\n<p>Công dụng của thuộc tính <code class=\"language-text\">srcset</code> trên thẻ <code class=\"language-text\">&lt;img/&gt;</code> là cho phép chúng ta cung cấp các file với kích thước khác file được cung cấp trên <code class=\"language-text\">src</code>, chúng ta có thể sử dụng <code class=\"language-text\">srcset</code> vô tư, nếu trình duyệt ko hổ trợ <code class=\"language-text\">srcset</code> (IE cũ), nó đơn giản chỉ load file trên thuộc tính <code class=\"language-text\">src</code>.</p>\n<p>Trên thuộc tính <code class=\"language-text\">srcset</code> chúng ta báo kích thước của hình này luôn, <code class=\"language-text\">medium.jpg 1000w</code> ( có nghĩa hình này width=1000px ) đa phần dùng width có thể giải quyết tất cả các trường hợp, trình duyệt không cần download vẫn biết được độ rộng của file, trên cơ sở đó, trình duyệt tính toán với viewport hiện tại và download hình thích hợp</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>small.jpg<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">srcset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>medium.jpg 1000w, large.jpg 2000w<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>luckyluu blog | Tầm quan trọng của thuộc tính sizes, srcset trong thẻ img<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">></span></span></code></pre>\n<p>Thử xem trình duyệt đã tính toán thế nào. </p>\n<p>Thí dụ kích thước thiết bị là <em>320px</em>, 1x (là giá trị <em>density</em> của màn hình, xem ở đây <a href=\"https://pixensity.com/list/phone/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://pixensity.com/list/phone/</a>, hoặc check bằng javascript <code class=\"language-text\">window.devicePixelRatio</code>).</p>\n<p>Chúng ta có 3 hình</p>\n<ul>\n<li>small.jpg: 500px wide</li>\n<li>medium.jpg: 1000px wide</li>\n<li>large.jpg: 2000px wide</li>\n</ul>\n<pre class=\"language-text\"><code class=\"language-text\">500 / 320 = 1.5625\n1000 / 320 = 3.125\n2000 / 320 = 6.25</code></pre>\n<p><em>Trình duyệt</em> - màn hình của mày là 1x, 1.5625 là tỉ lệ gần nhất với 1, tuy hơi cao nhưng tốt hơn mấy thằng kia. Tao load thằng <code class=\"language-text\">small.jpg</code></p>\n<p>Nếu là màn hình 2x (nó sẽ lấy gía trị của <code class=\"language-text\">window.devicePixelRatio</code>), trình duyệt sẽ chọn 3.125 vì nó gần với 2 nhất.</p>\n<p>Bên cạnh đơn vị <code class=\"language-text\">w</code>, tương ứng với kích thước của hình, chúng ta cũng có thể dùng đơn vị <code class=\"language-text\">x</code> tương ứng cho <strong>độ</strong> <em>density</em> của màn hình</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> \n  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>image_2x.jpg<span class=\"token punctuation\">\"</span></span> \n  <span class=\"token attr-name\">srcset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>image_2x.jpg 2x, image_1x.jpg 1x<span class=\"token punctuation\">\"</span></span> \n  <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>luckyluu blog | Tầm quan trọng của thuộc tính sizes, srcset trong thẻ img<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">/></span></span></code></pre>\n<h2 id=\"sizes\"><a href=\"#sizes\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-text\">sizes</code></h2>\n<p>Bên cạnh <code class=\"language-text\">srcset</code>, một thuộc tính rất hay ho khác là <code class=\"language-text\">sizes</code>, nó cũng sẽ giúp trình duyệt có cơ sở để load hình nào</p>\n<blockquote>\n<p>Nếu không dùng thuộc tính <code class=\"language-text\">sizes</code>. Trình duyệt ngầm hiểu chúng ta muốn render ảnh ở độ rộng 100vw.</p>\n</blockquote>\n<p><img src=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1531489586/640-version_txwye1.png\" alt=\"Tầm quan trọng của thuộc tính sizes trong thẻ img\"></p>\n<p>Không phải lúc nào hình sẽ hiển thị hết 100vw của màn hình, ví dụ bạn có mà hình rộng 1000px, hình không hiển thị hết chiều ngang của màn hình, nhỏ hơn một nữa đi, tức là bạn chỉ cần hình có kích thước <code class=\"language-text\">1000/2 = 500px</code> là đủ xài</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">img</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">float</span><span class=\"token punctuation\">:</span> left<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> <span class=\"token number\">500</span><span class=\"token unit\">px</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Trước khi trình duyệt load được css, nó sẽ <strong>ko biết được</strong> là hình chỉ có hiển thị tối đa 500px, chúng ta báo với nó, \"Ê, hình này của tao chỉ hiển thị tối đa là 500px nhé\" bằng HTML</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>small.jpg<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">srcset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>medium.jpg 1000w, large.jpg 2000w<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>luckyluu blog | Tầm quan trọng của thuộc tính sizes, srcset trong thẻ img<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">sizes</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>500px<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">></span></span></code></pre>\n<p>Nhưng trên điện thoại, chúng ta muốn khác, hình này sẽ full hết 100% viewport,</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@media</span> <span class=\"token punctuation\">(</span><span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> <span class=\"token number\">600</span><span class=\"token unit\">px</span><span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">img</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">float</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token unit\">vw</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Để báo với trình duyệt có một sự thay đổi *nhỏ** trên nếu màn hình &#x3C; 600px, chúng ta khai báo thuộc tính <code class=\"language-text\">sizes</code> như sau</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> \n  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>small.jpg<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">srcset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>medium.jpg 1000w, large.jpg 2000w<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>luckyluu blog | Tầm quan trọng của thuộc tính sizes, srcset trong thẻ img<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">sizes</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>(max-width: 600px) 100vw, 500px<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">/></span></span></code></pre>\n<p>Đoạn trên nếu dịch rad: ê trình duyệt, hình này sẽ render kích thước 100vw khi viewport &#x3C; 600px, còn lại cứ dùng kích thước 500px</p>\n<p><img src=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1531489882/320-version_afwzxa.png\" alt=\"Tầm quan trọng của thuộc tính sizes trong thẻ img\"></p>\n<p>Kích thước trên mobile</p>\n<p><img src=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1531490069/640-version-mobile_l15ira.png\" alt=\"Tầm quan trọng của thuộc tính sizes trong thẻ img\"></p>\n<p><a href=\"https://css-tricks.com/sometimes-sizes-is-quite-important/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">css-tricks.com/sometimes-sizes-is-quite-important</a></p>\n<p><a href=\"https://css-tricks.com/responsive-images-youre-just-changing-resolutions-use-srcset/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Responsive Images: If you’re just changing resolutions, use srcset.</a></p>\n","cover_image":"","related":[{"id":"218e6c4e047054bf9f0bd059f25580d8","path":"/2019-04-25-cac-thuoc-tinh-dung-tren-the-link-can-biet/","title":"Preload, prefetch và các thuộc tính khác trên link","desc":"Cùng tìm hiểu các attribute sử dụng trên thẻ link để cải thiện hiệu năng"},{"id":"2789a28cea8d9db34303eb0ac813a357","path":"/2018-05-21-huong-dan-thuoc-tinh-counter-increment-va-counter-reset/","title":"Hướng dẫn sử dụng thuộc tính counter-reset và counter-increment","desc":"Nếu muốn đánh số tự động trong css, ta thường sử dụng đến kiểu display list-style, bài này giới thiệu một thuộc tính khác ít ai biết tới"},{"id":"1919bceb9000f1bff00371b6a3dfd527","path":"/2019-10-28-gioi-thieu-ve-do-phuc-tap-cua-thuat-toan/","title":"Độ phức tạp của thuật toán","desc":"Một cách chuẩn hóa trong ngành lập trình để đánh giá độ phức tạp của giải thuật"},{"id":"d7c5a1be37f6b7aa2083d3afe80563b9","path":"/2018-08-06-huong-dan-bat-dau-voi-firebase/","title":"Những tính năng cở bản của Firebase","desc":"Năm 2016 google giới thiệu Firebase. Khi bắt đầu phát triển ứng dụng điện thoại, bạn sẽ cần đến server và một developer để làm việc với server"}]}},"context":{}}