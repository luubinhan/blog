{"hash":"b9b11ed0eef2e60f7237ef3758917749cdab929d","data":{"post":{"title":"Ứng dụng hay của flatMap","path":"/2022-02-03-ung-dung-hay-cua-flatmap/","slug":"2022-02-03-ung-dung-hay-cua-flatmap","date":"2022-02-03","timeToRead":1,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"},{"id":"beginner","title":"beginner","path":"/tag/beginner/"},{"id":"thu-thuat","title":"thu-thuat","path":"/tag/thu-thuat/"}],"desc":"Thay thế hàm filter và map bằng flatMap","content":"<p>Sử dụng <code class=\"language-inline-text\">flatMap</code> có thể giúp code ngắn hơn, ví dụ trong tình huống bên dưới</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// filter các giá trị âm</span>\n<span class=\"token comment\">// nhân đôi các giá trị dương còn lại</span>\n<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span>\n\t<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num</span> <span class=\"token operator\">=></span> num <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num</span> <span class=\"token operator\">=></span> num <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// -> [2, 6, 10]</span></code></pre></div>\n<p>Cách này không có gì sai, nhưng nếu muốn viết bằng một phương pháp khác thì sao?</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">flatMap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>num <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>num <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// -> [2, 6, 10]</span></code></pre></div>\n<p>Nếu muốn rút ngắn hơn nữa</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">flatMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">num</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>num <span class=\"token operator\">>=</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">[</span>num <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n<span class=\"token comment\">// -> [2, 6, 10]</span></code></pre></div>\n<p>Tuy nhiên, nếu xét về mặt viết-sao-cho-dễ-đọc thì có vẻ dùng <code class=\"language-inline-text\">filter</code> và <code class=\"language-inline-text\">map</code> sẽ tốt hơn, <code class=\"language-inline-text\">flatMap</code> được cái viết ngắn hơn.</p>\n<p>Túm lại, ưng mắt cách nào hơn thì bạn viết cách đó.</p>\n<ul>\n<li><a href=\"https://www.stefanjudis.com/snippets/filter-and-map-array-values-with-a-flatmap-one-liner/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Filter and map Array values with a flatMap one-liner</a></li>\n</ul>\n","cover_image":"","related":[{"id":"d6b471fa675ea8216c96c6740a2f1218","path":"/2019-05-26-ung-dung-cao-cap-cua-reduce/","title":"Một vài ứng dụng hay ho của reduce","desc":"Hãy học sử dụng reduce, vượt qua những ví vụ căn bản bằng cộng, trừ, nhân, chia"},{"id":"2aec3bdb98d3d116d4be25b134ee21c7","path":"/2022-06-20-ung-dung-abort-controller/","title":"Một vài ứng dụng của AbortController","desc":""},{"id":"9ca0b5c04de8da6a6c9cebcb1fe8255d","path":"/2019-12-24-4-ung-dung-cua-array-from/","title":"4 ứng dụng của Array.from","desc":"Vài ứng dụng nhỏ của hàm Array.from"},{"id":"72bc56d7c8b93c398d09bb2de77cd1e8","path":"/2018-06-21-huong-dan-mot-so-ung-dung-cua-middleware/","title":"Một số ứng dụng của middleware","desc":"Tiếp theo bài trước về middleware, ứng dụng với các trường hợp thực tế"}]}},"context":{}}