{"hash":"5d40f4d8ed43f512e4021e3d8491c32126632fe7","data":{"tag":{"title":"step-by-step","belongsTo":{"edges":[{"node":{"id":"8ecfd01e6cdccd57e55091b6e6b440f5","title":"Hướng dẫn tạo một package, publish nó lên npm","path":"/2019-06-06-huong-dan-publish-package-len-npm/","date":"2019-06-06","timeToRead":2,"desc":"Nếu bạn có một package nào đó muốn chia sẽ cùng mọi người trên npm, thì đây là cách bạn publish package make-by-me như vậy lên npm","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#package-l%C3%A0-g%C3%AC-v%C3%A0-module-l%C3%A0-g%C3%AC\">Package là gì, và module là gì</a></li>\n<li><a href=\"#t%E1%BA%A1o-package\">Tạo package</a></li>\n<li><a href=\"#ki%E1%BB%83m-tra-%E1%BB%9F-local\">Kiểm tra ở local</a></li>\n<li><a href=\"#publish-l%C3%AAn-npm\">Publish lên NPM</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-th%C3%AAm-th%C6%B0-vi%E1%BB%87n\">Sử dụng thêm thư viện</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"package-là-gì-và-module-là-gì\"><a href=\"#package-l%C3%A0-g%C3%AC-v%C3%A0-module-l%C3%A0-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Package là gì, và module là gì</h2>\n<p>Npm sẽ phân biệt 2 khái niệm <strong>package</strong> và <strong>module</strong> </p>\n<p><strong>Package</strong> là một thư mục chứa một gói phần mềm được mô tả bởi file <code class=\"language-inline-text\">package.json</code></p>\n<p><strong>Module</strong> là một thư mục chứa file <code class=\"language-inline-text\">package.json</code>, chứa một <code class=\"language-inline-text\">default export</code>, cho phép loading module này bằng <code class=\"language-inline-text\">require()</code> trong Node</p>\n<h2 id=\"tạo-package\"><a href=\"#t%E1%BA%A1o-package\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tạo package</h2>\n<p>Tạo một thư mục mới, init package npm bằng <code class=\"language-inline-text\">npm init</code> hoặc <code class=\"language-inline-text\">npm init -y</code> nếu muốn dùng các thiết đặt mặc định</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> my-vui-package <span class=\"token operator\">&amp;&amp;</span> <span class=\"token builtin class-name\">cd</span> my-vui-package\n<span class=\"token function\">npm</span> init <span class=\"token parameter variable\">-y</span></code></pre></div>\n<p>Trỏ vào thư mục này, chúng ta sẽ có file <code class=\"language-inline-text\">package.json</code> như sau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"my-vui-package\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"index.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string-property property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ISC\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>File <code class=\"language-inline-text\">index.js</code> nội dung đại loại sẽ như thế này</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string\">\"use strict\"</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> my<span class=\"token operator\">-</span>vui<span class=\"token operator\">-</span><span class=\"token keyword\">package</span><span class=\"token punctuation\">(</span>sentence<span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"kiểm-tra-ở-local\"><a href=\"#ki%E1%BB%83m-tra-%E1%BB%9F-local\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kiểm tra ở local</h2>\n<p>Trước khi publish nó lên npm, trong ta có thể dùng <code class=\"language-inline-text\">npm link</code> để kiểm tra dưới local trước. Đại khái <code class=\"language-inline-text\">npm link</code> sẽ cho phép chúng ta trỏ thư mục package vào thư mục <code class=\"language-inline-text\">node_modules</code> global. Chúng ta cần thực hiện 2 bước</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> ~/duong-dan-toi-thu-muc/my-vui-package\n<span class=\"token function\">npm</span> <span class=\"token function\">link</span></code></pre></div>\n<p>Sau đó, trong thư mục sử dụng package</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> ~/duong-dan-toi-thu-muc/project-nao-do\n<span class=\"token function\">npm</span> <span class=\"token function\">link</span> my-vui-package</code></pre></div>\n<p>Bên trong thư mục <strong>node_modules</strong> bây giờ sẽ như thế này</p>\n<h2 id=\"publish-lên-npm\"><a href=\"#publish-l%C3%AAn-npm\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Publish lên NPM</h2>\n<p>Trước khi publish lên npm chúng ta phải đăng ký một user trên npm, sau đó login ở dưới máy local</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> login</code></pre></div>\n<p>Có thể kiểm tra npm có <em>biết chúng ta là ai chưa</em> </p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">whoami</span></code></pre></div>\n<p>Mọi thứ đã hoàn tất, để trình làng một package cho bàn dân thiên hạ</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> publish <span class=\"token parameter variable\">--access</span> public</code></pre></div>\n<p>Nếu đã có một package như vậy trên npm, nó sẽ thông báo lỗi như này</p>\n<p><img src=\"https://zellwk.com/images/2019/publish-to-npm/npm-publish-error.png\"></p>\n<p>Nếu nhận thông báo thành công, chúng ta có thể chạy ngay lên npm và search sẽ thấy package của chúng ta nằm chình ình trên đó</p>\n<p>Ngày nó đó ko muốn cho thiên hạ xài nữa</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> unpublish</code></pre></div>\n<p>Khi cần update lên version mới</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> version <span class=\"token operator\">&lt;</span>update_type<span class=\"token operator\">></span></code></pre></div>\n<h2 id=\"sử-dụng-thêm-thư-viện\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-th%C3%AAm-th%C6%B0-vi%E1%BB%87n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sử dụng thêm thư viện</h2>\n<p>Nếu cần chuyên nghiệp hơn, chuẩn hóa hơn các bác, sử dụng package <code class=\"language-inline-text\">np</code> để hỗ trợ thực hiện các bước ở trên</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i <span class=\"token parameter variable\">-g</span> np</code></pre></div>\n<p>Muốn sử dụng <code class=\"language-inline-text\">np</code> chúng ta phải đảm bảo package chúng ta được host trên Github</p>\n<p>cần publish ? chạy </p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">np</code></pre></div>\n<p>Trả lời các câu hỏi để đi tiếp</p>\n<p><img src=\"https://zellwk.com/images/2019/publish-to-npm/np.png\"></p>\n<p>Đọc thêm <a href=\"https://npmjs.com/package/%3Cpackage%3E\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">cách đặt tên version ở đây</a></p>\n","cover_image":""}}]}}},"context":{}}