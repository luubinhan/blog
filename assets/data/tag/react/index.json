{"hash":"2614a9f464f28805085bbbd764f6609c0dea9377","data":{"tag":{"title":"react","belongsTo":{"edges":[{"node":{"id":"a8d9261240ad6ff2ae04f76708a3bb8d","title":"Ch√∫ng ta c√≥ c·∫ßn useEffect kh√¥ng","path":"/2022-06-29-chung-ta-co-can-use-effect-khong/","date":"2022-06-29","timeToRead":5,"desc":"M·ªôt s·ªë tr∆∞·ªùng h·ª£p kh√¥ng c·∫ßn effect hay b·∫Øt g·∫∑p","content":"<p><code class=\"language-inline-text\">useEffect</code> ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ ph·ª•c v·ª• ƒë·ªìng b·ªô h√≥a component v·ªõi <em>th·∫ø gi·ªõi b√™n ngo√†i</em>, nh∆∞ network, DOM, n·∫øu kh√¥ng c√≥ s·ª± tham gia c·ªßa c√°c y·∫øu t·ªë <em>b√™n ngo√†i</em>, v√≠ d·ª• nh∆∞ <em>state</em> c·∫ßn thay ƒë·ªïi khi <em>prop</em> thay ƒë·ªïi, ch√∫ng ta kh√¥ng c·∫ßn d√πng ƒë·∫øn useEffect. H·∫°n ch·∫ø l·ªói, code ch·∫°y nhanh h∆°n, d·ªÖ hi·ªÉu h∆°n l√† nh·ªØng ∆∞u ƒëi·ªÉm khi c√≥ √≠t effect.</p>\n<!-- TOC -->\n<ul>\n<li><a href=\"#transform-data\">Transform data</a></li>\n<li><a href=\"#user-event\">User event</a></li>\n<li><a href=\"#kh%E1%BB%9Fi-ch%E1%BA%A1y-%E1%BB%A9ng-d%E1%BB%A5ng\">Kh·ªüi ch·∫°y ·ª©ng d·ª•ng</a></li>\n<li><a href=\"#subscrib-tr%C3%AAn-nh%E1%BB%AFng-d%E1%BB%AF-li%E1%BB%87u-b%C3%AAn-ngo%C3%A0i\">Subscrib tr√™n nh·ªØng d·ªØ li·ªáu b√™n ngo√†i</a></li>\n<li><a href=\"#fetch-data\">Fetch data</a></li>\n<li><a href=\"#k%E1%BA%BFt-lu%E1%BA%ADn\">K·∫øt lu·∫≠n</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"transform-data\"><a href=\"#transform-data\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Transform data</h2>\n<p>V√≠ d·ª• ch√∫ng ta c·∫ßn filter tr√™n m·ªôt danh s√°ch, ch√∫ng ta s·∫Ω c√≥ xu h∆∞·ªõng ƒë∆∞a vi·ªác transform n√†y v√†o trong m·ªôt effect v·ªõi dependency l√† <code class=\"language-inline-text\">array</code></p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">TodoList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> todos<span class=\"token punctuation\">,</span> filter <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// üî¥ Tr√°nh xa s·ª≠ d·ª•ng c√°ch n√†y</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>visibleTodos<span class=\"token punctuation\">,</span> setVisibleTodos<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gridsome-highlight-code-line\">\t\t<span class=\"token function\">setVisibleTodos</span><span class=\"token punctuation\">(</span><span class=\"token function\">getFilteredTodos</span><span class=\"token punctuation\">(</span>todos<span class=\"token punctuation\">,</span> filter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></span>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>todos<span class=\"token punctuation\">,</span> filter<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ‚úÖ ƒê√∫ng ra ch·ªâ c·∫ßn</span>\n<span class=\"token keyword\">const</span> visibleTodos <span class=\"token operator\">=</span> <span class=\"token function\">getFilteredTodos</span><span class=\"token punctuation\">(</span>todos<span class=\"token punctuation\">,</span> filter<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// ‚úÖ N·∫øu vi·ªác `getFilteredTodos` t·ªën kh√° nhi·ªÅu th·ªùi gian ƒë·ªÉ ch·∫°y</span>\n<span class=\"token keyword\">const</span> visibleTodos <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getFilteredTodos</span><span class=\"token punctuation\">(</span>todos<span class=\"token punctuation\">,</span> filter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>todos<span class=\"token punctuation\">,</span> filter<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>V√≠ d·ª• kh√°c, k·∫øt h·ª£p <code class=\"language-inline-text\">fullName</code> v√† <code class=\"language-inline-text\">lastName</code> th√†nh <code class=\"language-inline-text\">userName</code></p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>firstName<span class=\"token punctuation\">,</span> setFirstName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'vui'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>lastName<span class=\"token punctuation\">,</span> setLastName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'laptrinh'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// üî¥ Tr√°nh xa s·ª≠ d·ª•ng c√°ch n√†y</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>fullName<span class=\"token punctuation\">,</span> setFullName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gridsome-highlight-code-line\">\t<span class=\"token function\">setFullName</span><span class=\"token punctuation\">(</span>firstName <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> lastName<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>firstName<span class=\"token punctuation\">,</span> lastName<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>T·∫°i sao ph·∫°i ph·ª©c t·∫°p m·ªôt c√°ch kh√¥ng c·∫ßn thi·∫øt nh∆∞ th·∫ø trong khi ch√∫ng ta ch·ªâ c·∫ßn vi·∫øt</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>firstName<span class=\"token punctuation\">,</span> setFirstName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'vui'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>lastName<span class=\"token punctuation\">,</span> setLastName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'laptrinh'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// ‚úÖ ƒê√∫ng ra ch·ªâ c·∫ßn</span>\n<span class=\"gridsome-highlight-code-line\"><span class=\"token keyword\">const</span> fullName <span class=\"token operator\">=</span> firstName <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> lastName</span></code></pre></div>\n<h2 id=\"user-event\"><a href=\"#user-event\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>User event</h2>\n<p>V√≠ d·ª• ch√∫ng ta s·∫Ω g·ªçi <code class=\"language-inline-text\">api/buy</code> khi user click v√†o n√∫t <em>mua s·∫£n ph·∫©m</em>, sau ƒë√≥ hi·ªÉn th·ªã m·ªôt th√¥ng b√°o ƒë·∫øn user, m·∫∑c d√π vi·ªác g·∫Øn s·ª± ki·ªán <code class=\"language-inline-text\">onClick</code> tr√™n button r·∫•t hi·ªÉn nhi√™n, nh∆∞ng c√≥ s·∫Ω c√≥ ng∆∞·ªùi d√πng effect</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// üî¥ Tr√°nh xa s·ª≠ d·ª•ng c√°ch n√†y</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>product<span class=\"token punctuation\">.</span>isInCart<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gridsome-highlight-code-line\">\t\t<span class=\"token function\">showToast</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">ƒê√£ th√™m v√†o gi·ªè h√†ng</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span></span>\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>product<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">handleBuyClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">addToCart</span><span class=\"token punctuation\">(</span>product<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">handleCheckoutClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">addToCart</span><span class=\"token punctuation\">(</span>product<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">navigateTo</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/checkout'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ‚úÖ ƒê√∫ng ra ch·ªâ c·∫ßn</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">buyProduct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">addToCart</span><span class=\"token punctuation\">(</span>product<span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">showToast</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">ƒê√£ th√™m v√†o gi·ªè h√†ng</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">handleBuyClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">buyProduct</span><span class=\"token punctuation\">(</span>product<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">handleCheckoutClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">buyProduct</span><span class=\"token punctuation\">(</span>product<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">navigateTo</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/checkout'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>M·ªôt v√≠ d·ª• kh√°c, c·∫£ hai <code class=\"language-inline-text\">POST</code> request ƒë·ªÅu c√≥ th·ªÉ xem l√† side effect, tuy nhi√™n ch·ªâ c√≥ m·ªôt tr∆∞·ªùng h·ª£p n√™n d√πng <code class=\"language-inline-text\">useEffect</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ‚úÖ Tr∆∞·ªùng h·ª£p n√†y ok</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/analytics/event'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">eventName</span><span class=\"token operator\">:</span> <span class=\"token string\">'visit_form'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// üî¥ Tr√°nh xa s·ª≠ d·ª•ng c√°ch n√†y</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>jsonToSubmit<span class=\"token punctuation\">,</span> setJsonToSubmit<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>jsonToSubmit <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/register/'</span><span class=\"token punctuation\">,</span> jsonToSubmit<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>jsonToSubmit<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>V·ªõi tr∆∞·ªùng h·ª£p 2, vi·ªác ph·∫£i ch·∫°y <code class=\"language-inline-text\">post('api/register'</code> ho√†n to√†n kh√¥ng ph·∫£i do ch√∫ng ta ph·∫£i <strong>hi·ªÉn th·ªã</strong> component, m√† n√≥ c·∫ßn ch·∫°y v√¨ user click submit. ƒê·ª´ng l√†m ph·ª©c t·∫°p v·∫•n ƒë·ªÅ m·ªôt c√°ch kh√¥ng c·∫ßn thi·∫øt</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ‚úÖ R·∫•t hi·ªÉn nhi√™n</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\te<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/register'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>our_form_data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"kh·ªüi-ch·∫°y-·ª©ng-d·ª•ng\"><a href=\"#kh%E1%BB%9Fi-ch%E1%BA%A1y-%E1%BB%A9ng-d%E1%BB%A5ng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kh·ªüi ch·∫°y ·ª©ng d·ª•ng</h2>\n<p>Khi ·ª©ng d·ª•ng b·∫Øt ƒë·∫ßu ch·∫°y, ch√∫ng ta mu·ªën m·ªôt s·ªë h√†m ch·∫°y ƒë√∫ng 1 l·∫ßn ƒë·∫ßu ti√™n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// üî¥</span>\n\t<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">loadDatafromLocalStorage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token function\">checkAuthToken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Tuy nhi√™n n√≥ l·∫°i ch·∫°y 2 l·∫ßn tr√™n m√¥i tr∆∞·ªùng development ƒë·∫•y c√°c b·∫°n ·∫°! <a href=\"https://beta.reactjs.org/learn/synchronizing-with-effects#how-to-handle-the-effect-firing-twice-in-development\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">B√†i n√†y c√≥ gi·∫£i th√≠ch n√®</a>, m·∫∑c d√π tr√™n production s·∫Ω kh√¥ng x·∫£y ra (z·ª°n ki·ªÉu n√†y kh√¥ng vui ƒë√¢u m·∫•y b√°c team React ·∫°)</p>\n<p>Ch√∫ng ta n√™n hi·ªÉu s·ª± kh√°c nhau gi·ªØa <strong>ch·∫°y m·ªôt l·∫ßn khi app kh·ªüi t·∫°o</strong> kh√°c v·ªõi <strong>ch·∫°y m·ªôt l·∫ßn khi component mount</strong>. ƒê·ªÉ ch·∫°y ƒê√öNG 1 L·∫¶N khi app kh·ªüi t·∫°o, ch√∫ng ta s·ª≠a l·∫°i nh∆∞ v·∫ßy</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> didInit <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>didInit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tdidInit <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n\t\t\t<span class=\"token comment\">// ‚úÖ</span>\n\t\t\t<span class=\"token function\">loadDatafromLocalStorage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token function\">checkAuthToken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ho·∫∑c c√≥ th·ªÉ ch·∫°y tr∆∞·ªõc khi app render lu√¥n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// ‚úÖ</span>\n\t<span class=\"token function\">loadDatafromLocalStorage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token function\">checkAuthToken</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"subscrib-tr√™n-nh·ªØng-d·ªØ-li·ªáu-b√™n-ngo√†i\"><a href=\"#subscrib-tr%C3%AAn-nh%E1%BB%AFng-d%E1%BB%AF-li%E1%BB%87u-b%C3%AAn-ngo%C3%A0i\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Subscrib tr√™n nh·ªØng d·ªØ li·ªáu b√™n ngo√†i</h2>\n<p>Nh·ªØng d·ªØ li·ªáu b√™n ngo√†i m·ªôt react component, nh∆∞ t·ª´ browser API, ch√∫ng ta v·∫´n th∆∞·ªùng d√πng effect nh∆∞ v√≠ d·ª•</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">useOnlineStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnLine<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token comment\">// üî¥</span>\n\t<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">function</span> <span class=\"token function\">updateState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>navigator<span class=\"token punctuation\">.</span>onLine<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token function\">updateState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\t\n\t\twindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'online'</span><span class=\"token punctuation\">,</span> updateState<span class=\"token punctuation\">)</span>\n\t\twindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'offline'</span><span class=\"token punctuation\">,</span> updateState<span class=\"token punctuation\">)</span>\n\n\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\twindow<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'online'</span><span class=\"token punctuation\">,</span> updateState<span class=\"token punctuation\">)</span>\n\t\t\twindow<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'offline'</span><span class=\"token punctuation\">,</span> updateState<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t\n\t<span class=\"token keyword\">return</span> isOnline\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√°ch vi·∫øt n√†y kh√¥ng h·∫≥n sai ho√†n to√†n, ch·ªâ l√† c√≥ m·ªôt c√°ch t·ªëi ∆∞u h∆°n ƒë∆∞·ª£c React h·ªó tr·ª£ trong tr∆∞·ªùng h·ª£p c·∫ßn ph·∫£i subscribe tr√™n external store: <code class=\"language-inline-text\">useSyncExternalStore</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\twindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'online'</span><span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">)</span>\n\twindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'offline'</span><span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">)</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\twindow<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'online'</span><span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">)</span>\n\t\twindow<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'offline'</span><span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">useOnlineStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// ‚úÖ</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">useSyncExternalStore</span><span class=\"token punctuation\">(</span>\n\t\tsubscribe<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> navigator<span class=\"token punctuation\">.</span>onLine<span class=\"token punctuation\">,</span> <span class=\"token comment\">// l·∫•y value t·ª´ client nh∆∞ th·∫ø n√†o</span>\n\t\t<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// l·∫•y value n√†y t·ª´ server nh∆∞ th·∫ø n√†o\t</span>\n\t<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://reactjs.org/docs/hooks-reference.html#usesyncexternalstore\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ƒê·ªçc th√™m v·ªÅ useSyncExternalStore</a></p>\n<h2 id=\"fetch-data\"><a href=\"#fetch-data\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Fetch data</h2>\n<p>ƒê√¢y c√≥ th·ªÉ l√† m·ªôt trong nh·ªØng c√°ch s·ª≠ d·ª•ng effect ph·ªï bi·∫øn nh·∫•t hi·ªán t·∫°i</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">SearchResults</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> query <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>results<span class=\"token punctuation\">,</span> setResults<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">,</span> setPage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// üî¥</span>\n    <span class=\"token function\">fetchResults</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">,</span> page<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">json</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setResults</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>query<span class=\"token punctuation\">,</span> page<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleNextPageClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setPage</span><span class=\"token punctuation\">(</span>page <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒêo·∫°n code n√†y s·∫Ω r∆°i v√†o t√¨nh hu·ªëng <em>race condition</em> n·∫øu nh∆∞ user nh·∫≠p qu√° nhanh (gi√° tr·ªã <code class=\"language-inline-text\">query</code> thay ƒë·ªïi theo input c·ªßa user), l√∫c n√†y ch√∫ng ta s·∫Ω c·∫ßn ƒë·∫øn <code class=\"language-inline-text\">debounce</code>, ngo√†i ra ch√∫ng ta s·∫Ω c√≤n ph·∫£i nghƒ© ƒë·∫øn chuy·ªán <em>cache</em> data ƒë√£ l·∫•y v·ªÅ ƒë·ªÉ t·ªëi ∆∞u, v√¢ng v√¢ng m√¢y m√¢y nhi·ªÅu th·ª© kh√°c ph·∫£i x·ª≠ l√Ω. ƒê√¢u ph·∫£i t·ª± nhi√™n m√† c√°c framework nh∆∞ Next.js, Gatsby, Remix, Razzie ƒë·ªÅu gi·ªõi thi·ªáu nh·ªØng c√°ch fetch data c·ªßa ri√™ng ch√∫ng</p>\n<p>M·∫°nh d·∫°ng ƒë·ªÅ xu·∫•t s·ª≠ d·ª•ng nh·ªØng th∆∞ vi·ªán th·ª© 3 ƒë·ªÉ <code class=\"language-inline-text\">fetch</code> data thay v√¨ d√πng  <code class=\"language-inline-text\">useEffect</code>, nh∆∞ <a href=\"https://react-query.tanstack.com/reference/useQuery\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">useQuery</a>, ho·∫∑c <em>b√®o nh·∫•t</em> c≈©ng ph·∫£i d√πng custom hook <a href=\"https://usehooks-ts.com/react-hook/use-fetch\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">useFetch</a></p>\n<h2 id=\"k·∫øt-lu·∫≠n\"><a href=\"#k%E1%BA%BFt-lu%E1%BA%ADn\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>K·∫øt lu·∫≠n</h2>\n<p>Khi s·ª≠ d·ª•ng <code class=\"language-inline-text\">useEffect</code> ch√∫ng ta ph·∫£i h·∫øt s·ª©c ƒë·ªÉ √Ω xem ph·∫ßn n√†o c√≥ th·ªÉ t√°ch ra th√†nh custom hook, ph·∫ßn n√†o n√™n b·ªè lu√¥n, c√†ng √≠t <code class=\"language-inline-text\">useEffect</code> code c√†ng d·ªÖ hi·ªÉu v√† d·ªÖ maintain</p>\n<p><a href=\"https://beta.reactjs.org/learn/you-might-not-need-an-effect\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">You Might Not Need an Effect</a></p>\n","cover_image":""}},{"node":{"id":"aa7bf45ae027834fbd27f3ab24a17a09","title":"React Transition","path":"/2022-05-07-cach-dung-usetransition-trong-react/","date":"2022-05-07","timeToRead":3,"desc":"M·ªôt t√≠nh nƒÉng m·ªõi trong React 18, cho ph√©p ch√∫ng ta ƒë√°nh gi·∫•u m·ªôt thay ƒë·ªïi l√† transition","content":"<h2 id=\"t·∫°i-sao\"><a href=\"#t%E1%BA%A1i-sao\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·∫°i sao?</h2>\n<p>M·ªôt v·∫•n ƒë·ªÅ r·∫•t th·ª±c t·∫ø m√† ch√∫ng ta hay g·∫∑p khi vi·∫øt <em>search component</em>, ch√∫ng ta s·∫Ω th√™m c∆° ch·∫ø <em>debounce</em> khi g·ªçi xu·ªëng API sau khi user nh·∫≠p gi√° tr·ªã v√†o <code class=\"language-inline-text\">input</code>, <em>debounce</em> t·ª©c l√† h·ªïng ƒëi l√†m li·ªÅn m√† ƒë·ª£i cho ƒë·∫øn h·∫øt th·ªùi gian th√¨ m·ªõi l√†m.</p>\n<p>Tr∆∞·ªõc ƒë√¢y, React kh√¥ng c√≥ ph√¢n bi·ªát gi·ªØa c√°i g√¨ c·∫ßn l√†m li·ªÅn v√† c√°i g√¨ c√≥ th·ªÉ ƒë·ªÉ sau r·ªìi l√†m, d√¢n t√¨nh g·ªçi l√† s·ªëng v·ªôi. Gi·ªù ƒë√¢y, th·∫•y vi·ªác s·ªëng v·ªôi nh∆∞ th·∫ø l√† m√† l·ªëi s·ªëng sai l·∫ßm, n√™n m·ªü ra kh√°i ni·ªám <em>s·ªëng ch·∫≠m</em>, th√¥ng th·∫£ m√† l√†m. Nh∆∞ m√≥n n√†o c·∫ßn g·∫•p th√¨ b·∫°n bay ra t·∫°p qu√° g·∫ßn nh√† mua li·ªÅn, m√≥n n√†o ch∆∞a c·∫ßn ngay th√¨ ƒë∆∞a v√†o danh s√°ch mua s·∫Øm cu·ªëi th√°ng ƒëi si√™u th·ªã.</p>\n<p><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--6-YH79KT--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/t359lpszuvb3k6dlm6q0.gif\"></p>\n<p>Nh·ªØng c√¥ng chuy·ªán n√†o ƒë∆∞·ª£c coi l√† <em>s·ªëng ch·∫≠m</em> React s·∫Ω kh√¥ng l√†m li·ªÅn v√† kh√¥ng hi·ªÉn th·ªã <em>Suspense fallback</em> component.</p>\n<p>2 API m·ªõi, m·ªôt hook v√† m·ªôt c√°i d√πng trong tr∆∞·ªùng h·ª£p kh√¥ng th·ªÉ d√πng hook</p>\n<ul>\n<li>React.startTransition</li>\n<li>React.useTransition</li>\n</ul>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isPending<span class=\"token punctuation\">,</span> startTransition<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">function</span> <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">startTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span> <span class=\"token operator\">=></span> c <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token punctuation\">{</span>isPending <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Spinner</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta c√≥ m·ªôt danh s√°ch <em>employee name</em>, khi user nh·∫≠p v√†o input, ch√∫ng ta th·ª±c hi·ªán <em>filter</em> l·∫°i danh s√°ch n√†y.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">FilterList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>query<span class=\"token punctuation\">,</span> setQuery<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">changeHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setQuery</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>innput</span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>changeHandler<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>query<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token punctuation\">{</span>names<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t\t        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListItem</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">highlight</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>query<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n\t\t      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ListItem</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> highlight <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> index <span class=\"token operator\">=</span> name<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>highlight<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">===</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>highlight<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> index <span class=\"token operator\">+</span> highlight<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">+</span> highlight<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://codesandbox.io/s/heavy-update-as-urgent-ejwbg?file=/src/FilterList.js\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Demo</a></p>\n<p>Khi user nh·∫≠p qu√° nhanh, ch√∫ng ta s·∫Ω th·∫•y UI c√≥ v·∫ª h∆°i <em>lag</em> v√† n√≥ kh√¥ng hi·ªÉn th·ªã ƒë∆∞·ª£c k·∫øt qu√° ngay.</p>\n<p>·ªû ƒë√¢y <code class=\"language-inline-text\">&lt;ListItem /></code> ƒë√£ ƒë∆∞·ª£c update li√™n t·ª•c khi user nh·∫≠p v√†o input, vi·ªác n√†y l√† kh√¥ng c·∫ßn thi·∫øt, n√≥ ch·ªâ c·∫ßn c·∫≠p nh·∫≠p l·∫°i sau khi user ƒë√£ k·∫øt th√∫c nh·∫≠p li·ªáu, m·ªôt c√°ch kh√°c l√† b·ªè qu·∫£ t·∫•t c·∫£ nh·ªØng l·∫ßn c·∫≠p nh·∫≠p ·ªü gi·ªØa, ch·ªâ gi·ªØ l·∫°i l·∫ßn c·∫≠p nh·∫≠p sau c√πng.</p>\n<p>ƒê·ªÉ s·ª≠a l·∫°i</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useTransition <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">FilterList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> names <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>query<span class=\"token punctuation\">,</span> setQuery<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>highlight<span class=\"token punctuation\">,</span> setHighlight<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isPending<span class=\"token punctuation\">,</span> startTransition<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">changeHandler</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> value <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setQuery</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">startTransition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setHighlight</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>changeHandler<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>query<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>names<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListItem</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">highlight</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>highlight<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://codesandbox.io/s/heavy-update-as-non-urgent-ifobc?file=/src/FilterList.js\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Demo</a>.</p>\n<p><a href=\"https://dmitripavlutin.com/react-usetransition/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Don't Stop Me Now: How to Use React useTransition() hook</a></p>\n","cover_image":""}},{"node":{"id":"b3ecdb8766dc98704a9050af3e05bb9c","title":"T·∫•t c·∫£ nh·ªØng g√¨ b·∫°n c·∫ßn bi·∫øt khi l√†m user avatar trong React","path":"/2022-05-01-tat-ca-nhung-gi-can-biet-de-lam-viec-voi-avatar-trong-react/","date":"2022-05-01","timeToRead":4,"desc":"","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#t%E1%BA%A1o-avatar-m%E1%BA%B7c-%C4%91%E1%BB%8Bnh\">T·∫°o avatar m·∫∑c ƒë·ªãnh</a></li>\n<li><a href=\"#cho-user-upload-avatar\">Cho user upload avatar</a></li>\n<li><a href=\"#crop-%E1%BA%A3nh\">Crop ·∫£nh</a></li>\n<li><a href=\"#to%C3%A0n-b%E1%BB%99-source-code\">To√†n b·ªô source code</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"t·∫°o-avatar-m·∫∑c-ƒë·ªãnh\"><a href=\"#t%E1%BA%A1o-avatar-m%E1%BA%B7c-%C4%91%E1%BB%8Bnh\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·∫°o avatar m·∫∑c ƒë·ªãnh</h2>\n<p>Trong tr∆∞·ªùng h·ª£p user ch∆∞a upload avatar, ch√∫ng ta s·∫Ω hi·ªÉn th·ªã m·ªôt avatar m·∫∑c ƒë·ªãnh, s·ª≠ d·ª•ng <a href=\"https://www.npmjs.com/package/jdenticon\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">jdenticon</a> n√≥ s·∫Ω cho ch√∫ng ta b·ªô h√¨nh sau</p>\n<p><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--kYzqAMFa--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/jrn6svy3k9b3qznrgkla.png\"></p>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ComponentProps<span class=\"token punctuation\">,</span> <span class=\"token constant\">FC</span><span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> AutoAvatar<span class=\"token operator\">:</span> <span class=\"token constant\">FC</span><span class=\"token operator\">&lt;</span>\n  ComponentProps<span class=\"token operator\">&lt;</span><span class=\"token string\">'img'</span><span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span> userId<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span> size<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token punctuation\">}</span>\n<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> userId<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>imgProps <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>base64<span class=\"token punctuation\">,</span> setBase64<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">undefined</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// d√πng dynamic import ƒë·ªÉ t·ªëi ∆∞u</span>\n  <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'jdenticon'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> toSvg <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> svgString <span class=\"token operator\">=</span> <span class=\"token function\">toSvg</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> base64 <span class=\"token operator\">=</span> Buffer<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>svgString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'base64'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setBase64</span><span class=\"token punctuation\">(</span>base64<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> base64 <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'rgb(225,225,225)'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n        <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>imgProps<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">data:image/svg+xml;base64,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>base64<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">alt</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'User Avatar'</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> size<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> size<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'inline-block'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      Loading...\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Th∆∞ vi·ªán n√†y kho·∫£n 45kb, ƒë·ªÉ webpack dynamic load khi c·∫ßn thi·∫øt cho ti·∫øt ki·ªám\nGi√° tr·ªã <strong>base64</strong> tr·∫£ v·ªÅ ch√∫ng ta c√≥ th·ªÉ g√°n cho <code class=\"language-inline-text\">src</code> c·ªßa th·∫ª <code class=\"language-inline-text\">&lt;img /></code></p>\n<h2 id=\"cho-user-upload-avatar\"><a href=\"#cho-user-upload-avatar\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Cho user upload avatar</h2>\n<p>N·∫øu ch·ªâ d√πng <code class=\"language-inline-text\">&lt;input type=\"file\" /></code> UI n√≥ s·∫Ω kh√° x·∫•u, ch√∫ng ta <em>d·∫•u</em> n√≥ ƒëi v√† thay b·∫±ng m·ªôt <code class=\"language-inline-text\">&lt;button /></code> ƒë·ªÉ d·ªÖ ch·ªânh CSS h∆°n. S·ª≠ d·ª•ng <code class=\"language-inline-text\">ref</code> ƒë·ªÉ trigger s·ª± ki·ªán <em>click</em> tr√™n <code class=\"language-inline-text\">input</code></p>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>createRef<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ImageSelect</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> fileRef <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">createRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>HTMLInputElement<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> onFileInputChange<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>ChangeEventHandler<span class=\"token operator\">&lt;</span>HTMLInputElement<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token operator\">?.</span>files<span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n        <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>fileRef<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onFileInputChange<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">accept</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>image/png,image/jpeg,image/gif<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n        <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> fileRef<span class=\"token punctuation\">.</span>current<span class=\"token operator\">?.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Cool Button\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"crop-·∫£nh\"><a href=\"#crop-%E1%BA%A3nh\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Crop ·∫£nh</h2>\n<p>Tr∆∞·ªõc khi g·ª≠i ·∫£nh xu·ªëng backend d·ªÉ l∆∞u l·∫°i, ch√∫ng ta s·∫Ω cho ph√©p user <code class=\"language-inline-text\">crop</code> ·∫£nh b·∫±ng <a href=\"https://fengyuanchen.github.io/cropperjs/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">cropper.js</a> v√† <a href=\"https://www.npmjs.com/package/react-cropper\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react-cropper</a></p>\n<p><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--B3T2HPu8--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/rmvn8upi2y1onvpsvclt.gif\"></p>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>createRef<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>Cropper<span class=\"token punctuation\">,</span> ReactCropperElement<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-cropper\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'cropperjs/dist/cropper.css'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ImageCrop</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> cropperRef <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">createRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>ReactCropperElement<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Cropper</span></span>\n      <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&lt;the iamge src><span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">autoCropArea</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">aspectRatio</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">viewMode</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">3</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">guides</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>cropperRef<span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">/></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>M·ªôt s·ªë thi·∫øt ƒë·∫∑t</p>\n<ul>\n<li><code class=\"language-inline-text\">autoCropArea = 1</code> m·∫∑c ƒë·ªãnh l√† ch·ªçn to√†n b·ªô h√¨nh</li>\n<li><code class=\"language-inline-text\">aspectRatio = 1</code> t·ªâ l·ªá crop mong mu·ªën, ch·ªçn 1:1, vu√¥ng</li>\n<li><code class=\"language-inline-text\">viewMode = 3</code> kh√¥ng cho ph√©p ch·ªçn v√†o v√πng n·∫±m ngo√†i h√¨nh</li>\n<li><code class=\"language-inline-text\">guides = false</code> kh√¥ng hi·ªÉn th·ªã m·∫•y ƒë∆∞·ªùng <em>grid</em></li>\n</ul>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>createRef<span class=\"token punctuation\">,</span> useState<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>Cropper<span class=\"token punctuation\">,</span> ReactCropperElement<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-cropper\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'cropperjs/dist/cropper.css'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ImageCrop</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> cropperRef <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">createRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>ReactCropperElement<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>cropped<span class=\"token punctuation\">,</span> setCropped<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onSaveClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> imageElement<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=</span> cropperRef<span class=\"token operator\">?.</span>current<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> cropper<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=</span> imageElement<span class=\"token operator\">?.</span>cropper<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setCropped</span><span class=\"token punctuation\">(</span>cropper<span class=\"token punctuation\">.</span><span class=\"token function\">getCroppedCanvas</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toDataURL</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Cropper</span></span>\n        <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"https://picsum.photos/500/300\"</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">autoCropArea</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">aspectRatio</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">viewMode</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">3</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">guides</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>cropperRef<span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onSaveClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Crop</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>cropped <span class=\"token operator\">&amp;&amp;</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>cropped<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">alt</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"It's cropped\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span>\n      <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ªÉ l·∫•y image cho vi·ªác upload, s·ª≠ d·ª•ng <code class=\"language-inline-text\">blob</code>. C√≤n n·∫øu ch·ªâ c·∫ßn hi·ªÉn th·ªã th√¨ d√πng <code class=\"language-inline-text\">dataUrl</code> nh∆∞ ·ªü tr√™n</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">cropper<span class=\"token punctuation\">.</span><span class=\"token function\">getCroppedCanvas</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBlob</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"to√†n-b·ªô-source-code\"><a href=\"#to%C3%A0n-b%E1%BB%99-source-code\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>To√†n b·ªô source code</h2>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>createRef<span class=\"token punctuation\">,</span> useState<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'./App.css'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>Cropper<span class=\"token punctuation\">,</span> ReactCropperElement<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-cropper\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'cropperjs/dist/cropper.css'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'./roundedCropper.css'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// chuy·ªÉn file qua base64</span>\n<span class=\"token keyword\">const</span> file2Base64 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>file<span class=\"token operator\">:</span> File<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> reader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    reader<span class=\"token punctuation\">.</span><span class=\"token function\">readAsDataURL</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    reader<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>reader<span class=\"token punctuation\">.</span>result<span class=\"token operator\">?.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    reader<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ref ƒë·∫øn file input</span>\n  <span class=\"token keyword\">const</span> fileRef <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">createRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>HTMLInputElement<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// h√¨nh ƒë∆∞·ª£c ch·ªçn</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>uploaded<span class=\"token punctuation\">,</span> setUploaded<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// k·∫øt qu·∫£ c·ªßa image sau khi crop</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>cropped<span class=\"token punctuation\">,</span> setCropped<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ref ƒë·∫øn crop element</span>\n  <span class=\"token keyword\">const</span> cropperRef <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">createRef</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>ReactCropperElement<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> onFileInputChange<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>ChangeEventHandler<span class=\"token operator\">&lt;</span>HTMLInputElement<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> file <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>target<span class=\"token operator\">?.</span>files<span class=\"token operator\">?.</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">file2Base64</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>base64<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setUploaded</span><span class=\"token punctuation\">(</span>base64<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onCrop</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> imageElement<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=</span> cropperRef<span class=\"token operator\">?.</span>current<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> cropper<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span> <span class=\"token operator\">=</span> imageElement<span class=\"token operator\">?.</span>cropper<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setCropped</span><span class=\"token punctuation\">(</span>cropper<span class=\"token punctuation\">.</span><span class=\"token function\">getCroppedCanvas</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toDataURL</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>\n          uploaded <span class=\"token operator\">?</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Cropper</span></span>\n                <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>uploaded<span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">autoCropArea</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">aspectRatio</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">viewMode</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">3</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">guides</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>cropperRef<span class=\"token punctuation\">}</span></span>\n              <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onCrop<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Crop</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token punctuation\">{</span>cropped <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>cropped<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Cropped!<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token operator\">:</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n                <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>fileRef<span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onFileInputChange<span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">accept</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>image/png,image/jpeg,image/gif<span class=\"token punctuation\">\"</span></span>\n              <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n                <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> fileRef<span class=\"token punctuation\">.</span>current<span class=\"token operator\">?.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n              <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Upload something!\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><a href=\"https://tolgee.io/blog/manage-user-avatar\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">All you need to know to deal with user avatars üë§ in React</a></li>\n</ul>\n","cover_image":""}},{"node":{"id":"5cd2167d4292a9fdf2596de6cc28414f","title":"·ª®ng d·ª•ng Visitor Pattern ƒë·ªÉ l√†m configure UI driven","path":"/2021-08-20-su-dung-visitor-pattern-de-tao-form-dong/","date":"2021-08-20","timeToRead":3,"desc":"","content":"<p>V·∫•n ƒë·ªÅ ch√∫ng ta c·∫ßn gi·∫£i quy·∫øt: ch√∫ng ta c·∫ßn render form v·ªõi c√°c lo·∫°i field ph·ªï bi·∫øn nh∆∞ <code class=\"language-inline-text\">date</code>, <code class=\"language-inline-text\">number</code>, <code class=\"language-inline-text\">dropdown</code>, <code class=\"language-inline-text\">text</code>, v·ªõi ƒëi·ªÅu ki·ªán l√† nh·ªØng field n√†y user c√≥ th·ªÉ <strong>config</strong> ƒë∆∞·ª£c, gi·ªëng nh∆∞ google form</p>\n<blockquote>\n<p>Visitor pattern l√† 1 ph∆∞∆°ng ph√°p thi·∫øt k·∫ø trong OOP, c√°ch l√†m l√† ch√∫ng ta s·∫Ω c√≥ m·ªôt object v·ªõi c·∫•u tr√∫c ƒë·ªãnh s·∫µn, s·ª≠ d·ª•ng object n√†y ƒë·ªÉ th·ª±c hi·ªán nh·ªØng x·ª≠ l√Ω ch√∫ng mong mu·ªën</p>\n</blockquote>\n<p><strong>object v·ªõi c·∫•u tr√∫c ƒë·ªãnh s·∫µn</strong> th∆∞·ªùng ƒë∆∞·ª£c g·ªçi l√† <code class=\"language-inline-text\">schema</code>, trong b√†i to√°n c·ªßa ch√∫ng ta th√¨ schema c·∫ßn nh·ªØng property sau</p>\n<ul>\n<li><code class=\"language-inline-text\">fieldType</code>: v√≠ d·ª• dropdown, textbox, date, number</li>\n<li><code class=\"language-inline-text\">label</code>: v√≠ d·ª• first name, birthday</li>\n<li><code class=\"language-inline-text\">name</code>: field name d√πng ƒë·ªÉ submit form</li>\n<li><code class=\"language-inline-text\">required</code>: thu·ªôc t√≠nh c√≥ b·∫Øt bu·ªôc kh√¥ng</li>\n</ul>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> schema <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">\"First Name\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"firstName\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">required</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fieldType</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Text\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Birthdate\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"birthdate\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">required</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fieldType</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Date\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Number of Pets\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"numPets\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">required</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fieldType</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Number\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>ƒê·ªÉ render form d·ª±a tr√™n <code class=\"language-inline-text\">schema</code> n√†y, gi·∫£i ph√°p xu·∫•t hi·ªán ngay trong ƒë·∫ßu s·∫Ω l√†</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Form</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> schema <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> schema<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">field</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>field<span class=\"token punctuation\">.</span>fieldType<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">\"Text\"</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span> \n      <span class=\"token keyword\">case</span> <span class=\"token string\">\"Date\"</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>date<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">\"Number\"</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>number<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Tuy nhi√™n, ƒë√¢y ch∆∞a ph·∫£i l√† visitor pattern, ƒë·ªÉ c√≥ th·ªÉ customize <em>s√¢u v√† r·ªông</em> schema, m√† kh√¥ng c·∫ßn c·∫≠p nh·∫≠p l·∫°i <code class=\"language-inline-text\">Form</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> defaultComponents <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">Text</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  \t<span class=\"token function-variable function\">Date</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"date\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  \t<span class=\"token function-variable function\">Number</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"number\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n    \n<span class=\"token keyword\">function</span> <span class=\"token function\">ViewGenerator</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> schema<span class=\"token punctuation\">,</span> components <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> mergedComponents <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n<span class=\"gridsome-highlight-code-line\">\t\t<span class=\"token operator\">...</span>defaultComponents<span class=\"token punctuation\">,</span></span><span class=\"gridsome-highlight-code-line\">\t\t<span class=\"token operator\">...</span>components</span>\t<span class=\"token punctuation\">}</span>\n\t\n\t<span class=\"token keyword\">return</span> schema<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">field</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> mergedComponents<span class=\"token punctuation\">[</span>field<span class=\"token punctuation\">.</span>fieldType<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>field<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-inline-text\">ViewGenerator</code> c≈©ng chung m·ªôt c√¥ng d·ª•ng nh∆∞ <code class=\"language-inline-text\">Form</code> ·ªü tr√™n, ·ªü ƒë√¢y ch√∫ng ta ch·ªâ l√†m th√™m vi·ªác, 1 l√† ƒë∆∞a ph·∫ßn khai b√°o component ra <code class=\"language-inline-text\">defaultComponent</code> v√† b·ªï sung tham s·ªë <code class=\"language-inline-text\">components</code> ƒë·ªÉ khi c√≥ nhu c·∫ßu m·ªü r·ªông, override c√°c component default th√¨ truy·ªÅn th√™m. Qu√° generic!</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">firstName</span><span class=\"token operator\">:</span> <span class=\"token string\">\"John\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">birthdate</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1992-02-01\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">numPets</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> profileViewComponents <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">Text</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> label<span class=\"token punctuation\">,</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>label<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">Date</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> label<span class=\"token punctuation\">,</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>label<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">Number</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> label<span class=\"token punctuation\">,</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>label<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ProfileView</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> schema <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ViewGenerator</span></span>\n      <span class=\"token attr-name\">schema</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>schema<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">components</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>profileViewComponents<span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">/></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Gi·ªù n·∫øu c√°c field ƒë∆∞·ª£c group v√†o ki·ªÉu cha-con th√¨ sao? M·ªôt c√°ch (m√¨nh c≈©ng kh√¥ng th√≠ch l·∫Øm) l√† th√™m <code class=\"language-inline-text\">children</code> </p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> schema <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Personal Details\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fieldType</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Section\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">\"First Name\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">fieldType</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Text\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Birthdate\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">fieldType</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Date\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Favorites\"</span><span class=\"token punctuation\">,</span>  \n    <span class=\"token literal-property property\">fieldType</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Section\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">label</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Favorite Movie\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">fieldType</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Text\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>V·ªõi m·ªôt c·∫•p duy nh·∫•t th√¨ schema n√†y ok, nh∆∞ng n·∫øu l·ªìng nhi·ªÅu h∆°n m·ªôt c·∫•p th√¨ ƒë√¢y kh√¥ng ph·∫£i c√°ch m√¨nh s·∫Ω l√†m, anyway ƒë·ªÉ ƒë∆°n gi·∫£n h√≥a ch√∫ng ta ch·ªâ d√πng m·ªôt c·∫•p. Ph·∫ßn <code class=\"language-inline-text\">ViewGenerator</code> c·∫ßn ƒë∆∞·ª£c c·∫≠p nh·∫≠p ƒë·ªÉ render th√™m c√°c children</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">ViewGenerator</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> schema<span class=\"token punctuation\">,</span> components <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> mergedComponents <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>defaultComponents<span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span>components<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> schema<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">field</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gridsome-highlight-code-line\">    <span class=\"token keyword\">const</span> children <span class=\"token operator\">=</span> field<span class=\"token punctuation\">.</span>children <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span></span>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ViewGenerator</span></span>\n        <span class=\"token attr-name\">schema</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>field<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">components</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>mergedComponents<span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span>\n\n<span class=\"gridsome-highlight-code-line\">    <span class=\"token keyword\">return</span> mergedComponents<span class=\"token punctuation\">[</span>field<span class=\"token punctuation\">.</span>fieldType<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>field<span class=\"token punctuation\">,</span> children <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ªá quy nh∆∞ v·∫≠y ch∆∞a h·∫≥n l√† gi·∫£i ph√°p ho√†n h·∫£o, hy v·ªçng c√°c b·∫°n n√†o c√≥ gi·∫£i ph√°p n√†o t·ªët h∆°n th√¨ g√≥p √Ω th√™m.</p>\n<p>Khi nghƒ© v·ªÅ visitor pattern, ch√∫ng ta nghƒ© ƒë·∫øn</p>\n<ol>\n<li>Configure Object ƒë·ª©ng ƒë·ªôc l·∫≠p</li>\n<li>UI ƒë·ª©ng ƒë·ªôc l·∫≠p</li>\n<li>H√†m trung gian d√πng ƒë·ªÉ map configure object v√† UI t∆∞∆°ng ·ª©ng</li>\n</ol>\n<p><a href=\"https://www.arahansen.com/react-design-patterns-generating-user-configured-ui-using-the-visitor-pattern\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.arahansen.com/react-design-patterns-generating-user-configured-ui-using-the-visitor-pattern</a></p>\n","cover_image":""}},{"node":{"id":"ed9a1fe5d18a7dcec24301ed1146ba58","title":"S·ª≠ d·ª•ng React-Query ƒë·ªÉ fetch data","path":"/2021-08-15-data-fetching-voi-react-query/","date":"2021-08-15","timeToRead":4,"desc":"M·ªôt gi·∫£i ph√°p ƒë·ªÉ ch√∫ng ta c√≥ th·ªÉ ƒë∆°n gi·∫£n h√≥a vi·ªác l∆∞u tr·ªØ d·ªØ li·ªáu t·ª´ server v√† inject v√†o trong component d·ªÖ d√†ng","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#th%E1%BB%B1c-hi%E1%BB%87n-fetch-v%E1%BB%9Bi-usequery\">Th·ª±c hi·ªán fetch v·ªõi <code class=\"language-inline-text\">useQuery</code></a></li>\n<li><a href=\"#th%E1%BB%B1c-hi%E1%BB%87n-cache\">Th·ª±c hi·ªán cache</a></li>\n</ul>\n<!-- /TOC -->\n<p>ƒê√£ bao gi·ªù anh em react ch√∫ng ta r∆°i v√†o c·∫£nh sau: th·ª≠ t·ªõi th·ª≠ lui bao nhi·ªÅu l√† th∆∞ vi·ªán ƒë·ªÉ qu·∫£n l√Ω global state, th·ª≠ bao nhi√™u l√† hook <code class=\"language-inline-text\">useFancyPromise</code>, r·ªìi t·ª± vi·∫øt nh·ªØng gi·∫£i ph√°p ri√™ng, t·∫•t c·∫£ ƒëi·ªÅu d·∫´n ƒë·∫øn m·ªôt k·∫øt c·ª•c: vi·∫øt c·∫£ ƒë·ªëng code ƒë·ªÉ x·ª≠ l√Ω vi·ªác fetch data?</p>\n<blockquote>\n<p>Server state v√† client state c∆° b·∫£n l√† kh√°c nhau, v·∫≠y t·∫°i sao l·∫°i tr·ªôn chung</p>\n</blockquote>\n<p><strong>ƒê·∫∑c ƒëi·ªÉm c·ªßa Server state</strong></p>\n<ol>\n<li><strong>c·ªë ƒë·ªãnh</strong>, ngo√†i kh·∫£ nƒÉng ki·ªÉm so√°t c·ªßa client</li>\n<li><strong>b·∫•t ƒë·ªìng b·ªô (async)</strong>, c·∫ßn fetch ƒë·ªÉ l·∫•y d·ªØ li·ªáu ho·∫∑c c·∫≠p nh·∫≠p</li>\n<li><strong>chia s·∫Ω</strong>, nhi·ªÅu ng∆∞·ªùi c√πng truy xu·∫•t ƒë·∫øn c√πng m·ªôt t·∫≠p d·ªØ li·ªáu c≈©ng nh∆∞ thao t√°c x·ª≠ l√Ω tr√™n t·∫≠p d·ªØ li·ªáu n√†y</li>\n</ol>\n<blockquote>\n<p>ƒê·∫øn l√∫c d·ª´ng vi·ªác tr·ªôn server state v√†o trong client state</p>\n</blockquote>\n<p><strong>L·ª£i √≠ch mang l·∫°i khi t√°ch vi·ªác qu·∫£n l√Ω server state b·∫±ng m·ªôt c√¥ng c·ª• ri√™ng</strong></p>\n<ol>\n<li><strong>cache</strong>, ph·∫ßn kh√≥ nh·∫•t c·ªßa l·∫≠p tr√¨nh</li>\n<li><strong>Kh√¥ng duplicate</strong> nhi·ªÅu request</li>\n<li><strong>C·∫≠p nh·∫≠p</strong> ng·∫ßm c√°c d·ªØ li·ªáu outdate</li>\n<li><strong>T·ªëi ∆∞u hi·ªáu nƒÉng</strong> b·∫±ng ph√¢n trang, lazy load</li>\n<li>Qu·∫£n l√Ω <strong>memory v√† garbage collection</strong> t·ªët h∆°n</li>\n</ol>\n<p>Xin gi·ªõi thi·ªáu v·ªõi b·∫°n ng∆∞·ªùi b·∫°n m·ªõi React-query, anh n√†y s·∫Ω cung c·∫•p cho ch√∫ng ta</p>\n<ul>\n<li>M·ªôt global context ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu l·∫•y v·ªÅ t·ª´ server</li>\n<li>Thi·∫øt ƒë·∫∑t caching v√¥ c√πng ƒë∆°n gi·∫£n</li>\n</ul>\n<p>N·∫øu th√≠ch b·∫°n c≈©ng c√≥ th·ªÉ tham kh·∫£o th√™m <a href=\"https://github.com/vercel/swr\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">swr</a> c≈©ng kh√° cool</p>\n<p>Ch√∫ng ta s·∫Ω c√≥ c√°c Server side APIs sau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// api/product.js</span>\n\n<span class=\"token comment\">// 1. Fetch t·∫•t c·∫£ products</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useFetchProducts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 2. Fetch m·ªôt product c·ª• th·ªÉ</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useFetchProduct</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 3. Th√™m m·ªôt product</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useAddProduct</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">product</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 4. C·∫≠p nh·∫≠p m·ªôt product</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useEditProduct</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">product</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 5. X√≥a m·ªôt product</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useDeleteProduct</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"th·ª±c-hi·ªán-fetch-v·ªõi-usequery\"><a href=\"#th%E1%BB%B1c-hi%E1%BB%87n-fetch-v%E1%BB%9Bi-usequery\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Th·ª±c hi·ªán fetch v·ªõi <code class=\"language-inline-text\">useQuery</code></h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useQuery <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-query'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useFetchProducts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span>\n\t\t<span class=\"token comment\">// ƒë·ªãnh danh</span>\n<span class=\"gridsome-highlight-code-line\">\t\t<span class=\"token string\">'products'</span><span class=\"token punctuation\">,</span></span>\t\t<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/products'</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>S·ª≠ d·ª•ng trong component</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useFetchProducts <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../api/products\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Products</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> products<span class=\"token punctuation\">,</span>\n\t\tisLoading\n\t<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useFetchProducts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token punctuation\">{</span>\n\t\t\t\tisLoading <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Loading...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token punctuation\">{</span>\n\t\t\t\tproducts <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n\t\t\t\t\tproducts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">product</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>product<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t\t\t\t\t</span><span class=\"token punctuation\">{</span>product<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\t\t\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Vi·ªác <code class=\"language-inline-text\">fetch</code> d·ªØ li·ªáu s·∫Ω c√≤n th√™m c√°c t√≠nh nƒÉng nh∆∞ <em>search, ph√¢n trang, filter</em>. C√≥ react-query m·ªçi th·ª© s·∫Ω v√¥ c√πng ƒë∆°n gi·∫£n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useFetchProducts <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../api/products\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Products</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// trang hi·ªán t·∫°i</span>\n<span class=\"gridsome-highlight-code-line\">\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">,</span> setPage<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></span>\n\t<span class=\"token comment\">// s·ªë item tr√™n trang</span>\n<span class=\"gridsome-highlight-code-line\">\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>limit<span class=\"token punctuation\">,</span> setLimit<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></span>\n\t<span class=\"token comment\">// t·ª´ kh√≥a</span>\n<span class=\"gridsome-highlight-code-line\">\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">,</span> setName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\t\t</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> products<span class=\"token punctuation\">,</span>\n\t\tisLoading\n\t<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useFetchProducts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n<span class=\"gridsome-highlight-code-line\">\t\tpage<span class=\"token punctuation\">,</span></span><span class=\"gridsome-highlight-code-line\">\t\tlimit<span class=\"token punctuation\">,</span></span><span class=\"gridsome-highlight-code-line\">\t\tname</span>\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">\t\t\t</span><span class=\"token punctuation\">{</span>\n\t\t\t\tisLoading <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Loading...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">\t\t\t</span><span class=\"token punctuation\">{</span>\n\t\t\t\tproducts <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n\t\t\t\t\tproducts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">product</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>product<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">\t\t\t\t\t\t\t</span><span class=\"token punctuation\">{</span>product<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">\t\t\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta c·∫ßn c·∫≠p nh·∫≠p l·∫°i <code class=\"language-inline-text\">useFetchProducts</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useQuery <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-query'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useFetchProducts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> page<span class=\"token punctuation\">,</span> limit<span class=\"token punctuation\">,</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span>\n<span class=\"gridsome-highlight-code-line\">\t\t<span class=\"token punctuation\">[</span><span class=\"token string\">'products'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> page<span class=\"token punctuation\">,</span> limit<span class=\"token punctuation\">,</span> name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></span>\t\t<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gridsome-highlight-code-line\">\t\t\t<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/api/products?page=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>page<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&amp;limit=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>limit<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&amp;search=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span></span>\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"th·ª±c-hi·ªán-cache\"><a href=\"#th%E1%BB%B1c-hi%E1%BB%87n-cache\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Th·ª±c hi·ªán cache</h2>\n<p>V√≠ d·ª• ch√∫ng ta mu·ªën ƒë·∫∑t cache 10s, ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng thi·∫øt ƒë·∫∑t <code class=\"language-inline-text\">staleTime</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useQuery <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-query'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useFetchProducts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> page<span class=\"token punctuation\">,</span> limit<span class=\"token punctuation\">,</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span>\n\t\t<span class=\"token punctuation\">[</span><span class=\"token string\">'products'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> page<span class=\"token punctuation\">,</span> limit<span class=\"token punctuation\">,</span> name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/api/products?page=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>page<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&amp;limit=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>limit<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&amp;search=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">{</span>\n<span class=\"gridsome-highlight-code-line\">\t\t\t<span class=\"token literal-property property\">staleTime</span><span class=\"token operator\">:</span> <span class=\"token number\">10000</span></span>\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><em>C·ª±c k·ª≥ ƒë∆°n gi·∫£n ƒë√∫ng kh√¥ng!</em></p>\n<p>T∆∞·ªüng t∆∞·ª£ng ch√∫ng ta c√≥ danh s√°ch <em>product</em> hi·ªÉn th·ªã tr√™n m√†n h√¨nh, click v√†o m·ªôt <em>product</em> ch√∫ng ta hi·ªÉn th·ªã pop-up v·ªõi c√°c th√¥ng tin c·ªßa product</p>\n<p>ƒê·ªÉ <code class=\"language-inline-text\">fetch</code> m·ªôt product, ch√∫ng ta c≈©ng ƒë·ªìng th·ªùi √°p d·ª•ng cache</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useFetchProduct</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span>\n\t\t<span class=\"token punctuation\">[</span><span class=\"token string\">'product'</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/api/products/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token literal-property property\">staleTime</span><span class=\"token operator\">:</span> <span class=\"token number\">10000</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·∫øn ph·∫ßn th√∫ v·ªã n√®, <em>n·∫øu c√°c th√¥ng tin c·ªßa t·ª´ng product ho√†n to√°n gi·ªëng v·ªõi th√¥ng tin tr·∫£ v·ªÅ t·ª´ danh s√°ch product?</em>, ch√∫ng ta c√≥ th·ªÉ √°p d·ª•ng cache cho t·ª´ng product trong l√∫c fetch danh s√°ch product</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useQuery<span class=\"token punctuation\">,</span> useQueryClient <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-query'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useFetchProducts</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> page<span class=\"token punctuation\">,</span> limit<span class=\"token punctuation\">,</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gridsome-highlight-code-line\">\t<span class=\"token keyword\">const</span> queryClient <span class=\"token operator\">=</span> <span class=\"token function\">useQueryClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n\t<span class=\"token keyword\">return</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span>\n\t\t<span class=\"token punctuation\">[</span><span class=\"token string\">'products'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> page<span class=\"token punctuation\">,</span> limit<span class=\"token punctuation\">,</span> name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/api/products?page=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>page<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&amp;limit=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>limit<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&amp;search=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">{</span>\t\t\t\n\t\t\t<span class=\"token literal-property property\">staleTime</span><span class=\"token operator\">:</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span>\n<span class=\"gridsome-highlight-code-line\">\t\t\t<span class=\"token function-variable function\">onSuccess</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">products</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>\t\t\t\tproducts<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">product</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gridsome-highlight-code-line\">\t\t\t\t\tqueryClient<span class=\"token punctuation\">.</span><span class=\"token function\">setQueryData</span><span class=\"token punctuation\">(</span></span>\t\t\t\t\t\t<span class=\"token punctuation\">[</span><span class=\"token string\">'product'</span><span class=\"token punctuation\">,</span> product<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\t\tproduct\n\t\t\t\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>B·∫±ng c√°ch d√πng <code class=\"language-inline-text\">useQueryClient().setQuery</code>, ch√∫ng ta force cache cho t·ª´ng <code class=\"language-inline-text\">product.id</code>, ƒë·ªÉ khi <code class=\"language-inline-text\">useFetchProduct</code> ch·∫°y n√≥ s·∫Ω c√≥ s·∫µn gi√° tr·ªã cache n√†y v√† kh√¥ng c·∫ßn th·ª±c hi·ªán g·ªçi API</p>\n<p>Th·ªÉ hi·ªán ch√∫t t√¨nh y√™u v·ªõi d·ª± √°n <code class=\"language-inline-text\">react-query</code> nh√© c√°c b·∫°n, <a href=\"https://github.com/tannerlinsley/react-query\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">star ngay kh√¥ng n√≥i nhi·ªÅu</a></p>\n","cover_image":""}},{"node":{"id":"19be0ac5586327b94ad96a787c40889a","title":"typeof c·ªßa React element ƒë·ªÉ l√†m g√¨?","path":"/2021-07-26-giai-thich-typeof-cua-react-element-la-gi/","date":"2021-07-26","timeToRead":4,"desc":"B√†i vi·∫øt d√†nh cho nh·ªØng b·∫°n t√≤ m√≤ th√≠ch kh√°m ph√° nh·ªØng g√¨ di·ªÖn ra trong th·∫ø gi·ªõi ng·∫ßm","content":"<p>Ch√∫ng ta vi·∫øt m·ªôt react component v√† b·∫°n nghƒ© m√¨nh vi·∫øt JSX</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>marquee</span> <span class=\"token attr-name\">bgcolor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#000<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Ch√†o bu·ªïi s√°ng</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>marquee</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Nh∆∞ng th·∫≠t ra ch√∫ng ta ƒëang g·ªçi h√†m n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">/* type */</span> <span class=\"token string\">'marquee'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/* props */</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">bgcolor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#000'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">/* children */</span> <span class=\"token string\">'Ch√†o bu·ªïi s√°ng'</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>V√† function tr√™n s·∫Ω tr·∫£ v·ªÅ cho ch√∫ng ta m·ªôt <code class=\"language-inline-text\">object</code>, <em>ng∆∞·ªùi ƒë·ªùi</em> g·ªçi <code class=\"language-inline-text\">object</code> n√†y l√† React element. N√≥ b√°o v·ªõi React ti·∫øp theo c·∫ßn ph·∫£i l√†m g√¨</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'marquee'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">props</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">bgcolor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#000'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> <span class=\"token string\">'Ch√†o bu·ªïi s√°ng'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">ref</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n<span class=\"gridsome-highlight-code-line\">    $$<span class=\"token keyword\">typeof</span><span class=\"token operator\">:</span> Symbol<span class=\"token punctuation\">.</span><span class=\"token function\">for</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react.element'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// ai ƒë√¢y ta?</span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-inline-text\">$$typeof</code> l√† c√°i g√¨ v·∫≠y? v√† t·∫°i sao n√≥ c√≥ value l√† <code class=\"language-inline-text\">Symbol</code>?</p>\n<p>N·∫øu ch·ªâ c·∫ßn s·ª≠ d·ª•ng React th√¨ vi·ªác bi·∫øt hay kh√¥ng bi·∫øt ƒë·∫øn <em>n√≥</em> c≈©ng kh√¥ng ·∫£nh h∆∞·ªüng g√¨ th·∫ø gi·ªõi, ch·ªâ d√†nh cho c√°c b·∫°n th√≠ch t√≤ m√≤.</p>\n<h6 id=\"\"></h6>\n<p>Vi·ªác ch√®n th√™m m·ªôt HTML b·∫±ng code js nh∆∞ th·∫ø n√†y ƒë√£ t·ª´ng r·∫•t ph·ªï bi·∫øn</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> messageEl <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'message'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmessageEl<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'&lt;p>'</span> <span class=\"token operator\">+</span> message<span class=\"token punctuation\">.</span>text <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;/p>'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>M·ªçi th·ª© th·∫≠t tuy·ªát v·ªùi cho ƒë·∫øn khi <em>ai ƒë√≥</em> c·ªë t√¨nh nh√©t gi√° tr·ªã <code class=\"language-inline-text\">&lt;img src onerror=\"stealYourPassword()\"></code> cho <code class=\"language-inline-text\">message.text</code>. M·ªôt ki·ªÉu <em>hack nh·∫π</em> c≈©ng r·∫•t ph·ªï bi·∫øn</p>\n<p>ƒê·ªÉ tr√°nh ki·ªÉu t·∫•n c√¥ng n√†y, ch√∫ng ta d√πng <code class=\"language-inline-text\">document.createTextNode()</code> ho·∫∑c <code class=\"language-inline-text\">textContent</code>, ho·∫∑c <strong>tr·ª•c xu·∫•t</strong> h·∫øt c√°c k√Ω t·ª± <code class=\"language-inline-text\">&lt;</code> v√† <code class=\"language-inline-text\">></code> ƒë·ªÉ n√≥ kh√¥ng th·ªÉ n√†o ch·∫°y ƒë∆∞·ª£c.</p>\n<p>T·∫•t nhi√™n kh√¥ng ph·∫£i ai c≈©ng bi·∫øt v√† nh·ªõ h·∫øt c√°c th·ªß t·ª•c x·ª≠ l√Ω n√†y khi nh·∫≠n gi√° tr·ªã input t·ª´ user. ƒê√≥ l√† l√Ω do t·∫°i sao, c√°c th∆∞ vi·ªán nh∆∞ React, vi·ªác <strong>tr·ª•c xu·∫•t</strong> n√†y ƒë∆∞·ª£c th·ª±c hi·ªán m·∫∑c ƒë·ªãnh</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Trong tr∆∞·ªùng h·ª£p <strong>ch√∫ng ta bi·∫øt m√¨nh ƒëang l√†m g√¨</strong>, mu·ªën render th·∫ª HTML</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> message<span class=\"token punctuation\">.</span>text <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>V·∫≠y d√πng React th√¨ an to√†n tuy·ªát ƒë·ªëi? <strong>Kh√¥ng</strong></p>\n<p>Ph·∫£i n√≥i c√≥ <a href=\"https://github.com/facebook/react/issues/3473#issuecomment-90594748\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">nhi·ªÅu l·∫Øm</a> c√°ch t·∫•n c√¥ng d√πng HTML v√† DOM. Vi·ªác ch·∫∑n h·∫øt l√† qu√° kh√≥ v√† qu√° t·ªën th·ªùi gian.</p>\n<p>V√≠ d·ª• n·∫øu render <code class=\"language-inline-text\">&lt;a href={user.website}></code>, v√† trang web d·∫´n ƒë·∫øn c√≥ th·ªÉ ch·ªâ l√† <code class=\"language-inline-text\">javascript: stealYourPassword()</code>, hay spreading ki·ªÉu n√†y <code class=\"language-inline-text\">&lt;div {...userData}></code> c≈©ng nguy hi·ªÉm ph·∫øt.</p>\n<p>V√¨ v·ªõi c√°ch vi·∫øt n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// escape t·ª± ƒë·ªông</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>...ƒë√£ ƒë·ªß an to√†n l·∫Øm r·ªìi ƒë√∫ng kh√¥ng? Kh√¥ng ph·∫£i l√∫c n√†o c≈©ng ƒë√∫ng. ƒê√≥ l√† l√Ω do t·∫°i sao c√≥ <code class=\"language-inline-text\">$$typeof</code></p>\n<h6 id=\"-1\"><a href=\"#-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a></h6>\n<p>M·ªôt React element l√† m·ªôt <code class=\"language-inline-text\">object</code> nh∆∞ th·∫ø n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'marquee'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">props</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">bgcolor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#ffa7c4'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> <span class=\"token string\">'hi'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">ref</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  $$<span class=\"token keyword\">typeof</span><span class=\"token operator\">:</span> Symbol<span class=\"token punctuation\">.</span><span class=\"token function\">for</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react.element'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>T·∫•t nhi√™n ch√∫ng ta s·∫Ω t·∫°o ra object n√†y b·∫±ng vi·ªác g·ªçi <code class=\"language-inline-text\">React.createElement()</code>. N·∫øu ch√∫ng ta s·∫Ω l∆∞u tr·ªØ <code class=\"language-inline-text\">object</code> nh∆∞ m·ªôt JSON ·ªü ph√≠a server</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// server cho ph√©p user l∆∞u ·ªü d·∫°ng JSON</span>\n<span class=\"token keyword\">let</span> expectedTextButGotJSON <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">props</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">dangerouslySetInnerHTML</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> <span class=\"token string\">'/* put your exploit here */'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> message <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> expectedTextButGotJSON <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// V·ªõi React 0.13 ƒë√¢y l√† t·ª≠ nguy·ªát</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span>message<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>React 0.13 ƒë√¢y l√† ƒëi·ªÉm b·ªã l·ª£i d·ª•ng ƒë·ªÉ t·∫•n c√¥ng XSS. (ƒê√°ng l·∫Ω ra ·ªü ph√≠a Server kh√¥ng n√™n ƒë·ªÉ cho user l∆∞u d·∫°ng JSON nh∆∞ th·∫ø)</p>\n<p>Phi√™n b·∫£n 0.14 React h·ªó tr·ª£ x·ª≠ l√Ω con bug n√†y b·∫±ng c√°ch th√™m ƒë√°nh d·∫•u <strong>ƒë√¢y ch√≠nh hi·ªáu l√† react element b·∫±ng Symbol</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'marquee'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">props</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">bgcolor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#ffa7c4'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> <span class=\"token string\">'hi'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">ref</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  $$<span class=\"token keyword\">typeof</span><span class=\"token operator\">:</span> Symbol<span class=\"token punctuation\">.</span><span class=\"token function\">for</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react.element'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>B·ªüi g√¨ user h·ªïng th·ªÉ n√†o ƒë·∫∑t m·ªôt <code class=\"language-inline-text\">Symbol</code> v√†o trong file JSON. <strong>Th·∫≠m ch√≠ m·∫•y √¥ng l√†m backend ·∫©u t·∫£ cho ph√©p return JSON thay v√¨ text</strong> c≈©ng kh√¥ng v·∫•n ƒë·ªÅ (ƒêo·∫°n n√†y ch·∫Øc l√£o Dan ƒëang c√°o m·∫•y ch√∫ Backend)</p>\n<p>ƒêi·ªÅu tuy·ªát v·ªùi n·ªØa l√† <code class=\"language-inline-text\">Symbol.for()</code> th√¨ scope ·ªü m·ª©c global gi·ªØa c√°c m√¥i tr∆∞·ªùng nh∆∞ iframe, worker. Nghƒ©a l√† vi·ªác <strong>n√©m</strong> c√°c component qua l·∫°i gi·ªØa c√°c m√¥i tr∆∞·ªùng c≈©ng kh√¥ng b·ªã ·∫£nh h∆∞·ªüng.</p>\n<h6 id=\"-2\"><a href=\"#-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a></h6>\n<p>V·∫≠y n·∫øu tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ Symbol th√¨ sao?</p>\n<p>ƒê√≥ l√† chuy·ªán c·ªßa user, ai b·∫£o x√†i tr√¨nh duy·ªát c≈© th√¨ kh√¥ng ƒë∆∞·ª£c b·∫£o h·ªô ƒë·∫ßy ƒë·ªß ch·ª© bi·∫øt sao. React s·∫Ω v·∫´n th√™m v√†o property <code class=\"language-inline-text\">$$typeof</code>, nh∆∞ng v·ªõi gi√° tr·ªã <code class=\"language-inline-text\">0xeac7</code>, t·∫°i sao l√† <code class=\"language-inline-text\">0xeac7</code>? T·∫°i t·ª•i tui (React team) th·∫•y nh√¨n n√≥ gi·ªëng ch·ªØ \"React\"</p>\n<p><a href=\"https://overreacted.io/why-do-react-elements-have-typeof-property/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">B√†i c·ªßa Dan</a></p>\n","cover_image":""}},{"node":{"id":"cf47898b4f8e17bbc7856e26a77f070a","title":"M·ªôt v√†i pattern ƒë·ªÉ vi·∫øt component c·ªßa React c·∫ßn d√πng chung state","path":"/2021-03-14-mot-vai-pattern-de-viet-react-component/","date":"2021-03-14","timeToRead":6,"desc":"C√¢u chuy·ªán chia s·∫Ω state v√† ph∆∞∆°ng th·ª©c gi·ªØa c√°c component ch∆∞a bao gi·ªù l√† c≈© trong React","content":"<!-- TOC -->\n<ul>\n<li>\n<p><a href=\"#compound-component\">compound component</a></p>\n<ul>\n<li><a href=\"#h%E1%BA%A1n-ch%E1%BA%BF\">H·∫°n ch·∫ø</a></li>\n</ul>\n</li>\n<li><a href=\"#flexible-compound-component\">Flexible compound component</a></li>\n<li><a href=\"#provider-pattern\">Provider Pattern</a></li>\n</ul>\n<!-- /TOC -->[TOC]\n<h2 id=\"compound-component\"><a href=\"#compound-component\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>compound component</h2>\n<p>Khi g·∫∑p t√¨nh hu·ªëng m·ªôt component kh√¥ng th·ªÉ ƒë·ª©ng ƒë·ªôc l·∫≠p, m√† n√≥ bu·ªôc ph·∫£i k·∫øt h·ª£p v·ªõi m·ªôt component kh√°c v√† c√πng chia s·∫ª m·ªôt b·ªô state v√† ph∆∞∆°ng th·ª©c. ƒê√≥ l√† l√∫c ch√∫ng ta c√¢n nh·∫Øc c√°ch vi·∫øt compound component.</p>\n<p>M·ªôt v√≠ d·ª• r·∫•t d·ªÖ th·∫•y c·ªßa compound component l√† element <code class=\"language-inline-text\">&lt;select /></code> v√† <code class=\"language-inline-text\">&lt;option /></code>, <code class=\"language-inline-text\">&lt;option/></code> kh√¥ng th·ªÉ ƒë·ª©ng ƒë·ªôc l·∫≠p, n√≥ lu√¥n ƒë∆∞·ª£c ƒë·∫∑t trong <code class=\"language-inline-text\">&lt;select/></code> c√≥ th·ªÉ truy xu·∫•t v√† g·ªçi c√°c ph∆∞∆°ng th·ª©c t∆∞∆°ng t·ª± nh∆∞ <code class=\"language-inline-text\">&lt;select/></code></p>\n<p><strong>T·∫°i sao l·∫°i s·ª≠ d·ª•ng compound component?</strong></p>\n<p>N·∫øu b·∫°n l√† ng∆∞·ªùi vi·∫øt component, ng∆∞·ªùi kh√°c s·ª≠ d·ª•ng component n√†y, c√°c dev kh√°c s·∫Ω c·∫£m ∆°n b·∫°n r·∫•t nhi·ªÅu. B·∫°n ƒë√≥ng g√≥i m·ªçi th·ª© logic v√†o b√™n trong component cha nh∆∞ v·∫≠y, ng∆∞·ªùi sau s·∫Ω kh√¥ng c·∫ßn b·∫≠n t√¢m n·ªØa.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// parent component</span>\n<span class=\"token comment\">// x·ª≠ l√Ω event onChange, qu·∫£n l√Ω state selected value</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageForm</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageForm.RadioInput</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageForm.RadioInput</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageForm.RadioInput</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">RadioImageForm</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>V·ªõi child component c·ªßa <code class=\"language-inline-text\">&lt;RadioImageForm /></code>, ƒë·ªÉ cho n√≥ r√µ r√†ng minh b·∫°ch l√† ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng nh·ªØng gi√° tr·ªã cung c·∫•p t·ª´ parent, ch√∫ng ta d√πng ki·ªÉu vi·∫øt <code class=\"language-inline-text\">&lt;RadioImageForm.RadioInput /></code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RadioImageForm</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token operator\">&lt;</span>Props<span class=\"token punctuation\">,</span> State<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">static</span> RadioInput <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\t\tcurrentValue<span class=\"token punctuation\">,</span>\n\t    onChange<span class=\"token punctuation\">,</span>\n\t    label<span class=\"token punctuation\">,</span>\n\t    value<span class=\"token punctuation\">,</span>\n\t    name<span class=\"token punctuation\">,</span>\n\t    imgSrc<span class=\"token punctuation\">,</span>\n\t    key<span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> RadioInputProps<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span><span class=\"token parameter\">ReactElement</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token comment\">// ...</span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tonChange <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token parameter\"><span class=\"token keyword\">void</span></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t  <span class=\"token comment\">// ...</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">currentValue</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">onChange</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onChange<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">defaultValue</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>defaultValue <span class=\"token operator\">||</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>ReactElement <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageFormWrapper</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* .... */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">RadioImageFormWrapper</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>M·ªôt nhu c·∫ßu r·∫•t ph·ªï bi·∫øn l√† ng∆∞·ªùi kh√°c s·∫Ω mu·ªën control component con <code class=\"language-inline-text\">&lt;RadioInput /></code> b·∫±ng vi·ªác truy·ªÅn th√™m <code class=\"language-inline-text\">prop</code>, nh∆∞ng thay v√¨ truy·ªÅn th·∫±ng v√†o component con, ch√∫ng ta h√£y ƒë·ªÉ h·ªç truy·ªÅn th√¥ng qua component cha <code class=\"language-inline-text\">&lt;RadioImageForm/></code>, v√¨ m·ªôt l√Ω do n√†o ƒë√≥ ch√∫ng ta c·∫ßn truy c·∫≠p c√°c prop n√†y b√™n trong component cha th√¨ sao? Ch√∫ng ta l√†m th√™m m·ªôt b∆∞·ªõc <code class=\"language-inline-text\">pass-through</code> c√°c prop xu·ªëng cho component con v·ªõi <code class=\"language-inline-text\">React.Children.map</code> ho·∫∑c <code class=\"language-inline-text\">React.cloneElement</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>ReactElement <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> currentValue<span class=\"token punctuation\">,</span> onChange<span class=\"token punctuation\">,</span> defaultValue <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageFormWrapper</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>\n          React<span class=\"token punctuation\">.</span>Children<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">,</span> \n            <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">child</span><span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>ReactElement</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n              React<span class=\"token punctuation\">.</span><span class=\"token function\">cloneElement</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n                currentValue<span class=\"token punctuation\">,</span>\n                onChange<span class=\"token punctuation\">,</span>\n                defaultValue<span class=\"token punctuation\">,</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">RadioImageFormWrapper</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Quay l·∫°i v·ªõi <code class=\"language-inline-text\">&lt;RadioInput /></code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">static</span> <span class=\"token function-variable function\">RadioInput</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\n  currentValue<span class=\"token punctuation\">,</span>\n  onChange<span class=\"token punctuation\">,</span>\n  label<span class=\"token punctuation\">,</span>\n  value<span class=\"token punctuation\">,</span>\n  name<span class=\"token punctuation\">,</span>\n  imgSrc<span class=\"token punctuation\">,</span>\n  key<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> RadioInputProps</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio-button-group<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>key<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n      <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radio<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">aria-label</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>label<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onChange<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">checked</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>currentValue <span class=\"token operator\">===</span> value<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">aria-checked</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>currentValue <span class=\"token operator\">===</span> value<span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>imgSrc<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>overlay<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* .... */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>To√†n b·ªô source code: <a href=\"https://codesandbox.io/s/compound-components-radio-image-form-k1h8x\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://codesandbox.io/s/compound-components-radio-image-form-k1h8x</a></p>\n<h3 id=\"h·∫°n-ch·∫ø\"><a href=\"#h%E1%BA%A1n-ch%E1%BA%BF\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>H·∫°n ch·∫ø</h3>\n<p>V·ªõi c√°ch vi·∫øt compound component n√†y, ch√∫ng ta b·ªã m·ªôt h·∫°n ch·∫ø l√† b·∫Øt bu·ªôc phai vi·∫øt component theo ki·ªÉu</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageForm</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageForm.RadioInput</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageForm.RadioInput</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageForm.RadioInput</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">RadioImageForm</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Ch√∫ng ta kh√¥ng ƒë∆∞·ª£c ph√©p ch√®n th√™m m·ªôt s·ªë th·∫ª <code class=\"language-inline-text\">&lt;div /></code> ·ªü gi·ªØa n·∫øu c√≥ nhu c·∫ßu t√πy bi·∫øn giao di·ªán ch·∫≥ng h·∫°n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageForm</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageForm.RadioInput</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageForm.RadioInput</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageForm.RadioInput</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">RadioImageForm</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><a href=\"https://codesandbox.io/s/compound-components-radio-image-form-k1h8x\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Compound component</a>\n<a href=\"https://codesandbox.io/s/functional-compound-components-w-hooks-radio-image-form-2zbhs\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Compound component v·ªõi React Hook</a></p>\n<h2 id=\"flexible-compound-component\"><a href=\"#flexible-compound-component\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Flexible compound component</h2>\n<p>Flexible compound component ra ƒë·ªùi ƒë·ªÉ gi·∫£i quy·∫øt h·∫°n ch·∫ø c·ªßa compound component, ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng React Context API.</p>\n<p>Ch√∫ng ta s·∫Ω t·∫°o ra m·ªôt <code class=\"language-inline-text\">context</code> m√† ·ªü ƒë√≥ c·∫£ component con v√† cha ƒëi·ªÅu c√≥ th·ªÉ truy xu·∫•t ƒë∆∞·ª£c, ƒë√∫ng nh∆∞ m·ª•c ƒë√≠ch ra ƒë·ªùi c·ªßa Context API</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> RadioImageFormContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">currentValue</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">defaultValue</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">onChange</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nRadioImageFormContext<span class=\"token punctuation\">.</span>displayName <span class=\"token operator\">=</span> <span class=\"token string\">'RadioImageForm'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ch√∫ng ta s·∫Ω refactor l·∫°i <code class=\"language-inline-text\">&lt;RadioImageForm/></code>, b·ªè ƒëi ƒëo·∫°n <code class=\"language-inline-text\">React.Children.map</code>, thay b·∫±ng <code class=\"language-inline-text\">&lt;Provider /></code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>ReactElement <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageFormWrapper</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RadioImageFormContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">RadioImageFormContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">RadioImageFormWrapper</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>S·ª≠ d·ª•ng Provider c√≥ m·ªôt l∆∞u √Ω s·ªëng c√≤n l√† ƒë·ª´ng bao gi·ªù truy·ªÅn <code class=\"language-inline-text\">value={{ some bla bla}}</code>, nh∆∞ v·∫≠y n√≥ s·∫Ω kh√°c nhau tr√™n t·∫•t c·∫£ nh·ªØng l·∫ßn render, h√£y nh·ªõ truy·ªÅn m·ªôt th·ª© g√¨ ƒë√≥ cache ƒë∆∞·ª£c v√† ch·ªâ b·ªã thay ƒë·ªïi khi c·∫ßn thi·∫øt nh∆∞ this.state</p>\n</blockquote>\n<p>Trong component con <code class=\"language-inline-text\">&lt;RadioInput /></code> ch√∫ng ta c√≥ th·ªÉ truy xu·∫•t t·∫•t c·∫£ d·ªØ li·ªáu n·ªôi b·ªô th√¥ng qua <em>consumer</em>, b·ªüi v√¨ <code class=\"language-inline-text\">&lt;RadioInput /></code> ƒëang n·∫±m trong <code class=\"language-inline-text\">&lt;RadioImageForm /></code> lu√¥n theo c√°ch vi·∫øt c·ªßa ch√∫ng ta, n√™n c√≥ th·ªÉ khai b√°o m·ªôt static property <code class=\"language-inline-text\">Consumer</code> b√™n trong <code class=\"language-inline-text\">RadioImageForm</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RadioImageForm</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token operator\">&lt;</span>Props<span class=\"token punctuation\">,</span> State<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">static</span> Consumer <span class=\"token operator\">=</span> RadioImageFormContext<span class=\"token punctuation\">.</span>Consumer<span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//...</span></code></pre></div>\n<p><a href=\"https://codesandbox.io/s/flexible-compound-components-radio-image-form-393y7\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Source code v√≠ d·ª•</a>\n<a href=\"https://codesandbox.io/s/functional-flexible-compound-components-w-hooks-radio-image-form-2u3sf\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Source code Flexible compound component b·∫±ng functional component</a></p>\n<h2 id=\"provider-pattern\"><a href=\"#provider-pattern\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Provider Pattern</h2>\n<p>Provider pattern l√† k·ªπ thu·∫≠t k·∫øt h·ª£p gi·ªØa React Context API v√† render props pattern, v·∫´n l√† ƒë·ªÉ gi·∫£i quy·∫øt c√¢u chuy·ªán chia s·∫ª state gi·ªØa c√°c component trong c√¢y.</p>\n<p>N·∫øu b·∫°n c√≥ th·∫Øc m·∫Øc, ·ªßa v·∫≠y sao kh√¥ng d√πng Redux, Mobx, Recoil, React Sweet State, Rematch, Unstated,... cho kh·ªèe ng∆∞·ªùi ∆°i? Th√¨ c√¢u tr·∫£ l·ªùi c·ªßa m√¨nh l√†, ·ª´ c√°c b·∫°n n√™n x√†i nh·ªØng th∆∞ vi·ªán qu·∫£n l√Ω state nh∆∞ v·∫≠y cho kh·ªèe ng∆∞·ªùi, kh·ªèe cho c·∫£ ng∆∞·ªùi maintain code b·∫°n. C√≤n ƒë√¢y l√† c√°ch l√†m n·∫øu b·∫°n mu·ªën tham kh·∫£o, n·∫øu kh√¥ng d√πng g√¨ h·∫øt, t√¥i d∆∞ gi·∫£ th·ªùi gian ƒë·ªÉ code t·ª´ ƒë·∫ßu th√¨ b·∫°n c√≥ th·ªÉ go-ahead v·ªõi c√°ch n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/components/DogDataProvider.tsx</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">State</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> IDog<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> Status<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> Error<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token literal-property property\">initState</span><span class=\"token operator\">:</span> State <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> Status<span class=\"token punctuation\">.</span>loading<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> DogDataProviderContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nDogDataProviderContext<span class=\"token punctuation\">.</span>displayName <span class=\"token operator\">=</span> <span class=\"token string\">'DogDataProvider'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token literal-property property\">DogDataProvider</span><span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span><span class=\"token constant\">FC</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span><span class=\"token parameter\">ReactElement</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span>useState<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">State</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(initState);\n\n  React.useEffect(() => </span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>initState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Promise<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>void</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> => </span><span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// MOCK API CALL</span>\n        <span class=\"token keyword\">const</span> asyncMockApiFn <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Promise<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">IDog</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> =>\n          await new Promise(resolve => setTimeout(() => resolve(DATA), 1000));\n        const data = await asyncMockApiFn();\n\n        setState(</span><span class=\"token punctuation\">{</span>\n          data<span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> Status<span class=\"token punctuation\">.</span>loaded<span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span>\n        <span class=\"token punctuation\">}</span><span class=\"token plain-text\">);\n      } catch (error) </span><span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          error<span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> Status<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    })();\n  }, []);\n\n  return (\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DogDataProviderContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">DogDataProviderContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  );\n};</span></code></pre></div>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/components/DogDataProvider.tsx</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">useDogProviderState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>DogDataProviderContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>context <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'useDogProviderState ph·∫£i ƒë∆∞·ª£c s·ª≠ d·ª•ng b√™n trong DogDataProvider.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> context<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/index.tsx</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* DataProvider ph·∫£i n·∫±m tr√™n c√πng c·ªßa c√¢y.*/</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DogDataProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Nav</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>py-5 md:py-20 max-w-screen-xl mx-auto text-center text-white w-full<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Banner</span></span>\n              <span class=\"token attr-name\">title</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'React Component Patterns:'</span><span class=\"token punctuation\">}</span></span>\n              <span class=\"token attr-name\">subtitle</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'Provider Pattern'</span><span class=\"token punctuation\">}</span></span>\n            <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* Component con s·ª≠ d·ª•ng d·ªØ li·ªáu qua Consumer */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Profile</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/friends<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* Component con s·ª≠ d·ª•ng d·ªØ li·ªáu qua Consumer */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DogFriends</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">DogDataProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Profile</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// custom hook nh·∫≠n \"subscribes\" khi c√≥ state thay ƒë·ªïi</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> status<span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useDogProviderState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>//...<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Profile</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mt-10<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">       \n        </span><span class=\"token punctuation\">{</span>error <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Error</span></span> <span class=\"token attr-name\">errorMessage</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> status <span class=\"token operator\">===</span> Status<span class=\"token punctuation\">.</span>loading <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Loader</span></span> <span class=\"token attr-name\">isInherit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ProfileCard</span></span> <span class=\"token attr-name\">data</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a href=\"https://codesandbox.io/s/provider-pattern-with-react-custom-hooks-llirx\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Source Code Provider Pattern</a></p>\n<p><a href=\"https://dev.to/alexi_be3/react-component-patterns-49ho\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Component Patterns</a></p>\n","cover_image":""}},{"node":{"id":"f92db246b489ea2b34cf82e11e30aea6","title":"L√†m t√≠nh nƒÉng Theme trong React?","path":"/2021-02-21-lam-theme-bang-css-hay-react-context/","date":"2021-02-21","timeToRead":3,"desc":"S·∫Ω c√≥ nhi·ªÅu ti·∫øp c·∫≠n ƒë·ªÉ l√†m theme cho trang web, m·ªï x·∫ª 2 c√°ch ph·ªï bi·∫øn hi·ªán nay trong React, ch·ªçn c√°ch n√†o cho n√≥ ƒë∆°n gi·∫£n nh∆∞ng mang l·∫°i hi·ªáu qu·∫£ cao","content":"<p>ƒê·ªÉ h·ªó tr·ª£ t√≠nh nƒÉng <em>Theme</em>, cho ph√©p ng∆∞·ªùi d√πng l·ª±a ch·ªçn ki·ªÉu giao di·ªán m√† h·ªç th√≠ch, trong React, b·∫°n s·∫Ω c√≥ th·ªÉ ti·∫øp c·∫≠n 1 trong 2 c√°ch d√πng CSS-in-JS ho·∫∑c d√πng CSS variable (t·∫•t nhi√™n kh√¥ng c√≥ h·ªó tr·ª£ v·ªõi IE)</p>\n<p>N·∫øu d√πng CSS-in-JS b·∫°n s·∫Ω c√≥ th·ªÉ l√†m ƒë∆∞·ª£c nhi·ªÅu <em>th·ª©</em> h∆°n, b·∫°n c√≥ m·ªôt b·ªô c√¥ng c·ª• ƒë·ªß c√°c <strong>ƒë·∫°o c·ª•</strong> ƒë·ªÉ mua mai trong JS. B√†i vi·∫øt n√†y s·∫Ω ch·ªâ ra t·∫°i sao b·∫°n n√™n d√πng CSS variable cho nhu c·∫ßu l√†m theme</p>\n<p>N·∫øu d√πng CSS-in-JS, trong React b·∫°n s·∫Ω t·ªï ch·ª©c m·ªôt <code class=\"language-inline-text\">ThemeProvider</code> b·∫±ng React Context, d√πng hook <code class=\"language-inline-text\">useTheme</code>  ƒë·ªÉ l·∫•y gi√° tr·ªã trong <code class=\"language-inline-text\">ThemeProvider</code>, s·∫Ω nh∆∞ th·∫ø n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> styled <span class=\"token keyword\">from</span> <span class=\"token string\">'@emotion/styled'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>ThemeProvider<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'emotion-theming'</span>\n\n<span class=\"token keyword\">const</span> themes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">light</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">colors</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">primary</span><span class=\"token operator\">:</span> <span class=\"token string\">'deeppink'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token string\">'white'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">dark</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">colors</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">primary</span><span class=\"token operator\">:</span> <span class=\"token string\">'lightpink'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">background</span><span class=\"token operator\">:</span> <span class=\"token string\">'black'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> PrimaryText <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span><span class=\"token function\">div</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>theme<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> theme<span class=\"token punctuation\">.</span>colors<span class=\"token punctuation\">.</span>primary<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> theme<span class=\"token punctuation\">.</span>colors<span class=\"token punctuation\">.</span>background<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ThemeToggler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>theme<span class=\"token punctuation\">,</span> onClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> nextTheme <span class=\"token operator\">=</span> theme <span class=\"token operator\">===</span> <span class=\"token string\">'light'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'dark'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'light'</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">onClick</span><span class=\"token punctuation\">(</span>nextTheme<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      Change to </span><span class=\"token punctuation\">{</span>nextTheme<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> mode\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>theme<span class=\"token punctuation\">,</span> setTheme<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'light'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemeProvider</span></span> <span class=\"token attr-name\">theme</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>themes<span class=\"token punctuation\">[</span>theme<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PrimaryText</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">This text is the primary color</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">PrimaryText</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemeToggler</span></span>\n        <span class=\"token attr-name\">theme</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>theme<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextTheme</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setTheme</span><span class=\"token punctuation\">(</span>nextTheme<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ThemeProvider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</code></pre></div>\n<p>N·∫øu d√πng CSS variable, ch√∫ng ta khai bao m·ªôt b·ªô c√°c bi·∫øn c·∫ßn d√πng, r·ªìi ch√®n th√™m <code class=\"language-inline-text\">data-theme</code> cho th·∫ª <code class=\"language-inline-text\">body</code></p>\n<p>CSS</p>\n<div class=\"gridsome-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">body[data-theme='light']</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">--colors-primary</span><span class=\"token punctuation\">:</span> deeppink<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--colors-background</span><span class=\"token punctuation\">:</span> white<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">body[data-theme='dark']</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">--colors-primary</span><span class=\"token punctuation\">:</span> lightpink<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--colors-background</span><span class=\"token punctuation\">:</span> black<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ph·∫ßn implement c·ªßa React component l√∫c n√†y s·ª≠a l·∫°i</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'./css-vars.css'</span>\n<span class=\"token keyword\">import</span> styled <span class=\"token keyword\">from</span> <span class=\"token string\">'@emotion/styled'</span>\n\n<span class=\"token keyword\">const</span> PrimaryText <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span><span class=\"token function\">div</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'var(--colors-primary)'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'var(--colors-background)'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ThemeToggler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>theme<span class=\"token punctuation\">,</span> setTheme<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'light'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> nextTheme <span class=\"token operator\">=</span> theme <span class=\"token operator\">===</span> <span class=\"token string\">'light'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'dark'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'light'</span>\n  React<span class=\"token punctuation\">.</span><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>dataset<span class=\"token punctuation\">.</span>theme <span class=\"token operator\">=</span> theme\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>theme<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setTheme</span><span class=\"token punctuation\">(</span>nextTheme<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      Change to </span><span class=\"token punctuation\">{</span>nextTheme<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> mode\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PrimaryText</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">This text is the primary color</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">PrimaryText</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemeToggler</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</code></pre></div>\n<p>Th·∫≥ng th·∫Øn m√† n√≥i, c·∫£ 2 c√°ch l√†m n√†y ƒë·ªÅu cho k·∫øt qu·∫£ nh∆∞ nhau v·ªÅ m·∫∑t tr√£i nghi·ªám s·ª≠ d·ª•ng, d√πng CSS-in-JS s·∫Ω c√≥ ch√∫t c·∫£m gi√°c h∆°i qu√° ƒë√† k·ªπ thu·∫≠t, t·ª´ chuy√™n ng√†nh l√† over-engineering.</p>\n<iframe src=\"https://codesandbox.io/embed/css-variables-vs-themeprovider-df90h?fontsize=14&hidenavigation=1&theme=dark\"\n     style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\"\n     title=\"CSS Variables vs ThemeProvider\"\n     allow=\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\"\n     sandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n   ></iframe>\n<p>V·ªÅ hi·ªáu nƒÉng th√¨ sao?</p>\n<p>ThemeProvider</p>\n<p><img src=\"https://d33wubrfki0l68.cloudfront.net/b903d3908c2f09f6139573d3da3ce48d0e831885/2cc29/static/e25d5f73f3fffe0fed8586eea95892df/e7448/theme-provider.png\" alt=\"Profiling session showing everything rendered\"></p>\n<p>CSS variable</p>\n<p><img src=\"https://d33wubrfki0l68.cloudfront.net/e737a004afce33b75c4c0b07e42c58a3ff1aaeec/21d3b/static/47d22cd6f96a31f50329ff658f18af39/e7448/css-vars.png\" alt=\"Profiling session showing only one component rendered\"></p>\n<p>C≈©ng kh√¥ng nh·∫•t thi·∫øt ph·∫£i nh√¨n v√†o con s·ªë mili gi√¢y ph·∫£i t·ªën cho vi·ªác render, v√¨ simple n√†y kh√° l√† b√©. B·∫°n c·ª© h√¨nh d√πng n·∫øu m·ªôt c√¢y React Component v·ªõi h√†ng trƒÉm component con l·ªìng gh√©p nhau, khi thay ƒë·ªïi gi√° tr·ªã trong ThemeProvider, t·∫•t c·∫£ nh·ªØng component ƒë·ªÅu b·ªã render l·∫°i th√¨ s·∫Ω nh∆∞ th·∫ø n√†o? Vi·ªác d√πng CSS variable s·∫Ω mang l·∫°i hi·ªáu qu·∫£ h∆°n nhi·ªÅu v√¨ tr√¨nh duy·ªát kh√¥ng ph·∫£i l√†m qu√° nhi·ªÅu th·ª© nh∆∞ c√°ch 1.</p>\n<p>C√≥ m·ªôt l√Ω do m√† m√¨nh cho l√† h∆°i ng·ª•y bi·ªán khi khƒÉng khƒÉng ƒë√≤i d√πng JS-in-CSS theo m√¨nh ƒëo√°n l√† c√°c b·∫°n th·∫≠t s·ª± ch∆∞a ƒë·ªß t·ª± tin c≈©ng nh∆∞ \"tr√¨nh\" ƒë·ªÉ vi·∫øt CSS hi·ªán ƒë·∫°i, b·∫°n chuy√™n t√¢m n√¢ng t·∫ßm JS c·ªßa m√¨nh m√† qu√™n m·∫•t vi·ªác n√¢ng t·∫ßm CSS, v√≥n ƒë√£ ph√°t tri·ªÉn r·∫•t xa t·ª´ c√°i th·ªùi b·∫°n d√πng <code class=\"language-inline-text\">float</code></p>\n<p><a href=\"https://epicreact.dev/css-variables/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Use CSS Variables instead of React Context</a></p>\n","cover_image":""}},{"node":{"id":"6b324ce351918a6b8b007a9763267d64","title":"Redux selector v√† v·∫•n ƒë·ªÅ s·ª≠ d·ª•ng sao cho hi·ªáu qu·∫£","path":"/2020-12-10-optimize-redux-selector/","date":"2020-12-10","timeToRead":4,"desc":"N·∫øu ƒëang s·ª≠ d·ª•ng redux, v√† b·∫°n c√≥ th·∫Øc m·∫Øc, vi·∫øt selector sao cho hi·ªáu qu·∫£ v·ªÅ t·ªëc ƒë·ªô v√† d·ªÖ maintain th√¨ ƒë√¢y l√† b√†i vi·∫øt b·∫°n n√™n ƒë·ªçc","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#selector\">Selector</a></li>\n<li><a href=\"#kh%C3%A1c-nhau-gi%E1%BB%AFa-useselector-v%C3%A0-mapstate\">Kh√°c nhau gi·ªØa <code class=\"language-inline-text\">useSelector</code> v√† <code class=\"language-inline-text\">mapState</code></a></li>\n<li><a href=\"#l%C3%BD-do-s%E1%BB%AD-d%E1%BB%A5ng-selector\">L√Ω do s·ª≠ d·ª•ng selector</a></li>\n<li>\n<p><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-sao-cho-t%E1%BB%91i-%C6%B0u\">S·ª≠ d·ª•ng sao cho t·ªëi ∆∞u?</a></p>\n<ul>\n<li><a href=\"#selector-ph%E1%BB%A5-thu%E1%BB%99c-v%C3%A0o-gi%C3%A1-tr%E1%BB%8B-prop-c%E1%BB%A7a-component\">Selector ph·ª• thu·ªôc v√†o gi√° tr·ªã prop c·ªßa component</a></li>\n<li><a href=\"#nhi%E1%BB%81u-instance-c%E1%BB%A7a-m%E1%BB%99t-component\">Nhi·ªÅu instance c·ªßa m·ªôt component</a></li>\n</ul>\n</li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"selector\"><a href=\"#selector\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Selector</h2>\n<blockquote>\n<p>Selector l√† m·ªôt h√†m v·ªõi input l√† 'state' c·ªßa store v√† tr·∫£ v·ªÅ m·ªôt gi√° tr·ªã mong mu·ªën</p>\n</blockquote>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">selectEntities</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>entities<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">selectItemIds</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">selectSomeSpecificField</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>some<span class=\"token punctuation\">.</span>deeply<span class=\"token punctuation\">.</span>nested<span class=\"token punctuation\">.</span>field<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">selectItemsWhoseNamesStartWith</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">items<span class=\"token punctuation\">,</span> namePrefix</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">const</span> filteredItems <span class=\"token operator\">=</span> items<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> item<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">startsWith</span><span class=\"token punctuation\">(</span>namePrefix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token keyword\">return</span> filteredItems<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>V·ªÅ c√°ch ƒë·∫∑t t√™n, kh√¥ng b·∫Øt bu·ªôc, nh∆∞ng ƒëa ph·∫ßn s·∫Ω ƒë·∫∑t v·ªõi <em>prefix</em> <code class=\"language-inline-text\">select</code> ho·∫∑c <code class=\"language-inline-text\">get</code></p>\n<h2 id=\"kh√°c-nhau-gi·ªØa-useselector-v√†-mapstate\"><a href=\"#kh%C3%A1c-nhau-gi%E1%BB%AFa-useselector-v%C3%A0-mapstate\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kh√°c nhau gi·ªØa <code class=\"language-inline-text\">useSelector</code> v√† <code class=\"language-inline-text\">mapState</code></h2>\n<ul>\n<li>Khi m·ªôt <em>action</em> ƒë∆∞·ª£c <em>dispatch</em>, <code class=\"language-inline-text\">useSelector</code> s·∫Ω th·ª±c hi·ªán so s√°nh gi·ªØa k·∫øt qu·∫£ tr∆∞·ªõc ƒë√≥ v√† k·∫øt qu·∫£ hi·ªán t·∫°i, <em>n·∫øu kh√°c</em>, component b·ªã force ƒë·ªÉ re-render.</li>\n<li><code class=\"language-inline-text\">useSelector</code> s·ª≠ d·ª•ng so s√°nh <code class=\"language-inline-text\">===</code> ch·ª© kh√¥ng d√πng ph∆∞∆°ng ph√°p so s√°nh <strong>shallow</strong> (d·ªãch vui l√† so s√°nh \"nh·∫π\")</li>\n</ul>\n<h2 id=\"l√Ω-do-s·ª≠-d·ª•ng-selector\"><a href=\"#l%C3%BD-do-s%E1%BB%AD-d%E1%BB%A5ng-selector\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>L√Ω do s·ª≠ d·ª•ng selector</h2>\n<ul>\n<li>S·ª≠ d·ª•ng l·∫°i, m·ªôt selector c√≥ th·ªÉ s·ª≠ d·ª•ng ·ªü nhi·ªÅu n∆°i, nhi·ªÅu component kh√°c nhau</li>\n<li>Tinh g·ªçn, v√≠ d·ª• ch√∫ng ta c√≥ <em>entity</em> <code class=\"language-inline-text\">user</code>  ch·ª©a <code class=\"language-inline-text\">lastname</code>, <code class=\"language-inline-text\">fullname</code>, <code class=\"language-inline-text\">email</code>, nh∆∞ng ch√∫ng ta ch·ªâ mu·ªën l·∫•y <code class=\"language-inline-text\">email</code>, m·ªôt selector <code class=\"language-inline-text\">getUserEmail</code> s·∫Ω r·∫•t r√µ r√†ng tinh g·ªçn</li>\n<li>L√Ω t∆∞·ªüng nh·∫•t, ch·ªâ c√≥ <em>reducer</em> v√† <em>selector</em> m·ªõi bi·∫øt ƒë∆∞·ª£c structure c·ªßa redux store, nh∆∞ v·∫≠y m·ªôt khi structure n√†y c√≥ thay ƒë·ªïi, ch√∫ng ta ch·ªâ vi·ªác c·∫≠p nh·∫≠p l·∫°i ·ªü 2 ch·ªó n√†y.</li>\n</ul>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createSelector <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'reselect'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getVisibilityFilter</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>visibilityFilter\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getTodos</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>todos\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> getVisibleTodos <span class=\"token operator\">=</span> <span class=\"token function\">createSelector</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">[</span>getVisibilityFilter<span class=\"token punctuation\">,</span> getTodos<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\">visibilityFilter<span class=\"token punctuation\">,</span> todos</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>visibilityFilter<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'SHOW_ALL'</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> todos\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'SHOW_COMPLETED'</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> todos<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span> <span class=\"token operator\">=></span> t<span class=\"token punctuation\">.</span>completed<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">case</span> <span class=\"token string\">'SHOW_ACTIVE'</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> todos<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>t<span class=\"token punctuation\">.</span>completed<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token operator\">...</span>\n<span class=\"token keyword\">const</span> visibleTodos <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span>getVisibleTodos<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">...</span></code></pre></div>\n<h2 id=\"s·ª≠-d·ª•ng-sao-cho-t·ªëi-∆∞u\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-sao-cho-t%E1%BB%91i-%C6%B0u\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng sao cho t·ªëi ∆∞u?</h2>\n<p>V√¨ <code class=\"language-inline-text\">useSelector</code> d√πng ph√©p so s√°nh <code class=\"language-inline-text\">===</code> n√™n n·∫øu h√†m selector tr·∫£ v·ªÅ m·∫£ng (d√πng <code class=\"language-inline-text\">.map</code>, <code class=\"language-inline-text\">.filter</code>, destructuring <code class=\"language-inline-text\">...</code>), component s·∫Ω b·ªã trigger re-render.</p>\n<p>ƒê·ªÉ √Ω, khi function d√πng l√†m <em>selector</em> c√≥ th·ªÉ c√≥ nhi·ªÅu t√≠nh to√°n, transform ph·ª©c t·∫°p. V·ªõi m·ªói l·∫ßn re-render, s·∫Ω t·ªën th·ªùi gian ƒë·ªÉ th·ª±c thi h√†m selector.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">selectData</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> filteredData <span class=\"token operator\">=</span> <span class=\"token function\">expensiveFiltering</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> sortedData <span class=\"token operator\">=</span> <span class=\"token function\">expensiveSorting</span><span class=\"token punctuation\">(</span>filteredData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> transformedData <span class=\"token operator\">=</span> <span class=\"token function\">expensiveTransformation</span><span class=\"token punctuation\">(</span>sortedData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> transformedData<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">...</span>\n<span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span>selectData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Trong l√∫c re-render,  d√π cho <code class=\"language-inline-text\">data</code> kh√¥ng thay ƒë·ªïi, h√†m <code class=\"language-inline-text\">selectData</code> v·∫´n ƒë∆∞·ª£c g·ªçi.</p>\n<p>Gi·∫£i quy·∫øt b·∫±ng c√°ch s·ª≠ d·ª•ng th∆∞ vi·ªán <a href=\"https://github.com/reduxjs/reselect\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Reselect</a>, n√≥ s·∫Ω cho ph√©p tr·∫£ v·ªÅ k·∫øt qu·∫£ tr∆∞·ªõc ƒë√≥, n·∫øu input l√† gi·ªëng nhau.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useSelector <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createSelector <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'reselect'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">selectUsers</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> selectData <span class=\"token operator\">=</span> <span class=\"token function\">createSelector</span><span class=\"token punctuation\">(</span>\n    <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">,</span>\n    <span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> filteredData <span class=\"token operator\">=</span> <span class=\"token function\">expensiveFiltering</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> sortedData <span class=\"token operator\">=</span> <span class=\"token function\">expensiveSorting</span><span class=\"token punctuation\">(</span>filteredData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> transformedData <span class=\"token operator\">=</span> <span class=\"token function\">expensiveTransformation</span><span class=\"token punctuation\">(</span>sortedData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> transformedData<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">UsersCounter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span>selectData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"selector-ph·ª•-thu·ªôc-v√†o-gi√°-tr·ªã-prop-c·ªßa-component\"><a href=\"#selector-ph%E1%BB%A5-thu%E1%BB%99c-v%C3%A0o-gi%C3%A1-tr%E1%BB%8B-prop-c%E1%BB%A7a-component\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Selector ph·ª• thu·ªôc v√†o gi√° tr·ªã prop c·ªßa component</h3>\n<p>Trong tr∆∞·ªùng h·ª£p m·ªôt h√†m selector c√≥ nh·∫≠n input l√† prop c·ªßa component, ph·∫£i ƒë·∫£m b·∫£o h√†m selector ƒë∆∞·ª£c khai bao b√™n ngo√†i component.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useSelector <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createSelector <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'reselect'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">selectUser</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> userId</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> selectUserById <span class=\"token operator\">=</span> <span class=\"token function\">createSelector</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">[</span>selectUser<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> <span class=\"token function\">expensiveTransformation</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">UserDetails</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> userId <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token function\">selectUserById</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">User Details:</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UserDetails</span></span> <span class=\"token attr-name\">userId</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"nhi·ªÅu-instance-c·ªßa-m·ªôt-component\"><a href=\"#nhi%E1%BB%81u-instance-c%E1%BB%A7a-m%E1%BB%99t-component\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nhi·ªÅu instance c·ªßa m·ªôt component</h3>\n<p>Khi m·ªôt h√†m selector ƒë∆∞·ª£c d√πng trong nhi·ªÅu <em>instance</em> c·ªßa m·ªôt component v√† c≈©ng ph·ª• thu·ªôc v√†o <code class=\"language-inline-text\">prop</code>, nh∆∞ 2 <em>instance</em> c·ªßa <code class=\"language-inline-text\">UserDetails</code> ·ªü tr√™n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UserDetails</span></span> <span class=\"token attr-name\">userId</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UserDetails</span></span> <span class=\"token attr-name\">userId</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>Ch√∫ng ta c·∫ßn ch·∫Øc ch·∫Øn, <strong>m·ªói <code class=\"language-inline-text\">instance</code> c·ªßa <code class=\"language-inline-text\">UserDetails</code> s·∫Ω ·ª©ng v·ªõi m·ªôt instance c·ªßa h√†m selector,</strong> n·∫øu ch·ªâ vi·∫øt nh∆∞ v√≠ d·ª• ·ªü tr√™n l√† kh√¥ng ƒë∆∞·ª£c, c·∫£ 2 instance c·ªßa <code class=\"language-inline-text\">UserDetails</code> ch·ªâ tr·ªè v·ªÅ m·ªôt selector.</p>\n<p>S·ª≠ d·ª•ng k·∫øt h·ª£p v·ªõi <code class=\"language-inline-text\">useMemo</code> c·ªßa React ƒë·ªÉ ƒë·∫°t ƒë∆∞·ª£c k·∫øt qu·∫£ mong mu·ªën</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useMemo <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useSelector <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createSelector <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'reselect'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">selectUser</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> userId</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> users<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> user<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">makeSelectUserById</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> \n  <span class=\"token function\">createSelector</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">[</span>selectUser<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> <span class=\"token function\">expensiveTransformation</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">UserDetails</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> userId <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> selectUserMemo <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>makeSelectUserById<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token function\">useSelector</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token function\">selectUserMemo</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">User Details:</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UserDetails</span></span> <span class=\"token attr-name\">userId</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UserDetails</span></span> <span class=\"token attr-name\">userId</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>V·ªõi c√°ch n√†y <code class=\"language-inline-text\">const selectUserMemo = useMemo(makeSelectUserById, []);</code> ch√∫ng ta t·∫°o m·ªôt instance c·ªßa h√†m selector tr√™n t·ª´ng instance c·ªßa component.</p>\n<p><strong>T√†i li·ªáu tham kh·∫£o</strong></p>\n<p><a href=\"https://programmerden.com/2020/04/06/optimize-your-redux-selectors-with-useselector-hook-and-memoize-them-with-reselect/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://programmerden.com/2020/04/06/optimize-your-redux-selectors-with-useselector-hook-and-memoize-them-with-reselect/</a></p>\n<p><a href=\"https://blog.isquaredsoftware.com/2017/12/idiomatic-redux-using-reselect-selectors/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://blog.isquaredsoftware.com/2017/12/idiomatic-redux-using-reselect-selectors/</a></p>\n","cover_image":""}},{"node":{"id":"c4165c753ae81ff286e7ea6b27b8e2a3","title":"V√†i l∆∞u √Ω trong React ƒë·ªÉ tr√°nh c√°c v·∫•n ƒë·ªÅ v·ªõi b·∫£o m·∫≠t","path":"/2020-11-23-10-kinh-nghiem-trong-react-voi-van-de-bao-mat/","date":"2020-11-23","timeToRead":2,"desc":"M·ªôt v√†i ƒëi·ªÉm nh·∫Øc nh·∫π c√°c b·∫°n khi ƒëang vi·∫øt React, ƒë·ªÉ tr√°nh b·ªã d√≠nh injection","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#d%C3%B9ng-data-binding-m%E1%BA%B7c-%C4%91%E1%BB%8Bnh-%C4%91%E1%BB%83-c%C3%B3-xss-protection\">D√πng data binding m·∫∑c ƒë·ªãnh ƒë·ªÉ c√≥ XSS protection</a></li>\n<li><a href=\"#validate-urls-tr%C6%B0%E1%BB%9Bc-khi-s%E1%BB%AD-d%E1%BB%A5ng\">Validate URLs tr∆∞·ªõc khi s·ª≠ d·ª•ng</a></li>\n<li><a href=\"#render-html\">Render HTML</a></li>\n<li><a href=\"#truy-c%E1%BA%ADp-tr%E1%BB%B1c-ti%E1%BA%BFp-%C4%91%E1%BA%BFn-dom\">Truy c·∫≠p tr·ª±c ti·∫øp ƒë·∫øn DOM</a></li>\n<li><a href=\"#ki%E1%BB%83m-tra-th%C6%B0-vi%E1%BB%87n-dependency\">Ki·ªÉm tra th∆∞ vi·ªán dependency</a></li>\n<li><a href=\"#json\">JSON</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"d√πng-data-binding-m·∫∑c-ƒë·ªãnh-ƒë·ªÉ-c√≥-xss-protection\"><a href=\"#d%C3%B9ng-data-binding-m%E1%BA%B7c-%C4%91%E1%BB%8Bnh-%C4%91%E1%BB%83-c%C3%B3-xss-protection\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>D√πng data binding m·∫∑c ƒë·ªãnh ƒë·ªÉ c√≥ XSS protection</h2>\n<p>Khi render m·ªôt n·ªôi dung d·∫°ng <code class=\"language-inline-text\">text</code> b·∫±ng ki·ªÉu <strong>data binding m·∫∑c ƒë·ªãnh</strong> (ƒë·∫∑t trong d·∫•u <code class=\"language-inline-text\">{}</code>), React s·∫Ω <strong>m·∫∑c ƒë·ªãnh</strong> x·ª≠ l√Ω ƒë·ªÉ tr√°nh c√°c v·∫•n ƒë·ªÅ v·ªÅ XSS. L∆∞u √Ω m·ªôt ƒëi·ªÅu l√† n·∫øu truy·ªÅn v√†o cho <code class=\"language-inline-text\">attribute</code> c·ªßa element th√¨ s·∫Ω kh√¥ng c√≥ ƒë∆∞·ª£c t√≠nh nƒÉng n√†y.</p>\n<p>M·∫∑c ƒë·ªãnh c√≥ XSS protection</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>textContent<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Kh√¥ng c√≥ XSS protection, nh·ªõ validate th·ªß c√¥ng tr∆∞·ªõc</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<h2 id=\"validate-urls-tr∆∞·ªõc-khi-s·ª≠-d·ª•ng\"><a href=\"#validate-urls-tr%C6%B0%E1%BB%9Bc-khi-s%E1%BB%AD-d%E1%BB%A5ng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Validate URLs tr∆∞·ªõc khi s·ª≠ d·ª•ng</h2>\n<p>URLs c√≥ th·ªÉ b·ªã <em>inject</em> m·ªôt code js b·∫±ng <code class=\"language-inline-text\">javascript:</code>. ƒê·ªÉ <strong>validate</strong> m·ªôt URL ch·ªâ ƒë∆∞·ª£c ph√©p l√† m·ªôt trong 2 d·∫°ng <code class=\"language-inline-text\">http:</code> <code class=\"language-inline-text\">https:</code>:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">validateURL</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> parsed <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URL</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'https:'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'http:'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>parsed<span class=\"token punctuation\">.</span>protocol<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">validateURL</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> url <span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Click here!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"render-html\"><a href=\"#render-html\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Render HTML</h2>\n<p>Vi·ªác render HTML nh∆∞ tr√™n trang ch√≠nh th·ª©c c·ªßa React c≈©ng ƒë√£ ƒë·ªÅ c·∫≠p, <em>h·∫øt s·ª©c nguy hi·ªÉm</em>, n√™n lu√¥n ph·∫£i <strong>sanitized</strong> tr∆∞·ªõc khi render, d√πng th∆∞ vi·ªán <a href=\"https://www.npmjs.com/package/dompurify\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.npmjs.com/package/dompurify</a></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> purify <span class=\"token keyword\">from</span> <span class=\"token string\">\"dompurify\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">dangerouslySetInnerHTML</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span>purify<span class=\"token punctuation\">.</span><span class=\"token function\">sanitize</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<h2 id=\"truy-c·∫≠p-tr·ª±c-ti·∫øp-ƒë·∫øn-dom\"><a href=\"#truy-c%E1%BA%ADp-tr%E1%BB%B1c-ti%E1%BA%BFp-%C4%91%E1%BA%BFn-dom\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Truy c·∫≠p tr·ª±c ti·∫øp ƒë·∫øn DOM</h2>\n<p>Kh√¥ng ƒë∆∞·ª£c truy c·∫≠p tr·ª±c ti·∫øp ƒë·∫øn DOM r·ªìi <em>inject</em> th√™m v√†o element n√†o ƒë√≥, lu√¥n s·ª≠ d·ª•ng c·∫∑p ƒë√¥i <code class=\"language-inline-text\">dangerouslySetInnerHTML</code> v√† <code class=\"language-inline-text\">dompurify</code> nh∆∞ ·ªü tr√™n n·∫øu c·∫ßn ch√®n n·ªôi dung</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> purify <span class=\"token keyword\">from</span> <span class=\"token string\">\"dompurify\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">dangerouslySetInnerHTML</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span>purify<span class=\"token punctuation\">.</span><span class=\"token function\">sanitize</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>ƒê·ª´ng c√≥ l√†m v·∫≠y nghe, d√πng <code class=\"language-inline-text\">findDomNode()</code>, r·ªìi <code class=\"language-inline-text\">innerHTML</code> nh∆∞ th·ªùi ƒëi h·ªçc</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>myRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> attackerControlledValue<span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"ki·ªÉm-tra-th∆∞-vi·ªán-dependency\"><a href=\"#ki%E1%BB%83m-tra-th%C6%B0-vi%E1%BB%87n-dependency\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ki·ªÉm tra th∆∞ vi·ªán dependency</h2>\n<p>C√°c th∆∞ vi·ªán dependency ƒë√¥i khi c≈©ng r·∫•t nguy hi·ªÉm, m·ªôt c√°ch v√¥ t√¨nh hay c·ªë √Ω, d√πng nh·ªØng c√¥ng c·ª• nh∆∞ l√† <a href=\"https://www.npmjs.com/package/snyk\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">snyk</a> t√≠ch h·ª£p v·ªõi c√¥ng c·ª• qu·∫£n l√Ω code (Github, Gitlab, Bitbucket) ƒë·ªÉ ki·ªÉm tra m·ªôt c√°ch t·ª± ƒë·ªông.</p>\n<h2 id=\"json\"><a href=\"#json\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JSON</h2>\n<p>Vi·ªác g·ª≠i ƒëi m·ªôt JSON l√™n ph√≠a server c≈©ng kh√¥ng ph·∫£i l√† √≠t g·∫∑p, lu√¥n escape k√Ω t·ª± <code class=\"language-inline-text\">&lt;</code> ƒë·ªÉ tr√°nh b·ªã <em>inject</em></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">window<span class=\"token punctuation\">.</span>__PRELOADED_STATE__ <span class=\"token operator\">=</span>   $<span class=\"token punctuation\">{</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>preloadedState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">&lt;</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'\\\\u003c'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://snyk.io/blog/10-react-security-best-practices/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">10 React security best practices</a></p>\n","cover_image":""}},{"node":{"id":"8958a2113badc0e460e80f2970e78e79","title":"H∆∞·ªõng d·∫´n k·ªπ thu·∫≠t FLIP animation v·ªõi React","path":"/2020-11-18-huong-dan-flip-animation-voi-react/","date":"2020-11-18","timeToRead":2,"desc":"N·∫øu b·∫°n l√† ng∆∞·ªùi l√†m animation c√≥ t√¢m, b·∫°n kh√¥ng mu·ªën animation l√†m ·∫£nh h∆∞·ªüng ƒë·∫øn t·ªëc ƒë·ªô c·ªßa ·ª©ng d·ª•ng, b·∫°n c·∫ßn bi·∫øt ƒë·∫øn FLIP animation","content":"<p>Tr∆∞·ªõc ƒë√¢y m√¨nh ƒë√£ c√≥ m·ªôt b√†i v·ªÅ FLIP animation, c√°c b·∫°n c√≥ th·ªÉ ƒë·ªçc l·∫°i <a href=\"https://luubinhan.github.io/blog/2018-07-25-huong-dan-tao-animate-voi-flip-technique/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">·ªü ƒë√¢y</a> ƒë·ªÉ bi·∫øt k·ªπ thu·∫≠t n√†y l√† g√¨ v√† t·∫°i sao n√≥ l·∫°i gi√∫p t·ªëi ∆∞u t·ªëc ƒë·ªô.</p>\n<p>C√≥ th·ªÉ t√≥m t·∫Øt k·ªπ thu·∫≠t FLIP b·∫±ng h√¨nh minh h·ªça b√™n d∆∞·ªõi</p>\n<p><img src=\"https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/JakPwnSa.png?w=398&#x26;ssl=1\"></p>\n<p>Nh·ªØng g√¨ trong √¥ m√†u t√≠m, c·∫ßn di·ªÖn ra tr∆∞·ªõc s·ª± ki·ªán <em>paint</em> c·ªßa tr√¨nh duy·ªát.</p>\n<p>ƒê·ªÉ ƒë·∫°t m·ª•c ƒë√≠ch <strong><em>transform</em> tr∆∞·ªõc khi tr√¨nh duy·ªát th·ª±c hi·ªán <code class=\"language-inline-text\">paint</code></strong>, ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng <code class=\"language-inline-text\">useLayoutEffect</code>, nh·ªØng g√¨ di·ªÖn ra ·ªü ƒë√¢y s·∫Ω x·∫£y ra <strong>sau khi DOM c·∫≠p nh·∫≠p</strong>, <strong>tr∆∞·ªõc khi paint</strong></p>\n<iframe height=\"265\" style=\"width: 100%;\" scrolling=\"no\" title=\"React FLIP animations\" src=\"https://codepen.io/jlkiri/embed/oNjaMrK?height=265&theme-id=light&default-tab=js,result\" frameborder=\"no\" loading=\"lazy\" allowtransparency=\"true\" allowfullscreen=\"true\">\n  See the Pen <a href='https://codepen.io/jlkiri/pen/oNjaMrK'>React FLIP animations</a> by Kirill Vasiltsov\n  (<a href='https://codepen.io/jlkiri'>@jlkiri</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n<p>V·ªõi l·∫ßn render ƒë·∫ßu ti√™n, ch√∫ng ta c·∫ßn <em>cache</em> l·∫°i v·ªã tr√≠ cu·ªëi c√πng c·ªßa animation</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token keyword\">const</span> rects <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">const</span> squares <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.square'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> square <span class=\"token keyword\">of</span> squares<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        rects<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>square<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> square<span class=\"token punctuation\">.</span><span class=\"token function\">getBoundingClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">useLayoutEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> squares <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.square'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> square <span class=\"token keyword\">of</span> squares<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> cachedRect <span class=\"token operator\">=</span> rects<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>square<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cachedRect<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> nextRect <span class=\"token operator\">=</span> square<span class=\"token punctuation\">.</span><span class=\"token function\">getBoundingClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \n            <span class=\"token comment\">// invert</span>\n            <span class=\"token keyword\">const</span> translateX <span class=\"token operator\">=</span> cachedRect<span class=\"token punctuation\">.</span>x <span class=\"token operator\">-</span> nextRect<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">;</span>\n            \n            <span class=\"token comment\">// cache position v√† size</span>\n            rects<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>square<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> nextRect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \n            <span class=\"token comment\">// play animation</span>\n            square<span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translateX(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>translateX<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            \t<span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translateX(0px)</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> ids<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>T√≥m t·∫Øt nh·ªØng g√¨ ƒë√£ th·ª±c hi·ªán b·∫±ng h√¨nh minh h·ªça sau</p>\n<p><img src=\"https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/06/kTkr-F7_.png?fit=1024%2C1024&#x26;ssl=1\" alt=\"Diagram. Cache the size and position, retrieve previous size and position from cache, get new size and position, calculate the difference, and play the animation.\"></p>\n<p><strong>M·ªôt v√†i l∆∞u √Ω</strong></p>\n<ul>\n<li>ƒê·∫£m b·∫£o c√°c t√≠nh to√°n kh√¥ng v∆∞·ª£t qu√° 100ms, ƒëi·ªÅu n√†y nh·∫±m ƒë·∫£m b·∫£o user kh√¥ng c·∫£m nh·∫≠n c√≥ m·ªôt ƒë·ªô tr·ªÖ tr√™n giao di·ªán, c√≥ th·ªÉ ki·ªÉm tra b·∫±ng DevTools\n<img src=\"https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/06/6LqLR8Jc.png?fit=1024%2C275&#x26;ssl=1\" alt=\"img\"></li>\n<li>ƒê·ªÉ tr√°nh re-render kh√¥ng c·∫ßn thi·∫øt, ch√∫ng ta ko ƒë∆∞·ª£c d√πng <code class=\"language-inline-text\">useState</code>, thay v√†o ƒë√≥ ch√∫ng ta ph·∫£i d√πng <code class=\"language-inline-text\">useRef</code> m·ªôt object c·ªë ƒë·ªãnh ch√∫ng ta c√≥ th·ªÉ thay ƒë·ªïi gi√° tr·ªã m√† kh√¥ng g√¢y ra re-render</li>\n<li>Kh√¥ng th·ª±c hi·ªán ƒë·ªçc v·ªã tr√≠ -> ch·∫°y animate ngay v√† lu√¥n tr√™n element ƒë√≥, lu√¥n th·ª±c hi·ªán theo d·∫°ng ƒë·ªçc h√†ng lo·∫°t, sau ƒë√≥ animate m·ªôt lo·∫°t</li>\n<li>N·∫øu kh√¥ng mu·ªën t·ª± vi·∫øt, c√≥ th·ªÉ tham kh·∫£o 2 th∆∞ vi·ªán d√πng v·ªõi React: <a href=\"https://github.com/aholachek/react-flip-toolkit\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-inline-text\">react-flip-toolkit</code></a> v√† <a href=\"https://github.com/jlkiri/react-easy-flip\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-inline-text\">react-easy-flip</code></a>.</li>\n</ul>\n<p><a href=\"https://css-tricks.com/everything-you-need-to-know-about-flip-animations-in-react/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Everything You Need to Know About FLIP Animations in React</a></p>\n","cover_image":""}},{"node":{"id":"2bda1aea7bf5ac181ed1d3a656b277f5","title":"H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng useMemo trong React","path":"/2020-10-26-huong-dan-su-dung-usememo-react/","date":"2020-10-26","timeToRead":3,"desc":"N·∫øu b·∫°n th·∫•y app c·ªßa m√¨nh b·∫Øt ƒë·∫ßu ch·∫≠m, ƒë√≥ l√† l√∫c b·∫°n n√™n b·∫Øt ƒë·∫ßu c√¢n nh·∫Øc c√°c ph∆∞∆°ng ph√°p ƒë·ªÉ t·ªëi ∆∞u t·ªëc ƒë·ªô v√† ƒë·ªçc b√†i vi·∫øt n√†y.","content":"<p>Th∆∞·ªùng React kh√° nhanh, ch√∫ng ta c≈©ng kh√¥ng c·∫ßn qu√° b·∫≠n t√¢m ƒë·∫øn vi·ªác t·ªëi ∆∞u, nhi·ªÅu b·∫°n c≈©ng s·∫Ω kh√¥ng ƒë·ªìng √Ω v·ªõi quan ƒëi·ªÉm n√†y: nh·ªØng <strong>ti·ªán √≠ch</strong> ƒë·ªÉ t·ªëi ∆∞u m√† React cung c·∫•p, ch∆∞a ƒë·ªß <strong>tr∆∞·ªüng th√†nh</strong> (premature - theo quan ƒëi·ªÉm c·ªßa t√°c gi·∫£).</p>\n<p>Ch√∫ng ta s·∫Ω c√πng xem qua c√°ch s·ª≠ d·ª•ng m·ªôt <strong>ti·ªán √≠ch</strong> nh∆∞ v·∫≠y trong React ƒë·ªÉ t·ªëi ∆∞u t·ªëc ƒë·ªô: <code class=\"language-inline-text\">useMemo</code></p>\n<h2 id=\"khi-n√†o-s·ª≠-d·ª•ng-usememo\"><a href=\"#khi-n%C3%A0o-s%E1%BB%AD-d%E1%BB%A5ng-usememo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Khi n√†o s·ª≠ d·ª•ng <code class=\"language-inline-text\">useMemo</code></h2>\n<blockquote>\n<p>Khi c√≥ nh·ªØng t√≠nh to√°n ƒë·ªÉ l·∫•y gi√° tr·ªã kh√° m·∫•t c√¥ng, ch√∫ng ta l∆∞u k·∫øt qu·∫£ t√≠nh l·∫°i cho ti·∫øt ki·ªám th·ªùi gian t√≠nh to√°n.</p>\n</blockquote>\n<p>ƒê·ª´ng d√πng l·ªôn v·ªõi <code class=\"language-inline-text\">React.memo</code> v√† <code class=\"language-inline-text\">useCallback</code>, ch√∫ng n√≥ ƒë∆∞·ª£c d√πng v√†o nh·ªØng m·ª•c ƒë√≠ch r·∫•t kh√°c nhau.</p>\n<h2 id=\"v√≠-d·ª•\"><a href=\"#v%C3%AD-d%E1%BB%A5\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V√≠ d·ª•</h2>\n<p>V√≠ d·ª• ch√∫ng ta c√≥ ·ª©ng d·ª•ng hi·ªÉn th·ªã danh s√°ch user, v·ªõi t√≠nh nƒÉng cho ph√©p filter theo user name.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">const</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Robin'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Dennis'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>text<span class=\"token punctuation\">,</span> setText<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>search<span class=\"token punctuation\">,</span> setSearch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleText</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n \n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleSearch</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setSearch</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n \n  <span class=\"token keyword\">const</span> filteredUsers <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Filter function is running ...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>search<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>text<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleText<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleSearch<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Search\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n \n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span></span> <span class=\"token attr-name\">list</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>filteredUsers<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">List</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> list <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListItem</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">item</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ListItem</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> item <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ch·ªâ khi ƒëi·ªÅn gi√° tr·ªã v√†o input, sau ƒë√≥ click <code class=\"language-inline-text\">handleSearch</code> th√¨ l√∫c gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">filteredUsers</code> m·ªõi c√≥ s·ª± thay ƒë·ªïi, tuy nhi√™n v√¨ <code class=\"language-inline-text\">filteredUsers</code> l√† m·ªôt h√†m n√≥ s·∫Ω lu√¥n ƒë∆∞·ª£c r·ªìi khi render, m·ªói l·∫ßn g√µ m·ªôt k√Ω t·ª± v√†o input, n√≥ ƒë√£ b·ªã g·ªçi l·∫°i, v·ªõi gi√° tr·ªã tr·∫£ v·ªÅ y nh∆∞ nhau.</p>\n<p>T·∫•t nhi√™n ·ª©ng d·ª•ng nh·ªè th√¨ v·∫•n ƒë·ªÅ ·ªü ƒë√¢y ko qu√° nghi√™m tr·ªçng. C√≤n n·∫øu mu·ªën t·ªëi ∆∞u h∆°n, ch√∫ng ta l∆∞u l·∫°i k·∫øt qu·∫£, v√† ch·ªâ ch·∫°y l·∫°i h√†m t√≠nh to√°n k·∫øt qu·∫£ khi c√≥ m·ªôt s·ª± thay ƒë·ªïi n√†o ƒë√≥.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> filteredUsers <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    users<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Filter function is running ...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>search<span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>search<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>H√†m n√†y ch·ªâ <em>execute</em> khi gi√° tr·ªã <code class=\"language-inline-text\">search</code> thay ƒë·ªïi so v·ªõi l·∫ßn ch·∫°y tr∆∞·ªõc ƒë√≥.</p>\n<p>B·∫£n ch·∫•t b√™n trong React th·ª±c hi·ªán m·ªôt ph√©p so s√°nh tr√™n gi√° tr·ªã <code class=\"language-inline-text\">search</code> tr∆∞·ªõc khi th·ª±c thi. ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† n·∫øu chi ph√≠ cho vi·ªác so s√°nh n√†y trong m·ªôt s·ªë t√¨nh hu·ªëng, ƒë√¥i khi c√≤n t·ªën nhi·ªÅu th·ªùi gian h∆°n l√† vi·ªác g·ªçi lu√¥n m√† ko c·∫ßn so s√°nh. N√™n c√°c b·∫°n c√≥ s·ª≠ d·ª•ng c≈©ng n√™n linh ƒë·ªông, kh√¥ng n√™n qu√° c·ª©ng nh·∫Øc.</p>\n<p><a href=\"https://www.robinwieruch.de/react-usememo-hook?ck_subscriber_id=887772023\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">How to useMemo in React</a></p>\n","cover_image":""}},{"node":{"id":"0110ab408cc3a3c13502073c84dc3f2d","title":"Hi·ªÉu v·ªÅ hook useRef c·ªßa React nh∆∞ th·∫ø n√†o cho ƒë√∫ng","path":"/2020-09-27-hieu-dung-ve-use-ref-trong-react/","date":"2020-09-27","timeToRead":3,"desc":"N·∫øu nghe useRef b·∫°n nghƒ© ngay trong ƒë·∫ßu l√† ƒë·ªÉ d√πng v·ªõi vi·ªác truy xu·∫•t DOM th·∫≠t, b·∫°n c·∫ßn ƒë·ªçc b√†i n√†y.","content":"<p>C√¢u n√≥i ch√†o h√†ng c·ªßa <code class=\"language-inline-text\">useState</code> v·∫´n th∆∞·ªùng ƒë∆∞·ª£c nghe: th√™m state v√†o trong function component.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">,</span> setValue<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"init value\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Gi·∫£ d·ª• t√¨nh hu·ªëng l√† th·∫ø n√†y, b·∫°n l√†m g√¨ ƒë√≥ m√† n√≥ ko li√™n quan ƒë·∫øn UI, <strong>kh√¥ng c·∫ßn re-render</strong>, nh∆∞ng v·∫´n mu·ªën gi√° tr·ªã n√†y c·ªë ƒë·ªãnh gi·ªØa c√°c l·∫ßn render? <code class=\"language-inline-text\">useState</code> c√≥ th·ªÉ c·ªë ƒë·ªãnh gi√° tr·ªã, nh∆∞ng ng·∫∑t n·ªói n√≥ s·∫Ω trigger re-render n·∫øu b·ªã thay ƒë·ªïi</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">usePersistentValue</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initValue</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">current</span><span class=\"token operator\">:</span> initialValue<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>V√¨ ch√∫ng ta kh√¥ng mu·ªën trigger re-render, n√™n ch·ªâ tr·∫£ v·ªÅ gi√° tr·ªã c·ªßa state (ph·∫ßn t·ª≠ ƒë·∫ßu ti√™n trong m·∫£ng), kh√¥ng tr·∫£ v·ªÅ h√†m ƒë·ªÉ c·∫≠p nh·∫≠p n√≥.</p>\n<p>V·∫´n c√≤n ch∆∞a r√µ r√†ng l·∫Øm nh·ªâ, th√≠ d·ª• trong trong ·ª©ng d·ª•ng ch√∫ng ta mu·ªën c√≥ m·ªôt gi√° tr·ªã counter tƒÉng l√™n 1 t·ª´ng gi√¢y, m·ªôt button ƒë·∫ø stop vi·ªác ƒë√≥.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> id<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">clear</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  React<span class=\"token punctuation\">.</span><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    id <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> c <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> clear<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>clear<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Stop</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Code n√†y ch·∫°y kh√¥ng? <em>Kh√¥ng</em>, l√Ω do? b·∫°n c√≥ ƒë·ªÉ √Ω bi·∫øn <code class=\"language-inline-text\">id</code> gi·ªØa c√°c l·∫ßn ch·∫°y (render) l√† kh√°c nhau, n√≥i c√°ch kh√°c b·∫°n kh√¥ng clear ƒë∆∞·ª£c c√°i interval ƒë√£ setup.</p>\n<p>B·∫°n s·∫Ω ph·∫£i vi·∫øt l·∫°i s·ª≠ d·ª•ng c√°ch <code class=\"language-inline-text\">usePersistentValue</code> ·ªü tr√™n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">usePersistentValue</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initialValue</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">current</span><span class=\"token operator\">:</span> initialValue<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">usePersistentValue</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">clearInterval</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  React<span class=\"token punctuation\">.</span><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> c <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> clearInterval<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>clearInterval<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Stop</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>N√≥i c√≥ c·∫£m gi√°c h∆°i <em>sai tr√°i</em> khi hack nh∆∞ v·∫≠y, nh∆∞ng n√≥ ch·∫°y ƒë∆∞·ª£c.</p>\n<p>Tuy nhi√™n kh√¥ng khuy·∫øn kh√≠ch b·∫°n t·ª± vi·∫øt nh∆∞ v·∫≠y, v√¨ vi·ªác c·ªë ƒë·ªãnh gi√° tr·ªã gi·ªØa c√°c l·∫ßn render l√† nhu c·∫ßu kh√° <em>b√¨nh th∆∞·ªùng</em> n√™n b·∫°n s·∫Ω ƒë∆∞·ª£c team React l√†m s·∫µn cho m·ªôt API m√† x√†i: <strong>useRef</strong></p>\n<p>V·∫´n l√† ƒëo·∫°n ·ª©ng d·ª•ng tr√™n nh∆∞ng gi·ªù ch√∫ng ta vi·∫øt l·∫°i n√≥ b·∫±ng <code class=\"language-inline-text\">useRef</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">clearInterval</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  React<span class=\"token punctuation\">.</span><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> c <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> clearInterval<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>clearInterval<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Stop</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√¥ng d·ª•ng c·ªßa <code class=\"language-inline-text\">useRef</code> nh∆∞ ƒë√£ ƒë·ªÅ c·∫≠p, c·ªë ƒë·ªãnh d·ªØ li·ªáu gi·ªØa c√°c l·∫ßn re-render, truy xu·∫•t gi√° tr·ªã ƒë√≥ qua thu·ªôc t√≠nh <code class=\"language-inline-text\">current</code></p>\n<p>M·ªôt ·ª©ng d·ª•ng r·∫•t ph·ªï bi·∫øn c·ªßa <code class=\"language-inline-text\">useRef</code> l√† truy xu·∫•t ƒë·∫øn DOM node. Th√≠ d·ª• ƒë·ªÉ set focus c·ªßa input</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Form</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> nameRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> emailRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> passwordRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleSubmit</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> nameRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> email <span class=\"token operator\">=</span> emailRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> password <span class=\"token operator\">=</span> passwordRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.Fragment</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Name:\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>nameRef<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Email:\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>emailRef<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Password:\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>passwordRef<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> nameRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Focus Name Input</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> emailRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Focus Email Input\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> passwordRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Focus Password Input\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Submit</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.Fragment</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://ui.dev/useref/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Understanding React's useRef Hook</a></p>\n<p>Happy coding üéâüôå</p>\n","cover_image":""}},{"node":{"id":"aafc1da63cc5a7bac0fcc50c38145cb5","title":"5 sai l√†m th∆∞·ªùng th·∫•y khi vi·∫øt react component","path":"/2020-08-03-5-loi-de-mac-phai-khi-viet-react-component/","date":"2020-08-03","timeToRead":5,"desc":"T·ªïng h·ª£p nh·ªØng l·ªói th∆∞·ªùng th·∫•y khi b·∫°n vi·∫øt react component, v√† l√†m sao ƒë·ªÉ kh·∫Øc ph·ª•c","content":"<p>ƒê√¢y c≈©ng ch·∫≥ng ph·∫£i l√† nh·ªØng l·ªói <em>b·∫Øt bu·ªôc</em> ph·∫£i s·ª≠a, tho·∫°t nh√¨n b·∫°n c≈©ng s·∫Ω ko bi·∫øt ƒë∆∞·ª£c n√≥ c√≥ b·ªã sai g√¨ kh√¥ng, c≈©ng kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn performance hay g√¨. Tuy nhi√™n m·ªói ng∆∞·ªùi s·∫Ω c√≥ √Ω ki·∫øn kh√°c nhau tr√™n m·ªôt v·∫•n ƒë·ªÅ, c√≥ ng∆∞·ªùi s·∫Ω b·∫Øt fix, ng∆∞·ªùi th√¨ cho l√† ko c·∫ßn thi·∫øt, r·∫•t mong c√°c b·∫°n b·ªï sung cho quan ƒëi·ªÉm c·ªßa m√¨nh.</p>\n<h2 id=\"s·ª≠-d·ª•ng-usestate-khi-kh√¥ng-th·ª±c-s·ª±-c·∫ßn-thi·∫øt\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-usestate-khi-kh%C3%B4ng-th%E1%BB%B1c-s%E1%BB%B1-c%E1%BA%A7n-thi%E1%BA%BFt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng <code class=\"language-inline-text\">useState</code> khi kh√¥ng th·ª±c s·ª± c·∫ßn thi·∫øt</h2>\n<p>ƒê√¥i khi ch√∫ng ta s·ª≠ d·ª•ng <code class=\"language-inline-text\">useState</code> trong nhi·ªÅu tr∆∞·ªùng h·ª£p kh√¥ng c·∫ßn thi·∫øt, ƒë∆∞a nh·ªØng gi√° tr·ªã v√†o <code class=\"language-inline-text\">state</code> kh√¥ng th·ª±c s·ª± ·∫£nh h∆∞·ªüng ƒë·∫øn vi·ªác c·∫≠p nh·∫≠p component.</p>\n<p>V√≠ d·ª•, trong ta c√≥ 2 c√°i n√∫t: Counter v√† Submit, n√∫t counter tƒÉng gi√° tr·ªã count, n√∫t submit s·∫Ω g·ª≠i gi√° tr·ªã count l√™n API. <strong>L∆∞u √Ω l√† kh√¥ng c√≥ hi·ªÉn th·ªã gi√° tr·ªã count tr√™n giao di·ªán</strong></p>\n<p>‚ùå</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">ClickButton</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onClickCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> c <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onClickRequest</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">apiCall</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onClickCount<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Counter</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onClickRequest<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Submit</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Nh√¨n chung code n√†y c≈©ng s·∫Ω ko c√≥ l·ªói g√¨ ƒë√¢u, ch·ªâ l√† n·∫øu ƒë·ªÉ √Ω b·∫°n s·∫Ω th·∫•y khi state thay ƒë·ªïi, component <em>re-render</em>, nh∆∞ng r√µ r√†ng vi·ªác <em>re-render</em> c≈©ng ch·∫≥ng thay ƒë·ªïi g√¨, v√¨ ch√∫ng ta kh√¥ng hi·ªÉn th·ªã gi√° tr·ªã <code class=\"language-inline-text\">count</code> ra giao di·ªán</p>\n<p>‚úÖ C√°ch l√†m ƒë·ªÅ ngh·ªã nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">ClickButton</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onClickCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    count<span class=\"token punctuation\">.</span>current<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onClickRequest</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">apiCall</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onClickCount<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Counter</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onClickRequest<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Submit</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>·ªû ƒë√¢y ch√∫ng ta d√πng <code class=\"language-inline-text\">useRef</code>, gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">useRef</code> d√π c√≥ thay ƒë·ªïi c≈©ng kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn vi·ªác <em>re-render</em>.</p>\n<h2 id=\"s·ª≠-d·ª•ng-routerpush-thay-v√¨-link\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-routerpush-thay-v%C3%AC-link\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng <code class=\"language-inline-text\">router.push</code> thay v√¨ link</h2>\n<p>V√≠ d·ª• n·∫øu ch√∫ng ta mu·ªën <em>navigate</em> ƒë·∫øn m·ªôt trang n√†o ƒë√≥ khi user click v√†o</p>\n<p>‚ùå</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">ClickButton</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> history <span class=\"token operator\">=</span> <span class=\"token function\">useHistory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    history<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/next-page'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Go to next page</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>V·∫•n ƒë·ªÅ l√† n·∫øu l√†m nh∆∞ v·∫≠y, l√†m sau user c√≥ th·ªÉ m·ªü ra m·ªôt tab m·ªõi?, c√°c tr√¨nh screen reader c≈©ng s·∫Ω ko hi·ªÉu ƒë∆∞·ª£c n√≥ l√† m·ªôt link (accessibility kh√¥ng t·ªët).</p>\n<p>‚úÖ C√°ch l√†m ƒë·ªÅ ngh·ªã nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">ClickButton</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/next-page<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Go to next page</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"handle-action-b·∫±ng-useeffect\"><a href=\"#handle-action-b%E1%BA%B1ng-useeffect\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Handle action b·∫±ng useEffect</h2>\n<p><code class=\"language-inline-text\">useEffect</code> l√† m·ªôt trong nh·ªØng hook t·ªët nh·∫•t, v√† t·ªën nhi·ªÅu gi·∫•y m·ª±c nh·∫•t c·ªßa react. M·∫∑c d√π c≈©ng h·ªØu √≠ch ƒë·∫•y nh∆∞ng c≈©ng kh√¥ng √≠t l√∫c ph·∫£i m·ªát m·ªèi v·ªõi n√≥.</p>\n<p>Th√≠ d·ª• c√≥ m·ªôt c√°i component <code class=\"language-inline-text\">fetch</code> m·ªôt danh s√°ch d·ªØ li·ªáu, r·ªìi render ra</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">DataList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> onSuccess <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>loading<span class=\"token punctuation\">,</span> setLoading<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>error<span class=\"token punctuation\">,</span> setError<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">,</span> setData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">callApi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setError</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">finally</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>loading <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>error <span class=\"token operator\">&amp;&amp;</span> data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">onSuccess</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>loading<span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> onSuccess<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Data: </span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>·ªû ƒë√¢y ch√∫ng ta setup 2 hook <code class=\"language-inline-text\">useEffect</code>, c√°i ƒë·∫ßu ƒë·ªÉ load d·ªØ li·ªáu l·∫ßn ƒë·∫ßu ti√™n, c√°i th·ª© 2 ƒë·ªÉ g·ªçi <code class=\"language-inline-text\">onSuccess</code> khi c√≥ thay ƒë·ªïi v·ªÅ d·ªØ li·ªáu.</p>\n<p>V·∫•n ƒë·ªÅ l√† n√≥ l√†m m·∫•t quan h·ªá 1-1 gi·ªØa action v√† function c·∫ßn g·ªçi. N√≥i m·ªôt c√°ch d·ªÖ hi·ªÉu h∆°n l√† vi·ªác <code class=\"language-inline-text\">onSuccess</code> kh√¥ng <strong>ƒë·∫£m b·∫£o ch·ªâ</strong> ƒë∆∞·ª£c g·ªçi khi get d·ªØ li·ªáu th√†nh c√¥ng, ƒë√¢u ƒë√≥ trong code b·∫°n v·∫´n c√≥ th·ªÉ c√≥ nh·ªØng c√°ch kh√°c ƒë·ªÉ g·ªçi <code class=\"language-inline-text\">onSuccess</code>.</p>\n<p>‚úÖ C√°ch l√†m ƒë·ªÅ ngh·ªã nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">DataList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> onSuccess <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>loading<span class=\"token punctuation\">,</span> setLoading<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>error<span class=\"token punctuation\">,</span> setError<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">,</span> setData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">callApi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fetchedData</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>fetchedData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">onSuccess</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setError</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">finally</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"m·ªói-component-m·ªôt-nhi·ªám-v·ª•\"><a href=\"#m%E1%BB%97i-component-m%E1%BB%99t-nhi%E1%BB%87m-v%E1%BB%A5\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>M·ªói component m·ªôt nhi·ªám v·ª•</h2>\n<p>Compose nhi·ªÅu component n√≥i ch√∫ng l√† kh√≥, kh√≥ ·ªü ch·ªó khi n√†o t√°ch th√¨ h·ª£p l√Ω. L·∫•y v√≠ d·ª• nh∆∞ c√°i header s·∫Ω xu·∫•t hi·ªán m·ªôt n√∫t burger tr√™n mobile v√† tab tr√™n desktop</p>\n<p>‚ùå</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Header</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> menuItems <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">HeaderInner</span></span> <span class=\"token attr-name\">menuItems</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>menuItems<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">HeaderInner</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> menuItems <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">isMobile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BurgerButton</span></span> <span class=\"token attr-name\">menuItems</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>menuItems<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Tabs</span></span> <span class=\"token attr-name\">tabData</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>menuItems<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>V·∫•n ƒë·ªÉ ·ªü ƒë√¢y l√† v·ªõi logic <code class=\"language-inline-text\">isMobile</code> nh∆∞ v·∫≠y, ch√∫ng ta c√≥ th·ª±c s·ª± c·∫ßn thi·∫øt t√°ch <code class=\"language-inline-text\">HeaderInner</code> ra kh√¥ng?</p>\n<p>‚úÖ C√°ch l√†m ƒë·ªÅ ngh·ªã nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Header</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">isMobile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BurgerButton</span></span> <span class=\"token attr-name\">menuItems</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>menuItems<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Tabs</span></span> <span class=\"token attr-name\">tabData</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>menuItems<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"ch·ªâ-m·ªôt-c√¥ng-vi·ªác-th·ª±c-hi·ªán-trong-useeffect\"><a href=\"#ch%E1%BB%89-m%E1%BB%99t-c%C3%B4ng-vi%E1%BB%87c-th%E1%BB%B1c-hi%E1%BB%87n-trong-useeffect\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ch·ªâ m·ªôt c√¥ng vi·ªác th·ª±c hi·ªán trong <code class=\"language-inline-text\">useEffect</code></h2>\n<p>N·∫øu kh√¥ng c·∫©n th·∫≠n vi·ªác s·ª≠ d·ª•ng <code class=\"language-inline-text\">useEffect</code> l·∫Øm l√∫c c≈©ng gi·ªëng nh∆∞ c∆°n √°c m·ªông v·ªõi <code class=\"language-inline-text\">componentWillReceivedProps</code> v√† <code class=\"language-inline-text\">componentDidUpdate</code> m·ªôt th·ªùi. T∆∞·ªüng t∆∞·ª£ng ch√∫ng ta c√≥ m·ªôt component fetch d·ªØ li·ªáu t·ª´ backend, hi·ªÉn th·ªã breadcrumb t√πy theo v·ªã tr√≠ hi·ªán t·∫°i</p>\n<p>‚ùå</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> location <span class=\"token operator\">=</span> <span class=\"token function\">useLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/*  Calling the api */</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">updateBreadcrumbs</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* Updating the breadcrumbs*/</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">updateBreadcrumbs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>location<span class=\"token punctuation\">.</span>pathname<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BreadCrumbs</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta ƒëang ch·∫°y 2 effect kh√°c nhau: 1 l√† fetch d·ªØ li·ªáu, 2 l√† update breadcrumb tr√™n gi√° tr·ªã location (n·∫øu c√≥ thay ƒë·ªïi). R√µ r√†ng l√† ƒë√¥i khi location c√≥ change th·∫≠t nh∆∞ng ch√∫ng ta ƒë√¢u c·∫ßn <code class=\"language-inline-text\">fetchData</code> ch·∫°y</p>\n<p>N√™n t√°ch ra m·ªói effect ch·ªâ l√†m 1 vi·ªác th√¥i.</p>\n<p>‚úÖ C√°ch l√†m ƒë·ªÅ ngh·ªã nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> location <span class=\"token operator\">=</span> <span class=\"token function\">useLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">updateBreadcrumbs</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* Updating the breadcrumbs*/</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">updateBreadcrumbs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>location<span class=\"token punctuation\">.</span>pathname<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/*  Calling the api */</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BreadCrumbs</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Kh√¥ng bi·∫øt c√≤n tr∆∞·ªùng h·ª£p n√†o ch√∫ng ta v·∫´n hay m·∫Øc ph·∫£i kh√¥ng, c√°c b·∫°n c√≥ th·ªÉ chia s·∫ª th√™m.</p>\n<p><a href=\"https://www.lorenzweiss.de/common_mistakes_react_hooks\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Five common mistakes writing react components (with hooks) in 2020</a></p>\n","cover_image":""}},{"node":{"id":"074c34554b8d4f2e49f0c6d408afcb09","title":"Mental model trong React","path":"/2020-05-17-huong-dan-mental-model-cua-react/","date":"2020-05-17","timeToRead":6,"desc":"N·∫øu l·∫≠p tr√¨nh ƒë·ªß l√¢u, b·∫°n s·∫Ω √≠t nhi·ªÅu nghe ƒë·∫øn kh√°i ni·ªám mental model, v√† n·∫øu b·∫°n ƒë√£ v√† ƒëang vi·∫øt React, b·∫°n c√†ng th·∫•y thu·∫≠t ng·ªØ n√†y xu·∫•t hi·ªán r·∫•t nhi·ªÅu. ƒê√¢y l√† m·ªôt kh√°i ni·ªám kh√¥ng ch·ªâ trong h·ªØu d·ª•ng trong React, m√† n√≥ c√≤n l√† ch√¨a kh√≥a ƒë·ªÉ b·∫°n t·ª± tin khi l√†m vi·ªác v·ªõi nh·ªØng th∆∞ vi·ªán nh∆∞ React.","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#mental-model-l%C3%A0-g%C3%AC\">Mental model l√† g√¨</a></li>\n<li>\n<p><a href=\"#h%C3%ACnh-dung-c%C3%A1ch-react-v%E1%BA%ADn-h%C3%A0nh-nh%C6%B0-th%E1%BA%BF-n%C3%A0o\">H√¨nh dung c√°ch React v·∫≠n h√†nh nh∆∞ th·∫ø n√†o</a></p>\n<ul>\n<li><a href=\"#t%E1%BA%A5t-c%E1%BA%A3-%C4%91%E1%BB%81u-l%C3%A0-function\">T·∫•t c·∫£ ƒë·ªÅu l√† function</a></li>\n<li><a href=\"#component-m%E1%BB%99t-function-tr%E1%BA%A3-v%E1%BB%81-jsx\">Component: m·ªôt function tr·∫£ v·ªÅ JSX</a></li>\n<li><a href=\"#prop-tham-s%E1%BB%91-c%E1%BB%A7a-function\">Prop: tham s·ªë c·ªßa function</a></li>\n<li><a href=\"#h%C3%ACnh-dung-v%E1%BB%81-m%E1%BB%99t-function\">H√¨nh dung v·ªÅ m·ªôt function</a></li>\n</ul>\n</li>\n<li><a href=\"#h%C3%ACnh-dung-c%C3%A1ch-react-render\">H√¨nh dung c√°ch React render</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"mental-model-l√†-g√¨\"><a href=\"#mental-model-l%C3%A0-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Mental model l√† g√¨</h2>\n<p>M·ªôt ch·ªØ r·∫•t kh√≥ t√¨m ƒë∆∞·ª£c m·ªôt t·ª´ ti·∫øng vi·ªát g√≥i g·ªçn ƒë·ªÉ m√¥ t·∫£ n√≥. M·ªôt c√°ch d√†i d√≤ng th√¨ n√≥ <strong>l√† c√°ch m√† ch√∫ng ta h√¨nh dung m·ªôt v·∫•n ƒë·ªÅ trong ƒë·∫ßu</strong>, m·ªôt b∆∞·ªõc <strong>mapping</strong> m·ªôt h·ªá th·ªëng ·ªü b√™n ngo√†i v√†o trong ƒë·∫ßu trong ta, h√¨nh dung n√≥ c√°ch v·∫≠n h√†nh.</p>\n<p><img src=\"https://obedparla.com/static/d3c5f4f4adcb11d610da2a9dd9b38ce5/601b1/mental-models-representation.webp\" alt=\"Mental model trong React\"></p>\n<p>M·ªôt v√≠ d·ª• ƒëi·ªÉn h√¨nh c·ªßa mental model l√† <em>internet</em>: m·ªôt h·ªá th·ªëng ph·ª©c t·∫°p g·ªìm nhi·ªÅu ph·∫ßn k·∫øt n·ªëi l·∫°i v·ªõi nhau, nh∆∞ng h√£y nghƒ© ƒë·∫øn c√°i m√† b·∫°n h√¨nh dung v·ªÅ n√≥. T√¥i s·∫Ω nghƒ© n√≥ l√† m·ªôt h·ªá th·ªëng c√°c m√°y t√≠nh k·∫øt n·ªëi l·∫´n nhau th√¥ng qua r·∫•t nhi·ªÅu server, m·ªôt v√†i <em>ƒëi·ªÅu h∆∞·ªõng vi√™n</em> gi√∫p ƒë·ªãnh h∆∞·ªõng ƒë∆∞·ªùng ƒëi c·ªßa th√¥ng tin.</p>\n<p>N√≥ kh√¥ng ph·∫£i l√† m·ªôt h·ªá th·ªëng m√¥ t·∫£ ƒë·∫ßy ƒë·ªß chi ti·∫øt v·ªÅ internet, nh∆∞ng √≠t nh·∫•t v·ªõi c√°i h√¨nh dung n√†y, t√¥i c√≥ th·ªÉ x·ª≠ l√Ω nhi·ªÅu th·ª© li√™n quan, th√≠ d·ª• nh∆∞ n·∫øu t√¥i c·∫ßn m·∫°ng th√¨ t√¥i c·∫ßn c√≥ m√°y t√≠nh thi·∫øt b·ªã ƒë·∫ßu cu·ªëi v√† n·ªëi v√†o m·ªôt ƒë∆∞·ªùng truy·ªÅn c·ªßa nh√† m·∫°ng.</p>\n<p><strong>T·∫°i sao quan tr·ªçng?</strong></p>\n<p>N·∫øu ch√∫ng ta h√¨nh dung ƒë∆∞·ª£c m·ªçi th·ª© s·∫Ω v·∫≠n h√†nh ra l√†m sao, n·∫øu g·∫∑p m·ªôt v·∫•n ƒë·ªÅ, ch√∫ng ta c√≥ th·ªÉ l√†m vi·ªác v·ªõi n√≥ tr∆°n tru h∆°n.</p>\n<h2 id=\"h√¨nh-dung-c√°ch-react-v·∫≠n-h√†nh-nh∆∞-th·∫ø-n√†o\"><a href=\"#h%C3%ACnh-dung-c%C3%A1ch-react-v%E1%BA%ADn-h%C3%A0nh-nh%C6%B0-th%E1%BA%BF-n%C3%A0o\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>H√¨nh dung c√°ch React v·∫≠n h√†nh nh∆∞ th·∫ø n√†o</h2>\n<p>React gi√∫p ch√∫ng ta x√¢y d·ª±ng nh∆∞ng h·ªá th·ªëng UI ph·ª©c t·∫°p, v·ªõi t√πm lum th·ª© t∆∞∆°ng t√°c qua l·∫°i v·ªõi nhau d·ªÖ d√†ng h∆°n tr∆∞·ªõc ƒë√¢y r·∫•t nhi·ªÅu. N√≥ c≈©ng ƒë·ªãnh h∆∞·ªõng ch√∫ng ta vi·∫øt code theo m·ªôt c√°ch r·∫•t c·ª• th·ªÉ, gi·ªëng nh∆∞ n√≥ th·ªÉ th∆° \"l·ª•c b√°t\", khi b·∫°n vi·∫øt th√¨ ph·∫£i tu√¢n th·ªß nh·ªØng nguy√™n t·∫Øc nh·∫•t ƒë·ªãnh.</p>\n<p>√ù t∆∞·ªüng ch√≠nh c·ªßa React: <strong>ƒë√≥ng g√≥i</strong> nh·ªØng logic v√† UI gi·ªëng nhau c·ªßa ·ª©ng d·ª•ng th√†nh <strong>m·ªôt kh·ªëi</strong>, React ƒë·∫£m b·∫£o ph·∫ßn ƒë√≥ng g√≥i n√†y lu√¥n c·∫≠p nh·∫≠p.</p>\n<h3 id=\"t·∫•t-c·∫£-ƒë·ªÅu-l√†-function\"><a href=\"#t%E1%BA%A5t-c%E1%BA%A3-%C4%91%E1%BB%81u-l%C3%A0-function\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·∫•t c·∫£ ƒë·ªÅu l√† function</h3>\n<ol>\n<li>React component: l√† m·ªôt function</li>\n<li>M·ªôt component ch·ª©a m·ªôt component kh√°c: m·ªôt function g·ªçi ƒë·∫øn m·ªôt function kh√°c</li>\n<li>Prop: tham s·ªë c·ªßa m·ªôt function</li>\n</ol>\n<p>Khi vi·∫øt b·∫±ng JSX, b·∫°n c√≥ th·ªÉ t∆∞·ªüng nh·∫ßm component, prop l√† g√¨ ƒë√≥ cao si√™u. N·∫øu b·ªè h·∫øt nh·ªØng g√¨ c·ªßa JSX ƒëi, React l√† nh·ªØng function g·ªçi qua g·ªçi l·∫°i.</p>\n<h3 id=\"component-m·ªôt-function-tr·∫£-v·ªÅ-jsx\"><a href=\"#component-m%E1%BB%99t-function-tr%E1%BA%A3-v%E1%BB%81-jsx\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Component: m·ªôt function tr·∫£ v·ªÅ JSX</h3>\n<p>React s·ª≠ d·ª•ng JSX - Javascript XML - m·ªôt c√°ch vi·∫øt <em>nh√©t</em> HTML v√†o trong javascript.</p>\n<p>H√£y b·ªè qua class component v√† ch·ªâ t·∫≠p trung v√†o functional component ƒëang tr·ªü n√™n ph·ªï bi·∫øn h∆°n. M·ªôt function component s·∫Ω ho·∫°t ƒë·ªông y nh∆∞ m·ªôt javascript function th√¥ng th∆∞·ªùng. React component lu√¥n tr·∫£ v·ªÅ JSX -> sau ƒë√≥ s·∫Ω ƒë∆∞·ª£c th·ª±c thi v√† tr·∫£ v·ªÅ k·∫øt qu·∫£ cu·ªëi c√πng l√† HTML</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Li</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">RickRoll</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Li</span></span> <span class=\"token attr-name\">color</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"red\"</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Never give you up</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Li</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>S·∫Ω ƒë∆∞·ª£c ƒë∆∞a v·ªÅ Javascript nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Li</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"li\"</span><span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">RickRoll</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"div\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"div\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">className</span><span class=\"token operator\">:</span> <span class=\"token string\">\"wrapper\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"ul\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n        React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>\n          Li<span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"Never give you up\"</span>\n        <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Trong React, c≈©ng nh∆∞ trong HTML v√† ƒë·ªùi s·ªëng, con th√¨ ch·ªâ c√≥ m·ªôt m·∫π, kh√¥ng ƒë·ª©a con n√†o c·ªßa th·ªÉ do 2 ng∆∞·ªùi m·∫π sinh ra, m·ªói component c≈©ng ch·ªâ c√≥ m·ªôt <em>m·∫π</em>, component <em>m·∫π</em> th√¨ c√≥ th·ªÉ c√≥ nhi·ªÅu con.</p>\n<h3 id=\"prop-tham-s·ªë-c·ªßa-function\"><a href=\"#prop-tham-s%E1%BB%91-c%E1%BB%A7a-function\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Prop: tham s·ªë c·ªßa function</h3>\n<p>Prop (properties) ch·∫≥ng qua l√† <em>m·ªôt c√°ch g·ªçi kh√°c</em> cho tham s·ªë truy·ªÅn v√†o trong function, c√≤n v·ªÅ m·ªçi th·ª© c√≤n l·∫°i n√≥ ho√†n to√†n gi·ªëng nhau, React c√≥ <em>nh√©t</em> th√™m m·ªôt s·ªë tham s·ªë c·ªßa ri√™ng n√≥ nh∆∞ <code class=\"language-inline-text\">children</code>.</p>\n<h3 id=\"h√¨nh-dung-v·ªÅ-m·ªôt-function\"><a href=\"#h%C3%ACnh-dung-v%E1%BB%81-m%E1%BB%99t-function\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>H√¨nh dung v·ªÅ m·ªôt function</h3>\n<p>B·∫°n c√≥ th·ªÉ h√¨nh dung function/component nh∆∞ nh·ªØng chi·∫øc h·ªôp, th·∫±ng n√†y b·ªçc th·∫±ng kia</p>\n<p><img src=\"https://obedparla.com/static/cf7892f6a3db2815d6c502fe74538e4a/1f85e/box-inside-box.webp\" alt=\"Mental model trong React\"></p>\n<p><strong>Nh·ªØng chi·∫øc h·ªôp n√†y t∆∞∆°ng t√°c v·ªõi nhau nh∆∞ th·∫ø n√†o?</strong></p>\n<p>B·∫°n c√≥ th·ªÉ h√¨nh dung trong ƒë·ªùi s·ªëng th·ª±c √¥ng b√† c√≥ c√¢u n√≥i <strong>t√†i s·∫£n c·ªßa cha/m·∫π l√† c·ªßa con, t√†i s·∫£n c·ªßa con l√† c·ªßa con</strong>, Javascript ng∆∞·ªùi ta ƒë·∫∑t t√™n cho ki·ªÉu k·∫ø th·ª´a ƒë√≥ g·ªçi l√† <strong>closure</strong>.</p>\n<p>ƒê√¢y l√† c√°ch m√† c√°c function cha-con t∆∞∆°ng t√°c v·ªõi nhau, b·∫°n s·ª≠ d·ª•ng function, b·∫°n ƒë√£ s·ª≠ d·ª•ng closure.</p>\n<p><img src=\"https://obedparla.com/static/96f403cd585425c1057214447165bbbe/ffce4/data-flow.webp\" alt=\"Mental model trong React\"></p>\n<p>Nghƒ©a l√† trong React, l√† cha m·∫π ch√∫ng ta c√≥ th·ªÉ truy·ªÅn prop xu·ªëng cho con, nh∆∞ng <em>t√†i s·∫£n</em> c·ªßa con th√¨ ch√∫ng ta kh√¥ng ƒë·ª•ng v√†o ƒë∆∞·ª£c</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Parent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      The count is </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ChildButtons</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>setCount<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">count</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ChildButtons</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> props<span class=\"token punctuation\">.</span><span class=\"token function\">onClick</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      Increase count\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> props<span class=\"token punctuation\">.</span><span class=\"token function\">onClick</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      Decrease count\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"h√¨nh-dung-c√°ch-react-render\"><a href=\"#h%C3%ACnh-dung-c%C3%A1ch-react-render\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>H√¨nh dung c√°ch React render</h2>\n<p>Render c√≥ th·ªÉ xem l√† ph·∫ßn g√¢y <em>kh√≥ d·ªÖ</em> nh·∫•t c·ªßa React ƒë·ªÉ m√† h√¨nh dung. C√≥ nh·ªØng th·ª© nh√¨n v√†o code ch√∫ng ta s·∫Ω kh√¥ng th·∫•y ƒë∆∞·ª£c c∆° ch·∫ø khi render chuy·ªán g√¨ x·∫£y ra v√† kh√¥ng x·∫£y ra.</p>\n<p>T∆∞·ªüng t∆∞·ª£ng n√≥ nh∆∞ m·ªôt c√°i h·ªôp c√≥ th·ªÉ <em>t√°i ch·∫ø</em>, l·∫ßn render ƒë·∫ßu ti·ªÅn l√† l√∫c s·∫£n xu·∫•t ra chi·∫øc h·ªôp n√†y, c√°c l·∫ßn re-render ti·∫øp theo, hay <em>t√°i ch·∫ø</em>, ph·∫ßn l·ªõn m·ªçi th·ª© s·∫Ω ƒë∆∞·ª£c ƒë·∫≠p ƒëi l√†m l·∫°i, nh∆∞ng nh·ªØng ph·∫ßn nh∆∞ <code class=\"language-inline-text\">state</code> s·∫Ω ƒë∆∞·ª£c <em>t√°i s·ª≠ d·ª•ng</em></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Thumbnail</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>withIcon <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AmazingIcon</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>imgUrl<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">alt</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>alt<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"https://obedparla.com/static/78de62863da9bd4c40c588c294167031/ffce4/react-rendering-mental-model.webp\" alt=\"Mental model trong React\"></p>\n<p>Vi·ªác c·ªßa React ph·∫£i l√†m v·ªõi <code class=\"language-inline-text\">state</code> l√† ƒë·∫£m b·∫£o n√≥ consistent gi·ªØa c√°c l·∫ßn render.</p>\n<p>Khi m·ªôt chi·∫øc h·ªôp ƒë∆∞·ª£c t√°i ch·∫ø, to√†n b·ªô c√°c h·ªôp con b√™n trong c≈©ng ƒë∆∞·ª£c t√°i ch·∫ø - re-render b·ªüi c√°c <code class=\"language-inline-text\">state</code> v√† <code class=\"language-inline-text\">prop</code> l√∫c n√†y ƒë√£ thay ƒë·ªïi.</p>\n<p><img src=\"https://obedparla.com/static/267768646d810a0032728d222c3f13a5/ffce4/react-rendering-mental-model-full.webp\" alt=\"Mental model trong React\"></p>\n<p>Hy v·ªçng qua b√†i vi·∫øt ki·ªÉu n√†y c√°c b·∫°n ƒë√£ c√≥ th·ªÉ l√†m vi·ªác v·ªõi React Component m·ªôt c√°ch <em>nh·∫π nh√†ng</em> kh√¥ng cay c√∫.</p>\n<p><a href=\"https://obedparla.com/code/a-visual-guide-to-react-mental-models/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://obedparla.com/code/a-visual-guide-to-react-mental-models/</a></p>\n","cover_image":""}},{"node":{"id":"86b4bdaecfd311e0ba6c74a0259cacf8","title":"H∆∞·ªõng d·∫´n vi·∫øt unit test trong React","path":"/2020-05-05-huong-dan-viet-unit-test-cho-react/","date":"2020-05-05","timeToRead":13,"desc":"M·ªôt b√†i vi·∫øt t·ªïng h·ª£p, s·∫Ω c·ªë g·∫Øng ƒë·ªÅ c·∫≠p c√†ng nhi·ªÅu c√†ng t·ªët c√°c v·∫•n ƒë·ªÅ c√≥ th·ªÉ g·∫∑p khi ƒë·ª•ng ƒë·∫øn unit test v·ªõi React.","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#t%E1%BA%A1i-sao-ph%E1%BA%A3i-test\">T·∫°i sao ph·∫£i test?</a></li>\n<li><a href=\"#test-c%C3%A1i-g%C3%AC\">Test c√°i g√¨?</a></li>\n<li><a href=\"#kh%C3%B4ng-test-c%C3%A1i-g%C3%AC\">Kh√¥ng test c√°i g√¨</a></li>\n<li><a href=\"#m%E1%BB%99t-v%C3%A0i-tri%E1%BA%BFt-l%C3%BD-c%C3%A1-nh%C3%A2n-khi-test\">M·ªôt v√†i tri·∫øt l√Ω c√° nh√¢n khi test</a></li>\n<li><a href=\"#shallow-vs-mount\">Shallow vs mount</a></li>\n<li>\n<p><a href=\"#enzyme\">Enzyme</a></p>\n<ul>\n<li><a href=\"#c%C3%A0i-%C4%91%E1%BA%B7t\">C√†i ƒë·∫∑t</a></li>\n</ul>\n</li>\n<li><a href=\"#th%E1%BB%B1c-hi%E1%BB%87n-test-chi-ti%E1%BA%BFt-v%E1%BB%9Bi-enzyme\">Th·ª±c hi·ªán test chi ti·∫øt v·ªõi Enzyme</a></li>\n<li>\n<p><a href=\"#react-testing-library\">React-testing-library</a></p>\n<ul>\n<li><a href=\"#usestate\">useState</a></li>\n<li><a href=\"#usereducer\">useReducer</a></li>\n<li><a href=\"#usecontext\">useContext</a></li>\n</ul>\n</li>\n</ul>\n<!-- /TOC -->\n<p><a href=\"https://github.com/iqbal125/react-hooks-testing-complete\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">To√†n b·ªô project ƒë·ªÉ b·∫°n tham kh·∫£o</a></p>\n<h2 id=\"t·∫°i-sao-ph·∫£i-test\"><a href=\"#t%E1%BA%A1i-sao-ph%E1%BA%A3i-test\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·∫°i sao ph·∫£i test?</h2>\n<p>R·∫•t hi·ªÉn nhi√™n l√† ch√∫ng ta vi·∫øt test nh·∫±m m·ª•c ƒë√≠ch h·∫°n ch·∫ø ƒë∆∞·ª£c c√†ng nhi·ªÅu l√µi c√†ng t·ªët, ƒë·∫£m b·∫£o nh·ªØng g√¨ ch√∫ng ta vi·∫øt ra ch·∫°y ƒë√∫ng nh∆∞ ch√∫ng ta mong mu·ªën. M·ªôt v√†i <em>ƒëi·ªÉm tr·ª´</em> khi ch√∫ng ta <em>ph·∫£i</em> vi·∫øt test</p>\n<ol>\n<li>L√† n√≥ t·ªën th·ªùi gian v√† t∆∞∆°ng ƒë·ªëi kh√≥ khƒÉn (d√π l√† l·∫≠p tr√¨nh vi√™n kinh nghi·ªám c≈©ng g·∫∑p kh√¥ng √≠t v·∫•t v·∫£ khi m·ªõi b·∫Øt ƒë·∫ßu vi·∫øt test)</li>\n<li>Test pass kh√¥ng c√≥ nghƒ©a ·ª©ng d·ª•ng, function c·ªßa ch√∫ng ta ch·∫°y ƒë√∫ng 100%</li>\n<li>C≈©ng ƒë√¥i khi, test fail, nh∆∞ng ·ª©ng d·ª•ng, function v·∫´n ch·∫°y ho√†n to√†n b√¨nh th∆∞·ªùng</li>\n<li>Trong v√†i tr∆∞·ªùng h·ª£p ƒë·∫∑c bi·ªát, ch·∫°y test trong CI c√≥ th·ªÉ t·ªën ti·ªÅn</li>\n</ol>\n<h2 id=\"test-c√°i-g√¨\"><a href=\"#test-c%C3%A1i-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Test c√°i g√¨?</h2>\n<p>Test c√°c ch·ª©c nƒÉng, function c·ªßa ·ª©ng d·ª•ng, nh·ªØng c√°i m√† user s·∫Ω s·ª≠ d·ª•ng. N√≥ gi√∫p ch√∫ng ta t·ª± tin v·ªó ng·ª±c, ·ª©ng d·ª•ng ƒë√°p ·ª©ng ƒë√∫ng nhu c·∫ßu s·ª≠ d·ª•ng</p>\n<h2 id=\"kh√¥ng-test-c√°i-g√¨\"><a href=\"#kh%C3%B4ng-test-c%C3%A1i-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kh√¥ng test c√°i g√¨</h2>\n<p>Th√≠ch quan ƒëi·ªÉm c·ªßa Kent C v·ªÅ vi·ªác kh√¥ng n√™n ƒëi qu√° chi ti·∫øt vi·ªác hi·ªán th·ª±c. Vi·ªác m√† code n√≥ hi·ªán th·ª±c nh∆∞ th·∫ø n√†o ch√∫ng ta kh√¥ng quan t√¢m, user kh√¥ng quan t√¢m, ch√∫ng ta ch·ªâ quan t√¢m ƒë·∫ßu v√†o-ƒë·∫ßu ra c·ªßa m·ªôt function.</p>\n<p>C√°c th∆∞ vi·ªán c·ªßa ng∆∞·ªùi kh√°c vi·∫øt c≈©ng l√† th·ª© kh√¥ng c·∫ßn thi·∫øt ph·∫£i test, n√≥ l√† tr√°ch nhi·ªám c·ªßa ng∆∞·ªùi vi·∫øt th∆∞ vi·ªán. N·∫øu kh√¥ng tin th√¨ ƒë·ª´ng d√πng n√≥. C√≤n n·∫øu th·∫≠t s·ª± c√≥ t√¢m b·∫°n h√£y h·ªó tr·ª£ cho th∆∞ vi·ªán ƒë√≥ tr√™n github b·∫±ng c√°ch b·ªï sung test cho n√≥.</p>\n<h2 id=\"m·ªôt-v√†i-tri·∫øt-l√Ω-c√°-nh√¢n-khi-test\"><a href=\"#m%E1%BB%99t-v%C3%A0i-tri%E1%BA%BFt-l%C3%BD-c%C3%A1-nh%C3%A2n-khi-test\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>M·ªôt v√†i tri·∫øt l√Ω c√° nh√¢n khi test</h2>\n<blockquote>\n<p>Nhi·ªÅu integration test, kh√¥ng d√πng snapshot test, v√†i unit test, v√†i e-to-e test.</p>\n</blockquote>\n<p>H√£y vi·∫øt th·∫≠t nhi·ªÅu integration test, unit test th√¨ t·ªët nh∆∞ng n√≥ kh√¥ng th·∫≠t s·ª± l√† c√°ch m√† ng∆∞·ªùi d√πng s·ª≠ d·ª•ng ·ª©ng d·ª•ng. Vi·ªác test chi ti·∫øt code hi·ªán th·ª±c ra sao v·ªõi unit test r·∫•t d·ªÖ.</p>\n<p>Integration test n√™n d√πng mock (d·ªØ li·ªáu gi·∫£ l·∫≠p) √≠t nh·∫•t c√≥ th·ªÉ</p>\n<p>Kh√¥ng n√™n test nh·ªØng c√°i ti·ªÉu ti·∫øt nh∆∞ <em>t√™n h√†m, t√™n bi·∫øn, c√°ch khai b√°o bi·∫øn s·ªë, h·∫±ng s·ªë</em> c√≥ h·ª£p l√Ω.</p>\n<p>L·∫•y v√≠ d·ª•, n·∫øu ch√∫ng ta test m·ªôt button v√† thay ƒë·ªïi t√™n function x·ª≠ l√Ω <code class=\"language-inline-text\">onClick</code> t·ª´ <code class=\"language-inline-text\">increment</code> sang <code class=\"language-inline-text\">handleClick</code>, test s·∫Ω fail nh∆∞ng m·ªçi th·ª© v·∫´n ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng.</p>\n<h2 id=\"shallow-vs-mount\"><a href=\"#shallow-vs-mount\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Shallow vs mount</h2>\n<p>Mount l√† ph·∫ßn html, css, js th·∫≠t s·ª± khi ch·∫°y, nh∆∞ c√°ch m√† browser s·∫Ω <em>th·∫•y</em>, nh∆∞ng theo c√°ch <strong>gi·∫£ l·∫≠p</strong>. N√≥ kh√¥ng c√≥ render, paint b·∫•t c·ª© th·ª© g√¨ l√™n UI, nh∆∞ng l√†m <em>nh∆∞ th·ªÉ</em> n√≥ l√† browser th·∫≠t s·ª± v√† ch·∫°y code ng·∫ßm b√™n d∆∞·ªõi.</p>\n<p>Kh√¥ng b·ªè th·ªùi gian ra ƒë·ªÉ paint ra UI gi√∫p test ch·∫°y nhanh h∆°n. Tuy nhi√™n n√≥ v·∫´n ch∆∞a nhanh b·∫±ng shallow render</p>\n<p>ƒê√≥ l√† l√Ω do b·∫°n ph·∫£i <code class=\"language-inline-text\">unmount</code> v√† <code class=\"language-inline-text\">cleanup</code> sau m·ªói test, n·∫øu kh√¥ng test n√†y s·∫Ω g√¢y side-effect l√™n test kia.</p>\n<p>Mount/render th∆∞·ªùng ƒë∆∞·ª£c s·ª≠ d·ª•ng cho integration test v√† shallow s·ª≠ d·ª•ng cho unit test.</p>\n<p>Ki·ªÉu shallow render s·∫Ω ch·ªâ render ra m·ªôt component ƒëang test m√† kh√¥ng bao g·ªìm c√°c component con, nh∆∞ v·∫≠y ƒë·ªÉ t√°ch bi·ªát vi·ªác test tr√™n t·ª´ng component ƒë·ªôc l·∫≠p.</p>\n<p>L·∫•y v√≠ d·ª• nh∆∞ component cha, con nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ChildComponent</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ChildComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Child component</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>N·∫øu ch√∫ng ta d√πng shallow render component <code class=\"language-inline-text\">App</code>, ch√∫ng ta s·∫Ω nh·∫≠n ƒë∆∞·ª£c DOM nh∆∞ sau, ph·∫ßn <code class=\"language-inline-text\">ChildComponent</code> s·∫Ω kh√¥ng bao g·ªìm b·ªô \"ru·ªôt\" b√™n trong</p>\n<div class=\"gridsome-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>App</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ChildComponent</span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>App</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>V·ªõi mount, th√¨ ch√∫ng ta c√≥</p>\n<div class=\"gridsome-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>App</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ChildComponent</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Child components<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ChildComponent</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>App</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><strong>react-testing-library</strong> l√† m·ªôt th∆∞ vi·ªán kh√° ·ªïn cho vi·ªác vi·∫øt unit test react, tuy nhi√™n <strong>Enzyme</strong> l√† n·ªÅn t·∫£ng c·∫ßn n·∫Øm ch·∫Øc, ch√∫ng ta s·∫Ω ƒë·ªÅ c·∫≠p n√≥ tr∆∞·ªõc</p>\n<h2 id=\"enzyme\"><a href=\"#enzyme\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Enzyme</h2>\n<h3 id=\"c√†i-ƒë·∫∑t\"><a href=\"#c%C3%A0i-%C4%91%E1%BA%B7t\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C√†i ƒë·∫∑t</h3>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> enzyme enzyme-to-json enzyme-adapter-react-16</code></pre></div>\n<p>S∆° qua nh·ªØng g√¨ ch√∫ng ta s·∫Ω import</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Basic <span class=\"token keyword\">from</span> <span class=\"token string\">\"../basic_test\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> Enzyme<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> shallow<span class=\"token punctuation\">,</span> render<span class=\"token punctuation\">,</span> mount <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"enzyme\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> toJson <span class=\"token keyword\">from</span> <span class=\"token string\">\"enzyme-to-json\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Adapter <span class=\"token keyword\">from</span> <span class=\"token string\">\"enzyme-adapter-react-16\"</span><span class=\"token punctuation\">;</span>\n\nEnzyme<span class=\"token punctuation\">.</span><span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">adapter</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Adapter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>3 c√°i import ƒë·∫ßu ti√™n l√† cho React v√† component ƒëang test, sau ƒë√≥ ƒë·∫øn ph·∫ßn c·ªßa Enzyme, <code class=\"language-inline-text\">toJson</code> l√† ƒë·ªÉ chuy·ªÉn shallow component c·ªßa ch√∫ng ta ra th√†nh JSON ƒë·ªÉ l∆∞u th√†nh snapshot</p>\n<p>Cu·ªëi c√πng l√† Adapter ƒë·ªÉ l√†m vi·ªác ƒë∆∞·ª£c v·ªõi react 16</p>\n<h2 id=\"th·ª±c-hi·ªán-test-chi-ti·∫øt-v·ªõi-enzyme\"><a href=\"#th%E1%BB%B1c-hi%E1%BB%87n-test-chi-ti%E1%BA%BFt-v%E1%BB%9Bi-enzyme\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Th·ª±c hi·ªán test chi ti·∫øt v·ªõi Enzyme</h2>\n<p>Ch√∫ng ta s·∫Ω l·∫•y m·ªôt v√≠ d·ª• t·∫°i sao ko n√™n test vi·ªác hi·ªán th·ª±c chi ti·∫øt, v·ªõi m·ªôt component <code class=\"language-inline-text\">&lt;Counter /></code> nh∆∞ th·∫ø n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Counter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function-variable function\">increment</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ƒëo·∫°n code n√†y m·∫∑c d√π ko ƒë√∫ng, nh∆∞ng khi test v·∫´n cho k·∫øt qu·∫£ pass</span>\n  <span class=\"token comment\">// &lt;button onClick={this.incremen}></span>\n  <span class=\"token comment\">//   Clicked: {this.state.count}</span>\n  <span class=\"token comment\">// &lt;/button></span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>counter-button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>incremen<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          Clicked: </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Counter<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Trong component tr√™n, ch√∫ng ta c·ªë t√¨nh g√µ sai ch·ªØ <code class=\"language-inline-text\">incremen</code>, ·ª©ng d·ª•ng s·∫Ω kh√¥ng ch·∫°y, nh∆∞ng khi ch·∫°y test th√¨ v·∫´n pass</p>\n<p>File test</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Counter <span class=\"token keyword\">from</span> <span class=\"token string\">'../counter'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> Enzyme<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> shallow<span class=\"token punctuation\">,</span> render<span class=\"token punctuation\">,</span> mount <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'enzyme'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> toJson <span class=\"token keyword\">from</span> <span class=\"token string\">'enzyme-to-json'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Adapter <span class=\"token keyword\">from</span> <span class=\"token string\">'enzyme-adapter-react-16'</span><span class=\"token punctuation\">;</span>\n\nEnzyme<span class=\"token punctuation\">.</span><span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">adapter</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Adapter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'increment method increments count'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">const</span> wrapper <span class=\"token operator\">=</span> <span class=\"token function\">mount</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>Counter <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">instance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n    wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">instance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">instance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Th·ª© nh·∫•t l√† c√°ch vi·∫øt test nh∆∞ v·∫≠y c√≥ v·∫•n ƒë·ªÅ, ch√∫ng <strong>ko m√¥ ph·ªèng</strong> c√°ch m√† user s·∫Ω s·ª≠ d·ª•ng, ch√∫ng ta g·ªçi th·∫≥ng <code class=\"language-inline-text\">increment()</code>.</p>\n<p>N·∫øu b·∫°n simulate vi·ªác click n√∫t button <code class=\"language-inline-text\">wrapper.find('button.counter-button').simulate('click')</code> thay v√¨ g·ªçi <code class=\"language-inline-text\">increment()</code>, test s·∫ª pass, nh∆∞ng <em>l·ª° ƒë√¢u</em>, m·ªôt l·∫ßn c·∫≠p nh·∫≠p n√†o ƒë√≥ b·∫°n thay ƒë·ªïi <code class=\"language-inline-text\">className</code> cho button, m√† ko c·∫≠p nh·∫≠p l·∫°i test th√¨ c≈©ng <em>toang</em>.</p>\n<p><strong>V·∫≠y ng∆∞·ªùi n√¥ng d√¢n bi·∫øt ph·∫£i l√†m sao?</strong></p>\n<h2 id=\"react-testing-library\"><a href=\"#react-testing-library\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>React-testing-library</h2>\n<p>T·ª´ th∆∞ vi·ªán <code class=\"language-inline-text\">react-testing-library</code>, n√≥ ƒë∆∞a ra m·ªôt nguy√™n l√Ω chung nh∆∞ sau</p>\n<blockquote>\n<p>Test c√†ng g·∫ßn v·ªõi th·ª±c t·∫ø s·ª≠ d·ª•ng c·ªßa ·ª©ng d·ª•ng, test c√†ng ƒëem ƒë·∫øn s·ª± t·ª± tin cho ch√∫ng ta</p>\n</blockquote>\n<p>H√£y t√¢m ni·ªám nguy√™n l√Ω n√†y trong ƒë·∫ßu, ch√∫ng ta s·∫Ω c√≤n b√†n ti·∫øp v·ªÅ n√≥</p>\n<h3 id=\"usestate\"><a href=\"#usestate\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>useState</h3>\n<p>Hay b·∫Øt ƒë·∫ßu test React hook, ch√∫ng ta ƒë√£ v√† ƒëang s·ª≠ d·ª•ng n√≥ nhi·ªÅu h∆°n l√† class component</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TestHook</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Initial State\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">changeState</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Initial State Changed\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">changeNameToSteve</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    props<span class=\"token punctuation\">.</span><span class=\"token function\">changeName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>changeState<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">State Change Button</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>changeNameToSteve<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Change Name</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> TestHook<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Prop s·∫Ω ƒë∆∞·ª£c nh·∫≠n t·ª´ component cha l√† <code class=\"language-inline-text\">App</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Some Text\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">,</span> setName<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Moe\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token operator\">...</span>\n      <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">changeName</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Steve\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n         </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Basic</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> Counter </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n         </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Counter</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> Basic Hook useState </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n         </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TestHook</span></span> <span class=\"token attr-name\">name</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">changeName</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>changeName<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    ...</span></code></pre></div>\n<p>V·ªõi nguy√™n l√Ω nh∆∞ ƒë√£ n√≥i, ch√∫ng ta s·∫Ω th·ª±c hi·ªán test nh∆∞ th·∫ø n√†o</p>\n<p>C√°ch m√† user s·ª≠ d·ª•ng ·ª©ng d·ª•ng s·∫Ω l√†: h·ªç th·∫•y m·ªôt ƒëo·∫°n text tr√™n UI Button, click v√†o, r·ªìi th·∫•y m·ªôt k·∫øt qu·∫£ sau khi click ƒë√≥, m·ªôt text m·ªõi xu·∫•t hi·ªán ch·∫≥ng h·∫°n</p>\n<p>Ch√∫ng ta c√†i ƒë·∫∑t th∆∞ vi·ªán <code class=\"language-inline-text\">@testing-library/react</code> (kh√¥ng ph·∫£i <code class=\"language-inline-text\">react-testing-library</code> nh√©)</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> @testing-library/react</code></pre></div>\n<p>Th·ª±c hi·ªán vi·ªác test</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span>\n<span class=\"token keyword\">import</span> TestHook <span class=\"token keyword\">from</span> <span class=\"token string\">'../test_hook.js'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> fireEvent<span class=\"token punctuation\">,</span> cleanup <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@testing-library/react'</span>\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'..al/App'</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span>cleanup<span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text in state is changed when button clicked'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> getByText <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>TestHook <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">getByText</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">Initial</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Init State\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    fireEvent<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token function\">getByText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"State change Button\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">getByText</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">Initial</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Initial State Changed\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button click changes props'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> getByText <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>TestHook<span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>App<span class=\"token operator\">></span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">getByText</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">Moe</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Moe\"</span><span class=\"token punctuation\">)</span>\n\n    fireEvent<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token function\">getByText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Change Name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">getByText</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">Steve</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Steve\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>V√¨ kh√¥ng s·ª≠ d·ª•ng shallow render, n√™n ch√∫ng ta ph·∫£i g·ªçi <code class=\"language-inline-text\">afterEach(cleanup)</code> ƒë·ªÉ d·ªçn d·∫πp sau m·ªói l·ª±c th·ª±c hi·ªán test</p>\n<p><code class=\"language-inline-text\">getByText</code> l√† ph∆∞∆°ng th·ª©c n·∫±m trong h√†m <code class=\"language-inline-text\">render</code>, c√≤n v√†i ki·ªÉu query kh√°c n·ªØa, nh∆∞ng ƒë√¢y l√† ki·ªÉu m√† ch√∫ng ta d√πng n√≥ nhi·ªÅu nh·∫•t, c√≥ th·ªÉ n√≥i l√† ƒë·ªß d√πng.</p>\n<p>ƒê·ªÉ test gi√° tr·ªã c·ªßa state, ch√∫ng ta kh√¥ng s·ª≠ d·ª•ng b·∫•t c·ª© t√™n h√†m, t√™n bi·∫øn state n√†o c·∫£. V·∫´n l√† nguy√™n l√Ω \"Kh√¥ng ƒëi s√¢u v√†o vi·ªác th·ª±c hi·ªán chi ti·∫øt\". V√¨ user s·∫Ω th·∫•y m·ªôt ƒëo·∫°n text tr√™n UI, ch√∫ng ta query n√≥ tr√™n DOM, ch√∫ng ta c≈©ng query button b·∫±ng c√°ch n√†y v√† b·∫Øn ra s·ª± ki·ªán (<code class=\"language-inline-text\">fireEvent.click</code>). Cu·ªëi c√πng ch√∫ng ta ki·ªÉm tra k·∫øt qu·∫£ cu·ªëi c√πng nh·∫≠n ƒë∆∞·ª£c, ƒëo·∫°n text b·ªã thay ƒë·ªïi, ch·ª© ko ki·ªÉm tra gi√° tr·ªã state (m·∫∑c d√π n√≥ l√† t∆∞∆°ng ƒë∆∞∆°ng)</p>\n<h3 id=\"usereducer\"><a href=\"#usereducer\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>useReducer</h3>\n<p>Reducer ch√∫ng ta s·∫Ω test</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> <span class=\"token constant\">ACTIONS</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./actions\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">stateprop1</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Reducer1</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> initialState<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"SUCCESS\"</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">stateprop1</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"FAILURE\"</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">stateprop1</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Action</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">SUCCESS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"SUCCESS\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">FAILURE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"FAILURE\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Cu·ªëi c√πng l√† component s·ª≠ d·ª•ng action v√† reducer ƒë√£ ƒë·ªãnh nghƒ©a</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useReducer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> <span class=\"token constant\">ACTIONS</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../store/actions\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Reducer <span class=\"token keyword\">from</span> <span class=\"token string\">\"../store/reducer\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TestHookReducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>reducerState<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>\n    Reducer<span class=\"token punctuation\">.</span>Reducer1<span class=\"token punctuation\">,</span>\n    Reducer<span class=\"token punctuation\">.</span>initialState\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dispatchActionSuccess</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token constant\">ACTIONS</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SUCCESS</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dispatchActionFailure</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token constant\">ACTIONS</span><span class=\"token punctuation\">.</span><span class=\"token constant\">FAILURE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>reducerState<span class=\"token punctuation\">.</span>stateprop1 <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">stateprop1 is true</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">stateprop1 is false</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>dispatchActionSuccess<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Dispatch Success</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> TestHookReducer<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Component n√†y s·∫Ω ƒë·ªïi gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">stateprop</code> t·ª´ <code class=\"language-inline-text\">false</code> sang <code class=\"language-inline-text\">true</code> b·∫±ng vi·ªác dispatch m·ªôt <code class=\"language-inline-text\">SUCCESS</code> action</p>\n<p>Th·ª±c hi·ªán test</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> TestHookReducer <span class=\"token keyword\">from</span> <span class=\"token string\">\"../test_hook_reducer.js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> fireEvent<span class=\"token punctuation\">,</span> cleanup <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@testing-library/react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> Reducer <span class=\"token keyword\">from</span> <span class=\"token string\">\"../../store/reducer\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> <span class=\"token constant\">ACTIONS</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../../store/actions\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span>cleanup<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test the reducer and action\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"ejs\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"should return the initial state\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>Reducer<span class=\"token punctuation\">.</span>initialState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">stateprop1</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"should change stateprop1 from false to true\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>Reducer<span class=\"token punctuation\">.</span><span class=\"token function\">Reducer1</span><span class=\"token punctuation\">(</span>Reducer<span class=\"token punctuation\">.</span>initialState<span class=\"token punctuation\">,</span> <span class=\"token constant\">ACTIONS</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SUCCESS</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">stateprop1</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"reducer changes stateprop1 from fals to true\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> container<span class=\"token punctuation\">,</span> getByText <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>TestHookReducer <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">getByText</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">stateprop1 is</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"stateprop1 is false\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  fireEvent<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token function\">getByText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Dispatch success\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">getByText</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">stateprop1 is</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"stateprop1 is true\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Tr∆∞·ªõc ti√™n ch√∫ng ta test c√°i reducer b√™n trong kh·ªëi <code class=\"language-inline-text\">describe</code>, th·ª±c hi·ªán m·ªôt test ƒë∆°n gi·∫£n v·ªõi gi√° tr·ªã initial state v√† sau khi c√≥ action success.</p>\n<p>V·ªõi v√≠ d·ª• tr√™n, reducer v√† action r·∫•t chi l√† ƒë∆°n gi·∫£n, b·∫°n c√≥ th·ªÉ n√≥i kh√¥ng c·∫ßn th·ª±c hi·ªán unit test cho n√≥ l√†m g√¨, nh∆∞ng trong th·ª±c t·∫ø s·ª≠ d·ª•ng reducer s·∫Ω kh√¥ng h·ªÅ ƒë∆°n gi·∫£n th·∫ø, v√† vi·ªác test reducer l√† th·ª±c s·ª± c·∫ßn thi·∫øt, kh√¥ng nh·ªØng v·∫≠y, ch√∫ng ta c√≤n ph·∫£i test theo h∆∞·ªõng chi ti·∫øt hi·ªán th·ª±c b√™n trong.</p>\n<p>Ti·∫øp theo ch√∫ng ta c√≥ m·ªôt test cho component, ch√∫ng ta v·∫´n s·ª≠ d·ª•ng c√°ch l√†m tr∆∞·ªõc ƒë√≥ ƒë√£ ƒë·ªÅ c·∫≠p v·ªõi <code class=\"language-inline-text\">useState</code>, l·∫•y DOM b·∫±ng c√°ch query text v√† ki·ªÉm tra gi√° tr·ªã text sau khi c√≥ event click.</p>\n<h3 id=\"usecontext\"><a href=\"#usecontext\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>useContext</h3>\n<p>Gi·ªù ch√∫ng ta ƒëi ƒë·∫øn vi·ªác test m·ªôt component con c√≥ th·ªÉ c·∫≠p nh·∫≠p context state trong component cha.</p>\n<p>Th∆∞·ªùng th√¨ context s·∫Ω ƒë∆∞·ª£c kh·ªüi t·∫°o trong m·ªôt file ri√™ng</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> Context <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Context<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ch√∫ng ta s·∫Ω c·∫ßn m·ªôt component cha, n·∫Øm gi·ªØ Context provider. Gi√° tr·ªã truy·ªÅn v√†o cho provider s·∫Ω l√† gi√° tr·ªã <code class=\"language-inline-text\">state</code> v√† h√†m <code class=\"language-inline-text\">setState</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> TestHookContext <span class=\"token keyword\">from</span> <span class=\"token string\">\"./components/react-testing-lib/test_hook_context\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> Context <span class=\"token keyword\">from</span> <span class=\"token string\">\"./components/store/context\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Some Text\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">changeText</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Some Other Text\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span> Basic Hook useContext<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Context<span class=\"token punctuation\">.</span>Provider\n        value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">changeTextProp</span><span class=\"token operator\">:</span> changeText<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">stateProp</span><span class=\"token operator\">:</span> state <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>TestHookContext <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Context<span class=\"token punctuation\">.</span>Provider<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Component con, ƒë√¢y l√† component ch√∫ng ta mu·ªën test</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> Context <span class=\"token keyword\">from</span> <span class=\"token string\">\"../store/context\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TestHookContext</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>Context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>context<span class=\"token punctuation\">.</span>changeTextProp<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Change Text<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>context<span class=\"token punctuation\">.</span>stateProp<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> TestHookContext<span class=\"token punctuation\">;</span></code></pre></div>\n<p>L∆∞u √Ω: c√°c gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">state</code>, kh·ªüi t·∫°o, c·∫≠p nh·∫≠p ƒëi·ªÅu n·∫±m trong <code class=\"language-inline-text\">App.js</code>, ch√∫ng ta ch·ªâ truy·ªÅn gi√° tr·ªã n√†y xu·ªëng c√°c component con th√¥ng qua context, m·ªçi th·ª© ƒëi·ªÅu th·ª±c hi·ªán ·ªü <code class=\"language-inline-text\">App</code>, c√°i n√†y quan tr·ªçng c·∫ßn nh·ªõ ƒë·ªÉ hi·ªÉu l√∫c test</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> TestHookContext <span class=\"token keyword\">from</span> <span class=\"token string\">\"../test_hook_context.js\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act<span class=\"token punctuation\">,</span> render<span class=\"token punctuation\">,</span> fireEvent<span class=\"token punctuation\">,</span> cleanup <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@testing-library/react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">\"../../../App\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> Context <span class=\"token keyword\">from</span> <span class=\"token string\">\"../../store/context\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span>cleanup<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"context value is updated by child component\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> container<span class=\"token punctuation\">,</span> getByText <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>App<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Context<span class=\"token punctuation\">.</span>Provider<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>TestHookContext <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Context<span class=\"token punctuation\">.</span>Provider<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>App<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">getByText</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">Some</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Some text\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  fireEvent<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token function\">getByText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Change text\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token function\">getByText</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">Some</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Some other text\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>V·ªõi context ch√∫ng ta c≈©ng kh√¥ng h·ªÅ thay ƒë·ªïi c√°ch l√†m nh∆∞ v·ªõi <code class=\"language-inline-text\">useState</code>, v·∫´n l√† t√¨m v√† ƒë·∫∑t expect th√¥ng qua k·∫øt qu·∫£ nh·∫≠n ƒë∆∞·ª£c cu·ªëi c√πng.</p>\n<p>B√™n trong render function, ch√∫ng ta c√≥ include <code class=\"language-inline-text\">&lt;Context.Provider/></code> v√† <code class=\"language-inline-text\">&lt;TestHookContext/></code> ƒë·ªÉ code d·ªÖ ƒë·ªçc h∆°n, ch·ª© th·∫≠t s·ª± ch√∫ng ta kh√¥ng c·∫ßn ch√∫ng. Test s·∫Ω v·∫´n ch·∫°y n·∫øu truy·ªÅn v√†o <code class=\"language-inline-text\">&lt;App /></code> b√™n trong render function</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> container<span class=\"token punctuation\">,</span> getByText <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>T·∫°i sao l·∫°i nh∆∞ v·∫≠y?</p>\n<p>H√£y nghƒ© l·∫°i m·ªôt ch√∫t v·ªÅ context, t·∫•t c·∫£ nh·ªØng state c·ªßa context ƒë∆∞·ª£c handle b√™n trong <code class=\"language-inline-text\">App.js</code>, v√¨ l√Ω do ƒë√≥, ƒë√¢y l√† component ch√≠nh ch√∫ng ta test, m·∫∑c d√π tr√¥ng th√¨ c√≥ v·∫ª ch√∫ng ta test m·ªôt child component s·ª≠ d·ª•ng <code class=\"language-inline-text\">useContext</code> hook. Ch√∫ng ta l·∫°i kh√¥ng th·ª±c hi·ªán shallow render, m√† render lu√¥n c√°c component con, n√™n dƒ© nhi√™n <code class=\"language-inline-text\">&lt;Context.Provider /></code> v√† <code class=\"language-inline-text\">&lt;TestHookContext /></code> ƒë·ªÅu ƒë∆∞·ª£c render v√¨ n√≥ l√† con c·ªßa <code class=\"language-inline-text\">&lt;App /></code></p>\n<p><a href=\"https://www.freecodecamp.org/news/testing-react-hooks/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">How to Test React Components: the Complete Guide</a></p>\n","cover_image":""}},{"node":{"id":"605c2b52b6247097140c1f26a6ff0b47","title":"L√†m animate si√™u ƒë∆°n gi·∫£n v·ªõi hook khi react component mount v√† unmount","path":"/2020-05-01-huong-dan-lam-animate-sieu-don-gian-voi-react/","date":"2020-05-01","timeToRead":2,"desc":"","content":"<p>C√≥ r·∫•t nhi·ªÅu l√∫c ch√∫ng ta mu·ªën th√™m/x√≥a m·ªôt element tr√™n tr√¨nh duy·ªát, n√≥ r·∫•t chi l√† tr·ª±c quan d·ªÖ d√†ng v·ªõi jQuery, tuy nhi√™n v√¨ kh√¥ng c√≤n ƒë·ª•ng ch·∫°m tr·ª±c ti·∫øp v√†o DOM, vi·ªác ƒë∆°n gi·∫£n ƒë√≥ l·∫°i h∆°i <em>k·ª≥ c√¥ng</em></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// nh·ªØng ng√†y xa x∆∞a ·∫•y c√≤n ƒë√¢u</span>\n<span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#my-element\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fadeIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"slow\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>T·∫°i sao l·∫°i kh√≥ khƒÉn ·∫•y nh·ªâ? H√£y m∆∞·ªùng t∆∞·ª£ng n√≥ qua m·ªôt v√≠ d·ª•</p>\n<div class=\"gridsome-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* styles.css */</span>\n\n<span class=\"token atrule\"><span class=\"token rule\">@keyframes</span> fadeIn</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">0%</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">100%</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// index.js</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> show <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  show <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">animation</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">fadeIn 1s</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">HELLO</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span> <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ƒê√≥ l√† t·∫•t c·∫£ nh·ªØng g√¨ ch√∫ng ta c·∫ßn l√†m ƒë·ªÉ animate l√∫c component ƒëang mount v·ªõi <code class=\"language-inline-text\">fadeIn</code>, tuy nhi√™n l·∫°i kh√¥ng c√≥ c√°ch n√†o ƒë·ªÉ animate <em>unmount</em>, v√¨ ch√∫ng ta ƒë√£ x√≥a c√°i DOM ngay khi <code class=\"language-inline-text\">show</code> chuy·ªÉn th√†nh <code class=\"language-inline-text\">false</code>. Element ƒë√£ ra ƒëi ngay l·∫≠p t·ª©c.</p>\n<p>V·∫≠y ch√∫ng ta c·∫ßn l√†m g√¨</p>\n<ol>\n<li><code class=\"language-inline-text\">show</code> thay ƒë·ªïi, b√°o react khoan h√£y unmount, delay n√≥ l·∫°i m·ªôt ch√∫t</li>\n<li>Ch·∫°y animate</li>\n<li>Animate v·ª´a ch·∫°y xong, unmount</li>\n</ol>\n<p>ƒê√¢y l√† c√°ch l√†m ƒë∆°n gi·∫£n nh·∫•t ch·ªâ b·∫±ng CSS v√† hook, t·∫•t nhi√™n n·∫øu ƒë·ª•ng t·ªõi nh·ªØng t√≠nh hu·ªëng ph·ª©c t·∫°p h∆°n, khuy·∫øn kh√≠ch b·∫°n s·ª≠ d·ª•ng <a href=\"https://www.react-spring.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react-spring</a></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// index.js</span>\n\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"./styles.css\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Fade <span class=\"token keyword\">from</span> <span class=\"token string\">\"./Fade\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>show<span class=\"token punctuation\">,</span> setShow<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setShow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">show</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>show<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>show <span class=\"token operator\">?</span> <span class=\"token string\">\"hide\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"show\"</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Fade</span></span> <span class=\"token attr-name\">show</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>show<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> HELLO </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Fade</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> rootElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span> rootElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Fade.js</span>\n\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useEffect<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Fade</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> show<span class=\"token punctuation\">,</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>shouldRender<span class=\"token punctuation\">,</span> setRender<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>show<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>show<span class=\"token punctuation\">)</span> <span class=\"token function\">setRender</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>show<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onAnimationEnd</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>show<span class=\"token punctuation\">)</span> <span class=\"token function\">setRender</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    shouldRender <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n        <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">animation</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>show <span class=\"token operator\">?</span> <span class=\"token string\">\"fadeIn\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"fadeOut\"</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> 1s</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onAnimationEnd</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onAnimationEnd<span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Fade<span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gridsome-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* styles.css */</span>\n\n<span class=\"token atrule\"><span class=\"token rule\">@keyframes</span> fadeIn</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">0%</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">100%</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token atrule\"><span class=\"token rule\">@keyframes</span> fadeOut</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">0%</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">100%</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>B·∫°n c√≥ th·ªÉ xem <a href=\"https://codesandbox.io/s/react-easy-animation-b658i\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">demo ·ªü ƒë√¢y</a></p>\n<p><a href=\"https://czaplinski.io/blog/super-easy-animation-with-react-hooks/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Super easy react mount/unmount animations with hooks</a></p>\n","cover_image":""}},{"node":{"id":"e50caffffbea9c79e5698cd929baa00a","title":"useEffect t·ª´ a t·ªõi z","path":"/2020-03-23-tat-tan-tat-huong-dan-ve-use-effect/","date":"2020-03-23","timeToRead":13,"desc":"ƒê√¢y l√† m·ªôt b√†i vi·∫øt t∆∞∆°ng ƒë·ªëi d√†i d√≤ng v·ªÅ useEffect, b·∫°n c·∫ßn bi·∫øt v√† ƒë√£ ƒë·ªçc qua t√†i li·ªáu v·ªÅ useEffect tr√™n trang ch√≠nh th·ª©c c·ªßa React tr∆∞·ªõc, v√† n·∫øu ch·ªâ th·ª±c s·ª± c·∫ßn bi·∫øt s·ª≠ d·ª•ng useEffect ra sao, b·∫°n kh√¥ng c·∫ßn ƒë·ªçc b√†i vi·∫øt ph√¢n t√°ch m·ªï x·∫ª s√¢u ki·ªÉu n√†y.","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#m%E1%BB%97i-l%E1%BA%A7n-render-l%C3%A0-m%E1%BB%99t-gi%C3%A1-tr%E1%BB%8B-prop-v%C3%A0-state-%C4%91%E1%BB%99c-l%E1%BA%ADp\">M·ªói l·∫ßn render l√† m·ªôt gi√° tr·ªã Prop v√† State ƒë·ªôc l·∫≠p</a></li>\n<li><a href=\"#m%E1%BB%99t-l%C3%A0-kh%C3%B4ng-n%C3%B3i-l%C3%A1o-2-l%C3%A0-kh%C3%B4ng-n%C3%B3i-l%C3%A1o-nhi%E1%BB%81u-l%E1%BA%A7n\">M·ªôt l√† kh√¥ng n√≥i l√°o, 2 l√† kh√¥ng n√≥i l√°o nhi·ªÅu l·∫ßn</a></li>\n<li><a href=\"#h%E1%BA%ADu-qu%E1%BA%A3-c%E1%BB%A7a-vi%E1%BB%87c-d%E1%BB%91i-tr%C3%A1\">H·∫≠u qu·∫£ c·ªßa vi·ªác d·ªëi tr√°</a></li>\n<li><a href=\"#2-c%C3%A1ch-%C4%91%E1%BB%83-th%C3%BA-th%E1%BA%ADt-v%E1%BB%9Bi-react-v%E1%BB%81-dependency\">2 c√°ch ƒë·ªÉ th√∫ th·∫≠t v·ªõi React v·ªÅ dependency</a></li>\n<li><a href=\"#t%C3%ADnh-n%C4%83ng-update-c%E1%BB%A7a-google-docs\">T√≠nh nƒÉng update c·ªßa Google Docs</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"m·ªói-l·∫ßn-render-l√†-m·ªôt-gi√°-tr·ªã-prop-v√†-state-ƒë·ªôc-l·∫≠p\"><a href=\"#m%E1%BB%97i-l%E1%BA%A7n-render-l%C3%A0-m%E1%BB%99t-gi%C3%A1-tr%E1%BB%8B-prop-v%C3%A0-state-%C4%91%E1%BB%99c-l%E1%BA%ADp\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>M·ªói l·∫ßn render l√† m·ªôt gi√° tr·ªã Prop v√† State ƒë·ªôc l·∫≠p</h2>\n<p>Tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu n√≥i v·ªÅ <code class=\"language-inline-text\">useEffect</code> ch√∫ng ta c·∫ßn nh·∫Øc l·∫°i qu√° tr√¨nh render</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> ...\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Kh√°c v·ªõi Vue, n√≥ kh√¥ng ph·∫£i l√† m·ªôt d·∫°ng <em>data binding</em>, <em>watcher</em>, <em>proxy</em>, n√≥ ch·ªâ l√† m·ªôt gi√° tr·ªã th√¥ng th∆∞·ªùng.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token number\">42</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ƒê·∫ßu ti√™n gi√° tr·ªã kh·ªüi t·∫°o c·ªßa <code class=\"language-inline-text\">count</code> s·∫Ω =0. Khi ch√∫ng ta g·ªçi <code class=\"language-inline-text\">setCount(1)</code>, React s·∫Ω g·ªçi l·∫°i component m·ªôt l·∫ßn n·ªØa, v·ªõi gi√° tr·ªã <code class=\"language-inline-text\">count</code> l√∫c n√†y l√† <code class=\"language-inline-text\">1</code>. C·ª© v·∫≠y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// L·∫ßn ƒë·∫ßu render</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// tr·∫£ v·ªÅ b·ªüi useState()  // ...</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// sau khi click, function n√†y ƒë∆∞·ª£c g·ªçi l·∫°i l·∫ßn n·ªØa</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// tr·∫£ v·ªÅ b·ªüi `useState()  // ...</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// sau khi click, function ƒë∆∞·ª£c g·ªçi l·∫°i l·∫ßn n·ªØa</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// tr·∫£ v·ªÅ b·ªüi useState()  // ...</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Khi update m·ªôt state, React g·ªçi l·∫°i component, m·ªói l·∫ßn render nh∆∞ v·∫≠y, n√≥ s·∫Ω <strong>th·∫•y</strong> m·ªôt gi√° tr·ªã <code class=\"language-inline-text\">count</code> m·ªõi. Sau ƒë√≥ React s·∫Ω update l·∫°i DOM t∆∞∆°ng ·ª©ng.</p>\n<p>V·∫•n ƒë·ªÅ m·∫•u ch·ªët c·∫ßn n·∫Øm l√† gi√° tr·ªã <code class=\"language-inline-text\">count</code> <strong>trong c√°c l·∫ßn render kh√°c nhau l√† kh√°c nhau.</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleAlertClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked on: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Click me</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleAlertClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Show alert</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      ...\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta th·ª±c hi·ªán c√°c b∆∞·ªõc sau</p>\n<ul>\n<li>B·∫•m counter l√™n 3</li>\n<li>B·∫•m \"Show alert\"</li>\n<li>B·∫•m ti·∫øp <code class=\"language-inline-text\">Click me</code> cho counter l√™n 5 tr∆∞·ªõc khi b·ªã g·ªçi timeout</li>\n</ul>\n<p><img src=\"https://overreacted.io/46c55d5f1f749462b7a173f1e748e41e/counter.gif\" alt=\"Counter demo\"></p>\n<p>C√¢u h·ªèi ·ªü ƒë√¢y l√† n√≥ s·∫Ω alert ra 5 - gi√° tr·ªã cu·ªëi c√πng, hay l√† 3 gi√° tr·ªã l√∫c ch√∫ng ta click</p>\n<p><a href=\"https://codesandbox.io/s/w2wxl3yo0l\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ch·∫°y th·ª≠</a></p>\n<p><em>B·∫°n c√≥ th·∫•y k·∫øt qu·∫£ qu√° v√¥ l√Ω?</em></p>\n<p>Nh∆∞ ƒë√£ n√≥i ·ªü tr√™n, gi√° tr·ªã <code class=\"language-inline-text\">count</code> l√† h·∫±ng s·ªë tr√™n m·ªói l·∫ßn render. <strong>Function c·ªßa ch√∫ng ta ƒë∆∞·ª£c g·ªçi nhi·ªÅu l·∫ßn, m·ªói l·∫ßn g·ªçi nh∆∞ v·∫≠y gi√° tr·ªã <code class=\"language-inline-text\">count</code> b√™n trong l√† m·ªôt s·ªë ƒë·ªôc l·∫≠p ho√†n to√†n v·ªõi gi√° tr·ªã tr∆∞·ªõc ƒë√≥</strong></p>\n<p>Kh√¥ng ph·∫£i <strong>ƒë·∫∑c s·∫£n</strong> c·ªßa React, vi·∫øt d·∫°ng function nh∆∞ th·∫ø n√†y b·∫°n s·∫Ω d·ªÖ h√¨nh dung h∆°n.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">person</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> person<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> someone <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Dan\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span>someone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nsomeone <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Yuzhi\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span>someone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nsomeone <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Dominic\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">sayHi</span><span class=\"token punctuation\">(</span>someone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Th·∫ø c√≤n h√†m x·ª≠ l√Ω event th√¨ sao? c·ª• th·ªÉ l√† h√†m <code class=\"language-inline-text\">handleAlertClick</code>? C≈©ng nh∆∞ tr√™n, h√†m n√†y l√† c√≥ c√°c <strong>version</strong> kh√°c nhau ·ªü c√°c l·∫ßn render kh√°c nhau.</p>\n<p>B√†i vi·∫øt ƒë∆∞·ª£c <strong>qu·∫£ng c√°o</strong> l√† n√≥i v·ªÅ <code class=\"language-inline-text\">useEffect</code> m√† n√£y gi·ªù ch∆∞a ƒë√° ƒë·ªông g√¨!</p>\n<p>Quay l·∫°i v·ªõi v√≠ d·ª• t·ª´ <a href=\"https://reactjs.org/docs/hooks-effect.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">trang ch√≠nh th·ª©c c·ªßa React</a></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Click me</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√¢u h·ªèi l√† <code class=\"language-inline-text\">useEffect</code> ƒë√£ l√†m c√°ch n√†o ƒë·ªÉ l·∫•y ƒë∆∞·ª£c gi√° tr·ªã cu·ªëi c√πng c·ªßa <code class=\"language-inline-text\">count</code>?</p>\n<p>L·∫Ω n√†o ƒë√≥ c√≥ m·ªôt d·∫°ng \"data binding\" hay \"watching\" ·ªü ƒë√¢y ƒë·ªÉ update gi√° tr·ªã <code class=\"language-inline-text\">count</code> b√™n trong h√†m effect? Ho·∫∑c gi·∫£ React <em>ch∆°i chi√™u</em> d√πng bi·∫øn mutable b√™n trong component ƒë·ªÉ lu√¥n c√≥ ƒë∆∞·ª£c gi√° tr·ªã cu·ªëi?</p>\n<p><em>Kh√¥ng h·ªÅ!</em></p>\n<p>Ch√∫ng ta ƒë√£ bi·∫øt: gi√° tr·ªã <code class=\"language-inline-text\">count</code> l√† h·∫±ng s·ªë cho c√°c l·∫ßn render, event handle c≈©ng ƒë·ªôc l·∫≠p tr√™n c√°c l·∫ßn render kh√°c nhau, effect c≈©ng v·∫≠y lu√¥n.</p>\n<p>Kh√¥ng ph·∫£i gi√° tr·ªã <code class=\"language-inline-text\">count</code> thay ƒë·ªïi b√™n trong <code class=\"language-inline-text\">useEffect</code> <strong>b·∫•t bi·∫øn</strong>, m√† l√† <code class=\"language-inline-text\">useEffect</code> c≈©ng b·ªã thay ƒë·ªïi tr√™n t·ª´ng l·∫ßn render.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// l·∫ßn render ƒë·∫ßu ti√™n</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">0</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// sau khi click</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">1</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// click th√™m l·∫ßn n·ªØa</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token number\">2</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ..</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>C√≥ th·ªÉ m∆∞·ªùng t∆∞·ª£ng effect l√† m·ªôt ph·∫ßn c·ªßa k·∫øt qu·∫£ l√∫c render</p>\n</blockquote>\n<p>Gi·ªù th·ª≠ v·ªõi <code class=\"language-inline-text\">setTimeout</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">You clicked </span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> times</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Click me\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>N·∫øu m√† click v√†i l·∫ßn v·ªõi m·ªôt kho·∫£ng th·ªùi gian <em>b·ªè nh·ªè</em> th√¨ k·∫øt qu·∫£ log ra l√† g√¨?</p>\n<p><a href=\"https://codesandbox.io/s/lyx20m1ol\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Th·ª≠ ·ªü ƒë√¢y</a></p>\n<p>B·∫°n kh√¥ng ch·ªâ nh·∫≠n ƒë∆∞·ª£c 1 m√† l√† m·ªôt chu·ªói c√°c ƒëo·∫°n log ·ª©ng v·ªõi s·ªë l·∫ßn click.</p>\n<p><img src=\"https://overreacted.io/a5727d333c270e05942f508707265378/timeout_counter.gif\" alt=\"Screen recording of 1, 2, 3, 4, 5 logged in order\"></p>\n<p><em>ƒê∆∞∆°ng nhi√™n ph·∫£i ch·∫°y nh∆∞ v·∫≠y m·ªõi ƒë√∫ng ch·ª©, ƒë√¢u c√≥ g√¨ ph·∫£i th·∫Øc m·∫Øc?</em></p>\n<p>B·∫°n ƒë√£ th·ª≠ v·ªõi <code class=\"language-inline-text\">this.state</code> trong class component ch∆∞a?</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"https://overreacted.io/264b329edc111a1973003bdf2bcacd65/timeout_counter_class.gif\" alt=\"Screen recording of 5, 5, 5, 5, 5 logged in order\"></p>\n<p><em>L√Ω do?</em> Gi√° tr·ªã <code class=\"language-inline-text\">this.state</code> b√™n trong class component l√† m·ªôt mutation (c√≥ th·ªÉ thay ƒë·ªïi).</p>\n<p>N·∫øu lu√¥n mu·ªën l·∫•y gi√° tr·ªã sau c√πng b√™n trong effect, c√°ch d·ªÖ nh·∫•t l√† d√πng <code class=\"language-inline-text\">refs</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">...</span>\n    <span class=\"token keyword\">const</span> latestCount <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">...</span>\n\n    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>\n        latestCount<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> count<span class=\"token punctuation\">;</span>\n        <span class=\"token operator\">...</span>\n        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token operator\">...</span>\n                console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>latestCount<span class=\"token punctuation\">.</span>current<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token operator\">...</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"https://overreacted.io/timeout_counter_refs-78f7948263dd13b023498b23cb99f4fc.gif\"></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Greeting<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>N·∫øu ch√∫ng ta render <code class=\"language-inline-text\">&lt;Greeting name=\"Dan\" /></code>, sau ƒë√≥ render <code class=\"language-inline-text\">&lt;Greeting name=\"Luu\" /></code>. Cu·ªëi c√πng ch√∫ng ta lu√¥n nh·∫≠n ƒë∆∞·ª£c <em>Hello, Luu</em></p>\n<p>React lu√¥n ƒë·ªìng b·ªô c·ª•c DOM v·ªõi gi√° tr·ªã hi·ªán t·∫°i c·ªßa <code class=\"language-inline-text\">prop</code> v√† <code class=\"language-inline-text\">state</code>. Kh√¥ng c·∫ßn ph√¢n bi·ªát gi·ªØa <code class=\"language-inline-text\">mount</code> v√† <code class=\"language-inline-text\">update</code> khi render. C√≥ th·ªÉ h√¨nh dung effect c≈©ng t∆∞∆°ng t·ª± nh∆∞ v·∫≠y, <strong><code class=\"language-inline-text\">useEffect</code> cho ph√©p ƒë·ªìng b·ªô nh·ªØng ph·∫ßn kh√¥ng n·∫±m trong React tree v·ªõi gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">prop</code> v√† <code class=\"language-inline-text\">state</code></strong></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello, \"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Greeting<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√¢u th·∫ßn ch√∫ cho vi·ªác n√†y l√†: <strong>Quan tr·ªçng l√† ƒë√≠ch ƒë·∫øn, kh√¥ng ph·∫£i qu√° tr√¨nh</strong></p>\n<p>Ch·∫°y effect tr√™n t·∫•t c·∫£ l√∫c ch·∫°y render s·∫Ω kh√¥ng hay l·∫Øm, ƒë√¥i khi c√≥ tr∆∞·ªùng h·ª£p l·∫∑p v√¥ t·∫≠n.</p>\n<p>Trong qu√° tr√¨nh re-render, React ch·ªâ c·∫≠p nh·∫≠p ƒë√∫ng ph·∫ßn DOM ƒë√£ thay ƒë·ªïi.</p>\n<p>V√≠ d·ª• nh∆∞</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Greeting<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, Dan</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Sang</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Greeting<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, Luu</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>React s·∫Ω th·∫•y 2 object</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> oldProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">className</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Greeting\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hello, Dan\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> newProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">className</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Greeting\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hello, Yuzhi\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>N√≥ s·∫Ω x√°c ƒë·ªãnh ƒë∆∞·ª£c <code class=\"language-inline-text\">children</code> b·ªã thay ƒë·ªïi v√† c·∫ßn update, c√≤n <code class=\"language-inline-text\">className</code> th√¨ kh√¥ng, n√≥ s·∫Ω l√†m nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">domNode<span class=\"token punctuation\">.</span>innerText <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello, Luu\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ch√∫ng ta c≈©ng mu·ªën effect l√†m ƒëi·ªÅu t∆∞∆°ng t·ª±, khi re-render ch·ªâ apply nh·ªØng update c·∫ßn thi·∫øt</p>\n<p>V√≠ d·ª• v·ªõi component n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Greeting</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>counter<span class=\"token punctuation\">,</span> setCounter<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello, \"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Greeting<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      Hello, </span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCounter</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-inline-text\">useEffect</code> kh√¥ng h·ªÅ li√™n quan t·ªõi gi√° tr·ªã state <code class=\"language-inline-text\">counter</code>, g·ªçi <code class=\"language-inline-text\">document.title</code> khi gi√° tr·ªã <code class=\"language-inline-text\">counter</code> thay ƒë·ªïi kh√¥ng ph·∫£i l√† √Ω hay.</p>\n<p>ƒê√≥ l√† l√Ω do t·∫°i sao ch√∫ng ta c√≥ th√™m tham s·ªë <code class=\"language-inline-text\">dependency</code> (m·ªôt m·∫£ng) khi d√πng <code class=\"language-inline-text\">useEffect</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello, \"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// deps</span></code></pre></div>\n<p>D·ªãch ra ng√¥n ng·ªØ con ng∆∞·ªùi l√† th·∫ø n√†y: \"Tao bi·∫øt React m√†y kh√¥ng ph√¢n bi·ªát ƒë∆∞·ª£c s·ª± kh√°c nhau b√™n trong function, n√™n tao h·ª©a l√† tao ch·ªâ d√πng ƒë·∫øn <code class=\"language-inline-text\">name</code> b√™n trong function n√†y th√¥i, v√† ch·ªâ gi√° tr·ªã <code class=\"language-inline-text\">name</code> n√†y update th√¨ m√†y h·∫£ g·ªçi n√≥\"</p>\n<h2 id=\"m·ªôt-l√†-kh√¥ng-n√≥i-l√°o-2-l√†-kh√¥ng-n√≥i-l√°o-nhi·ªÅu-l·∫ßn\"><a href=\"#m%E1%BB%99t-l%C3%A0-kh%C3%B4ng-n%C3%B3i-l%C3%A1o-2-l%C3%A0-kh%C3%B4ng-n%C3%B3i-l%C3%A1o-nhi%E1%BB%81u-l%E1%BA%A7n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>M·ªôt l√† kh√¥ng n√≥i l√°o, 2 l√† kh√¥ng n√≥i l√°o nhi·ªÅu l·∫ßn</h2>\n<p>ƒê·ª´ng bao gi·ªù l·ª´a g·∫°t React b·∫±ng c√°ch ƒë∆∞a dependency kh√¥ng ƒë√∫ng cho n√≥, h·∫≠u qu·∫£ nh√£n ti·ªÅn. H·ª£p l√Ω, nh∆∞ng nhi·ªÅu l·∫≠p tr√¨nh vi√™n quen s·ª≠ d·ª•ng <code class=\"language-inline-text\">class</code> s·∫Ω c·ªë t√¨nh qua m·∫∑t</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">SearchResults</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// vi·ªác ntn ƒë∆∞·ª£c h√¥n? kh√¥ng ph·∫£i l√∫c n√†o c≈©ng ƒë√∫ng</span>\n  <span class=\"token comment\">// c√≥ c√°ch vi·∫øt t·ªët h∆°n</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>B·∫°n s·∫Ω nghƒ© l√† \"Tao ch·ªâ mu·ªën ch·∫°y n√≥ l√∫c mount th√¥i\". N·∫øu ch√∫ng ta ch·ªâ ƒë·ªãnh m·ªôt dependency, <strong>t·∫•t c·∫£ gi√° tr·ªã b√™n trong component s·ª≠ d·ª•ng b·ªüi effect ph·∫£i ƒë∆∞·ª£c khai b√°o c·ª• th·ªÉ</strong>. Bao g·ªìm prop, state, function</p>\n<p>ƒê√¥i khi m√† l√†m nh∆∞ v·∫≠y n√≥ ph√°t sinh l·ªói. Th√≠ d·ª• nh∆∞ g·ªçi fetch data li√™n t·ª•c ho·∫∑c socket ƒë∆∞·ª£c t·∫°o kh√¥ng c·∫ßn thi·∫øt. C√°ch gi·∫£i quyets l√† <strong>kh√¥ng x√≥a ch√∫ng kh·ªèi dependency</strong></p>\n<p>Tr∆∞·ªõc khi n√≥i v·ªÅ c√°ch gi·∫£i quy·∫øt, ch√∫ng ta xem v·∫•n ƒë·ªÅ ·ªü ƒë√¢y l√† g√¨ khi so s√°nh Dependency</p>\n<h2 id=\"h·∫≠u-qu·∫£-c·ªßa-vi·ªác-d·ªëi-tr√°\"><a href=\"#h%E1%BA%ADu-qu%E1%BA%A3-c%E1%BB%A7a-vi%E1%BB%87c-d%E1%BB%91i-tr%C3%A1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>H·∫≠u qu·∫£ c·ªßa vi·ªác d·ªëi tr√°</h2>\n<p>N·∫øu m·∫£ng dependency ch·ª©a t·∫•t c·∫£ gi√° tr·ªã s·ª≠ d·ª•ng trong <code class=\"language-inline-text\">useEffect</code>, React bi·∫øt ƒë∆∞·ª£c khi n√†o th√¨ re-run n√≥</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello, \"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"https://overreacted.io/fae247cd068eedbd4b62ba50592d2b3d/deps-compare-correct.gif\" alt=\"Diagram of effects replacing one another\"></p>\n<p>Nh∆∞ng n·∫øu ch√∫ng ta ch·ªâ ƒë·ªãnh <code class=\"language-inline-text\">[]</code>, n√≥ kh√¥ng re-run sau l·∫ßn ƒë·∫ßu ti√™n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello, \"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// thi·∫øu name</span></code></pre></div>\n<p><img src=\"https://overreacted.io/25f75db3f9f57ffe1426912093577445/deps-compare-wrong.gif\" alt=\"Diagram of effects replacing one another\">,</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello, \"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Sai: kh√¥ng ƒë∆∞·ª£c ph√©p b·ªè qua th·∫±ng name</span></code></pre></div>\n<p>R√µ r√†ng l√† 2 th·∫±ng dependency kh√¥ng kh√°c nhau, n√™n n√≥ s·∫Ω kh√¥ng ch·∫°y effect</p>\n<p>Trong t√¨nh hu·ªëng n√†y, v·∫•n ƒë·ªÅ kh√° l√† hi·ªÉn nhi√™n, nh∆∞ng tr·ª±c gi√°c c√≥ th·ªÉ ƒë√°nh l·ª´a b·∫°n trong c√°c t√¨nh hu·ªëng kh√°c, l·∫•y v√≠ d·ª•, ch√∫ng ta mu·ªën gi√° tr·ªã <code class=\"language-inline-text\">counter</code> tƒÉng ƒë·ªÅu sau m·ªói gi√¢y. V·ªõi m·ªôt class, tr·ª±c gi√°c s·∫Ω m√°ch b·∫£o: \"Set up c√°i interval m·ªôt l·∫ßn, r·ªìi d·ª©t t√¨nh v·ª©t √°o m·ªôt l·∫ßn\", ki·ªÉu nh∆∞ <a href=\"https://codesandbox.io/s/n5mjzjy9kl\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">th·∫ø n√†y</a>, khi chuy·ªÉn qua d√πng <code class=\"language-inline-text\">useEffect</code> b·∫°n s·∫Ω nghƒ© ƒë·∫øn d√πng <code class=\"language-inline-text\">[]</code> cho m·∫£ng ph·ª• thu·ªôc \"Tao ch·ªâ mu·ªën t√¨nh m·ªôt ƒë√™m\", ƒë√∫ng kh√¥ng?</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Theo nh∆∞ l·∫≠p lu·∫≠n r·∫•t hay g·∫∑p \"danh s√°ch ph·ª• thu·ªôc cho ph√©p ch√∫ng ta ch·ªâ ƒë·ªãnh vi·ªác re-render effect khi n√†o\", v√† ·ªü ƒë√¢y ta ch·ªâ mu·ªën trigger n√≥ m·ªôt l·∫ßn v√¨ n√≥ l√† interval, <em>nh∆∞ng t·∫°i sao l·∫°i c√≥ v·∫•n ƒë·ªÅ ·ªü ƒë√¢y?</em></p>\n<p>Ch√∫ng ta ƒëang mu·ªën effect n√†y ch·ªâ ch·∫°y l·∫ßn ƒë·∫ßu ti√™n m√† th√¥i, ƒë∆∞a v√†o dependencies l√† <code class=\"language-inline-text\">[]</code> c√≥ v·∫ª h·ª£p l√Ω, React s·∫Ω b·ªè qua h·∫øt nh·ªØng l·∫ßn sau, nh∆∞ng ch√∫ng ta ƒëang l·ª´a d·ªëi React, v√¨ b√™n trong ch√∫ng ta c√≥ s·ª≠ d·ª•ng gi√° tr·ªã <code class=\"language-inline-text\">count</code>, ch√∫ng ta c√≥ gi√° tr·ªã ph·ª• thu·ªôc m√† kh√¥ng khai b√°o. Th·ª±c t·∫ø <code class=\"language-inline-text\">setCount()</code> s·∫Ω g·ªçi li√™n t·ª•c sau 1 gi√¢y, ch·ª© kh√¥ng d·ª´ng l·∫°i sau l·∫ßn g·ªçi ƒë·∫ßu ti√™n.</p>\n<p>·ªû l·∫ßn render ƒë·∫ßu ti√™n, <code class=\"language-inline-text\">count</code> = 0, v√¨ th·∫ø <code class=\"language-inline-text\">setCount(count + 1)</code> ·ªü l·∫ßn render ƒë·∫ßu ti√™n nghƒ©a l√† <code class=\"language-inline-text\">setCount(0+1)</code>, nh∆∞ng v√¨ kh√¥ng re-run effect th√™m l·∫ßn n√†o n·ªØa, ch√∫ng ta c·ª© g·ªçi m√£i <code class=\"language-inline-text\">setCount(0+1)</code> ·ªü nh·ªØng l·∫ßn ti·∫øp theo</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// state = 0</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// l·∫ßn ƒë·∫ßu</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// lu√¥n l√† setCount(1)      }, 1000);</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// kh√¥ng re-run  );</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// state = 1</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">// kh√¥ng bao gi·ªù ch·∫°y    () => {</span>\n      <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Nh·ªØng con bug nh∆∞ th·∫ø n√†y s·∫Ω r·∫•t r·∫•t kh√≥ ƒë·ªÉ m√≤ ra ƒë∆∞·ª£c, v√¨ th·∫ø h√£y lu√¥n th√†nh th·∫≠t v·ªõi React, khai b√°o h·∫øt dependency ƒëang c√≥.</p>\n<p><img src=\"https://overreacted.io/29e53bd0c9b7d2ac70d3cd924886b030/interval-wrong.gif\" alt=\"Diagram of stale interval closure\"></p>\n<h2 id=\"2-c√°ch-ƒë·ªÉ-th√∫-th·∫≠t-v·ªõi-react-v·ªÅ-dependency\"><a href=\"#2-c%C3%A1ch-%C4%91%E1%BB%83-th%C3%BA-th%E1%BA%ADt-v%E1%BB%9Bi-react-v%E1%BB%81-dependency\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>2 c√°ch ƒë·ªÉ th√∫ th·∫≠t v·ªõi React v·ªÅ dependency</h2>\n<p><em>N√™n ch·ªçn c√°ch m·ªôt, c√°ch 2 ch·ªâ √°p d·ª•ng khi c·∫ßn thi·∫øt</em></p>\n<p><strong>C√°ch 1: lu√¥n l√† ng∆∞·ªùi trung th·ª±c, ch√≠nh tr·ª±c ƒë·∫°o ƒë·ª©c h·∫øt m·ª±c, lu√¥n khai b√°o ƒë·∫ßy ƒë·ªß th√¥ng tin b·∫°n trai, b·∫°n g√°i, ba m√°, ch√∫ b√°c n√†o b·∫°n ƒëang ph·ª• thu·ªôc cho c∆° quan thu·∫ø</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">etCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Tuy nhi√™n th·∫ø n√†y, khi gi√° tr·ªã <code class=\"language-inline-text\">count</code> thay ƒë·ªïi, c√°i interval c·ªßa ch√∫ng ta s·∫Ω b·ªã x√≥a v√† ƒë·∫∑t l·∫°i l·∫ßn n·ªØa sau nh·ªØng l·∫ßn render, n√≥ kh√¥ng ph·∫£i l√† c√°i ch√∫ng ta mong mu·ªën n√≥ ho·∫°t ƒë·ªông nh∆∞ v·∫≠y</p>\n<p><img src=\"https://overreacted.io/5734271ddfa94d2d65ac6160515e0069/interval-rightish.gif\" alt=\"Diagram of interval that re-subscribes\"></p>\n<p><strong>C√°ch 2 l√† thay ƒë·ªïi t∆∞ duy, gi·∫£m b·ªõt anh trai nu√¥i, em g√°i nu√¥i kh√¥ng c·∫ßn thi·∫øt</strong></p>\n<p>Ch√∫ng ta kh√¥ng n√≥i x·∫°o, ch√∫ng ta gi·∫£m b·ªõt s·ªë l∆∞·ª£ng nh·ªØng th·ª© ph·ª• thu·ªôc cho vi·ªác re-run effect</p>\n<p>ƒê·ªÉ l√†m ƒë∆∞·ª£c vi·ªác n√†y, ch√∫ng ta ph·∫£i h·ªèi b·∫£n th√¢n: <strong>ch√∫ng ta d√πng count ƒë·ªÉ l√†m g√¨?</strong> C√≥ v·∫ª nh∆∞ ch√∫ng ta ch·ªâ d√πng n√≥ cho vi·ªác g·ªçi h√†m <code class=\"language-inline-text\">setCount</code>, ch√∫ng ta kh√¥ng th·ª±c s·ª± c·∫ßn gi√° tr·ªã <code class=\"language-inline-text\">count</code> n·∫øu ch√∫ng ta bi·∫øt ƒë∆∞·ª£c gi√° tr·ªã tr∆∞·ªõc ƒë√≥, tr∆∞·ªùng h·ª£p tr√™n, ch√∫ng ta c√≥ th·ªÉ kh√¥ng c·∫ßn d√πng ƒë·∫øn gi√° tr·ªã <code class=\"language-inline-text\">count</code> m√† d√πng <em>previous state</em></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span> <span class=\"token operator\">=></span> c <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"https://overreacted.io/f128ad20c28317ed27a3cb68197fc906/interval-right.gif\" alt=\"Diagram of interval that works\"></p>\n<p><a href=\"https://codesandbox.io/s/q3181xz1pj\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ch·∫°y th·ª≠</a></p>\n<h2 id=\"t√≠nh-nƒÉng-update-c·ªßa-google-docs\"><a href=\"#t%C3%ADnh-n%C4%83ng-update-c%E1%BB%A7a-google-docs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T√≠nh nƒÉng update c·ªßa Google Docs</h2>\n<p>Khi n√≥i v·ªÅ effect, ƒë·ªãnh h∆∞·ªõng l·∫≠p tr√¨nh ch√∫ng ta l√† <strong>ƒë·ªìng b·ªô h√≥a</strong>, c√≥ m·ªôt kh√°i ni·ªám kh√° th√∫ v·ªã khi th·ª±c hi·ªán ƒë·ªìng b·ªô h√≥a l√† ch√∫ng ta th∆∞·ªùng kh√¥ng ƒë·ªìng b·ªô to√†n b·ªô n·ªôi dung. L·∫•y v√≠ d·ª• nh∆∞ Google Docs, n√≥ kh√¥ng th·ª±c s·ª± truy·ªÅn t·∫£i <strong>c·∫£ trang</strong> l√™n ph√≠a server, l√†m nh∆∞ v·∫≠y hi·ªáu nƒÉng s·∫Ω r·∫•t t·ªá, c√°i n√≥ l√†m l√† g·ª≠i ƒëi m·ªôt th√¥ng tin ch·ª©a c√°i m√† user ƒëang mu·ªën th·ª±c hi·ªán.</p>\n<p><strong>T·ªët nh·∫•t truy·ªÅn ƒëi th·∫≠t √≠t th√¥ng tin t·ª´ effect (ch·ªâ nh·ªØng th√¥ng tin c·∫ßn thi·∫øt nh·∫•t) v√†o trong component</strong>. H√†m <code class=\"language-inline-text\">setCount(c => c + 1)</code> s·∫Ω g·ª≠i ƒëi √≠t th√¥ng tin h∆°n so v·ªõi h√†m <code class=\"language-inline-text\">setCount(count + 1)</code> ƒë·ª©ng tr√™n m·ªôt kh√≠a c·∫°nh n√†o ƒë√≥ v√¨ n√≥ kh√¥ng ph·ª• thu·ªôc gi√° tr·ªã hi·ªán t·∫°i, <a href=\"https://reactjs.org/docs/thinking-in-react.html#step-3-identify-the-minimal-but-complete-representation-of-ui-state\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">s·ª≠ d·ª•ng √≠t state nh·∫•t c√≥ th·ªÉ</a> ƒë·ªÉ ƒë·∫°t ƒë∆∞·ª£c k·∫øt qu·∫£ l√† m·ªôt trong c√°c nguy√™n l√Ω ch√≠nh c·ªßa ƒë·ª£t c·∫≠p nh·∫≠p React v·ªõi effect</p>\n<p>Tuy nhi√™n kh√¥ng ph·∫£i l√∫c n√†o cu·ªôc s·ªëng c≈©ng ƒë∆°n gi·∫£n v·ªõi b·∫°n nh∆∞ v·∫≠y, n·∫øu ch√∫ng ta mu·ªën t√≠nh to√°n gi√° tr·ªã c·ªßa state m·ªõi d·ª±a tr√™n m·ªôt prop, 2 gi√° tr·ªã state ph·ª• thu·ªôc l·∫´n nhau, <code class=\"language-inline-text\">setState</code> l√† kh√¥ng ƒë·ªß. Ch√∫ng ta c√≥ ng∆∞·ªùi ch·ªã em h√†ng x√≥m t√™n <code class=\"language-inline-text\">useReducer</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> step <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>reducer<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">\"tick\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> state <span class=\"token operator\">+</span> step<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tick\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>dispatch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√°ch d√πng <code class=\"language-inline-text\">useReducer</code> nh∆∞ v·∫≠y l√† m·ªôt d·∫°ng <strong>cheat mode</strong> c·ªßa hook, cho ph√©p ch√∫ng ta b·ªè qua c√°c dependency <em>ng·∫ßm</em> kh·ªèi effect, v√† ch·∫∑n re-run kh√¥ng kh√¥ng c·∫ßn thi·∫øt</p>\n<p><a href=\"https://codesandbox.io/s/7ypm405o8q\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ch·∫°y th·ª≠</a></p>\n<p>B√†i vi·∫øt n√†y v·∫´n c√≤n, v√† n·∫øu b·∫°n v·∫´n c√≤n mu·ªën ƒë√†o s√¢u h∆°n n·ªØa, c√≥ th·ªÉ t√¨m ƒë·ªçc b√†i vi·∫øt g·ªëc c·ªßa Dan</p>\n<p><a href=\"https://overreacted.io/a-complete-guide-to-useeffect/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">A Complete Guide to useEffect</a></p>\n","cover_image":""}},{"node":{"id":"c1f11ca1c9a0c32bafe6c1af3ebe4aad","title":"V·∫•n ƒë·ªÅ c·ªßa React Context tr√™n c√°c x·ª≠ l√Ω async","path":"/2020-03-16-van-de-cua-react-context-tren-async/","date":"2020-03-16","timeToRead":7,"desc":"React Context c√≥ ph·∫£i l√† vi√™n ƒë·∫°n b·∫°c s·∫Ω gi·∫£i quy·∫øt m·ªçi v·∫•n ƒë·ªÅ thay cho Redux hay kh√¥ng?","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#ch%C3%BAng-ta-b%E1%BA%AFt-%C4%91%E1%BA%A7u-v%E1%BB%9Bi-m%E1%BB%99t-component-duy-nh%E1%BA%A5t\">Ch√∫ng ta b·∫Øt ƒë·∫ßu v·ªõi m·ªôt component duy nh·∫•t</a></li>\n<li><a href=\"#l%E1%BA%A5y-d%E1%BB%AF-li%E1%BB%87u-sau-khi-c%C3%B3-t%C6%B0%C6%A1ng-t%C3%A1c\">L·∫•y d·ªØ li·ªáu sau khi c√≥ t∆∞∆°ng t√°c</a></li>\n<li><a href=\"#%C4%91%C3%A2u-l%C3%A0-gi%E1%BA%A3i-ph%C3%A1p\">ƒê√¢u l√† gi·∫£i ph√°p</a></li>\n</ul>\n<!-- /TOC -->\n<p>ƒê·ªÉ chia s·∫ª <code class=\"language-inline-text\">state</code> gi·ªØa c√°c component, React cung c·∫•p API Context, <em>v·ªõi l·ªùi h·ª©a ngon ng·ªçt</em> m√† b·∫°n c√≥ th·ªÉ d·ªÖ d√†ng ƒë·ªçc ƒë∆∞·ª£c tr√™n m·∫°ng \"c√≥ th·ªÉ thay th·∫ø redux\". T·ª´ kinh nghi·ªám th·ª±c t·∫ø c·ªßa team Atlassian c≈©ng nh∆∞ c·ªßa b·∫£n th√¢n m√¨nh (l√† tui luckyluu), s·ª≠ d·ª•ng n√≥ tr√™n c√°c module l·ªõn, ho·∫∑c tr√™n to√†n b·ªô App (g·ªëc tr√™n c√πng c·ªßa c√¢y React) l√† m·ªôt c∆°n <strong>√°c m·ªông</strong> tr∆∞·ªùng k·ª≥.</p>\n<h2 id=\"ch√∫ng-ta-b·∫Øt-ƒë·∫ßu-v·ªõi-m·ªôt-component-duy-nh·∫•t\"><a href=\"#ch%C3%BAng-ta-b%E1%BA%AFt-%C4%91%E1%BA%A7u-v%E1%BB%9Bi-m%E1%BB%99t-component-duy-nh%E1%BA%A5t\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ch√∫ng ta b·∫Øt ƒë·∫ßu v·ªõi m·ªôt component duy nh·∫•t</h2>\n<p>L·∫•y v√≠ d·ª•, ch√∫ng t·∫°o ra m·ªôt component Dropdown hi·ªÉn th·ªã danh s√°ch categories</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CategoriesQuery</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function-variable function\">fetch</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/categories'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> error<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">children</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// s·ª≠ d·ª•ng</span>\n<span class=\"token keyword\">const</span> CategoriesDropdown <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CategoriesQuery</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    ({ data, loading, error }) => </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dropdown</span></span> <span class=\"token attr-name\">...</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CategoriesQuery</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Kh√° s·∫°ch ƒë·∫πp, ƒë√∫ng kh√¥ng? L√∫c component ƒë∆∞·ª£c <em>mount</em> v√†o DOM ch√∫ng ta <em>fetch</em> d·ªØ li·ªáu, ƒë·∫∑t gi√° tr·ªã cho state loading.</p>\n<p>T√¨nh hu·ªëng hay g·∫∑p l√† ch√∫ng ta c√≥ nhu c·∫ßu s·ª≠ d·ª•ng danh s√°ch categories n√†y tr√™n m·ªôt component n√†o ƒë√≥ kh√°c. Vi·ªác c·ª© ph·∫£i <em>wrap</em> component l·∫°i d·∫°ng cha con, r·ªìi truy·ªÅn danh s√°ch categories th√¥ng qua <code class=\"language-inline-text\">props</code> kh√¥ng ph·∫£i l√† <em>l·ª±a ch·ªçn kh√¥n ngoan</em>, ch√∫ng ta c·∫ßn l∆∞u n√≥ ·ªü m·ªôt n∆°i t·∫≠p trung (store) v√† truy xu·∫•t ·ªü b·∫•t k·ª≥ ƒë√¢u, ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng <code class=\"language-inline-text\">createContext</code>. Vi·ªác chuy·ªÉn qua d√πng <code class=\"language-inline-text\">createContext</code> d·ªÖ nh∆∞ ƒÉn b√∫n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> Provider<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">Consumer</span><span class=\"token operator\">:</span> CategoriesConsumer <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CategoriesProvider</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function-variable function\">fetch</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/categories'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> error<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// s·ª≠ d·ª•ng</span>\n<span class=\"token keyword\">const</span> CategoriesDropdown <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CategoriesConsumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    ({ data, loading, error }) => </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dropdown</span></span> <span class=\"token attr-name\">...</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CategoriesConsumer</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Ch√∫ng ta <strong>\"ch·ªâ\"</strong> c√≤n l·∫°i 2 v·∫•n ƒë·ªÅ: ƒë·∫∑t <code class=\"language-inline-text\">&lt;CategoriesProvider/></code> ·ªü ƒë√¢u v√† chuy·ªán g√¨ s·∫Ω x·∫£y ra n·∫øu Provider v√¨ l√Ω do n√†o ƒë√≥ kh√¥ng th·ªÉ l√† <em>cha ch√∫</em> c·ªßa m·ªôt component consumer?</p>\n<p>X·ª≠ l√Ω c√°c v·∫•n ƒë·ªÅ ph·ª©c t·∫°p xung quanh vi·ªác vi·∫øt context th·∫ø n√†o cho h·ª£p l√Ω, fallback ra l√†m sao s·∫Ω c·∫ßn ƒë·∫øn m·ªôt b√†i vi·∫øt d√†i d√≤ng kh·∫Øc, gi·ªù c·ª© t∆∞·ªüng t∆∞·ª£ng b·∫°n lu√¥n c·∫ßn Provider render \"·ªü ƒë√¢u ƒë√≥\" (nhi·ªÅu khi l√† c√πng v·ªõi c·∫£ t√° provider kh√°c n·ªØa khi b·∫°n c·ª© wrap th·∫±ng n√†y trong th·∫±ng kia li√™n t·ª•c).</p>\n<h2 id=\"l·∫•y-d·ªØ-li·ªáu-sau-khi-c√≥-t∆∞∆°ng-t√°c\"><a href=\"#l%E1%BA%A5y-d%E1%BB%AF-li%E1%BB%87u-sau-khi-c%C3%B3-t%C6%B0%C6%A1ng-t%C3%A1c\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>L·∫•y d·ªØ li·ªáu sau khi c√≥ t∆∞∆°ng t√°c</h2>\n<p>ƒêo·∫°n code fetch d·ªØ li·ªáu l√∫c mount component ·ªü tr√™n tr√¥ng r·∫•t h·ª£p l√Ω, nh∆∞ng s·∫Ω c√≥ t√¨nh hu·ªëng b·∫°n c·∫ßn trigger <code class=\"language-inline-text\">fetch</code> kh√¥ng ph·∫£i l√∫c mount.</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Node A\n    - Node B\n        - Node C</code></pre></div>\n<p>N·∫øu ƒë·∫∑t t√¨nh hu·ªëng b·∫°n fetch d·ªØ li·ªáu categories ·ªü <code class=\"language-inline-text\">&lt;Node A /></code>, ƒë∆∞·ª£c <code class=\"language-inline-text\">&lt;Node C/></code> hi·ªÉn th·ªã, nh∆∞ng user l√∫c s·ª≠ d·ª•ng ƒë√¥i khi ch·∫£ bao gi·ªù th·∫•y ƒë·∫øn <code class=\"language-inline-text\">&lt;Node C/></code>, h·ªç c√≥ th·ªÉ d·ª´ng l·∫°i ·ªü m√†n h√¨nh <code class=\"language-inline-text\">&lt;Node A /></code>, vi·ªác b·∫Øt tr√¨nh duy·ªát ƒëi l·∫•y d·ªØ li·ªáu qu√° s·ªõm <em>kh√¥ng ph·∫£i l√† m·ªôt chuy·ªán n√™n l√†m</em>. Do ƒë√≥ ch√∫ng ta s·∫Ω c√≥ nhu c·∫ßu tr·∫£ v·ªÅ h√†m l·∫•y d·ªØ li·ªáu tr·ª±c ti·∫øp xu·ªëng <code class=\"language-inline-text\">context</code>:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">fetch</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fetch <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>ƒê·ª™NG BAO GI·ªú L√ÄM NH∆Ø V·∫¨Y</strong>. B·∫°n c√≥ th·∫•y ƒë∆∞·ª£c con bug <strong>\"ng·∫ßm\"</strong> trong c√°ch vi·∫øt tr√™n kh√¥ng? M·ªói l·∫ßn <code class=\"language-inline-text\">CategoriesProvider</code> re-render, ch√∫ng ta truy·ªÅn xu·ªëng m·ªôt gi√° tr·ªã ho√†n to√†n m·ªõi cho <code class=\"language-inline-text\">value</code> - <em>m·ªôt object ƒë∆∞·ª£c kh·ªüi t·∫°o m·ªõi tinh</em>. T·∫°o ra m·ªôt object r·ªìi truy·ªÅn xu·ªëng th√†nh <code class=\"language-inline-text\">props</code> l√† <strong>l·ªói cƒÉn b·∫£n</strong> c·∫ßn tr√°nh, tuy nhi√™n khi d√πng cho Context Provider n√≥ ƒë·∫∑c bi·ªát tr·∫ßm tr·ªçng. Khi ƒë·ªÉ √Ω th·∫•y l·ªói n√†y, ch√∫ng t√¥i ƒë√£ theo s·ª± ch·ªâ d·∫´n t·ª´ t√†i li·ªáu c·ªßa <a href=\"https://reactjs.org/docs/context.html#caveats\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Context guidelines</a>, l∆∞u ph∆∞∆°ng th·ª©c ƒë√≥ v√†o state</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CategoriesProvider</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">fetch</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fetch\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Sau ƒë√≥ trong component consumer, ch√∫ng ta s·∫Ω fetch d·ªØ li·ªáu categories khi th·∫±ng component consumer th·ª±c s·ª± render</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">CategoriesQuery</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>CategoriesContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>context<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>context<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">children</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Xong! <strong>Ch∆∞a th·∫≠t s·ª± xong ƒë√¢u</strong>, khi th√™m <code class=\"language-inline-text\">&lt;CategoriesQuery/></code> ·ªü 2 n∆°i kh√°c nhau tr√™n c√¢y, n·∫øu 2 component ƒë∆∞·ª£c mount c√πng m·ªôt l√∫c, <code class=\"language-inline-text\">fetch</code> s·∫Ω ch·∫°y <strong>2 l·∫ßn</strong>.</p>\n<p><em>Bug nh·ªè th√¥i m√† ƒë√∫ng kh√¥ng?</em> Ch√∫ng ta kh√¥ng ki·ªÉm tra state <code class=\"language-inline-text\">loading</code> tr∆∞·ªõc khi g·ªçi <code class=\"language-inline-text\">fetch</code>. S·ª≠a nhanh trong Provider:</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// class CategoriesProvider...</span>\n<span class=\"token function-variable function\">fetch</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>loading<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Th·ª≠ refresh l·∫°i trang, v·ªõi 2 <code class=\"language-inline-text\">CategoriesQuery</code> mount v√†... <strong>B√ôM</strong> V·∫´n l√† 2 request network. Ki·ªÉm tra l·∫°i l·∫ßn n·ªØa n√†o, c√≥ g√¨ ƒë√≥ l·ªói r·ªìi, kh√¥ng l·ªói n·ªØa, l·∫°i l·ªói n·ªØa, ....</p>\n<p>....</p>\n<p>l·∫°i l·ªói\n....</p>\n<p>c√≤n l·ªói\n....</p>\n<p>ch∆∞a h·∫øt l·ªói\n....</p>\n<p>R·ªìi b·ªóng d∆∞ng ch√∫ng ta nh·∫≠n ra React <code class=\"language-inline-text\">setState</code> l√† m·ªôt <code class=\"language-inline-text\">async</code>. C√≥ nghƒ©a l√† vi·ªác gi√° tr·ªã <code class=\"language-inline-text\">loading</code> v·∫´n l√† <code class=\"language-inline-text\">false</code> trong c·∫£ 2 l·∫ßn g·ªçi th·∫≠m ch√≠ <code class=\"language-inline-text\">setState</code> ƒë√£ ƒë∆∞·ª£c g·ªçi m·ªôt l·∫ßn. \"Shitty React\" (React nh∆∞ c*t)</p>\n<p>B·∫Øt ƒë·∫ßu t√¨m ki·∫øm m·ªôt c√°ch l√†m \"less shitty\" (b·ªõt nh·∫£m shit) v·ªõi chuy·ªán <code class=\"language-inline-text\">setState</code> async trong Context Provider (c√≥ 4 nƒÉm c√°ch l√†m t√πy theo ƒë·ªô <em>s√°ng t·∫°o</em>), nh∆∞ng c√≥ th·ªÉ ƒë·∫£m b·∫£o r·∫±ng kh√¥ng c√≥ c√°ch n√†o <em>th·∫≠p to√†n th·∫≠p m·ªπ</em>. Lu√¥n c·∫£m th·∫•y ch√∫ng ta ƒëang <strong>ch·ªëng l·∫°i c√°ch l√†m ch√≠nh quy t·ª´ React</strong>.</p>\n<h2 id=\"ƒë√¢u-l√†-gi·∫£i-ph√°p\"><a href=\"#%C4%91%C3%A2u-l%C3%A0-gi%E1%BA%A3i-ph%C3%A1p\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒê√¢u l√† gi·∫£i ph√°p</h2>\n<p>Context API c√≥ r·∫•t nhi·ªÅu ƒëi·ªÉm c·ªông ngay c·∫£ khi so s√°nh v·ªõi Redux, c√°i ch√∫ng ta c·∫ßn l√† m·ªôt c√°ch v·∫πn to√†n c·∫£ cho c·∫£ 2.</p>\n<p>M√¨nh c≈©ng g·∫∑p v·∫•n ƒë·ªÅ y chang nh∆∞ v·∫≠y v·ªõi ·ª©ng d·ª•ng ƒëang l√†m. T√¨m ki·∫øm v√† cu·ªëi c√πng ch·ªët h·∫° d√πng <a href=\"https://atlassian.github.io/react-sweet-state/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react-sweet-state</a> cho c·∫£ team</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createStore<span class=\"token punctuation\">,</span> createHook <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-sweet-state\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// gi√° tr·ªã kh·ªüi t·∫°o</span>\n<span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// define the actions that mutate the state</span>\n<span class=\"token keyword\">const</span> actions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">fetch</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> getState<span class=\"token punctuation\">,</span> setState <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>loading<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/categories\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> error<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// t·∫°o store</span>\n<span class=\"token keyword\">const</span> CategoriesStore <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> initialState<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// t·∫°o components ƒë·ªÉ truy c·∫≠p d·ªØ li·ªáu t·ª´ store</span>\n<span class=\"token keyword\">const</span> useCategories <span class=\"token operator\">=</span> <span class=\"token function\">createHook</span><span class=\"token punctuation\">(</span>CategoriesStore<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// s·ª≠ d·ª•ng</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">CategoriesQuery</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useCategories</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>state<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span> actions<span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">children</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>C√≥ nhi·ªÅu ƒëi·ªÉm c·ªông cho <a href=\"https://atlassian.github.io/react-sweet-state/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react-sweet-state</a> nh∆∞ n√≥ v·∫´n d√πng Context API, nh∆∞ng an to√†n h∆°n, c√°c action s·∫Ω d·ªÖ test h∆°n, l√†m vi·ªác ƒë∆∞·ª£c v·ªõi Redux DevTools, ƒë√£ x·ª≠ l√Ω nh·ªØng l·ªói v·∫´n hay g·∫∑p v·ªõi React Context. V√† nhi·ªÅu ƒëi·ªÅu hay ho kh√°c n·ªØa. C√°c b·∫°n nh·ªõ like cho repo n√†y tr√™n github.</p>\n<p>M·ªôt s·ªë d·∫´n ch·ª©ng kh√°c ƒë·ªÉ b·∫°n tham kh·∫£o</p>\n<ul>\n<li><a href=\"https://twitter.com/dan_abramov/status/1109595839347990528\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Context <strong>Kh√¥ng ƒë∆∞·ª£c thi·∫øt k·∫ø cho d·ªØ li·ªáu th∆∞·ªùng xuy√™n c·∫≠p nh·∫≠p</strong></a></li>\n<li><a href=\"https://github.com/facebook/react/issues/13739\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>H·∫°n ch·∫ø hi·ªáu nƒÉng</strong> c·ªßa React Context</a></li>\n<li><a href=\"https://github.com/facebook/react/issues/14110\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Context <strong>Kh√¥ng h·ªó tr·ª£ selector</strong></a></li>\n<li><a href=\"https://github.com/facebook/react/issues/15156\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Context <strong>Kh√¥ng th·ªÉ ngƒÉn ch·∫∑n vi·ªác re-render</strong></a></li>\n</ul>\n<p><a href=\"https://medium.com/@albertogasparin/the-pitfalls-of-async-operations-via-react-context-api-ab987d4290e6\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">The pitfalls of async operations via React Context API</a></p>\n","cover_image":""}},{"node":{"id":"67335fb1f2a382145c69b99fe4e01d34","title":"S·ª≠ d·ª•ng React Context nh∆∞ th·∫ø n√†o cho hi·ªáu qu·∫£","path":"/2020-03-08-huong-dan-su-dung-react-context-nhu-the-nao-cho-hieu-qua/","date":"2020-03-08","timeToRead":10,"desc":"ƒê·ªÉ c√≥ th·ªÉ qu·∫£n l√Ω ƒë∆∞·ª£c state c·ªßa ·ª©ng d·ª•ng m·ªôt c√°ch t·ªët nh·∫•t, ch√∫ng ta c·∫ßn s·ª± ph√¢n chia ph√π h·ª£p gi·ªØa local state (internal state c·ªßa component) v√† state c·ª≠a ·ª©ng d·ª•ng ƒë·∫∑t trong React Context. M·ªôt v√†i ƒëi·ªÅu mu·ªën chia s·∫Ω ƒë·ªÉ n√¢ng cao kh·∫£ nƒÉng b·∫£o tr√¨ v√† tr·∫£i nghi·ªám n·∫øu s·ª≠ d·ª•ng ƒë·∫øn context trong React.","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#provider-component\">Provider Component</a></li>\n<li><a href=\"#consumer-hook\">Consumer Hook</a></li>\n<li><a href=\"#typescript--flow\">TypeScript / Flow</a></li>\n<li><a href=\"#v%E1%BA%ADy-c%C3%B2n-dispatch-type\">V·∫≠y c√≤n dispatch <code class=\"language-inline-text\">type</code>?</a></li>\n<li><a href=\"#v%E1%BA%ADy-c%C3%B2n-c%C3%A1c-async-action-th%C3%AC-sao-\">V·∫≠y c√≤n c√°c async action th√¨ sao ?</a></li>\n<li><a href=\"#c%E1%BA%A3m-th%E1%BA%A5y-t%C3%A1ch-state-v%C3%A0-dispatch-r%E1%BA%A5t-kh%C3%B3-ch%E1%BB%8Bu\">C·∫£m th·∫•y t√°ch state v√† dispatch r·∫•t kh√≥ ch·ªãu</a></li>\n<li><a href=\"#to%C3%A0n-b%E1%BB%99-source-code\">To√†n b·ªô source code</a></li>\n</ul>\n<!-- /TOC -->\n<p>Ch√∫ng ta c√≥ m·ªôt <em>module</em> (m·ªôt nh√°nh tr√™n c√¢y react component cho d·ªÉ h√¨nh dung) mu·ªën s·ª≠ d·ª•ng Context l√† <code class=\"language-inline-text\">count</code>, ch√∫ng ta t·∫°o file <code class=\"language-inline-text\">count-context.js</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/count-context.js</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> CountStateContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> CountDispatchContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ƒêi·ªÅu mu·ªën n√≥i ƒë·∫ßu ti√™n l√† ch√∫ng ta c·ªë t√¨nh <strong>kh√¥ng khai b√°o gi√° tr·ªã kh·ªüi t·∫°o</strong> cho <code class=\"language-inline-text\">CountStateContext</code>, n·∫øu mu·ªën b·∫°n c√≥ th·ªÉ g·ªçi <code class=\"language-inline-text\">React.createContext({count: 0})</code>. Khai b√°o m·ªôt <code class=\"language-inline-text\">defaultValue</code> ch·ªâ h·ªØu d·ª•ng trong tr∆∞·ªùng h·ª£p nh∆∞ b√™n d∆∞·ªõi</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">CountDisplay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> count <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>CountStateContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>V√¨ kh√¥ng khai b√°o gi√° tr·ªã kh·ªüi t·∫°o, ch√∫ng ta s·∫Ω nh·∫≠n l·ªói khi vi·∫øt destructure gi√° tr·ªã tr·∫£ v·ªÅ t·ª´ <code class=\"language-inline-text\">useContext</code>. V√¨ gi√° tr·ªã m·∫∑c ƒë·ªãnh l√† <code class=\"language-inline-text\">undefined</code> v√† ch√∫ng ta kh√¥ng th·ªÉ destructure <code class=\"language-inline-text\">undefined</code></p>\n<p>Kh√¥ng ai trong ch√∫ng ta mu·ªën nh·∫≠n l·ªói do kh√¥ng c√≥ gi√° tr·ªã kh·ªüi t·∫°o. Tuy nhi√™n, n·∫øu ch·ªâ s·ª≠ d·ª•ng gi√° tr·ªã m·∫∑c ƒë·ªãnh ƒë∆∞·ª£c cung c·∫•p, l·ª£i √≠ch s·∫Ω kh√¥ng nhi·ªÅu b·∫±ng vi·ªác linh ƒë·ªông gi√° tr·ªã n√†y. Kinh nghi·ªám th·ª±c t·∫ø cho th·∫•y khi kh·ªüi t·∫°o v√† s·ª≠ d·ª•ng context trong ·ª©ng d·ª•ng, ch√∫ng ta mu·ªën c√°c consumer context (component s·ª≠ d·ª•ng <code class=\"language-inline-text\">useContext</code>) c√≥ th·ªÉ cung c·∫•p th√™m c√°c gi√° tr·ªã m·ªõi.</p>\n<p><em>Trong t√†i li·ªáu ch√≠nh th·ª©c c·ªßa React c√≥ ƒë·ªÅ c·∫≠p, \"cung c·∫•p gi√° tr·ªã m·∫∑c ƒë·ªãnh c√≥ th·∫ø gi√∫p vi·ªác test component ƒë·ªôc l·∫≠p m√† kh√¥ng c·∫ßn b·ªôc ch√∫ng l·∫°i (component l·ªìng v√†o nhau)\". Kh√¥ng c√πng quan ƒëi·ªÉm v·ªõi √Ω ki·∫øn n√†y, c√° nh√¢n t√°c gi·∫£ (Kent C. Dodds) cho r·∫±ng t·ªët h∆°n n√™n b·ªôc component v·ªõi c√°c context c·∫ßn thi·∫øt khi test. H√£y nh·ªõ l√† m·ªói l·∫ßn ch√∫ng ta l√†m g√¨ ƒë√≥ b√™n trong test, ch√∫ng ta kh√¥ng l√†m nh·ªØng vi·ªác nh∆∞ v·∫≠y trong ·ª©ng d·ª•ng, ch√∫ng ta gi·∫£m b·ªõt s·ª± t·ª± tin m√† unit test mang l·∫°i.</em></p>\n<blockquote>\n<p>L∆∞u √Ω: n·∫øu ƒëang s·ª≠ d·ª•ng Flow hay TypeScript, kh√¥ng cung c·∫•p gi√° tr·ªã m·∫∑c ƒë·ªãnh s·∫Ω b·ªã nh·∫≠n ngay th·∫ª \"c·∫£nh c√°o\", r·∫•t phi·ªÅn to√°i n·∫øu s·ª≠ d·ª•ng <code class=\"language-inline-text\">React.useContext</code>. ƒê·ªçc ti·∫øp ph·∫ßn d∆∞·ªõi s·∫Ω ch·ªâ c√°ch kh·∫Øc ph·ª•c</p>\n</blockquote>\n<p>M·ª•c ƒë√≠ch c·ªßa <code class=\"language-inline-text\">CountDispatchContext</code> l√† ƒë·ªÉ l√†m g√¨. M√¨nh ƒë√£ s·ª≠ d·ª•ng context trong m·ªôt th·ªùi gian, v√† n√≥i chuy·ªán v·ªõi m·ªôt s·ªë ng∆∞·ªùi ƒëang l√†m vi·ªác v·ªõi n√≥, c√≥ th·ªÉ chia s·∫ª v·ªõi b·∫°n l√† ƒë√¢y l√† <strong>c√°ch ƒë∆°n gi·∫£n nh·∫•t</strong> ƒë·ªÉ tr√°nh c√°c r·∫Øc r·ªëi v·ªõi context (ƒë·∫∑c bi·ªát khi b·∫°n b·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng <code class=\"language-inline-text\">dispatch</code> trong effect) khi b·∫°n b·∫Øt ƒë·∫ßu t√°ch state v√† dispatch trong context. <strong>H√£y tin m√¨nh!</strong></p>\n<h2 id=\"provider-component\"><a href=\"#provider-component\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Provider Component</h2>\n<p>ƒê·ªÉ c√°c component b√™n d∆∞·ªõi c√≥ th·ªÉ s·ª≠ d·ª•ng context module, ch√∫ng ta ph·∫£i <em>b·ªôc</em> c√°c component l·∫°i v·ªÅ trong c√πng m·ªôt context, s·ª≠ d·ª•ng v·ªõi Provider Component, c√°i n√†y th√¨ ai c≈©ng bi·∫øt</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountDisplay</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Counter</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountProvider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-inline-text\">CountProvider</code> ƒë∆∞·ª£c ƒë∆∞a ra ƒë·ªÉ x√†i nh∆∞ th·∫ø n√†o cho hi·ªáu qu·∫£ th√¨ l·∫°i √≠ch ai quan t√¢m, ƒë√¢y l√† c√°ch m√† <code class=\"language-inline-text\">CountProvider</code> ƒë∆∞·ª£c ƒë∆∞a ra cho th·∫ø gi·ªõi</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/count-context.js</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> CountStateContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> CountDispatchContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">countReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"increment\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"decrement\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Unhandled action type: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>action<span class=\"token punctuation\">.</span>type<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">CountProvider</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>countReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountStateContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountDispatchContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>dispatch<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountDispatchContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountStateContext.Provider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> CountProvider <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"consumer-hook\"><a href=\"#consumer-hook\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Consumer Hook</h2>\n<p>C√°c th∆∞ vi·ªán s·ª≠ d·ª•ng context t√¨m th·∫•y tr√™n m·∫°ng ƒëa ph·∫ßn s·∫Ω d√πng c√°ch n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> SomethingContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"some-context-package\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">YourComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> something <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>SomethingContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ªÉ n√¢ng cao tr·∫£i nghi·ªám khi ch√∫ng ta s·ª≠ d·ª•ng, c√¢u l·ªánh n√†y <code class=\"language-inline-text\">React.useContext(SomethingContext)</code> c·∫ßn ph·∫£i thay th·∫ø. N·∫øu c√≥ th·ªÉ vi·∫øt nh∆∞ th·∫ø n√†y, s·∫Ω tuy·ªát v·ªùi h∆°n r·∫•t nhi·ªÅu</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useSomething <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"some-context-package\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">YourComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> something <span class=\"token operator\">=</span> <span class=\"token function\">useSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ªÉ c√≥ th·ªÉ d√πng <code class=\"language-inline-text\">useSomething()</code> nh∆∞ b√™n tr√™n, ch√∫ng ta s·∫Ω c·∫ßn vi·∫øt l·∫°i context nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/count-context.js</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> CountStateContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> CountDispatchContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">countReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"increment\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"decrement\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Unhandled action type: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>action<span class=\"token punctuation\">.</span>type<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">CountProvider</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>countReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountStateContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountDispatchContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>dispatch<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountDispatchContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountStateContext.Provider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">useCountState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>CountStateContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>context <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"useCountState must be used within a CountProvider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> context<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">useCountDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>CountDispatchContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>context <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"useCountDispatch must be used within a CountProvider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> context<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> CountProvider<span class=\"token punctuation\">,</span> useCountState<span class=\"token punctuation\">,</span> useCountDispatch <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ch√∫ng ta t·∫°o <code class=\"language-inline-text\">useCountState</code> v√† <code class=\"language-inline-text\">useCountDispatch</code> hook s·ª≠ d·ª•ng <code class=\"language-inline-text\">React.useContext</code> ƒë·ªÉ l·∫•y ƒë∆∞·ª£c gi√° tr·ªã context cung c·∫•p t·ª´ <code class=\"language-inline-text\">CountProvider</code>. Tuy nhi√™n, n·∫øu kh√¥ng c√≥ gi√° tr·ªã, ch√∫ng ta hi·ªÉn th·ªã th√¥ng b√°o l·ªói ƒë·ªÉ b√°o hook ch·ªâ ƒë∆∞·ª£c s·ª≠ d·ª•ng trong function component ƒë∆∞·ª£c render b√™n trong <code class=\"language-inline-text\">CountProvider</code>. L·ªói n√†y r·∫•t hay qu√™n, n√™n nh·∫Øc tr∆∞·ªõc cho t·ªët.</p>\n<p>N·∫øu c·∫ßn s·ª≠ d·ª•ng v·ªõi React &#x3C; 16.8.0, ch√∫ng ta d√πng render-prop v·ªõi Consumer Component nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">CountConsumer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountStateContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span><span class=\"token parameter\">context</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>context <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"CountConsumer must be used within a CountProvider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">children</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountStateContext.Consumer</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>N·∫øu b·∫°n ƒë√£ d√πng React c≈©, ho·∫∑c l√† n√¢ng c·∫•p m·ªõi nh·∫•t, ho·∫∑c gi·ªØ nguy√™n t√¨nh tr·∫°ng hi·ªán t·∫°i cho an to√†n?</strong></p>\n<h2 id=\"typescript--flow\"><a href=\"#typescript--flow\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>TypeScript / Flow</h2>\n<p>Nh∆∞ ƒë√£ h·ª©a ·ªü tr√™n, v·ªõi v·∫•n ƒë·ªÅ <code class=\"language-inline-text\">defaultValue</code> khi s·ª≠ d·ª•ng TypeScript v√† Flow. Gi·∫£i quy·∫øt nh∆∞ sau</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// src/count-context.tsx</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Action</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>type<span class=\"token operator\">:</span> <span class=\"token string\">'increment'</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">{</span>type<span class=\"token operator\">:</span> <span class=\"token string\">'decrement'</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Dispatch</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>action<span class=\"token operator\">:</span> Action<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">State</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>count<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">CountProviderProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>children<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>ReactNode<span class=\"token punctuation\">}</span>\n\n<span class=\"gridsome-highlight-code-line\"><span class=\"token keyword\">const</span> CountStateContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">createContext</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>State<span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span></span><span class=\"gridsome-highlight-code-line\"><span class=\"token keyword\">const</span> CountDispatchContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>Dispatch <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span></span><span class=\"gridsome-highlight-code-line\"><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span></span><span class=\"gridsome-highlight-code-line\"><span class=\"token punctuation\">)</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">countReducer</span><span class=\"token punctuation\">(</span>state<span class=\"token operator\">:</span> State<span class=\"token punctuation\">,</span> action<span class=\"token operator\">:</span> Action<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'increment'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>count<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'decrement'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>count<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Unhandled action type: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>action<span class=\"token punctuation\">.</span><span class=\"token keyword\">type</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">CountProvider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> CountProviderProps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>countReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>count<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountStateContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountDispatchContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>dispatch<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountDispatchContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountStateContext.Provider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gridsome-highlight-code-line\"><span class=\"token keyword\">function</span> <span class=\"token function\">useCountState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>CountStateContext<span class=\"token punctuation\">)</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>context <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'useCountState must be used within a CountProvider'</span><span class=\"token punctuation\">)</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>  <span class=\"token keyword\">return</span> context\n<span class=\"token punctuation\">}</span>\n\n<span class=\"gridsome-highlight-code-line\"><span class=\"token keyword\">function</span> <span class=\"token function\">useCountDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>CountDispatchContext<span class=\"token punctuation\">)</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>context <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'useCountDispatch must be used within a CountProvider'</span><span class=\"token punctuation\">)</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>  <span class=\"token keyword\">return</span> context\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span>CountProvider<span class=\"token punctuation\">,</span> useCountState<span class=\"token punctuation\">,</span> useCountDispatch<span class=\"token punctuation\">}</span></code></pre></div>\n<p>V·ªõi c√°ch vi·∫øt n√†y, ai c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng <code class=\"language-inline-text\">useCountState</code> ho·∫∑c <code class=\"language-inline-text\">useCountDispatch</code> m√† kh√¥ng c·∫ßn ki·ªÉm tra <code class=\"language-inline-text\">undefined</code></p>\n<p><a href=\"https://codesandbox.io/s/bitter-night-i5mhj\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Xem CodeSandbox</a></p>\n<h2 id=\"v·∫≠y-c√≤n-dispatch-type\"><a href=\"#v%E1%BA%ADy-c%C3%B2n-dispatch-type\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V·∫≠y c√≤n dispatch <code class=\"language-inline-text\">type</code>?</h2>\n<p>N·∫øu b·∫°n t·ª´ng vi·∫øt Redux, s·∫Ω th·∫Øc m·∫Øc \"v·∫≠y action creator ƒë√¢u?\". N·∫øu <em>th√≠ch</em> b·∫°n c√≥ th·ªÉ t·ª± vi·∫øt n·∫øu mu·ªën. Nh∆∞ng m√¨nh kh√¥ng ph·∫£i l√† <em>fan</em> c·ªßa action creator (c√¥ th∆∞ k√Ω xinh ƒë·∫πp trong <a href=\"https://luubinhan.github.io/blog/2019-05-28-giai-thich-pattern-flux-trong-react/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">b√†i gi·∫£i th√≠ch v·ªÅ Flux Pattern c·ªßa m√¨nh</a>. M√¨nh lu√¥n c·∫£m th·∫•y em n√†y kh√° d∆∞ th·ª´a, kh√¥ng c·∫ßn thi·∫øt ph·∫£i ph·ª©c t·∫°p th√™m m·ªôt t·ªï ch·ª©c ƒë√£ qu√° ph·ª©c t·∫°p nh∆∞ Flux (<strong>ho√†n h·∫£o kh√¥ng ph·∫£i l√† kh√¥ng c√≤n g√¨ ƒë·ªÉ th√™m n·ªØa m√† l√† ko c√≤n g√¨ c√≥ th·ªÉ b·ªè ƒëi m√†</strong>). N·∫øu s·ª≠ d·ª•ng TypeScript ho·∫∑c Flow, n√≥ s·∫Ω gi√∫p ch√∫ng ta t·ª± ƒëi·ªÅn action type c√≥ th·ªÉ ƒëi·ªÅn</p>\n<p><img src=\"https://kentcdodds.com/static/d99d4329b1d7ebd2e63bf76471f540ab/e3189/auto-complete.png\" alt=\"S·ª≠ d·ª•ng React Context nh∆∞ th·∫ø n√†o cho hi·ªáu qu·∫£\"></p>\n<p><img src=\"https://kentcdodds.com/static/0d45ecb53470729181863636bdafc2b9/e3189/type-error.png\" alt=\"S·ª≠ d·ª•ng React Context nh∆∞ th·∫ø n√†o cho hi·ªáu qu·∫£\"></p>\n<p>M√¨nh th√≠ch ki·ªÉu g·ªçi <code class=\"language-inline-text\">dispatch</code> nh∆∞ th·∫ø n√†y, n·∫øu ƒë·ªÉ √Ω b·∫°n s·∫Ω bi·∫øt <code class=\"language-inline-text\">dispatch</code> s·∫Ω kh√¥ng thay ƒë·ªïi trong su·ªët qu√° tr√¨nh t·ªìn t·∫°i c·ªßa component, nghƒ©a l√† b·∫°n c√≥ th·ªÉ truy·ªÅn n√≥ v√†o m·∫£ng ph·ª• thu·ªôc c·ªßa <code class=\"language-inline-text\">useEffect</code> v√¥ t∆∞.</p>\n<h2 id=\"v·∫≠y-c√≤n-c√°c-async-action-th√¨-sao-\"><a href=\"#v%E1%BA%ADy-c%C3%B2n-c%C3%A1c-async-action-th%C3%AC-sao-\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V·∫≠y c√≤n c√°c async action th√¨ sao ?</h2>\n<p>M·ªôt c√¢u h·ªèi hay, b·∫°n g·∫∑p t√¨nh hu·ªëng c·∫ßn x·ª≠ l√Ω l√† m·ªôt async (thao t√°c b·∫•t ƒë·ªìng b·ªô nh∆∞ network request) v√† b·∫°n c·∫ßn dispatch nhi·ªÅu action c√πng l√∫c, dispatch m·ªôt action n√†o ƒë√≥ ph·ª• thu·ªôc v√†o k·∫øt qu·∫£ t·ª´ dispatch tr∆∞·ªõc ƒë√≥? B·∫°n c√≥ th·ªÉ l√†m ƒëi·ªÅu ƒë√≥ trong component, tuy nhi√™n <em>x·ª≠ l√Ω th·ªß c√¥ng</em> nh∆∞ th·∫ø tr√™n t·ª´ng component r·∫•t l√† phi·ªÅn.</p>\n<p>M√¨nh ƒë·ªÅ ngh·ªã t·∫°o m·ªôt helper function trong context module, nh·∫≠n <code class=\"language-inline-text\">dispatch</code> v√† t·∫•t c·∫£ nh·ªØng d·ªØ li·ªáu b·∫°n c·∫ßn, helper function (AKA middleware) n√†y s·∫Ω ch·ªãu tr√°ch nhi·ªám x·ª≠ l√Ω t·∫•t c·∫£ nh·ªØng vi·ªác ƒë√£ n√™u tr√™n (theo ki·ªÉu state machine)</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// user-context.js</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">updateUser</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch<span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">,</span> updates</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"start update\"</span><span class=\"token punctuation\">,</span> updates <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> updatedUser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userClient<span class=\"token punctuation\">.</span><span class=\"token function\">updateUser</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">,</span> updates<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"finish update\"</span><span class=\"token punctuation\">,</span> updatedUser <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"fail update\"</span><span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> UserProvider<span class=\"token punctuation\">,</span> useUserDispatch<span class=\"token punctuation\">,</span> useUserState<span class=\"token punctuation\">,</span> updateUser <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>S·ª≠ d·ª•ng n√≥ s·∫Ω nh∆∞ th·∫ø n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// user-profile.js</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useUserState<span class=\"token punctuation\">,</span> useUserDispatch<span class=\"token punctuation\">,</span> updateUser <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./user-context\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">UserSettings</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> user<span class=\"token punctuation\">,</span> status<span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useUserState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> userDispatch <span class=\"token operator\">=</span> <span class=\"token function\">useUserDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">updateUser</span><span class=\"token punctuation\">(</span>userDispatch<span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">,</span> formState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"c·∫£m-th·∫•y-t√°ch-state-v√†-dispatch-r·∫•t-kh√≥-ch·ªãu\"><a href=\"#c%E1%BA%A3m-th%E1%BA%A5y-t%C3%A1ch-state-v%C3%A0-dispatch-r%E1%BA%A5t-kh%C3%B3-ch%E1%BB%8Bu\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C·∫£m th·∫•y t√°ch state v√† dispatch r·∫•t kh√≥ ch·ªãu</h2>\n<p>Nhi·ªÅu ng∆∞·ªùi ph√†n n√†n t√°ch state v√† dispatch ri√™ng r·∫•t kh√≥ ch·ªãu</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token function\">useCountState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> dispatch <span class=\"token operator\">=</span> <span class=\"token function\">useCountDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>T·∫°i sao kh√¥ng <em>ƒë∆°n gi·∫£n</em> l√† l√†m th·∫ø n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>T·∫•t nhi√™n b·∫°n c√≥ th·ªÉ</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">useCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token function\">useCountState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">useCountDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√°i n√†y t√πy c√°ch nh√¨n nh·∫≠n c·ªßa t·ª´ng ng∆∞·ªùi vi·∫øt, kh√¥ng c√≥ chuy·ªán ai ƒë√∫ng ai sai, ch·ªâ l√† b·∫°n c·∫£m th·∫•y <em>tho·∫£i m√°i</em>, <em>vui</em> h∆°n v·ªõi c√°ch vi·∫øt n√†o th√¥i.</p>\n<h2 id=\"to√†n-b·ªô-source-code\"><a href=\"#to%C3%A0n-b%E1%BB%99-source-code\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>To√†n b·ªô source code</h2>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/count-context.js</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> CountStateContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> CountDispatchContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">countReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"increment\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"decrement\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Unhandled action type: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>action<span class=\"token punctuation\">.</span>type<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">CountProvider</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>countReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountStateContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountDispatchContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>dispatch<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountDispatchContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountStateContext.Provider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">useCountState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>CountStateContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>context <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"useCountState must be used within a CountProvider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> context<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">useCountDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>CountDispatchContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>context <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"useCountDispatch must be used within a CountProvider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> context<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> CountProvider<span class=\"token punctuation\">,</span> useCountState<span class=\"token punctuation\">,</span> useCountDispatch <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>·ªû ƒë√¢y, m√¨nh ƒëang c·ªë t√≠nh kh√¥ng <code class=\"language-inline-text\">export CountContext</code>, ch√∫ng ta ch·ªâ cung c·∫•p m·ªôt c√°ch ƒë·ªÉ cung c·∫•p gi√° tr·ªã trong context v√† m·ªôt c√°ch ƒë·ªÉ l·∫•y v·ªÅ gi√° tr·ªã n√†y. Vi·ªác n√†y ƒë·∫£m b·∫£o ng∆∞·ªùi s·ª≠ d·ª•ng gi√° tr·ªã context ƒë√∫ng theo c√°i c√°ch ch√∫ng ta mu·ªën, cho ph√©p ch√∫ng ta h·∫°n ch·∫ø m·ªôt s·ªë code kh√¥ng c·∫ßn thi·∫øt khi l√∫c n√†o c≈©ng ph·∫£i khai b√°o <code class=\"language-inline-text\">useContext</code> n√†o.</p>\n<p>Hy v·ªçng b√†i vi·∫øt mang ƒë·∫øn nhi·ªÅu ƒëi·ªÅu h·ªØu √≠ch cho b·∫°n.</p>\n<p><strong>T√¢m ni·ªám r·∫±ng:</strong></p>\n<ul>\n<li>Kh√¥ng n√™n ƒë·∫∑t tr·ªçn ni·ªÅm tin 100% v√†o context c√≥ th·ªÉ gi·∫£i quy·∫øt <strong>t·∫•t c·∫£</strong> v·∫•n ƒë·ªÅ li√™n quan ƒë·∫øn chia s·∫ª state</li>\n<li>Context kh√¥ng nh·∫•t thi·∫øt l√† m·ªôt global state cho to√†n b·ªô ·ª©ng d·ª•ng, n√≥ c√≥ th·ªÉ ƒë∆∞·ª£c √°p d·ª•ng tr√™n m·ªôt ph·∫ßn c·ªßa c√¢y component c·ª• th·ªÉ n√†o ƒë√≥.</li>\n<li>B·∫°n c√≥ th·ªÉ (v√† b·∫°n n√™n) chia c√°c logic kh√°c nhau tr√™n c√°c context kh√°c nhau.</li>\n</ul>\n<p><a href=\"https://codesandbox.io/s/react-codesandbox-je6cc\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Code Sandbox cho b·∫°n n√†o c·∫ßn v·ªçc v·∫°ch</a></p>\n<p><a href=\"https://kentcdodds.com/blog/how-to-use-react-context-effectively\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">How to use React Context effectively</a></p>\n<p><a href=\"https://kentcdodds.com/blog/application-state-management-with-react\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Application State Management with React</a></p>\n<p><a href=\"https://kentcdodds.com/blog/how-to-optimize-your-context-value\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">How to optimize your context value</a></p>\n","cover_image":""}},{"node":{"id":"f1e7e7301a64eaa87386851839352f42","title":"Thi·∫øt ƒë·∫∑t ESLint khi s·ª≠ d·ª•ng v·ªõi Javascript, Typescript, React","path":"/2020-02-03-huong-dan-cai-dat-eslint-react-javascript-typescript-vscode/","date":"2020-02-03","timeToRead":8,"desc":"Ch√∫ng ta b·∫Øt ƒë·∫ßu v·ªõi Javascript tr∆∞·ªõc, sau ƒë√≥ s·∫Ω l√† TypeScript, v√† React. M·ª•c ti√™u l√† l√†m ƒë√∫ng, tr√°nh tr∆∞·ªùng h·ª£p c√†i package kh√¥ng c·∫ßn thi·∫øt ho·∫∑c copy/paste c√°c config t·ªõi khi n√≥ ch·∫°y ƒë∆∞·ª£c th√¨ th√¥i.","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#t%E1%BA%A1i-sao-d%C3%B9ng-eslint\">T·∫°i sao d√πng ESLint</a></li>\n<li><a href=\"#c%C3%A0i-%C4%91%E1%BA%B7t-eslint\">C√†i ƒë·∫∑t ESLint</a></li>\n<li><a href=\"#file-c%C3%A0i-%C4%91%E1%BA%B7t-c%E1%BB%A7a-eslint\">File c√†i ƒë·∫∑t c·ªßa ESLint</a></li>\n<li><a href=\"#javascript-thu%E1%BA%A7n\">Javascript thu·∫ßn</a></li>\n<li><a href=\"#thi%E1%BA%BFt-%C4%91%E1%BA%B7t-typescript\">Thi·∫øt ƒë·∫∑t TypeScript</a></li>\n<li>\n<p><a href=\"#thi%E1%BA%BFt-%C4%91%E1%BA%B7t-cho-react\">Thi·∫øt ƒë·∫∑t cho React</a></p>\n<ul>\n<li><a href=\"#react-javascript\">React Javascript</a></li>\n<li><a href=\"#react-typescript\">React TypeScript</a></li>\n</ul>\n</li>\n<li><a href=\"#c%C3%A0i-%C4%91%E1%BA%B7t-cho-vscode\">C√†i ƒë·∫∑t cho VSCode</a></li>\n</ul>\n<!-- /TOC -->\n<p>N·∫øu ch∆∞a r√†nh, b·∫°n c·∫ßn ƒë·ªçc t·ª´ ƒë·∫ßu t·ªõi cu·ªëi, n·∫øu ƒë√£ th√†nh th·∫°o, ch·ªâ vi·ªác nh·∫£y t·ªõi ph·∫ßn cu·ªëi r·ªìi copy config v·ªÅ x√†i.</p>\n<p>H∆∞·ªõng d·∫´n n√†y s·ª≠ d·ª•ng b·ªô config c·ªßa Airbnb, v√¨ n√≥ qu√° n·ªïi ti·∫øng v√† ƒë∆∞·ª£c s·ª≠ d·ª•ng g·∫ßn nh∆∞ l√† chu·∫©n. T·∫•t nhi√™n, b·∫°n c√≥ quy·ªÅn thay ƒë·ªïi sao cho h·ª£p <em>gu</em></p>\n<p>N·∫øu ch∆∞a bao gi·ªù <em>nghe</em> ƒë·∫øn h∆∞·ªõng d·∫´n vi·∫øt <em>code sao cho chu·∫©n</em> c·ªßa Airbnb, tham kh·∫£o c√°c b√†i vi·∫øt sau</p>\n<ul>\n<li><a href=\"https://github.com/airbnb/javascript/blob/master/README.md\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Airbnb JavaScript style guide</a></li>\n<li><a href=\"https://github.com/airbnb/javascript/tree/master/react\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Airbnb React style guide</a></li>\n<li><a href=\"https://github.com/airbnb/javascript/tree/master/css-in-javascript\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Airbnb CSS in JavaScript style guide</a></li>\n<li><a href=\"https://github.com/airbnb/css\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Airbnb Sass style guide</a></li>\n</ul>\n<h2 id=\"t·∫°i-sao-d√πng-eslint\"><a href=\"#t%E1%BA%A1i-sao-d%C3%B9ng-eslint\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·∫°i sao d√πng ESLint</h2>\n<p>Hi·ªán t·∫°i kh√¥ng c√≥ b·∫•t c·ª© m·ªôt ƒë·ªëi th·ªß n√†o <em>x·ª©ng t·∫ßm</em> v·ªõi ESLint, n√≥ l√† d·ª± √°n ƒë√£ v√† ƒëang ƒë∆∞·ª£c b·∫£o tr√¨ b·ªüi c·ªông ƒë·ªìng r·∫•t r·ªông l·ªõn. H·∫ßu h·∫øt c√°c ch∆∞∆°ng tr√¨nh vi·∫øt code ƒë·ªÅu h·ªó tr·ª£, ch√∫ng ta s·∫Ω kh√¥ng g·∫∑p kh√≥ khƒÉn trong vi·ªác s·ª≠ d·ª•ng n√≥ v·ªõi VSCode, Vim, Emac, WebStorm, Sublime, Atom,...</p>\n<p>T√∫m l·∫°i, ESLint l√† <strong>n·ªÅn t·∫£ng</strong> x·ªãn s√≤ nh·∫•t, b·∫°n kh√¥ng c·∫ßn lƒÉng tƒÉng t√¨m <em>ng∆∞·ªùi kh√°c</em>.</p>\n<h2 id=\"c√†i-ƒë·∫∑t-eslint\"><a href=\"#c%C3%A0i-%C4%91%E1%BA%B7t-eslint\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C√†i ƒë·∫∑t ESLint</h2>\n<p>Gi·ªëng nh∆∞ b·∫•t k·ª≥ package n√†o kh√°c, ESLint c√≥ th·ªÉ ƒë∆∞·ª£c c√†i ƒë·∫∑t ·ªü 2 m·ª©c</p>\n<ul>\n<li><em>global</em>, c√†i lu√¥n v√†o m√°y <code class=\"language-inline-text\">npm -g</code></li>\n<li>ƒëi theo t·ª´ng project</li>\n</ul>\n<p>Vi·ªác c√†i ƒë·∫∑t ESLint ·ªü m·ª©c <em>global</em> kh√° l√† h·ª£p l√Ω v√¨ ch√∫ng ta mu·ªën d√πng n√≥ ·ªü m·ªçi project. Tuy nhi√™n c≈©ng <em>h·ª£p l√Ω</em> n·∫øu c√†i ri√™ng tr√™n t·ª´ng project n·∫øu b·∫°n ƒëang c·∫ßn</p>\n<ul>\n<li>C√°c phi√™n b·∫£n ESLint kh√°c nhau tr√™n t·ª´ng d·ª± √°n</li>\n<li>C√¥ng khai b·∫°n ph·ª• thu·ªôc v√†o ESLint cho project ƒë√≥</li>\n<li>ƒê·ªìng nghi·ªáp v√† c√°c c√¥ng c·ª• t·ª± ƒë·ªông (nh∆∞ m·∫•y th·∫±ng CI) c√≥ th·ªÉ c√†i ƒë·∫∑t ESlint nh∆∞ nh·ªØng package kh√°c.</li>\n</ul>\n<p>C√†i ƒë·∫∑t ESLint trong th∆∞ m·ª•c project</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i eslint --save-dev</code></pre></div>\n<p>Ch·∫°y ESLint trong project</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">npx eslint</code></pre></div>\n<p>ƒê·ªÉ t·∫°o m·ªôt <em>shortcut</em> cho c√¢u l·ªánh ch·∫°y eslint. B√™n trong file <code class=\"language-inline-text\">package.json</code> th√™m d√≤ng sau</p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"lint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eslint .\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Tham s·ªë <code class=\"language-inline-text\">.</code> cho ph√©p ch·∫°y ESLint b√™n trong th∆∞ m·ª•c hi·ªán t·∫°i, ch√∫ng ta ch·∫°y l·ªánh th√¥ng qua shortcut</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> run lint</code></pre></div>\n<h2 id=\"file-c√†i-ƒë·∫∑t-c·ªßa-eslint\"><a href=\"#file-c%C3%A0i-%C4%91%E1%BA%B7t-c%E1%BB%A7a-eslint\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>File c√†i ƒë·∫∑t c·ªßa ESLint</h2>\n<p>C√≥ th·ªÉ ƒë·∫∑t file c√†i ƒë·∫∑t ESLint ·ªü <a href=\"https://eslint.org/docs/user-guide/configuring#configuration-cascading-and-hierarchy\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">nhi·ªÅu v·ªã tr√≠</a>. N·∫øu kh√¥ng c√≥ nhu c·∫ßu qu√° ƒë·∫∑t bi·ªát, 1 file duy nh·∫•t ·ªü th∆∞ m·ª•c ngo√†i c√πng ( <code class=\"language-inline-text\">root</code> ) l√† ƒë·ªß.</p>\n<p>ESLint cho ph√©p s·ª≠ d·ª•ng nhi·ªÅu ki·ªÉu file</p>\n<ul>\n<li>Javascript</li>\n<li>JSON</li>\n<li>YAML</li>\n</ul>\n<p>X√†i YAML trong v√≠ d·ª• n√†y. T·∫°o file t√™n <code class=\"language-inline-text\">.eslintrc.yaml</code>, c√°i n√†y n·∫øu b·∫°n ch·∫°y <code class=\"language-inline-text\">eslint init</code> trong th∆∞ m·ª•c <code class=\"language-inline-text\">src/</code> c·ªßa d·ª± √°n n√≥ s·∫Ω h·ªèi b·∫°n c√≥ mu·ªën t·∫°o kh√¥ng, n√≥ t·∫°o d√πm cho.</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">eslint --init</code></pre></div>\n<blockquote>\n<p>N·∫øu mu·ªën th√™m <em>logic</em> b·∫±ng code, b·∫°n c·∫ßn d√πng ki·ªÉu javascript</p>\n</blockquote>\n<p>ƒêi·ªÅu c·∫ßn quan t√¢m tr∆∞·ªõc h·∫øt l√† th√¥ng b√°o cho ESLint ch√∫ng ta ƒëang vi·∫øt ng√¥n ng·ªØ g√¨, phi√™n b·∫£n n√†o, m√¥i tr∆∞·ªùng m√† code s·∫Ω ch·∫°y. N·∫øu kh√¥ng c√≥ c√°c th√¥ng tin, ESLint s·∫Ω kh√¥ng ch·∫°y ƒë∆∞·ª£c.</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">parserOptions:\n  ecmaVersion: <span class=\"token number\">6</span>\nenv:\n  node: <span class=\"token boolean\">true</span></code></pre></div>\n<h2 id=\"javascript-thu·∫ßn\"><a href=\"#javascript-thu%E1%BA%A7n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Javascript thu·∫ßn</h2>\n<p>V·ªõi project l√† javascript thu·∫ßn, to√†n b·ªô file l√† <code class=\"language-inline-text\">.js</code>, c√≥ th·ªÉ t·ª± ƒë·ªãnh nghƒ©a t·ª´ ƒë·∫ßu h·∫øt, nh∆∞ng nh∆∞ v·∫≠y kh√° m·∫•t th·ªùi gian, kh√≥ b·∫£o tr√¨, ch∆∞a ch·∫Øc chu·∫©n v√¨ n√≥ ph·ª• thu·ªôc v√†o s·ª± hi·ªÉu bi·∫øt c·ªßa b·∫°n v·ªÅ javascript</p>\n<p>R·∫•t nhi·ªÅu c√°c c√¥ng ty l·ªõn nh∆∞ <a href=\"https://github.com/google/eslint-config-google\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Google</a>, <a href=\"https://github.com/airbnb/javascript/tree/master/packages/eslint-config-airbnb\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Airbnb</a>, <a href=\"https://github.com/facebook/fbjs/tree/master/packages/eslint-config-fbjs-opensource\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Facebook</a> b·ªè ra c·∫£ t·ªâ t·ªâ th·ªùi gian ƒë·ªÉ b·∫£o tr√¨ v√† c·∫≠p nh·∫≠p m·∫•y c√†i ƒë·∫∑t n√†y</p>\n<p>S·ª≠ d·ª•ng c√†i ƒë·∫∑t v·∫°n ng∆∞·ªùi y√™u th√≠ch, Airbnb</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">npx install-peerdeps --dev eslint-config-airbnb-base</code></pre></div>\n<p>C√°c b√†i vi·∫øt tr√™n m·∫°ng s·∫Ω k√™u b·∫°n c√†i <code class=\"language-inline-text\">eslint-config-airbnb</code>, n√≥ c√≥ bao g·ªìm lu√¥n ph·∫ßn c√†i ƒë·∫∑t cho React, React Hooks, ... . Kh√¥ng c·∫ßn thi·∫øt trong tr∆∞·ªùng h·ª£p project ch·ªâ l√† javascript th√¥ng th∆∞·ªùng.</p>\n<p>ƒê·ªÉ √Ω ch√∫ng ta <strong>KH√îNG</strong> d√πng <code class=\"language-inline-text\">npm</code> ƒë·ªÉ c√†i ƒë·∫∑t, m√† d√πng <code class=\"language-inline-text\">npx install-peerdeps</code>. N√≥ s·∫Ω c√†i lu√¥n m·∫•y package n√†o m√† <code class=\"language-inline-text\">eslint-config-airbnb-base</code> ph·ª• thu·ªôc. Tr∆∞·ªùng h·ª£p s·ª≠ d·ª•ng ESLint ch√∫ng ta s·∫Ω g·∫∑p ho√†i, v√¨ h·∫ßu nh∆∞ n√≥ ƒë·ªÅu ph·ª• thu·ªôc m·ªôt v√†i package kh√°c.</p>\n<p>C√†i xong, khai b√°o s·∫Ω k·∫ø th·ª´a b·ªô c√†i ƒë·∫∑t c·ªßa Airbnb</p>\n<div class=\"gridsome-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">extends</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> airbnb<span class=\"token punctuation\">-</span>base</code></pre></div>\n<p>Nh·ªØng thi·∫øt ƒë·∫∑t c·ªßa airbnb c√≥ th·ªÉ n√≥i l√† r·∫•t ph·ªï bi·∫øn v√† ƒë∆∞·ª£c tin d√πng b·ªüi nhi·ªÅu d·ª± √°n l·ªõn nh·ªè kh√°c nhau. Ch√∫ng ta c√≥ th·ªÉ y√™n t√¢m s·ª≠ d·ª•ng n√≥ m√† kh√¥ng c·∫ßn thay ƒë·ªïi g√¨ nhi·ªÅu.</p>\n<p>T·ªïng k·∫øt</p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"eslint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.1.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"eslint-config-airbnb-base\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^14.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"eslint-plugin-import\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.20.0\"</span> (peer dependency)\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gridsome-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">parserOptions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ecmaVersion</span><span class=\"token punctuation\">:</span> <span class=\"token number\">6</span>\n\n<span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">node</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n<span class=\"token key atrule\">extends</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> eslint<span class=\"token punctuation\">:</span>recommended\n  <span class=\"token punctuation\">-</span> airbnb<span class=\"token punctuation\">-</span>base</code></pre></div>\n<h2 id=\"thi·∫øt-ƒë·∫∑t-typescript\"><a href=\"#thi%E1%BA%BFt-%C4%91%E1%BA%B7t-typescript\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Thi·∫øt ƒë·∫∑t TypeScript</h2>\n<p>V·∫•n ƒë·ªÅ ch√≠nh c·ªßa TypeScript l√† ESLint kh√¥ng th·ªÉ t·ª± ƒë·ªông m√† <code class=\"language-inline-text\">parse</code> ƒë∆∞·ª£c, ch√∫ng ta ph·∫£i th√™m m·ªôt parser <a href=\"https://github.com/typescript-eslint/typescript-eslint/tree/master/packages/parser\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">@typescript-eslint/parser</a>.</p>\n<p>C√†i ƒë·∫∑t</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> @typescript-eslint/parser --save-dev</code></pre></div>\n<blockquote>\n<p>Parse l√†m nhi·ªám v·ª• ƒë·ªçc c√†i file input v√† t·∫°o ra m·ªôt <em>phi√™n b·∫£n</em> m√† ESLint hi·ªÉu ƒë∆∞·ª£c.</p>\n</blockquote>\n<p>Khai b√°o d√πng parser n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">parser</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"@typescript-eslint/parser\"</span></code></pre></div>\n<p>ƒê·ªìng th·ªùi c·∫≠p nh·∫≠p lu√¥n <code class=\"language-inline-text\">package.json</code> v√† b√°o v·ªõi ESLint ƒë·ª´ng ki·ªÉm tra file <code class=\"language-inline-text\">.js</code> m√† ki·ªÉm tra file <code class=\"language-inline-text\">.ts</code></p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"lint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eslint . --ext .ts\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>T∆∞∆°ng t·ª± nh∆∞ javascript, ch√∫ng ta d√πng b·ªô thi·∫øt ƒë·∫∑t c·ªßa Airbnb</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">npx install-peerdeps --dev eslint-config-airbnb-typescript\n<span class=\"token function\">npm</span> i eslint-plugin-import --save-dev</code></pre></div>\n<p><code class=\"language-inline-text\">eslint-plugin-import</code> ph·∫£i ƒë∆∞·ª£c c√†i ƒë·∫∑t ri√™ng, th·ªß c√¥ng, kh√¥ng r√µ l√Ω do t·∫°i sao lu√¥n.</p>\n<p>C·∫≠p nh·∫≠p l·∫°i file config ESLint</p>\n<div class=\"gridsome-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">extends</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> airbnb<span class=\"token punctuation\">-</span>typescript/base\n  <span class=\"token punctuation\">-</span> plugin<span class=\"token punctuation\">:</span>@typescript<span class=\"token punctuation\">-</span>eslint/recommended</code></pre></div>\n<p>B·∫°n c√≥ th·ªÉ th·∫Øc m·∫Øc, t·∫°i sao ch∆∞a c√†i <code class=\"language-inline-text\">@typescript-eslint</code> m√† c√≥ th·ªÉ s·ª≠ d·ª•ng, th·∫≠t ra l√∫c c√†i <code class=\"language-inline-text\">eslint-config-airbnb-typescript</code> ch√∫ng ta ƒë√£ c√†i lu√¥n n√≥ b·∫±ng <code class=\"language-inline-text\">npx install-peerdeps</code></p>\n<p>C√≥ th·ªÉ rule kh√°c n·ªØa c√≥ th·ªÉ tham kh·∫£o <a href=\"https://github.com/typescript-eslint/typescript-eslint/tree/master/packages/eslint-plugin\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">tr·ª±c ti·∫øp t·ª´ t√†i li·ªáu tr√™n github</a></p>\n<p>Cu·ªëi c√πng, b·∫°n s·∫Ω th·∫•y c√≥ r·∫•t nhi·ªÅu b√†i vi·∫øt tr√™n m·∫°ng, ch·ªâ b·∫°n thi·∫øt ƒë·∫∑t</p>\n<div class=\"gridsome-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">plugins</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token string\">\"@typescript-eslint\"</span></code></pre></div>\n<p>N·∫øu kh√¥ng s·ª≠ d·ª•ng c√°c thi·∫øt ESLint ƒë∆∞·ª£c ƒë·ªÅ ngh·ªã, c√°i n√†y kh√¥ng c·∫ßn thi·∫øt. L√Ω do l√† Airbnb ƒë√£ b·∫≠t lu√¥n c√°c rule nh∆∞ v·∫≠y.</p>\n<p>T·ªïng k·∫øt</p>\n<p><strong>package.json</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"@typescript-eslint/eslint-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.17.0\"</span><span class=\"token punctuation\">,</span> (peer dependency)\n  <span class=\"token property\">\"@typescript-eslint/parser\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.17.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"eslint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.8.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"eslint-config-airbnb-typescript\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.3.1\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"eslint-plugin-import\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.20.0\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>.eslintrc.yaml</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">parserOptions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ecmaVersion</span><span class=\"token punctuation\">:</span> <span class=\"token number\">6</span>\n\n<span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">node</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n<span class=\"token key atrule\">extends</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> airbnb<span class=\"token punctuation\">-</span>typescript/base\n  <span class=\"token punctuation\">-</span> plugin<span class=\"token punctuation\">:</span>@typescript<span class=\"token punctuation\">-</span>eslint/recommended</code></pre></div>\n<h2 id=\"thi·∫øt-ƒë·∫∑t-cho-react\"><a href=\"#thi%E1%BA%BFt-%C4%91%E1%BA%B7t-cho-react\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Thi·∫øt ƒë·∫∑t cho React</h2>\n<p>Th√™m c√°c thi·∫øt ƒë·∫∑t ESLint cho React v√¥ c√πng ƒë∆°n gi·∫£n, m·ªçi th·ª© ƒë√£ c√≥ Airbnb lo.</p>\n<p>M·ªôt trong nh·ªØng sai l·∫ßm ph·ªï bi·∫øn l√† cho r·∫±ng vi·∫øt nh∆∞ b√™n d∆∞·ªõi s·∫Ω b·∫≠t h·ªó tr·ª£ React</p>\n<p><strong>.eslintrc.yaml</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">parserOptions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ecmaFeatures</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">jsx</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n<p>React s·ª≠ d·ª•ng JSX, nh∆∞ng theo c√°ch m√† ESLint kh√¥ng th·ªÉ <strong>hi·ªÉu n·ªïi</strong>. ƒê·ªÉ React v√† ESLint <em>n√≥i chuy·ªán</em> ƒë∆∞·ª£c v·ªõi nhau, ch√∫ng ta ph·∫£i s·ª≠ d·ª•ng <code class=\"language-inline-text\">eslint-plugin-react</code></p>\n<h3 id=\"react-javascript\"><a href=\"#react-javascript\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>React Javascript</h3>\n<p>C√†i ƒë·∫∑t package</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">npx install-peerdeps --dev eslint-config-airbnb</code></pre></div>\n<p><strong>.eslintrc.yaml</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">extends</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> airbnb\n<span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">browser</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n<p><strong>package.json</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"lint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eslint . --ext .js,.jsx\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>N·∫øu c√≥ s·ª≠ d·ª•ng React Hook, b·∫°n n√™n th√™m ph·∫ßn c√†i ƒë·∫∑t sau (c√≥ b·ªè qua vi·ªác ki·ªÉm tra accessibility)</p>\n<p><strong>.eslintrc.yaml</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">extends</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> airbnb<span class=\"token punctuation\">-</span>base\n  <span class=\"token punctuation\">-</span> airbnb/rules/react\n  <span class=\"token punctuation\">-</span> airbnb/hooks</code></pre></div>\n<p>T·ªïng k·∫øt</p>\n<p><strong>package.json</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"eslint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.1.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"eslint-config-airbnb\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^18.0.1\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"eslint-plugin-import\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.20.0\"</span><span class=\"token punctuation\">,</span> (peer dependency)\n  <span class=\"token property\">\"eslint-plugin-jsx-a11y\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.2.3\"</span><span class=\"token punctuation\">,</span> (peer dependency)\n  <span class=\"token property\">\"eslint-plugin-react\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.18.0\"</span><span class=\"token punctuation\">,</span> (peer dependency)\n  <span class=\"token property\">\"eslint-plugin-react-hooks\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.7.0\"</span> (peer dependency)\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>.eslintrc.yaml</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">parserOptions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ecmaVersion</span><span class=\"token punctuation\">:</span> <span class=\"token number\">6</span>\n\n<span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">browser</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n<span class=\"token key atrule\">extends</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> airbnb\n  <span class=\"token punctuation\">-</span> airbnb/hooks\n\n<span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">react/react-in-jsx-scope</span><span class=\"token punctuation\">:</span> off</code></pre></div>\n<p><a href=\"https://github.com/yannickcr/eslint-plugin-react#list-of-supported-rules\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">R·∫£nh ng·ªìi xem to√†n b·ªô thi·∫øt ƒë·∫∑t</a></p>\n<h3 id=\"react-typescript\"><a href=\"#react-typescript\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>React TypeScript</h3>\n<p>N·∫øu d√πng TypeScript, ch√∫ng ta kh√¥ng th·ªÉ c√†i theo ki·ªÉu <code class=\"language-inline-text\">npx install-peerdeps</code>, m√† ph·∫£i c√†i ƒë·ªôc l·∫≠p</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> eslint-config-airbnb-typescript <span class=\"token punctuation\">\\</span>\n            eslint-plugin-import <span class=\"token punctuation\">\\</span>\n            eslint-plugin-jsx-a11y <span class=\"token punctuation\">\\</span>\n            eslint-plugin-react <span class=\"token punctuation\">\\</span>\n            eslint-plugin-react-hooks <span class=\"token punctuation\">\\</span>\n            @typescript-eslint/eslint-plugin <span class=\"token punctuation\">\\</span>\n            --save-dev</code></pre></div>\n<p><strong>.eslintrc.yaml</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">parserOptions</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">ecmaVersion</span><span class=\"token punctuation\">:</span> <span class=\"token number\">6</span>\n\n<span class=\"token key atrule\">env</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">browser</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n<span class=\"token key atrule\">extends</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> airbnb<span class=\"token punctuation\">-</span>typescript\n  <span class=\"token punctuation\">-</span> airbnb/hooks\n  <span class=\"token punctuation\">-</span> plugin<span class=\"token punctuation\">:</span>@typescript<span class=\"token punctuation\">-</span>eslint/recommended\n\n<span class=\"token key atrule\">rules</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">react/react-in-jsx-scope</span><span class=\"token punctuation\">:</span> off</code></pre></div>\n<p><strong>package.json</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"eslint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.8.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"@typescript-eslint/eslint-plugin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.17.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"eslint-config-airbnb-typescript\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.3.1\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"eslint-plugin-import\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.20.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"eslint-plugin-jsx-a11y\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^6.2.3\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"eslint-plugin-react\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^7.18.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"eslint-plugin-react-hooks\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.3.0\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"lint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eslint . --ext .ts,.tsx\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"c√†i-ƒë·∫∑t-cho-vscode\"><a href=\"#c%C3%A0i-%C4%91%E1%BA%B7t-cho-vscode\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C√†i ƒë·∫∑t cho VSCode</h2>\n<p><a href=\"https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">VSCode ƒë√£ c√≥ plugin</a> kh√° th·∫ßn th√°nh ƒë·ªÉ h·ªó tr·ª£ ESLint. C√°c thi·∫øt ƒë·∫∑t y√™u th√≠ch c·ªßa m√¨nh</p>\n<p>T·ª± ƒë·ªông ch·∫°y lint khi save</p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"eslint.run\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"onSave\"</span></code></pre></div>\n<p>VSCode s·∫Ω ki·ªÉm tra tr√™n JS, JSX, TS, TSX</p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"eslint.validate\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"javascript\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"javascriptreact\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"typescript\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"typescriptreact\"</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>Ch·ªçn ki·ªÉu nh√°y ƒë∆°n</p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"javascript.preferences.quoteStyle\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"single\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"typescript.preferences.quoteStyle\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"single\"</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>T·ª± ƒë·ªông c·∫≠p nh·∫≠p v·ªã tr√≠ file</p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"javascript.updateImportsOnFileMove.enabled\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"always\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"typescript.updateImportsOnFileMove.enabled\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"always\"</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p><a href=\"https://blog.geographer.fr/eslint-guide\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ESLint configuration and best practices</a></p>\n","cover_image":""}},{"node":{"id":"2f989fd0a23550e73b2ace01c0db24ad","title":"B·∫Øt s·ª± ki·ªán click b√™n ngo√†i Component React","path":"/2020-01-30-huong-dan-bat-su-kien-ben-ngoai-react-md/","date":"2020-01-30","timeToRead":1,"desc":"Th·ªß thu·∫≠t nh·ªè ƒë·ªÉ b·∫Øt s·ª± ki·ªán click c√≥ n·∫±m ngo√†i component kh√¥ng","content":"<p>N·∫øu b·∫°n t·ª± l√†m m·ªôt react component nh∆∞ <em>dropdown</em>, <em>modal</em>, <em>popover</em>, kh√¥ng s·ªõm th√¨ mu·ªôn b·∫°n s·∫Ω r∆°i v√†o t√¨nh hu·ªëng sao \"B·∫Øt s·ª± ki·ªán click b√™n ngo√†i component ƒë·ªÉ ƒë√≥ng n√≥ (modal, popover, dropdown) l·∫°i\"</p>\n<p><img src=\"https://miro.medium.com/max/546/1*7dmOCdkoDLfnWz6hBF0fYA.png\"></p>\n<p>ƒê√¢y l√† nh·ªØng g√¨ b·∫°n c·∫ßn l√†m</p>\n<ol>\n<li>ƒê·ªÉ bi·∫øt s·ª± ki·ªán n·∫±m trong hay ngo√†i component, ch√∫ng ta ph·∫£i l·∫•y ƒë∆∞·ª£c DOM c·ªßa element, d√πng <code class=\"language-inline-text\">ref</code> ƒë·ªÉ l·∫•y tham chi·∫øu ƒë·∫øn DOM <em>th·ª±c</em> c·ªßa component</li>\n</ol>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> node <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">...</span>\n\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>node<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        ...\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<ol start=\"2\">\n<li>Th√™m m·ªôt event listener cho s·ª± ki·ªán click ( <em>mousedown</em> )</li>\n</ol>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//  th√™m khi ƒë√£ mount</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mousedown\"</span><span class=\"token punctuation\">,</span> handleClick<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// d·ªçn d·∫πp</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        document<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mousedown\"</span><span class=\"token punctuation\">,</span> handleClick<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ol start=\"3\">\n<li>B√™n trong <code class=\"language-inline-text\">handleClick</code> <strong>node.current.contains(e.target)</strong> s·∫Ω tr·∫£ v·ªÅ <code class=\"language-inline-text\">true</code> n·∫øu click xu·∫•t ph√°t b√™n trong ref <code class=\"language-inline-text\">node</code></li>\n</ol>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token comment\">// outside</span>\n    <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a href=\"https://codesandbox.io/s/w62xl39907\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Code</a>\n<a href=\"https://medium.com/@pitipatdop/little-neat-trick-to-capture-click-outside-react-component-5604830beb7f\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Little Neat trick to capture click outside with React Hook</a></p>\n","cover_image":""}},{"node":{"id":"1c7b17cad2209ba0e4e9538f8e2a3fac","title":"Vi·∫øt React Higher-Order Component b·∫±ng TypeScript","path":"/2020-01-19-viet-type-cho-hoc-voi-typescript/","date":"2020-01-19","timeToRead":6,"desc":"Cu·ªôc s·ªëng ƒë∆∞a ƒë·∫©y b·∫°n ph·∫£i vi·∫øt TypeScript, th√¨ b√†i n√†y s·∫Ω gi√∫p b·∫°n ch√∫t √≠t khi vi·∫øt type v·ªõi HOC","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#enhancer\">Enhancer</a></li>\n<li><a href=\"#injector\">Injector</a></li>\n<li><a href=\"#enhance--inject\">Enhance + Inject</a></li>\n</ul>\n<!-- /TOC -->\n<blockquote>\n<p>T·ª´ React 16.8.0, ch√∫ng ta c√≥ React Hook, n√≥ gi·∫£i quy·∫øt to√†n b·ªô nh·ªØng tr∆∞·ªùng h·ª£p ch√∫ng ta ph·∫£i s·ª≠ d·ª•ng higher-order component v√† gi·∫£m ƒë√°ng k·ªÉ ƒë·ªô ph·ª©c t·∫°p c·ªßa vi·ªác set type so v·ªõi HOC. B·∫°n s·ª≠ d·ª•ng hook trong m·ªçi t√¨nh hu·ªëng c√≥ th·ªÉ. N·∫øu g∆°i c·∫£nh <em>ng·∫∑t ngh√®o</em>, anh lead c·ªßa b·∫°n <em>ko r√µ l√Ω do g√¨</em> b·∫Øt x√†i HOC v·ªõi TypeScript. Th√¨ b√†i vi·∫øt n√†y ƒë·ªÉ gi√∫p bi·∫øt bi·∫øt c√°ch set type cho HOC.</p>\n</blockquote>\n<p>HOC trong React l√† <em>c√¥ng c·ª•</em> ƒë·ªÉ ch√∫ng ta s·ª≠ d·ª•ng nhi·ªÅu ƒëo·∫°n code gi·ªëng nhau tr√™n c√°c component kh√°c nhau. Tuy nhi√™n khi d√πng chung v·ªõi TypeScript th√¨ <strong>tri·ªáu tri·ªáu</strong> developer g·∫∑p kh√¥ng √≠t kh√≥ khƒÉn khi set type cho n√≥. Bao g·ªìm lu√¥n m√¨nh trong ƒë√≥.</p>\n<p>Trong ph·∫°m vi b√†i vi·∫øt n√†y, ch√∫ng ta s·∫Ω chi ra 2 lo·∫°i HOC, 2 c√°ch l√†m HOC ph·ªï bi·∫øn hi·ªán nay, t·∫°m g·ªçi l√† <strong>enhancer</strong> v√† <strong>injector</strong></p>\n<ul>\n<li><strong>Enhancer</strong>: b·ªçc m·ªôt component, b·ªï sung th√™m c√°c h√†m ho·∫∑c prop</li>\n<li><strong>Injector</strong>: <em>b∆°m/ch√≠ch</em> th√™m prop v√†o m·ªôt component</li>\n</ul>\n<p>ƒê·ªÉ ph√¢n bi·ªát r√µ h∆°n, b·∫°n xem ti·∫øp v√≠ d·ª• b√™n d∆∞·ªõi.</p>\n<h2 id=\"enhancer\"><a href=\"#enhancer\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Enhancer</h2>\n<p>Ch√∫ng ta b·∫Øt ƒë·∫ßu v·ªõi Enhancer v√¨ n√≥ d·ªÖ vi·∫øt <code class=\"language-inline-text\">type</code> nh·∫•t. V√≠ d·ª• c∆° b·∫£n nh·∫•t, b·ªï sung th√™m prop <code class=\"language-inline-text\">loading</code> v√†o component.</p>\n<p>Kh√¥ng bao g·ªìm <code class=\"language-inline-text\">type</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">withLoading</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">Component</span> <span class=\"token operator\">=></span>\n  <span class=\"token keyword\">class</span> <span class=\"token class-name\">WithLoading</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> loading<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>props <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> loading <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LoadingSpinner</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>... v√† v·ªõi <code class=\"language-inline-text\">type</code></p>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">WithLoadingProps</span> <span class=\"token punctuation\">{</span>\n  loading<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> withLoading <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">P</span></span> <span class=\"token attr-name\">extends</span> <span class=\"token attr-name\">object</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(Component: React.ComponentType&lt;P>) => </span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">class</span> <span class=\"token class-name\">WithLoading</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React</span><span class=\"token punctuation\">.</span>Component<span class=\"token operator\">&lt;</span><span class=\"token constant\">P</span> <span class=\"token operator\">&amp;</span> WithLoadingProps<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> loading<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>props <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> loading <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LoadingSpinner</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">(</span>props <span class=\"token keyword\">as</span> <span class=\"token constant\">P</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n<p>C√≥ v√†i th·ª© c·∫ßn gi·∫£i th√≠ch ·ªü ƒëo·∫°n tr√™n, t·ª´ng b∆∞·ªõc m·ªôt nh√©</p>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">WithLoadingProps</span> <span class=\"token punctuation\">{</span>\n  loading<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê√¢y l√† <code class=\"language-inline-text\">interface</code> khai b√°o c√°c prop v√† <code class=\"language-inline-text\">type</code> s·∫Ω ƒë∆∞·ª£c th√™m v√†o (<strong>enhance</strong>)</p>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">P</span></span> <span class=\"token attr-name\">extends</span> <span class=\"token attr-name\">object</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(Component: React.ComponentType&lt;P>)</span></code></pre></div>\n<p>Ch√∫ng ta ƒëang s·ª≠ d·ª•ng m·ªôt <a href=\"https://www.typescriptlang.org/docs/handbook/generics.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-inline-text\">generic</code></a>, <code class=\"language-inline-text\">P</code> l√† k√Ω t·ª± d√πng ƒë·ªÉ ƒë·∫°i di·ªán cho to√†n b·ªô prop c·ªßa component khi truy·ªÅn cho HOC. <code class=\"language-inline-text\">React.ComponentType&lt;P></code> l√† m·ªôt type vi·∫øt t·∫Øt cho c·∫£ hai <code class=\"language-inline-text\">React.FC&lt;P></code> v√† <code class=\"language-inline-text\">React.ClassComponent&lt;P></code>, nghƒ©a l√† m·ªôt component truy·ªÅn v√†o cho HOC n√†y c√≥ th·ªÉ l√† function c≈©ng ƒë∆∞·ª£c, class component c≈©ng ƒë∆∞·ª£c.</p>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">WithLoading</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React</span><span class=\"token punctuation\">.</span>Component<span class=\"token operator\">&lt;</span><span class=\"token constant\">P</span> <span class=\"token operator\">&amp;</span> WithLoadingProps<span class=\"token operator\">></span></code></pre></div>\n<p>ƒê√¢y l√† ƒëo·∫°n ch√∫ng ta component s·∫Ω <code class=\"language-inline-text\">return</code> t·ª´ HOC, n√≥ ch·ªâ ƒë·ªãnh l√† component n√†y s·∫Ω bao g·ªìm to√†n b·ªô prop t·ª´ component (<code class=\"language-inline-text\">P</code>) v√† prop c·ªßa ch√≠nh th·∫±ng HOC (<code class=\"language-inline-text\">WithLoadingProps</code>), n√≥ ƒë∆∞·ª£c <em>c·ªông d·ªìn</em> b·∫±ng to√°n t·ª≠ <code class=\"language-inline-text\">&amp;</code></p>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> loading<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>props <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>V·ªõi phi√™n b·∫£n c≈© c·ªßa TypeScript, c√≥ th·ªÉ ch√∫ng ta ph·∫£i <em>√©p ki·ªÉu</em> <code class=\"language-inline-text\">this.props</code> nh∆∞ th·∫ø n√†y <code class=\"language-inline-text\">this.props as WithLoadingProps</code></p>\n</blockquote>\n<p>Cu·ªëi c√πng ch√∫ng ta s·ª≠ d·ª•ng prop <code class=\"language-inline-text\">loading</code> ƒë·ªÉ ƒë·∫∑t ƒëi·ªÅu ki·ªán hi·ªÉn th·ªã c√°i <em>Spinner</em></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">return</span> loading <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LoadingSpinner</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props <span class=\"token keyword\">as</span> <span class=\"token constant\">P</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>√©p ki·ªÉu <code class=\"language-inline-text\">props as P</code> l√† b·∫Øt bu·ªôc t·ª´ TypeScript 3.2, ƒë√¢y l√† bug c·ªßa TypeScript</p>\n</blockquote>\n<p>V·ªõi HOC <code class=\"language-inline-text\">withLoading</code> c≈©ng c√≥ th·ªÉ ƒë∆∞·ª£c vi·∫øt ƒë·ªÉ return m·ªôt function component thay v√¨ class</p>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> withLoading <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">P</span></span> <span class=\"token attr-name\">extends</span> <span class=\"token attr-name\">object</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  Component: React.ComponentType&lt;P>\n): React.FC&lt;P &amp; WithLoadingProps> => (</span><span class=\"token punctuation\">{</span>\n  loading<span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span>props\n<span class=\"token punctuation\">}</span><span class=\"token plain-text\">: WithLoadingProps) =>\n  loading ? </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LoadingSpinner</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"> : </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">(</span>props <span class=\"token keyword\">as</span> <span class=\"token constant\">P</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">;</span></code></pre></div>\n<p>Ch√∫ng ta g·∫∑p v·∫•n ƒë·ªÅ t∆∞∆°ng t·ª± khi s·ª≠ d·ª•ng rest/spread object, ch√∫ng ta ch·ªâ ƒë·ªãnh ki·ªÉu return l√† <code class=\"language-inline-text\">React.FC&lt;P &amp; WithLoadingProps></code>, nh∆∞ng ch·ªâ s·ª≠ d·ª•ng <code class=\"language-inline-text\">WithLoadingProps</code> b√™n trong function component</p>\n<h2 id=\"injector\"><a href=\"#injector\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Injector</h2>\n<p>Ki·ªÉu <em>injector</em> HOC s·∫Ω hay g·∫∑p h∆°n, nh∆∞ng c≈©ng kh√≥ set type h∆°n, b√™n c·∫°nh vi·ªác <em>ch√≠ch</em> th√™m m·ªôt s·ªë prop v√†o cho component, trong ƒëa s·ªë c√°c tr∆∞·ªùng h·ª£p n√≥ c√≤n x√≥a nh·ªØng prop ƒë√£ <em>ch√≠ch</em> v√†o khi n√≥ b·ªçc l·∫°i, nh∆∞ v·∫≠y nh·ªØng th·∫±ng t·ª´ b√™n ngo√†i kh√¥ng th·ªÉ ghi ƒë√® l√™n. <code class=\"language-inline-text\">connect</code> c·ªßa react-redux l√† m·ªôt v√≠ d·ª• cho injector HOC. Ch√∫ng ta kh√¥ng s·ª≠ d·ª•ng n√≥, v√¨ qu√° ph·ª©c t·∫°p, d√πng m·ªôt v√≠ d·ª• ƒë∆°n gi·∫£n h∆°n, HOC ch√≠ch th√™m gi√° tr·ªã <code class=\"language-inline-text\">counter</code> v√† <code class=\"language-inline-text\">callback</code> ƒë·ªÉ tƒÉng gi·∫£m gi√° tr·ªã.</p>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Subtract <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"utility-types\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">InjectedCounterProps</span> <span class=\"token punctuation\">{</span>\n  value<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onIncrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onDecrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">MakeCounterState</span> <span class=\"token punctuation\">{</span>\n  value<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> makeCounter <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">P</span></span> <span class=\"token attr-name\">extends</span> <span class=\"token attr-name\">InjectedCounterProps</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  Component: React.ComponentType&lt;P>\n) =>\n  class MakeCounter extends React.Component&lt;\n    Subtract&lt;P, InjectedCounterProps>,\n    MakeCounterState\n  > </span><span class=\"token punctuation\">{</span>\n    state<span class=\"token operator\">:</span> MakeCounterState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      value<span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function-variable function\">increment</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>prevState <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        value<span class=\"token operator\">:</span> prevState<span class=\"token punctuation\">.</span>value <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function-variable function\">decrement</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>prevState <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        value<span class=\"token operator\">:</span> prevState<span class=\"token punctuation\">.</span>value <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span>\n          <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props <span class=\"token keyword\">as</span> <span class=\"token constant\">P</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">onIncrement</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>increment<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">onDecrement</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>decrement<span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n<p>M·ªôt v√†i ƒëi·ªÉm kh√°c nhau</p>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">InjectedCounterProps</span> <span class=\"token punctuation\">{</span>\n  value<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onIncrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onDecrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Khai b√°o m·ªôt interface ƒë·ªÉ ch·ªâ ƒë·ªãnh nh·ªØng prop n√†o s·∫Ω ƒë∆∞·ª£c <em>ch√≠ch</em>, ƒë·ªìng th·ªùi export lu√¥n ƒë·ªÉ component n√†o d√πng HOC c√≥ th·ªÉ l·∫•y x√†i.</p>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> makeCounter<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> InjectedCounterProps <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./makeCounter\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">CounterProps</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">InjectedCounterProps</span> <span class=\"token punctuation\">{</span>\n  style<span class=\"token operator\">?</span><span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>CSSProperties<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Counter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> CounterProps<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>onDecrement<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> - </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>onIncrement<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> + </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">makeCounter</span><span class=\"token punctuation\">(</span>Counter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">P</span></span> <span class=\"token attr-name\">extends</span> <span class=\"token attr-name\">InjectedCounterProps</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(Component: React.ComponentType&lt;P>)</span></code></pre></div>\n<p>M·ªôt l·∫ßn n·ªØa ch√∫ng ta d√πng m·ªôt <code class=\"language-inline-text\">generic</code>, nh∆∞ng l·∫ßn n√†y ƒë·ªÉ ƒë·∫£m b·∫£o component s·ª≠ d·ª•ng HOC c√≥ bao g·ªìm c√°c prop ƒë√£ ƒë∆∞·ª£c ch√≠ch, n·∫øu kh√¥ng th√¨ b√°o l·ªói.</p>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MakeCounter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React</span><span class=\"token punctuation\">.</span>Component<span class=\"token operator\">&lt;</span>\n  Subtract<span class=\"token operator\">&lt;</span><span class=\"token constant\">P</span><span class=\"token punctuation\">,</span> InjectedCounterProps<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  MakeCounterState\n<span class=\"token operator\">></span></code></pre></div>\n<p>Component ƒë∆∞·ª£c tr·∫£ v·ªÅ t·ª´ HOC s·∫Ω s·ª≠ d·ª•ng <a href=\"https://github.com/piotrwitek/utility-types\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-inline-text\">Subtract</code></a>, n√≥ s·∫Ω t√°ch h·∫øt nh·ªØng prop ƒë√£ ch√≠ch th√™m, nghƒ©a l√† n·∫øu ai ƒë√≥ set l·∫°i t·ª´ k·∫øt qu·∫£ tr·∫£ v·ªÅ t·ª´ HOC, n√≥ s·∫Ω l·ªói</p>\n<p><img src=\"https://miro.medium.com/max/451/1*xTKe3DWJdC7nAVQnM4bvbg.png\"></p>\n<h2 id=\"enhance--inject\"><a href=\"#enhance--inject\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Enhance + Inject</h2>\n<p>K·∫øt h·ª£p c·∫£ 2 c√°ch l√†m n√†y l·∫°i, ch√∫ng ta s·∫Ω c√≥ m·ªôt component counter cho ph√©p ƒë∆∞a gi√° tr·ªã minimum v√† maximum</p>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">InjectedCounterProps</span> <span class=\"token punctuation\">{</span>\n  value<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onIncrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">onDecrement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">MakeCounterProps</span> <span class=\"token punctuation\">{</span>\n  minValue<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  maxValue<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">MakeCounterState</span> <span class=\"token punctuation\">{</span>\n  value<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> makeCounter <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">P</span></span> <span class=\"token attr-name\">extends</span> <span class=\"token attr-name\">InjectedCounterProps</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">(\n  Component: React.ComponentType&lt;P>\n) =>\n  class MakeCounter extends React.Component&lt;\n    Subtract&lt;P, InjectedCounterProps> &amp; MakeCounterProps,\n    MakeCounterState\n  > </span><span class=\"token punctuation\">{</span>\n    state<span class=\"token operator\">:</span> MakeCounterState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      value<span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function-variable function\">increment</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>prevState <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        value<span class=\"token operator\">:</span>\n          prevState<span class=\"token punctuation\">.</span>value <span class=\"token operator\">===</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>maxValue\n            <span class=\"token operator\">?</span> prevState<span class=\"token punctuation\">.</span>value\n            <span class=\"token operator\">:</span> prevState<span class=\"token punctuation\">.</span>value <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function-variable function\">decrement</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>prevState <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        value<span class=\"token operator\">:</span>\n          prevState<span class=\"token punctuation\">.</span>value <span class=\"token operator\">===</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>minValue\n            <span class=\"token operator\">?</span> prevState<span class=\"token punctuation\">.</span>value\n            <span class=\"token operator\">:</span> prevState<span class=\"token punctuation\">.</span>value <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> minValue<span class=\"token punctuation\">,</span> maxValue<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>props <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span>\n          <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">(</span>props <span class=\"token keyword\">as</span> <span class=\"token constant\">P</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">onIncrement</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>increment<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">onDecrement</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>decrement<span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token plain-text\">;</span></code></pre></div>\n<p><code class=\"language-inline-text\">Subtract</code> ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ k·∫øt h·ª£p c·∫£ nh·ªØng prop c·ªßa ch√≠nh component v√† prop c·ªßa HOC</p>\n<div class=\"gridsome-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">Subtract<span class=\"token operator\">&lt;</span><span class=\"token constant\">P</span><span class=\"token punctuation\">,</span> InjectedCounterProps<span class=\"token operator\">></span> <span class=\"token operator\">&amp;</span> MakeCounterProps</code></pre></div>\n<p>Ngo√†i ra kh√¥ng c√≤n g√¨ th·∫≠t s·ª± kh√°c nhau gi·ªØa 2 c√°ch l√†m n√†y c·∫ßn ph·∫£i n√≥i th√™m.</p>\n<p><a href=\"https://medium.com/@jrwebdev/react-higher-order-component-patterns-in-typescript-42278f7590fb\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://medium.com/@jrwebdev/react-higher-order-component-patterns-in-typescript-42278f7590fb</a></p>\n","cover_image":""}},{"node":{"id":"a1364f5619accd5fccc571ac43e797e6","title":"Ph∆∞∆°ng ph√°p test React Component","path":"/2020-01-09-phuong-phap-test-react-component/","date":"2020-01-09","timeToRead":12,"desc":"B√†i vi·∫øt ƒë∆∞·ª£c d·ªãch t·ª´ t√†i li·ªáu ch√≠nh th·ª©c c·ªßa React","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#c%C3%A0i-%C4%91%E1%BA%B7t-c%E1%BB%A5-th%E1%BB%83-setup--teardown\">C√†i ƒë·∫∑t c·ª• th·ªÉ {#setup--teardown}</a></li>\n<li><a href=\"#act-act\"><code class=\"language-inline-text\">act()</code> {#act}</a></li>\n<li><a href=\"#rendering-rendering\">Rendering {#rendering}</a></li>\n<li><a href=\"#fetch-d%E1%BB%AF-li%E1%BB%87u-data-fetching\">Fetch d·ªØ li·ªáu {#data-fetching}</a></li>\n<li><a href=\"#gi%E1%BA%A3-l%E1%BA%ADp-c%C3%A1c-module-mocking-modules\">Gi·∫£ l·∫≠p c√°c module {#mocking-modules}</a></li>\n<li><a href=\"#event-events\">Event {#events}</a></li>\n<li><a href=\"#timer-timers\">Timer {#timers}</a></li>\n<li><a href=\"#snapshot-test-snapshot-testing\">Snapshot Test {#snapshot-testing}</a></li>\n<li><a href=\"#multiple-renderer-multiple-renderers\">Multiple Renderer {#multiple-renderers}</a></li>\n<li><a href=\"#c%C3%B2n-thi%E1%BA%BFu-g%C3%AC-%C4%91%C3%B3-something-missing\">C√≤n thi·∫øu g√¨ ƒë√≥? {#something-missing}</a></li>\n</ul>\n<!-- /TOC -->\n<p>M·ªôt v√†i c√°ch vi·∫øt test ph·ªï bi·∫øn cho component React.</p>\n<blockquote>\n<p>L∆∞u √Ω:</p>\n<p>Trang n√†y m·∫∑c ƒë·ªãnh b·∫°n ƒëang d√πng <a href=\"https://jestjs.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Jest</a> l√†m test runner. N·∫øu d√πng m·ªôt test runner kh√°c, b·∫°n c·∫ßn thay ƒë·ªïi API cho ph√π h·ª£p, gi·∫£i ph√°p s·∫Ω g·∫ßn nh∆∞ nhau. ƒê·ªçc th√™m chi ti·∫øt c√°ch c√†i ƒë·∫∑t m√¥i tr∆∞·ªùng test ·ªü <a href=\"/docs/testing-environments.html\">M√¥i tr∆∞·ªùng Test</a>.</p>\n</blockquote>\n<p>Tr√™n trang n√†y, ch√∫ng t√¥i s·∫Ω t·∫≠p chung v√†o function component. Tuy nhi√™n, c√°ch ƒë·ªÉ ti·∫øp c·∫≠n test kh√¥ng ph·ª• thu·ªôc v√†o ph·∫ßn hi·ªán th·ª±c c·ª• th·ªÉ, n√≥ c≈©ng s·∫Ω l√†m vi·ªác t·ªët v·ªõi class component.</p>\n<ul>\n<li><a href=\"#setup--teardown\">C√†i ƒë·∫∑t c·ª• th·ªÉ</a></li>\n<li><a href=\"#act\"><code class=\"language-inline-text\">act()</code></a></li>\n<li><a href=\"#rendering\">Rendering</a></li>\n<li><a href=\"#data-fetching\">Data Fetching</a></li>\n<li><a href=\"#mocking-modules\">Mocking Modules</a></li>\n<li><a href=\"#events\">Events</a></li>\n<li><a href=\"#timers\">Timers</a></li>\n<li><a href=\"#snapshot-testing\">Snapshot Testing</a></li>\n<li><a href=\"#multiple-renderers\">Multiple Renderers</a></li>\n<li><a href=\"#something-missing\">Something Missing?</a></li>\n</ul>\n<hr>\n<h3 id=\"c√†i-ƒë·∫∑t-c·ª•-th·ªÉ-setup--teardown\"><a href=\"#c%C3%A0i-%C4%91%E1%BA%B7t-c%E1%BB%A5-th%E1%BB%83-setup--teardown\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C√†i ƒë·∫∑t c·ª• th·ªÉ {#setup--teardown}</h3>\n<p>Tr√™n m·ªói test, ch√∫ng ta th∆∞·ªùng mu·ªën render React tree c·ªßa ch√∫ng ta th√†nh DOM element v√† ch√®n n√≥ v√†o <code class=\"language-inline-text\">document</code>. Ch·ªâ nh∆∞ th·∫ø ch√∫ng ta m·ªõi nh·∫≠n ƒë∆∞·ª£c c√°c s·ª± ki·ªán tr√™n DOM. Khi k·∫øt th√∫c m·ªôt test, ch√∫ng ta mu·ªën \"d·ªçn d·∫πp\" v√† <em>g·ª° b·ªè</em> c√¢y n√†y kh·ªèi DOM.</p>\n<p>M·ªôt c√°ch ph·ªï bi·∫øn ƒë·ªÉ l√†m n√≥ l√† s·ª≠ d·ª•ng b·ªô ƒë√¥i <code class=\"language-inline-text\">beforeEach</code> v√† <code class=\"language-inline-text\">afterEach</code>, ƒë·ªÉ ch√∫ng lu√¥n ch·∫°y m·ªôt c√°ch ƒë·ªôc l·∫≠p v√† kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn test kh√°c:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> unmountComponentAtNode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// c√†i ƒë·∫∑t m·ªôt DOM element nh∆∞ l√† target cho render</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// d·ªçn d·∫πp l√∫c tho√°t</span>\n  <span class=\"token function\">unmountComponentAtNode</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>B·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng m·ªôt c√°ch kh√°c, nh∆∞ng h√£y nh·ªõ ch√∫ng ta mu·ªën ch·∫°y vi·ªác d·ªçn d·∫πp ngay c·∫£ khi test <em>fail</em>. N·∫øu kh√¥ng, test c√≥ th·ªÉ tr·ªü n√™n \"b·∫•t ·ªïn\", v√† m·ªôt test c√≥ th·ªÉ ·∫£nh h∆∞·ªüng ƒë·∫øn ho·∫°t ƒë·ªông c·ªßa test kh√°c. Nh∆∞ v·∫≠y s·∫Ω r·∫•t kh√≥ ƒë·ªÉ debug.</p>\n<hr>\n<h3 id=\"act-act\"><a href=\"#act-act\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">act()</code> {#act}</h3>\n<p>Khi vi·∫øt UI test, c√¥ng vi·ªác nh∆∞ render, s·ª± ki·ªán t·ª´ user, ho·∫∑c fetch d·ªØ li·ªáu c√≥ th·ªÉ ƒë∆∞·ª£c xem nh∆∞ m·ªôt \"ƒë∆°n v·ªã\" t∆∞∆°ng t√°c v·ªõi giao di·ªán ng∆∞·ªùi d√πng. React cung c·∫•p m·ªôt h√†m tr·ª£ gi√∫p <code class=\"language-inline-text\">act()</code> ƒë·ªÉ ƒë·∫£m b·∫£o t·∫•t c·∫£ m·ªçi c·∫≠p nh·∫≠p li√™n quan ƒë·∫øn \"ƒë∆°n v·ªã\" ƒë√£ ƒë∆∞·ª£c th·ª±c thi v√† √°p d·ª•ng ƒë·∫øn DOM tr∆∞·ªõc khi ch√∫ng ta x√°c nh·∫≠n k·∫øt qu·∫£:</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// render component</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// x√°c nh·∫≠n k·∫øt qu·∫£</span></code></pre></div>\n<p>N√≥ gi√∫p test ch·∫°y gi·ªëng nh·∫•t v·ªõi nh·ªØng g√¨ user nh·∫≠n ƒë∆∞·ª£c khi s·ª≠ d·ª•ng ·ª©ng d·ª•ng. T·∫•t c·∫£ nh·ªØng v√≠ d·ª• b√™n d∆∞·ªõi s·ª≠ d·ª•ng <code class=\"language-inline-text\">act()</code> ƒë·ªÉ ƒë·∫£m b·∫£o ƒëi·ªÅu n√†y.</p>\n<p>B·∫°n c√≥ th·ªÉ th·∫•y s·ª≠ d·ª•ng <code class=\"language-inline-text\">act()</code> tr·ª±c ti·∫øp r·∫•t r∆∞·ªùm r√†. ƒê·ªÉ tr√°nh r∆∞·ªùm r√†, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng m·ªôt th∆∞ vi·ªán nh∆∞ <a href=\"https://testing-library.com/react\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Testing Library</a>, c√°c h√†m h·ªó tr·ª£ ƒë√£ ƒë∆∞·ª£c wrap l·∫°i s·∫µn trong <code class=\"language-inline-text\">act()</code>.</p>\n<blockquote>\n<p>L∆∞u √Ω:</p>\n<p>T√™n <code class=\"language-inline-text\">act</code> c√≥ ngu·ªìn g·ªëc t·ª´ c√°ch l√†m <a href=\"http://wiki.c2.com/?ArrangeActAssert\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Arrange-Act-Assert</a>.</p>\n</blockquote>\n<hr>\n<h3 id=\"rendering-rendering\"><a href=\"#rendering-rendering\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Rendering {#rendering}</h3>\n<p>Th∆∞·ªùng th√¨, ch√∫ng ta mu·ªën test xem m·ªôt component render ƒë√∫ng hay kh√¥ng v·ªõi c√°c prop nh·∫≠n ƒë∆∞·ª£c. Xem x√©t m·ªôt component ƒë∆°n gi·∫£n s·∫Ω render m·ªôt th√¥ng tin d·ª±a v√†o prop:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// hello.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Hello</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hey, stranger</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta c√≥ th·ªÉ vi·∫øt test cho component:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// hello.test.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> unmountComponentAtNode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/test-utils\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> Hello <span class=\"token keyword\">from</span> <span class=\"token string\">\"./hello\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// c√†i ƒë·∫∑t m·ªôt DOM element nh∆∞ l√† target cho render</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// d·ªçn d·∫πp l√∫c tho√°t</span>\n  <span class=\"token function\">unmountComponentAtNode</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"renders with or without a name\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hello</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hey, stranger\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hello</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Jenny<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello, Jenny!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hello</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Margaret<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello, Margaret!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h3 id=\"fetch-d·ªØ-li·ªáu-data-fetching\"><a href=\"#fetch-d%E1%BB%AF-li%E1%BB%87u-data-fetching\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Fetch d·ªØ li·ªáu {#data-fetching}</h3>\n<p>Thay v√¨ g·ªçi APIs th·∫≠t trong test, ch√∫ng ta c√≥ th·ªÉ gi·∫£ l·∫≠p c√°c request n√†y b·∫±ng d·ªØ li·ªáu gi·∫£. Gi·∫£ l·∫≠p d·ªØ li·ªáu v·ªõi d·ªØ li·ªáu \"fake\" ƒë·ªÉ tr√°nh ·∫£nh h∆∞·ªüng ƒë·∫øn test khi backend kh√¥ng s·ª≠ d·ª•ng ƒë∆∞·ª£c, v√† ƒë·ªÉ n√≥ ch·∫°y nhanh h∆°n. L∆∞u √Ω: b·∫°n c√≥ th·ªÉ mu·ªën n√≥ ch·∫°y danh s√°ch c√°c test con s·ª≠ d·ª•ng framework <a href=\"/docs/testing-environments.html#end-to-end-tests-aka-e2e-tests\">\"end-to-end\"</a> ƒë·ªÉ xem to√†n b·ªô ·ª©ng d·ª•ng c√≥ l√†m vi·ªác v·ªõi nhau kh√¥ng.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// user.js</span>\n\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">User</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>user<span class=\"token punctuation\">,</span> setUser<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">fetchUserData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span> <span class=\"token operator\">+</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setUser</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetchUserData</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>user<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"loading...\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>details</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>summary</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>summary</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>strong</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>strong</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> years old\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      lives in </span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>details</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>B·∫°n c√≥ th·ªÉ vi·∫øt test cho n√≥:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// user.test.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> unmountComponentAtNode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/test-utils\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> User <span class=\"token keyword\">from</span> <span class=\"token string\">\"./user\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// c√†i ƒë·∫∑t m·ªôt DOM element nh∆∞ l√† target cho render</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// d·ªçn d·∫πp l√∫c tho√°t</span>\n  <span class=\"token function\">unmountComponentAtNode</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"renders user data\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> fakeUser <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Joni Baez\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token string\">\"32\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">address</span><span class=\"token operator\">:</span> <span class=\"token string\">\"123, Charming Avenue\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  jest<span class=\"token punctuation\">.</span><span class=\"token function\">spyOn</span><span class=\"token punctuation\">(</span>global<span class=\"token punctuation\">,</span> <span class=\"token string\">\"fetch\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockImplementation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">json</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>fakeUser<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// s·ª≠ d·ª•ng m·ªôt phi√™n b·∫£n async ƒë·ªÉ √°p d·ª•ng resolved promise</span>\n  <span class=\"token keyword\">await</span> <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>123<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"summary\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span>fakeUser<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"strong\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span>fakeUser<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toContain</span><span class=\"token punctuation\">(</span>fakeUser<span class=\"token punctuation\">.</span>address<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// x√≥a gi·∫£ l·∫≠p ƒë·ªÉ ƒë·∫£m b·∫£o test ch·∫°y t√°ch bi·ªát</span>\n  global<span class=\"token punctuation\">.</span>fetch<span class=\"token punctuation\">.</span><span class=\"token function\">mockRestore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h3 id=\"gi·∫£-l·∫≠p-c√°c-module-mocking-modules\"><a href=\"#gi%E1%BA%A3-l%E1%BA%ADp-c%C3%A1c-module-mocking-modules\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Gi·∫£ l·∫≠p c√°c module {#mocking-modules}</h3>\n<p>M·ªôt v√†i module kh√¥ng l√†m vi·ªác t·ªët trong m√¥i tr∆∞·ªùng test, ho·∫∑c kh√¥ng c·∫ßn thi·∫øt cho test ƒë√≥. Gi·∫£ l·∫≠p c√°c module n√†y b·∫±ng dummy ƒë·ªÉ d·ªÖ d√†ng test h∆°n ph·∫ßn code c·ªßa ch√∫ng ta.</p>\n<p>Component <code class=\"language-inline-text\">Contact</code> c√≥ nh√∫ng m·ªôt component third-party <code class=\"language-inline-text\">GoogleMap</code>:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// map.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> LoadScript<span class=\"token punctuation\">,</span> GoogleMap <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-google-maps\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LoadScript</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>script-loader<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">googleMapsApiKey</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>YOUR_API_KEY<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GoogleMap</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>example-map<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">center</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">LoadScript</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// contact.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Map <span class=\"token keyword\">from</span> <span class=\"token string\">\"./map\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Contact</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>address</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Contact </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> via</span><span class=\"token punctuation\">{</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">data-testid</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">\"mailto:\"</span> <span class=\"token operator\">+</span> props<span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          email\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        or on their </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">data-testid</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>site<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>site<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          website\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">.\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>address</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Map</span></span> <span class=\"token attr-name\">center</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>N·∫øu kh√¥ng mu·ªën load component <code class=\"language-inline-text\">GoogleMap</code> trong test c·ªßa ch√∫ng ta, gi·∫£ l·∫≠p b·∫±ng m·ªôt dummy component v√† ch·∫°y test:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// contact.test.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> unmountComponentAtNode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/test-utils\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> Contact <span class=\"token keyword\">from</span> <span class=\"token string\">\"./contact\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> MockedMap <span class=\"token keyword\">from</span> <span class=\"token string\">\"./map\"</span><span class=\"token punctuation\">;</span>\n\njest<span class=\"token punctuation\">.</span><span class=\"token function\">mock</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./map\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token function\">DummyMap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">data-testid</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>map<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">.</span>lat<span class=\"token punctuation\">}</span><span class=\"token plain-text\">:</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">.</span>long<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// c√†i ƒë·∫∑t m·ªôt DOM element nh∆∞ l√† target cho render</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// d·ªçn d·∫πp l√∫c tho√°t</span>\n  <span class=\"token function\">unmountComponentAtNode</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"should render contact information\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> center <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">long</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Contact</span></span>\n        <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Joni Baez<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">email</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>test@example.com<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">site</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://test.com<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">center</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>center<span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span>\n      container\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>\n    container<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[data-testid='email']\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"href\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mailto:test@example.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>\n    container<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[data-testid=\"site\"]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"href\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"http://test.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[data-testid=\"map\"]'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toEqual</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"0:0\"</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h3 id=\"event-events\"><a href=\"#event-events\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Event {#events}</h3>\n<p>Ch√∫ng t√¥i khuy·∫øn ngh·ªã dispatch m·ªôt event DOM th·∫≠t tr√™n DOM element, v√† ƒë·∫∑t ph·∫ßn x√°c nh·∫≠n k·∫øt qu·∫£. Xem m·ªôt component <code class=\"language-inline-text\">Toggle</code>:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// toggle.js</span>\n\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Toggle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n      <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">previousState</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>previousState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        props<span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">data-testid</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>toggle<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>state <span class=\"token operator\">===</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"Turn off\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"Turn on\"</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta c√≥ th·ªÉ vi·∫øt test cho n√≥:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// toggle.test.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> unmountComponentAtNode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/test-utils\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> Toggle <span class=\"token keyword\">from</span> <span class=\"token string\">\"./toggle\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// c√†i ƒë·∫∑t m·ªôt DOM element nh∆∞ l√† target cho render</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// container *ph·∫£i* ƒë∆∞·ª£c ch√®n v√†o document ƒë·ªÉ event ch·∫°y ƒë√∫ng.</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// d·ªçn d·∫πp l√∫c tho√°t</span>\n  <span class=\"token function\">unmountComponentAtNode</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"changes value when clicked\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> onChange <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Toggle</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// l·∫•y to√†n b·ªô c√°c element, v√† trigger m·ªôt v√†i s·ª± ki·ªán click</span>\n  <span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[data-testid=toggle]\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Turn on\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    button<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MouseEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">bubbles</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>onChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Turn off\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      button<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MouseEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">bubbles</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>onChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledTimes</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Turn on\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>C√°c event DOM v√† thu·ªôc t√≠nh ƒë∆∞·ª£c m√¥ t·∫£ trong <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">MDN</a>. L∆∞u √Ω b·∫°n ph·∫£i truy·ªÅn v√†o <code class=\"language-inline-text\">{ bubbles: true }</code> tr√™n t·ª´ng event b·∫°n t·∫°o cho n√≥ ƒë·ªÉ ƒë·∫øn React listener v√¨ React t·ª± ƒë·ªông truy·ªÅn c√°c event n√†y ƒë·∫øn document.</p>\n<blockquote>\n<p>L∆∞u √Ω:</p>\n<p>React Testing Library cung c·∫•p <a href=\"https://testing-library.com/docs/dom-testing-library/api-events\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">m·ªôt s·ªë h√†m h·ªó tr·ª£</a> cho vi·ªác b·∫Øn s·ª± ki·ªán.</p>\n</blockquote>\n<hr>\n<h3 id=\"timer-timers\"><a href=\"#timer-timers\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Timer {#timers}</h3>\n<p>Code c√≥ th·ªÉ s·ª≠ d·ª•ng h√†m li√™n quan th·ªùi gian nh∆∞ <code class=\"language-inline-text\">setTimeout</code> ƒë·ªÉ l√™n l·ªãch c√°c c√¥ng vi·ªác s·∫Ω th·ª±c hi·ªán trong t∆∞∆°ng lai. Trong v√≠ d·ª•, m·ªôt c·ª≠a s·ªï nhi·ªÅu l·ª±a ch·ªçn ƒë·ª£i cho ƒë·∫øn khi c√≥ l·ª±a ch·ªçn, n·∫øu sau 5 gi√¢y s·∫Ω kh√¥ng th·ªÉ ch·ªçn:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// card.js</span>\n\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Card</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> timeoutID <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      props<span class=\"token punctuation\">.</span><span class=\"token function\">onSelect</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timeoutID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>onSelect<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">choice</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n      <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>choice<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">data-testid</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>choice<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> props<span class=\"token punctuation\">.</span><span class=\"token function\">onSelect</span><span class=\"token punctuation\">(</span>choice<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>choice<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta c√≥ th·ªÉ vi·∫øt test cho component b·∫±ng c√°ch d√πng <a href=\"https://jestjs.io/docs/en/timer-mocks\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Jest's timer mocks</a> v√† test s·ª± kh√°c nhau c·ªßa state.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// card.test.js</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> unmountComponentAtNode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/test-utils\"</span><span class=\"token punctuation\">;</span>\n\njest<span class=\"token punctuation\">.</span><span class=\"token function\">useFakeTimers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// c√†i ƒë·∫∑t m·ªôt DOM element nh∆∞ l√† target cho render</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// d·ªçn d·∫πp l√∫c tho√°t</span>\n  <span class=\"token function\">unmountComponentAtNode</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"should select null after timing out\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> onSelect <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Card</span></span> <span class=\"token attr-name\">onSelect</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onSelect<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ch·∫°y ƒë·∫øn l√∫c 100ms</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    jest<span class=\"token punctuation\">.</span><span class=\"token function\">advanceTimersByTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>onSelect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>not<span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// v√† ch·∫°y ƒë·∫øn l√∫c 5 gi√¢y</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    jest<span class=\"token punctuation\">.</span><span class=\"token function\">advanceTimersByTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>onSelect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"should cleanup on being removed\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> onSelect <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Card</span></span> <span class=\"token attr-name\">onSelect</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onSelect<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    jest<span class=\"token punctuation\">.</span><span class=\"token function\">advanceTimersByTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>onSelect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>not<span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// unmount app</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    jest<span class=\"token punctuation\">.</span><span class=\"token function\">advanceTimersByTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>onSelect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>not<span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"should accept selections\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> onSelect <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Card</span></span> <span class=\"token attr-name\">onSelect</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onSelect<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    container\n      <span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[data-testid='2']\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MouseEvent</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">bubbles</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>onSelect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>B·∫°n c√≥ th·ªÉ gi·∫£ l·∫≠p th·ªùi gian trong m·ªôt test. ·ªû tr√™n, ch√∫ng ta b·∫≠t l√™n b·∫±ng c√°ch g·ªçi <code class=\"language-inline-text\">jest.useFakeTimers()</code>. ∆Øu ƒëi·ªÉm ch√≠nh c·ªßa ch√∫ng cho ta l√† test kh√¥ng c·∫ßn th·ª±c s·ª± ƒë·ª£i ƒë·∫øn 5 gi√¢y ƒë·ªÉ ch·∫°y, v√† b·∫°n c≈©ng kh√¥ng c·∫ßn thay ƒë·ªïi component ƒë·ªÉ ph·ª•c v·ª• vi·ªác test.</p>\n<hr>\n<h3 id=\"snapshot-test-snapshot-testing\"><a href=\"#snapshot-test-snapshot-testing\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Snapshot Test {#snapshot-testing}</h3>\n<p>Framework nh∆∞ Jest cho ch√∫ng ta l∆∞u \"·∫£nh\" v·ªõi <a href=\"https://jestjs.io/docs/en/snapshot-testing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-inline-text\">toMatchSnapshot</code> / <code class=\"language-inline-text\">toMatchInlineSnapshot</code></a>. V·ªõi ch√∫ng, b·∫°n c√≥ th·ªÉ \"l∆∞u\" m·ªôt k·∫øt qu·∫£ render v√† ƒë·∫£m b·∫£o m·ªôt thay ƒë·ªïi c√≥ th·ªÉ l√†m thay ƒë·ªïi c·ªßa k·∫øt qu·∫£ snapshot.</p>\n<p>Trong v√≠ d·ª•, ch√∫ng ta render m·ªôt component v√† ƒë·ªãnh d·∫°ng HTML ƒë√£ render v·ªõi th∆∞ vi·ªán <a href=\"https://www.npmjs.com/package/pretty\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-inline-text\">pretty</code></a>, tr∆∞·ªõc khi l∆∞u n√≥ nh∆∞ m·ªôt snapshot inline:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// hello.test.js, again</span>\n\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> render<span class=\"token punctuation\">,</span> unmountComponentAtNode <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/test-utils\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> pretty <span class=\"token keyword\">from</span> <span class=\"token string\">\"pretty\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> Hello <span class=\"token keyword\">from</span> <span class=\"token string\">\"./hello\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">beforeEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// c√†i ƒë·∫∑t m·ªôt DOM element nh∆∞ l√† target cho render</span>\n  container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">afterEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// d·ªçn d·∫πp l√∫c tho√°t</span>\n  <span class=\"token function\">unmountComponentAtNode</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  container <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"should render a greeting\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hello</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">pretty</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatchInlineSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">/* ... ƒë∆∞·ª£c t·ª± ƒë·ªông ƒëi·ªÅn b·ªüi jest ... */</span>\n\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hello</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Jenny<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">pretty</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatchInlineSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">/* ... ƒë∆∞·ª£c t·ª± ƒë·ªông ƒëi·ªÅn b·ªüi jest ... */</span>\n\n  <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hello</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Margaret<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">pretty</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">.</span>innerHTML<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatchInlineSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">/* ... ƒë∆∞·ª£c t·ª± ƒë·ªông ƒëi·ªÅn b·ªüi jest ... */</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Th∆∞·ªùng s·∫Ω t·ªët h∆°n n·∫øu ch·ªâ r√µ k·∫øt qu·∫£ mu·ªën nh·∫≠n ƒë∆∞·ª£c thay v√¨ snapshot. Nh·ªØng ki·ªÉu test n√†y bao g·ªìm ph·∫ßn hi·ªán th·ª±c chi ti·∫øt ƒë·ªÉ ch√∫ng d·ªÖ d√†ng b·ªã fail. Ch·ªçn <a href=\"#mocking-modules\">gi·∫£ l·∫≠p m·ªôt v√†i component con</a> c√≥ th·ªÉ gi√∫p gi·∫£m k√≠ch th∆∞·ªõc snapshot v√† gi·ªØ ch√∫ng d·ªÖ ƒë·ªôc l√∫c review code.</p>\n<hr>\n<h3 id=\"multiple-renderer-multiple-renderers\"><a href=\"#multiple-renderer-multiple-renderers\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Multiple Renderer {#multiple-renderers}</h3>\n<p>Trong nh·ªØng t√¨nh hu·ªëng hi·∫øm, b·∫°n c√≥ th·ªÉ ch·∫°y m·ªôt test tr√™n m·ªôt component s·ª≠ d·ª•ng multiple renderer. L·∫•y v√≠ d·ª•, b·∫°n c√≥ th·ªÉ ch·∫°y snapshot test tr√™n m·ªôt component v·ªõi <code class=\"language-inline-text\">react-test-renderer</code>, b√™n trong ƒë√≥ n√≥ d√πng <code class=\"language-inline-text\">ReactDOM.render</code>trong m·ªôt child component ƒë·ªÉ render m·ªôt v√†i n·ªôi dung. T√¨nh hu·ªëng ƒë√≥, b·∫°n c√≥ th·ªÉ wrap ph·∫ßn c·∫≠p nh·∫≠p v·ªõi <code class=\"language-inline-text\">act()</code> ·ª©ng v·ªõi t·ª´ng renderer</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token keyword\">as</span> domAct <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom/test-utils\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> act <span class=\"token keyword\">as</span> testAct<span class=\"token punctuation\">,</span> create <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-test-renderer\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ...</span>\n<span class=\"token keyword\">let</span> root<span class=\"token punctuation\">;</span>\n<span class=\"token function\">domAct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">testAct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    root <span class=\"token operator\">=</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatchSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h3 id=\"c√≤n-thi·∫øu-g√¨-ƒë√≥-something-missing\"><a href=\"#c%C3%B2n-thi%E1%BA%BFu-g%C3%AC-%C4%91%C3%B3-something-missing\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C√≤n thi·∫øu g√¨ ƒë√≥? {#something-missing}</h3>\n<p>N·∫øu c√°c t√¨nh hu·ªëng hay g·∫∑p kh√¥ng ƒë∆∞·ª£c ƒë·ªÅ c·∫≠p ·ªü ƒë√¢y, c√≥ th·ªÉ li√™n h·ªá v·ªõi ch√∫ng t√¥i qua <a href=\"https://github.com/reactjs/reactjs.org/issues\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">issue tracker</a> cho to√†n b·ªô t√†i li·ªáu c·ªßa website</p>\n","cover_image":""}},{"node":{"id":"349aadd0da40a81b9f8c94db06172ce3","title":"S·ª≠ d·ª•ng useReducer v√† useContext ƒë·ªÉ l√†m global state","path":"/2020-01-08-su-dung-context-de-lam-global-store-trong-react/","date":"2020-01-08","timeToRead":3,"desc":"","content":"<p>Th√¥ng th∆∞·ªùng ch√∫ng ta s·∫Ω d√πng m·ªôt <em>nh√† kho</em> ƒë·ªÉ ch·ª©a d·ªØ li·ªáu <code class=\"language-inline-text\">state</code> nh∆∞ <em>Redux</em>, m·ªôt component container b·ªçc ·ªü n√∫t ƒë·∫ßu ti√™n trong app, c√°c component con b√™n trong c√≥ th·ªÉ truy xu·∫•t v√† c·∫≠p nh·∫≠p c√°c d·ªØ li·ªáu m·ªôt c√°ch d·ªÖ d√†ng</p>\n<p>V·ªõi c√°c API m·ªõi ƒë∆∞·ª£c React b·ªï sung l√† <code class=\"language-inline-text\">useState</code>, <code class=\"language-inline-text\">createContext</code>, <code class=\"language-inline-text\">useContext</code> ch√∫ng ta c√≥ <em>th√™m m·ªôt l·ª±a ch·ªçn</em> ƒë·ªÉ l√†m <em>nh√† kho</em> m√† ko c·∫ßn d√πng ƒë·∫øn Redux</p>\n<p>V√≠ d·ª• ch√∫ng ta c√≥ 3 d·ªØ li·ªáu nh∆∞ b√™n d∆∞·ªõi</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> teamMembersNames <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"John\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Mary\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Jason\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"David\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>sharing<span class=\"token punctuation\">,</span> setSharing<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>help<span class=\"token punctuation\">,</span> setHelp<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>pairing<span class=\"token punctuation\">,</span> setPairing<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>teamMembersNames<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>C√¢u h·ªèi l√† l√†m sao ch√∫ng ta ƒë∆∞a d·ªØ li·ªáu v√†o <em>nh√† kho</em>. Ch√∫ng ta s·∫Ω d√πng API <code class=\"language-inline-text\">createContext</code> (t·∫°o em c√°i kho)</p>\n<p>Khi s·ª≠ d·ª•ng <code class=\"language-inline-text\">React.createContext</code> ch√∫ng ta s·∫Ω nh·∫≠n v·ªÅ 2 component l√† <code class=\"language-inline-text\">Provider</code> (anh tung) v√† <code class=\"language-inline-text\">Consumer</code> (em h·ª©ng).</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ./src/utils/store.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> StoreContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// c√°c em ƒë√£ v√†o nh√† kho</span>\n  <span class=\"token keyword\">const</span> teamMembersNames <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"John\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Mary\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Jason\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"David\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>sharing<span class=\"token punctuation\">,</span> setSharing<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>help<span class=\"token punctuation\">,</span> setHelp<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>pairing<span class=\"token punctuation\">,</span> setPairing<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>teamMembersNames<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">sharing</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>sharing<span class=\"token punctuation\">,</span> setSharing<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">help</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>help<span class=\"token punctuation\">,</span> setHelp<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">pairing</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>pairing<span class=\"token punctuation\">,</span> setPairing<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">StoreContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>store<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">StoreContext.Provider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ƒê·ªÉ c√°c component b√™n trong <code class=\"language-inline-text\">&lt;App/></code> ƒë·ªÅu d√πng ƒë∆∞·ª£c <code class=\"language-inline-text\">&lt;Consumer /></code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ./index.js</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">\"./App\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> StoreProvider <span class=\"token keyword\">from</span> <span class=\"token string\">\"./utils/store\"</span><span class=\"token punctuation\">;</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">StoreProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">StoreProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>V·ªõi b·∫•t k·ª≥ component n√†o mu·ªën s·ª≠ d·ª•ng, ƒë·ªÉ l·∫•y ƒë∆∞·ª£c d·ªØ li·ªáu trong store, ch√∫ng ta s·ª≠ d·ª•ng <code class=\"language-inline-text\">useContext</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> StoreContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../utils/store\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">SomeComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// d·ªØ li·ªáu d√πng chung</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> sharing <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>StoreContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ho·∫∑c n·∫øu th√≠ch d√πng c√°ch vi·∫øt render props, c√≥ th·ªÉ d√πng lu√¥n component <code class=\"language-inline-text\">&lt;Consumer/></code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">StoreContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span><span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">InputComponent</span></span> <span class=\"token attr-name\">store</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>store<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">StoreContext.Consumer</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"·ª©ng-d·ª•ng-l√†m-useauth\"><a href=\"#%E1%BB%A9ng-d%E1%BB%A5ng-l%C3%A0m-useauth\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>·ª®ng d·ª•ng l√†m <code class=\"language-inline-text\">useAuth</code></h2>\n<p>M·ªôt trong nh·ªØng v√≠ d·ª• d·ªÖ th·∫•y, ph·∫ßn d·ªØ li·ªáu n√™n ƒë∆∞a v√†o <em>nh√† kho chung</em> l√† ph·∫ßn th√¥ng tin user ƒëang ƒëƒÉng nh·∫≠p</p>\n<p>Ch√∫ng ta s·∫Ω c·∫ßn 3 ph·∫ßn</p>\n<ol>\n<li>Khai b√°o m·ªôt nh√† kho b·∫±ng <code class=\"language-inline-text\">createContext</code></li>\n<li>B·ªô <code class=\"language-inline-text\">reducer</code> l√†m nhi·ªám v·ª• c·∫≠p nh·∫≠p x·ª≠ l√Ω <code class=\"language-inline-text\">state</code></li>\n<li>M·ªôt hook t√πy bi·∫øn <code class=\"language-inline-text\">useAuth</code> cung c·∫•p c√°c API c·∫ßn thi·∫øt ƒë·ªÉ t∆∞∆°ng t√°c v·ªõi <em>nh√† kho chung</em> ƒë√£ khai b√°o</li>\n</ol>\n<p>1) <strong>AuthProvider.js</strong> Khai b√°o nh√† kho (b·∫£n r√∫t g·ªçn)</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// AuthProvider.js</span>\n<span class=\"token keyword\">import</span> authReducer <span class=\"token keyword\">from</span> <span class=\"token string\">\"authReducer\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> AuthContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">AuthProvider</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// kh·ªüi t·∫°o</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>authReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AuthContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">AuthContext.Provider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ol start=\"2\">\n<li><strong>authReducer.js</strong> (b·∫£n r√∫t g·ªçn)</li>\n</ol>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// authReducer.js</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">authReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"login\"</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> authResult<span class=\"token punctuation\">,</span> user <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> action<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> expiresAt <span class=\"token operator\">=</span> authResult<span class=\"token punctuation\">.</span>expiresIn <span class=\"token operator\">*</span> <span class=\"token number\">1000</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"expires_at\"</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>expiresAt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> user<span class=\"token punctuation\">,</span> expiresAt <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"logout\"</span><span class=\"token operator\">:</span>\n      localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">removeItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"expires_at\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">removeItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">user</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">expiresAt</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"3\">\n<li>M·ªôt hook t√πy bi·∫øn <strong><code class=\"language-inline-text\">useAuth</code></strong></li>\n</ol>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// useAuth.js</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AuthProvider <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"AuthProvider\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useAuth</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> state<span class=\"token punctuation\">,</span> dispatch <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">userContext</span><span class=\"token punctuation\">(</span>AuthContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">login</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// l√†m g√¨ ƒë√≥ ·ªü ƒë√¢y</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">logout</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// l√†m g√¨ ƒë√≥ ·ªü ƒë√¢y</span>\n        <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"logout\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// ...  c√≤n m·ªôt s·ªë th·ª©c kh√°c</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isAuthenticated</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">.</span>expiresAt <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> state<span class=\"token punctuation\">.</span>expiresAt<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ...  c√≤n m·ªôt s·ªë th·ª©c kh√°c</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        isAuthenticated<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">user</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">userId</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>user <span class=\"token operator\">?</span> state<span class=\"token punctuation\">.</span>user <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        login<span class=\"token punctuation\">,</span>\n        logout<span class=\"token punctuation\">,</span>\n        handleAuthentication\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>V·ªõi c√°ch l√†m n√†y, b·∫•t k·ª≥ component n√†o s·ª≠ d·ª•ng <code class=\"language-inline-text\">useAuth</code> ƒë·ªÅu s·∫Ω truy xu·∫•t ƒë·∫øn m·ªôt kho d·ªØ li·ªáu <em>chung</em></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> useAuth <span class=\"token keyword\">from</span> <span class=\"token string\">\"useAuth\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MyCom</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* qu√° tr·ªùi th·ª© linh tinh tr·∫£ v·ªÅ */</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useAuth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><a href=\"https://swizec.com/blog/usereducer-usecontext-for-easy-global-state-without-libraries/swizec/9182\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">useReducer + useContext for easy global state without libraries</a></p>\n<p><a href=\"https://dev.to/nazmifeeroz/using-usecontext-and-usestate-hooks-as-a-store-mnm\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Using useContext and useState hooks as a store</a></p>\n","cover_image":""}},{"node":{"id":"e48f241d053eb1fd1df12d270dc6c371","title":"Khi n√†o n√™n s·ª≠ d·ª•ng useLayoutEffect thay v√¨ useEffect","path":"/2020-01-02-khi-nao-nen-su-dung-uselayouteffect-trong-react/","date":"2020-01-02","timeToRead":2,"desc":"2 React Hook l√†m nhi·ªám v·ª• kh√° gi·ªëng nhau l√† useEffect v√† useLayoutEffect b·∫°n ƒë√£ bi·∫øt c√°ch s·ª≠ d·ª•ng th·∫ø n√†o cho ƒë√∫ng","content":"<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// th·ª±c hi·ªán side effect</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token comment\">/* d·ªçn r√°c */</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>khai b√°o c√°c gi√° tr·ªã m√† n√≥ ph·ª• thu·ªôc<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">useLayoutEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// th·ª±c hi·ªán side effect</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token comment\">/* d·ªçn r√°c */</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>th·ª±c hi·ªán side effect<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>N·∫øu ko c√≥ kh√°c nhau th√¨ React team s·∫Ω kh√¥ng t·∫°o ra 2 th·∫±ng, hi·ªÉn nhi√™n?. (H·∫ßu nh∆∞ c√≥ th·ªÉ d·ª•ng <code class=\"language-inline-text\">useEffect</code> trong m·ªçi t√¨nh hu·ªëng)</p>\n<p>Kh√°c nhau l√† ·ªü <strong>TH·ªúI GIAN TH·ª∞C HI·ªÜN</strong></p>\n<p><code class=\"language-inline-text\">useEffect</code> ch·∫°y <strong>b·∫•t tu·∫ßn t·ª±</strong> v√† ƒë·ª£i <strong>sau</strong> khi vi·ªác component ƒë√£ xu·∫•t hi·ªán tr√™n m√†n h√¨nh (sau khi tr√¨nh duy·ªát <em>paint</em>)</p>\n<p>Qu√° tr√¨nh c·ª• th·∫ø l√† th·∫ø n√†y</p>\n<ol>\n<li>Component g·ªçi ƒë·∫øn <code class=\"language-inline-text\">render</code></li>\n<li>M√†n h√¨nh c·∫≠p nh·∫≠p l·∫°i UI m·ªõi</li>\n<li><strong>SAU ƒê√ì</strong> ch·∫°y <code class=\"language-inline-text\">useEffect</code></li>\n</ol>\n<p><code class=\"language-inline-text\">useLayoutEffect</code>, ng∆∞·ª£c l·∫°i, ch·∫°y <strong>tu·∫ßn t·ª±</strong> sau khi render nh∆∞ng l√† <strong>tr∆∞·ªõc</strong> khi UI c·∫≠p nh·∫≠p</p>\n<p>Qu√° tr√¨nh</p>\n<ol>\n<li>Component g·ªçi ƒë·∫øn <code class=\"language-inline-text\">render</code></li>\n<li><code class=\"language-inline-text\">useLayoutEffect</code> ƒë∆∞·ª£c g·ªçi, ƒë·ª£i ch·∫°y xong m·ªõi ƒëi ti·∫øp</li>\n<li>M√†n h√¨nh c·∫≠p nh·∫≠p l·∫°i UI m·ªõi</li>\n</ol>\n<p>Trong 99% c√°c tr∆∞·ªùng h·ª£p, s·ª≠ d·ª•ng <code class=\"language-inline-text\">useEffect</code>  s·∫Ω l√† c√°ch t·ªët nh·∫•t, v√¨ nh·ªØng effect c·ªßa ch√∫ng ta s·∫Ω c·∫ßn ƒë·ªìng b·ªô v·ªõi prop, state, kh√¥ng c·∫ßn x·∫£y ra <strong>NGAY L·∫¨P T·ª®C</strong> v√† kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn k·∫øt qu·∫£ cu·ªëi c√πng c·ªßa UI.</p>\n<p>V√≠ d·ª• nh∆∞ fetch d·ªØ li·ªáu s·∫Ω kh√¥ng c·∫ßn c√≥ k·∫øt qu·∫£ ngay l·∫≠p t·ª©c, hay ƒë·∫∑t ƒë·ªÉ c√°c event handler</p>\n<p>N·∫øu th·∫•y UI b·ªã <code class=\"language-inline-text\">flickering</code> (gi·ªëng nh∆∞ xu·∫•t hi·ªán s·ªçc s·ªçc tr√™n m√†n h√¨nh tivi) khi c·∫≠p nh·∫≠p, nguy√™n nh√¢n do n√≥ ƒë√£ render khi <em>v·ª´a c√≥</em> state, sau ƒë√≥ l·∫°i re-render l·∫°i v·ªõi state nh·∫≠n ƒë∆∞·ª£c sau c√πng. ƒê√≥ l√† l√∫c b·∫°n d√πng <code class=\"language-inline-text\">useLayoutEffect</code></p>\n<p>V√≠ d·ª• nh√©, b·∫°n cho user click ƒë·ªÉ thay ƒë·ªïi state <code class=\"language-inline-text\">value</code>, n√≥ s·∫Ω re-render component, sau ƒë√≥ effect ch·∫°y, n√≥ l·∫°i set gi√° tr·ªã <code class=\"language-inline-text\">value</code> th√†nh m·ªôt con s·ªë ng·∫´u nhi√™n => l·∫°i re-render component.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  useState<span class=\"token punctuation\">,</span>\n  useLayoutEffect\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">BlinkyRender</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">,</span> setValue<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useLayoutEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span> <span class=\"token operator\">+</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'render'</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      value: </span><span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span> <span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BlinkyRender</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#root'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>V·ªõi c√°ch d√πng <code class=\"language-inline-text\">useLayoutEffect</code> ch√∫ng ta ch·ªâ c·∫≠p nh·∫≠p UI ƒë√∫ng <strong>1</strong> l·∫ßn, trong khi component g·ªçi render <strong>2</strong> l·∫ßn.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://daveceddia.com/useeffect-vs-uselayouteffect/\">üìú When to useLayoutEffect Instead of useEffect</a></p>\n","cover_image":""}},{"node":{"id":"c3b0c1585f2bb1dbf4887da537c56854","title":"Ch·ªâ d·∫´n vi·∫øt Redux sao cho chu·∫©n","path":"/2020-01-01-chi-dan-viet-redux-sao-cho-chuan/","date":"2020-01-01","timeToRead":15,"desc":"ƒê√¢y kh√¥ng ph·∫£i l√† quan ƒëi·ªÉm c√° nh√¢n, b√†i vi·∫øt ƒë∆∞·ª£c d·ªãch thu·∫≠t t·ª´ t√†i li·ªáu ch√≠nh th·ª©c c·ªßa Redux","content":"<!-- TOC -->\n<ul>\n<li>\n<p><a href=\"#a-b%E1%BA%AFt-bu%E1%BB%99c\">A. B·∫Øt bu·ªôc</a></p>\n<ul>\n<li><a href=\"#ko-mutate-state\">Ko mutate state</a></li>\n<li><a href=\"#reducer-ko-%C4%91%C6%B0%E1%BB%A3c-c%C3%B3-side-effect\">Reducer ko ƒë∆∞·ª£c c√≥ side effect</a></li>\n<li><a href=\"#kh%C3%B4ng-%C4%91%C6%B0a-c%C3%A1c-gi%C3%A1-tr%E1%BB%8B-non-serialize-v%C3%A0o-trong-action-v%C3%A0-state\">Kh√¥ng ƒë∆∞a c√°c gi√° tr·ªã Non-Serialize v√†o trong action v√† state</a></li>\n<li><a href=\"#ch%E1%BB%89-m%E1%BB%99t-redux-store-cho-app\">Ch·ªâ m·ªôt Redux store cho app</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#b-c%E1%BB%B1c-k%E1%BB%B3-khuy%E1%BA%BFn-kh%C3%ADch\">B. C·ª±c k·ª≥ khuy·∫øn kh√≠ch</a></p>\n<ul>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-redux-toolkit-%C4%91%E1%BB%83-vi%E1%BA%BFt-redux-logic\">S·ª≠ d·ª•ng Redux Toolkit ƒë·ªÉ vi·∫øt Redux logic</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-immer-%C4%91%E1%BB%83-c%E1%BA%ADp-nh%E1%BA%ADp-gi%C3%A1-tr%E1%BB%8B-store\">S·ª≠ d·ª•ng Immer ƒë·ªÉ c·∫≠p nh·∫≠p gi√° tr·ªã store</a></li>\n<li><a href=\"#c%E1%BA%A5u-tr%C3%BAc-file-v%C3%A0-th%C6%B0-m%E1%BB%A5c\">C·∫•u tr√∫c file v√† th∆∞ m·ª•c</a></li>\n<li><a href=\"#%C4%91%C6%B0a-c%C3%A0ng-nhi%E1%BB%81u-logic-v%C3%A0-trong-reducer-c%C3%A0ng-t%E1%BB%91t\">ƒê∆∞a c√†ng nhi·ªÅu logic v√† trong reducer c√†ng t·ªët</a></li>\n<li><a href=\"#reducer-c%E1%BA%A7n-n%E1%BA%AFm-r%C3%B5-c%E1%BA%A5u-tr%C3%BAc-c%E1%BB%A7a-state\">Reducer c·∫ßn n·∫Øm r√µ c·∫•u tr√∫c c·ªßa state</a></li>\n<li><a href=\"#%C4%91%E1%BA%B7t-t%C3%AAn-state-d%E1%BB%B1a-tr%C3%AAn-d%E1%BB%AF-li%E1%BB%87u-s%E1%BA%BD-l%C6%B0u\">ƒê·∫∑t t√™n state d·ª±a tr√™n d·ªØ li·ªáu s·∫Ω l∆∞u</a></li>\n<li><a href=\"#xem-reducer-nh%C6%B0-m%E1%BB%99t-c%E1%BB%97-m%C3%A1y-ch%E1%BB%A9a-v%C3%A0-v%E1%BA%ADn-h%C3%A0nh-state\">Xem reducer nh∆∞ m·ªôt c·ªó m√°y ch·ª©a v√† v·∫≠n h√†nh state</a></li>\n<li><a href=\"#%C4%91%C6%A1n-gi%E1%BA%A3n-h%C3%B3a-c%C3%A1c-state-ch%E1%BB%93ng-ch%C3%A9oc%C3%B3-quan-h%E1%BB%87-v%E1%BB%9Bi-nhau\">ƒê∆°n gi·∫£n h√≥a c√°c state ch·ªìng ch√©o/c√≥ quan h·ªá v·ªõi nhau</a></li>\n<li><a href=\"#c%C3%A1c-action-n%C3%AAn-t%E1%BB%95-ch%E1%BB%A9c-nh%C6%B0-event-kh%C3%B4ng-ph%E1%BA%A3i-setter\">C√°c action n√™n t·ªï ch·ª©c nh∆∞ event, kh√¥ng ph·∫£i setter</a></li>\n<li><a href=\"#vi%E1%BA%BFt-t%C3%AAn-action-c%C3%B3-ngh%C4%A9a\">Vi·∫øt t√™n action c√≥ nghƒ©a</a></li>\n<li><a href=\"#tr%C3%A1nh-dispatch-c%C3%A1c-action-m%E1%BB%99t-c%C3%A1ch-tu%E1%BA%A7n-t%E1%BB%B1\">Tr√°nh dispatch c√°c action m·ªôt c√°ch tu·∫ßn t·ª±</a></li>\n<li><a href=\"#k%E1%BA%BFt-n%E1%BB%91i-c%C3%A0ng-nhi%E1%BB%81u-component-%C4%91%E1%BB%83-%C4%91%E1%BB%8Dc-d%E1%BB%AF-li%E1%BB%87u-trong-store\">K·∫øt n·ªëi c√†ng nhi·ªÅu component ƒë·ªÉ ƒë·ªçc d·ªØ li·ªáu trong store</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-c%C3%A1ch-vi%E1%BA%BFt-t%E1%BA%AFt-cho-mapdispatch-khi-d%C3%B9ng-connect\">S·ª≠ d·ª•ng c√°ch vi·∫øt t·∫Øt cho <code class=\"language-inline-text\">mapDispatch</code> khi d√πng <code class=\"language-inline-text\">connect</code></a></li>\n<li><a href=\"#g%E1%BB%8Di-useselector-nhi%E1%BB%81u-l%E1%BA%A7n-trong-function-component\">G·ªçi <code class=\"language-inline-text\">useSelector</code> nhi·ªÅu l·∫ßn trong function component</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-redux-devtools\">S·ª≠ d·ª•ng Redux DevTools</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#khuy%E1%BA%BFn-kh%C3%ADch\">Khuy·∫øn kh√≠ch</a></p>\n<ul>\n<li><a href=\"#gi%C3%A1-tr%E1%BB%8B-type-c%E1%BB%A7a-action-n%C3%AAn-l%C3%A0-domaineventname\">Gi√° tr·ªã type c·ªßa action n√™n l√† <code class=\"language-inline-text\">domain/eventName</code></a></li>\n<li><a href=\"#vi%E1%BA%BFt-action-s%E1%BB%AD-d%E1%BB%A5ng-c%C3%A1ch-%C4%91%E1%BA%B7t-t%C3%AAn-chu%E1%BA%A9n-c%E1%BB%A7a-flux\">Vi·∫øt action s·ª≠ d·ª•ng c√°ch ƒë·∫∑t t√™n chu·∫©n c·ªßa Flux</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-action-creator\">S·ª≠ d·ª•ng action creator</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-thunk-cho-c%C3%A1c-logic-async\">S·ª≠ d·ª•ng Thunk cho c√°c logic async</a></li>\n<li><a href=\"#t%C3%A1ch-c%C3%A1c-logic-ph%E1%BB%A9c-t%E1%BA%A1p-ra-kh%E1%BB%8Fi-component\">T√°ch c√°c logic ph·ª©c t·∫°p ra kh·ªèi component</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-selector-function-%C4%91%E1%BB%83-%C4%91%E1%BB%8Dc-d%E1%BB%AF-li%E1%BB%87u-trong-store\">S·ª≠ d·ª•ng selector function ƒë·ªÉ ƒë·ªçc d·ªØ li·ªáu trong store</a></li>\n<li><a href=\"#tr%C3%A1nh-%C4%91%C6%B0a-state-c%E1%BB%A7a-form-v%C3%A0o-trong-redux\">Tr√°nh ƒë∆∞a state c·ªßa form v√†o trong redux</a></li>\n</ul>\n</li>\n</ul>\n<!-- /TOC -->\n<p>T√†i li·ªáu ch√≠nh th·ª©c h∆∞·ªõng d·∫´n vi·∫øt redux sao cho ngon-s·∫°ch, bao g·ªìm nh·ªØng c√°ch l√†m ƒë∆∞·ª£c ƒë·ªÅ ngh·ªã, kinh nghi·ªám th·ª±c t·∫ø v√† nh·ªØng c√°ch ti·∫øp c·∫≠n ƒë∆∞·ª£c khuy·∫øn kh√≠ch.</p>\n<p>C·∫£ ph·∫ßn core c·ªßa Redux v√† c√°c t√†i li·ªáu c·ªßa Redux kh√¥ng h·ªÅ l√† chu·∫©n m·ª±c b·∫Øt bu·ªôc m·ªçi ng∆∞·ªùi tu√¢n th·ªß, c√≥ r·∫•t nhi·ªÅu c√°ch ƒë·ªÉ s·ª≠ d·ª•ng Redux, c≈©ng nh∆∞ c√≥ r·∫•t nhi·ªÅu c√°ch l√†m <em>ƒë√∫ng</em> ƒë·ªÉ gi·∫£i quy·∫øt m·ªôt v·∫•n ƒë·ªÅ.</p>\n<h2 id=\"a-b·∫Øt-bu·ªôc\"><a href=\"#a-b%E1%BA%AFt-bu%E1%BB%99c\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>A. B·∫Øt bu·ªôc</h2>\n<h3 id=\"ko-mutate-state\"><a href=\"#ko-mutate-state\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ko mutate state</h3>\n<p>Ch·ªânh s·ª≠a state l√† nguy√™n nh√¢n g√¢y bug th∆∞·ªùng th·∫•y trong Redux, nh∆∞ kh√¥ng re-render, time-travel trong Redux DevTools ko ho·∫°t ƒë·ªông. Tuy·ªát ƒë·ªëi <strong>KO t·ª± ch·ªânh s·ª≠a gi√° tr·ªã c·ªßa state</strong>, bao g·ªìm c·∫£ trong reducer v√† b·∫•t k·ª≥ ch·ªó n√†o trong source code, ch·ªâ ƒë∆∞·ª£c ph√©p <strong>thay th·∫ø gi√° tr·ªã c·ªßa state</strong></p>\n<p>C√≥ th·ªÉ s·ª≠ d·ª•ng nh·ªØng c√¥ng c·ª• nh∆∞ <a href=\"https://github.com/leoasis/redux-immutable-state-invariant\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">redux-immutable-state-invariant</a>, <a href=\"https://immerjs.github.io/immer/docs/introduction\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">immer</a> ƒë·ªÉ tr√°nh vi·ªác v√¥ t√¨nh ch·ªânh s·ª≠a state ngo√†i √Ω mu·ªën.</p>\n<h3 id=\"reducer-ko-ƒë∆∞·ª£c-c√≥-side-effect\"><a href=\"#reducer-ko-%C4%91%C6%B0%E1%BB%A3c-c%C3%B3-side-effect\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Reducer ko ƒë∆∞·ª£c c√≥ side effect</h3>\n<p>C√°c h√†m Reducer ch·ªâ ph·ª• thu·ªôc v√†o <code class=\"language-inline-text\">state</code> v√† <code class=\"language-inline-text\">action</code>, ch·ªâ t√≠nh to√°n v√† tr·∫£ v·ªÅ gi√° tr·ªã m·ªõi d·ª±a v√†o nh·ªØng tham s·ªë n√†y. <strong>Kh√¥ng ch·∫°y b·∫•t k·ª≥ logic b·∫•t ƒë·ªìng b·ªô n√†o (AJAX, timeout, promise), c√°c gi√° tr·ªã kh·ªüi t·∫°o m·ªôt c√°ch ng·∫´u nhi√™n Date.now, Math.random, thay ƒë·ªïi nh·ªØng gi√° tr·ªã b√™n ngo√†i reducer</strong></p>\n<h3 id=\"kh√¥ng-ƒë∆∞a-c√°c-gi√°-tr·ªã-non-serialize-v√†o-trong-action-v√†-state\"><a href=\"#kh%C3%B4ng-%C4%91%C6%B0a-c%C3%A1c-gi%C3%A1-tr%E1%BB%8B-non-serialize-v%C3%A0o-trong-action-v%C3%A0-state\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kh√¥ng ƒë∆∞a c√°c gi√° tr·ªã Non-Serialize v√†o trong action v√† state</h3>\n<p><strong>Tr√°nh d√πng c√°c gi√° tr·ªã non-serialize nh∆∞ Promise, Symbol, function, class instance v√†o trong state ho·∫∑c dispatch action.</strong> ƒêi·ªÅu n√†y c√≤n nh·∫±m ƒë·∫£m b·∫£o c√°c c√¥ng nh∆∞ Redux DevTool ch·∫°y ƒë√∫ng</p>\n<h3 id=\"ch·ªâ-m·ªôt-redux-store-cho-app\"><a href=\"#ch%E1%BB%89-m%E1%BB%99t-redux-store-cho-app\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ch·ªâ m·ªôt Redux store cho app</h3>\n<p>V·ªõi m·ªôt ·ª©ng d·ª•ng, <strong>ch·ªâ ƒë∆∞·ª£c s·ª≠ d·ª•ng m·ªôt Redux store, s·ª≠ d·ª•ng b·ªüi to√†n b·ªô ·ª©ng d·ª•ng</strong>, khai b√°o trong file <code class=\"language-inline-text\">store.js</code></p>\n<p>C≈©ng kh√¥ng c√≥ m·ªôt ch·ªó n√†o trong source ƒë∆∞·ª£c import store tr·ª±c ti·∫øp. N√≥ ph·∫£i ƒë∆∞·ª£c truy·ªÅn v√†o <code class=\"language-inline-text\">&lt;Provider/></code>, ho·∫∑c tham chi·∫øu th√¥ng qua middleware nh∆∞ Thunk.</p>\n<h2 id=\"b-c·ª±c-k·ª≥-khuy·∫øn-kh√≠ch\"><a href=\"#b-c%E1%BB%B1c-k%E1%BB%B3-khuy%E1%BA%BFn-kh%C3%ADch\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>B. C·ª±c k·ª≥ khuy·∫øn kh√≠ch</h2>\n<h3 id=\"s·ª≠-d·ª•ng-redux-toolkit-ƒë·ªÉ-vi·∫øt-redux-logic\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-redux-toolkit-%C4%91%E1%BB%83-vi%E1%BA%BFt-redux-logic\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng Redux Toolkit ƒë·ªÉ vi·∫øt Redux logic</h3>\n<p><a href=\"https://redux.js.org/redux-toolkit/overview/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Redux Toolkit</a> l√† b·ªô c√¥ng c·ª• ch√≠nh th·ª©c c·ªßa ch√∫ng t√¥i (Redux team) ƒë·ªÉ ph√°t tri·ªÉn redux m·ªôt c√°ch hi·ªáu qu·∫£, chu·∫©n ƒë·ªÉ vi·∫øt logic redux c·ªßa ch√∫ng t√¥i.</p>\n<p>N√≥ bao g·ªìm c√°c h√†m ƒë·ªÉ l√†m vi·ªác v·ªõi c√°c tr∆∞·ªùng h·ª£p ph·ªï bi·∫øn nh·∫•t c·ªßa Redux, bao g·ªìm c√†i ƒë·∫∑t store, khai b√°o reducer, c√°c th∆∞ vi·ªán ƒë∆∞·ª£c s·ª≠ d·ª•ng r·ªông r√£i trong Redux nh∆∞ Redux Thunk, Reselect ƒë·ªÉ vi·∫øt c√°c selector function.</p>\n<h3 id=\"s·ª≠-d·ª•ng-immer-ƒë·ªÉ-c·∫≠p-nh·∫≠p-gi√°-tr·ªã-store\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-immer-%C4%91%E1%BB%83-c%E1%BA%ADp-nh%E1%BA%ADp-gi%C3%A1-tr%E1%BB%8B-store\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng Immer ƒë·ªÉ c·∫≠p nh·∫≠p gi√° tr·ªã store</h3>\n<p>Vi·∫øt update cho store ƒë√¥i khi r·∫•t m·ªát m·ªèi, c√≥ th·ªÉ s·ª≠ d·ª•ng th√™m c√¥ng c·ª• h·ªó tr·ª£ <a href=\"https://immerjs.github.io/immer/docs/introduction\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">immerjs</a>.</p>\n<h3 id=\"c·∫•u-tr√∫c-file-v√†-th∆∞-m·ª•c\"><a href=\"#c%E1%BA%A5u-tr%C3%BAc-file-v%C3%A0-th%C6%B0-m%E1%BB%A5c\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C·∫•u tr√∫c file v√† th∆∞ m·ª•c</h3>\n<p>V·ªÅ c∆° b·∫£n Redux <em>kh√¥ng quan t√¢m c√°ch b·∫°n t·ªï ch·ª©c file v√† th∆∞ m·ª•c</em>. Tuy nhi√™n, trong th·ª±c t·∫ø vi·ªác ƒë·∫∑t c√°c logic g·∫ßn nhau gi√∫p vi·ªác c·∫≠p nh·∫≠p code nhanh h∆°n.</p>\n<p>Khuy·∫øn kh√≠ch s·ª≠ d·ª•ng c√°ch ti·∫øp c·∫≠n \"feature folder\" ho·∫∑c <a href=\"https://github.com/erikras/ducks-modular-redux\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">c√°ch l√†m ducks</a> (t·∫•t c·∫£ nh·ªØng logic cho feature n·∫±m trong m·ªôt file duy nh·∫•t)</p>\n<p>M·ªôt c·∫•u tr√∫c th∆∞ m·ª•c c∆° b·∫£n s·∫Ω g·ªìm</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">-/src\n--/index.tsx\n--/app\n---/store.ts\n---/rootReducer.ts\n---/App.tsx\n--/common\n--/features\n---/todos\n----/todosSlice.ts\n----/Todos.tsx</code></pre></div>\n<h3 id=\"ƒë∆∞a-c√†ng-nhi·ªÅu-logic-v√†-trong-reducer-c√†ng-t·ªët\"><a href=\"#%C4%91%C6%B0a-c%C3%A0ng-nhi%E1%BB%81u-logic-v%C3%A0-trong-reducer-c%C3%A0ng-t%E1%BB%91t\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒê∆∞a c√†ng nhi·ªÅu logic v√† trong reducer c√†ng t·ªët</h3>\n<p>N·∫øu c√≥ th·ªÉ, c·ªë g·∫Øng ƒë∆∞a c√†ng nhi·ªÅu logic ho·∫∑c t√≠nh to√°n ƒë·ªÉ c√≥ m·ªôt state m·ªõi v√†o trong reducer c√†ng t·ªët, kh√¥ng n√™n ƒë∆∞a v√†o ch·ªó x·ª≠ l√Ω ti·ªÅn d·ªØ li·ªáu nh∆∞ c√°c function handler click. Vi·ªác n√†y gi√∫p logic d·ªÖ test h∆°n, tr√°nh l·ªói.</p>\n<p>Redux kh√¥ng th·ª±c s·ª± quan t√¢m gi√° tr·ªã m·ªõi c·ªßa state ƒë∆∞·ª£c t√≠nh to√°n b√™n trong reducer hay trong action creation. V√≠ d·ª• nh∆∞ Todo App, vi·ªác <em>toggle todo</em> s·∫Ω c·∫≠p nh·∫≠p l·∫°i m·∫£ng <code class=\"language-inline-text\">todos</code> trong store. C√≥ th·ªÉ t√≠nh to√°n m·∫£ng <code class=\"language-inline-text\">todos</code> m·ªõi ·ªü c·∫£ action v√† reducer</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Click handler:</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onTodoClicked</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"todos/toggleTodo\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>id<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// t√≠nh to√°n ·ªü Reducer:</span>\n<span class=\"token keyword\">case</span> <span class=\"token string\">\"todos/toggleTodo\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> todo<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>todo<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// T√≠nh to√°n ·ªü action creation:</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onTodoClicked</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">id</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> newTodos <span class=\"token operator\">=</span> todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>todo<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> id<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> todo\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>todo<span class=\"token punctuation\">,</span> id <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'todos/toggleTodo'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">todos</span><span class=\"token operator\">:</span> newTodos <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// Reducer:</span>\n<span class=\"token keyword\">case</span> <span class=\"token string\">\"todos/toggleTodo\"</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">return</span> action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Khuy·∫øn kh√≠ch l√†m vi·ªác n√†y ·ªü reducer v√¨ nh·ªØng nguy√™n nh√¢n sau</p>\n<ul>\n<li>Test ·ªü Reducer s·∫Ω d·ªÖ h∆°n v√¨ n√≥ l√† pure function, ch·ªâ c·∫ßn g·ªçi <code class=\"language-inline-text\">const result = reducer(testState, action)</code> v√† ƒë∆∞a v√†o k·∫øt qu·∫£ b·∫°n expect.</li>\n<li>Thay ƒë·ªïi gi√° tr·ªã state lu√¥n tu√¢n theo quy ƒë·ªãnh, kh√¥ng ch·ªânh s·ª≠a-ch·ªâ thay th·∫ø. R√µ r√†ng l√† vi·ªác n√†y s·∫Ω tr·ª±c quan h∆°n trong reducer, nh·ªØng n·∫øu ngo√†i reducer, ch√∫ng ta d·ªÖ v√¥ t√¨nh ch·ªânh s·ª≠a ngo√†i √Ω mu·ªën</li>\n<li>Time-travel debug cho ph√©p ch√∫ng ta <strong>undo</strong> m·ªôt dispatch action, r·ªìi <strong>redo</strong> th·∫≠m ch√≠ thay th·∫ø b·∫±ng m·ªôt action kh√°c. Debug s·∫Ω d·ªÖ h∆°n n·∫øu ch√∫ng ta ƒë∆∞a logic ƒë√≥ v√†o reducer</li>\n<li>Khi √°p d·ª•ng nguy√™n t·∫Øc n√†y, ch√∫ng bi·∫øt ƒë∆∞·ª£c khi c·∫ßn thay ƒë·ªïi, v√† n∆°i state b·ªã thay ƒë·ªïi ch·∫Øc ch·∫Øn l√† trong reducer ch·ª© kh√¥ng ƒë√¢u kh√°c.</li>\n</ul>\n<p>C√≥ nh·ªØng ngo·∫°i l·ªá c√≥ th·ªÉ t√≠nh to√°n tr∆∞·ªõc, nh∆∞ kh·ªüi t·∫°o m·ªôt ID, nh∆∞ng n√™n tr√°nh l√† t·ªët nh·∫•t.</p>\n<h3 id=\"reducer-c·∫ßn-n·∫Øm-r√µ-c·∫•u-tr√∫c-c·ªßa-state\"><a href=\"#reducer-c%E1%BA%A7n-n%E1%BA%AFm-r%C3%B5-c%E1%BA%A5u-tr%C3%BAc-c%E1%BB%A7a-state\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Reducer c·∫ßn n·∫Øm r√µ c·∫•u tr√∫c c·ªßa state</h3>\n<p>C√°c reducer do b·∫°n vi·∫øt, khi tr·∫£ v·ªÅ m·ªôt gi√° tr·ªã ƒë√£ t√≠nh to√°n c·ªßa state, ph·∫£i vi·∫øt c·ª• th·ªÉ l√† tr·∫£ v·ªÅ gi√° tr·ªã g√¨, tr√°nh s·ª≠ d·ª•ng <em>spread/blind return</em> nh∆∞ sau <code class=\"language-inline-text\">return action.payload</code> (blind return), <code class=\"language-inline-text\">return {...state, ...action.payload}</code> (spread return). V√¨ nh∆∞ v·∫≠y, n√≥ s·∫Ω ph·ª• thu·ªôc gi√° tr·ªã truy·ªÅn v√†o l√∫c dispatch action ph·∫£i ƒë√∫ng v·ªõi c·∫•u tr√∫c ban ƒë·∫ßu. N·∫øu v√¥ t√¨nh d·ªØ li·ªáu n√†y kh√¥ng ƒë√∫ng c·∫•u tr√∫c s·∫Ω c√≥ bug.</p>\n<h3 id=\"ƒë·∫∑t-t√™n-state-d·ª±a-tr√™n-d·ªØ-li·ªáu-s·∫Ω-l∆∞u\"><a href=\"#%C4%91%E1%BA%B7t-t%C3%AAn-state-d%E1%BB%B1a-tr%C3%AAn-d%E1%BB%AF-li%E1%BB%87u-s%E1%BA%BD-l%C6%B0u\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒê·∫∑t t√™n state d·ª±a tr√™n d·ªØ li·ªáu s·∫Ω l∆∞u</h3>\n<p>Object truy·ªÅn v√†o cho <code class=\"language-inline-text\">combineReducers</code> s·∫Ω l√† t√™n key tr·∫£ v·ªÅ trong state. Tr√°nh s·ª≠ d·ª•ng t·ª´ <code class=\"language-inline-text\">reducer</code> ,</p>\n<p>Ko n√™n c√≥ m·ªôt object state nh∆∞ th·∫ø n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">usersReducer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">postsReducer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>N√™n</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">users</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">posts</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"xem-reducer-nh∆∞-m·ªôt-c·ªó-m√°y-ch·ª©a-v√†-v·∫≠n-h√†nh-state\"><a href=\"#xem-reducer-nh%C6%B0-m%E1%BB%99t-c%E1%BB%97-m%C3%A1y-ch%E1%BB%A9a-v%C3%A0-v%E1%BA%ADn-h%C3%A0nh-state\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Xem reducer nh∆∞ m·ªôt c·ªó m√°y ch·ª©a v√† v·∫≠n h√†nh state</h3>\n<p>R·∫•t nhi·ªÅu reducer c·ªßa redux ƒë∆∞·ª£c vi·∫øt m·ªôt c√°ch kh√¥ng r√†ng bu·ªôc nh∆∞ th·∫ø n√†y, ki·ªÉm tra action, t√≠nh to√°n gi√° tr·ªã state m·ªõi m√† kh√¥ng h·ªÅ ph·ª• thu·ªôc t·ªõi state hi·ªán t·∫°i. C√≥ nh·ªØng tr∆∞·ªùng h·ª£p gi√° tr·ªã c·ªßa m·ªôt state ph·ª• thu·ªôc v√†o gi√° tr·ªã state kh√°c, n·∫øu kh√¥ng ki·ªÉm tra tr∆∞·ªõc khi c·∫≠p nh·∫≠p, c√≥ th·ªÉ d·∫´n ƒë·∫øn bug</p>\n<h3 id=\"ƒë∆°n-gi·∫£n-h√≥a-c√°c-state-ch·ªìng-ch√©oc√≥-quan-h·ªá-v·ªõi-nhau\"><a href=\"#%C4%91%C6%A1n-gi%E1%BA%A3n-h%C3%B3a-c%C3%A1c-state-ch%E1%BB%93ng-ch%C3%A9oc%C3%B3-quan-h%E1%BB%87-v%E1%BB%9Bi-nhau\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒê∆°n gi·∫£n h√≥a c√°c state ch·ªìng ch√©o/c√≥ quan h·ªá v·ªõi nhau</h3>\n<p>R·∫•t nhi·ªÅu ·ª©ng d·ª•ng c·∫ßn cache c√°c d·ªØ li·ªáu ph·ª©c t·∫°p trong store, d·ªØ li·ªáu th∆∞·ªùng c√≥ quan h·ªá ch·ªìng ch√©o trong API v√† ph·ª• thu·ªôc v√†o nhi·ªÅu entities kh√°c nhau (nh∆∞ quan h·ªá gi·ªØa d·ªØ li·ªáu Users, Posts, Comments)</p>\n<p>Khuy·∫øn kh√≠ch n√™n l∆∞u d·ªØ li·ªáu trong store ·ªü d·∫°ng <a href=\"https://redux.js.org/recipes/structuring-reducers/normalizing-state-shape/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">cƒÉn b·∫£n nh·∫•t</a>. Nh∆∞ v·∫≠y khi nh√¨n v√†o c√≥ th·ªÉ d·ªÖ d√†ng bi·∫øt ƒë∆∞·ª£c d·ª±a v√†o ID c·ªßa ch√∫ng</p>\n<h3 id=\"c√°c-action-n√™n-t·ªï-ch·ª©c-nh∆∞-event-kh√¥ng-ph·∫£i-setter\"><a href=\"#c%C3%A1c-action-n%C3%AAn-t%E1%BB%95-ch%E1%BB%A9c-nh%C6%B0-event-kh%C3%B4ng-ph%E1%BA%A3i-setter\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C√°c action n√™n t·ªï ch·ª©c nh∆∞ event, kh√¥ng ph·∫£i setter</h3>\n<p>Ch√∫ng ta c√≥ th·ªÉ truy·ªÅn b·∫•t c·ª© gi√° tr·ªã g√¨ cho <code class=\"language-inline-text\">action.type</code>, th√≠ d·ª• nh∆∞ <code class=\"language-inline-text\">\"users/update\"</code>, <code class=\"language-inline-text\">\"users/updated\"</code>, <code class=\"language-inline-text\">\"upload/progress\"</code>, <code class=\"language-inline-text\">\"users/setUserName\"</code>. Kh√¥ng sai nh∆∞ng khuy·∫øn kh√≠ch n√™n di·ªÖn t·∫£ c√°c <code class=\"language-inline-text\">action.type</code> n√†y nh∆∞ m·ªôt event, h∆°n l√† c√°c <code class=\"language-inline-text\">setter</code> nh∆∞ v·∫≠y. N·∫øu di·ªÖn ƒë·∫°t theo ki·ªÉu setter nh∆∞ v·∫≠y th∆∞·ªùng d·∫´n t·ªõi qu√° nhi·ªÅu action type, qu√° nhi·ªÅu dispatcher</p>\n<h3 id=\"vi·∫øt-t√™n-action-c√≥-nghƒ©a\"><a href=\"#vi%E1%BA%BFt-t%C3%AAn-action-c%C3%B3-ngh%C4%A9a\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Vi·∫øt t√™n action c√≥ nghƒ©a</h3>\n<p><code class=\"language-inline-text\">action.type</code> ph·ª•c v·ª• 2 m·ª•c ƒë√≠ch</p>\n<ul>\n<li>reducer s·∫Ω ki·ªÉm tra gi√° tr·ªã type ƒë·ªÉ t√≠nh to√°n</li>\n<li>hi·ªÉn th·ªã tr√™n c√¥ng c·ª• redux devtool ƒë·ªÉ ch√∫ng ta theo d√µi</li>\n</ul>\n<p>Ti·∫øp c·∫≠n action nh∆∞ c∆° ch·∫ø <strong>event</strong>, t√™n n√†y n√†y kh√¥ng c·∫ßn r√†ng bu·ªôc v·ªõi m·ªôt tr∆∞·ªùng c·ª• th·ªÉ n√†o trong store, ƒë·∫∑t t√™n sao ƒë·ªÉ khi ƒë·ªçc v√†o ch√∫ng ta c√≥ th·ªÉ hi·ªÉu ƒë∆∞·ª£c chuy·ªán g√¨ ƒëang di·ªÖn ra tr√™n ·ª©ng d·ª•ng (th√¥ng qua c√¥ng c·ª• redux devtool). Tr√°nh nh·ªØng c√°i t√™n qu√° chung chung nh∆∞ <code class=\"language-inline-text\">SET_DATA</code> hay <code class=\"language-inline-text\">UPDATE_STORE</code>.</p>\n<h3 id=\"tr√°nh-dispatch-c√°c-action-m·ªôt-c√°ch-tu·∫ßn-t·ª±\"><a href=\"#tr%C3%A1nh-dispatch-c%C3%A1c-action-m%E1%BB%99t-c%C3%A1ch-tu%E1%BA%A7n-t%E1%BB%B1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tr√°nh dispatch c√°c action m·ªôt c√°ch tu·∫ßn t·ª±</h3>\n<p>Tr√°nh <code class=\"language-inline-text\">dispatch</code> nhi·ªÅu action c√πng l√∫c ƒë·ªÉ th·ª±c hi·ªán m·ªôt t√°c v·ª• n√†o ƒë√≥. Kh√¥ng sai, nh∆∞ng k·∫øt qu·∫£ l√† vi·ªác update UI r·∫•t ti√™u t·ªën c√¥ng s·ª©c c·ªßa tr√¨nh duy·ªát, ƒë√¥i khi c√≥ nh·ªØng state kh√¥ng truy xu·∫•t ƒë∆∞·ª£c ·ªü m·ªôt v√†i logic.</p>\n<h3 id=\"k·∫øt-n·ªëi-c√†ng-nhi·ªÅu-component-ƒë·ªÉ-ƒë·ªçc-d·ªØ-li·ªáu-trong-store\"><a href=\"#k%E1%BA%BFt-n%E1%BB%91i-c%C3%A0ng-nhi%E1%BB%81u-component-%C4%91%E1%BB%83-%C4%91%E1%BB%8Dc-d%E1%BB%AF-li%E1%BB%87u-trong-store\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>K·∫øt n·ªëi c√†ng nhi·ªÅu component ƒë·ªÉ ƒë·ªçc d·ªØ li·ªáu trong store</h3>\n<p>C√†ng nhi·ªÅu component k·∫øt n·ªëi v√†o store s·∫Ω gi√∫p hi·ªáu nƒÉng update UI c·∫£i thi·ªán, do bi·∫øt ƒë∆∞·ª£c component n√†o c·∫ßn v√† kh√¥ng c·∫ßn update.</p>\n<p>C√≥ th·ªÉ k·∫øt n·ªëi b·∫±ng <code class=\"language-inline-text\">connect</code> ho·∫∑c <code class=\"language-inline-text\">useSelector</code></p>\n<h3 id=\"s·ª≠-d·ª•ng-c√°ch-vi·∫øt-t·∫Øt-cho-mapdispatch-khi-d√πng-connect\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-c%C3%A1ch-vi%E1%BA%BFt-t%E1%BA%AFt-cho-mapdispatch-khi-d%C3%B9ng-connect\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng c√°ch vi·∫øt t·∫Øt cho <code class=\"language-inline-text\">mapDispatch</code> khi d√πng <code class=\"language-inline-text\">connect</code></h3>\n<p><a href=\"https://react-redux.js.org/using-react-redux/connect-mapdispatch#defining-mapdispatchtoprops-as-an-object\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">S·ª≠ d·ª•ng c√°ch vi·∫øt t·∫Øt cho <code class=\"language-inline-text\">mapDispatch</code> khi d√πng <code class=\"language-inline-text\">connect</code></a> nh·∫±m ƒë∆°n gi·∫£n h√≥a code. G·∫ßn nh∆∞ ch∆∞a bao gi·ªù c·∫ßn ph·∫£i vi·∫øt <code class=\"language-inline-text\">mapDispatch</code> nh∆∞ m·ªôt function.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>increment<span class=\"token punctuation\">,</span> decrement<span class=\"token punctuation\">,</span> reset<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./counterActions\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Redux t·ª± ƒë·ªông d√πng dispatch</span>\n<span class=\"token comment\">// khi b·∫°n truy·ªÅn v√†o l√† m·ªôt object</span>\n<span class=\"token keyword\">const</span> actionCreators <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  increment<span class=\"token punctuation\">,</span>\n  decrement<span class=\"token punctuation\">,</span>\n  reset\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>mapState<span class=\"token punctuation\">,</span> actionCreators<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Counter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// or</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>\n  mapState<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> increment<span class=\"token punctuation\">,</span> decrement<span class=\"token punctuation\">,</span> reset <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Counter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"g·ªçi-useselector-nhi·ªÅu-l·∫ßn-trong-function-component\"><a href=\"#g%E1%BB%8Di-useselector-nhi%E1%BB%81u-l%E1%BA%A7n-trong-function-component\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>G·ªçi <code class=\"language-inline-text\">useSelector</code> nhi·ªÅu l·∫ßn trong function component</h3>\n<p>Khi s·ª≠ d·ª•ng hook <code class=\"language-inline-text\">useSelector</code>, khuy·∫øn kh√≠ch d√πng nhi·ªÅu l·∫ßn ƒë·ªÉ l·∫•y nhi·ªÅu ph·∫ßn d·ªØ li·ªáu kh√°c nhau, thay v√¨ l·∫•y m·ªôt c·ª•c d·ªØ li·ªáu l·ªõn ƒë√£ bao g·ªìm c√°c d·ªØ li·ªáu nh·ªè h∆°n b√™n trong. Kh√¥ng gi·ªëng v·ªõi <code class=\"language-inline-text\">mapState</code>, <code class=\"language-inline-text\">useSelector</code> kh√¥ng y√™u c·∫ßu tr·∫£ v·ªÅ object, s·ª≠ d·ª•ng selector ƒë·ªÉ l·∫•y nh·ªØng ƒë∆°n v·ªã d·ªØ li·ªáu nh·ªè h∆°n b√™n trong store s·∫Ω gi√∫p √≠t cho vi·ªác render nhi·ªÅu l·∫ßn.</p>\n<h3 id=\"s·ª≠-d·ª•ng-redux-devtools\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-redux-devtools\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng Redux DevTools</h3>\n<p>H·ªçc c√°ch c√†i ƒë·∫∑t v√† s·ª≠ d·ª•ng thu·∫ßn th·ª•c <a href=\"https://github.com/zalmoxisus/redux-devtools-extension\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Redux DevTool</a>, n√≥ s·∫Ω cho ph√©p ch√∫ng ta</p>\n<ul>\n<li>Xem l·ªãch s·ª≠ dispatch action</li>\n<li>N·ªôi dung c·ªßa t·ª´ng action</li>\n<li>State cu·ªëi c√πng sau khi action ƒë∆∞·ª£c dispatch</li>\n<li>S·ª± kh√°c nhau c·ªßa state tr∆∞·ªõc v√† sau m·ªôt action</li>\n<li>Action ƒë√£ ƒë∆∞·ª£c dispatch t·ª´ ƒë√¢u</li>\n</ul>\n<h2 id=\"khuy·∫øn-kh√≠ch\"><a href=\"#khuy%E1%BA%BFn-kh%C3%ADch\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Khuy·∫øn kh√≠ch</h2>\n<h3 id=\"gi√°-tr·ªã-type-c·ªßa-action-n√™n-l√†-domaineventname\"><a href=\"#gi%C3%A1-tr%E1%BB%8B-type-c%E1%BB%A7a-action-n%C3%AAn-l%C3%A0-domaineventname\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Gi√° tr·ªã type c·ªßa action n√™n l√† <code class=\"language-inline-text\">domain/eventName</code></h3>\n<p>Tr∆∞·ªõc ƒë√¢y t√†i li·ªáu Redux c√≥ ƒë·ªÅ c·∫≠p v√† s·ª≠ d·ª•ng t√™n nh∆∞ th·∫ø n√†y <code class=\"language-inline-text\">SCREAMING_SNAKE_CASE</code> ƒë·ªÉ khai b√°o action type, v√≠ d·ª• nh∆∞ <code class=\"language-inline-text\">ADD_TODO</code> v√† <code class=\"language-inline-text\">INCREMENT</code>, c√°ch n√†y s·∫Ω kh·ªõp v·ªõi c√°ch ƒë·∫∑t bi·∫øn h·∫±ng s·ªë trong ƒëa s·ªë c√°c ng√¥n ng·ªØ l·∫≠p tr√¨nh. Tuy nhi√™n vi·∫øt hoa h·∫øt nh∆∞ v·∫≠y h∆°i kh√≥ ƒë·ªçc.</p>\n<p>C·ªông ƒë·ªìng l·∫≠p tr√¨nh vi√™n √°p d·ª•ng m·ªôt c√°ch ƒë·∫∑t t√™n kh√°c, b·∫Øt ƒë·∫ßu l√† <code class=\"language-inline-text\">feature</code> ho·∫∑c <code class=\"language-inline-text\">domain</code> n∆°i action n√†y thu·ªôc v·ªÅ v√† theo sau l√† t√™n c·ªßa ki·ªÉu action. Ngo√†i ra c√≤n c√≥ nhi·ªÅu c√°ch kh√°c nh∆∞ <code class=\"language-inline-text\">\"[Domain] Action Type\"</code> hay <code class=\"language-inline-text\">\"[Login Page] Login\"</code>, <code class=\"language-inline-text\">\"domain:action\"</code></p>\n<p>H√†m <code class=\"language-inline-text\">createSlice</code> trong Redux Toolkit t·∫°o ra m·ªôt action type nh∆∞ sau <code class=\"language-inline-text\">\"domain/action\"</code>, v√≠ d·ª• <code class=\"language-inline-text\">todos/addTodo</code>. Ch√∫ng t√¥i khuy·∫øn kh√≠ch s·ª≠ d·ª•ng <code class=\"language-inline-text\">domain/action</code> cho d·ªÖ ƒë·ªçc.</p>\n<h3 id=\"vi·∫øt-action-s·ª≠-d·ª•ng-c√°ch-ƒë·∫∑t-t√™n-chu·∫©n-c·ªßa-flux\"><a href=\"#vi%E1%BA%BFt-action-s%E1%BB%AD-d%E1%BB%A5ng-c%C3%A1ch-%C4%91%E1%BA%B7t-t%C3%AAn-chu%E1%BA%A9n-c%E1%BB%A7a-flux\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Vi·∫øt action s·ª≠ d·ª•ng c√°ch ƒë·∫∑t t√™n chu·∫©n c·ªßa Flux</h3>\n<p><em>Flux Architechure</em> ch·ªâ y√™u c·∫ßu m·ªói action object ph·∫£i c√≥ tr∆∞·ªùng <code class=\"language-inline-text\">type</code> v√† kh√¥ng c√≥ b·∫•t c·ª© r√†ng bu·ªôc n√†o kh√°c, t·ª´ c√°ch ƒë·∫∑t t√™n c≈©ng nh∆∞ tr∆∞·ªùng n√†o n√™n ƒë∆∞a v√†o. ƒê·ªÉ ƒë·∫£m b·∫£o nh·∫•t qu√°n, Andrew Clark vi·∫øt ra m·ªôt b·ªô <a href=\"https://github.com/redux-utilities/flux-standard-action\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Flux Standard Actions</a> ƒë·ªÉ chu·∫©n h√≥a. T√≥m t·∫Øt l·∫°i b·ªô n·ªôi dung n√†y, action n√™n l√†</p>\n<ul>\n<li>Lu√¥n ƒë·∫∑t d·ªØ li·ªáu trong tr∆∞·ªùng <code class=\"language-inline-text\">payload</code></li>\n<li>Th√™m tr∆∞·ªùng <code class=\"language-inline-text\">meta</code> cho c√°c th√¥ng tin kh√°c</li>\n<li>Th√™m tr∆∞·ªùng <code class=\"language-inline-text\">error</code> cho c√°c action b√°o l·ªói</li>\n</ul>\n<h3 id=\"s·ª≠-d·ª•ng-action-creator\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-action-creator\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng action creator</h3>\n<p>Thu·∫≠t ng·ªØ <strong>Action creator</strong> c√≥ ngu·ªìn g·ªëc t·ª´ c√°ch ti·∫øp c·∫≠n c·ªßa <em>Flux Architechure</em>, action creator <strong>kh√¥ng b·∫Øt bu·ªôc</strong>, c√°c component v√† logic c√≥ th·ªÉ g·ªçi tr·ª±c ti·∫øp <code class=\"language-inline-text\">dispatch({ type: \"some/action\"})</code> (action object ƒë∆∞·ª£c truy·ªÅn d·∫°ng inline).</p>\n<p>Tuy nhi√™n, s·ª≠ d·ª•ng action creator ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n, ƒë·∫∑c bi·ªát ph√π h·ª£p khi c·∫ßn chu·∫©n b·ªã m·ªôt d·ªØ li·ªáu ho·∫∑c logic cho action (th√≠ d·ª• nh∆∞ kh·ªüi t·∫°o m·ªôt gi√° tr·ªã ID kh√¥ng tr√πng l·∫∑p).</p>\n<p><strong>Khuy·∫øn kh√≠ch s·ª≠ d·ª•ng action creator</strong>. Tuy nhi√™n, thay v√¨ vi·∫øt tay, b·∫°n n√™n s·ª≠ d·ª•ng h√†m <code class=\"language-inline-text\">createSlice</code> trong b·ªô Redux Toolkit, n√≥ s·∫Ω gi√∫p t·∫°o m·ªôt action creator v√† action type t·ª± ƒë·ªông</p>\n<h3 id=\"s·ª≠-d·ª•ng-thunk-cho-c√°c-logic-async\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-thunk-cho-c%C3%A1c-logic-async\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng Thunk cho c√°c logic async</h3>\n<p>Redux ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ c√≥ th·ªÉ m·ªü r·ªông v√† middleware API ƒë∆∞·ª£c t·∫°o ra cho ph√©p c√°c d·∫°ng async logic kh√°c khau c√≥ th·ªÉ c√†i c·∫Øm v√†o trong Redux store. B·∫±ng c√°ch ƒë√≥, b·∫°n kh√¥ng c·∫ßn b·∫Øt bu·ªôc ph·∫£i h·ªçc c√°c th∆∞ vi·ªán c·ª• th·ªÉ n√†o ƒë√≥ nh∆∞ RxJS n·∫øu kh√¥ng ph√π h·ª£p v·ªõi nhu c·∫ßu th·ª±c t·∫ø.</p>\n<p>K·∫øt qu·∫£ c·∫£ kh√° nhi·ªÅu middleware addon ƒë∆∞·ª£c t·∫°o ra cho Redux v√† t·∫°o ra kh√¥ng √≠t b·ªëi r·ªëi c≈©ng nh∆∞ c√¢u h·ªèi v·ªÅ n√™n s·ª≠ d·ª•ng middleware n√†o.</p>\n<p>Ch√∫ng t√¥i th·ª±c s·ª± khuy·∫øn kh√≠ch s·ª≠ d·ª•ng <a href=\"https://github.com/reduxjs/redux-thunk\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Redux Thunk</a> nh∆∞ m·∫∑c ƒë·ªãnh, n√≥ c√≥ th·ªÉ gi·∫£i quy·∫øt h·∫ßu h·∫øt c√°c tr∆∞·ªùng h·ª£p. ƒê·ªìng th·ªùi s·ª≠ d·ª•ng c√∫ ph√°p <code class=\"language-inline-text\">async/await</code> trong thunk r·∫•t d·ªÖ ƒë·ªçc.</p>\n<p>N·∫øu b·∫°n c√≥ nh∆∞ c·∫ßu s·ª≠ d·ª•ng m·ªôt workflow async th·ª±c s·ª± ph·ª©c t·∫°p nh∆∞ cancel, debouncing, ch·∫°y logic khau khi action ƒë∆∞·ª£c dispatch, <strong>thread ch·∫°y ng·∫ßm</strong> c√≥ th·ªÉ c√¢n nh·∫Øc s·ª≠ d·ª•ng c√°c middleware nh∆∞ Redux-Saga v√† Redux-Observable</p>\n<h3 id=\"t√°ch-c√°c-logic-ph·ª©c-t·∫°p-ra-kh·ªèi-component\"><a href=\"#t%C3%A1ch-c%C3%A1c-logic-ph%E1%BB%A9c-t%E1%BA%A1p-ra-kh%E1%BB%8Fi-component\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T√°ch c√°c logic ph·ª©c t·∫°p ra kh·ªèi component</h3>\n<p>Ch√∫ng t√¥i khuy·∫øn ngh·ªã n√™n ƒë∆∞a c√°c logic ph·ª©c t·∫°p ra kh·ªèi component, theo t∆∞ t∆∞·ªüng c·ªßa c√°ch l√†m <em>container/presentational</em>, c√†ng nhi·ªÅu component ch·ªâ nh·∫≠n prop v√† hi·ªÉn th·ªã UI c√†ng t·ªët, ƒë·ªìng th·ªùi khi ph·∫£i l√†m vi·ªác v·ªõi c√°c logic b·∫•t tu·∫ßn t·ª± (async) b√™n trong component r·∫•t kh√≥ ƒë·ªÉ b·∫£o tr√¨ sau n√†y.</p>\n<p>Tuy nhi√™n, s·ª≠ d·ª•ng React hook c√≥ v·∫ª nh∆∞ d·ªÖ d√†ng h∆°n trong vi·ªác qu·∫£n l√Ω c√°c logic ki·ªÉu nh∆∞ fetch d·ªØ li·ªáu tr·ª±c ti·∫øp trong component v√† c√≥ th·ªÉ thay th·∫ø b·∫±ng thunk trong v√†i tr∆∞·ªùng h·ª£p</p>\n<h3 id=\"s·ª≠-d·ª•ng-selector-function-ƒë·ªÉ-ƒë·ªçc-d·ªØ-li·ªáu-trong-store\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-selector-function-%C4%91%E1%BB%83-%C4%91%E1%BB%8Dc-d%E1%BB%AF-li%E1%BB%87u-trong-store\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng selector function ƒë·ªÉ ƒë·ªçc d·ªØ li·ªáu trong store</h3>\n<p>Selector function l√† c√¥ng c·ª• m·∫°nh m·∫Ω ƒë·ªÅ ƒë·ªçc c√°c gi√° tr·ªã trong store. Nh·ªØng th∆∞ vi·ªán nh∆∞ Reselect cho t·∫°o v√† l∆∞u tr·ªØ c√°c selector function, ch·ªâ t√≠nh to√°n l·∫°i k·∫øt qu·∫£ n·∫øu c·∫ßn thi·∫øt, l√† m·ªôt ƒë·∫∑c t√≠nh quan tr·ªçng ƒë·ªÉ c·∫£i thi·ªán hi·ªáu nƒÉng.</p>\n<p>Khuy·∫øn kh√≠ch s·ª≠ d·ª•ng c√°c selector function v√† l∆∞u l·∫°i k·∫øt qu·∫£ ƒë·ªçc ƒë∆∞·ª£c t·ª´ store b·∫•t c·ª© khi n√†o c√≥ th·ªÉ, t·∫°o c√°c selector function n√†y b·∫±ng Reselect</p>\n<p>Tuy nhi√™n, c≈©ng kh√¥ng nh·∫•t thi·∫øt <strong>b·∫Øt bu·ªôc ph·∫£i</strong> vi·∫øt selector function cho t·∫•t c·∫£ c√°c gi√° tr·ªã trong state. C√¢n nh·∫Øc c√°c tr∆∞·ªùng hay c·∫ßn truy xu·∫•t v√† c·∫≠p nh·∫≠p c≈©ng nh∆∞ l·ª£i √≠ch mang l·∫°i khi s·ª≠ d·ª•ng c√°c selector function</p>\n<h3 id=\"tr√°nh-ƒë∆∞a-state-c·ªßa-form-v√†o-trong-redux\"><a href=\"#tr%C3%A1nh-%C4%91%C6%B0a-state-c%E1%BB%A7a-form-v%C3%A0o-trong-redux\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tr√°nh ƒë∆∞a state c·ªßa form v√†o trong redux</h3>\n<p>H·∫ßu nh∆∞ nh∆∞ state c·ªßa form ko n√™n n·∫±m trong Redux. D·ªØ li·ªáu n√†y kh√¥ng th·ª±c s·ª± ph·∫£i <em>global</em>, ko c·∫ßn ƒë∆∞·ª£c cache, kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi nhi·ªÅu component c√πng l√∫c. Connect form v√†o redux c≈©ng d·∫´n ƒë·∫øn chuy·ªán dispatch action tr√™n t·∫•t c·∫£ c√°c s·ª± ki·ªán thay ƒë·ªïi trong form, n√≥ s·∫Ω l√†m hi·ªáu nƒÉng gi·∫£m tr·∫ßm tr·ªçng v√† kh√¥ng mang l·∫°i nhi·ªÅu hi·ªáu qu·∫£.</p>\n<p>Ch·ªâ n√™n d·ªØ state c·ªßa form trong component v√† ƒë∆∞a to√†n b·ªô gi√° tr·ªã l√™n store sau khi user submit form.</p>\n<p>Ch·ªâ duy nh·∫•t tr∆∞·ªùng h·ª£p ƒë∆∞a form state v√†o redux l√† h·ª£p l√Ω khi vi·∫øt component nh∆∞ WYSIWYG v·ªõi t√≠nh nƒÉng live preview tr√™n c√°c thu·ªôc t√≠nh. C√≤n l·∫°i ƒëa ph·∫ßn kh√¥ng c·∫ßn thi·∫øt.</p>\n<p><a href=\"https://redux.js.org/style-guide/style-guide/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://redux.js.org/style-guide/style-guide/</a></p>\n","cover_image":""}},{"node":{"id":"cc966bcacf4a3f8f4a9f2abf03463e59","title":"9 c√¢u h·ªèi l·∫Øc l√©o v·ªÅ Promise","path":"/2019-12-23-9-cau-hoi-ve-promise/","date":"2019-12-23","timeToRead":3,"desc":"V√†i c√¢u h·ªèi Promise, √¥n t·∫≠p ki·∫øn th·ª©c cho b·∫°n c·∫ßn ƒëi ph·ªèng v·∫•n","content":"<h2 id=\"1\"><a href=\"#1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>1</h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token function\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The Fails!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\np<span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\np<span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>K·∫øt qu·∫£ output</p>\n<ol>\n<li>K·∫øt qu·∫£ l·ªói log ra 1 l·∫ßn</li>\n<li>K·∫øt qu·∫£ l·ªói log ra 2 l·∫ßn</li>\n<li>UnhandledPromiseRejectionWarning</li>\n</ol>\n<p><code class=\"language-inline-text\">.catch</code> s·∫Ω l√†m vi·ªác gi·ªëng nh∆∞ <code class=\"language-inline-text\">.addEventListener(event, callback)</code> hay Event Emitter <code class=\"language-inline-text\">.on(event, callback)</code>. C√≥ th·ªÉ add th√™m bao nhi√™u t√πy th√≠ch, n√≥ s·∫Ω ch·∫°y t·∫•t c·∫£ c√°c callback ƒë√£ ƒëƒÉng k√Ω</p>\n<p>‚úÖ <em>ƒê√°p √°n</em></p>\n<ol start=\"2\">\n<li>K·∫øt qu·∫£ l·ªói log ra 2 l·∫ßn</li>\n</ol>\n<h2 id=\"2\"><a href=\"#2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>2</h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token function\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The Fails!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\np<span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\np<span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ol>\n<li>K·∫øt qu·∫£ l·ªói log ra 1 l·∫ßn</li>\n<li>K·∫øt qu·∫£ l·ªói log ra 2 l·∫ßn</li>\n<li>UnhandledPromiseRejectionWarning</li>\n</ol>\n<p><img src=\"https://danlevy.net/static/question-2-308cbd4ad650e288821fd681a0e745b4-e8b1e.png\"></p>\n<p>Khi kh·ªüi t·∫°o m·ªôt Promise, ch√∫ng ta ph·∫£i g·ªçi m·ªôt trong hai callback <code class=\"language-inline-text\">resolve()</code> ho·∫∑c <code class=\"language-inline-text\">reject()</code>. N√≥ ko <code class=\"language-inline-text\">return</code> gi√° tr·ªã. Kh√¥ng th·ªÉ d√πng <code class=\"language-inline-text\">Promise.reject()</code> nh∆∞ ·ªü tr√™n.</p>\n<p>‚úÖ <em>ƒê√°p √°n</em></p>\n<ol start=\"3\">\n<li>UnhandledPromiseRejectionWarning</li>\n</ol>\n<h2 id=\"3\"><a href=\"#3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>3</h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token function\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The Fails!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>K·∫øt qu·∫£</p>\n<ol>\n<li>In ra l·ªói v√† <code class=\"language-inline-text\">undefined</code></li>\n<li>in ra l·ªói 2 l·∫ßn</li>\n<li>UnhandledPromiseRejectionWarning</li>\n<li>undefined</li>\n</ol>\n<p><img src=\"https://danlevy.net/static/question-3-a5d5c8df7eb262f3bccc7a5319f53ec2-e8b1e.png\" alt=\"annotated-code/question-3.png\"></p>\n<p>G·ª£i √Ω th·ª© nh·∫•t <code class=\"language-inline-text\">console.log()</code> lu√¥n tr·∫£ v·ªÅ <code class=\"language-inline-text\">undefined</code>. Th·ª© 2, khi ƒë·∫∑t <code class=\"language-inline-text\">.catch</code> tr∆∞·ªõc <code class=\"language-inline-text\">.then</code> nh∆∞ th·∫ø, n√≥ s·∫Ω kh√¥ng nh·∫≠n ƒë∆∞·ª£c gi√° tr·ªã t·ª´ h√†m tr∆∞·ªõc ƒë√≥, m·ªçi th·ª© ƒë√£ d·ª´ng l·∫°i ·ªü <code class=\"language-inline-text\">catch</code>.</p>\n<p>‚úÖ <em>ƒê√°p √°n</em></p>\n<ol>\n<li>In ra l·ªói v√† <code class=\"language-inline-text\">undefined</code></li>\n</ol>\n<h2 id=\"4\"><a href=\"#4\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>4</h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> p <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span><span class=\"token function\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The Fails!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ol>\n<li>In ra l·ªói m·ªôt l·∫ßn</li>\n<li>In ra l·ªói 2 l·∫ßn</li>\n<li>UnhandledPromiseRejectionWarning</li>\n</ol>\n<p>Gi·∫£i th√≠ch nh∆∞ tr√™n, c√¢u <code class=\"language-inline-text\">catch</code> th·ª© 2 kh√¥ng ƒë∆∞·ª£c g·ªçi ƒë·∫øn, ƒëi·ªÅu ƒë·∫∑c bi·ªát l√† b·∫°n c√≥ th·ªÉ ƒë·∫∑t <code class=\"language-inline-text\">.then</code> ·ªü ph√≠a sau <code class=\"language-inline-text\">catch</code> nh∆∞ng kh√¥ng th·ªÉ ƒë·∫∑t <code class=\"language-inline-text\">catch</code> sau <code class=\"language-inline-text\">catch</code>.</p>\n<p>‚úÖ <em>ƒê√°p √°n</em></p>\n<ol>\n<li>In ra l·ªói m·ªôt l·∫ßn</li>\n</ol>\n<h2 id=\"5\"><a href=\"#5\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>5</h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Success!'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token function\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Oh noes!'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"actually, that worked\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ol>\n<li>In l·ªói 1 l·∫ßn</li>\n<li>In l·ªói 2 l·∫ßn</li>\n<li>UnhandledPromiseRejectionWarning</li>\n<li>Ko in g√¨ c·∫£</li>\n</ol>\n<p><code class=\"language-inline-text\">catch</code> c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ b·ªè qua ho·∫∑c ghi ƒë√® l√™n gi√° tr·ªã l·ªói b·∫±ng c√°ch cho <code class=\"language-inline-text\">return</code> m·ªôt gi√° tr·ªã. Tr√≤ n√†y <strong>ch·ªâ l√†m ƒë∆∞·ª£c khi tr∆∞·ªõc ƒë√≥ <code class=\"language-inline-text\">then</code> c√≥ tr·∫£ v·ªÅ gi√° tr·ªã</strong>.</p>\n<p>‚úÖ <em>ƒê√°p √°n</em></p>\n<ol start=\"4\">\n<li>Ko in g√¨ c·∫£</li>\n</ol>\n<h2 id=\"6\"><a href=\"#6\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>6</h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Success!'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ol>\n<li>In ra \"Success!\" v√† \"SUCCESS!\"</li>\n<li>In ra \"Success!\"</li>\n<li>In ra \"SUCCESS!\"</li>\n<li>Kh√¥ng in ra g√¨ c·∫£</li>\n</ol>\n<p><code class=\"language-inline-text\">.then</code> s·∫Ω truy·ªÅn d·ªØ li·ªáu theo th·ª© t·ª± ƒë√£ vi·∫øt, khi <code class=\"language-inline-text\">return</code> gi√° tr·ªã, h√†m <code class=\"language-inline-text\">then</code> ti·∫øp theo s·∫Ω nh·∫≠n gi√° tr·ªã <code class=\"language-inline-text\">return</code> n√†y.</p>\n<p>‚úÖ <em>ƒê√°p √°n</em></p>\n<ol start=\"3\">\n<li>In ra \"SUCCESS!\"</li>\n</ol>\n<h2 id=\"7\"><a href=\"#7\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>7</h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Success!'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> data\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>console<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">)</span></code></pre></div>\n<ol>\n<li>In ra \"SUCCESS!\"</li>\n<li>In ra \"Success!\"</li>\n<li>In ra \"SUCCESS!\" v√† \"SUCCESS!\"</li>\n<li>Kh√¥ng in ra g√¨ c·∫£</li>\n</ol>\n<p>Gi·∫£i th√≠ch t∆∞∆°ng t·ª± nh∆∞ tr√™n.</p>\n<p>‚úÖ <em>ƒê√°p √°n</em></p>\n<ol start=\"3\">\n<li>In ra \"SUCCESS!\" v√† \"SUCCESS!\"</li>\n</ol>\n<h2 id=\"8\"><a href=\"#8\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>8</h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Success!'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    data<span class=\"token punctuation\">.</span><span class=\"token function\">toUpperCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ol>\n<li>In ra \"SUCCESS!\"</li>\n<li>In ra \"Success!\"</li>\n<li>In ra \"SUCCESS!\" v√† \"SUCCESS!\"</li>\n<li>In ra \"undefined\"</li>\n</ol>\n<p>N·∫øu mu·ªën truy·ªÅn gi√° tr·ªã xu·ªëng <code class=\"language-inline-text\">.then</code> b√™n d∆∞·ªõi, tr∆∞·ªõc ƒë√≥ ph·∫£i <code class=\"language-inline-text\">return</code>.</p>\n<p>‚úÖ <em>ƒê√°p √°n</em></p>\n<ol start=\"4\">\n<li>In ra \"undefined\"</li>\n</ol>\n<h2 id=\"9\"><a href=\"#9\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>9</h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Success!'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token function\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Oh noes!'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'actually, that worked'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token function\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The fails!'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ol>\n<li>In ra \"Oh noes!\" v√† \"The fails!\"</li>\n<li>In ra \"Oh noes!\"</li>\n<li>In ra \"The fails!\"</li>\n<li>In ra  \"actually, that worked\"</li>\n<li>Kh√¥ng in ra g√¨ c·∫£</li>\n</ol>\n<p>T·ªïng h·ª£p nh·ªØng ki·∫øn th·ª©c ·ªü tr√™n, hy v·ªçng b·∫°n tr·∫£ l·ªùi ƒë√∫ng c√¢u n√†y.  ·ªû <code class=\"language-inline-text\">then</code> ƒë·∫ßu ti√™n, ch√∫ng ta throw m·ªôt error, <code class=\"language-inline-text\">catch</code> ti·∫øp theo ch√∫ng ta <code class=\"language-inline-text\">return</code> coi nh∆∞ b·ªè qua error n√†y, <code class=\"language-inline-text\">then</code> th·ª© 2, nh·∫≠n data nh∆∞ng ch√∫ng ta ko l√†m g√¨ v·ªõi n√≥ c·∫£, m√† throw m·ªôt error kh√°c, catch cu·ªëi c√πng s·∫Ω l√† gi√° tr·ªã error v·ª´a throw ·ªü tr√™n.</p>\n<p>‚úÖ <em>ƒê√°p √°n</em></p>\n<ol start=\"3\">\n<li>In ra \"The fails!\"</li>\n</ol>\n<p><a href=\"https://danlevy.net/javascript-promises-quiz/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://danlevy.net/javascript-promises-quiz/</a></p>\n","cover_image":""}},{"node":{"id":"e332aaf4a81a8ba996249d8fb727b606","title":"Hi·ªÉu v·ªÅ prop key trong React","path":"/2019-12-18-hieu-ve-key-trong-react/","date":"2019-12-18","timeToRead":3,"desc":"M·ªôt ch√∫t nh·∫≠n ƒë·ªãnh v·ªÅ prop key trong React","content":"<blockquote>\n<p><code class=\"language-inline-text\">key</code> l√† m·ªôt c∆° ch·∫ø ƒë·ªÉ qu·∫£n l√Ω c√°c instance c·ªßa component</p>\n</blockquote>\n<p>M·ªói l·∫ßn React render 1 component, n√≥ ch·∫°y function c·ªßa ch√∫ng ta ƒë·ªÉ nh·∫≠n v·ªÅ m·ªôt gi√° tr·ªã m·ªõi, gi√° tr·ªã n√†y ƒë∆∞·ª£c d√πng ƒë·ªÉ c·∫≠p nh·∫≠p DOM. N·∫øu ch√∫ng tr·∫£ v·ªÅ c√πng m·ªôt gi√° tr·ªã, n√≥ s·∫Ω kh√¥ng g·ªçi update DOM, th·∫≠m ch√≠ <strong>t·∫•t c·∫£ prop c√≥ thay ƒë·ªïi</strong></p>\n<p>ƒê·ªçc th√™m b√†i vi·∫øt <a href=\"https://kentcdodds.com/blog/optimize-react-re-renders\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Th·ªß thu·∫≠t c·∫£i thi·ªán render</a></p>\n<p><strong>T·∫•t c·∫£ prop c√≥ thay ƒë·ªïi</strong> n·∫øu k·∫øt qu·∫£ tr·∫£ v·ªÅ kh√¥ng kh√°c nhau, n√≥ kh√¥ng c·∫≠p nh·∫≠p DOM. <strong>Tr·ª´ tr∆∞·ªùng h·ª£p l√† prop <code class=\"language-inline-text\">key</code></strong>, d√π cho k·∫øt qu·∫£ cu·ªëi c√πng kh√¥ng thay ƒë·ªïi, nh∆∞ng gi√° tr·ªã <code class=\"language-inline-text\">key</code> kh√°c nhau, React c≈©ng s·∫Ω unmount instance tr∆∞·ªõc ƒë√≥ v√† mount v√†o m·ªôt instance m·ªõi.</p>\n<p>ƒêi·ªÅu ƒë√≥ c√≥ nghƒ©a l√† to√†n b·ªô <code class=\"language-inline-text\">state</code> tr∆∞·ªõc ƒë√≥ s·∫Ω ƒë∆∞·ª£c kh·ªüi t·∫°o l·∫°i nh∆∞ l√∫c ban ƒë·∫ßu. React c≈©ng s·∫Ω ch·∫°y cleanup tr√™n <code class=\"language-inline-text\">effect</code></p>\n<blockquote>\n<p>Cleanup effect th·∫≠t ra ch·∫°y sau khi m·ªôt component ƒë√£ mount, tr∆∞·ªõc khi effect ti·∫øp theo ƒë∆∞·ª£c g·ªçi.</p>\n</blockquote>\n<p>T∆∞·ªüng t∆∞·ª£ng ch√∫ng ta c√≥ m·ªôt component, v·ªõi state c·ªßa ri√™ng n√≥</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Counter called'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Counter useState initializer'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">increment</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span> <span class=\"token operator\">=></span> c <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  React<span class=\"token punctuation\">.</span><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Counter useEffect callback'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Counter useEffect cleanup'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Counter returning react elements'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>increment<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">CounterParent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// s·ª≠  d·ª•ng useReducer theo c√°ch n√†y ƒë·ªÉ ƒë·∫£m b·∫£o t·∫•t c·∫£ nh·ªØng l·∫ßn g·ªçi setCounterKey</span>\n  <span class=\"token comment\">// `counterKey` ƒë∆∞·ª£c g√°n cho m·ªôt object m·ªõi</span>\n  <span class=\"token comment\">// ƒë·ªìng nghƒ©a v·ªõi vi·ªác `key` s·∫Ω kh√°c nhau</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>counterKey<span class=\"token punctuation\">,</span> setCounterKey<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">c</span> <span class=\"token operator\">=></span> c <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>setCounterKey<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">reset</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Counter</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>counterKey<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê√¢y l√† k·∫øt qu·∫£ log ra</p>\n<div class=\"gridsome-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">// b·∫Øt ƒë·∫ßu mounted\nCounter called\nCounter useState initializer\nCounter returning react elements\n// mounted\nCounter useEffect callback\n// click n√∫t counter\nCounter called\nCounter returning react elements\n// ƒë·ªÉ √Ω ƒë·∫øn callback c·ªßa effect v√† c√°c step l√∫c kh·ªüi t·∫°o kh√¥ng ƒë∆∞·ª£c g·ªçi l√∫c n√†y\n// click n√∫t reset\n// x·∫£y ra tr√™n instance m·ªõi\nCounter called\nCounter useState initializer\nCounter returning react elements\n// cleanup instance tr∆∞·ªõc ƒë√≥\nCounter useEffect cleanup\n// new instance ƒë√£ ƒë∆∞·ª£c mounted\nCounter useEffect callback</code></pre></div>\n<p>M·ªôt ·ª©ng d·ª•ng th·ª±c t·∫ø, s·ª≠ d·ª•ng key ƒë·ªÉ <em>√©p</em>  render gi√° tr·ªã <code class=\"language-inline-text\">subject</code> khi <code class=\"language-inline-text\">topic</code> thay ƒë·ªïi</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Contact</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>topic<span class=\"token punctuation\">,</span> setTopic<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'training'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">htmlFor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>topic<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Topic</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>topic<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>topic<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token function\">setTopic</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>training<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Training</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>consulting<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Consulting</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>question<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Question</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">htmlFor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>subject<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Email Subject</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n        <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>subject<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>topic<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">defaultValue</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>defaultValuesByTopic<span class=\"token punctuation\">[</span>topic<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">htmlFor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>body<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Email body</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>textarea</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>body<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta c√≥ <code class=\"language-inline-text\">&lt;input id=\"subject\" /></code>, n·∫øu kh√¥ng truy·ªÅn <code class=\"language-inline-text\">key=topic</code>, n√≥ s·∫Ω kh√¥ng ƒë∆∞·ª£c kh·ªüi t·∫°o l·∫°i d√π cho gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">defaultValue={defaultValuesByTopic[topic]}</code> ƒë√£ thay ƒë·ªïi.</p>\n<p><a href=\"https://kentcdodds.com/blog/understanding-reacts-key-prop\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Understanding React's key prop</a></p>\n","cover_image":""}},{"node":{"id":"aef50f5a2dd43730cf89e8a944b6adec","title":"T·ªëi ∆∞u component React b·∫±ng React.memo, useMemo v√† useCallback","path":"/2019-12-13-huong-dan-cai-thien-hieu-nang-react-component/","date":"2019-12-13","timeToRead":2,"desc":"S·ª≠ d·ª•ng nh·ªØng h√†m c√≥ s·∫µn c·ªßa React ƒë·ªÉ vi·∫øt component ngon h∆°n","content":"<p>H·∫ßu h·∫øt c√°c tr∆∞·ªùng h·ª£p, hi·ªáu nƒÉng c·ªßa c√°c ·ª©ng d·ª•ng React kh√¥ng ph·∫£i l√† v·∫•n ƒë·ªÅ qu√° nghi√™m tr·ªçng. B·∫£n th√¢n th∆∞ vi·ªán React ƒë√£ h·ªó tr·ª£ t·∫≠n rƒÉng c√°c ph∆∞∆°ng ƒë·ªÉ c·∫£i thi·ªán l√∫c render component. Tuy nhi√™n c≈©ng c√≥ v√†i tr∆∞·ªùng h·ª£p c√°c component c·ªßa ch√∫ng ta render nhi·ªÅu h∆°n m·ª©c c·∫ßn thi·∫øt v√† l√†m ·∫£nh h∆∞·ªüng ƒë·∫øn hi·ªáu nƒÉng chung.</p>\n<p>L·∫•y v√≠ d·ª•</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ListPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> title <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header</span></span> <span class=\"token attr-name\">title</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span></span> <span class=\"token attr-name\">listItems</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Trong v√≠ d·ª• r·∫•t r·∫•t ƒë∆°n gi·∫£n tr√™n, n·∫øu <code class=\"language-inline-text\">data</code> thay ƒë·ªïi, to√†n b·ªô <code class=\"language-inline-text\">&lt;Listpage/></code> s·∫Ω render, bao g·ªìm c·∫£ <code class=\"language-inline-text\">&lt;Header /></code> v·ªën kh√¥ng c√≥ thay ƒë·ªïi g√¨ n·∫øu gi√° tr·ªã <code class=\"language-inline-text\">data</code> kh√°c ƒëi</p>\n<p>Th·ªùi b√¢y gi·ªù ch√∫ng ta chu·ªông ki·ªÉu vi·∫øt functional component h∆°n, 3 c√°ch ƒë·ªÉ t·ªëi ∆∞u cho m·ªôt functional component l√† s·ª≠ d·ª•ng: <code class=\"language-inline-text\">React.memo</code>, <code class=\"language-inline-text\">useMemo</code>, <code class=\"language-inline-text\">useCallback</code></p>\n<h2 id=\"reactmemo\"><a href=\"#reactmemo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>React.Memo</h2>\n<p>L√† m·ªôt Higher order component d√πng ƒë·ªÉ <strong>ghi nh·ªõ</strong> k·∫øt qu·∫£ c·ªßa function component, t·∫•t nhi√™n n·∫øu truy·ªÅn c√πng m·ªôt prop th√¨ k·∫øt qu·∫£ tr·∫£ v·ªÅ s·∫Ω l√† kh√¥ng ƒë·ªïi, n√™n c√≥ th·ªÉ l·∫•y k·∫øt qu·∫£ <strong>ƒë√£ nh·ªõ</strong> tr∆∞·ªõc ƒë√≥</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Header</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> title <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>Header<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>C√°ch vi·∫øt tr√™n l√† b·∫Øt bu·ªôc, v√¨ n·∫øu b·∫°n vi·∫øt nh∆∞ b√™n d∆∞·ªõi, component c·ªßa b·∫°n s·∫Ω kh√¥ng xu·∫•t hi·ªán trong devtool</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> Header <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Header<span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"usememo\"><a href=\"#usememo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>useMemo</h2>\n<p>T√™n c√≥ v·∫ª gi·ªëng, nh∆∞ng kh√¥ng gi·ªëng nhau, n·∫øu <code class=\"language-inline-text\">React.memo</code> l√† m·ªôt HOC ƒë·ªÉ ghi nh·ªõ m·ªôt function component, <code class=\"language-inline-text\">useMemo</code> l√† h√†m gi·ªëng nh∆∞ helper cho ph√©p ch·ªâ ƒë·ªãnh: l∆∞u l·∫°i k·∫øt qu·∫£ c·ªßa h√†m n√†o v√† nh·ªØng gi√° tr·ªã n√†o s·∫Ω l√†m thay ƒë·ªïi k·∫øt qu·∫£ ƒë√≥.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> widgetList <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n    widgets<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">w</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>w<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">totalPrice</span><span class=\"token operator\">:</span> <span class=\"token function\">someComplexFunction</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">.</span>price<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">estimatedDeliveryDate</span><span class=\"token operator\">:</span> <span class=\"token function\">someOtherComplexFunction</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">.</span>warehouseAddress<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>widgets<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>·ªû ƒëo·∫°n code tr√™n, ch√∫ng ta mu·ªën <strong>ghi nh·ªõ</strong> gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">totalPrice</code> v√† <code class=\"language-inline-text\">estimatedDeliveryDate</code> b·ªüi v√¨ vi·ªác t√≠nh to√°n c√°c gi√° tr·ªã n√†y v√¥ c√πng <em>t·ªën s·ª©c</em>. Ch√∫ng ta ch·ªâ ƒë·ªãnh <code class=\"language-inline-text\">widgets</code> n·∫øu kh√¥ng thay ƒë·ªïi th√¨ ƒë·ª´ng ƒëi t√≠nh l·∫°i l√†m g√¨, m√† l·∫•y k·∫øt qu·∫£ l·∫ßn tr∆∞·ªõc ra.</p>\n<h2 id=\"usecallback\"><a href=\"#usecallback\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>useCallback</h2>\n<p>ƒê∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ch·∫∑n vi·ªác render kh√¥ng c·∫ßn thi·∫øt gi·ªØa <code class=\"language-inline-text\">parent</code> v√† <code class=\"language-inline-text\">children</code> component</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Parent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showExtraDetails<span class=\"token punctuation\">,</span> setShowExtraDetails<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span>\n        <span class=\"token operator\">&lt;</span>Child onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token function\">showData</span><span class=\"token punctuation\">(</span>showExtraDetails<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Component <code class=\"language-inline-text\">Child</code> s·∫Ω lu√¥n re-render khi <code class=\"language-inline-text\">Parent</code> render, th·∫≠m ch√≠ <code class=\"language-inline-text\">Child</code> l√† m·ªôt <code class=\"language-inline-text\">PureComponent</code> ho·∫∑c ƒë∆∞·ª£c b·ªçc trong <code class=\"language-inline-text\">React.memo</code></p>\n<p><code class=\"language-inline-text\">useCallback</code> ƒë∆∞·ª£c d√πng nh∆∞ b√™n d∆∞·ªõi</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Parent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showExtraDetails<span class=\"token punctuation\">,</span> setShowExtraDetails<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> handleClick <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">showData</span><span class=\"token punctuation\">(</span>showExtraDetails<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span>showExtraDetails<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Child</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://headway.io/blog/react-optimize-components-memo-usememo-usecallback/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://headway.io/blog/react-optimize-components-memo-usememo-usecallback/</a></p>\n","cover_image":""}},{"node":{"id":"8cd9d8c2dba06fb83a1f7d2ff11853f6","title":"C√°ch vi·∫øt React render props","path":"/2019-11-27-huong-dan-pattern-react-render-prop/","date":"2019-11-27","timeToRead":5,"desc":"M·ªôt trong nh·ªØng pattern ƒë·ªÉ ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng l·∫°i logic","content":"<p>C√≥ 2 ƒëi·ªÅu quan tr·ªçng c·∫ßn n√≥i tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu. M·ªôt l√†, ch√∫ng ta ƒëang n√≥i ƒë·∫øn m·ªôt <strong>c√°ch l√†m</strong> (pattern) trong l·∫≠p tr√¨nh, ko ph·∫£i ƒë·∫∑c s·∫£n c·ªßa React. Th·ª© 2, ƒë√¢y kh√¥ng ph·∫£i l√† ki·∫øn th·ª©c b·∫Øt bu·ªôc ƒë·ªÉ vi·∫øt m·ªôt ·ª©ng d·ª•ng React. B·∫°n c√≥ th·ªÉ kh√¥ng c·∫ßn ƒë·ªçc b√†i n√†y, v·∫´n c√≥ th·ªÉ v·ªó ng·ª±c x∆∞ng t√™n l√† m·ªôt React developer v√† vi·∫øt React nh∆∞ th∆∞·ªùng. C√≤n n·∫øu b·∫°n t√≤ m√≤ mu·ªën bi·∫øt th√™m m√≥n <em>ƒë·ªì ch∆°i</em> th√¨ ƒë·ªçc ti·∫øp.</p>\n<p>Nh·ªØng l·∫≠p tr√¨nh vi√™n m·ªõi v√†o ngh·ªÅ c≈©ng bi·∫øt ƒë·∫øn c√¢u th·∫ßn ch√∫ \"D.R.Y\" (ƒë·ª´ng t·ª± l·∫≠p l·∫°i ch√≠nh m√¨nh). C√¢u th·∫ßn ch√∫ r·∫•t ƒë√°ng ƒë·ªÉ trong t√¢m ni·ªám. C√°i c√°ch l√†m Render Props n√†y c≈©ng l√† ƒë·ªÉ ƒë·∫°t ƒë∆∞·ª£c c√°i g·ªçi l√† DRY, gi·ªëng nh∆∞ Higher-Order-Components.</p>\n<p>Tr∆∞·ªõc khi xem ƒë·∫øn gi·∫£i ph√°p, ch√∫ng ta c·∫ßn bi·∫øt v·∫•n ƒë·ªÅ c·∫ßn gi·∫£i quy·∫øt l√† g√¨. V√≠ d·ª• ch√∫ng ta mu·ªën l√†m l·∫°i c√°i dashboard nh∆∞ b√™n d∆∞·ªõi</p>\n<p><img src=\"https://tylermcginnis.com/images/posts/react-fundamentals/tool-tips.gif\"></p>\n<p>B·∫°n s·∫Ω c·∫ßn hi·ªÉn th·ªã m·ªôt ƒë·ªëng c√°i ki·ªÉu tooltip kh√°c nhau khi m·ªôt element ƒë∆∞·ª£c hover l√™n</p>\n<p>C√≥ v√†i c√°ch ƒë·ªÉ ti·∫øp c·∫≠n v·∫•n ƒë·ªÅ n√†y, m·ªôt l√† b·∫°n ki·ªÉm tra m·ªôt component c·ª• th·ªÉ n√†o ƒë√≥ c√≥ ƒëang hover kh√¥ng, r·ªìi hi·ªÉn th·ªã ho·∫∑c ·∫©n tooltip. C√≥ 3 component b·∫°n c·∫ßn ki·ªÉm tra, b·∫°n ƒë∆∞a h√†m ki·ªÉm tra v√†o c·∫£ 3 component <code class=\"language-inline-text\">Info</code>, <code class=\"language-inline-text\">TrendChart</code>, <code class=\"language-inline-text\">DailyChart</code></p>\n<p>Component Info</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Info</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span>\n        <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Icon-svg Icon--hoverable-svg<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">height</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">viewBox</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 16 16<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>path</span> <span class=\"token attr-name\">d</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng <code class=\"language-inline-text\">onMouseOver</code> v√† <code class=\"language-inline-text\">onMouseOut</code>, d√πng th√™m state <code class=\"language-inline-text\">hovering</code> ƒë·ªÉ ch√∫ng ta c√≥ th·ªÉ k√™u n√≥ <code class=\"language-inline-text\">re-render</code> khi c·∫ßn thi·∫øt</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Info</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hovering</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">mouseOver</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hovering</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function-variable function\">mouseOut</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hovering</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>hovering <span class=\"token operator\">===</span> <span class=\"token boolean\">true</span>\n          <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Tooltip</span></span> <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n          <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span>\n          <span class=\"token attr-name\">onMouseOver</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mouseOver<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">onMouseOut</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mouseOut<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Icon-svg Icon--hoverable-svg<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">height</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">viewBox</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 16 16<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>path</span> <span class=\"token attr-name\">d</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Gi·ªù ch√∫ng ta c·∫ßn <em>copy</em> t√≠nh nƒÉng n√†y cho 2 component c√≤n l·∫°i. Vi·ªác <em>copy</em> n√†y vi ph·∫°m nghi√™m tr·ªçng c√¢u th·∫ßn ch√∫ DRY. Ch√∫ng ta ph·∫£i l√†m sao ƒë·ªÉ s·ª≠ d·ª•ng l·∫°i nh·ªØng logic gi·ªëng nhau m√† ko ph·∫£i copy-paste</p>\n<p>Trong h·∫ßu h·∫øt c√°c tr∆∞·ªùng h·ª£p khi ch√∫ng ta d·ª±ng m·ªôt component trong React, k·∫øt qu·∫£ output cu·ªëi c√πng l√† m·ªôt c√°i UI g√¨ ƒë√≥</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">View <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Tuy nhi√™n ch·ªâ l√† h·∫ßu h·∫øt, ch·ª© ko ph·∫£i to√†n b·ªô, c√≥ nh∆∞ng component nh∆∞ l√† <em>wrapper</em> c·ªßa m·ªôt component kh√°c, n√≥ ch·ªâ mang nhi·ªám v·ª• qu·∫£n l√Ω logic.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Users</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">users</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">getUsers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">users</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> users <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Grid</span></span> <span class=\"token attr-name\">data</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Nh∆∞ component <code class=\"language-inline-text\">Users</code> ·ªü tr√™n, kh√¥ng ch·ªãu tr√°ch nhi·ªám qu·∫£n l√Ω UI, chuy·ªán ƒë√≥ l√† vi·ªác c·ªßa <code class=\"language-inline-text\">Grid</code></p>\n<p>Trong React, ch√∫ng ta c√≥ th·ªÉ truy·ªÅn function v√†o nh∆∞ prop cho component</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">User</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span><span class=\"token function\">id</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// vuilaptrinh.com</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span></span> <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">isAuthed</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> isAuthed <span class=\"token operator\">===</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">?</span> <span class=\"token string\">'vuilaptrinh.com'</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>V·ªõi √Ω t∆∞·ªüng n√†y, ch√∫ng ta gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ tr√™n nh∆∞ th·∫ø n√†o?</p>\n<p>Tr∆∞·ªõc ti√™n ch√∫ng ta t·∫°o ra m·ªôt component <em>wrapper</em> ch·ªãu tr√°ch nhi·ªám qu·∫£n l√Ω logic c·ªßa hover</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Hover</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hovering</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">mouseOver</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hovering</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function-variable function\">mouseOut</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hovering</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">onMouseOver</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mouseOver<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onMouseOut</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mouseOut<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√¢u h·ªèi ti·∫øp theo, component <code class=\"language-inline-text\">Hover</code> th√¨ render c√°i g√¨. V·∫≠n d·ª•ng √Ω t∆∞·ªüng truy·ªÅn prop l√† m·ªôt function, ch√∫ng ta cho <code class=\"language-inline-text\">Hover</code> nh·∫≠n v√†o m·ªôt prop function c√≥ t√™n <code class=\"language-inline-text\">render</code>, ch√∫ng ta s·∫Ω nh√©t v√†o trong c√°i function <code class=\"language-inline-text\">render</code> gi√° tr·ªã <code class=\"language-inline-text\">hovering</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hover</span></span> <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">hovering</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    Is hovering? </span><span class=\"token punctuation\">{</span>hovering <span class=\"token operator\">===</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">?</span> <span class=\"token string\">'Yes'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'No'</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>Vi·ªác c√≤n l·∫°i l√† c·∫≠p nh·∫≠p l·∫°i component <code class=\"language-inline-text\">Hover</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Hover</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hovering</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">mouseOver</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hovering</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function-variable function\">mouseOut</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hovering</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">onMouseOver</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mouseOver<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onMouseOut</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mouseOut<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>hovering<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>V·∫•n ƒë·ªÅ ƒë√£ ƒë∆∞·ª£c gi·∫£i quy·∫øt. B·∫•t k·ªÉ khi n√†o c·∫ßn d√πng logic <code class=\"language-inline-text\">hover</code> ch√∫ng ta s·∫Ω g·ªçi l·∫°i component <code class=\"language-inline-text\">Hover</code>. C√°ch l√†m n√†y ƒë∆∞·ª£c g·ªçi v·ªõi c√°i t√™n ƒë√∫ng nh∆∞ nh·ªØng g√¨ ƒë√£ di·ªÖn ra (truy·ªÅn prop render l√† m·ªôt function) <strong>Render Props</strong></p>\n<p>M·ªôt c√°ch vi·∫øt kh√°c kh√¥ng d√πng prop t√™n <code class=\"language-inline-text\">render</code>, x√†i lu√¥n prop t√™n <code class=\"language-inline-text\">children</code> c√≥ s·∫µn, ch√∫ng ta s·∫Ω vi·∫øt m·ªôt c√°ch g·ªçn h∆°n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">User</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> This is props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">User</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>So v·ªõi c√°ch l√†m c·ªßa Higher-Order-Component, Render Props s·∫Ω kh√¥ng v∆∞·ªõng ph·∫£i v·∫•n ƒë·ªÅ ƒë·ª•ng t√™n props, kh√¥ng m·∫•t quy·ªÅn ki·ªÉm so√°t v√†o <em>tay</em> component ƒë∆∞·ª£c wrap l·∫°i, v√† wrapper hell.</p>\n<p><a href=\"https://tylermcginnis.com/react-render-props/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://tylermcginnis.com/react-render-props/</a></p>\n","cover_image":""}},{"node":{"id":"89de1c757498a4b9f6dfef7a689dd2a6","title":"L·ª±a ch·ªçn framework frontend n√†o trong th·ªùi ƒëi·ªÉm hi·ªán t·∫°i","path":"/2019-11-24-huong-dan-chon-framework-frontend/","date":"2019-11-24","timeToRead":12,"desc":"ƒê√¢y kh√¥ng ph·∫£i l√† m·ªôt b√†i so s√°nh ƒë√¢u m·ªõi l√† framework ch·∫°y nhanh nh·∫•t","content":"<p>Th·ªùi ƒëi·ªÉm hi·ªán t·∫°i n·∫øu b·∫°n ƒëang l√†m Frontend th√¨ ch·∫Øc h·∫≥n ƒëang s·ª≠ d·ª•ng m·ªôt framework n√†o ƒë√≥ trong 3 th·∫±ng n√†y, Vue, React, v√† Angular. N·∫øu tr∆∞·ªõc ƒë√¢y tr√™n c·∫£ t√° framework, v√† c·∫£ t√° v√≠ d·ª• v·ªÅ l√†m m·ªôt ·ª©ng d·ª•ng web ToDoMVC tr√™n github, th√¨ cu·ªôc ch∆°i gi·ªù ƒë√¢y ƒë√£ ƒë·ª° h∆°n r·∫•t nhi·ªÅu, khi ch√∫ng ta ch·ªâ c√≤n 3 l·ª±a ch·ªçn s√°ng gi√°.</p>\n<p>ƒê·ªÉ vi·∫øt m·ªôt ·ª©ng d·ª•ng ph·ª©c t·∫°p, ch√∫ng ta b·∫Øt bu·ªôc ph·∫£i s·ª≠ d·ª•ng framework, v√¨ n·∫øu kh√¥ng c√≥ nh·ªØng framework nh∆∞ v·∫≠y, ch√∫ng ta s·∫Ω t·ªën kh√¥ng bi·∫øt bao nhi√™u th·ªùi gian ƒë·ªÉ ƒë·∫°t ƒë∆∞·ª£c k·∫øt qu·∫£ cu·ªëi c√πng.</p>\n<p>Ch·∫Øc c√°c b·∫°n c≈©ng nh∆∞ m√¨nh ƒë√£ qu√° m·ªát m·ªèi v·ªõi nh·ªØng b√†i vi·∫øt so s√°nh 3 framework tr√™n, ai ngon h∆°n ai, c√°c b·∫°n c≈©ng n√™n d·ª´ng t√¨m ki·∫øm c√¢u tr·∫£ l·ªùi cho c√¢u h·ªèi \"Top 10 framework n√™n x√†i trong nƒÉm 2019\". T·∫°i sao? V√¨ nh·ªØng b√†i vi·∫øt n√†y ƒëa ph·∫ßn s·∫Ω t·∫≠p trung v√†o  ƒë·∫øm s·ªë l∆∞·ª£ng <em>sao</em> tr√™n Github, s·ªë l∆∞·ª£ng t·∫£i v·ªÅ t·ª´ NPM, s·ªë c√¢u h·ªèi li√™n quan tr√™n Stack Overflow. Nh·ªØng con s·ªë th·ªëng k√™ v√¥ h·ªìn n√†y ch·ªâ c√≥ t√°c d·ª•ng trong nh·ªØng tr∆∞·ªùng h·ª£p c·ª• th·ªÉ, nh∆∞ ƒëi qu·∫£ng b√° v·ªÅ m·ª©c ƒë·ªô ph·ªß r·ªông c·ªßa nh·ªØng framework n√†y. N·∫øu b·∫°n l√† d√¢n k·ªπ thu·∫≠t v√† nh√¨n nh·∫≠n ·ªü g√≥c ƒë·ªô k·ªπ thu·∫≠t, ph√°n x√©t nh·ªØng framework n√†y ·ªü g√≥c ƒë·ªô k·ªπ thu·∫≠t ch·ª© kh√¥ng th·ªÉ cƒÉn c·ª© tr√™n s·ªë l∆∞·ª£t <em>view</em> v√† <em>download</em></p>\n<blockquote>\n<p>K·ªπ thu·∫≠t quy·∫øt ƒë·ªãnh b√™n trong c·ªßa t·ª´ng framework l√† g√¨, ƒë√¢u l√† s·ª± kh√°c nhau th·ª±c s·ª± c·ªßa t·ª´ng framework</p>\n</blockquote>\n<p>M·ª•c ti√™u cu·ªëi c√πng c·ªßa c√°c framework ƒë·ªÅu l√† ƒë·ªÉ gi√∫p ch√∫ng ta vi·∫øt ·ª©ng d·ª•ng web hi·ªáu qu·∫£ nh·∫•t c√≥ th·ªÉ, vi·ªác c·∫°nh tranh gi·ªØa c√°c framework v·ªõi nhau l√† √Ω t∆∞·ªüng t·ªët hay kh√¥ng? M·ªói framework s·∫Ω c√≥ m·ªôt s·ªë l∆∞·ª£ng ng∆∞·ªùi s·ª≠ d·ª•ng nh·∫•t ƒë·ªãnh, nh∆∞ React-Angular-Vue hi·ªán t·∫°i c√≥ kho·∫£n h∆°n n·ª≠a tri·ªáu developer ƒëang <em>ƒÉn n·∫±m</em> v·ªõi n√≥ h·∫±ng ng√†y.</p>\n<p>Kh√¥ng c√≥ kh√°i ni·ªám \"ƒëi·ªÉm t·ªët\" v√† \"ƒëi·ªÉm ch∆∞a t·ªët\" cho c√°c framework. Ng∆∞·ªùi ta th∆∞·ªùng hay h·ªèi m·∫•y c√¢u, framework n√†o x√†i ngon nh·∫•t. M·ªôt d·∫°ng c√¢u h·ªèi b·∫°n n√™n ng·ª´ng l√†m kh√≥ nhau v√¨ kh√¥ng th·ªÉ n√†o so s√°nh nh∆∞ to√°n h·ªçc 3 > 2 > 1</p>\n<p>Vi·ªác thi·∫øt k·∫ø ph·∫ßn m·ªÅm lu√¥n ƒë√≤i h·ªèi m·ªôt s·ª± ƒë√°nh ƒë·ªïi, ƒë·∫∑c bi·ªát l√† v·ªõi web, ch·∫Øc c√≥ l·∫Ω v√¨ c√≥ qu√° nhi·ªÅu th·ª© ng∆∞·ªùi ta mu·ªën l√†m th√¥ng qua web, t·ª´ m·ªôt trang web ƒë∆°n gi·∫£n ch·ªâ l√† HTML tƒ©nh ƒë·∫øn c·∫£ m·ªôt h·ªá th·ªëng ph·ª©c t·∫°p nh·∫•t b·∫°n c√≥ th·ªÉ nghƒ© ra, ƒë·ªÉ ƒë√°p ·ª©ng to√†n b·ªô nh·ªØng nhu c·∫ßu kh√°c nhau ƒë√≥, c√°c framework ph·∫£i ch·∫•p nh·∫≠n ƒë√°nh ƒë·ªïi m·ªôt s·ªë th·ª©, ch·ª© ko th·ªÉ ƒë√°p ·ª©ng to√†n b·ªô v·ªõi m·ªôt gi·∫£i ph√°p to√†n di·ªán ƒë∆∞·ª£c</p>\n<h2 id=\"scope\"><a href=\"#scope\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Scope</h2>\n<blockquote>\n<p>Framework cung c·∫•p bao nhi√™u ƒë·ªì ch∆°i cho b·∫°n</p>\n</blockquote>\n<p>M·ªôt trong nh·ªØng v√≠ d·ª• kinh ƒëi·ªÉn gi·ªØa <strong>th∆∞ vi·ªán</strong> v√† <strong>framework</strong> l√† React v√† Angular. React ƒë∆∞·ª£c xem l√† th∆∞ vi·ªán trong khi Angular s·∫Ω l√† framework</p>\n<p>L√† m·ªôt th∆∞ vi·ªán, React ch·ªâ mu·ªën t·∫≠p trung cung c·∫•p m√¥ h√¨nh ƒë·ªÉ ph√°t tri·ªÉn UI. ƒê·ªÉ h√¨nh dung d·ªÖ h∆°n, li√™n t∆∞·ªüng t·ªõi c√°c nh√† m√°y s·∫£n xu·∫•t b√∫n, scope r·∫•t c·ª• th·ªÉ, t√¥i s·∫Ω t·∫≠p trung v√†o vi·ªác s·∫£n xu·∫•t ra b√∫n, vi·ªác c√°c b·∫°n ƒëem b√∫n n√†y v·ªÅ n·∫•u th√†nh m√≥n g√¨ l√† do b·∫°n, l√Ω do t·∫°i sao ecosystem c·ªßa React lu√¥n lu√¥n s√¥i ƒë·ªông, r·∫•t nhi·ªÅu dev ƒë√£ ch·∫ø bi·∫øn th√†nh c√°c m√≥n kh√°c nhau, nh∆∞ v·ªõi m√≥n b√∫n ch√∫ng ta c√≥ b√∫n ri√™u, canh b√∫n, b√∫n ƒë·∫≠u m·∫Øm t√¥m, b√∫n c√° ch√¢u ƒë·ªëc, b√∫n m·∫Øm, v√¢ng v√¢ng.</p>\n<p>Trong khi ƒë√≥, Angular v·ªõi t∆∞ c√°ch l√† m·ªôt framework th·ª±c th·ª•, n√≥ s·∫Ω ti·∫øp c·∫≠n v·∫•n ƒë·ªÅ theo h∆∞·ªõng t·ª´ tr√™n xu·ªëng. H√¨nh dung nh∆∞ m√¨ g√≥i nu√¥i nh√¢n t√†i ·ªü Vi·ªát Nam, v·ªõi m·ªçi th·ª© ƒë√≥ng g√≥i ƒë·∫ßy ƒë·ªß ƒë·ªÉ b·∫°n c√≥ m·ªôt m√≥n c·ª©u ƒë√≥i t·∫°m th·ªùi, b·ªôt n√™m, d·∫ßu, h√†nh. Angular cung c·∫•p h·ªá th·ªëng form validation, animation,... r·∫•t nhi·ªÅu t√≠nh nƒÉng kh√°c m√† ch√∫ng ta r·∫•t c·∫ßn thi·∫øt ƒë·ªÉ d·ª±ng n√™n m·ªôt ·ª©ng d·ª•ng ho√†n ch·ªânh. V·ªõi scope l·ªõn nh∆∞ v·∫≠y, m·ªçi t√≠nh nƒÉng khi thi·∫øt k·∫ø ƒë√£ ƒë∆∞·ª£c nghƒ© ƒë·∫øn l√†m th·∫ø n√†o ƒë·ªÉ ch√∫ng <em>s·ªëng chung</em> v·ªõi nhau m·ªôt c√°ch m∆∞·ª£t m√†</p>\n<p><strong>L·ª£i √≠ch khi c√≥ scope nh·ªè v√† c·ª• th·ªÉ</strong></p>\n<ul>\n<li>√çt kh√°i ni·ªám, d·ªÖ ti·∫øp c·∫≠n ngay t·ª´ ƒë·∫ßu. Trong React b·∫°n s·∫Ω c√≥ m√¥ h√¨nh l√†m component, prop, state, virtual DOM, hook, bao nhi√™u ki·∫øn th·ª©c th√¥i l√† b·∫°n ƒë√£ c√≥ th·ªÉ b·∫Øt ƒë·∫ßu l√†m quen React.</li>\n<li>Linh ƒë·ªông, m√≥n b√∫n c√≥ th·ªÉ k·∫øt h·ª£p v·ªõi r·∫•t nhi·ªÅu th·ª© gia v·ªã, c√°ch n·∫•u kh√°c nhau ƒë·ªÉ cho ra c√°c m√≥n ƒÉn kh√°c nhau.</li>\n<li>Team duy tr√¨ React <em>r·∫£nh</em> h∆°n, nh·ªØng chuy·ªán kh√°c ƒë√£ c√≥ c·ªông ƒë·ªìng g√°nh v√°c, nh∆∞ ƒëi l√†m React Router, React Redux, React Form, h·ªç s·∫Ω c√≥ th·ªùi gian nhi·ªÅu h∆°n ƒë·ªÉ t·∫≠p trung v√†o c√°c √Ω t∆∞·ªüng m·ªõi cho b·∫£n th√¢n React</li>\n</ul>\n<p><strong>H·∫°n ch·∫ø khi scope nh·ªè v√† c·ª• th·ªÉ</strong></p>\n<ul>\n<li>Khi b·∫°n ph·∫£i x√¢y d·ª±ng m·ªôt ·ª©ng d·ª•ng ph·ª©c t·∫°p, m·ªôt v√†i concept c∆° b·∫£n l√† kh√¥ng ƒë·ªß x√†i, b·∫°n ph·∫£i t·ª± vi·∫øt kh√° nhi·ªÅu. Gi·ªëng nh∆∞ b·∫Øt b·∫°n di·ªÖn t·∫£ t·∫•t c·∫£ nh·ªØng c√¢u n√≥i h·∫±ng ng√†y b·∫±ng c√°ch ch·ªâ s·ª≠ d·ª•ng 10 t·ª´, th√¨ b·∫°n di·ªÖn ƒë·∫°t √Ω nh∆∞ th·∫ø n√†o?</li>\n<li>C√°ch l√†m (<em>pattern</em>) m·ªõi ng√†y c√†ng nhi·ªÅu. N√≥i h·ªçc React r·∫•t d·ªÖ l√† b·∫°n th·ª±c s·ª± ch∆∞a bi·∫øt ƒë·∫øn ngo√†i React ra, b·∫°n c√≥ ph·∫£i h·ªçc v√¥ s·ªë c√°c c√°ch l√†m (pattern) kh√°c, nh∆∞ Redux, m·∫∑c d√π kh√¥ng c√≥ trong t√†i li·ªáu ch√≠nh th·ª©c tr√™n React, nh∆∞ng l·∫°i l√† th·ª© b·∫°n kh√¥ng th·ªÉ b·ªè qua n·∫øu mu·ªën d√πng React nh∆∞ m·ªôt React Developer ch√¢n ch√≠nh. N√†o l√† Higher Other Component, Render Props, React hook, r·ªìi qu√° tr·ªùi c√°ch ƒë·ªÉ s·ª≠ d·ª•ng CSS trong JS, t√†i li·ªáu ch√≠nh th·ª©c c·ªßa React s·∫Ω kh√¥ng n√≥i b·∫°n n√™n d√πng g√¨, b·∫°n ph·∫£i t·ª± t√¨m hi·ªÉu v√† ch·ªçn c√°i n√†o m√¨nh th√≠ch. Nh·ªØng ki·∫øn th·ª©c n√†y b·∫°n ph·∫£i n·∫°p t·ª´ t·ª´ nh∆∞ l√† m·ªôt ki·∫øn th·ª©c ch√≠nh quy ƒë·ªÉ b·∫°n c√≥ th·ªÉ v·ªó ng·ª±c x∆∞ng t√™n <em>tao l√† React Developer</em>.</li>\n<li>Ecosystem ph√°t tri·ªÉn qu√° nhanh kh√¥ng ƒë·ªìng nghƒ©a v·ªõi ch·∫•t l∆∞·ª£ng c√°c th∆∞ vi·ªán d√†nh cho React c√°i n√†o c≈©ng ngon, r·∫•t nhi·ªÅu th∆∞ vi·ªán n·ªïi l√™n m·ªôt th·ªùi r·ªìi ra ƒëi m√£i m√£i, nh∆∞ Flux, r·ªìi bao nhi√™u l√† c√°ch vi·∫øt CSS trong JS. Trong ta lu√¥n trong c·∫£m gi√°c lo s·ª£ <strong>l·ª° m·∫•t kh√¥ng x√†i th·∫±ng ngon nh·∫•t r·ªìi</strong></li>\n</ul>\n<p><strong>L·ª£i √≠ch khi c√≥ scope bao la b√°t ng√°t</strong></p>\n<ul>\n<li>C√°c v·∫•n ƒë·ªÅ th∆∞·ªùng g·∫∑p ƒë√£ ƒë∆∞·ª£c gi·∫£i quy·∫øt h·∫øt, b·∫°n c√≥ ngay t√¥ m√¨ ƒë·ªÉ ƒÉn trong 5 ph√∫t m√† kh√¥ng c·∫ßn suy nghƒ© nhi·ªÅu, c·ª© l√™n trang ch·ªß, ƒë·ªçc t√†i li·ªáu, h·ªçc c√°i framework xong l√† x√†i, ƒë·ªÉ nghi√™n c·ª©u gi√¢y m∆° r·ªÖ m√° c√≥ th·ªÉ ƒë·ªÉ sau. ƒê√¢u ai c·∫•m b·∫°n ƒÉn m√¨ g√≥i b·ªè th√™m th·ªãt b√≤, tr·ª©ng hay t√¥m c√†ng.</li>\n<li>C√°c t√≠nh nƒÉng b√™n trong ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ l√†m vi·ªác m∆∞·ª£t m√† ƒë·∫£m b·∫£o t√≠nh th·ªëng nh·∫•t c·ªßa to√†n b·ªô h·ªá th·ªëng, kh√¥ng c·∫ßn ch·∫°y ƒëi ƒë√¢u ƒë·ªÉ ki·∫øm gi·∫£i ph√°p cho m·ªôt v·∫•n ƒë·ªÅ qu√° cƒÉn b·∫£n, b·∫°n c·ª© l√™n trang ch√≠nh th·ª©c c·ªßa n√≥ xem ng∆∞·ªùi ta gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ ƒë√≥ nh∆∞ th·∫ø n√†o, kh√¥ng c√≤n ph·∫£i suy nghƒ© l·ª±a ch·ªçn ƒë√¢u l√† c√°ch t·ªët nh·∫•t trong h∆°n ch·ª•c c√°i gi·∫£i ph√°p ƒë∆∞·ª£c ƒë∆∞a ra.</li>\n</ul>\n<p><strong>H·∫°n ch·∫ø c·ªßa scope bao qu√°t b√°t ng√°t h·∫øt v∆∞·ªùn hoa</strong></p>\n<ul>\n<li>H·ªçc l√† m·ªôt qu√° tr√¨nh d√†i, nhi·ªÅu khi ƒë·ªÉ t·ªõi ƒë∆∞·ª£c b∆∞·ªõc c√≥ m·ªôt c√°i g√¨ ƒë√≥ hi·ªÉn th·ªã tr√™n m√†n h√¨nh, b·∫°n ph·∫£i tr·∫£i qua c·∫£ kh√≥a h·ªçc b√†i b·∫£ng. Nh·ªØng ng∆∞·ªùi kh√¥ng c√≥ ki·∫øn th·ª©c v·ªÅ m·ªôt ng√¥n ng·ªØ Backend n√†o c·∫£, ch·ªâ bi·∫øt HTML, CSS, javascript m√† ƒë·ªçc t√†i li·ªáu c·ªßa Angular th√¨ ph·∫£i n√≥i l√† m·ªôt tr√£i nghi·ªám v√¥ c√πng ƒëau th∆∞∆°ng</li>\n<li>ƒê√¥i khi m·ªôt gi·∫£i ph√°p ƒë∆∞·ª£c cung c·∫•p s·∫µn l·∫°i kh√¥ng ph√π h·ª£p v·ªõi t√≠nh hu·ªëng g·∫∑p ph·∫£i, ch√∫ng ta ∆∞·ªõc g√¨ c√≥ th·ªÉ l√†m c√°ch kh√°c, nh∆∞ng ƒëi·ªÅu ƒë√≥ l√† kh√¥ng th·ªÉ.</li>\n<li>H·ªá th·ªëng l·ªõn ƒë√≤i h·ªèi chi ph√≠ r·∫•t l·ªõn ƒë·ªÉ duy tr√¨ c≈©ng nh∆∞ ƒë∆∞a ra c√°c √Ω t∆∞·ªüng m·ªõi, r·∫•t nhi·ªÅu th√†nh ph·∫ßn ph·∫£i t√≠ch h·ª£p ƒë·ªÉ c·∫£ h·ªá th·ªëng c√≥ th·ªÉ k·∫øt n·ªëi ho·∫°t ƒë·ªông tr∆°n tru</li>\n</ul>\n<h2 id=\"c∆°-ch·∫ø-render\"><a href=\"#c%C6%A1-ch%E1%BA%BF-render\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C∆° ch·∫ø render</h2>\n<blockquote>\n<p>C√°ch structure, c√°ch qu·∫£n l√Ω code c·ªßa framework</p>\n</blockquote>\n<p>ƒê·ªÉ ƒë∆°n gi·∫£n ch√∫ng ta so s√°nh JSX v√† Templates</p>\n<p><strong>ƒêi·ªÉm c·ªông c·ªßa JSX/Virtual DOM</strong></p>\n<ul>\n<li>T·∫•t c·∫£ ƒëi·ªÅu l√† javascript, ai c≈©ng th√≠ch, b·∫°n kh√¥ng c·∫ßn bi·∫øt nh·ªØng syntax m·ªõi ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a b·ªüi framework, nh·ªØng ki·∫øn th·ª©c b·∫°n n·∫°p v√†o l√† ki·∫øn th·ª©c n·ªÅn t·∫£ng c·ªßa javascript, m·ªôt khi b·∫°n ƒë√£ c·ª©ng tay, b·∫°n c√≥ th·ªÉ thi√™n bi·∫øn v·∫°n h√≥a theo s·ªü th√≠ch.</li>\n<li>Xem <em>view</em> nh∆∞ m·ªôt d·∫°ng <em>data </em>, m·ªôt component s·∫Ω return m·ªôt th·ª© g√¨ ƒë√≥ d·ª±a v√†o nh·ªØng gi√° tr·ªã input kh√°c nhau, b·∫°n c√≥ th·ªÉ l√†m nh·ªØng th·ª© nh∆∞ ch·ª•p m·ªôt c√°i snapshot d·ª±a tr√™n virtual DOM, render n√≥ tr√™n nh·ªØng target kh√°c nh∆∞ terminal, PDF, Canvas, WebGL</li>\n</ul>\n<p><strong>ƒêi·ªÉm tr·ª´ c·ªßa JSX/Virtual DOM</strong></p>\n<ul>\n<li>V·ªën dƒ© s·∫Ω ti√™u t·ªën t√†i nguy√™n. Khi React m·ªõi ra ƒë·ªùi, h·ªç c≈©ng ƒë√£ tr·∫£ l·ªùi cho c√¢u h·ªèi <em>l√†m nh∆∞ v·∫≠y c√≥ ch·∫≠m kh√¥ng?</em>, <em>v√¢ng n√≥ ch·∫≠m nh∆∞ng v·∫´n nhanh ƒë·ªß ƒë·ªÉ d√πng</em>. N·∫øu nh√¨n nh·∫≠n v·ªÅ m·∫∑c k·ªπ thu·∫≠t, ph·∫£i l√†m r·∫•t nhi·ªÅu thao t√°c x·ª≠ l√Ω tr√™n virtual DOM. K√≠ch th∆∞·ªõc c·ªßa m·ªôt VDom chu·∫©n s·∫Ω li√™n quan t·ªõi k√≠ch th∆∞·ªõc c·ªßa view ch·ª© kh√¥ng ph·∫£i s·ªë l∆∞·ª£ng node s·∫Ω thay ƒë·ªïi.</li>\n<li>H√†m render c∆° b·∫£n r·∫•t linh ƒë·ªông, v√¨ linh ƒë·ªông n√™n n√≥ c≈©ng r·∫•t kh√≥ optimize, linh ƒë·ªông ·ªü ƒë√¢y mu·ªën n√≥i ƒë·∫øn m·ªôt h√†m render nh∆∞ th·∫ø n√†y</li>\n</ul>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> children <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        children<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">'p'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">class</span><span class=\"token operator\">:</span> <span class=\"token string\">'text'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> i <span class=\"token operator\">===</span> <span class=\"token number\">2</span> <span class=\"token operator\">?</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message<span class=\"token operator\">:</span> <span class=\"token string\">\"vuilaptrinh.com\"</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">'content'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> children<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta c√≥ th·ªÉ t·∫°o parent node tr∆∞·ªõc, r·ªìi sau ƒë√≥ nh√©t th√™m c√°c node con, ho·∫∑c b·∫•t c·ª© th·ª© g√¨ b·∫°n c√≥ th·ªÉ nghƒ© ra ƒë∆∞·ª£c, javascript r·∫•t linh ƒë·ªông, c√≥ nhi·ªÅu t√¨nh hu·ªëng ƒë·∫∑c bi·ªát ch√∫ng ta kh√≥ c√≥ th·ªÉ ƒë·∫£m b·∫£o optimize ƒë∆∞·ª£c cho t·∫•t c·∫£.</p>\n<ul>\n<li>Gi·∫£i ph√°p c·ªßa React cho t√¨nh hu·ªëng n√†y kh√¥ng t·∫≠p trung v√†o vi·ªác l√†m cho virtual DOM nhanh h∆°n, m√† l√†m cho ch√∫ng ta <em>c·∫£m gi√°c</em> performance t·ªët h∆°n (gi·ªëng nh∆∞ vi·ªác g·ª≠i tin nh·∫Øn tr√™n facebook lu√¥n c·∫£m gi√°c nh∆∞ g·ª≠i ƒë∆∞·ª£c li·ªÅn ch·ª© kh√¥ng c·∫ßn ƒë·ª£i), vi·ªác ƒë√≥ ƒë∆∞·ª£c th·ª±c hi·ªán b·∫±ng c√°c k·ªπ thu·∫≠t runtime scheduling, concurrent mode, time slicing. Nh·ªØng gi·∫£i ph√°p n√†y bu·ªôc h·ªç ph·∫£i t·ª± t·∫°o v√† qu·∫£n l√Ω m·ªôt <em>stack</em> ri√™ng, m·ªôt c√¥ng vi·ªác r·∫•t t·ªën k√©m</li>\n</ul>\n<p><strong>ƒêi·ªÉm c·ªông c·ªßa Template</strong></p>\n<ul>\n<li>V·ªõi c√°ch ti·∫øp c·∫≠n tr·ª±c ti·∫øp h∆°n cho vi·ªác render, performance ƒë∆∞∆°ng nhi√™n s·∫Ω <em>g·∫ßn</em> h∆°n render performance c·ªßa tr√¨nh duy·ªát, v·ªõi c√°ch vi·∫øt template nh∆∞ th·∫ø n√†y s·∫Ω kh√¥ng th·ªÉ n√†o thay ƒë·ªïi ƒë∆∞·ª£c th·ª© t·ª© c·ªßa nh·ªØng element ƒë√£ khai b√°o</li>\n</ul>\n<div class=\"gridsome-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>content<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Lorem ipsum<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Lorem ipsum<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ message }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Lorem ipsum<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Vi·ªác ƒëo√°n tr∆∞·ªõc ƒë∆∞·ª£c nh·ªØng g√¨ c√≥ th·ªÉ thay ƒë·ªïi, gi√∫p vi·ªác c·∫£i thi·ªán hi·ªáu nƒÉng c≈©ng s·∫Ω d·ªÖ ti·∫øp c·∫≠n h∆°n </p>\n<ul>\n<li>T√πy v√†o t√¨nh hu·ªëng, c√≥ th·ªÉ gi√° tr·ªã baseline runtime s·∫Ω th·∫•p h∆°n</li>\n</ul>\n<p><strong>ƒêi·ªÉm tr·ª´ c·ªßa Template</strong></p>\n<ul>\n<li>D√≠nh ch·∫∑t v√†o c√∫ ph√°p c·ªßa Template, b·∫°n s·∫Ω m·∫•t ƒëi m·ªôt √≠t t·ª± do bay nh·∫£y b·∫±ng javascript th√¥ng th∆∞·ªùng. S·ª± s√°ng t·∫°o c·ªßa ch√∫ng ta b·ªã gi·ªõi h·∫°n trong nh·ªØng th·ª© m√† framework cung c·∫•p. L·ª° ƒë√¢u b·∫°n ƒë√£ l√† m·ªôt master javascript v√† b·∫°n th·∫•y c√°ch l√†m c·ªßa framework n√†y <em>chu·ªëi</em> c·∫£ n·∫£i v√† mu·ªën l√†m kh√°c h∆°n.</li>\n<li>C√°i gi√° ph·∫£i tr·∫£ cho gi√° tr·ªã baseline runtime th·∫•p s·∫Ω l√† k·∫øt qu·∫£ tr·∫£ v·ªÅ c·ªßa m·ªói template s·∫Ω d√†i d√≤ng h∆°n. ƒê√¥i khi ƒë·ªÉ code ch·∫°y nhanh nh·∫•t c√≥ th·ªÉ, ch√∫ng ta ph·∫£i nh√©t c·ª©ng m·ªôt s·ªë th√¥ng tin b√™n trong output</li>\n</ul>\n<h2 id=\"c∆°-ch·∫ø-state\"><a href=\"#c%C6%A1-ch%E1%BA%BF-state\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C∆° ch·∫ø State</h2>\n<blockquote>\n<p>mutable vs immutable, dirty checking vs dependency tracking, reactivity vs simulated reactivity</p>\n</blockquote>\n<p>R·∫•t ti·∫øc, Evan You kh√¥ng c√≥ th·ªùi gian tr√¨nh b√†i ph·∫ßn n√†y trong b√†i thuy·∫øt tr√¨nh c·ªßa m√¨nh.</p>\n<h2 id=\"t·ªïng-k·∫øt\"><a href=\"#t%E1%BB%95ng-k%E1%BA%BFt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·ªïng k·∫øt</h2>\n<p>N·∫øu b·∫°n ƒëang mu·ªën ch·ªçn m·ªôt framework m·ªôt c√°ch h·ª£p l√Ω, b·∫°n ph·∫£i hi·ªÉu ƒë∆∞·ª£c nh·ªØng g√¨ m√† framework ƒë√≥ ƒëang ƒë√°nh ƒë·ªïi, bi·∫øt h∆∞·ªõng ƒëi c·ªßa framework ƒë√≥ c√≥ kh·ªõp v·ªõi nh·ªØng g√¨ b·∫°n ∆∞u ti√™n h√†ng ƒë·∫ßu cho d·ª± √°n m√¨nh l√†m.</p>\n<p>C√°c b·∫°n c√≥ th·ªÉ xem Video b√†i thuy·∫øt tr√¨nh c·ªßa Evan You <a href=\"https://www.youtube.com/watch?v=ANtSWq-zI0s\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">·ªü ƒë√¢y</a></p>\n","cover_image":""}},{"node":{"id":"77a81e0c87ac4c028e3855b09ed9acca","title":"L√†m sao ƒë·ªÉ fetch d·ªØ li·ªáu b·∫±ng React Hook","path":"/2019-11-18-huong-dan-goi-fetch-api-bang-react-hook/","date":"2019-11-18","timeToRead":13,"desc":"Trong b√†i n√†y ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng React.useState, React.useEffect, React.useReducer ƒë·ªÉ fetch d·ªØ li·ªáu t·ª´ API, ƒë·ªìng th·ªùi c≈©ng vi·∫øt m·ªôt custom hook ƒë·ªÉ c√≥ th·ªÉ s·ª≠ d·ª•ng ·ªü b·∫•t k·ª≥ ƒë√¢u","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#g%E1%BB%8Di-hook-th%E1%BB%A7-c%C3%B4ngb%E1%BA%B1ng-code\">G·ªçi hook th·ªß c√¥ng/b·∫±ng code</a></li>\n<li><a href=\"#loading-indicator\">Loading indicator</a></li>\n<li><a href=\"#handle-error\">Handle Error</a></li>\n<li><a href=\"#fetch-data-v%E1%BB%9Bi-form\">Fetch data v·ªõi Form</a></li>\n<li><a href=\"#custom-hook-%C4%91%E1%BB%83-fetch-data\">Custom hook ƒë·ªÉ Fetch data</a></li>\n<li><a href=\"#reducer-hook\">Reducer hook</a></li>\n<li><a href=\"#b%E1%BB%8F-qua-vi%E1%BB%87c-fetch-data\">B·ªè qua vi·ªác fetch data</a></li>\n</ul>\n<!-- /TOC -->\n<p>Ch√∫ng ta c√≥ m·ªôt component, d·ªØ li·ªáu c·ªßa component n√†y s·∫Ω ƒë∆∞·ª£c l·∫•y t·ª´ API</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">,</span> setData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hits</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>hits<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>objectID<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng axios ƒë·ªÉ fetch d·ªØ li·ªáu, b·∫°n th√≠ch x√†i c√°i kh√°c th√¨ c·ª© v√¥ t∆∞</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">,</span> setData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hits</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'https://hn.algolia.com/api/v1/search?query=redux'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>hits<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>objectID<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<p>B√™n trong <code class=\"language-inline-text\">React.useEffect</code> ch√∫ng ta s·∫Ω th·ª±c hi·ªán vi·ªác fetch data t·ª´ API, sau khi nh·∫≠n ƒë∆∞·ª£c d·ªØ li·ªáu g√°n gi√° tr·ªã nh·∫≠n ƒë∆∞·ª£c cho gi√° tr·ªã c·ªßa state <code class=\"language-inline-text\">data</code></p>\n<p>N·∫øu d·ª´ng ·ªü ƒë√¢y, khi ch·∫°y b·∫°n s·∫Ω th·∫•y m·ªôt v√≤ng l·∫∑p v√¥ t·∫≠n c·ªßa vi·ªác g·ªçi fetch data. Effect s·∫Ω ch·∫°y kh√¥ng ch·ªâ ·ªü l√∫c component mount m√† c√≤n ·ªü c√°c l·∫ßn update ti·∫øp theo. B·ªüi v√¨ ch√∫ng ta g√°n gi√° tr·ªã state tr√™n m·ªói l·∫ßn fetch, component l·∫°i ƒë∆∞·ª£c update v√† effect l·∫°i ƒë∆∞·ª£c g·ªçi l·∫°i ƒë·ªÉ ch·∫°y. Ch√∫ng ta ch·ªâ mu·ªën <strong>fetch data khi component mount l·∫ßn ƒë·∫ßu ti√™n</strong>. ƒê√≥ l√† l√Ω do ch√∫ng ta ph·∫£i th√™m m·ªôt m·∫£ng r·ªóng v√†o tham s·ªë th·ª© hai c·ªßa effect, nh∆∞ v·∫≠y c√°c l·∫ßn update ti·∫øp theo n√≥ s·∫Ω kh√¥ng ƒë∆∞·ª£c g·ªçi.</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">,</span> setData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hits</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'https://hn.algolia.com/api/v1/search?query=redux'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gridsome-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>ul<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>hits<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>li key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>objectID<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Tham s·ªë th·ª© 2 truy·ªÅn v√†o cho effect n√†y l√† danh s√°ch nh·ªØng gi√° tr·ªã n√†o m√† hook ph·ª• thu·ªôc, t·ª©c n·∫øu c√°c gi√° tr·ªã n√†y thay ƒë·ªïi th√¨ effect ƒë∆∞·ª£c g·ªçi l·∫°i. B·ªè array tr·ªëng s·∫Ω kh√¥ng c√≤n chuy·ªán ch·∫°y ·ªü l·∫ßn update.</p>\n<p>Trong ƒëo·∫°n code tr√™n v·∫´n c√≤n m·ªôt ch·ªó ph·∫£i ch·ªânh s·ª≠a, ch√∫ng ta s·ª≠ d·ª•ng <code class=\"language-inline-text\">async/await</code>, <em>theo nh∆∞ ƒë·ªãnh nghƒ©a</em>, t·∫•t c·∫£ nh·ªØng h√†m n√†o l√† <code class=\"language-inline-text\">async</code> s·∫Ω ƒë∆∞·ª£c ng·∫ßm hi·ªÉu l√† tr·∫£ v·ªÅ m·ªôt <code class=\"language-inline-text\">Promise</code>. Tuy nhi√™n, c≈©ng <em>theo nh∆∞ ƒë·ªãnh nghƒ©a</em> effect hook kh√¥ng ƒë∆∞·ª£c tr·∫£ v·ªÅ g√¨ c·∫£, ho·∫∑c m·ªôt function ƒë·ªÉ clean up (xem l·∫°i b√†i n√≥i v·ªÅ Hook Effect, c√≥ gi·∫£i th√≠ch 2 lo·∫°i Effect Hook).</p>\n<p>N√™n b·∫°n m√† copy ƒëo·∫°n tr√™n m√† ch·∫°y th√¨ s·∫Ω nh·∫≠n th√¥ng b√°o b√™n d∆∞·ªõi console. Kh√¥ng th·ªÉ s·ª≠ d·ª•ng async function b√™n trong <code class=\"language-inline-text\">React.useEffect</code>, ch√∫ng ta s·ª≠a l·∫°i</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">'https://hn.algolia.com/api/v1/search?query=redux'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ƒê·ªÉ fetch d·ªØ li·ªáu b·∫±ng <code class=\"language-inline-text\">React.useEffect</code> c√≥ th·ªÉ t√≥m g·ªçn nh∆∞ ·ªü tr√™n. Ch√∫ng ta s·∫Ω ti·∫øp t·ª•c xem c√°ch handle error, loading indicator, g·ªçi fetch t·ª´ form v√† l√†m th·∫ø n√†o t√°i s·ª≠ d·ª•ng hook ƒë·ªÉ fetch</p>\n<h2 id=\"g·ªçi-hook-th·ªß-c√¥ngb·∫±ng-code\"><a href=\"#g%E1%BB%8Di-hook-th%E1%BB%A7-c%C3%B4ngb%E1%BA%B1ng-code\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>G·ªçi hook th·ªß c√¥ng/b·∫±ng code</h2>\n<p>Ch√∫ng ta ƒë√£ xong ph·∫ßn fetch d·ªØ li·ªáu m·ªôt l·∫ßn l√∫c component mount. Nh∆∞ng l√†m th·∫ø n√†o ƒë·ªÉ fetch d·ªØ li·ªáu khi c√≥ s·ª± ki·ªán t·ª´ user, v√≠ d·ª• √¥ search, khi user nh·∫≠p l·∫•y danh s√°ch k·∫øt qu·∫£ t√¨m ki·∫øm. V√≠ d·ª• b√™n d∆∞·ªõi m·∫∑c ƒë·ªãnh s·∫Ω hi·ªÉn th·ªã k·∫øt qu·∫£ cho t·ª´ kh√≥a <code class=\"language-inline-text\">redux</code>, n·∫øu user nh·∫≠p v√†o m·ªôt gi√° tr·ªã kh√°c, ch√∫ng ta c·∫ßn l√†m sao ƒë·ªÉ ch·∫°y <code class=\"language-inline-text\">useEffect</code> m·ªôt l·∫ßn n·ªØa</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Fragment<span class=\"token punctuation\">,</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">,</span> setData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hits</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>query<span class=\"token punctuation\">,</span> setQuery<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'redux'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">'https://hn.algolia.com/api/v1/search?query=redux'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n        <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>query<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token function\">setQuery</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>hits<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>objectID<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<p>V·ªõi nhu c·∫ßu nh∆∞ tr√™n, ch√∫ng ta c·∫ßn c·∫≠p nh·∫≠p l·∫°i <code class=\"language-inline-text\">useEffect</code></p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>\n<span class=\"gridsome-highlight-code-line\">      <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://hn.algolia.com/api/v1/search?query=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>query<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span></span>    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Tuy nhi√™n, n·∫øu ch·ªâ nh∆∞ v·∫≠y, h√†m <code class=\"language-inline-text\">fetchData</code> s·∫Ω kh√¥ng ƒë∆∞·ª£c g·ªçi khi user input m·ªôt gi√° tr·ªã m·ªõi v√†o √¥ t√¨m ki·∫øm. V√¨ ch√∫ng ta ƒë√£ truy·ªÅn v√†o m·ªôt m·∫£ng r·ªóng v√†o cho gi√° tr·ªã <code class=\"language-inline-text\">depend</code> c·ªßa effect, n√™n n√≥ ch·ªâ ch·∫°y l·∫ßn ƒë·∫ßu mount</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>\n      <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://hn.algolia.com/api/v1/search?query=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>query<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gridsome-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>query<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code></pre></div>\n<p>C√≥ m·ªôt v·∫•n ƒë·ªÅ kh√°c, user c·ª© nh·∫≠p m·ªôt k√Ω t·ª±, c√¢u <code class=\"language-inline-text\">fetchData</code> l·∫°i ƒë∆∞·ª£c g·ªçi, g·ªçi li√™n t·ª•c nh∆∞ v·∫≠y kh√¥ng hay, th√™m v√†o m·ªôt n√∫t ƒë·ªÉ user click v√†o m·ªõi th·ª±c hi·ªán search th√¨ sao</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">,</span> setData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hits</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>query<span class=\"token punctuation\">,</span> setQuery<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'redux'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>search<span class=\"token punctuation\">,</span> setSearch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>\n        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://hn.algolia.com/api/v1/search?query=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>query<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>query<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n        <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>query<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token function\">setQuery</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setSearch</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Search\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>hits<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>objectID<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Gi·ªù effect ph·∫£i ph·ª• thu·ªôc v√†o <code class=\"language-inline-text\">search</code>, kh√¥ng ch·∫°y khi user nh·∫≠p v√†o input</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">,</span> setData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hits</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>query<span class=\"token punctuation\">,</span> setQuery<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'redux'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gridsome-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>search<span class=\"token punctuation\">,</span> setSearch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'redux'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>\n<span class=\"gridsome-highlight-code-line\">        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://hn.algolia.com/api/v1/search?query=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>search<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span></span>      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gridsome-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>search<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Nh∆∞ng n·∫øu s·ª≠a nh∆∞ v·∫≠y, tr∆∞·ªùng h·ª£p component ƒë∆∞·ª£c mount l·∫ßn ƒë·∫ßu, n√≥ s·∫Ω kh√¥ng c√≥ hi·ªÉn th·ªã k·∫øt qu·∫£ cho t·ª´ kh√≥a <code class=\"language-inline-text\">redux</code> n·ªØa. N·∫øu d√πng th·ªÅm m·ªôt <code class=\"language-inline-text\">useEffect</code> kh√°c cho tr∆∞·ªùng h·ª£p ch·∫°y l√∫c ƒë·∫ßu s·∫Ω g√¢y nh·∫ßm l·∫´n, kh√¥ng r√µ r√†ng, thay v√†o ƒë√≥ n·∫øu ch√∫ng ta xem search state l√† nguy√™n c√°i <code class=\"language-inline-text\">url</code> s·∫Ω ƒë∆°n gi·∫£n h∆°n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">,</span> setData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hits</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>query<span class=\"token punctuation\">,</span> setQuery<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'redux'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">,</span> setUrl<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://hn.algolia.com/api/v1/search?query=redux'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n      <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n        <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>query<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token function\">setQuery</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n        <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n          <span class=\"token function\">setUrl</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://hn.algolia.com/api/v1/search?query=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>query<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Search\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>hits<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>objectID<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"loading-indicator\"><a href=\"#loading-indicator\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Loading indicator</h2>\n<p>M·ªôt nhu c·∫ßu kh√°c c≈©ng hay g·∫∑p l√† trong l√∫c fetch data t·ª´ API, ch√∫ng ta c·∫ßn bi·∫øt tr·∫°ng th√°i loading t·ªõi ƒë√¢u r·ªìi, ch√∫ng ta s·∫Ω b·ªï sung th√™m state <code class=\"language-inline-text\">isLoading</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">,</span> setData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hits</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>query<span class=\"token punctuation\">,</span> setQuery<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'redux'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">,</span> setUrl<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://hn.algolia.com/api/v1/search?query=redux'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isLoading<span class=\"token punctuation\">,</span> setIsLoading<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n      <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n      <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setIsLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n        <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>query<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token function\">setQuery</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n        <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n          <span class=\"token function\">setUrl</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://hn.algolia.com/api/v1/search?query=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>query<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Search\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>isLoading <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Loading ...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>hits<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>objectID<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"handle-error\"><a href=\"#handle-error\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Handle Error</h2>\n<p>C≈©ng t∆∞∆°ng t·ª± nh∆∞ loading, ch√∫ng ta s·∫Ω b·ªï sung th√™m state <code class=\"language-inline-text\">isError</code> ƒë·ªÉ x√°c ƒë·ªãnh vi·ªác fetch d·ªØ li·ªáu c√≥ b·ªã l·ªói kh√¥ng</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">,</span> setData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hits</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>query<span class=\"token punctuation\">,</span> setQuery<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'redux'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">,</span> setUrl<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://hn.algolia.com/api/v1/search?query=redux'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isLoading<span class=\"token punctuation\">,</span> setIsLoading<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isError<span class=\"token punctuation\">,</span> setIsError<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsError</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setIsLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setIsError</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      \n      <span class=\"token function\">setIsLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n        <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>query<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token function\">setQuery</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n        <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n          <span class=\"token function\">setUrl</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://hn.algolia.com/api/v1/search?query=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>query<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Search\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>isError <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Something went wrong ...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>isLoading <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Loading ...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>hits<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>objectID<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"fetch-data-v·ªõi-form\"><a href=\"#fetch-data-v%E1%BB%9Bi-form\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Fetch data v·ªõi Form</h2>\n<p>N√£y gi·ªù ch√∫ng ta ch·ªâ fetch data v·ªõi b·∫±ng input v√† button. Khi c√≥ nhi·ªÅu element h∆°n, ch√∫ng ta s·∫Ω ƒë∆∞a n√≥ v√†o <code class=\"language-inline-text\">form</code> ƒë·ªÉ c√≥ th·ªÉ trigger form submit b·∫±ng c√°ch nh·∫•n Enter</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span>\n        <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span>\n          <span class=\"token function\">setUrl</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://hn.algolia.com/api/v1/search?query=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>query<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n          event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n          <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>query<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token function\">setQuery</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Search</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>isError <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Something went wrong ...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      ...\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"custom-hook-ƒë·ªÉ-fetch-data\"><a href=\"#custom-hook-%C4%91%E1%BB%83-fetch-data\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Custom hook ƒë·ªÉ Fetch data</h2>\n<p>ƒê·ªÉ t√°i s·ª≠ d·ª•ng ƒë∆∞·ª£c c√°c ƒëo·∫°n code li√™n quan ƒë·∫øn vi·ªác fetch data, ch√∫ng ta s·∫Ω ƒë∆∞a n√≥ ra th√†nh m·ªôt custom hook, c√°c gi√° tr·ªã li√™n quan tr·ª±c ti·∫øp ƒë·∫øn vi·ªác fetch data, c·ª• th·ªÉ l√† loading, error ch√∫ng ta c≈©ng ƒë∆∞a v√†o trong custom hook</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"gridsome-highlight-code-line\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useHackerNewsApi</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">,</span> setData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hits</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">,</span> setUrl<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://hn.algolia.com/api/v1/search?query=redux'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isLoading<span class=\"token punctuation\">,</span> setIsLoading<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isError<span class=\"token punctuation\">,</span> setIsError<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsError</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setIsLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setIsError</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">setIsLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gridsome-highlight-code-line\">  </span>  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> isLoading<span class=\"token punctuation\">,</span> isError <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> setUrl<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>S·ª≠ d·ª•ng b√™n trong App Component</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>query<span class=\"token punctuation\">,</span> setQuery<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'redux'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> isLoading<span class=\"token punctuation\">,</span> isError <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> doFetch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useHackerNewsApi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">doFetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://hn.algolia.com/api/v1/search?query=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>query<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n          <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>query<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token function\">setQuery</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Search</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      ...\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Gi√° tr·ªã state l√∫c kh·ªüi t·∫°o c·ªßa th·ªÉ ƒë∆∞a v√†o nh∆∞ m·ªôt tham s·ªë truy·ªÅn v√†o cho custom hook lu√¥n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Fragment<span class=\"token punctuation\">,</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useDataApi</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">initialUrl<span class=\"token punctuation\">,</span> initialData</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">,</span> setData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>initialData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">,</span> setUrl<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>initialUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isLoading<span class=\"token punctuation\">,</span> setIsLoading<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isError<span class=\"token punctuation\">,</span> setIsError<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsError</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setIsLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setIsError</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token function\">setIsLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> isLoading<span class=\"token punctuation\">,</span> isError <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> setUrl<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>query<span class=\"token punctuation\">,</span> setQuery<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'redux'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> isLoading<span class=\"token punctuation\">,</span> isError <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> doFetch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useDataApi</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'https://hn.algolia.com/api/v1/search?query=redux'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hits</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span>\n        <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">doFetch</span><span class=\"token punctuation\">(</span>\n            <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://hn.algolia.com/api/v1/search?query=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>query<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n          <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>query<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token function\">setQuery</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Search</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>isError <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Something went wrong ...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>isLoading <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Loading ...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">.</span>hits<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>objectID<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Fragment</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"reducer-hook\"><a href=\"#reducer-hook\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Reducer hook</h2>\n<p>V·ªõi c√°i custom hook ƒë·ªÉ fetch data nh∆∞ ·ªü tr√™n, ch√∫ng ta th·∫•y c√≥ 2 state <code class=\"language-inline-text\">isLoading</code>, <code class=\"language-inline-text\">isError</code> quan h·ªá kh√° <em>m·∫≠t thi·∫øt</em> v·ªõi nhau, c√≥ th·ªÉ h·ª£p nh·∫•t 2 ƒë·ª©a n√≥ l·∫°i b·∫±ng <code class=\"language-inline-text\">React.useReducer</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  Fragment<span class=\"token punctuation\">,</span>\n  useState<span class=\"token punctuation\">,</span>\n  useEffect<span class=\"token punctuation\">,</span>\n  useReducer<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dataFetchReducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useDataApi</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">initialUrl<span class=\"token punctuation\">,</span> initialData</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">,</span> setUrl<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>initialUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>dataFetchReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">isLoading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">isError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> initialData<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-inline-text\">React.useReducer</code> s·∫Ω nh·∫≠n v√†o m·ªôt h√†m reducer (c√¥ng d·ª•ng t∆∞∆°ng t·ª± nh∆∞ h√†m reducer c·ªßa redux ·∫•y) v√† c√°c gi√° tr·ªã kh·ªüi t·∫°o c·ªßa state, trong tr∆∞·ªùng h·ª£p c·ªßa ch√∫ng ta l√† <code class=\"language-inline-text\">isLoading</code> v√† <code class=\"language-inline-text\">isError</code>. Vi·ªác n√†y ch·∫≥ng qua l√† gom t·∫•t c·∫£ state li√™n quan v√†o m·ªôt object cho n√≥ <em>tinh t·∫ø</em> th√¥i, thay v√¨ t·ª´ng state ri√™ng bi·ªát nh∆∞ s·ª≠ d·ª•ng <code class=\"language-inline-text\">useState</code></p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dataFetchReducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useDataApi</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">initialUrl<span class=\"token punctuation\">,</span> initialData</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">,</span> setUrl<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>initialUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>dataFetchReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">isLoading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">isError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> initialData<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gridsome-highlight-code-line\">      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'FETCH_INIT'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gridsome-highlight-code-line\">        <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'FETCH_SUCCESS'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> result<span class=\"token punctuation\">.</span>data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gridsome-highlight-code-line\">        <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'FETCH_FAILURE'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>M√¨nh ƒë√£ b·∫£o r·ªìi, n√≥ s·∫Ω gi·ªëng nh∆∞ c√°i reducer trong redux th√¥i, ch√∫ng ta <code class=\"language-inline-text\">dispatch</code> m·ªôt object g·ªìm <code class=\"language-inline-text\">type</code> v√† <code class=\"language-inline-text\">payload</code>, cƒÉn c·ª© v√†o payload m√† ch√∫ng ta x·ª≠ l√Ω, c·∫≠p nh·∫≠p state</p>\n<p>Cu·ªëi c√πng ch√∫ng ta c·∫≠p nh·∫≠p l·∫°i gi√° tr·ªã tr·∫£ v·ªÅ c·ªßa custom hook n·ªØa</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useDataApi</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">initialUrl<span class=\"token punctuation\">,</span> initialData</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">,</span> setUrl<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>initialUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>dataFetchReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">isLoading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">isError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> initialData<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token operator\">...</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setUrl<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Cu·ªëi c√πng, kh√¥ng k√©m ph·∫ßn quan tr·ªçng, ph·∫ßn code th·ª±c hi·ªán b√™n trong <code class=\"language-inline-text\">dataFetchReducer</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">dataFetchReducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'FETCH_INIT'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">isLoading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">isError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'FETCH_SUCCESS'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">isLoading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">isError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'FETCH_FAILURE'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">isLoading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">isError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"b·ªè-qua-vi·ªác-fetch-data\"><a href=\"#b%E1%BB%8F-qua-vi%E1%BB%87c-fetch-data\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>B·ªè qua vi·ªác fetch data</h2>\n<p>T√¨nh hu·ªëng l√† khi user chuy·ªÉn qua m·ªôt route kh√°c, khi ƒëang fetch data, vi·ªác g·ªçi fetch ko c·∫ßn thi·∫øt v√† c√≥ th·ªÉ b·ªè qua</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useDataApi</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">initialUrl<span class=\"token punctuation\">,</span> initialData</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">,</span> setUrl<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>initialUrl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>dataFetchReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">isLoading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">isError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> initialData<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> didCancel <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchData</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'FETCH_INIT'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">axios</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>didCancel<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'FETCH_SUCCESS'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> result<span class=\"token punctuation\">.</span>data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>didCancel<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'FETCH_FAILURE'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      didCancel <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    \n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>url<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setUrl<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>V·ªõi vi·ªác return m·ªôt function ·ªü cu·ªëi c·ªßa <code class=\"language-inline-text\">React.useEffect</code>, t√™n g·ªçi c√°c b·∫°n React ƒë·∫∑t l√† clean up function, n·∫±m trong ki·ªÉu effect c·∫ßn clean up - n√≥i th·∫≠t m√¨nh ph√°t m·ªát v·ªõi vi·ªác c√°c b·∫°n trong team React c·ª© th√≠ch <em>ch·∫ø</em> th√™m li√™n t·ª•c nh∆∞ v·∫≠y.</p>\n<blockquote>\n<p>N√≥i theo c√°ch c·ªßa m√¨nh ƒëi, n·∫øu b·∫°n return m·ªôt function ·ªü cu·ªëi c·ªßa <code class=\"language-inline-text\">React.useEffect</code> n√≥ s·∫Ω ch·∫°y khi component b·ªã unmount.</p>\n</blockquote>\n<p>Source code c√≥ th·ªÉ tham kh·∫£o ƒë·∫ßy ƒë·ªß <a href=\"https://github.com/the-road-to-learn-react/use-data-api/blob/master/src/index.js\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">·ªü ƒë√¢y</a></p>\n<p><a href=\"https://www.robinwieruch.de/react-hooks-fetch-data\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.robinwieruch.de/react-hooks-fetch-data</a></p>\n","cover_image":""}},{"node":{"id":"60f676e05ffae4b7f782d83aa26725a8","title":"T·∫°i sao l·∫°i sinh ra React hook","path":"/2019-11-17-giai-thich-tai-sao-ban-can-react-hook/","date":"2019-11-17","timeToRead":10,"desc":"T·∫°i sao v√† l·ª£i √≠ch m√† react hook ƒëem l·∫°i l√† g√¨, m√† thi√™n h·∫° c·ª© r·∫ßn r·∫ßn l√™n v·∫≠y?","content":"<!-- TOC -->\n<ul>\n<li>\n<p><a href=\"#l%e1%bb%8bch-s%e1%bb%ad\">L·ªãch s·ª≠</a></p>\n<ul>\n<li><a href=\"#th%c3%a1ng-5-2013\">Th√°ng 5, 2013</a></li>\n<li><a href=\"#th%c3%a1ng-gi%c3%aang-2015\">Th√°ng gi√™ng, 2015</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#v%e1%ba%a5n-%c4%91%e1%bb%81-t%e1%bb%93n-%c4%91%e1%bb%8dng\">V·∫•n ƒë·ªÅ t·ªìn ƒë·ªçng</a></p>\n<ul>\n<li><a href=\"#logic-tr%c3%b9ng-l%e1%ba%b7p\">Logic tr√πng l·∫∑p</a></li>\n<li><a href=\"#chia-s%e1%ba%bd-logic\">Chia s·∫Ω logic</a></li>\n</ul>\n</li>\n<li><a href=\"#gi%e1%ba%a3i-quy%e1%ba%bft\">Gi·∫£i quy·∫øt</a></li>\n</ul>\n<!-- /TOC -->\n<p>Qua b√†i vi·∫øt n√†y ch√∫ng ta s·∫Ω c√πng tr·∫£ l·ªùi 2 c√¢u h·ªèi b·∫°n c·∫ßn ƒë·∫∑t ra khi ti·∫øp c·∫≠n m·ªôt <strong>ƒë·ªì ch∆°i m·ªõi</strong> nh∆∞ React Hook</p>\n<ol>\n<li>T·∫°i sao n√≥ l·∫°i t·ªìn t·∫°i tr√™n tr√°i ƒë·∫•t n√†y?</li>\n<li>N√≥ t·ªìn t·∫°i tr√™n tr√°i ƒë·∫•t n√†y c√≥ l·ª£i √≠ch g√¨ kh√¥ng?</li>\n</ol>\n<h2 id=\"l·ªãch-s·ª≠\"><a href=\"#l%E1%BB%8Bch-s%E1%BB%AD\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>L·ªãch s·ª≠</h2>\n<h3 id=\"th√°ng-5-2013\"><a href=\"#th%C3%A1ng-5-2013\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Th√°ng 5, 2013</h3>\n<p>N·∫øu b·∫°n c√≤n nh·ªõ v·ªÅ c√°ch vi·∫øt m·ªôt component trong React b·∫±ng <code class=\"language-inline-text\">React.createClass</code>, ch·ª©ng t·ªè b·∫°n ƒë√£ l√† gi√† l√†ng trong React, ng√†y m·ªõi ra ƒë·ªùi khi javascript kh√¥ng h·ªÅ c√≥ khai b√°o <code class=\"language-inline-text\">class</code>, ch√∫ng ta s·∫Ω khai b√°o component nh∆∞ th·∫ø n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> ReposGrid <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">getInitialState</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>      \n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">componentDidUpdate</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>    \n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"th√°ng-gi√™ng-2015\"><a href=\"#th%C3%A1ng-gi%C3%AAng-2015\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Th√°ng gi√™ng, 2015</h3>\n<p>T·ªï ch·ª©c <em>√Åc ma</em> th·∫ø gi·ªõi c√¥ng b·ªë chu·∫©n EcmaScript 2015, c√≤n g·ªçi v·ªõi t√™n th√¢n th∆∞∆°ng ES6. <strong>class</strong> ch√≠nh th·ª©c c√≥ m·∫∑t trong javascript. ƒê·ªôi ng≈© ph√°t tri·ªÉn c·ªßa React l√∫c ƒë√≥ k·∫øt lu·∫≠n, ch√∫ng ta <em>kh√¥ng c·∫ßn ph√°t minh l·∫°i c√°i b√°nh xe</em> (don't reinvent the wheel), c·ª© x√†i theo chu·∫©n ƒë√£ c√≥. Th·∫ø l√† t·ª´ ƒë√≥ ch√∫ng ta khai b√°o component b·∫±ng <code class=\"language-inline-text\">class extends</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ReposGrid</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">repos</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>updateRepos <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateRepos</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">componentDidUpdate</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Khi khai b√°o component b·∫±ng <code class=\"language-inline-text\">class</code>, ch√∫ng ta kh·ªüi t·∫°o gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">state</code> b√™n trong ph∆∞∆°ng th·ª©c <code class=\"language-inline-text\">constructor</code> v√† n√≥ s·∫Ω ƒë∆∞·ª£c nh√©t v√†o trong <code class=\"language-inline-text\">this</code>. Tuy nhi√™n, v·ªõi c√°ch khai b√°o ƒë√£ <em>qu·ªëc t·∫ø h√≥a</em> c·ªßa <code class=\"language-inline-text\">class</code>, n·∫øu ch√∫ng ta <code class=\"language-inline-text\">extends</code> t·ª´ m·ªôt <code class=\"language-inline-text\">class</code>, ch√∫ng ta ph·∫£i g·ªçi <code class=\"language-inline-text\">super()</code> tr∆∞·ªõc khi c√≥ th·ªÉ s·ª≠ d·ª•ng <code class=\"language-inline-text\">this</code>. V√† ri√™ng v·ªõi React, ch√∫ng ta c√≤n ph·∫£i truy·ªÅn th√™m <code class=\"language-inline-text\">props</code> v√†o trong <code class=\"language-inline-text\">super</code>. C√°c b·∫°n l·∫≠p tr√¨nh vi√™n <em>ph√°t b·ªánh</em> v√¨ c√°ch vi·∫øt ch∆∞·ªõng m·∫Øt n√†y.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span> <span class=\"token comment\">// ü§Æ</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ng√†y x∆∞a khi d√πng <code class=\"language-inline-text\">createClass</code> c·ªßa React, b√™n trong h√†m ƒë√≥ n√≥ s·∫Ω l√†m lu√¥n chuy·ªán binding to√†n b·ªô <code class=\"language-inline-text\">this</code> v√†o c√°c ph∆∞∆°ng th·ª©c cho m·ªôt instance c·ªßa component. Tuy nhi√™n khi vi·∫øt <code class=\"language-inline-text\">extends React.Component</code> chuy·ªán ƒë√≥ ko c√≤n t·ª± ƒë·ªông x·∫£y ra <em>nh∆∞ ph√©p m√†u</em> n·ªØa, ch√∫ng ta ph·∫£i ƒëi <code class=\"language-inline-text\">.bind</code> t·ª´ng ph∆∞∆°ng th·ª©c m·ªôt trong <code class=\"language-inline-text\">constructor</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">constructor</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>updateRepos <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateRepos</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// üò≠</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>N·∫øu nh√¨n v√†o c√°c b·∫°n s·∫Ω n√≥i, ·ªì c√°i n√†y ch·∫£ to t√°c g√¨ ƒë√¢u, ch·ªâ l√† ph·∫£i vi·∫øt th√™m m·∫•y d√≤ng ·∫•y m√†. C≈©ng v√¨ l·∫ßm ƒë∆∞·ªùng l·∫°c l·ªëi theo class <em>√Åc ma</em> m√† React b·ªã ko bi·∫øt bao nhi·ªÅu l·ªùi ph√†n n√†n t·ª´ nh·ªØng l·∫≠p tr√¨nh vi√™n kh·∫Øp m·ªçi n∆°i.</p>\n<p>H√™n sao, kh√¥ng l√¢u sau ƒë√≥ Class Field ƒë∆∞·ª£c th√™m v√†o trong <code class=\"language-inline-text\">class</code>, ch√∫ng ta c√≥ th·ªÉ khai b√°o m·ªôt bi·∫øn b√™n trong <code class=\"language-inline-text\">class</code> m√† kh√¥ng c·∫ßn d√πng <code class=\"language-inline-text\">constructor</code>, thay v√¨ <code class=\"language-inline-text\">.bind</code> ch√∫ng ta d√πng arrow function</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ReposGrid</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>  \n  <span class=\"token function-variable function\">updateRepos</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"v·∫•n-ƒë·ªÅ-t·ªìn-ƒë·ªçng\"><a href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81-t%E1%BB%93n-%C4%91%E1%BB%8Dng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V·∫•n ƒë·ªÅ t·ªìn ƒë·ªçng</h2>\n<p>V·∫•n ƒë·ªÅ ƒë√£ ƒë∆∞·ª£c gi·∫£i quy·∫øt t∆∞∆°ng ƒë·ªëi ·ªïn th·ªèa? Tuy nhi√™n v·∫´n c√≤n v·∫•n ƒë·ªÅ kh√°c React team c·∫£m th·∫•y ch∆∞a h√†i l√≤ng l·∫Øm phi√™n b·∫£n hi·ªán t·∫°i.</p>\n<p>√ù t∆∞·ªüng ch√≠nh c·ªßa React l√† ƒë·ªÉ ch√∫ng ta c√≥ th·ªÉ qu·∫£n l√Ω nh·ªØng ·ª©ng d·ª•ng ph·ª©c t·∫°p b·∫±ng c√°ch chia ra th√†nh t·ª´ng component nh·ªè r·ªìi <em>k·∫øt h·ª£p</em> (compose) l·∫°i v·ªõi nhau. ƒê√¢y l√† c√°ch l√†m t·∫°o ra <em>th∆∞∆°ng hi·ªáu</em> s√°ng ng·ªùi c·ªßa React. C√°ch ti·∫øp c·∫≠n theo ki·ªÉu component ch·∫£ c√≥ v·∫•n ƒë·ªÅ g√¨, c√°ch <strong>hi·ªán th·ª±c</strong> nh·ªØng component hi·ªán t·∫°i ƒëang c√≥ v·∫•n ƒë·ªÅ.</p>\n<h3 id=\"logic-tr√πng-l·∫∑p\"><a href=\"#logic-tr%C3%B9ng-l%E1%BA%B7p\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Logic tr√πng l·∫∑p</h3>\n<p>Tr∆∞·ªõc ƒë√¢y ch√∫ng ta thi·∫øt k·∫ø component d·ª±a r·∫•t nhi·ªÅu v√†o component lifecycle. Ch√∫ng ta ƒë·∫∑t ƒë·ªÉ logic v√†o trong c√°c t·ª´ng lifecycle n√†y, th√≠ d·ª• nh∆∞ ch√∫ng ta c·∫ßn ph·∫£i g·ªçi c√πng m·ªôt h√†m b√™n trong c·∫£ 2 ph∆∞∆°ng th·ª©c lifecycle <code class=\"language-inline-text\">componentDidMount</code>, <code class=\"language-inline-text\">componentDidUpdate</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateRepos</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">componentDidUpdate</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevProps<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateRepos</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function-variable function\">updateRepos</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">fetchRepos</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">repos</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      repos<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ side effect (h√†m <code class=\"language-inline-text\">fetchRepos</code> l√†m c√°i qu·∫ßn g√¨ ·ªü ngo√†i ƒë∆∞·ªùng ai m√† bi·∫øt, r√µ r√†ng n√≥ kh√¥ng thu·ªôc ph·∫°m vi qu·∫£n l√Ω c·ªßa component). Ch√∫ng ta <strong>c·∫ßn m·ªôt c√°ch ti·∫øp c·∫≠n kh√°c kh√¥ng th·ªÉ s·ª≠ d·ª•ng lifecycle n·ªØa</strong></p>\n<h3 id=\"chia-s·∫Ω-logic\"><a href=\"#chia-s%E1%BA%BD-logic\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Chia s·∫Ω logic</h3>\n<p>Khi nghƒ© v·ªÅ s·ª± k·∫øt h·ª£p gi·ªØa c√°c component trong React, ch√∫ng ta s·∫Ω nghƒ© v·ªÅ c√°ch c√°c ƒë·ªëi t∆∞·ª£ng UI k·∫øt h·ª£p v·ªõi nhau.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">view <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Trong th·ª±c t·∫ø, vi·∫øt m·ªôt ·ª©ng d·ª•ng kh√¥ng ph·∫£i ch·ªâ bao g·ªìm t·∫ßng UI, r·∫•t nhi·ªÅu tr∆∞·ªùng h·ª£p ch√∫ng ta c·∫ßn <strong>t√°i s·ª≠ d·ª•ng logic, k·∫øt h·ª£p c√°c logic l·∫°i v·ªõi nhau</strong>. Tr∆∞·ªõc ƒë√¢y React ch∆∞a h·ªÅ c√≥ c√°ch n√†o ƒë√°p ·ª©ng ƒë∆∞·ª£c nhu c·∫ßu n√†y.</p>\n<p>V√≠ d·ª• n·∫øu c√≥ m·ªôt component kh√°c, n√≥ c≈©ng c·∫ßn x√†i bi·∫øn state <code class=\"language-inline-text\">repos</code> v√† t·∫•t c·∫£ nh·ªØng logic li√™n quan, m√† nh·ªØng c√°i ƒë√≥ n√≥ ƒëang n·∫±m b√™n trong component <code class=\"language-inline-text\">ReposGrid</code>. L√†m sao ch√∫ng ta l·∫•y ra x√†i l·∫°i? C√°ch b√¨nh th∆∞·ªùng l√† ch√∫ng ta copy-paste to√†n b·ªô code b√™n trong qua m·ªôt component m·ªõi. C≈©ng nhi·ªÅu ng∆∞·ªùi l√†m v·∫≠y, ai c√≥ kinh nghi·ªám h∆°n th√¨ d√πng Higher-Order Component</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">withRepos</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">Component</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WithRepos</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">repos</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">componentDidMount</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateRepos</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">componentDidUpdate</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevProps<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateRepos</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function-variable function\">updateRepos</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token function\">fetchRepos</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">repos</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          repos<span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span>\n          <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">}</span></span>\n          <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>R·ªìi gi·ªù c√≥ b·∫•t k·ª≥ component n√†o mu·ªën d√πng <code class=\"language-inline-text\">repos</code> th√¨ c·ª© m·∫π-b·ªìng-con th·∫ø n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ReposGrid.js</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">ReposGrid</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> loading<span class=\"token punctuation\">,</span> repos <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">withRepos</span><span class=\"token punctuation\">(</span>ReposGrid<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Profile.js</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Profile</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> loading<span class=\"token punctuation\">,</span> repos <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">withRepos</span><span class=\"token punctuation\">(</span>Profile<span class=\"token punctuation\">)</span></code></pre></div>\n<p><em>H·ªìi x∆∞a</em> ch√∫ng ta hay l√†m v·∫≠y, ho·∫∑c l√† d√πng Render Props ƒë·ªÉ chia s·∫ª nh·ªØng logic d√πng t·ªõi d√πng lui. Tuy nhi√™n, ƒë√¢y l√† c√°ch ti·∫øp c·∫≠n kh√¥ng d√†nh cho d√¢n nghi·ªáp d∆∞, v√¨ kh√¥ng ph·∫£i d·ªÖ m√† hi·ªÉu ƒë∆∞·ª£c c√°ch t·ª•i HOC n√≥ ch·∫°y, th·ª© 2 n·∫øu b·∫°n cho ch·ª•c m·∫π b·ªìng m·ªôt ƒë·ª©a con th√¨ s·∫Ω sinh ra chuy·ªán <code class=\"language-inline-text\">wrapper hell</code> gi·ªëng nh∆∞ callback hell</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">withHover</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">withTheme</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">withAuth</span><span class=\"token punctuation\">(</span>\n      <span class=\"token function\">withRepos</span><span class=\"token punctuation\">(</span>Profile<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>V·∫≠n ƒë·ªông n√£o ƒë·ªÉ hi·ªÉu ƒëo·∫°n n√†y ch·∫°y k·∫øt qu·∫£ th·ªÉ n√†o</p>\n<div class=\"gridsome-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>WithHover</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>WithTheme</span> <span class=\"token attr-name\">hovering</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{false}</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>WithAuth</span> <span class=\"token attr-name\">hovering</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{false}</span> <span class=\"token attr-name\">theme</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>dark<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>WithRepos</span> <span class=\"token attr-name\">hovering</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{false}</span> <span class=\"token attr-name\">theme</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>dark<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">authed</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{true}</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Profile</span> \n          <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>JavaScript<span class=\"token punctuation\">'</span></span>\n          <span class=\"token attr-name\">loading</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{true}</span> \n          <span class=\"token attr-name\">repos</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{[]}</span>\n          <span class=\"token attr-name\">authed</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{true}</span>\n          <span class=\"token attr-name\">theme</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>dark<span class=\"token punctuation\">'</span></span>\n          <span class=\"token attr-name\">hovering</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{false}</span>\n        <span class=\"token punctuation\">/></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>WithRepos</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>WithAuth</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>WithTheme</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>WithHover</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>T√≥m l·∫°i nh·ªØng v·∫•n ƒë·ªÅ tr∆∞·ªõc m·∫∑t c·∫ßn gi·∫£i quy·∫øt l√† g√¨</p>\n<ul>\n<li>g·ªçi <code class=\"language-inline-text\">super(props)</code> l√† qu√° x√†m x√≠ ƒë√∫</li>\n<li><code class=\"language-inline-text\">this</code> l√† th·ª© m∆° h·ªì m√† kh√¥ng d·ªÖ bi·∫øt c√°ch n√≥ ho·∫°t ƒë·ªông, b·∫°n c√≥ th·ªÉ l√† chuy√™n gia v√† bi·∫øt ƒë·∫•y, nh∆∞ng ch√∫ng ta tu√¢n th·ªß nguy√™n t·∫Øc khi code <strong>KISS</strong>, ngu ng·ªëc nh·∫•t c√≥ th·ªÉ, ƒë·ª´ng t·ªè ra th√¥ng minh</li>\n<li>T·ªï ch·ª©c logic theo c√°c ph∆∞∆°ng th·ª©c lifecycle kh√¥ng c√≤n h·ª£p l√Ω h·ª£p t√¨nh</li>\n<li>React ch∆∞a c√≥ c√¢u tr·∫£ l·ªùi ch√≠nh th·ª©c n√†o cho vi·ªác chia s·∫ª logic (HOC l√† t·ª´ pattern c·ªßa javascript, kh√¥ng ph·∫£i ƒë·∫∑c s·∫£n nh√† React, n√™n kh√¥ng t√≠nh)</li>\n</ul>\n<h2 id=\"gi·∫£i-quy·∫øt\"><a href=\"#gi%E1%BA%A3i-quy%E1%BA%BFt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Gi·∫£i quy·∫øt</h2>\n<p>T·ª´ React 0.14 ch√∫ng ta c√≥ 2 c√°ch t·∫°o component, d√πng class ho·∫∑c d√πng function. N·∫øu c·∫ßn state v√† c√°c lifecycle th√¨ d√πng class, n·∫øu ch·ªâ nh·∫≠n props r·ªìi tr·∫£ v·ªÅ UI th√¨ d√πng function. ƒê√≥ l√† c√°ch ch√∫ng ta ƒë∆∞·ª£c d·∫°y.</p>\n<p>B√°c CTO John Carmack n√≥i, em xin l·ªói s·ª≠a c√¢u vƒÉn c·ªßa b√°c ch√∫t</p>\n<blockquote>\n<p>T·ª•i b√¢y d·∫πp ph∆∞∆°ng th·ª©c, class, framework h·∫øt d√πm tao c√°i, D√πng h·∫øt function ƒëi</p>\n</blockquote>\n<p>React team, ch√¢n l√Ω ƒë√¢y r·ªìi, ch√∫ng ta t√¨m c√°ch bi·∫øn function component ƒë√°p ·ª©ng ƒë∆∞·ª£c nh·ªØng g√¨ class component l√†m ƒë∆∞·ª£c ƒëi.</p>\n<p>V·ªõi function component, ch√∫ng ta ch·∫£ c·∫ßn quan t√¢m t·ªõi <code class=\"language-inline-text\">super(props)</code>, <code class=\"language-inline-text\">this</code> ch·∫°y th·∫ø n√†o. Ch√∫ng ta s·∫Ω b·ªï sung state, gi·∫£i quy·∫øt lifecycle, chia s·∫ª logic n·ªØa l√† xong.</p>\n<p>V√† th·∫ø l√† c√°c hook c·ªßa React ra ƒë·ªùi: <code class=\"language-inline-text\">useState</code>, <code class=\"language-inline-text\">useEffect</code>, custom hook</p>\n<p>ƒê·ªÉ s·ª≠ d·ª•ng state, ch√∫ng ta d√πng hook l√† <code class=\"language-inline-text\">React.useState</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">ReposGrid</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span> repos<span class=\"token punctuation\">,</span> setRepos <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span> loading<span class=\"token punctuation\">,</span> setLoading <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Lifecycle th√¨ c√≥ th·ªÉ b·∫°n s·∫Ω bu·ªìn (ho·∫∑c vui) khi nghe tin n√†y. N·∫øu b·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng React hook, function component, d·∫πp h·∫øt nh·ªØng g√¨ b·∫°n ƒë√£ t·ª´ng bi·∫øt v·ªÅ lifecycle c·ªßa component ƒëi, qu√™n ƒëi nh·ªØng vi·ªác c·∫ßn l√†m ·ªü giai ƒëo·∫°n n√†y, giai ƒëo·∫°n kia c·ªßa component. B·∫°n hay ti·∫øp c·∫≠n <em>c√°ch t∆∞ duy kh√°c</em> ho√†n to√†n <strong>ƒê·ªìng b·ªô h√≥a</strong></p>\n<p>Th·ª≠ nghƒ© nh·ªØng g√¨ b·∫°n l√†m ·ªü m·ªôt s·ª± ki·ªán c·ªßa lifecycle, c√≥ th·ªÉ l√† ƒë·ªïi state, fetch d·ªØ li·ªáu, c·∫≠p nh·∫≠p DOM, t·∫•t c·∫£ ƒë·ªÅu gom v·ªÅ m·ªôt m·ª•c ƒë√≠ch duy nh·∫•t <strong>ƒê·ªìng b·ªô h√≥a</strong>. Nh·ªØng g√¨ ch√∫ng ta c·∫ßn ƒë·ªìng b·ªô th∆∞·ªùng l√† nh·ªØng th·ª© n·∫±m ngo√†i React (g·ªçi API, DOM, ƒë·∫°i lo·∫°i nh∆∞ th·∫ø) v·ªõi nh·ªØng th·ª© b√™n trong React (state) ho·∫∑c ng∆∞·ª£c l·∫°i</p>\n<p>Khi ti·∫øp c·∫≠n theo h∆∞·ªõng ƒë·ªìng b·ªô h√≥a thay v√¨ lifecycle event, n√≥ cho ph√©p ch√∫ng ta gom c√°c logic li√™n quan l·∫°i v·ªõi nhau. ƒê·ªÉ l√†m vi·ªác ƒë√≥ React cho ch√∫ng ta m·ªôt Hook g·ªçi l√† <code class=\"language-inline-text\">React.useEffect</code></p>\n<p>Theo ƒë·ªãnh nghƒ©a, <code class=\"language-inline-text\">useEffect</code> cho ph√©p ch√∫ng ta th·ª±c hi·ªán side effect b√™n trong function component. H√†m n√†y s·∫Ω d√πng ƒë·ªÉ <strong>re-sync</strong> (th·ª±c hi·ªán ƒë·ªìng b·ªô h√≥a c√°c gi√° tr·ªã)</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">React<span class=\"token punctuation\">.</span><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>username<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>username<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ƒêo·∫°n code tr√™n s·∫Ω ch·∫°y l·∫°i b·∫•t c·ª© khi n√†o gi√° tr·ªã state <code class=\"language-inline-text\">username</code> c√≥ thay ƒë·ªïi</p>\n<p>ƒê·ªÉ g·ªçi l·∫°i <code class=\"language-inline-text\">fetchRepos</code> khi c√≥ thay ƒë·ªïi t·ª´ state <code class=\"language-inline-text\">repos</code> ·ªü v√≠ d·ª• tr√™n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">ReposGrid</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span> repos<span class=\"token punctuation\">,</span> setRepos <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span> loading<span class=\"token punctuation\">,</span> setLoading <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\n  React<span class=\"token punctuation\">.</span><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token function\">fetchRepos</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">repos</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setRepos</span><span class=\"token punctuation\">(</span>repos<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>loading <span class=\"token operator\">===</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Loading</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Nh∆∞ v·∫≠y, ch√∫ng ta ƒë√£ c√≥ th·ªÉ n√≥i l·ªùi chia tay m√£i m√£i v·ªõi <code class=\"language-inline-text\">React.Component</code>, <code class=\"language-inline-text\">constructor</code>, <code class=\"language-inline-text\">super</code>, <code class=\"language-inline-text\">this</code>, lifecycle</p>\n<p>C√≤n l·∫°i v·ªõi cu·ªôc chi·∫øn ch·ªëng Higher-Order Component v√† Render Props. ƒê·ªÉ d√πng l·∫°i logic, ch√∫ng ta s·∫Ω v·∫´n d√πng Hook, nh∆∞ng kh√¥ng ph·∫£i do React l√†m s·∫µn cho <em>x∆°i</em>, ch√∫ng ta ph·∫£i t·ª± vi·∫øt nh·ªØng custom Hook</p>\n<p>Gi·ªù ch√∫ng ta s·∫Ω vi·∫øt m·ªôt custom hook <code class=\"language-inline-text\">useRepos</code>, n√≥ s·∫Ω nh·∫≠n m·ªôt <code class=\"language-inline-text\">id</code> l·∫•y d·ªØ li·ªáu t∆∞∆°ng ·ª©ng.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">useRepos</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span> repos<span class=\"token punctuation\">,</span> setRepos <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span> loading<span class=\"token punctuation\">,</span> setLoading <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\n  React<span class=\"token punctuation\">.</span><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token function\">fetchRepos</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">repos</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setRepos</span><span class=\"token punctuation\">(</span>repos<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span> loading<span class=\"token punctuation\">,</span> repos <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒêi·ªÅu ngon l√†nh ·ªü ƒë√¢y l√† t·∫•t c·∫£ nh·ªØng g√¨ li√™n quan ƒë·∫øn <code class=\"language-inline-text\">repos</code> ƒëi·ªÅu g√≥i g·ªçn trong hook, ·ªü ƒë√¢y m√¨nh mu·ªën n√≥i ƒë·∫øn <code class=\"language-inline-text\">loading</code>, <code class=\"language-inline-text\">repos</code></p>\n<p>S·ª≠ d·ª•ng custom hook n√†y tr√™n c√°c component kh√°c nhau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">ReposGrid</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span> loading<span class=\"token punctuation\">,</span> repos <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useRepos</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Profile</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> user <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span> loading<span class=\"token punctuation\">,</span> repos <span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useRepos</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span>\n\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Th·∫≠t kh√¥ng th·ªÉ tin ƒë∆∞·ª£c b·∫°n c√≥ th·ªÉ khai b√°o v√† setState b√™n trong m·ªôt function b√¨nh th∆∞·ªùng. Ch√∫ng ta ƒë√£ c√≥ m·ªôt React m·∫°nh m·∫Ω v·ªõi c√°c ƒë·∫∑c t√≠nh sau</p>\n<ul>\n<li>ƒê∆°n gi·∫£n h√≥a</li>\n<li>ƒê√≥ng g√≥i</li>\n<li>Linh ƒë·ªông</li>\n<li>M·ªü r·ªông</li>\n</ul>\n<p>Kh√¥ng nh·ªØng gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ ƒëang c√≥, nh∆∞ c√°ch m√† c√°c b·∫°n l√†m marketing cho React tuy√™n truy·ªÅn: s·ª≠ d·ª•ng Hook ƒë·ªÉ c√≥ <code class=\"language-inline-text\">state</code> b√™n trong function component. Th·∫≠t ra n√≥ c√≤n mang t·ªõi nh·ªØng gi√° tr·ªã to l·ªõn kh√°c l√† tƒÉng kh·∫£ nƒÉng t√°i s·ª≠ d·ª•ng v√† k·∫øt h·ª£p logic.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.youtube.com/watch?v=eX_L39UvZes\">üìú Why React Hooks?</a></p>\n","cover_image":""}},{"node":{"id":"fc1ff3b7528e0a068b87722fc19b5e40","title":"G·∫Øn video l√†m background to√†n m√†n h√¨nh","path":"/2019-11-12-lam-video-fullscreen-voi-react/","date":"2019-11-12","timeToRead":2,"desc":"Chia s·∫Ω k·ªπ thu·∫≠t l√†m background video ƒë·ªÉ ch·∫°y full m√†n h√¨nh","content":"<p>K·∫øt qu·∫£ c√°c b·∫°n c√≥ th·ªÉ xem tr√™n trang m√¨nh m·ªõi l√†m\n<a href=\"http://chat-production.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://chat-production.com/</a></p>\n<p>ƒê·ªÉ c√≥ m·ªôt c√°i video ch·∫°y to√†n m√†n h√¨nh, ch√∫ng ta s·∫Ω nghƒ© ngay ƒë·∫øn vi·ªác d√πng th·∫ª <code class=\"language-inline-text\">&lt;video /></code> c·ªßa HTML5, ƒë·∫∑t n√≥ trong m·ªôt c√°i <code class=\"language-inline-text\">&lt;div/></code> c√≥ k√≠ch th∆∞·ªõc <code class=\"language-inline-text\">width: 100%</code>, bu·ªìn thay n√≥ kh√¥ng ƒë√∫ng nh∆∞ ch√∫ng ta mong ƒë·ª£i.</p>\n<div class=\"gridsome-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- HTML --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>videoContainer<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span> <span class=\"token attr-name\">loop</span> <span class=\"token attr-name\">autoplay</span> <span class=\"token attr-name\">muted</span> <span class=\"token attr-name\">playsinline</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/show-reel.mp4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video/mp4<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<blockquote>\n<p>Th√™m <code class=\"language-inline-text\">playsinline</code> ƒë·ªÉ c√≥ th·ªÉ ch·∫°y tr√™n IOS nh∆∞ iPhone</p>\n</blockquote>\n<div class=\"gridsome-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">#container</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 60vw<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n \n<span class=\"token selector\">video</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>   \n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span> <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span> <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span> <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Th·ª© nh·∫•t l√† n√≥ s·∫Ω kh√¥ng t·ª± scale ra 100% c·ªßa m√†n h√¨nh, th·ª© 2 khi ch√∫ng ta k√©o to thu nh·ªè c·ª≠a s·ªï tr√¨nh duy·ªát, t·ª∑ l·ªá khung h√¨nh (ngang v√† ƒë·ª©ng) c≈©ng s·∫Ω kh√¥ng ƒë·∫°t ƒë√∫ng t·ªâ l·ªá th·∫≠t c·ªßa video.</p>\n<p>ƒê·ªÉ video c√≥ th·ªÉ thay ƒë·ªïi k√≠ch th∆∞·ªõc theo t·ª´ng gi√° tr·ªã m√†n h√¨nh kh√°c nhau, ch√∫ng ta ph·∫£i d√πng ƒë·∫øn javascript v√† css</p>\n<div class=\"gridsome-highlight\" data-language=\"scss\"><pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token selector\">#videoContainer </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100vh<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n  <span class=\"token atrule\"><span class=\"token rule\">@media</span> <span class=\"token punctuation\">(</span><span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> 780px<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 60vw<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">video </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100vw<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">/* canh video ngay gi·ªØa */</span>\n    <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span> <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 50%<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span>-50%<span class=\"token punctuation\">,</span> -50%<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Source n√†y ƒë∆∞·ª£c l·∫•y t·ª´ <a href=\"https://codetheory.in/html5-fullscreen-background-video/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://codetheory.in/html5-fullscreen-background-video/</a>, m√¨nh s·ª≠ d·ª•ng chung v·ªõi React</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// JS</span>\n  <span class=\"token keyword\">var</span> video <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"video\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#videoContainer\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">setVideoDimensions</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> w <span class=\"token operator\">=</span> video<span class=\"token punctuation\">.</span>videoWidth<span class=\"token punctuation\">,</span>\n      h <span class=\"token operator\">=</span> video<span class=\"token punctuation\">.</span>videoHeight<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Intrinsic Ratio</span>\n    <span class=\"token comment\">// Will be more than 1 if W > H and less if W &lt; H</span>\n    <span class=\"token keyword\">var</span> videoRatio <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>w <span class=\"token operator\">/</span> h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Get the container's computed styles</span>\n    <span class=\"token comment\">//</span>\n    <span class=\"token comment\">// Also calculate the min dimensions required (this will be</span>\n    <span class=\"token comment\">// the container dimensions)</span>\n    <span class=\"token keyword\">var</span> containerStyles <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">getComputedStyle</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      minW <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>containerStyles<span class=\"token punctuation\">.</span><span class=\"token function\">getPropertyValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"width\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      minH <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>containerStyles<span class=\"token punctuation\">.</span><span class=\"token function\">getPropertyValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"height\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// What's the min:intrinsic dimensions</span>\n    <span class=\"token comment\">//</span>\n    <span class=\"token comment\">// The idea is to get which of the container dimension</span>\n    <span class=\"token comment\">// has a higher value when compared with the equivalents</span>\n    <span class=\"token comment\">// of the video. Imagine a 1200x700 container and</span>\n    <span class=\"token comment\">// 1000x500 video. Then in order to find the right balance</span>\n    <span class=\"token comment\">// and do minimum scaling, we have to find the dimension</span>\n    <span class=\"token comment\">// with higher ratio.</span>\n    <span class=\"token comment\">//</span>\n    <span class=\"token comment\">// Ex: 1200/1000 = 1.2 and 700/500 = 1.4 - So it is best to</span>\n    <span class=\"token comment\">// scale 500 to 700 and then calculate what should be the</span>\n    <span class=\"token comment\">// right width. If we scale 1000 to 1200 then the height</span>\n    <span class=\"token comment\">// will become 600 proportionately.</span>\n    <span class=\"token keyword\">var</span> widthRatio <span class=\"token operator\">=</span> minW <span class=\"token operator\">/</span> w<span class=\"token punctuation\">,</span>\n      heightRatio <span class=\"token operator\">=</span> minH <span class=\"token operator\">/</span> h<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Whichever ratio is more, the scaling</span>\n    <span class=\"token comment\">// has to be done over that dimension</span>\n    <span class=\"token keyword\">let</span> newWidth <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> newHeight <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>widthRatio <span class=\"token operator\">></span> heightRatio<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      newWidth <span class=\"token operator\">=</span> minW<span class=\"token punctuation\">;</span>\n      newHeight <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>newWidth <span class=\"token operator\">/</span> videoRatio<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      newHeight <span class=\"token operator\">=</span> minH<span class=\"token punctuation\">;</span>\n      newWidth <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>newHeight <span class=\"token operator\">*</span> videoRatio<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    video<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>width <span class=\"token operator\">=</span> newWidth <span class=\"token operator\">+</span> <span class=\"token string\">\"px\"</span><span class=\"token punctuation\">;</span>\n    video<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> newHeight <span class=\"token operator\">+</span> <span class=\"token string\">\"px\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  video<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"loadedmetadata\"</span><span class=\"token punctuation\">,</span> setVideoDimensions<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"resize\"</span><span class=\"token punctuation\">,</span> setVideoDimensions<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒêo·∫°n js tr√™n ƒë·ªÉ ƒë·∫£m b·∫£o k√≠ch th∆∞·ªõc c·ªßa video ƒë∆∞·ª£c scale ra h·∫øt khung h√¨nh v√† thay ƒë·ªïi cho ph√π h·ª£p khi tr√¨nh duy·ªát thay ƒë·ªïi k√≠ch th∆∞·ªõc</p>\n<blockquote>\n<p>D√πng 2 listener <code class=\"language-inline-text\">loadedmetadata</code> tr√™n video v√† <code class=\"language-inline-text\">resize</code> tr√™n window ƒë·ªÉ ch·ªânh l·∫°i k√≠ch th∆∞·ªõc th·∫ª video</p>\n</blockquote>\n","cover_image":""}},{"node":{"id":"64a39baff3128120749dac420db892d8","title":"T·∫°i sao l·∫°i vi·∫øt Super(props)","path":"/2019-11-10-tai-sao-lai-viet-super-props/","date":"2019-11-10","timeToRead":6,"desc":"B√†i c≈©, d·ªãch c≈©ng l√¢u r·ªìi, gi·ªù m·ªõi ƒëƒÉng l√™n trang c√° nh√¢n c·ªßa m√¨nh","content":"<p>Nghe n√≥i <a href=\"https://reactjs.org/docs/hooks-intro.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Hook</a> ƒëang l√† trend. Tr·ªõ tr√™u thay, t√¥i mu·ªën vi·∫øt b√†i ƒë·∫ßu ti√™n cho blog n√†y ƒë·ªÉ n√≥i v·ªÅ ƒëi·ªÅu th√∫ v·ªã c·ªßa <em>class</em> component.</p>\n<p><strong>V·∫•n ƒë·ªÅ n√†y <em>kh√¥ng</em> li√™n quan t·ªõi vi·ªác s·ª≠ d·ª•ng React m·ªôt c√°ch hi·ªáu qu·∫£. Nh∆∞ng b·∫°n s·∫Ω c·∫£m th·∫•y ch√∫ng th√∫ v·ªã n·∫øu nh∆∞ b·∫°n mu·ªën t√¨m hi·ªÉu s√¢u h∆°n v·ªÅ c√°ch ho·∫°t ƒë·ªông.</strong></p>\n<p>ƒê√¢y l√† b√†i ƒë·∫ßu ti√™n.</p>\n<hr>\n<p>Ch√∫ng ta ƒë√£ vi·∫øt <code class=\"language-inline-text\">super(props)</code> kh√¥ng bi·∫øt bao nhi√™u l·∫ßn trong ƒë·ªùi:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Checkbox</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">isOn</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Dƒ© nhi√™n, n·∫øu √°p d·ª•ng <a href=\"https://github.com/tc39/proposal-class-fields\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">class field proposal</a> th√¨ c√≥ th·ªÉ b·ªè qua <em>nghi th·ª©c</em> n√†y:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Checkbox</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">isOn</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√∫ ph√°p n√†y <a href=\"https://reactjs.org/blog/2015/01/27/react-v0.13.0-beta-1.html#es7-property-initializers\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ƒë√£  ƒë∆∞·ª£c ho·∫°ch ƒë·ªãnh</a> khi React 0.13 ƒë√£ h·ªó tr·ª£ cho plain class nƒÉm 2015. KHai b√°o <code class=\"language-inline-text\">constructor</code> v√† g·ªçi <code class=\"language-inline-text\">super(props)</code> lu√¥n l√† k·∫ø ho·∫°ch t·∫°m th·ªùi cho ƒë·∫øn khi c√≥ m·ªôt c√°ch kh√°c t·ªët h∆°n.</p>\n<p>Quay v·ªÅ v√≠ d·ª•,  ch·ªâ s·ª≠ d·ª•ng c√°c t√≠nh nƒÉng c·ªßa ES2015:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Checkbox</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">isOn</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>T·∫°i sao ch√∫ng ta l·∫°i g·ªçi <code class=\"language-inline-text\">super</code>? Ch√∫ng ta c√≥ th·ªÉ <em>kh√¥ng</em> g·ªçi ch√∫ng ƒë∆∞·ª£c kh√¥ng? N·∫øu ch√∫ng ta g·ªçi ch√∫ng, th√¨ chuy·ªán g√¨ s·∫Ω x·∫£y ra n·∫øu ch√∫ng ta kh√¥ng truy·ªÅn <code class=\"language-inline-text\">props</code>? Truy·ªÅn th√™m c√°c tham s·ªë kh√°c ƒë∆∞·ª£c kh√¥ng?</strong> C√πng t√¨m hi·ªÉu n√†o.</p>\n<hr>\n<p>Trong JavaScript, <code class=\"language-inline-text\">super</code> ƒë·ªÉ g·ªçi l·∫°i constructor c·ªßa class cha. (Trong v√≠ d·ª• c·ªßa ch√∫ng ta, n√≥ tr·ªè v·ªÅ <code class=\"language-inline-text\">React.Component</code>.)</p>\n<p>ƒêi·ªÅu quan tr·ªçng, b·∫°n <strong>kh√¥ng th·ªÉ s·ª≠ d·ª•ng <code class=\"language-inline-text\">this</code></strong> trong constructor n·∫øu ch∆∞a g·ªçi ƒë·∫øn constructor c·ªßa class cha. JavaScript s·∫Ω kh√¥ng ƒë·ªÉ b·∫°n l√†m vi·ªác n√†y:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Checkbox</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// üî¥  Kh√¥ng th·ªÉ d√πng `this` ƒë∆∞·ª£c</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ‚úÖ  Gi·ªù th√¨ d√πng ƒë∆∞·ª£c r·ªìi</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">isOn</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√≥ m·ªôt l√Ω do ch√≠nh ƒë√°ng gi·∫£i th√≠ch v√¨ sao JavaScript ph·∫£i th·ª±c hi·ªán constructor c·ªßa l·ªõp cha tr∆∞·ªõc khi ƒë·ª•ng v√†o <code class=\"language-inline-text\">this</code>. H√£y xem x√©t tr∆∞·ªùng h·ª£p sau:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Person</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PolitePerson</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Person</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">greetColleagues</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üî¥  ƒêi·ªÅu n√†y kh√¥ng cho ph√©p, ƒë·ªçc l√Ω do ·ªü b√™n d∆∞·ªõi</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">greetColleagues</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Ch√†o bu·ªïi s√°ng!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>H√£y t∆∞·ªüng t∆∞·ª£ng, khi b·∫°n c√≥ th·ªÉ d√πng <code class=\"language-inline-text\">this</code> tr∆∞·ªõc <code class=\"language-inline-text\">super</code>. M·ªôt th√°ng sau, ch√∫ng ta ƒë·ªïi <code class=\"language-inline-text\">greetColleagues</code>, th√™m <code class=\"language-inline-text\">this.name</code> khi alert:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">  <span class=\"token function\">greetColleagues</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Ch√†o bu·ªïi s√°ng!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'T√™n t√¥i l√† '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">', r·∫•t vui ƒë∆∞·ª£c g·∫∑p b·∫°n!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Nh∆∞ng ch√∫ng ta qu√™n r·∫±ng <code class=\"language-inline-text\">this.greetColleagues()</code> ƒë∆∞·ª£c g·ªçi tr∆∞·ªõc <code class=\"language-inline-text\">super()</code>, gi√° tr·ªã <code class=\"language-inline-text\">this.name</code> <strong>ch·ªâ c√≥ sau khi g·ªçi <code class=\"language-inline-text\">super()</code></strong>! L√∫c n√†y b·∫°n c√≥ th·ªÉ th·∫•y, code nh∆∞ th·∫ø n√†y kh√≥ ƒë·ªÉ bi·∫øt ƒë∆∞·ª£c l·ªói ·ªü ƒë√¢u.</p>\n<p>ƒê·ªÉ tr√°nh nh·ªØng ƒëi·ªÅu nh∆∞ v·∫≠y, <strong>JavaScript ch·ªâ ƒë·ªãnh r·∫±ng n·∫øu b·∫°n mu·ªën s·ª≠ d·ª•ng <code class=\"language-inline-text\">this</code> b√™n trong constructor, b·∫°n <em>ph·∫£i</em> g·ªçi <code class=\"language-inline-text\">super</code> tr∆∞·ªõc.</strong> ƒê·ªÉ cho th·∫±ng cha l√†m vi·ªác c·ªßa n√≥! V√† ƒëi·ªÅu n√†y c≈©ng √°p d·ª•ng v·ªõi c√°c l·ªõp React components:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ‚úÖ  Okay, d√πng `this` ƒë∆∞·ª£c r·ªìi</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">isOn</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta c√πng ƒë·∫øn v·ªõi c√¢u h·ªèi kh√°c: ph·∫£i sao ph·∫£i truy·ªÅn v√†o <code class=\"language-inline-text\">props</code>?</p>\n<hr>\n<p>B·∫°n h√£y nghƒ© ƒë∆°n gi·∫£n r·∫±ng khi truy·ªÅn <code class=\"language-inline-text\">props</code> v√†o <code class=\"language-inline-text\">super</code> l√† c·∫ßn thi·∫øt ƒë·ªÉ <code class=\"language-inline-text\">React.Component</code> constructor c√≥ th·ªÉ thi·∫øt l·∫≠p <code class=\"language-inline-text\">this.props</code>:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// B√™n trong React</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>N√≥ th·∫≠t s·ª± l√† <a href=\"https://github.com/facebook/react/blob/1d25aa5787d4e19704c049c3cfa985d3b5190e0d/packages/react/src/ReactBaseClasses.js#L22\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">c√°ch m√† ch√∫ng t√¥i th·ª±c hi·ªán b√™n trong React.Component</a>.</p>\n<p>B·∫±ng c√°ch n√†o ƒë√≥, n·∫øu b·∫°n g·ªçi <code class=\"language-inline-text\">super()</code> m√† kh√¥ng c√≥ tham s·ªë <code class=\"language-inline-text\">props</code>, b·∫°n v·∫´n c√≥ th·ªÉ s·ª≠ d·ª•ng <code class=\"language-inline-text\">this.props</code> trong ph∆∞∆°ng th·ª©c <code class=\"language-inline-text\">render</code> v√† c√°c ph∆∞∆°ng th·ª©c kh√°c. (N·∫øu kh√¥ng tin, h√£y t·ª± ki·ªÉm tra xem!)</p>\n<p>V·∫≠y <em>n√≥</em> ho·∫°t ƒë·ªông nh∆∞ th·∫ø n√†o? H√≥a ra <strong>React ƒë√£ g√°n <code class=\"language-inline-text\">props</code> cho m·ªôt instance ngay sau constructor:</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">  <span class=\"token comment\">// B√™n trong React</span>\n  <span class=\"token keyword\">const</span> instance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">YourComponent</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  instance<span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Th·∫ø n√™n khi b·∫°n qu√™n b·ªè th·∫±ng <code class=\"language-inline-text\">props</code> v√†o <code class=\"language-inline-text\">super()</code>, th√¨ trong React b·∫°n v·∫´n c√≥ th·ªÉ g·ªçi n√≥ sau ƒë√≥. C√≥ m·ªôt l√Ω do cho vi·ªác n√†y.</p>\n<p>Khi React h·ªó tr·ª£ th√™m class, n√≥ kh√¥ng ch·ªâ h·ªó tr·ª£ class cho m·ªói phi√™n b·∫£n ES6. M√† m·ª•c ti√™u ch√≠nh l√† h·ªó tr·ª£ nhi·ªÅu class abstract nh·∫•t c√≥ th·ªÉ. <a href=\"https://reactjs.org/blog/2015/01/27/react-v0.13.0-beta-1.html#other-languages\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Kh√¥ng r√µ</a> l√†m th·∫ø n√†o ClojureScript, CoffeeScript, ES6, Fable, Scala.js, TypeScript, ho·∫∑c c√°c gi·∫£i ph√°p kh√°c ƒë·ªãnh nghƒ©a component. V√¨ v·∫≠y, React s·ª≠ d·ª•ng <code class=\"language-inline-text\">super()</code> kh√¥ng h·ªÅ l√† quan ƒëi·ªÉm c√° nh√¢n.</p>\n<p>V·∫≠y c√≥ nghƒ©a l√† b·∫°n c√≥ th·ªÉ g·ªçi <code class=\"language-inline-text\">super()</code> thay v√¨ <code class=\"language-inline-text\">super(props)</code>?</p>\n<p><strong>Kh√¥ng. Nh∆∞ v·∫≠y r·∫•t kh√≥ hi·ªÉu.</strong> Ch·∫Øc ch·∫Øn, React s·∫Ω g√°n <code class=\"language-inline-text\">this.props</code> <em>sau khi</em>  constructor ch·∫°y. Nh∆∞ng <code class=\"language-inline-text\">this.props</code> v·∫´n  l√† <code class=\"language-inline-text\">undefined</code> <em>gi·ªØa</em> l√∫c g·ªçi <code class=\"language-inline-text\">super</code> v√† k·∫øt th√∫c constructor:</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// B√™n trong React</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// B√™n trong code c·ªßa b·∫°n</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Button</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üò¨ Ch√∫ng ta kh√¥ng truy·ªÅn v√†o props</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// ‚úÖ {}</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üò¨ undefined - ch∆∞a ƒë·ªãnh nghƒ©a </span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Vi·ªác debug s·∫Ω tr·ªü n√™n kh√≥ khƒÉn n·∫øu nh∆∞ m·ªôt v√†i ph∆∞∆°ng th·ª©c ƒë∆∞·ª£c g·ªçi <em>t·ª´</em> constructor. <strong>ƒê√≥ l√† l√Ω do v√¨ sao lu√¥n khuy·∫øn kh√≠ch b·∫°n s·ª≠ d·ª•ng <code class=\"language-inline-text\">super(props)</code>, m·∫∑c d√π n√≥ kh√¥ng ph·∫£i quy ƒë·ªãnh b·∫Øt bu·ªôc:</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Button</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ‚úÖ Ch√∫ng ta truy·ªÅn props v√†o </span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// ‚úÖ {}</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ‚úÖ {}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒêi·ªÅu n√†y ƒë·∫£m b·∫£o <code class=\"language-inline-text\">this.props</code> s·∫Ω ƒë∆∞·ª£c thi·∫øt l·∫≠p trong constructor.</p>\n<hr>\n<p>C√≥ m·ªôt ƒëi·ªÅu cu·ªëi m√† khi·∫øn cho c√°c fan l√¢u nƒÉm c·ªßa React t√≤ m√≤.</p>\n<p>B·∫°n c√≥ th·ªÉ th·∫•y r·∫±ng khi s·ª≠ d·ª•ng Context API b√™n trong class (ho·∫∑c v·ªõi <code class=\"language-inline-text\">contextTypes</code> c≈© ho·∫∑c v·ªõi <code class=\"language-inline-text\">contextType</code> API ƒë∆∞·ª£c th√™m v√†o ·ªü React 16.6), <code class=\"language-inline-text\">context</code> ƒë∆∞·ª£c ƒë·∫©y v√†o tham s·ªë th·ª© hai trong constructor.</p>\n<p>V·∫≠y t·∫°i sao ch√∫ng ta kh√¥ng vi·∫øt l√† <code class=\"language-inline-text\">super(props, context)</code>? C√≥ th·ªÉ ch·ª©, nh∆∞ng context √≠t khi s·ª≠ d·ª•ng n√™n vi·ªác ph√°t sinh l·ªói c≈©ng √≠t xu·∫•t hi·ªán.</p>\n<p><strong>V·ªõi <a href=\"https://github.com/tc39/proposal-class-fields\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">class fields proposal</a> th√¨ nh·ªØng v·∫•n ƒë·ªÅ n√†y h·∫ßu nh∆∞ bi·∫øn m·∫•t.</strong> Kh√¥ng c√≥ constructor, t·∫•t c·∫£ c√°c tham s·ªë ƒë·ªÅu ƒë∆∞·ª£c truy·ªÅn v√†o m·ªôt c√°ch t·ª± ƒë·ªông. ƒê√¢y l√† nh·ªØng l√Ω do cho ph√©p m·ªôt bi·ªÉu th·ª©c <code class=\"language-inline-text\">state = {}</code> bao g·ªìm c·∫£ c√°c tham chi·∫øu <code class=\"language-inline-text\">this.props</code> ho·∫∑c <code class=\"language-inline-text\">this.context</code> n·∫øu c·∫ßn thi·∫øt.</p>\n<p>V·ªõi Hooks, ch√∫ng ta th·∫≠m ch√≠ kh√¥ng c√≥ <code class=\"language-inline-text\">super</code> ho·∫∑c <code class=\"language-inline-text\">this</code>. Nh∆∞ng ch·ªß ƒë·ªÅ ƒë√≥ s·∫Ω gi√†nh cho m·ªôt ng√†y kh√°c.</p>\n<p><strong>B√†i vi·∫øt ƒë∆∞·ª£c d·ªãch t·ª´</strong> <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://overreacted.io/why-do-we-write-super-props/\">Why Do We Write super(props)?</a></p>\n","cover_image":""}},{"node":{"id":"b1851cc1980bb093ae4f97c8d1a1d08d","title":"S·ª≠ d·ª•ng React Hook Effect","path":"/2019-07-03-huong-dan-su-dung-react-hook-effect/","date":"2019-07-03","timeToRead":18,"desc":"B√†i n√†y m√¨nh contribute cho http://vi.reactjs.org v·ªÅ c√°ch s·ª≠ d·ª•ng React Hook Effect","content":"<!-- TOC -->\n<ul>\n<li>\n<p><a href=\"#Effect-kh%C3%B4ng-c%E1%BA%A7n-Cleanup-effects-without-cleanup\">Effect kh√¥ng c·∫ßn Cleanup {#effects-without-cleanup}</a></p>\n<ul>\n<li><a href=\"#V%C3%AD-d%E1%BB%A5-s%E1%BB%AD-d%E1%BB%A5ng-Classes-example-using-classes\">V√≠ d·ª• s·ª≠ d·ª•ng Classes {#example-using-classes}</a></li>\n<li><a href=\"#V%C3%AD-d%E1%BB%A5-s%E1%BB%AD-d%E1%BB%A5ng-Hook-example-using-hooks\">V√≠ d·ª• s·ª≠ d·ª•ng Hook {#example-using-hooks}</a></li>\n<li><a href=\"#Gi%E1%BA%A3i-th%C3%ADch-c%E1%BB%A5-th%E1%BB%83-detailed-explanation\">Gi·∫£i th√≠ch c·ª• th·ªÉ {#detailed-explanation}</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#Effect-c%E1%BA%A7n-Cleanup-effects-with-cleanup\">Effect c·∫ßn Cleanup {#effects-with-cleanup}</a></p>\n<ul>\n<li><a href=\"#V%C3%AD-d%E1%BB%A5-s%E1%BB%AD-d%E1%BB%A5ng-Class-example-using-classes-1\">V√≠ d·ª• s·ª≠ d·ª•ng Class {#example-using-classes-1}</a></li>\n<li><a href=\"#V%C3%AD-d%E1%BB%A5-s%E1%BB%AD-d%E1%BB%A5ng-Hooks-example-using-hooks-1\">V√≠ d·ª• s·ª≠ d·ª•ng Hooks {#example-using-hooks-1}</a></li>\n</ul>\n</li>\n<li><a href=\"#T%E1%BB%95ng-h%E1%BB%A3p-recap\">T·ªïng h·ª£p {#recap}</a></li>\n<li>\n<p><a href=\"#Tip-s%E1%BB%AD-d%E1%BB%A5ng-Effect-tips-for-using-effects\">Tip s·ª≠ d·ª•ng Effect {#tips-for-using-effects}</a></p>\n<ul>\n<li><a href=\"#Tip-S%E1%BB%AD-d%E1%BB%A5ng-nhi%E1%BB%81u-Effect-t%C3%A1ch-bi%E1%BB%87ttip-use-multiple-effects-to-separate-concerns\">Tip: S·ª≠ d·ª•ng nhi·ªÅu Effect t√°ch bi·ªát{#tip-use-multiple-effects-to-separate-concerns}</a></li>\n<li><a href=\"#Gi%E1%BA%A3i-th%C3%ADch-T%E1%BA%A1i-sao-Effect-ch%E1%BA%A1y-tr%C3%AAn-m%E1%BB%97i-update-explanation-why-effects-run-on-each-update\">Gi·∫£i th√≠ch: T·∫°i sao Effect ch·∫°y tr√™n m·ªói update {#explanation-why-effects-run-on-each-update}</a></li>\n<li><a href=\"#Tip-T%E1%BB%91i-%C6%B0u-Performance-b%E1%BA%B1ng-c%C3%A1ch-b%E1%BB%8F-qua-Effect-tip-optimizing-performance-by-skipping-effects\">Tip: T·ªëi ∆∞u Performance b·∫±ng c√°ch b·ªè qua Effect {#tip-optimizing-performance-by-skipping-effects}</a></li>\n</ul>\n</li>\n<li><a href=\"#B%C6%B0%E1%BB%9Bc-ti%E1%BA%BFp-theo-next-steps\">B∆∞·ªõc ti·∫øp theo {#next-steps}</a></li>\n</ul>\n<!-- /TOC -->\n<p><em>Hook</em> l√† m·ªôt t√≠nh nƒÉng m·ªõi t·ª´ React 16.8. N√≥ cho ph√©p s·ª≠ d·ª•ng state v√† c√°c t√≠nh nƒÉng kh√°c c·ªßa React m√† kh√¥ng c·∫ßn vi·∫øt d·∫°ng class</p>\n<p><em>Effect Hook</em> cho ph√©p th·ª±c hi·ªán side effect b√™n trong c√°c function component:</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"gridsome-highlight-code-line\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gridsome-highlight-code-line\">  <span class=\"token comment\">// T∆∞∆°ng t·ª± nh∆∞ componentDidMount v√† componentDidUpdate:</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">    <span class=\"token comment\">// C·∫≠p nh·∫≠p document title s·ª≠ d·ª•ng browser API</span></span><span class=\"gridsome-highlight-code-line\">    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>You clicked <span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span> times<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n        Click me\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒêo·∫°n snippet n√†y d·ª±a tr√™n <a href=\"http://vi.reactjs.org/docs/hooks-state.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">v√≠ d·ª• v·ªÅ counter ·ªü trang tr∆∞·ªõc</a>, ch√∫ng ta c√≥ th√™m t√≠nh nƒÉng m·ªõi: ƒë·∫∑t gi√° tr·ªã document title t∆∞∆°ng ·ª©ng v·ªõi s·ªë l·∫ßn click.</p>\n<p>Fetching data, thi·∫øt l·∫≠p c√°c subscription, v√† t·ª± √Ω thay ƒë·ªïi DOM trong React component, nh·ªØng h√†nh ƒë·ªông nh∆∞ v·∫≠y ƒë∆∞·ª£c l√† \"side effect\" (ho·∫∑c \"effect\").</p>\n<blockquote>\n<p>Tip</p>\n<p>N·∫øu b·∫°n quen v·ªõi c√°c ph∆∞∆°ng th·ª©c lifecycle c·ªßa React class, b·∫°n c√≥ th·ªÉ h√¨nh dung <code class=\"language-inline-text\">useEffect</code> Hook nh∆∞ s·ª± k·∫øt h·ª£p c·ªßa <code class=\"language-inline-text\">componentDidMount</code>, <code class=\"language-inline-text\">componentDidUpdate</code>, v√† <code class=\"language-inline-text\">componentWillUnmount</code>.</p>\n</blockquote>\n<p>C√≥ 2 lo·∫°i side effect ph·ªï bi·∫øn trong React component: lo·∫°i kh√¥ng c·∫ßn cleanup, v√† lo·∫°i c·∫ßn. C√πng ph√¢n bi·ªát 2 lo·∫°i n√†y k·ªπ h∆°n.</p>\n<h2 id=\"effect-kh√¥ng-c·∫ßn-cleanup-effects-without-cleanup\"><a href=\"#effect-kh%C3%B4ng-c%E1%BA%A7n-cleanup-effects-without-cleanup\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Effect kh√¥ng c·∫ßn Cleanup {#effects-without-cleanup}</h2>\n<p>ƒê√¥i l√∫c, ch√∫ng ta mu·ªën <strong>ch·∫°y m·ªôt v√†i ƒëo·∫°n code sau khi React ƒë√£ c·∫≠p nh·∫≠p DOM.</strong> Network request, t·ª± √Ω thay ƒë·ªïi DOM, v√† logging l√† nh·ªØng v√≠ d·ª• ƒëi·ªÉn h√¨nh c·ªßa effect kh√¥ng c·∫ßn cleanup. Ch√∫ng ta g·ªçi nh∆∞ v·∫≠y v√¨ c√≥ th·ªÉ ch·∫°y ch√∫ng v√† qu√™n ngay l·∫≠p t·ª©c. H√£y so s√°nh class v√† Hook cho ph√©p th·ª±c hi·ªán side effect nh∆∞ th·∫ø ra sao.</p>\n<h3 id=\"v√≠-d·ª•-s·ª≠-d·ª•ng-classes-example-using-classes\"><a href=\"#v%C3%AD-d%E1%BB%A5-s%E1%BB%AD-d%E1%BB%A5ng-classes-example-using-classes\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V√≠ d·ª• s·ª≠ d·ª•ng Classes {#example-using-classes}</h3>\n<p>Trong React class components, ph∆∞∆°ng th·ª©c <code class=\"language-inline-text\">render</code> kh√¥ng ƒë∆∞·ª£c ph√©p t·∫°o ra side effect. N√≥ s·∫Ω l√† qu√° s·ªõm -- ch√∫ng ta th∆∞·ªùng ch·ªâ mu·ªën ch·∫°y effect <em>sau khi</em> React ƒë√£ c·∫≠p nh·∫≠p DOM.</p>\n<p>ƒê√≥ l√† l√Ω do t·∫°i sao trong React class, ch√∫ng ta ƒë·∫∑t side effect b√™n trong <code class=\"language-inline-text\">componentDidMount</code> v√† <code class=\"language-inline-text\">componentDidUpdate</code>. Quay l·∫°i v√≠ d·ª•, ƒë√¢y l√† React counter class component s·∫Ω c·∫≠p nh·∫≠p document title ngay sau khi React thay ƒë·ªïi DOM:</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Example</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gridsome-highlight-code-line\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token punctuation\">}</span></span><span class=\"gridsome-highlight-code-line\"></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>You clicked <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span> times<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          Click me\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ªÉ √Ω c√°ch <strong>ch√∫ng ta ƒë√£ l·∫≠p l·∫°i 2 thao t√°c t∆∞∆°ng t·ª± nhau b√™n trong 2 ph∆∞∆°ng th·ª©c lifecycle</strong></p>\n<p>ƒê√≥ l√† b·ªüi v√¨ trong ƒëa ph·∫ßn c√°c tr∆∞·ªùng h·ª£p, ch√∫ng ta mu·ªën th·ª±c hi·ªán c√πng m·ªôt side effect khi component ƒë√£ mount ho·∫∑c ƒë√£ update. M·ªôt c√°ch t·ªïng qu√°t, ch√∫ng ta mu·ªën th·ª±c hi·ªán sau m·ªói l·∫ßn render -- nh∆∞ng React class component kh√¥ng c√≥ ph∆∞∆°ng th·ª©c nh∆∞ v·∫≠y. Ch√∫ng ta c√≥ th·ªÉ t√°ch n√≥ ra th√†nh m·ªôt h√†m ri√™ng, nh∆∞ng v·∫´n ph·∫£i g·ªçi n√≥ ·ªü 2 n∆°i kh√°c nhau.</p>\n<p>B√¢y gi·ªù ch√∫ng ta xem c√°ch l√†m t∆∞∆°ng t·ª± v·ªõi <code class=\"language-inline-text\">useEffect</code> Hook.</p>\n<h3 id=\"v√≠-d·ª•-s·ª≠-d·ª•ng-hook-example-using-hooks\"><a href=\"#v%C3%AD-d%E1%BB%A5-s%E1%BB%AD-d%E1%BB%A5ng-hook-example-using-hooks\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V√≠ d·ª• s·ª≠ d·ª•ng Hook {#example-using-hooks}</h3>\n<p>Ch√∫ng ta ƒë√£ xem v√≠ d·ª• ·ªü tr√™n, gi·ªù xem k·ªπ h∆°n m·ªôt l·∫ßn n·ªØa:</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"gridsome-highlight-code-line\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gridsome-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>You clicked <span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span> times<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCount</span><span class=\"token punctuation\">(</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n        Click me\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong><code class=\"language-inline-text\">useEffect</code> ƒë√£ l√†m g√¨?</strong> B·∫±ng c√°ch s·ª≠ d·ª•ng Hook n√†y, ch√∫ng ta n√≥i v·ªõi React r·∫±ng component c·ªßa ch√∫ng ta c·∫ßn th·ª±c hi·ªán m·ªôt vi·ªác g√¨ ƒë√≥ sau khi render. React s·∫Ω ghi nh·ªõ h√†m b·∫°n truy·ªÅn v√†o (ch√∫ng t√¥i th√≠ch g·ªçi n√≥ l√† \"effect\"), v√† sau ƒë√≥ g·ªçi l·∫°i h√†m n√†y sau khi DOM ƒë√£ update. Trong effect n√†y, ch√∫ng ta ƒë·ªïi document title, ch√∫ng ta c≈©ng c√≥ th·ªÉ  fetch data ho·∫∑c g·ªçi m·ªôt s·ªë API kh√°c.</p>\n<p><strong>T·∫°i sao <code class=\"language-inline-text\">useEffect</code> ƒë∆∞·ª£c g·ªçi b√™n trong component?</strong> ƒê·∫∑t <code class=\"language-inline-text\">useEffect</code> b√™n trong component cho ph√©p ch√∫ng ta truy xu·∫•t ƒë·∫øn state <code class=\"language-inline-text\">count</code> (ho·∫∑c b·∫•t k·ª≥ prop n√†o) b√™n trong effect. Ch√∫ng ta kh√¥ng c·∫ßn m·ªôt API ƒë·∫∑c bi·ªát ƒë·ªÉ ƒë·ªçc n√≥ -- n√≥ ƒë√£ n·∫±m trong scope c·ªßa function. Hook t·∫≠n d·ª•ng JavaScript closures v√† tr√°nh cung c·∫•p th√™m c√°c APIs m√† b·∫£n th√¢n JavaScript ƒë√£ c√≥ s·∫µn gi·∫£i ph√°p.</p>\n<p><strong><code class=\"language-inline-text\">useEffect</code> ch·∫°y sau t·∫•t c·∫£ nh·ªØng l·∫ßn render?</strong> ƒê√∫ng! Theo m·∫∑c ƒë·ªãnh, n√≥ ch·∫°y sau l·∫ßn render ƒë·∫ßu ti√™n <em>v√†</em> m·ªói l·∫ßn update. (Ch√∫ng ta s·∫Ω n√≥i v·ªÅ <a href=\"#tip-optimizing-performance-by-skipping-effects\">l√†m c√°ch n√†o ƒë·ªÉ t√πy bi·∫øn l·∫°i</a>.) Thay v√¨ nghƒ© theo h∆∞·ªõng \"mounting\" v√† \"updating\", b·∫°n s·∫Ω th·∫•y d·ªÖ hi·ªÉu h∆°n n·∫øu nghƒ© theo ki·ªÉu \"sau khi render\". React ƒë·∫£m b·∫£o DOM ƒë√£ ƒë∆∞·ª£c update tr∆∞·ªõc khi ch·∫°y effect.</p>\n<h3 id=\"gi·∫£i-th√≠ch-c·ª•-th·ªÉ-detailed-explanation\"><a href=\"#gi%E1%BA%A3i-th%C3%ADch-c%E1%BB%A5-th%E1%BB%83-detailed-explanation\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Gi·∫£i th√≠ch c·ª• th·ªÉ {#detailed-explanation}</h3>\n<p>Gi·ªù ch√∫ng ta ƒë√£ hi·ªÉu v·ªÅ effect, ƒëo·∫°n code n√†y s·∫Ω r·∫•t d·ªÖ hi·ªÉu:</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Example</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ch√∫ng ta khai b√°o state <code class=\"language-inline-text\">count</code>, v√† sau ƒë√≥ n√≥i v·ªõi React ch√∫ng ta c·∫ßn s·ª≠ d·ª•ng. Ch√∫ng ta truy·ªÅn cho <code class=\"language-inline-text\">useEffect</code> Hook m·ªôt h√†m. H√†m truy·ªÅn v√†o n√†y <em>l√†</em> effect. B√™n trong effect, ch√∫ng ta ƒë·∫∑t document title s·ª≠ d·ª•ng API <code class=\"language-inline-text\">document.title</code>. Ch√∫ng ta c√≥ th·ªÉ ƒë·ªçc gi√° tr·ªã sau c√πng c·ªßa <code class=\"language-inline-text\">count</code> b√™n trong effect b·ªüi v√¨ n√≥ n·∫±m chung scope v·ªõi function. Khi React render component, n√≥ s·∫Ω nh·ªõ l·∫°i effect ch√∫ng ta ƒë√£ g·ª≠i, v√† ch·∫°y effect sau khi c·∫≠p nh·∫≠p DOM. N√≥ x·∫£y ra ·ªü t·∫•t c·∫£ c√°c l·∫ßn render, k·ªÉ c·∫£ l·∫ßn ƒë·∫ßu.</p>\n<p>L·∫≠p tr√¨nh vi√™n JavaScript c√≥ kinh nghi·ªám s·∫Ω ƒë·ªÉ √Ω th·∫•y function truy·ªÅn v√†o cho <code class=\"language-inline-text\">useEffect</code> s·∫Ω kh√°c nhau cho t·∫•t c·∫£ c√°c l·∫ßn render. ƒê√¢y l√† ƒëi·ªÅu c·ªë √Ω. Th·∫≠t ra, n√≥ s·∫Ω cho ch√∫ng ta ƒë·ªçc gi√° tr·ªã <code class=\"language-inline-text\">count</code> b√™n trong effect m√† kh√¥ng c·∫ßn lo l·∫Øng v·ªÅ vi·ªác l·∫•y state. M·ªói l·∫ßn ch√∫ng ta re-render, ch√∫ng ta g·ªçi m·ªôt effect <strong>kh√°c</strong>, thay th·∫ø c√°i tr∆∞·ªõc ƒë√≥. B·∫±ng c√°ch n√†y, n√≥ l√†m cho effect nh∆∞ m·ªôt ph·∫ßn c·ªßa vi·ªác render -- m·ªói effect \"thu·ªôc v√†o\" m·ªôt render c·ª• th·ªÉ. Ch√∫ng ta s·∫Ω hi·ªÉu t·∫°i sao c√°ch n√†y l·∫°i hi·ªáu qu·∫£ <a href=\"#explanation-why-effects-run-on-each-update\">·ªü ph·∫ßn sau c·ªßa b√†i n√†y</a>.</p>\n<blockquote>\n<p>Tip</p>\n<p>Kh√¥ng gi·ªëng <code class=\"language-inline-text\">componentDidMount</code> ho·∫∑c <code class=\"language-inline-text\">componentDidUpdate</code>, effect ch·∫°y v·ªõi <code class=\"language-inline-text\">useEffect</code> kh√¥ng block tr√¨nh duy·ªát c·∫≠p nh·∫≠p m√†n h√¨nh. C√°c effect ch·ªß y·∫øu kh√¥ng c·∫ßn x·∫£y ra tu·∫ßn t·ª±. Trong v√†i t√¨nh hu·ªëng kh√¥ng m·∫•y ph·ªï bi·∫øn (v√≠ d·ª• nh∆∞ ƒëo layout), ch√∫ng ta c√≥  <a href=\"http://vi.reactjs.org/docs/hooks-reference.html#uselayouteffect\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-inline-text\">useLayoutEffect</code></a> Hook v·ªõi API t√≠nh nƒÉng t∆∞∆°ng t·ª± nh∆∞ <code class=\"language-inline-text\">useEffect</code>.</p>\n</blockquote>\n<h2 id=\"effect-c·∫ßn-cleanup-effects-with-cleanup\"><a href=\"#effect-c%E1%BA%A7n-cleanup-effects-with-cleanup\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Effect c·∫ßn Cleanup {#effects-with-cleanup}</h2>\n<p>·ªû tr√™n, ch√∫ng ta ƒë√£ b√†n v·ªÅ nh·ªØng side effect kh√¥ng c·∫ßn cleanup. Tuy nhi√™n, m·ªôt v√†i effect c·∫ßn c√≥. V√≠ d·ª•, <strong>ch√∫ng ta mu·ªën thi·∫øt l·∫≠p c√°c subscription</strong> cho v√†i data source b√™n ngo√†i. T√¨nh hu·ªëng ƒë√≥, clean up l√† r·∫•t quan tr·ªçng ƒë·ªÉ kh√¥ng x·∫£y ra memory leak! C√πng so s√°nh c√°ch l√†m gi·ªØa class v√† Hook</p>\n<h3 id=\"v√≠-d·ª•-s·ª≠-d·ª•ng-class-example-using-classes-1\"><a href=\"#v%C3%AD-d%E1%BB%A5-s%E1%BB%AD-d%E1%BB%A5ng-class-example-using-classes-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V√≠ d·ª• s·ª≠ d·ª•ng Class {#example-using-classes-1}</h3>\n<p>Trong React class, ch√∫ng ta th∆∞·ªùng c√†i ƒë·∫∑t m·ªôt subscription trong <code class=\"language-inline-text\">componentDidMount</code>, v√† clean it up trong <code class=\"language-inline-text\">componentWillUnmount</code>. L·∫•y v√≠ d·ª•, ch√∫ng ta c√≥ <code class=\"language-inline-text\">ChatAPI</code> module cho ph√©p ch√∫ng ta subscribe v√†o t√¨nh tr·∫°ng online c·ªßa 1 danh s√°ch friend. C√°ch ch√∫ng ta l√†m v·ªõi class</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">FriendStatus</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">isOnline</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gridsome-highlight-code-line\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span></span><span class=\"gridsome-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span></span><span class=\"gridsome-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange</span><span class=\"gridsome-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token punctuation\">}</span></span><span class=\"gridsome-highlight-code-line\"></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span></span><span class=\"gridsome-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span></span><span class=\"gridsome-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange</span><span class=\"gridsome-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token punctuation\">}</span></span><span class=\"gridsome-highlight-code-line\"></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">      <span class=\"token literal-property property\">isOnline</span><span class=\"token operator\">:</span> status<span class=\"token punctuation\">.</span>isOnline</span><span class=\"gridsome-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isOnline <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token string\">'Loading...'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'Online'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Offline'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ªÉ √Ω <code class=\"language-inline-text\">componentDidMount</code> v√† <code class=\"language-inline-text\">componentWillUnmount</code>. Ph∆∞∆°ng th·ª©c Lifecycle bu·ªôc ch√∫ng ta t√°ch logic n√†y ra th·∫≠m ch√≠ c·∫£ 2 ƒëo·∫°n code tr√™n ƒëi·ªÅu li√™n quan ƒë·∫øn c√πng m·ªôt effect.</p>\n<blockquote>\n<p>L∆∞u √Ω</p>\n<p>N·∫øu ƒë·ªÉ √Ω k·ªπ h∆°n, b·∫°n s·∫Ω th·∫•y ch√∫ng ta c√≤n c·∫ßn th√™m <code class=\"language-inline-text\">componentDidUpdate</code> ƒë·ªÉ th·ª±c s·ª± chu·∫©n x√°c. T·∫°m th·ªùi c·ª© b·ªè qua ph·∫ßn ƒë√≥ v√¨ ch√∫ng ta s·∫Ω ƒë·ªÅ c·∫≠p l·∫°i <a href=\"#explanation-why-effects-run-on-each-update\">·ªü ph·∫ßn sau</a> of this page.</p>\n</blockquote>\n<h3 id=\"v√≠-d·ª•-s·ª≠-d·ª•ng-hooks-example-using-hooks-1\"><a href=\"#v%C3%AD-d%E1%BB%A5-s%E1%BB%AD-d%E1%BB%A5ng-hooks-example-using-hooks-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V√≠ d·ª• s·ª≠ d·ª•ng Hooks {#example-using-hooks-1}</h3>\n<p>C√πng xem c√°ch ch√∫ng ta l√†m v·ªõi Hook.</p>\n<p>B·∫°n c√≥ th·ªÉ s·∫Ω nghƒ© ch√∫ng ta c·∫ßn 2 effect kh√°c nhau ƒë·ªÉ th·ª±c hi·ªán cleanup. Code kh·ªüi t·∫°o v√† x√≥a subscription lu√¥n lu√¥n ƒë·ª©ng k·ªÅ nhau, <code class=\"language-inline-text\">useEffect</code> ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ d·ªØ ch√∫ng c√πng m·ªôt ch·ªó. N·∫øu effect tr·∫£ v·ªÅ function, React s·∫Ω ch·∫°y  function ƒë√≥, ch√∫ng ta ƒë∆∞a clean up v√†o b√™n trong function tr·∫£ v·ªÅ:</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gridsome-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">    <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">      <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gridsome-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gridsome-highlight-code-line\"></span><span class=\"gridsome-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gridsome-highlight-code-line\">    <span class=\"token comment\">// Ch·ªâ ƒë·ªãnh clean up sau khi g·ªçi effect:</span></span><span class=\"gridsome-highlight-code-line\">    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token function\">cleanup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gridsome-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isOnline <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Loading...'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> isOnline <span class=\"token operator\">?</span> <span class=\"token string\">'Online'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Offline'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>T·∫°i sao ch√∫ng ta tr·∫£ v·ªÅ function b√™n trong effect?</strong> ƒê√¢y l√† m·ªôt t√πy ch·ªçn ƒë·ªÉ ch·∫°y c∆° ch·∫ø cleanup cho effect. N√≥ cho ph√©p ch√∫ng ta ƒë∆∞a t·∫°o v√† x√≥a subscription trong c√πng m·ªôt effect.</p>\n<p><strong>Khi n√†o React clean up m·ªôt effect?</strong> React th·ª±c hi·ªán cleanup khi  component unmount. Tuy nhi√™n, nh∆∞ ƒë√£ h·ªçc tr∆∞·ªõc ƒë√≥, effect tr√™n t·∫•t c·∫£ nh·ªØng l·∫ßn render, kh√¥ng ph·∫£i ch·ªâ m·ªôt. ƒê√≥ l√† t·∫°i sao React <em>ƒë·ªìng th·ªùi</em> cleans up effect t·ª´ nh·ªØng l·∫ßn render tr∆∞·ªõc. Ch√∫ng ta s·∫Ω th·∫£o lu·∫≠n th√™m <a href=\"#explanation-why-effects-run-on-each-update\">vi·ªác n√†y gi√∫p tr√°nh bug</a> v√† <a href=\"#tip-optimizing-performance-by-skipping-effects\">l√†m c√°ch n√†o t√πy bi·∫øn ƒë·∫∑c t√≠nh n√†y ƒë·ªÉ c√°i thi·ªán performance </a> ·ªü b√™n d∆∞·ªõi.</p>\n<blockquote>\n<p>Ghi ch√∫</p>\n<p>Ch√∫ng ta kh√¥ng c·∫ßn tr·∫£ v·ªÅ m·ªôt function c√≥ t√™n trong effect. Ch√∫ng ta g·ªçi n√≥ l√† <code class=\"language-inline-text\">cleanup</code> ƒë·ªÉ ch·ªâ r√µ m·ª•c ƒë√≠ch, b·∫°n c√≥ th·ªÉ d√πng arrow function trong th·ª±c t·∫ø.</p>\n</blockquote>\n<h2 id=\"t·ªïng-h·ª£p-recap\"><a href=\"#t%E1%BB%95ng-h%E1%BB%A3p-recap\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·ªïng h·ª£p {#recap}</h2>\n<p>Ch√∫ng ta ƒë√£ h·ªçc <code class=\"language-inline-text\">useEffect</code> cho ph√©p ch√∫ng ta th·ª±c hi·ªán nhi·ªÅu ki·ªÉu side effect sau khi component ƒë∆∞·ª£c render. M·ªôt v√†i effect c·∫ßn cleanup n√≥ s·∫Ω return m·ªôt function:</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>M·ªôt v√†i effect kh√°c c√≥ th·ªÉ kh√¥ng c·∫ßn cleanup, th√¨ kh√¥ng c·∫ßn return g√¨ c·∫£.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Effect Hook ƒë∆∞·ª£c s·ª≠ d·ª•ng trong c·∫£ 2 tr∆∞·ªùng h·ª£p.</p>\n<hr>\n<p><strong>N·∫øu b·∫°n ƒë√£ n·∫Øm b·∫Øt ƒë∆∞·ª£c c√°ch l√†m vi·ªác c·ªßa Effect Hook, ho·∫∑c n·∫øu b·∫°n c·∫£m th·∫•y h∆°i ng·ª£p, c√≥ th·ªÉ nh·∫£y xu·ªëng <a href=\"http://vi.reactjs.org/docs/hooks-rules.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ph·∫ßn Nguy√™n t·∫Øc s·ª≠ d·ª•ng Hook</a> b√¢y gi·ªù.</strong></p>\n<hr>\n<h2 id=\"tip-s·ª≠-d·ª•ng-effect-tips-for-using-effects\"><a href=\"#tip-s%E1%BB%AD-d%E1%BB%A5ng-effect-tips-for-using-effects\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tip s·ª≠ d·ª•ng Effect {#tips-for-using-effects}</h2>\n<p>Ch√∫ng ta s·∫Ω c√πng ƒëi s√¢u m·ªôt s·ªë kh√≠a c·∫°nh c·ªßa <code class=\"language-inline-text\">useEffect</code> m√† c√°c l·∫≠p tr√¨nh vi√™n React c√≥ kinh nghi·ªám s·∫Ω th·∫Øc m·∫Øc. Kh√¥ng c·∫ßn qu√° c∆∞·ª°ng √©p b·∫£n th√¢n, b·∫°n c√≥ th·ªÉ d·ª´ng ·ªü ƒë√¢y, v√† quay l·∫°i ƒë·ªÉ t√¨m hi·ªÉu Effect Hook b·∫•t c·ª© l√∫c n√†o.</p>\n<h3 id=\"tip-s·ª≠-d·ª•ng-nhi·ªÅu-effect-t√°ch-bi·ªáttip-use-multiple-effects-to-separate-concerns\"><a href=\"#tip-s%E1%BB%AD-d%E1%BB%A5ng-nhi%E1%BB%81u-effect-t%C3%A1ch-bi%E1%BB%87ttip-use-multiple-effects-to-separate-concerns\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tip: S·ª≠ d·ª•ng nhi·ªÅu Effect t√°ch bi·ªát{#tip-use-multiple-effects-to-separate-concerns}</h3>\n<p>M·ªôt trong nh·ªØng v·∫•n ƒë·ªÅ ƒë√£ li·ªát k√™ ·ªü  <a href=\"http://vi.reactjs.org/docs/hooks-intro.html#complex-components-become-hard-to-understand\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ƒë·ªông l·ª±c</a> t·∫°o ra Hooks l√† c√°c ph∆∞∆°ng th·ª©c lifecycle c·ªßa class th∆∞·ªùng ch·ª©a nh·ªØng logic kh√¥ng li√™n quan v·ªõi nhau, c√≤n nh·ªØng logic ƒë√°ng l√Ω ph·∫£i n·∫±m g·∫ßn nhau l·∫°i n·∫±m ·ªü c√°c ph∆∞∆°ng th·ª©c kh√°c nhau. ƒê√¢y l√† component k·∫øt h·ª£p counter v√† friend status t·ª´ v√≠ d·ª• ·ªü tr√™n</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">FriendStatusWithCounter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">isOnline</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">isOnline</span><span class=\"token operator\">:</span> status<span class=\"token punctuation\">.</span>isOnline\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span></code></pre></div>\n<p>ƒê·ªÉ √Ω c√°i logic c·ªßa <code class=\"language-inline-text\">document.title</code> ƒëang n·∫±m ·ªü <code class=\"language-inline-text\">componentDidMount</code> v√† <code class=\"language-inline-text\">componentDidUpdate</code>. Logic c·ªßa subscription th√¨ c≈©ng n·∫±m ·ªü  <code class=\"language-inline-text\">componentDidMount</code> v√† <code class=\"language-inline-text\">componentWillUnmount</code>. V√† <code class=\"language-inline-text\">componentDidMount</code> ch·ª©a code c·∫£ hai.</p>\n<p>Nh∆∞ v·∫≠y hook ƒë√£ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ n√†y nh∆∞ th·∫ø n√†o? N·∫øu nh∆∞ <a href=\"http://vi.reactjs.org/docs/hooks-state.html#tip-using-multiple-state-variables\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng <em>State</em> Hook nhi·ªÅu l·∫ßn</a>, b·∫°n c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng nhi·ªÅu effect. N√≥ cho ph√©p t√°ch nh·ªØng logic kh√¥ng li√™n quan ra th√†nh nh·ªØng effect kh√°c nhau:</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatusWithCounter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gridsome-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isOnline<span class=\"token punctuation\">,</span> setIsOnline<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gridsome-highlight-code-line\">  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span>    <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Hook cho ph√©p t√°ch code d·ª±a tr√™n c√°i n√≥ ƒëang l√†m</strong> ch·ª© kh√¥ng ƒëi theo ph∆∞∆°ng th·ª©c lifecycle. React s·∫Ω apply <em>t·ª´ng</em> effect ƒë∆∞·ª£c s·ª≠ d·ª•ng trong component, theo th·ª© t·ª± ƒë√£ khai b√°o.</p>\n<h3 id=\"gi·∫£i-th√≠ch-t·∫°i-sao-effect-ch·∫°y-tr√™n-m·ªói-update-explanation-why-effects-run-on-each-update\"><a href=\"#gi%E1%BA%A3i-th%C3%ADch-t%E1%BA%A1i-sao-effect-ch%E1%BA%A1y-tr%C3%AAn-m%E1%BB%97i-update-explanation-why-effects-run-on-each-update\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Gi·∫£i th√≠ch: T·∫°i sao Effect ch·∫°y tr√™n m·ªói update {#explanation-why-effects-run-on-each-update}</h3>\n<p>N·∫øu ƒë√£ t·ª´ng s·ª≠ d·ª•ng class, b·∫°n s·∫Ω th·∫Øc m·∫Øc t·∫°i sao b∆∞·ªõc cleanup effect l·∫°i ch·∫°y tr√™n m·ªói l·∫ßn re-render, m√† kh√¥ng ph·∫£i khi unmounting. X√©t m·ªôt v√≠ d·ª• th·ª±c t·∫ø ƒë·ªÉ th·∫•y t·∫°i sao thi·∫øt k·∫ø n√†y gi√∫p ch√∫ng ta c√≥ nh·ªØng component √≠t bug h∆°n</p>\n<p><a href=\"#example-using-classes-1\">·ªû ph·∫ßn tr∆∞·ªõc</a>, ch√∫ng ta c√≥ ƒë·ªÅ c·∫≠p v√≠ d·ª• <code class=\"language-inline-text\">FriendStatus</code> ƒë·ªÉ hi·ªÉn th·ªã tr·∫°ng th√°i online c·ªßa Friend. Class ƒë·ªçc <code class=\"language-inline-text\">friend.id</code> t·ª´ <code class=\"language-inline-text\">this.props</code>, subscribe sau khi component mount, v√† unsubscribe trong l√∫c unmounting:</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Chuy·ªán g√¨ s·∫Ω x·∫£y ra n·∫øu prop <code class=\"language-inline-text\">friend</code> thay ƒë·ªïi</strong> trong khi component ƒëang hi·ªÉn th·ªã tr√™n m√†n h√¨nh (ch∆∞a unmount)? Ch·∫Øc ch·∫Øn c√≥ bug v·ªõi danh s√°ch status. Ch√∫ng ta c≈©ng c√≥ th·ªÉ g√¢y ra memory leak ho·∫∑c crash khi ƒëang unmounting v√† g·ªçi unsubscribe n·∫øu c√≥ m·ªôt Friend ID kh√¥ng ƒë√∫ng.</p>\n<p>Trong class component, ch√∫ng ta c·∫ßn th√™m <code class=\"language-inline-text\">componentDidUpdate</code> ƒë·ªÉ x·ª≠ l√Ω t√¨nh hu·ªëng n√†y:</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gridsome-highlight-code-line\">  <span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gridsome-highlight-code-line\">    <span class=\"token comment\">// Unsubscribe friend.id tr∆∞·ªõc ƒë√≥</span></span><span class=\"gridsome-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span></span><span class=\"gridsome-highlight-code-line\">      prevProps<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span></span><span class=\"gridsome-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange</span><span class=\"gridsome-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gridsome-highlight-code-line\">    <span class=\"token comment\">// Subscribe friend.id m·ªõi</span></span><span class=\"gridsome-highlight-code-line\">    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span></span><span class=\"gridsome-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span></span><span class=\"gridsome-highlight-code-line\">      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange</span><span class=\"gridsome-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gridsome-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleStatusChange\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Qu√™n handle <code class=\"language-inline-text\">componentDidUpdate</code> l√† ƒëi·ªÅu d·ªÖ d·∫´n t·ªõi c√≥ bug trong React.</p>\n<p>ƒê√¢y l√† phi√™n b·∫£n s·ª≠ d·ª•ng Hook</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">FriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Kh√¥ng c√≤n b·ªã d√≠nh bug nh∆∞ ·ªü tr√™n</p>\n<p>S·∫Ω kh√¥ng c√≥ m·ªôt ƒëo·∫°n code n√†o ƒë·∫∑c bi·ªát ƒë·ªÉ x·ª≠ l√Ω l√∫c update v√¨ theo c√°ch ch·∫°y <em>m·∫∑c ƒë·ªãnh</em> c·ªßa <code class=\"language-inline-text\">useEffect</code> n√≥ ƒë√£ x√≥a effect tr∆∞·ªõc khi apply effect m·ªõi. ƒê·ªÉ h√¨nh dung h√≥a, ƒë√¢y l√† c√°c b∆∞·ªõc g·ªçi subscribe v√† unsubscribe m√† component ƒë√£ ch·∫°y qua:</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Mount v·ªõi prop { friend: { id: 100 } }</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// Ch·∫°y effect ƒë·∫ßu ti√™n</span>\n\n<span class=\"token comment\">// C·∫≠p nh·∫≠p prop { friend: { id: 200 } }</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Clean effect tr∆∞·ªõc ƒë√≥</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// Ch·∫°y effect ti·∫øp theo</span>\n\n<span class=\"token comment\">// C·∫≠p nh·∫≠p v·ªõi { friend: { id: 300 } }</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Clean effect tr∆∞·ªõc ƒë√≥</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// Ch·∫°y effect ti·∫øp theo</span>\n\n<span class=\"token comment\">// Unmount</span>\nChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Clean effect l·∫ßn cu·ªëi</span></code></pre></div>\n<p>ƒê·∫∑c t√≠nh n√†y ƒë·∫£m b·∫£o th·ªëng nh·∫•t v√† ngƒÉn bug th∆∞·ªùng xu·∫•t hi·ªán do kh√¥ng c·∫≠p nh·∫≠p login v·ªõi class component</p>\n<h3 id=\"tip-t·ªëi-∆∞u-performance-b·∫±ng-c√°ch-b·ªè-qua-effect-tip-optimizing-performance-by-skipping-effects\"><a href=\"#tip-t%E1%BB%91i-%C6%B0u-performance-b%E1%BA%B1ng-c%C3%A1ch-b%E1%BB%8F-qua-effect-tip-optimizing-performance-by-skipping-effects\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tip: T·ªëi ∆∞u Performance b·∫±ng c√°ch b·ªè qua Effect {#tip-optimizing-performance-by-skipping-effects}</h3>\n<p>Trong m·ªôt s·ªë tr∆∞·ªùng h·ª£p, clean v√† apply effect sau khi render c√≥ th·ªÉ d·∫´n ƒë·∫øn ·∫£nh h∆∞·ªüng performance. Trong class component, ch√∫ng ta gi·∫£i quy·∫øt b·∫±ng vi·∫øt m·ªôt h√†m so s√°nh gi·ªØa <code class=\"language-inline-text\">prevProps</code> ho·∫∑c <code class=\"language-inline-text\">prevState</code> b√™n trong <code class=\"language-inline-text\">componentDidUpdate</code>:</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps<span class=\"token punctuation\">,</span> prevState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevState<span class=\"token punctuation\">.</span>count <span class=\"token operator\">!==</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê√¢y l√† y√™u c·∫ßu r·∫•t c·∫ßn thi·∫øt, n√™n ƒë√£ ƒë∆∞·ª£c c√≥ ƒë∆∞a s·∫µn trong <code class=\"language-inline-text\">useEffect</code> Hook API. B·∫°n c√≥ th·ªÉ b·∫£o React <em>b·ªè qua</em> vi·ªác apply effect n·∫øu m·ªôt s·ªë gi√° tr·ªã kh√¥ng thay ƒë·ªïi gi·ªØa c√°c l·∫ßn render. ƒê·ªÉ l√†m nh∆∞ v·∫≠y, truy·ªÅn v√†o m·ªôt array (kh√¥ng b·∫Øt bu·ªôc) v√†o <code class=\"language-inline-text\">useEffect</code>:</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">You clicked </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> times</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"gridsome-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Ch·ªâ re-run effect n·∫øu gi√° tr·ªã count thay ƒë·ªïi</span></span></code></pre></div>\n<p>Trong v√≠ d·ª• ·ªü tr√™n, ch√∫ng ta truy·ªÅn v√†o <code class=\"language-inline-text\">[count]</code> nh∆∞ m·ªôt tham s·ªë th·ª© 2. N√≥ nghƒ©a l√† g√¨? N·∫øu <code class=\"language-inline-text\">count</code> l√† <code class=\"language-inline-text\">5</code>, r·ªìi sau ƒë√≥ component re-render v·ªõi <code class=\"language-inline-text\">count</code> v·∫´n b·∫±ng <code class=\"language-inline-text\">5</code>, React s·∫Ω so s√°nh <code class=\"language-inline-text\">[5]</code> t·ª´ l·∫ßn render tr∆∞·ªõc v√† <code class=\"language-inline-text\">[5]</code> v·ªõi l·∫ßn render hi·ªán t·∫°i. V√¨ t·∫•t c·∫£ gi√° tr·ªã trong m·∫£ng b·∫±ng nhau (<code class=\"language-inline-text\">5 === 5</code>), React s·∫Ω b·ªè qua  effect. ƒê√≥ l√† c√°ch ch√∫ng ta t·ªëi ∆∞u</p>\n<p>Khi ch√∫ng ta render v·ªõi <code class=\"language-inline-text\">count</code> th√†nh <code class=\"language-inline-text\">6</code>, React s·∫Ω so s√°nh c√°c gi√° tr·ªã trong <code class=\"language-inline-text\">[5]</code> t·ª´ l·∫ßn render tr∆∞·ªõc v·ªõi c√°c gi√° tr·ªã trong <code class=\"language-inline-text\">[6]</code> l·∫ßn render hi·ªán t·∫°i. ·ªû l·∫ßn n√†y, React s·∫Ω g·ªçi l·∫°i effect v√¨ <code class=\"language-inline-text\">5 !== 6</code>. N·∫øu c√≥ nhi·ªÅu gi√° tr·ªã b√™n trong array, React s·∫Ωl re-run effect n·∫øu m·ªôt trong c√°c gi√° tr·ªã ƒë√≥ kh√°c v·ªõi l·∫ßn tr∆∞·ªõc.</p>\n<p>Effect c≈©ng l√†m vi·ªác t∆∞∆°ng t·ª± v·ªõi qu√° tr√¨nh cleanup:</p>\n<div class=\"gridsome-highlight has-highlighted-lines\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleStatusChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setIsOnline</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">.</span>isOnline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">subscribeToFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    ChatAPI<span class=\"token punctuation\">.</span><span class=\"token function\">unsubscribeFromFriendStatus</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> handleStatusChange<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"gridsome-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>friend<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Ch·ªâ re-subscribe n·∫øu props.friend.id b·ªã thay ƒë·ªïi</span></span></code></pre></div>\n<p>Trong t∆∞∆°ng lai, tham s·ªë th·ª© 2 s·∫Ω ƒë∆∞·ª£c t·ª± ƒë·ªông th√™m v√†o trong l√∫c  build-transform.</p>\n<blockquote>\n<p>L∆∞u √Ω</p>\n<p>N·∫øu s·ª≠ d·ª•ng c√°ch t·ªëi ∆∞u n√†y, ph·∫£i ch·∫Øc ch·∫Øn array ch·ª©a <strong>t·∫•t c·∫£ gi√° tr·ªã b√™n trong c·ªßa component scope (nh∆∞ prop v√† state) n·∫øu thay ƒë·ªïi theo c√°c l·∫ßn render v√† effect c√≥ s·ª≠ d·ª•ng</strong>. N·∫øu kh√¥ng, n·∫øu kh√¥ng n√≥ s·∫Ω tham chi·∫øu t·ªõi gi√° tr·ªã tr∆∞·ªõc ƒë√≥. ƒê·ªçc th√™m <a href=\"http://vi.reactjs.org/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">l√†m vi·ªác v·ªõi function</a> v√† <a href=\"http://vi.reactjs.org/docs/hooks-faq.html#what-can-i-do-if-my-effect-dependencies-change-too-often\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">l√†m g√¨ khi array thay ƒë·ªïi th∆∞·ªùng xuy√™n</a>.</p>\n<p>N·∫øu mu·ªën ch·∫°y 1 effect v√† clean n√≥ 1 l·∫ßn duy nh·∫•t (l√∫c mount v√† unmount), b·∫°n c√≥ th·ªÉ truy·ªÅn v√†o array r·ªóng (<code class=\"language-inline-text\">[]</code>). ƒê·ªìng nghƒ©a v·ªõi vi·ªác b·∫°n b√°o v·ªõi React, effect n√†y kh√¥ng ph·ª• thu·ªôc <em>b·∫•t k·ª≥</em> gi√° tr·ªã n√†o c·ªßa prop ho·∫∑c state, do ƒë√≥ kh√¥ng bao gi·ªù c·∫ßn re-run. N√≥ kh√¥ng ph·∫£i l√† m·ªôt tr∆∞·ªùng h·ª£p  ƒë∆∞·ª£c x·ª≠ l√Ω ƒë·∫∑c bi·ªát -- n√≥ ƒë√∫ng v·ªõi c√°ch so s√°nh array hi·ªán t·∫°i</p>\n<p>N·∫øu truy·ªÅn v√†o array r·ªóng (<code class=\"language-inline-text\">[]</code>), prop v√† state b√™n trong effect s·∫Ω lu√¥n mang gi√° tr·ªã kh·ªüi t·∫°o. Trong khi truy·ªÅn v√†o <code class=\"language-inline-text\">[]</code> n√≥ g·∫ßn gi·ªëng v·ªõi <code class=\"language-inline-text\">componentDidMount</code> v√† <code class=\"language-inline-text\">componentWillUnmount</code>, n√≥ th∆∞·ªùng l√† <a href=\"http://vi.reactjs.org/docs/hooks-faq.html#what-can-i-do-if-my-effect-dependencies-change-too-often\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">gi·∫£i ph√°p</a> <a href=\"http://vi.reactjs.org/docs/hooks-faq.html#is-it-safe-to-omit-functions-from-the-list-of-dependencies\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">t·ªët h∆°n</a> ƒë·ªÉ tr√°nh re-run effect qu√° th∆∞·ªùng xuy√™n. Tuy nhi√™n, ƒë·ª´ng qu√™n React s·∫Ω ch·ªâ ch·∫°y <code class=\"language-inline-text\">useEffect</code> sau khi tr√¨nh duy·ªát paint.</p>\n<p>Ch√∫ng t√¥i khuy·∫øn kh√≠ch s·ª≠ d·ª•ng <a href=\"https://github.com/facebook/react/issues/14920\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-inline-text\">ƒë∆∞a t·∫•t c·∫£ dependency</code></a>, s·ª≠ d·ª•ng  <a href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks#installation\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-inline-text\">eslint-plugin-react-hooks</code></a> package ƒë·ªÉ r√†ng bu·ªôc, v√† th√¥ng b√°o n·∫øu khai b√°o dependency kh√¥ng h·ª£p l·ªá.</p>\n</blockquote>\n<h2 id=\"b∆∞·ªõc-ti·∫øp-theo-next-steps\"><a href=\"#b%C6%B0%E1%BB%9Bc-ti%E1%BA%BFp-theo-next-steps\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>B∆∞·ªõc ti·∫øp theo {#next-steps}</h2>\n<p>Xin ch√∫c m·ª´ng! Trang n√†y kh√¥ng h·ªÅ ng·∫Øn, nh∆∞ng b·∫°n ƒë√£ ƒë·ªçc ƒë∆∞·ª£c ƒë·∫øn ƒë√¢y. Hy v·ªçng c√°c th·∫Øc m·∫Øc c·ªßa b·∫°n v·ªÅ effect ƒë√£ ƒë∆∞·ª£c ph√∫c ƒë√°p. B·∫°n ƒë√£ h·ªçc ƒë∆∞·ª£c State Hook v√† Effect Hook, v√† c√≥ <em>r·∫•t</em> nhi·ªÅu th·ª© b·∫°n c√≥ th·ªÉ l√†m khi s·ª≠ d·ª•ng k·∫øt h·ª£p ch√∫ng.  N√≥ g·∫ßn nh∆∞ gi·∫£i quy·∫øt c√°c v·∫•n ƒë·ªÅ m√† ch·ªâ c√≥ class m·ªõi l√†m ƒë∆∞·ª£c -- c√≤n n·∫øu kh√¥ng b·∫°n c√≥ th·ªÉ t√¨m th·∫•y <a href=\"http://vi.reactjs.org/docs/hooks-reference.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">c√°c Hook m·ªü r·ªông</a>.</p>\n<p>Ch√∫ng ta ƒë√£ tr√¨nh b√†i ƒë·ªông l·ª±c t·∫°o ra Hook <a href=\"http://vi.reactjs.org/docs/hooks-intro.html#motivation\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">·ªü ƒë√¢y</a>. Ch√∫ng ta c≈©ng th·∫•y ƒë∆∞·ª£c c√°ch  effect cleanup v√† tr√°nh tr√πng l·∫∑p trong <code class=\"language-inline-text\">componentDidUpdate</code> v√† <code class=\"language-inline-text\">componentWillUnmount</code>, mang nh·ªØng ƒëo·∫°n code c√≥ li√™n quan l·∫°i g·∫ßn nhau h∆°n, v√† gi√∫p ch√∫ng ta tr√°nh bug. Ch√∫ng ta c≈©ng th·∫•y ƒë∆∞·ª£c c√°ch ch√∫ng ta t√°ch effect theo m·ª•c ƒë√≠ch, c√°i m√† ch√∫ng ta kh√¥ng l√†m ƒë∆∞·ª£c v·ªõi class.</p>\n<p>ƒê·∫øn ƒë√¢y, b·∫°n c√≥ th·ªÉ th·∫Øc m·∫Øc Hook l√†m vi·ªác nh∆∞ th·∫ø n√†o. L√†m c√°ch n√†o <code class=\"language-inline-text\">useState</code> l·∫•y ƒë∆∞·ª£c ƒë√∫ng gi√° tr·ªã gi·ªØa c√°c l·∫ßn render kh√°c nhau? L√†m c√°ch n√†o React \"match\" ƒë∆∞·ª£c effect tr∆∞·ªõc v√† l·∫ßn ƒëang update? <strong>·ªû trang ti·∫øp theo b·∫°n s·∫Ω h·ªçc ƒë∆∞·ª£c <a href=\"http://vi.reactjs.org/docs/hooks-rules.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Quy lu·∫≠t c·ªßa Hook</a> -- m·∫•u ch·ªët l√†m vi·ªác c·ªßa Hook.</strong></p>\n","cover_image":""}},{"node":{"id":"431b04c69be9d0d7ae9bcf9c672a6d4f","title":"C√°ch s·ª≠ d·ª•ng ref trong React","path":"/2019-06-22-su-dung-refs-trong-react/","date":"2019-06-22","timeToRead":4,"desc":"C√¥ng d·ª•ng c·ªßa ref l√† ƒë·ªÉ truy c·∫≠p ƒë·∫øn DOM th·∫≠t trong React, m·ªôt v√†i t√≠nh hu·ªëng s·ª≠ d·ª•ng v√† d√πng ref","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#V%E1%BA%A5n-%C4%91%E1%BB%81-c%E1%BB%A7a-Refs\">V·∫•n ƒë·ªÅ c·ªßa Refs</a></li>\n<li><a href=\"#L%E1%BB%B1a-ch%E1%BB%8Dn-gi%E1%BB%AFa-callback-refs-v%C3%A0-createRef\">L·ª±a ch·ªçn gi·ªØa callback refs v√† <code class=\"language-inline-text\">createRef</code></a></li>\n<li><a href=\"#Truy%E1%BB%81n-Ref-t%E1%BB%AB-cha-xu%E1%BB%91ng-con\">Truy·ªÅn Ref t·ª´ cha xu·ªëng con</a></li>\n<li><a href=\"#useRef-hook\">useRef hook</a></li>\n<li><a href=\"#T%E1%BB%95ng-k%E1%BA%BFt-l%E1%BA%A1i\">T·ªïng k·∫øt l·∫°i</a></li>\n</ul>\n<!-- /TOC -->\n<p>L√† vi·∫øt t·∫Øt cho <code class=\"language-inline-text\">reference</code> n·∫øu b·∫°n c√≥ th·∫Øc m·∫Øc, n√≥ l√† c√°ch m√† React s·∫Ω truy c·∫≠p t·ªõi DOM (DOM th·ª±c, kh√¥ng ph·∫£i DOM ·∫£o). C√≥ nhi·ªÅu l√Ω do m√† ch√∫ng ta mu·ªën truy c·∫≠p t·ªõi DOM, th√≠ d·ª• nh∆∞ set focus v√†o input, hay t√≠nh to√°n k√≠ch th∆∞·ªõc c·ªßa m·ªôt element khi render.</p>\n<h2 id=\"v·∫•n-ƒë·ªÅ-c·ªßa-ref\"><a href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81-c%E1%BB%A7a-ref\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V·∫•n ƒë·ªÅ c·ªßa <code class=\"language-inline-text\">ref</code></h2>\n<p>X·ª≠ l√Ω DOM l√† k·ªπ thu·∫≠t cƒÉn b·∫£n m√† m·ªçi l·∫≠p tr√¨nh vi√™n frontend ƒëi·ªÅu bi·∫øt, tuy nhi√™n khi l√†m theo h∆∞·ªõng React, ch√∫ng ta s·∫Ω √≠t g·∫∑p t√¨nh hu·ªëng ƒë·ª•ng ƒë·∫øn DOM th·∫≠t h∆°n.</p>\n<p>Th·ªùi ƒëi·ªÉm hi·ªán t·∫°i, ch√∫ng ta c√≥ ƒë·∫øn t·∫≠n 4 c√°ch ƒë·ªÉ d√πng ref !!!!</p>\n<p><img src=\"https://www.rd.com/wp-content/uploads/2012/05/sourbaby-760x506.jpg\" alt=\"Th·ªùi ƒëi·ªÉm hi·ªán t·∫°i, ch√∫ng ta c√≥ ƒë·∫øn t·∫≠n 4 c√°ch ƒë·ªÉ d√πng refs \"></p>\n<ul>\n<li>D√πng string (kh√¥ng ƒë∆∞·ª£c khuy·∫øn kh√≠ch) (<code class=\"language-inline-text\">&lt;div ref=\"stringGiday\" /></code>)</li>\n<li>D√πng callback ref (<code class=\"language-inline-text\">&lt;div ref={ref => {this.inputRef = ref }} /></code>)</li>\n<li>D√πng API <code class=\"language-inline-text\">createRef</code></li>\n<li>D√πng hook <code class=\"language-inline-text\">useRef</code></li>\n</ul>\n<h2 id=\"l·ª±a-ch·ªçn-gi·ªØa-callback-ref-v√†-createref\"><a href=\"#l%E1%BB%B1a-ch%E1%BB%8Dn-gi%E1%BB%AFa-callback-ref-v%C3%A0-createref\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>L·ª±a ch·ªçn gi·ªØa callback ref v√† <code class=\"language-inline-text\">createRef</code></h2>\n<p>S·ª≠ d·ª•ng string cho ref ƒë√£ ƒë∆∞·ª£c team React cho v√†o b·∫£o t√†ng, c√¢u h·ªèi c√≤n l·∫°i l√† d√πng callback ref hay <code class=\"language-inline-text\">createRef</code> ƒë√¢y</p>\n<blockquote>\n<p>C√¢u tr·∫£ l·ªùi ng·∫Øn g·ªçn: d√πng <code class=\"language-inline-text\">createRef</code> l√† an to√†n cho m·ªçi tr∆∞·ªùng h·ª£p.</p>\n</blockquote>\n<p>L·∫•y v√≠ d·ª• cho t√¨nh hu·ªëng ph·ªï bi·∫øn: t·ª± ƒë·ªông ƒë·∫∑t set focus cho input</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">SimpleRef</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 1 - ƒê·ªãnh nghƒ©a ref</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 3 - g·ªçi h√†m focus tr√™n ref</span>\n  <span class=\"token function-variable function\">onClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputRef<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> <span class=\"token number\">2</span> <span class=\"token operator\">-</span> g·∫Øn c√°i ref m·ªõi ƒë·ªãnh nghƒ©a cho element <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onClick<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Click ƒë·ªÉ focus<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>N·∫øu s·ª≠ d·ª•ng callback ref th√¨ ƒë√¢y l√† c√°ch l√†m</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">SimpleCallbackRef</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">onClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputRef<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>input ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">ref</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputRef <span class=\"token operator\">=</span> ref<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onClick<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>Click ƒë·ªÉ focus<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√≥ √Ω ki·∫øn th·∫•y vi·∫øt <code class=\"language-inline-text\">ref =></code> <em>n√≥ h∆°i k·ª≥</em>, kh√¥ng minh b·∫°ch, c√°i ref n√†y ·ªü qu·ª∑ qu√°i n√†o sinh ra?</p>\n<p>Khai b√°o ref b·∫±ng inline function nh∆∞ ·ªü tr√™n, n√≥ s·∫Ω g·ªçi 2 l·∫ßn trong qu√° tr√¨nh update: l·∫ßn ƒë·∫ßu ti√™n v·ªõi gi√° tr·ªã <code class=\"language-inline-text\">null</code>, l·∫ßn th·ª© hai l√† khi c√≥ DOM element.</p>\n<p>B·ªüi v√¨ m·ªói l·∫ßn render l√† m·ªôt inline function kh√°c nhau, React s·∫Ω ph·∫£i x√≥a gi√° tr·ªã ref c≈© r·ªìi setup ref m·ªõi</p>\n<p>Nghƒ©a l√† vi·∫øt nh∆∞ sau s·∫Ω b·ªã bug, ref l√∫c ƒë·∫ßu ƒëang null n√™n kh√¥ng c√≥ g·ªçi focus ƒë∆∞·ª£c</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>input ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">ref</span> <span class=\"token operator\">=></span> ref<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>Ch·∫Øc t·ªõi ƒë√¢y anh em ƒë√£ th·∫•y kh√¥ng c√≤n mu·ªën d√πng callback ref.</p>\n<p>Tuy nhi√™n kh√¥ng c√≥ nghƒ©a l√† callback ref kh√¥ng c√≤n ƒë·∫•t d·ª•ng v√µ, v·ªõi <code class=\"language-inline-text\">createRef</code> anh em lu√¥n ph·∫£i t·∫°o-r·ªìi-g√°n. N·∫øu t√¨nh hu·ªëng ch√∫ng ta ph·∫£i t·∫°o m·ªôt danh s√°ch element ƒë·ªông</p>\n<p>Nh∆∞ v√≠ d·ª• n√†y, s·∫Ω l√†m nh∆∞ th·∫ø n√†y ph·∫£i kh√¥ng</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">DynamicRefs</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">tasks</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Task 1\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">\"red\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Task 2\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">\"green\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Task 3\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yellow\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Task 4\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gray\"</span> <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refsArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n                <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>tasks<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">task<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n                    <span class=\"token operator\">&lt;</span>div\n                        key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span>\n                        ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">ref</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refArray<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> ref<span class=\"token punctuation\">;</span>\n                        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                    <span class=\"token operator\">></span>\n                        <span class=\"token punctuation\">{</span>task<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"truy·ªÅn-ref-t·ª´-cha-xu·ªëng-con\"><a href=\"#truy%E1%BB%81n-ref-t%E1%BB%AB-cha-xu%E1%BB%91ng-con\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Truy·ªÅn Ref t·ª´ cha xu·ªëng con</h2>\n<p>V·ªõi function component, x√©t ƒëo·∫°n code sau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">CustomInput</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>input <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>R·ªìi ch√∫ng ta c√≥ 1 component kh√°c, d√πng ref cho c√°i <code class=\"language-inline-text\">CustomInput</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">SimpleRef</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>CustomInput ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>textInput<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒêo·∫°n code tr√™n h·ªïng ch·∫°y ƒë∆∞·ª£c. Ch√∫ng ta c·∫ßn d√πng ƒë·∫øn <code class=\"language-inline-text\">forwardRef</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// B·∫ÆT BU·ªòC ph·∫£i l√† function component</span>\n<span class=\"token keyword\">const</span> CustomInput <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">forwardRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token punctuation\">,</span> ref</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>input ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>ref<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SimpleRefForwarding</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputRef <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function-variable function\">onClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// l∆∞u √Ω c√°ch ch√∫ng ta g√†n m·ªôt ref v√†o custom component</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>CustomInput ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inputRef<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onClick<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          Click to Focus\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"useref-hook\"><a href=\"#useref-hook\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>useRef hook</h2>\n<p>N·∫øu l√† function component, nh∆∞ ƒë√£ bi·∫øt, n·∫øu ch√∫ng ta d√πng <code class=\"language-inline-text\">createRef</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">FunctionComponentWithRef</span>  <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> textInput <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>textInput<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> textInput<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            Click to Focus\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>M·ªñi l·∫ßn return l√† m·ªói l·∫ßn t·∫°o ref m·ªõi, nh∆∞ v·∫≠y <em>kh√¥ng cool</em>, s·ª≠ d·ª•ng hook <code class=\"language-inline-text\">useRef</code> ch√∫ng ta s·∫Ω c√≥ m·ªôt c√°i ref x√†i ƒë·ªùi n√†y qua ƒë·ªùi kia d√π bao nhi·ªÅu l·∫ßn update, cho ƒë·∫øn khi n√≥ ra ƒëi (Unmount)</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">FunctionComponentWithRef</span>  <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> textInput <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>textInput<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> textInput<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            Click to Focus\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"t·ªïng-k·∫øt-l·∫°i\"><a href=\"#t%E1%BB%95ng-k%E1%BA%BFt-l%E1%BA%A1i\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·ªïng k·∫øt l·∫°i</h2>\n<ul>\n<li>ƒê·ª´ng x√†i ref nhi·ªÅu qu√°</li>\n<li>ƒê·ª´ng bao gi·ªù ƒë·ª•ng v√¥ string ref</li>\n<li>D√πng callback ref khi anh em ƒë·ª•ng ƒë·∫øn v·∫•n ƒë·ªÅ t·∫°o element ƒë·ªông</li>\n<li>N·∫øu l√† class component, d√πng <code class=\"language-inline-text\">createRef</code> an to√†n nh·∫•t</li>\n<li>L√† function component, d√πng <code class=\"language-inline-text\">useRef</code> cho h·ª£p xu th·∫ø</li>\n<li>D√πng <code class=\"language-inline-text\">forwardRef</code> khi component cha c·∫ßn truy c·∫≠p ƒë·∫øn component con</li>\n</ul>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://rafaelquintanilha.com/the-complete-guide-to-react-refs\">The Complete Guide to React Refs</a></p>\n","cover_image":""}},{"node":{"id":"1231bcbf637198f90c7b6d52a56a2518","title":"3 b∆∞·ªõc t·ªëi ∆∞u hi·ªáu nƒÉng React App b·∫±ng c√°c API m·ªõi c·ªßa React","path":"/2019-06-17-huong-dan-toi-uu-hieu-nang-react-app/","date":"2019-06-17","timeToRead":3,"desc":"B√†i vi·∫øt h∆∞·ªõng d·∫´n t·ªëi ∆∞u hi·ªáu nƒÉng b·∫±ng memo, useMemo, useCallback","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#Reactmemo\">React.memo</a></li>\n<li><a href=\"#useMemo\">useMemo</a></li>\n<li><a href=\"#useCallback\">useCallback</a></li>\n</ul>\n<!-- /TOC -->\n<p>Khi s·ª≠ d·ª•ng function component, React cung c·∫•p 3 ph∆∞∆°ng th·ª©c ƒë·ªÉ t·ªëi ∆∞u: <code class=\"language-inline-text\">React.memo</code>, <code class=\"language-inline-text\">useMemo</code>, v√† <code class=\"language-inline-text\">useCallback</code>, ch√∫ng ta c√πng ƒëi·ªÉm qua 3 th·∫±ng n√†y</p>\n<p>X√©t v√≠ d·ª•</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ListPage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> title <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Header title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>List listItems<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Component nh∆∞ tr√™n (<code class=\"language-inline-text\">&lt;ListPage /></code>), khi nh·∫≠n m·ªôt <code class=\"language-inline-text\">data</code> m·ªõi, t·∫•t c·∫£ component con b√™n trong l√† <code class=\"language-inline-text\">Header</code> v√† <code class=\"language-inline-text\">List</code> s·∫Ω re-render, m·∫∑c d√π c√°i <code class=\"language-inline-text\">title</code> kh√¥ng h·ªÅ thay ƒë·ªïi. N·∫øu <code class=\"language-inline-text\">Header</code> kh√¥ng t·ªën qu√° nhi·ªÅu th·ªùi gian ƒë·ªÉ render th√¨ ko c√≥ v·∫•n ƒë·ªÅ. Ng∆∞·ª£c l·∫°i dƒ© nhi√™n l√† n·∫øu render <code class=\"language-inline-text\">Header</code> t·ªën r·∫•t nhi·ªÅu th·ªùi gian, ch√∫ng ta ph·∫£i <strong>x√¢y l·∫°i</strong> ƒë·ªÉ t·ªëi ∆∞u h∆°n.</p>\n<h2 id=\"reactmemo\"><a href=\"#reactmemo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>React.memo</h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> MyComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">MyComponent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* render using props */</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-inline-text\">React.memo</code> l√† m·ªôt HOC, <a href=\"https://luubinhan.github.io/blog/2018-11-04-gioi-thieu-react-memo-moi-trong-react-16\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ƒë·ªçc l·∫°i b√†i n√†y</a>, n√≥ s·∫Ω <strong>nh·ªõ</strong> k·∫øt qu·∫£ render c·ªßa component. N·∫øu component tr·∫£ v·ªÅ m·ªôt output gi·ªëng h·ªát cho c√πng m·ªôt prop, ƒë∆∞a n√≥ v√†o <code class=\"language-inline-text\">React.memo</code> s·∫Ω ti·∫øt ki·ªám t√≠ th·ªùi gian.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Header</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> title <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Header<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Wrap l·∫°i trong <code class=\"language-inline-text\">React.memo</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Header</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> title <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>Header<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"usememo\"><a href=\"#usememo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>useMemo</h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> memoizedValue <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">computeExpensiveValue</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>C≈©ng t∆∞∆°ng t·ª± n√≥ s·∫Ω nh·ªõ k·∫øt qu·∫£ tr·∫£ v·ªÅ, tuy nhi√™n n√≥ s·∫Ω c√≥ th√™m ph·∫ßn g·ªçi l√† <code class=\"language-inline-text\">array dependencies</code>, l√† m·ªôt danh s√°ch c√°c <strong>th·∫±ng</strong> m√† n√≥ ph·ª• thu·ªôc, n·∫øu gi√° tr·ªã ph·ª• thu·ªôc thay ƒë·ªïi n√≥ m·ªõi r·ªçi render l·∫°i, kh√¥ng th·ªÉ tr·∫£ th·∫≥ng k·∫øt qu·∫£ l·∫ßn tr∆∞·ªõc</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> widgetList <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> \n        widgets<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">w</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token operator\">...</span>w<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">totalPrice</span><span class=\"token operator\">:</span> <span class=\"token function\">someComplexFunction</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">.</span>price<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">estimatedDeliveryDate</span><span class=\"token operator\">:</span> <span class=\"token function\">someOtherComplexFunction</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">.</span>warehouse<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>widgets<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Trong v√≠ d·ª• tr√™n, 1 component nh·∫≠n m·ªôt danh s√°ch c√°c widget, c√°c widget n√†y tr∆∞·ªõc khi truy·ªÅn v√†o s·∫Ω ƒë∆∞·ª£c th√™m v√†o 2 gi√° tr·ªã l√† <em>total price</em> v√† <em>delivery date</em>. N·∫øu gi√° tr·ªã c√°c widget kh√¥ng thay ƒë·ªïi khi render l·∫°i component, th√¨ kh√¥ng c·∫ßn thi·∫øt ph·∫£i ch·∫°y qua c√°c h√†m <code class=\"language-inline-text\">someComplexFunction</code>, <code class=\"language-inline-text\">someOtherComplexFunction</code>. S·ª≠ d·ª•ng <code class=\"language-inline-text\">useMemo</code> ƒë·ªÉ ghi nh·ªõ k·∫øt qu·∫£ v√† b·ªè qua trong tr∆∞·ªùng h·ª£p ƒë√≥.</p>\n<h2 id=\"usecallback\"><a href=\"#usecallback\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>useCallback</h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> memoizedCallback <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>M·ª•c ƒë√≠ch ƒë·ªÉ ch·∫∑n c√°c l·∫ßn render kh√¥ng c·∫ßn thi·∫øt gi·ªØa component cha v√† con</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Parent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showExtraDetails<span class=\"token punctuation\">,</span> setShowExtraDetails<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Child onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token function\">showData</span><span class=\"token punctuation\">(</span>showExtraDetails<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>1 component nh∆∞ v·∫≠y s·∫Ω re-render c·∫£ cha v√† con c√πng l√∫c, th·∫≠m ch√≠ component con c√≥ l√† <code class=\"language-inline-text\">PureComponent</code> ƒë∆∞·ª£c wrap b√™n trong <code class=\"language-inline-text\">React.memo</code> ƒëi n·ªØa, b·ªüi v√¨ <code class=\"language-inline-text\">onClick</code> s·∫Ω kh√°c nhau tr√™n m·ªói l·∫ßn render. S·ª≠ d·ª•ng <code class=\"language-inline-text\">useCallback</code> ch√∫ng ta vi·∫øt l·∫°i nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Parent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showExtraDetails<span class=\"token punctuation\">,</span> setShowExtraDetails<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> handleClick <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">showData</span><span class=\"token punctuation\">(</span>showExtraDetails<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span>showExtraDetails<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Child onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Nh∆∞ v·∫≠y h√†m <code class=\"language-inline-text\">handleClick</code> s·∫Ω gi·ªëng nhau cho c√°c l·∫ßn render kh√°c nhau, n√≥ ch·ªâ kh√°c khi <code class=\"language-inline-text\">showExtraDetails</code> thay ƒë·ªïi.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://headway.io/blog/react-optimize-components-memo-usememo-usecallback\">React: Optimize Components with React.memo, useMemo, and useCallback</a></p>\n","cover_image":""}},{"node":{"id":"3a6380cc71f067cbeb40825b4adb02e4","title":"Gi·∫£i th√≠ch Flux Pattern theo phong c√°ch John Wick","path":"/2019-05-28-giai-thich-pattern-flux-trong-react/","date":"2019-05-28","timeToRead":6,"desc":"ƒêi·ªÉm l·∫°i c√°c kh√°i ni·ªám trong Flux action, dispatch, store, ƒëi·ªÅu ki·ªán ti√™n quy·∫øt ƒë·ªÅ ƒë·ªçc b√†i n√†y l√† n√™n xem l·∫°i John Wick","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81\">V·∫•n ƒë·ªÅ</a></li>\n<li><a href=\"#gi%E1%BA%A3i-ph%C3%A1p-c%E1%BB%A7a-facebook-lu%E1%BB%93ng-d%E1%BB%AF-li%E1%BB%87u-m%E1%BB%99t-chi%E1%BB%81u\">Gi·∫£i ph√°p c·ªßa Facebook: lu·ªìng d·ªØ li·ªáu m·ªôt chi·ªÅu</a></li>\n<li>\n<p><a href=\"#gi%E1%BB%9Bi-thi%E1%BB%87u-c%C3%A1c-vai-ch%C3%ADnh\">Gi·ªõi thi·ªáu c√°c vai ch√≠nh</a></p>\n<ul>\n<li><a href=\"#b%E1%BB%8Dn-action-creator\">B·ªçn action creator</a></li>\n<li><a href=\"#b%E1%BB%8Dn-dispatcher\">B·ªçn dispatcher</a></li>\n<li><a href=\"#b%E1%BB%8Dn-%C4%91%E1%BA%A7u-c%E1%BA%A7u-store\">B·ªçn ƒë·∫ßu c·∫ßu Store</a></li>\n<li><a href=\"#b%E1%BB%8Dn-view\">B·ªçn View</a></li>\n</ul>\n</li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"v·∫•n-ƒë·ªÅ\"><a href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V·∫•n ƒë·ªÅ</h2>\n<p>Tr∆∞·ªõc ti√™n ch√∫ng ta c·∫ßn bi·∫øt Flux gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ g√¨. Flux l√† m·ªôt pattern ƒë·ªÉ x·ª≠ l√Ω lu·ªìng d·ªØ li·ªáu trong ·ª©ng d·ª•ng. Flux v√† React ƒë∆∞·ª£c sinh ra v√† l·ªõn l√™n d∆∞·ªõi ng√¥i nh√† Facebook. 2 ƒë·ª©a ch√∫ng n√≥ <strong>th∆∞·ªùng</strong> ƒëi c√πng nhau, ch·ª© kh√¥ng ph·∫£i <strong>d√≠nh</strong> v√†o nhau nh∆∞ h√¨nh v·ªõi b√≥ng</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*EfeNEshl8-uwZSuUw275Ag.png\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p>M·ªôt trong nh·ªØng v√≠ d·ª• ph·ªï bi·∫øn khi n√≥i ƒë·∫øn Flux l√† v√≤ng l·∫∑p c·ªßa t√≠nh nƒÉng notification. Khi ƒëƒÉng nh·∫≠p v√†o Facebook, b·∫°n th·∫•y m·ªôt th√¥ng b√°o m·ªõi tr√™n icon c√°i chu√¥ng huy·ªÅn di·ªáu, m·ªôt khi click v√†o c√°i chu√¥ng n√†y, to√†n b·ªô th√¥ng b√°o s·∫Ω ko c√≤n n·∫±m trong <strong>new message</strong> n·ªØa. M·ªôt v√†i ph√∫t sau, khi nh·∫≠n ƒë∆∞·ª£c th√¥ng b√°o m·ªõi, c√°i chu√¥ng l·∫°i <strong>rung l√™n</strong>, b√°o b·∫°n bi·∫øt c√≥ th√¥ng b√°o m·ªõi, v√† c·ª© th·∫ø, v√≤ng l·∫∑p c·ª© ti·∫øp t·ª•c.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*4xc1FzIHWiyAvb1iAQKSqQ.png\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p>V·ªõi ki·ªÉu thi·∫øt k·∫ø Model-View</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*OcTeAqv8AU_z-O2HuucmeA.png\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p>C√°c model s·∫Ω <em>n·∫Øm gi·ªØ</em> d·ªØ li·ªáu v√† truy·ªÅn d·ªØ li·ªáu n√†y xu·ªëng c√°c c·ª•c view -> n∆°i s·∫Ω render, hi·ªÉn th·ªã d·ªØ li·ªáu n√†y.</p>\n<p>User t∆∞∆°ng t√°c th√¥ng qua view, view ƒë√¥i l√∫c s·∫Ω c·∫≠p nh·∫≠p l·∫°i d·ªØ li·ªáu c·ªßa model, v√† ƒë√¥i khi model n√†y c·∫ßn thay ƒë·ªïi d·ªØ li·ªáu tr√™n model kh√°c. H∆°n n·ªØa, nhi·ªÅu khi m·ªôt thay ƒë·ªïi c·ªßa user k√©o theo m·ªôt chu·ªói c√°c thay ƒë·ªïi kh√°c, c√≥ khi n√≥ l√† m·ªôt async. T∆∞·ªüng t∆∞·ª£ng nh∆∞ ƒë√°nh tr√°i banh b√†n, b·∫°n ko th·ªÉ bi·∫øt ƒë∆∞·ª£c tr√°i banh n√≥ s·∫Ω ƒë·∫≠p v√†o ƒë√¢u h·∫øt.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/400/1*7myoHOaUyFEmPC-dj61CKw.png\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p>Khi ·∫•y b·∫°n s·∫Ω kh√¥ng bi·∫øt ƒë∆∞·ª£c d·ªØ li·ªáu b·ªã <strong>r∆°i r·ªõt</strong> ·ªü ƒë√¢u.</p>\n<h2 id=\"gi·∫£i-ph√°p-c·ªßa-facebook-lu·ªìng-d·ªØ-li·ªáu-m·ªôt-chi·ªÅu\"><a href=\"#gi%E1%BA%A3i-ph%C3%A1p-c%E1%BB%A7a-facebook-lu%E1%BB%93ng-d%E1%BB%AF-li%E1%BB%87u-m%E1%BB%99t-chi%E1%BB%81u\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Gi·∫£i ph√°p c·ªßa Facebook: lu·ªìng d·ªØ li·ªáu m·ªôt chi·ªÅu</h2>\n<p>ƒê·ªôi ng≈© Facebook gi·∫£i quy·∫øt b·∫±ng m·ªôt ki·∫øn tr√∫c kh√°c, <strong>lu·ªìng d·ªØ li·ªáu s·∫Ω ƒëi m·ªôt chi·ªÅu duy nh·∫•t</strong>, m·ªôt khi c·∫ßn th√™m d·ªØ li·ªáu m·ªõi, lu·ªìng l·∫°i ƒëi t·ª´ ƒëi·ªÉm xu·∫•t ph√°t. V√† h·ªç g·ªçi ki·∫øn tr√∫c ƒë√≥ l√† <strong>Flux</strong></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*lZM0yU9ExEMd7DggVxXkxA.png\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p>Nh√¨n v√†o c√°i h√¨nh tr√™n, b·∫°n s·∫Ω kh√¥ng th·ªÉ c·∫£m ƒë∆∞·ª£c c·ªßa ki·∫øn tr√∫c n√†y ngay v√† lu√¥n, kh√¥ng ƒë·ªçc t√†i li·ªáu v·ªÅ Flux, c√≥ th·ªÉ b·∫°n s·∫Ω ch·∫≥ng h·ª©ng th√∫ v√¨ v·ªõi n√≥.</p>\n<p>C√πng ƒëi chi ti·∫øt t·ª´ng kh√°i ni·ªám m·ªôt. H√¨nh dung t·ªï ch·ª©c <strong>h·ªôi b√†n ƒë√†o</strong> trong John Wick, v·ªõi nh·ªØng nh√≥m nh√¢n v·∫≠t kh√°c nhau, n·∫Øm gi·ªØ nh·ªØng vai tr√≤ kh√°c nhau.</p>\n<h2 id=\"gi·ªõi-thi·ªáu-c√°c-vai-ch√≠nh\"><a href=\"#gi%E1%BB%9Bi-thi%E1%BB%87u-c%C3%A1c-vai-ch%C3%ADnh\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Gi·ªõi thi·ªáu c√°c vai ch√≠nh</h2>\n<h3 id=\"b·ªçn-action-creator\"><a href=\"#b%E1%BB%8Dn-action-creator\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>B·ªçn action creator</h3>\n<p><img src=\"https://i.imgur.com/e2UBmM4.png\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p>Nhi·ªám v·ª• c·ªßa b·ªçn n√†y l√† t·∫°o ra action, t·∫•t c·∫£ nh·ªØng thay ƒë·ªïi, t∆∞∆°ng t√°c ph·∫£i t·ªõi g·∫∑p b·ªçn n√†y. N√≥ gi·ªëng nh∆∞ b·ªçn ng·ªìi ƒëi·ªÅu h√†nh ƒëi·ªán tho·∫°i trong phim John Wick, nh·ªØng ƒë·ª©a kh√°c t·ªõi ƒë√¢y, ph√°t ƒëi 1 th√¥ng ƒëi·ªáp, action creator s·∫Ω \"ƒë·ªãnh d·∫°ng\" l·∫°i th√¥ng ƒëi·ªáp ƒë√≥ b·∫±ng m·ªôt m·∫≠t m√£ m√† t·∫•t c√°c nh·ªØng ƒë·ª©a kh√°c n·∫±m trong h·ªá th·ªëng hi·ªÉu ƒë∆∞·ª£c.</p>\n<p><img src=\"https://i.imgur.com/lsLrRSV.png\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p>Th√¥ng ƒëi·ªáp ƒë∆∞·ª£c g·ª≠i ƒëi bao g·ªìm: ki·ªÉu th√¥ng ƒëi·ªáp (type) v√† n·ªôi dung ch√≠nh c·ªßa th√¥ng ƒëi·ªáp (payload). Trong ƒë√≥ ki·ªÉu th√¥ng ƒëi·ªáp l√† m·ªôt h·∫±ng s·ªë ƒë√£ ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a tr∆∞·ªõc ƒë√≥.</p>\n<p><strong>T√°c d·ª•ng ph·ª•</strong> c·ªßa m·ªôt h·ªá th·ªëng m√† to√†n b·ªô ki·ªÉu th√¥ng ƒëi·ªáp ƒë√£ ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a s·∫µn, <strong>l√≠nh m·ªõi</strong> v√†o ch·ªâ c·∫ßn m·ªü file n√†y ra l√† bi·∫øt ƒë∆∞·ª£c ·ª©ng d·ª•ng ƒëang l√†m, s·∫Ω c√≥ nh·ªØng t√¨nh hu·ªëng n√†o s·∫Ω l√†m thay ƒë·ªïi tr·∫°ng th√°i d·ªØ li·ªáu.</p>\n<h3 id=\"b·ªçn-dispatcher\"><a href=\"#b%E1%BB%8Dn-dispatcher\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>B·ªçn dispatcher</h3>\n<p><img src=\"https://i.imgur.com/nnQAAj6.png\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p>Trong John Wick, n√≥i chung c√°c b·∫°n n√™n xem John Wick tr∆∞·ªõc khi ƒë·ªçc b√†i n√†y ƒë√≥, b·∫°n tr·ª±c ƒëi·ªán tho·∫°i nh·∫≠n tin nh·∫Øn, format tin nh·∫Øn xong, b·∫°n s·∫Ω <strong>h√©t</strong> l√™n cho c√°c b·∫°n ƒë·ª©ng tr·ª±c ch·ªï t·ªïng ƒë√†i ƒëi·ªán tho·∫°i. B·∫°n <strong>tr·ª±c ƒëi·ªán tho·∫°i</strong> n√†y bi·∫øt danh s√°ch c√°c <strong>ƒë·∫ßu c·∫ßu</strong> (store) c·∫ßn g·ª≠i th√¥ng b√°o ƒë·∫øn.</p>\n<p>Qu√° tr√¨nh n√†y ƒë∆∞·ª£c th·ª±c hi·ªán m·ªôt c√°ch <strong>tu·∫ßn t·ª±</strong>, kh√¥ng chen l·∫•n, kh√¥ng xen ngang, n·∫øu m·ªói ƒë·∫ßu c·∫ßu c·∫ßn r√†ng bu·ªôc v·ªÅ th·ª© t·ª± nh·∫≠n th√¥ng tin, ch√∫ng ta c√≥ ƒë·ªÉ anh dispatcher n√†y qu·∫£n l√Ω.</p>\n<p>Anh Dispatcher trong Flux s·∫Ω kh√°c v·ªõi dispatcher trong c√°c ki·∫øn tr√∫c kh√°c. Th√¥ng tin lu√¥n ƒë∆∞·ª£c g·ª≠i ƒë·∫øn h·∫øt c√°c ƒë·∫ßu c·∫ßu b·∫•t k·ªÉ n√≥ l√† th√¥ng tin g√¨. Nghƒ©a l√† m·ªói ƒë·∫ßu c·∫ßu kh√¥ng ch·ªâ ƒëƒÉng k√Ω m·ªôt k√™nh th√¥ng tin nh·∫•t ƒë·ªãnh, n√≥ l·∫Øng nghe to√†n b·ªô th√¥ng tin ƒë∆∞·ª£c g·ª≠i ƒëi, chuy·ªán n√≥ quan t√¢m v√† x·ª≠ l√Ω tr√™n t·ª´ng th√¥ng tin n√†o l√† n√≥ t·ª± quy·∫øt ƒë·ªãnh, gi·ªëng nh∆∞ ch√∫ Bowery King nh·∫≠n ƒë∆∞·ª£c y√™u c·∫ßu truy s√°t John Wick, nh∆∞ng anh nh·∫≠n tin r·ªìi ko l√†m g√¨ c·∫£.</p>\n<h3 id=\"b·ªçn-ƒë·∫ßu-c·∫ßu-store\"><a href=\"#b%E1%BB%8Dn-%C4%91%E1%BA%A7u-c%E1%BA%A7u-store\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>B·ªçn ƒë·∫ßu c·∫ßu Store</h3>\n<p>G·ªçi l√† ƒë·∫ßu c·∫ßu th√¨ c≈©ng ch∆∞a ƒë·∫ßy ƒë·ªß, ngo√†i l√† n∆°i ti·∫øp nh·∫≠n v√† th·ª±c th√¥ng tin, n√≥ c√≤n l√† n∆°i ch·ª©a to√†n b·ªô d·ªØ li·ªáu c·ªßa ·ª©ng d·ª•ng, ngu·ªìn ti·ªÅn c·ªßa 1 t·ªï ch·ª©c, m·ªçi lu·∫≠t l·ªá, logic c·ªßa d·ªØ li·ªáu s·∫Ω n·∫±m ·ªü ƒë√¢y.</p>\n<p><img src=\"https://media.comicbook.com/2019/05/john-wick-bowery-king-1171365-1280x0.jpeg\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p>Anh Store n√†y nh∆∞ ch√∫ <a href=\"https://www.imdb.com/title/tt6146586/characters/nm0000401?ref_=tt_cl_t4\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Bowery King</a>, khi mu·ªën anh ·∫•y l√†m g√¨ ƒë√≥, chuy·ªÉn ti·ªÅn, nh·∫≠n ti·ªÅn, ƒë√≥ng ti·ªÅn th√¨ b·∫°n bu·ªôc ph·∫£i l√†m ƒë√∫ng quy tr√¨nh t·ª´ tr√™n xu·ªëng d∆∞·ªõi action creator -> dispatcher</p>\n<h3 id=\"b·ªçn-view\"><a href=\"#b%E1%BB%8Dn-view\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>B·ªçn View</h3>\n<p><img src=\"https://m.media-amazon.com/images/M/MV5BNTQ2MWYyYTMtOTg3NC00MjA1LWFmMTUtOWRjMWViMWIxZTBmXkEyXkFqcGdeQXVyNTc5OTMwOTQ@._V1_SY1000_CR0,0,1499,1000_AL_.jpg\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p>Nh·∫≠n d·ªØ li·ªáu, thay ƒë·ªïi th√¥ng tin hi·ªÉn th·ªã, ti·∫øp nh·∫≠n d·ªØ li·ªáu t·ª´ user, ƒë∆∞a ng∆∞·ª£c l√™n l·∫°i t·ªï ch·ª©c l√† c√¥ng d·ª•ng to√†n b·ªô c·ªßa b·ªçn n√†y.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*MY5xNk_JeKvGsGdywYD4EA.png\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p>T·ªïng h·ª£p l·∫°i ch√∫ng ta c√≥ s∆° ƒë·ªì v·∫≠n h√†nh c·ªßa t·ªï ch·ª©c n√†y nh∆∞ sau</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*GHrusKRFhQ0Y6rrwjqI6QQ.png\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*66hoDpUhczSXrgH2cUUasw.png\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p>Trong h√¨nh minh h·ªça tr√™n, c√≤n m·ªôt ƒë·ª©a n·ªØa ƒë·ª©ng gi·ªØa View v√† Store, ƒë∆∞·ª£c g·ªçi l√† controller view, m·ªôt d·∫°ng c·ªßa <strong>ng∆∞·ªùi ƒë∆∞a tin</strong>, n√≥ s·∫Ω nh·∫≠n th√¥ng b√°o t·ª´ ƒë·∫ßu c·∫ßu store khi c√≥ d·ªØ li·ªáu thay ƒë·ªïi, r·ªìi m·ªõi ƒë∆∞a xu·ªëng view</p>\n<p>Khi user g·ª≠i ƒëi m·ªôt th√¥ng b√°o ƒë·∫øn View</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*SusQ7Aip2fSWg6raQtPSnA.png\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p>Th√¥ng tin ƒë∆∞·ª£c g·ª≠i l·∫°i action creator</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*dkm9qsWuD9DtXzH-u-DjJQ.png\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*RLrImTDeArSMoA4kZsajLQ.png\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*fWBaUg9-_1-V5M2YQBWhWg.png\" alt=\"Gi·∫£i th√≠ch Flux pattern\"></p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://code-cartoons.com/a-cartoon-guide-to-flux-6157355ab207\">A cartoon guide to Flux\n</a></p>\n","cover_image":""}},{"node":{"id":"8a96e1bde836a981c3694b7c5bb64b27","title":"8 th·ªß thu·∫≠t khi l√†m vi·ªác v·ªõi Object s·ª≠ d·ª•ng resting v√† spreading","path":"/2019-03-23-thu-thuat-lam-viec-voi-object/","date":"2019-03-23","timeToRead":3,"desc":"Nh·ªØng ƒëo·∫°n code b·ªè t√∫i hay x√†i nh·∫•t khi ƒë·ª•ng t·ªõi object","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#merge-object\">Merge object</a></li>\n<li><a href=\"#th%C3%AAm-property\">Th√™m property</a></li>\n<li><a href=\"#th%C3%AAm-property-khi-th%C3%B5a-%C4%91i%E1%BB%81u-ki%E1%BB%87n\">Th√™m property khi th√µa ƒëi·ªÅu ki·ªán</a></li>\n<li><a href=\"#x%C3%B3a-property-kh%E1%BB%8Fi-object\">X√≥a property kh·ªèi object</a></li>\n<li><a href=\"#x%C3%B3a-property-v%E1%BB%9Bi-key-ch%E1%BB%89-%C4%91%E1%BB%8Bnh\">X√≥a property v·ªõi key ch·ªâ ƒë·ªãnh</a></li>\n<li><a href=\"#s%E1%BA%AFp-x%E1%BA%BFp-property\">S·∫Øp x·∫øp property</a></li>\n<li><a href=\"#property-m%E1%BA%B7c-%C4%91%E1%BB%8Bnh\">Property m·∫∑c ƒë·ªãnh</a></li>\n<li><a href=\"#%C4%91%E1%BB%95i-t%C3%AAn-property\">ƒê·ªïi t√™n property</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"merge-object\"><a href=\"#merge-object\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Merge object</h2>\n<p><code class=\"language-inline-text\">part1</code> v√† <code class=\"language-inline-text\">part2</code> s·∫Ω ƒë∆∞·ª£c merge v√†o <code class=\"language-inline-text\">user1</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> part1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'An Luu'</span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> part2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">password</span><span class=\"token operator\">:</span> <span class=\"token string\">'Password!'</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> user1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>part1<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>part2 <span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//=> { id: 100, name: 'An Luu', password: 'Password!' }</span></code></pre></div>\n<h2 id=\"th√™m-property\"><a href=\"#th%C3%AAm-property\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Th√™m property</h2>\n<p>Clone m·ªôt object ƒë·ªìng th·ªùi th√™m m·ªôt s·ªë property m·ªõi v√†o object m·ªõi clone</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'An Luu'</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> userWithPass <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>user<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">password</span><span class=\"token operator\">:</span> <span class=\"token string\">'Password!'</span> <span class=\"token punctuation\">}</span>\n\nuser <span class=\"token comment\">//=> { id: 100, name: 'An Luu' }</span>\nuserWithPass <span class=\"token comment\">//=> { id: 100, name: 'An Luu', password: 'Password!' }</span></code></pre></div>\n<h2 id=\"th√™m-property-khi-th√µa-ƒëi·ªÅu-ki·ªán\"><a href=\"#th%C3%AAm-property-khi-th%C3%B5a-%C4%91i%E1%BB%81u-ki%E1%BB%87n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Th√™m property khi th√µa ƒëi·ªÅu ki·ªán</h2>\n<p>Tr∆∞·ªùng h·ª£p n√†y hay d√πng nh·∫•t l√† l√∫c ch√∫ng ta truy·ªÅn l√™n API m·ªôt object, n·∫øu th√µa ƒëi·ªÅu ki·ªán, s·∫Ω th√™m m·ªôt s·ªë property v√†o trong object</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'An Luu'</span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> password <span class=\"token operator\">=</span> <span class=\"token string\">'Password!'</span>\n<span class=\"token keyword\">const</span> userWithPassword <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>user<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span><span class=\"token punctuation\">(</span>password <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">{</span> password <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\nuserWithPassword <span class=\"token comment\">//=> { id: 100, name: 'An Luu', password: 'Password!' }</span></code></pre></div>\n<h2 id=\"x√≥a-property-kh·ªèi-object\"><a href=\"#x%C3%B3a-property-kh%E1%BB%8Fi-object\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>X√≥a property kh·ªèi object</h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// h√†m n√†y s·∫Ω tr·∫£ v·ªÅ object m·ªõi ko bao g·ªìm password</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">noPassword</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> password<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>rest <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> rest\n\n<span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'An Luu'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">password</span><span class=\"token operator\">:</span> <span class=\"token string\">'Password!'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">noPassword</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span> <span class=\"token comment\">//=> { id: 100, name: 'An Luu' }</span></code></pre></div>\n<h2 id=\"x√≥a-property-v·ªõi-key-ch·ªâ-ƒë·ªãnh\"><a href=\"#x%C3%B3a-property-v%E1%BB%9Bi-key-ch%E1%BB%89-%C4%91%E1%BB%8Bnh\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>X√≥a property v·ªõi key ch·ªâ ƒë·ªãnh</h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> user1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'An Luu'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">password</span><span class=\"token operator\">:</span> <span class=\"token string\">'Password!'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">removeProperty</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">prop</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span>prop<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> _<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>rest <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> rest\n<span class=\"token comment\">//                     ----       ------</span>\n<span class=\"token comment\">//                          \\   /</span>\n<span class=\"token comment\">//                dynamic destructuring</span>\n\n<span class=\"token keyword\">const</span> removePassword <span class=\"token operator\">=</span> <span class=\"token function\">removeProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">'password'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> removeId <span class=\"token operator\">=</span> <span class=\"token function\">removeProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">removePassword</span><span class=\"token punctuation\">(</span>user1<span class=\"token punctuation\">)</span> <span class=\"token comment\">//=> { id: 100, name: 'An Luu' }</span>\n<span class=\"token function\">removeId</span><span class=\"token punctuation\">(</span>user1<span class=\"token punctuation\">)</span> <span class=\"token comment\">//=> { name: 'An Luu', password: 'Password!' }</span></code></pre></div>\n<h2 id=\"s·∫Øp-x·∫øp-property\"><a href=\"#s%E1%BA%AFp-x%E1%BA%BFp-property\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·∫Øp x·∫øp property</h2>\n<p>ƒê√¥i khi ch√∫ng ta s·∫Ω mu·ªën thay ƒë·ªïi c√°c property theo m·ªôt th·ª© t·ª± n√†o ƒë√≥, n·∫øu s·∫Øp x·∫øp to√†n b·ªô lu√¥n th√¨ ch·∫Øc d√πng <code class=\"language-inline-text\">Object.keys</code> r·ªìi thay x·∫øp c√°i m·∫£ng key n√†y l·∫°i.</p>\n<p>ƒê·ªÉ di chuy·ªÉn <code class=\"language-inline-text\">id</code> l√™n ƒë·∫ßu, tr∆∞·ªõc h·∫øt g√°n gi√° tr·ªã <code class=\"language-inline-text\">undefined</code> cho n√≥ tr∆∞·ªõc, sau ƒë√≥, override l·∫°i gi√° tr·ªã n√†y b·∫±ng c√°ch resting</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> user3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">password</span><span class=\"token operator\">:</span> <span class=\"token string\">'Password!'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'An Luu'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">300</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">organize</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">object</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>object <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//                            -------------</span>\n<span class=\"token comment\">//                          /</span>\n<span class=\"token comment\">//  d·ªùi id l√™n ƒë·∫ßu</span>\n\n<span class=\"token function\">organize</span><span class=\"token punctuation\">(</span>user3<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//=> { id: 300, password: 'Password!', name: 'An Luu' }</span></code></pre></div>\n<p>C√≤n di chuy·ªÉn xu·ªëng d∆∞·ªõi c√πng</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> user3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">password</span><span class=\"token operator\">:</span> <span class=\"token string\">'Password!'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'An Luu'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">300</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">organize</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> password<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>object <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>object<span class=\"token punctuation\">,</span> password <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//              --------</span>\n<span class=\"token comment\">//             /</span>\n<span class=\"token comment\">// d·ªùi password xu·ªëng cu·ªëi</span>\n\n<span class=\"token function\">organize</span><span class=\"token punctuation\">(</span>user3<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//=> { name: 'An Luu', id: 300, password: 'Password!' }</span></code></pre></div>\n<h2 id=\"property-m·∫∑c-ƒë·ªãnh\"><a href=\"#property-m%E1%BA%B7c-%C4%91%E1%BB%8Bnh\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Property m·∫∑c ƒë·ªãnh</h2>\n<p>V√≠ d·ª•, <code class=\"language-inline-text\">user2</code> kh√¥ng c√≥ ch·ª©a <code class=\"language-inline-text\">quotes</code>, h√†m <code class=\"language-inline-text\">setDefaults</code> ƒë·∫£m b·∫£o t·∫•t c·∫£ object ƒë·ªÅu ch·ª©a property l√† <code class=\"language-inline-text\">quotes</code>, n·∫øu ko n√≥ th√™m v√†o <code class=\"language-inline-text\">[]</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> user2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'An Luu'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> user4 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">400</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'You'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">quotes</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"I've got a good feeling about this...\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setDefaults</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> quotes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>object<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>object<span class=\"token punctuation\">,</span> quotes <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// ho·∫∑c n·∫øu mu·ªën d·ªùi th·∫±ng quotes l√™n ƒë·∫ßu</span>\n<span class=\"token comment\">// const setDefaults = ({ ...object}) => ({ quotes: [], ...object })</span>\n\n<span class=\"token function\">setDefaults</span><span class=\"token punctuation\">(</span>user2<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//=> { id: 200, name: 'An Luu', quotes: [] }</span>\n\n<span class=\"token function\">setDefaults</span><span class=\"token punctuation\">(</span>user4<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//=> {</span>\n<span class=\"token comment\">//=>   id: 400,</span>\n<span class=\"token comment\">//=>   name: 'You',</span>\n<span class=\"token comment\">//=>   quotes: [\"I've got a good feeling about this...\"]</span>\n<span class=\"token comment\">//=> }</span></code></pre></div>\n<h2 id=\"ƒë·ªïi-t√™n-property\"><a href=\"#%C4%91%E1%BB%95i-t%C3%AAn-property\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒê·ªïi t√™n property</h2>\n<p>Th√≠ d·ª• b·∫°n ko mu·ªën trong object ch·ª©a property <code class=\"language-inline-text\">ID</code>, n√≥ ph·∫£i vi·∫øt th∆∞·ªùng <code class=\"language-inline-text\">id</code>, ƒë·∫ßu ti√™n ch√∫ng ta remove ID ra kh·ªèi object, sau ƒë√≥ add l·∫°i b·∫±ng t√™n l√† <code class=\"language-inline-text\">id</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">renamed</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> <span class=\"token constant\">ID</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>object <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token constant\">ID</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>object <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">ID</span><span class=\"token operator\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"An Luu\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">renamed</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span> <span class=\"token comment\">//=> { id: 500, name: 'An Luu' }</span></code></pre></div>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://blog.bitsrc.io/6-tricks-with-resting-and-spreading-javascript-objects-68d585bdc83\">7 Tricks with Resting and Spreading JavaScript Objects</a></p>\n","cover_image":""}},{"node":{"id":"9e12fec8adcd2cd25617bb60a650fc1f","title":"T·∫°o React Boilerplate - T·ª´ a t·ªõi z","path":"/2019-03-19-huong-dan-setup-react-app-tu-a-toi-z/","date":"2019-03-19","timeToRead":5,"desc":"M·ªôt ng√†y n√†o ƒë√≥ b·∫°n ko mu·ªën d√πng create-react-app ƒë·ªÉ kh·ªüi t·∫°o project n·ªØa, th√¨ ƒë√¢y ch√≠nh l√† b√†i h∆∞·ªõng d·∫´n b·∫°n c·∫ßn ƒë·ªçc: setup m·ªôt project t·ª´ a t·ªõi z m√† kh√¥ng d√πng create-react-app","content":"<p>T·∫°o th∆∞ m·ª•c m·ªõi n√†o</p>\n<div class=\"gridsome-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">mkdir react-bolt</code></pre></div>\n<p>V√†o b√™n trong th∆∞ m·ª•c <code class=\"language-inline-text\">react-bolt</code> v·ª´a t·∫°o, ch·∫°y l·ªánh init</p>\n<div class=\"gridsome-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">npm init <span class=\"token operator\">-</span>y</code></pre></div>\n<p>L·ªánh n√†y s·∫Ω kh·ªüi t·∫°o m·ªôt project npm, trong ƒë√≥ c√≥ file <code class=\"language-inline-text\">package.json</code>, n∆°i ch√∫ng ta ch·ª©a to√†n b·ªô nh·ªØng dependencies</p>\n<p>Ch√∫ng ta t·∫°o th√™m m·ªôt s·ªë th∆∞ m·ª•c c·∫ßn thi·∫øt kh√°c</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">react-bolt\n    |--config\n    |--src\n    |--tests</code></pre></div>\n<p>Ti·∫øn h√†nh c√†i ƒë·∫∑t <code class=\"language-inline-text\">webpack</code> v√† m·ªôt s·ªë plugin</p>\n<div class=\"gridsome-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">npm i <span class=\"token operator\">--</span><span class=\"token function\">save-dev</span> webpack webpack-<span class=\"token function\">cli</span> webpack-dev-server webpack-merge html-webpack-plugin clean-webpack-plugin img-loader url-loader file-loader </code></pre></div>\n<p>B√™n trong th∆∞ m·ª•c <code class=\"language-inline-text\">config</code>, ch√∫ng ta t·∫°o th√™m th∆∞ m·ª•c t√™n <code class=\"language-inline-text\">webpack</code>, ch√∫ng ta t·∫°o l·∫ßn l∆∞·ª£t 5 file b√™n d∆∞·ªõi trong th∆∞ m·ª•c <code class=\"language-inline-text\">webpack</code></p>\n<p><strong>paths.js</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> path <span class=\"token keyword\">from</span> <span class=\"token string\">'path'</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">root</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'../'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'../'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">outputPath</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'../'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'../'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'build'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">entryPath</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'../'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'../'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'src/index.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">templatePath</span><span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">'../'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'../'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'src/index.html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">imagesFolder</span><span class=\"token operator\">:</span> <span class=\"token string\">'images'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fontsFolder</span><span class=\"token operator\">:</span> <span class=\"token string\">'fonts'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">cssFolder</span><span class=\"token operator\">:</span> <span class=\"token string\">'css'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">jsFolder</span><span class=\"token operator\">:</span> <span class=\"token string\">'js'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>rules.js</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.js$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">exclude</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">node_modules</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> <span class=\"token string\">'babel-loader'</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.eot(\\?v=\\d+\\.\\d+\\.\\d+)?$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">exclude</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">node_modules</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> <span class=\"token string\">'file-loader'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.(woff|woff2)$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">exclude</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">node_modules</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> <span class=\"token string\">'url-loader?prefix=font/&amp;limit=5000'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.ttf(\\?v=\\d+\\.\\d+\\.\\d+)?$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">exclude</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">node_modules</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> <span class=\"token string\">'url-loader?limit=10000&amp;mimetype=application/octet-stream'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.(jpe?g|png|gif|svg)$</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">i</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'url-loader?limit=10000'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'img-loader'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>webpack.common.babel.js</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> webpack <span class=\"token keyword\">from</span> <span class=\"token string\">'webpack'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> HtmlWebpackPlugin <span class=\"token keyword\">from</span> <span class=\"token string\">'html-webpack-plugin'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> paths <span class=\"token keyword\">from</span> <span class=\"token string\">'./paths'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> rules <span class=\"token keyword\">from</span> <span class=\"token string\">'./rules'</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">entry</span><span class=\"token operator\">:</span> paths<span class=\"token punctuation\">.</span>entryPath<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        rules\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">modules</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'src'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'node_modules'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">extensions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.scss'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'.css'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">webpack<span class=\"token punctuation\">.</span>ProgressPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">HtmlWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">template</span><span class=\"token operator\">:</span> paths<span class=\"token punctuation\">.</span>templatePath<span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">minify</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token literal-property property\">collapseInlineTagWhitespace</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n                <span class=\"token literal-property property\">collapseWhitespace</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n                <span class=\"token literal-property property\">preserveLineBreaks</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n                <span class=\"token literal-property property\">minifyURLs</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n                <span class=\"token literal-property property\">removeComments</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n                <span class=\"token literal-property property\">removeAttributeQuotes</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>webpack.dev.babel.js</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> webpack <span class=\"token keyword\">from</span> <span class=\"token string\">'webpack'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> paths <span class=\"token keyword\">from</span> <span class=\"token string\">'./paths'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> rules <span class=\"token keyword\">from</span> <span class=\"token string\">'./rules'</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'development'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token string\">'[name].js'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> paths<span class=\"token punctuation\">.</span>outputPath<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">chunkFilename</span><span class=\"token operator\">:</span> <span class=\"token string\">'[name].js'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        rules\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">performance</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">hints</span><span class=\"token operator\">:</span> <span class=\"token string\">'warning'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">maxAssetSize</span><span class=\"token operator\">:</span> <span class=\"token number\">450000</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">maxEntrypointSize</span><span class=\"token operator\">:</span> <span class=\"token number\">8500000</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">assetFilter</span><span class=\"token operator\">:</span> <span class=\"token parameter\">assetFilename</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                assetFilename<span class=\"token punctuation\">.</span><span class=\"token function\">endsWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.css'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> assetFilename<span class=\"token punctuation\">.</span><span class=\"token function\">endsWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.js'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">optimization</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">splitChunks</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">chunks</span><span class=\"token operator\">:</span> <span class=\"token string\">'all'</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">devServer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">contentBase</span><span class=\"token operator\">:</span> paths<span class=\"token punctuation\">.</span>outputPath<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">compress</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">hot</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">historyApiFallback</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">webpack<span class=\"token punctuation\">.</span>HotModuleReplacementPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>webpack.prod.babel.js</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> CleanWebpackPlugin <span class=\"token keyword\">from</span> <span class=\"token string\">'clean-webpack-plugin'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> paths <span class=\"token keyword\">from</span> <span class=\"token string\">'./paths'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> rules <span class=\"token keyword\">from</span> <span class=\"token string\">'./rules'</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'production'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">output</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">filename</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>paths<span class=\"token punctuation\">.</span>jsFolder<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/[name].[hash].js</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> paths<span class=\"token punctuation\">.</span>outputPath<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">chunkFilename</span><span class=\"token operator\">:</span> <span class=\"token string\">'[name].[chunkhash].js'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">module</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        rules\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">CleanWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>paths<span class=\"token punctuation\">.</span>outputPath<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">root</span><span class=\"token operator\">:</span> paths<span class=\"token punctuation\">.</span>root\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">devtool</span><span class=\"token operator\">:</span> <span class=\"token string\">'source-map'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>B√™n trong <code class=\"language-inline-text\">webpack.common.babel.js</code> ch√∫ng ta s·∫Ω setup entry v√† output v√† c√°c plugin. C√°c thi·∫øt ƒë·∫∑t ƒë·ªÉ ch·∫°y m√¥i tr∆∞·ªùng dev s·∫Ω n·∫±m trong <code class=\"language-inline-text\">webpack.dev.babel.js</code> v√† m√¥i tr∆∞·ªùng production s·∫Ω n·∫±m trong <code class=\"language-inline-text\">webpack.prod.babel.js</code> </p>\n<p>Sau c√πng, b√™n trong th∆∞ m·ª•c g·ªëc, t·∫°o th√™m file <code class=\"language-inline-text\">webpack.config.js</code> n√≥ s·∫Ω merge 3 file config common, dev, prod l·∫°i</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@babel/register'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> webpackMerge <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'webpack-merge'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> common <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./config/webpack/webpack.common.babel'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> envs <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">development</span><span class=\"token operator\">:</span> <span class=\"token string\">'dev'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">production</span><span class=\"token operator\">:</span> <span class=\"token string\">'prod'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/* eslint-disable global-require,import/no-dynamic-require */</span>\n<span class=\"token keyword\">const</span> env <span class=\"token operator\">=</span> envs<span class=\"token punctuation\">[</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">||</span> <span class=\"token string\">'development'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> envConfig <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">./config/webpack/webpack.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>env<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.babel</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">webpackMerge</span><span class=\"token punctuation\">(</span>common<span class=\"token punctuation\">,</span> envConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"babel\"><a href=\"#babel\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Babel</h2>\n<p>C√°i c√°c plugin c·∫ßn thi·∫øt cho babel</p>\n<div class=\"gridsome-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">npm install <span class=\"token operator\">--</span><span class=\"token function\">save-dev</span> @babel/core @babe/<span class=\"token function\">cli</span> @babel/node @babel/plugin-proposal-<span class=\"token keyword\">class</span><span class=\"token operator\">-</span>properties @babel/plugin-proposal-object-rest-spread @babel/plugin-syntax-dynamic-import @babel/plugin-syntax-<span class=\"token function\">import-meta</span> @babel/plugin-transform-async-to-generator @babel/plugin-transform-runtime @babel/preset-env @babel/preset-react @babel/register @babel/runtime babel-eslint babel-jest babel-loader babel-core@7<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>0-bridge<span class=\"token punctuation\">.</span>0</code></pre></div>\n<p>T·∫°o file <code class=\"language-inline-text\">.babelrc</code> b√™n trong th∆∞ m·ª•c g·ªëc, thi·∫øt ƒë·∫∑t babel khi ch·∫°y</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"presets\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">\"@babel/preset-env\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token string-property property\">\"useBuiltIns\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"entry\"</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"@babel/preset-react\"</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"plugins\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"@babel/plugin-proposal-object-rest-spread\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"@babel/plugin-transform-runtime\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"@babel/plugin-transform-async-to-generator\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"@babel/plugin-proposal-class-properties\"</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"eslint\"><a href=\"#eslint\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Eslint</h2>\n<p>C√†i ƒë·∫∑t package </p>\n<div class=\"gridsome-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">npm install <span class=\"token operator\">--</span><span class=\"token function\">save-dev</span> eslint eslint-config-airbnb eslint-config-prettier eslint-loader eslint-plugin-babel eslint-plugin-import eslint-plugin-jsx-a11y eslint-plugin-prettier eslint-plugin-react </code></pre></div>\n<p>B√™n trong th∆∞ m·ª•c g·ªëc, t·∫°o file <code class=\"language-inline-text\">.eslintrc</code> ƒë·ªÉ c·∫•u h√¨nh cho eslint</p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"parser\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"babel-eslint\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"airbnb\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"prettier\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"prettier/react\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"plugins\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"prettier\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"parserOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"ecmaVersion\"</span><span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"ecmaFeatures\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"jsx\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"env\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"browser\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"node\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"mocha\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"es6\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"jest\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"rules\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"indent\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"space-before-function-paren\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"off\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"react/prefer-stateless-function\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"warn\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"react/jsx-one-expression-per-line\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"off\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"import/no-extraneous-dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span> <span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"react/jsx-filename-extension\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">\"extensions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\".js\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\".jsx\"</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"linebreak-style\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"off\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"global-require\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"off\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"semi\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"warn\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"arrow-body-style\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"off\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"no-multiple-empty-lines\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"warn\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">\"max\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"no-unused-expressions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span>\n                <span class=\"token property\">\"allowTaggedTemplates\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"no-underscore-dangle\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">{</span> <span class=\"token property\">\"allow\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"__REDUX_DEVTOOLS_EXTENSION__\"</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"prettier\"><a href=\"#prettier\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Prettier</h2>\n<p>C√†i ƒë·∫∑t package</p>\n<div class=\"gridsome-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">npm install <span class=\"token operator\">--</span><span class=\"token function\">save-dev</span> prettier</code></pre></div>\n<p>T·∫°o file <code class=\"language-inline-text\">.prettierrc</code> v·ªõi n·ªôi dung</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"printWidth\"</span><span class=\"token operator\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"tabWidth\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"semi\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"singleQuote\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"bracketSpacing\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"react\"><a href=\"#react\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>React</h2>\n<p>Cu·ªëi c√πng ch√∫ng ta ch·ªâ c√≤n c√†i React n·ªØa l√† xong</p>\n<div class=\"gridsome-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">npm install <span class=\"token operator\">--</span>save react react-dom cross-env</code></pre></div>\n<p>B√™n trong th∆∞ m·ª•c <code class=\"language-inline-text\">src</code>, t·∫°o file <code class=\"language-inline-text\">index.html</code></p>\n<div class=\"gridsome-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>X-UA-Compatible<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ie=edge<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>React Bolt<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>File <code class=\"language-inline-text\">index.js</code> trong th∆∞ m·ª•c <em>src</em></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./components/App'</span><span class=\"token punctuation\">;</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>M·∫•y c√°i router, redux th√¨ b·∫°n c·ª© xem t√†i li·ªáu c·ªßa t·ª•i n√≥ nh√©.</p>\n<h2 id=\"jest\"><a href=\"#jest\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Jest</h2>\n<p>B·∫°n c√≥ th·ªÉ d√πng c√°i kh√°c ƒë·ªÉ test, nh∆∞ng Jest th√¨ ph·ªï bi·∫øn nh·∫•t r·ªìi</p>\n<div class=\"gridsome-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">npm install <span class=\"token operator\">--</span><span class=\"token function\">save-dev</span> jest jest-dom react-testing-library</code></pre></div>\n<p>B·ªï sung l·ªánh ƒë·ªÉ ch·∫°y test trong <code class=\"language-inline-text\">package.json</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string-property property\">\"jest\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"setupFiles\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"&lt;rootDir>/config/tests/jest.config\"</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"transform\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"^.+\\\\.js$\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"babel-jest\"</span>\n    <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token string-property property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env NODE_ENV=development webpack-dev-server --open\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env NODE_ENV=production webpack\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"lint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eslint ./src/**/**.js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"lint:fix\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eslint ./src/**/**.js --fix\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jest\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"test:watch\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run test --watch\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"test:cover\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run test --coverage\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>config/tests/jest.config.js</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">automock</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">browser</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">bail</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">collectCoverageFrom</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">'src/**/*.{js,jsx}'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'!**/node_modules/**'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'!**/vendor/**'</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">coverageDirectory</span><span class=\"token operator\">:</span> <span class=\"token string\">'&lt;rootDir>/coverage'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">globals</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">__DEV__</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">moduleFileExtensions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'json'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'jsx'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'node'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">'^.+\\\\.js?$'</span><span class=\"token operator\">:</span> <span class=\"token string\">'babel-jest'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">verbose</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">setupTestFrameworkScriptFile</span><span class=\"token operator\">:</span> <span class=\"token string\">'./rtl.setup.js'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>config/tests/rtl.setup.js</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// See https://github.com/kentcdodds/react-testing-library#global-config</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'jest-dom/extend-expect'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'react-testing-library/cleanup-after-each'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Xong.</p>\n<p><a href=\"https://github.com/leonardomso/react-bolt\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Source code ·ªü ƒë√¢y</a></p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://medium.freecodecamp.org/a-complete-react-boilerplate-tutorial-from-zero-to-hero-20023e086c4a\">Link b√†i g·ªëc - A Complete React Boilerplate Tutorial‚Ää‚Äî‚ÄäFrom Zero to Hero</a></p>\n","cover_image":""}},{"node":{"id":"5eadb4fb31a8a53f91d7af473359e9f1","title":"Function Component kh√°c Class component nh∆∞ th·∫ø n√†o trong React","path":"/2019-03-12-su-khac-nhau-giua-function-component-va-class-component-trong-react/","date":"2019-03-12","timeToRead":3,"desc":"Ng√†y x∆∞a khi ch∆∞a c√≥ hook, th√¨ r·∫•t d·ªÖ ƒë·ªÉ tr·∫£ l·ªùi c√¢u n√†y, nh∆∞ng t·ª´ ng√†y hook ƒë∆∞·ª£c s·ª≠ d·ª•ng, c√¢u h·ªèi l·∫°i n√†y l·∫°i ƒë∆∞·ª£c ƒë·∫∑t ra, ·ªßa v·∫≠y 2 th·∫±ng n√≥ kh√°c nhau ·ªü ƒëi·ªÉm n√†o.","content":"<p>C√≥ th·ªÉ b·∫°n c≈©ng t·ª´ng nghe n√≥i, m·ªôt trong 2 th·∫±ng ƒë√≥ performance t·ªët h∆°n. Xem th√™m ƒë√°nh gi√° t·ª´ <a href=\"https://medium.com/@dan_abramov/this-benchmark-is-indeed-flawed-c3d6b5b6f97f\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">This benchmark is indeed flawed.</a>. N√≥i v·ªÅ performance th√¨ ph·∫£i xem c√°i code b√™n trong n√≥ l√†m c√°i g√¨, ch·ª© ko c√≤n ƒë∆°n thu·∫ßn l√† function hay class n√≥ s·∫Ω performance cao h∆°n.</p>\n<p>Nh∆∞ v·∫≠y, vi·ªác b·∫°n chuy·ªÉn h·∫øt c√°c component ƒëang vi·∫øt sang function component, r·ªìi k·∫øt h·ª£p v·ªõi hook ƒë·ªÉ thay cho class component th·ª±c s·ª± ph·∫£i c√¢n nh·∫Øc, v√¨ nhi·ªÅu khi t·ªën th·ªùi gian m√† ko mang nhi·ªÅu l·ª£i √≠ch l·∫Øm.</p>\n<p>Xem x√©t m·ªôt function component nh∆∞ th·∫ø n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">ProfilePage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> user <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">showMessage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Followed '</span> <span class=\"token operator\">+</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>showMessage<span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Follow</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ta c√≥ th·ªÉ vi·∫øt l·∫°i th√†nh class component</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ProfilePage</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">showMessage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Followed '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>showMessage<span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Follow</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ªÉ th·∫•y s·ª± kh√°c nhau, ch√∫ng ta c≈©ng xem m·ªôt con bug r·∫•t hay x·∫£y ra trong React.</p>\n<p>Ch·∫°y th·ª≠ <a href=\"https://codesandbox.io/s/pjqnl16lm7\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">demo</a>,  r·ªìi l√†m theo c√°c b∆∞·ªõc sau\n1. Click v√†o m·ªôt trong 2 n√∫t follow\n2. Ch·ªçn profile name kh√°c v·ªõi ban ƒë·∫ßu, t·ª´ c√°i dropdown, ƒë·ª£i 3 gi√¢y ƒë·ªÉ n√≥ ch·∫°y\n3. ƒê·ªçc k·∫øt qu·∫£ c·ªßa alert</p>\n<p>N·∫øu d√πng <code class=\"language-inline-text\">ProfilePage</code> function, n·∫øu ch·ªçn Dan sau ƒë√≥ chuy·ªÉn sang Sophie, n√≥ s·∫Ω hi·ªán c√¢u alert l√† <code class=\"language-inline-text\">Followed Dan</code>\nN·∫øu d√πng <code class=\"language-inline-text\">ProfilePage</code> class, ta s·∫Ω ƒë∆∞·ª£c alert c√¢u <code class=\"language-inline-text\">Followed Sophie</code></p>\n<p><img src=\"https://overreacted.io/bug-386a449110202d5140d67336a0ade5a0.gif\" alt=\"ƒê·ªÉ th·∫•y s·ª± kh√°c nhau, ch√∫ng ta c≈©ng xem m·ªôt con bug r·∫•t hay x·∫£y ra trong React.\"></p>\n<p>K·∫øt qu·∫£ ch·∫°y c·ªßa function component l√† ƒë√∫ng, sau khi chuy·ªÉn sang ng∆∞·ªùi kh√°c ch√∫ng ta ƒë√¢u c√≥ g·ªçi l·∫°i follow? R√µ r√†ng class component b·ªã <em>bug</em>.</p>\n<p>Xem x√©t h√†m <code class=\"language-inline-text\">showMessage</code> b√™n trong class component</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ProfilePage</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">showMessage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Followed '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>N√≥ ƒë·ªçc gi√° tr·ªã t·ª´ <code class=\"language-inline-text\">this.props.user</code>, tuy nhi√™n, th·∫±ng <strong>this</strong> l√† m·ªôt m·ªôt gi√° tr·ªã lu√¥n lu√¥n <strong>mutable</strong>, t·ª©c c√≥ th·ªÉ thay ƒë·ªïi, kh√¥ng ph·∫£i b·∫•t bi·∫øn.</p>\n<p>N√≥ l√† m·ª•c ƒë√≠ch c·ªßa s·ª≠ d·ª•ng t·ª´ kh√≥a <code class=\"language-inline-text\">this</code> b√™n trong class ch·ª© c≈©ng ko h·∫≥n l√† bug. React mu·ªën l·∫•y ƒë∆∞·ª£c gi√° tr·ªã m·ªõi nh·∫•t trong l√∫c render v√† trong c√°c ph∆∞∆°ng th·ª©c lifecycle</p>\n<blockquote>\n<p>Cho d·ªÖ nh·ªõ, <code class=\"language-inline-text\">this.props</code> lu√¥n l√† gi√° tr·ªã m·ªõi nh·∫•t khi n√≥ c·∫ßn render </p>\n</blockquote>\n<p>Gi·ªù n·∫øu m√† ko c√≥ s·ª± t·ªìn t·∫°i c·ªßa function component, th√¨ ch√∫ng ta gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ n√†y nh∆∞ th·∫ø n√†o ? Ch√∫ng ta s·∫Ω l·∫•y gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">this.props</code> tr∆∞·ªõc khi <code class=\"language-inline-text\">setTimeout</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ProfilePage</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">showMessage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Followed '</span> <span class=\"token operator\">+</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">showMessage</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Follow</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Tuy nhi√™n ƒë√¢y c≈©ng ch∆∞a ph·∫£i l√† c√°ch ho√†n h·∫£o ƒë·ªÉ gi·∫£i quy·∫øt tri·ªát ƒë·ªÉ con bug tr√™n. C√≥ th·ªÉ s·ª≠ d·ª•ng javascript closure ƒë·ªÉ ho√†n to√†n x·ª≠ tr√≠ v·ª• n√†y, nh∆∞ng th·∫≠t l√≤ng m√† n√≥i, x√†i closure v√¥ r·∫•t r·ªëi, kh√≥ l√≤ng nh·∫©m ƒë∆∞·ª£c gi√° tr·ªã hi·ªán t·∫°i.</p>\n<p>M·ªôt c√°ch kh√°c ƒë∆∞·ª£c nhi·ªÅu ng∆∞·ªùi s·ª≠ d·ª•ng h∆°n l√† truy xu·∫•t trong h√†m render, ch√∫ng ta ƒë·∫∑t h·∫øt ni·ªÅm tin v√†o gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">prop</code> v√† <code class=\"language-inline-text\">state</code> trong l√∫c render </p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ProfilePage</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// l·∫•y gi√° tr·ªã props</span>\n    <span class=\"token keyword\">const</span> props <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// l∆∞u √Ω ch√∫ng ta ƒëang trong h√†m render</span>\n    <span class=\"token comment\">// ƒë√¢y ko ph·∫£i l√† m·ªôt ph∆∞∆°ng th·ª©c c·ªßa class</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">showMessage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Followed '</span> <span class=\"token operator\">+</span> props<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>showMessage<span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Follow</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Nh∆∞ v·∫≠y gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">user</code> b√™n trong h√†m <code class=\"language-inline-text\">showMessage</code> n√≥ s·∫Ω lu√¥n ƒë·ªìng nh·∫•t v·ªõi l√∫c render.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://overreacted.io/how-are-function-components-different-from-classes/\">How Are Function Components Different from Classes?</a></p>\n","cover_image":""}},{"node":{"id":"9358bcb7257ba0e35f104945857aa41f","title":"L√†m quen v·ªõi React Hook b·∫±ng v√≠ d·ª•","path":"/2019-02-11-lam-quen-voi-react-hook-bang-vi-du/","date":"2019-02-11","timeToRead":2,"desc":"Ch√∫ng ta c√πng b·∫Øt ƒë·∫ßu h·ªçc s·ª≠ d·ª•ng React Hook, n√≥ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ g√¨, s·ª≠ d·ª•ng n√≥ ra sao","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#state-trong-react\">State trong React</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-react-hook\">S·ª≠ d·ª•ng React Hook</a></li>\n</ul>\n<!-- /TOC -->\n<p>M·∫•y th√°ng tr∆∞·ªõc thi√™n h·∫° r·∫ßn r·∫ßn v·ªõi React hook khi n√≥ c√≤n ƒëang ·ªü b·∫£n proposal (show h√†ng cho c√°c anh l·∫≠p tr√¨nh vi√™n, n·∫øu th√≠ch th√¨ h·ªç ph√°t tri·ªÉn ti·∫øp), b√¢y gi·ªù khi <a href=\"https://reactjs.org/blog/2019/02/06/react-v16.8.0.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React ch√≠nh th·ª©c c√¥ng b·ªë tr√™n trang ch·ªß</a> r·ªìi, ch√∫ng ta c√πng l√†m quen v·ªõi React hook c≈©ng ko c√≥ g√¨ mu·ªôn.</p>\n<h2 id=\"state-trong-react\"><a href=\"#state-trong-react\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>State trong React</h2>\n<p>Khi khai b√°o m·ªôt component trong React b·∫±ng <code class=\"language-inline-text\">class</code> (stateful component), kh√¥ng d√πng function ƒë·ªÉ khai b√°o (stateless component), th√¨ trong component ƒë√≥ ch√∫ng ta c√≥ <code class=\"language-inline-text\">state</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">StatefulComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'An Luu'</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                Hello </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">StatelessComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            Hello </span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>V·∫•n ƒë·ªÅ c·ªßa h√†m <code class=\"language-inline-text\">setState</code> l√† n√≥ ch·ªâ c√≥ khi ch√∫ng ta khai b√°o component b·∫±ng class, n√≥ l√† h√†m <code class=\"language-inline-text\">async</code> - nghƒ©a l√† n·∫øu ch√∫ng ta g·ªçi <code class=\"language-inline-text\">setState</code> nhi·ªÅu l·∫ßn, component ƒë∆∞·ª£c render l·∫°i v·ªõi s·ªë l·∫ßn g·ªçi <code class=\"language-inline-text\">setState</code>.</p>\n<p>Nguy√™n nh√¢n ch√≠nh ƒë·∫ª ra c√°i hook ch√≠nh l√† vi·ªác ko th·ªÉ <code class=\"language-inline-text\">setState</code> trong function component (·ªßa v·∫≠y t·∫°i sao ƒë·∫ª ra kh√°i ni·ªám function component chi, stateless component chi?)</p>\n<h2 id=\"s·ª≠-d·ª•ng-react-hook\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-react-hook\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng React Hook</h2>\n<p>Tr∆∞·ªõc ti√™n mu·ªën d√πng React Hook, ph·∫£i ƒë·∫£m b·∫£o version React ƒëang d√πng th·∫•p nh·∫•t l√† 16.8.0</p>\n<p>H√†m quan tr·ªçng c·∫ßn nh·ªõ l√† <code class=\"language-inline-text\">useState</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>useState<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>H√†m <code class=\"language-inline-text\">useState</code> nh·∫≠n tham s·ªë initial state, sau ƒë√≥ s·∫Ω <strong>tr·∫£ v·ªÅ m·ªôt m·∫£ng</strong> 2 ph·∫ßn t·ª≠, ph·∫ßn t·ª≠ ƒë·∫ßu ti√™n l√† state hi·ªán t·∫°i, th·ª© 2 l√† h√†m ƒë·ªÉ update state (<code class=\"language-inline-text\">setState</code> ƒë√≥ m√†)</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>S·ª≠ d·ª•ng tr√™n component th·ª±c t·∫ø ƒëi nh·ªâ</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Form</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> addTodo <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">,</span> setValue<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleSubmit</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>value<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">addTodo</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleSubmit<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n        <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Add a todo<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">StatelessComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>todos<span class=\"token punctuation\">,</span> setTodos<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addTodo</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">text</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> newTodos <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>todos<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> text <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setTodos</span><span class=\"token punctuation\">(</span>newTodos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">deleteTodo</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">index</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> newTodos <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        newTodos<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setTodos</span><span class=\"token punctuation\">(</span>newTodos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Form</span></span> <span class=\"token attr-name\">addTodo</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>addTodo<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token punctuation\">{</span>todos<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todo<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n                        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">deleteTodo</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>text<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"https://cdn.hashnode.com/res/hashnode/image/upload/v1549453648271/wSbUZbet_.gif\" alt=\"L√†m quen v·ªõi React Hook b·∫±ng v√≠ d·ª• th·ª±c t·∫ø\"></p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://hashnode.com/post/write-your-first-react-hook-cjrt8lfci00aw18s1z8v9s06n\n\">Write your first React Hook!</a></p>\n","cover_image":""}},{"node":{"id":"83955bb941ea7b4b3979e074ed210fcf","title":"5 c√°ch vi·∫øt hay s·ª≠ d·ª•ng trong React","path":"/2018-12-30-mot-so-pattern-hay-su-dung-trong-react/","date":"2018-12-30","timeToRead":4,"desc":"ƒêi·ªÉm qua 6 React Pattern hay g·∫∑p trong React","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#render-theo-%C4%91i%E1%BB%81u-ki%E1%BB%87n\">Render theo ƒëi·ªÅu ki·ªán</a></li>\n<li><a href=\"#truy%E1%BB%81n-prop-xu%E1%BB%91ng-c%C3%A1c-component-children\">Truy·ªÅn prop xu·ªëng c√°c component children</a></li>\n<li><a href=\"#higher-order-component\">Higher Order Component</a></li>\n<li><a href=\"#server-side-rendering-%C4%91%E1%BB%83-t%E1%BB%91i-%C6%B0u-seo\">Server-side rendering ƒë·ªÉ t·ªëi ∆∞u SEO</a></li>\n<li><a href=\"#inline-style-v%C3%A0-css-import\">Inline style v√† CSS Import</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"render-theo-ƒëi·ªÅu-ki·ªán\"><a href=\"#render-theo-%C4%91i%E1%BB%81u-ki%E1%BB%87n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Render theo ƒëi·ªÅu ki·ªán</h2>\n<p>N·∫øu ƒëang vi·∫øt c√¢u render theo ƒëi·ªÅu ki·ªán nh∆∞ b√™n d∆∞·ªõi.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> condition <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> innerContent <span class=\"token operator\">=</span> condition <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Show me</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Always visible</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token punctuation\">{</span> innerContent <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√°ch vi·∫øt ·ªü tr√™n c√≥ s·∫Ω d·ªÖ r∆°i v√†o t√¨nh tr·∫°ng m·∫•t ki·ªÉm so√°t khi c√≥ nhi·ªÅu h∆°n 1 c√¢u ƒëi·ªÅu ki·ªán r√∫t g·ªçn ·ªü tr∆∞·ªõc h√†m <code class=\"language-inline-text\">render</code>. B·∫°n ph·∫£i m√≤ m·∫´m l·∫°i c√°c h√†m b√™n trong ƒë·ªÉ bi·∫øt element n√†o s·∫Ω ƒë∆∞·ª£c render.</p>\n<p>Xem x√©t c√°ch vi·∫øt sau</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> condition <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Always visible</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token punctuation\">{</span>\n\t\t\tcondition <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n\t\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Show me</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\t\t\t<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>N·∫øu gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">condition</code> l√† <code class=\"language-inline-text\">false</code>, ƒëo·∫°n sau <code class=\"language-inline-text\">&amp;&amp;</code>  s·∫Ω ko ƒë∆∞·ª£c ƒë·∫øm x·ªâa.</p>\n<h2 id=\"truy·ªÅn-prop-xu·ªëng-c√°c-component-children\"><a href=\"#truy%E1%BB%81n-prop-xu%E1%BB%91ng-c%C3%A1c-component-children\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Truy·ªÅn prop xu·ªëng c√°c component children</h2>\n<p>Khi ch√∫ng ta c·∫ßn truy·ªÅn c√°c prop xu·ªëng c√°c component b√™n d∆∞·ªõi, d√πng ki·ªÉu <strong>destructuring object</strong>, kh√¥ng c·∫ßn quan t√¢m ƒë·∫øn t√™n ch√≠nh x√°c truy·ªÅn qua t·ª´ng prop</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Details</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span> <span class=\"token parameter\"><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> language <span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span> name <span class=\"token punctuation\">}</span><span class=\"token plain-text\"> works with </span><span class=\"token punctuation\">{</span> language <span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Layout</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span> <span class=\"token parameter\"><span class=\"token punctuation\">{</span> title<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>props <span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Details</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Layout</span></span>\n\t\t<span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>I<span class=\"token punctuation\">'</span>m here to stay<span class=\"token punctuation\">\"</span></span>\n\t\t<span class=\"token attr-name\">language</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Javascript<span class=\"token punctuation\">\"</span></span>\n\t\t<span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Alex<span class=\"token punctuation\">\"</span></span>\n\t<span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"higher-order-component\"><a href=\"#higher-order-component\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Higher Order Component</h2>\n<p>React ƒë√£ b·ªè <code class=\"language-inline-text\">React.createElement</code> v√† <em>mixins</em>, HOCs l√† l·ª±a ch·ªçn c√≤n l·∫°i duy nh·∫•t khi b·∫°n mu·ªën s·ª≠ d·ª•ng c√πng 1 component v·ªõi nhi·ªÅu version kh√°c nhau.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">withProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">newProps</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span> <span class=\"token parameter\">WrappedComponent</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ModifiedComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">ownProps</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">WrappedComponent</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>ownProps<span class=\"token punctuation\">}</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>newProps<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">return</span> ModifiedComponent<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Details</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">,</span> language <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> works with </span><span class=\"token punctuation\">{</span>language<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> newProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"An\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ModifiedDetails <span class=\"token operator\">=</span> <span class=\"token function\">withProps</span><span class=\"token punctuation\">(</span>newProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Details<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token operator\">&lt;</span>ModifiedDetails\n\t\ttitle<span class=\"token operator\">=</span><span class=\"token string\">\"I'm here to stay\"</span>\n\t\tlanguage<span class=\"token operator\">=</span>\"Javascript‚Äù\n\t<span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>N·∫øu b·∫°n qu√° th√≠ch HOC, c√≥ th·ªÉ tham kh·∫£o ƒë·ªÉ d√πng th√™m th∆∞ vi·ªán n√†y <a href=\"https://github.com/acdlite/recompose\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/acdlite/recompose</a></p>\n<h2 id=\"server-side-rendering-ƒë·ªÉ-t·ªëi-∆∞u-seo\"><a href=\"#server-side-rendering-%C4%91%E1%BB%83-t%E1%BB%91i-%C6%B0u-seo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Server-side rendering ƒë·ªÉ t·ªëi ∆∞u SEO</h2>\n<p>V·ªõi c√°c ·ª©ng d·ª•ng Single Page App, c√≥ 2 issue th∆∞·ªùng ƒë∆∞·ª£c ƒë·ªÅ c·∫≠p.</p>\n<ol>\n<li>Load l·∫ßn ƒë·∫ßu, javascript kh√¥ng ƒë∆∞·ª£c cache. V√† n·∫øu file javascript ban ƒë·∫ßu qu√° l·ªõn th√¨ s·∫Ω ·∫£nh h∆∞·ªüng t·ªõi t·ªëc ƒë·ªô load (lazy load s·∫Ω gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ n√†y)</li>\n<li>V√¨ javascript s·∫Ω ƒë·∫£m nhi·ªám render ·ªü client, c√°c con crawler c·ªßa search engine s·∫Ω kh√¥ng th·ªÉ ƒë·ªçc ƒë∆∞·ª£c n·ªôi dung trang.</li>\n</ol>\n<p>Ch√∫ng ta gi·∫£i quy·∫øt c√°c issue n√†y b·∫±ng Server Side Rendering. Tuy nhi√™n chi ph√≠ ph√°t tri·ªÉn s·∫Ω tƒÉng l√™n b·ªüi ch√∫ng ta bu·ªôc ph·∫£i mua server ch·∫°y Node/Express.</p>\n<p>Trong tr∆∞·ªùng h·ª£p b·∫°n ch·ªâ quan t√¢m t·ªõi Server Rendering v√¨ SEO, th√¨ google gi·ªù ƒë√¢y ƒë√£ c·∫≠p nh·∫≠p con crawler c·ªßa n√≥ ƒë·ªÉ ƒë·ªçc ƒë∆∞·ª£c n·ªôi dung file javascript, Google ƒë√£ ph√°t tri·ªÉn n√≥ t·ª´ nƒÉm 2016 v√† gi·ªù ƒë√¢y thu·∫≠t to√°n ƒë√£ ch·∫°y h·∫øt s·ª©c tr∆°n tru.</p>\n<p>Tr∆∞·ªùng h·ª£p b·∫°n quan t√¢m t·ªõi m·ªôt s·ªë l·ª£i √≠ch kh√°c c·ªßa SSR nh∆∞ cache file, th√¨ x√†i Next.js lu√¥n ch·ª© ƒë·ª´ng ng·ªìi m√≤ config th·ªß c√¥ng m·∫•t th·ªùi gian c√¥ng s·ª©c.</p>\n<h2 id=\"inline-style-v√†-css-import\"><a href=\"#inline-style-v%C3%A0-css-import\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Inline style v√† CSS Import</h2>\n<p>React khuy·∫øn kh√≠ch ch√∫ng ta nh√¨n ·ª©ng d·ª•ng tr√™n g√≥c ƒë·ªô c√°c component, stylesheet ƒë∆∞·ª£c khuy·∫øn kh√≠ch \"d√≠nh\" ch·∫∑t v·ªõi t·ª´ng component.</p>\n<p>C√≥ r·∫•t nhi·ªÅu c√°ch ƒë∆∞·ª£c gi·ªõi thi·ªáu ƒë·ªÉ vi·∫øt CSS chung trong file JS. Ki·ªÉu inline style c≈©ng ƒë∆∞·ª£c d√πng r·ªông r√£i trong React Native.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> divStyle <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token string\">'40px'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'5px solid pink'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> pStyle <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'15px'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token literal-property property\">textAlign</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">TextBox</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>divStyle<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>pStyle<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Yeah!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Ch√∫ng ta kh√¥ng c√≤n ph·∫£i import CSS, tuy nhi√™n b·∫°n c√≥ bao gi·ªù nghƒ© ƒë·∫øn chuy·ªán maintain v√† ƒë·ªçc l·∫°i nh·ªØng ƒëo·∫°n code CSS nh∆∞ th·∫ø ?. B·∫°n c≈©ng kh√¥ng c√≥ <em>media queries</em> n·ªØa, <em>pseudo class</em> v√† <em>pseudo element</em> c≈©ng kh√¥ng c√≤n.</p>\n<p>N·∫øu c·∫£m th·∫•y m·ªát v·ªõi ki·ªÉu inline style, b·∫°n xem th·ª≠ c√°ch sau, CSS-in-JS, hay c√≤n g·ªçi <em>styled-component</em>.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> Text <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>div<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  color: white,\n  background: black\n</span><span class=\"token template-punctuation string\">`</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">This is CSS-in-JS</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Text</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>L√∫c render th√¨ n√≥ s·∫Ω th√†nh nh∆∞ v·∫ßy</p>\n<div class=\"gridsome-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n<span class=\"token selector\">.hash234dd2</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> black<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> white<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hash234dd3<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>This is CSS-in-JS<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Kh√°c v·ªõi ki·ªÉu render inline, n√≥ v·∫´n render th·∫ª style v√† CSS</p>\n<p>C√°c Pattern ƒë·ªÉ vi·∫øt trong React c√≥ th·ªÉ n√≥i ph√°t tri·ªÉn kh√¥ng ng·ª´ng, b·∫°n th·∫•y c√°i n√†o ti·ªán v√† hay th√¨ d√πng, kh√¥ng th√¨ t·ª± t·∫°o ra m·ªôt ki·ªÉu ri√™ng c·ªßa m√¨nh c≈©ng l√† √Ω hay.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://medium.freecodecamp.org/evolving-patterns-in-react-116140e5fe8f\">Evolving Patterns in React</a></p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://blog.logrocket.com/5-common-practices-that-you-can-stop-doing-in-react-9e866df5d269\">5 common practices that you can stop doing in React</a></p>\n","cover_image":""}},{"node":{"id":"82815509b42f03b7df5ff8ab1af616b8","title":"this.setState trong React ch·∫°y nh∆∞ th·∫ø n√†o","path":"/2018-12-12-setstate-chay-nhu-the-nao/","date":"2018-12-12","timeToRead":3,"desc":"Gi·∫£i ƒë√°p th·∫Øc m·∫Øc v√¨ sao this.setState c√≥ th·ªÉ update DOM, ch·∫°y ƒë∆∞·ª£c tr√™n mobile, ch·∫°y ƒë∆∞·ª£c tr√™n b·∫•t k·ª≥ m√¥i tr∆∞·ªùng n√†o","content":"<p>Update l·∫°i DOM nghe c√≥ v·∫ª l√† c√¥ng vi·ªác c·ªßa React DOM, tuy nhi√™n ch√∫ng ta g·ªçi <code class=\"language-inline-text\">this.setState()</code> b√™n trong m·ªôt React Component,  n√≥ s·∫Ω kh√¥ng li√™n quan t·ªõi React DOM, React.Component s·∫Ω x·ª≠ l√Ω.</p>\n<p>V·∫≠y l√†m sao <code class=\"language-inline-text\">setState()</code> b√™n trong React.Component update ƒë∆∞·ª£c DOM? B·∫°n c√≥ th·ªÉ nghƒ© l√† b√™n trong React.Component ch·ª©a logic ƒë·ªÉ update DOM. Nh∆∞ng t·∫°i sao ch√∫ng ta v·∫´n c√≥ th·ªÉ g·ªçi <code class=\"language-inline-text\">this.setState()</code> tr√™n c√°c m√¥i tr∆∞·ªùng kh√°c, v√≠ d·ª• nh∆∞ s·ª≠ d·ª•ng tr√™n React Native, n√≥ c≈©ng l√† extends c·ªßa <code class=\"language-inline-text\">React.Component</code>. V√† React Native th√¨ l√†m vi·ªác ƒë∆∞·ª£c tr√™n c·∫£ Android iOS, c√°i View ƒë√≥ th√¨ ko d·ª±ng b·∫±ng DOM.</p>\n<p>N·∫øu b·∫°n ƒë√£ s·ª≠ d·ª•ng qua React Test Renderer ho·∫∑c Shallow Renderer. C·∫£ 2 c√°ch test n√†y ƒë·ªÅu cho ph√©p render m·ªôt component b√¨nh th∆∞·ªùng v√† g·ªçi <code class=\"language-inline-text\">this.setState</code> b√™n trong n√≥. V√† c·∫£ 2 th·∫±ng ƒë√≥ c≈©ng ko li√™n quan g√¨ t·ªõi DOM.</p>\n<p>Nh∆∞ v·∫≠y l√† <code class=\"language-inline-text\">React.Component</code> ƒë∆∞·ª£c giao nhi·ªám v·ª• update state th√¨ n√≥ ch·∫°y m·ªôt ƒëo·∫°n code ch·ªâ ƒë·ªãnh theo t·ª´ng platform.</p>\n<p>R·∫•t nhi·ªÅu ng∆∞·ªùi l·∫ßm t∆∞·ªüng c√≥ m·ªôt React <em>engine</em> b√™n trong package <code class=\"language-inline-text\">react</code>. ƒêi·ªÅu n√†y kh√¥ng ƒë√∫ng.</p>\n<p>Th·ª±c ch·∫•t, k·ªÉ t·ª´ phi√™n b·∫£n React 0.14, package <code class=\"language-inline-text\">react</code> ƒë√£ ƒë∆∞·ª£c t√°ch h·∫≥n ra cung c·∫•p c√°c API ƒë·ªÉ khai b√°o <em>component</em>. H·∫ßu h·∫øt code ƒë∆∞·ª£c th·ª±c hi·ªán ·ªü c√°c <strong>renderers</strong></p>\n<p><code class=\"language-inline-text\">react-dom</code>, <code class=\"language-inline-text\">react-dom/server</code>, <code class=\"language-inline-text\">react-native</code>, <code class=\"language-inline-text\">react-test-renderer</code>, <code class=\"language-inline-text\">react-art</code> l√† nh·ªØng <strong>renderers</strong> nh∆∞ v·∫≠y. V√† b·∫°n c≈©ng c√≥ th·ªÉ t·ª± build m·ªôt c√°i  lu√¥n.</p>\n<p>ƒê√≥ l√† l√Ω do t·∫°i sao package <code class=\"language-inline-text\">react</code> r·∫•t l√† h·ªØu d·ª•ng d√π b·∫°n ƒëang s·ª≠ d·ª•ng tr√™n b·∫•t k·ª≥ platform n√†o. T·∫•t c·∫£ nh·ªØng g√¨ n√≥ export, nh∆∞ <code class=\"language-inline-text\">React.Component</code>, <code class=\"language-inline-text\">React.createElement</code>, <code class=\"language-inline-text\">React.Children</code> v√† th·∫≠m ch√≠ l√† <em>Hook</em>, ƒë·ªôc l·∫≠p ho√†n to√†n v·ªõi platform. V√† khi d√πng chung v·ªõi React DOM, React DOM server, React Native, c√°c component c·ªßa ch√∫ng ta v·∫´n import v√† s·ª≠ d·ª•ng nh∆∞ nhau.</p>\n<p>Nh·ªØng th·∫±ng renderer s·∫Ω c√≥ c√°c API nh∆∞ <code class=\"language-inline-text\">ReactDOM.render()</code> cho ph√©p mount c·∫•u tr√∫c React Component v√†o DOM node. M·ªói th·∫±ng renderer s·∫Ω cung c·∫•p c√°c API t∆∞∆°ng t·ª± nh∆∞ v·∫≠y tr√™n platform c·ªßa n√≥. T·∫•t c·∫£ c√°c component khi ƒë∆∞·ª£c khai b√°o kh√¥ng c·∫ßn import b·∫•t c·ª© g√¨ t·ª´ renderer, nh∆∞ v·∫≠y ƒë·ªÉ n√≥ portable.\nB·∫°n c√≥ th·ªÉ hi·ªÉu l√† t·∫°i sao khi c·∫≠p nh·∫≠p th√¨ ch√∫ng ta c·∫ßn c·∫≠p nh·∫≠p c·∫£ 2 package <code class=\"language-inline-text\">react</code> v√† <code class=\"language-inline-text\">react-dom</code> c√πng l√∫c. V√≠ d·ª• khi React 16.3 ra API context, <code class=\"language-inline-text\">React.createContext()</code>, c√°i n√†y <code class=\"language-inline-text\">react</code> ch∆∞a c√≥ implement, m√† ƒë∆∞·ª£c implement trong renderer nh∆∞  React DOM, v√† React DOM Server s·∫Ω c√≥ 2 c√°ch implement kh√°c nhau, React DOM c√≥ th·ªÉ track context m·ªôt chi·ªÅu, nh∆∞ng React DOM Server s·∫Ω track theo ki·ªÉu kh√°c.</p>\n<p>V·∫´n ch∆∞a tr·∫£ l·ªùi ƒë∆∞·ª£c c√¢u h·ªèi ban ƒë·∫ßu, l√†m sao <code class=\"language-inline-text\">setState()</code> b√™n trong <code class=\"language-inline-text\">React.Component</code> <strong>n√≥i chuy·ªán</strong> v·ªõi ƒë√∫ng renderer n√≥ c·∫ßn.</p>\n<p>C√¢u tr·∫£ l·ªùi l√† c√°c renderer set m·ªôt field ƒë·∫∑c bi·ªát trong l√∫c create class. Field n√†y g·ªçi l√† <code class=\"language-inline-text\">updater</code>, gi√° tr·ªã n√†y b·∫°n ko ph·∫£i set, m√† l√† c√¥ng vi·ªác c·ªßa React DOM, React DOM server, React Native set ngay sau khi t·∫°o 1 instance c·ªßa class.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// B√™n trong React DOM</span>\n<span class=\"token keyword\">const</span> inst <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">YourComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninst<span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\ninst<span class=\"token punctuation\">.</span>updater <span class=\"token operator\">=</span> ReactDOMUpdater<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// B√™n trong React DOM Server</span>\n<span class=\"token keyword\">const</span> inst <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">YourComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninst<span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\ninst<span class=\"token punctuation\">.</span>updater <span class=\"token operator\">=</span> ReactDOMServerUpdater<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// B√™n trong React Native</span>\n<span class=\"token keyword\">const</span> inst <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">YourComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninst<span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\ninst<span class=\"token punctuation\">.</span>updater <span class=\"token operator\">=</span> ReactNativeUpdater<span class=\"token punctuation\">;</span></code></pre></div>\n<p>B√™n trong React, n√≥ ch·ªâ delegate l·∫°i c√¥ng vi·ªác cho c√°c renderer</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// v√≠ d·ª• ƒë√£ ƒë∆∞·ª£c c·∫Øt b·ªõt c√°c ph·∫ßn kh√°c.</span>\n<span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">partialState<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// S·ª≠ d·ª•ng field `updater`</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>updater<span class=\"token punctuation\">.</span><span class=\"token function\">enqueueSetState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> partialState<span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Hy v·ªçng b·∫°n ƒë√£ hi·ªÉu t·∫°i sao <code class=\"language-inline-text\">this.setState()</code> c√≥ th·ªÉ update ƒë∆∞·ª£c DOM</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://overreacted.io/how-does-setstate-know-what-to-do/\">How does setstate know what to do</a></p>\n","cover_image":""}},{"node":{"id":"5d93819d1a5c10be427112a7e0bf625b","title":"Gi·ªõi thi·ªáu React.memo","path":"/2018-11-04-gioi-thieu-react-memo-moi-trong-react16/","date":"2018-11-04","timeToRead":1,"desc":"Api m·ªõi c·ªßa React 16.6","content":"<p>Functional Component, ho·∫∑c Class Component return <code class=\"language-inline-text\">false</code> trong <code class=\"language-inline-text\">shouldComponentUpdate</code>, component ƒë√≥ s·∫Ω kh√¥ng b·ªã re-render khi <strong>tree</strong> thay ƒë·ªïi, n√≥ ch·ªâ thay ƒë·ªïi khi <code class=\"language-inline-text\">prop</code> truy·ªÅn v√†o thay ƒë·ªïi</p>\n<p><code class=\"language-inline-text\">React.memo()</code> ho·∫°t ƒë·ªông y chang nh∆∞ <code class=\"language-inline-text\">React.PureComponent()</code>, nh∆∞ng n√≥ l√† function component thay v√¨ class nh∆∞ <code class=\"language-inline-text\">PureComponent</code>.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> MyComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">MyComponent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* ch·ªâ render khi prop thay ƒë·ªïi */</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// khai b√°o b·∫±ng arrow function</span>\n<span class=\"token keyword\">const</span> MyComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>my memoized component<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ng·∫Øn h∆°n n·ªØa</span>\n<span class=\"token keyword\">const</span> MyComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>implicit memoized component<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>V√¨ <code class=\"language-inline-text\">React.memo()</code> l√† HOC, ch√∫ng ta c≈©ng c√≥ th·ªÉ d√πng nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">RocketComponent</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>my rocket component<span class=\"token punctuation\">.</span> <span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>fuel<span class=\"token punctuation\">}</span><span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// m·ªôt version ch·ªâ render khi prop thay ƒë·ªïi</span>\n<span class=\"token keyword\">const</span> MemoizedRocketComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>RocketComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>T·∫°i sao ƒë·∫∑t t√™n l√† <code class=\"language-inline-text\">memo</code> nghe c√≥ v·∫ª ch∆∞·ªõng tai? <strong>Memoization</strong> l√† m·ªôt k·ªπ thu·∫≠t l·∫≠p tr√¨nh ƒë·ªÉ optimize t·ªëc ƒë·ªô, th·ª±c hi·ªán b·∫±ng vi·ªác l∆∞u k·∫øt qu·∫£ c·ªßa m·ªôt function v√†o cache ƒë·ªÉ n·∫øu c√≥ g·ªçi v√† truy·ªÅn v√†o c√πng input th√¨ return cache thay v√¨ th·ª±c thi c√°c c√¢u l·ªánh trong function.</p>\n","cover_image":""}},{"node":{"id":"12b2cd38bed043dbfa473bf29abfdeb6","title":"S·ª≠ d·ª•ng React.lazy ra l√†m sao?","path":"/2018-10-31-gioi-thieu-react-lazy/","date":"2018-10-31","timeToRead":1,"desc":"Api m·ªõi c·ªßa React 16.6","content":"<p>React 16.6 gi·ªõi thi·ªáu api m·ªõi, <a href=\"https://reactjs.org/docs/code-splitting.html#reactlazy\" target=\"_blank\" rel=\"noopener noreferrer\">React.lazy</a>, function n√†y s·∫Ω cho ph√©p ch√∫ng ta render 1 component ƒë∆∞·ª£c import ki·ªÉu <a href=\"/blog/2018-10-07-huong-dan-lazy-load-component-react\">lazy load</a></p>\n<p>Nh∆∞ tr∆∞·ªõc ƒë√¢y ch√∫ng ta th∆∞·ªùng ph·∫£i t·ª± vi·∫øt ph·∫ßn ki·ªÉm tra khi n√†o n√™n load, k·∫øt h·ª£p v·ªõi <code class=\"language-inline-text\">componentDidUpdate</code>. Ch√∫ng ta kh√¥ng c·∫ßn l√†m nh·ªØng c√¥ng vi·ªác nh∆∞ v·∫≠y n·ªØa, v·ªõi api m·ªõi n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> LazyComponent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./Component'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Wrap component n√†y l·∫°i b√™n trong <code class=\"language-inline-text\">Suspense</code>, tr·∫£ fallback khi ko load ƒë∆∞·ª£c</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Suspense</span></span> <span class=\"token attr-name\">fallback</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Loading Component...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LazyComponent</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Suspense</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>S·ª≠ d·ª•ng <code class=\"language-inline-text\">React.lazy</code> ƒë·ªÉ l√†m v√≠ d·ª• sau</p>\n<p><a href=\"http://vigneshm.com/react-lazy-example/\" target=\"_blank\" rel=\"noopener noreferrer\">Demo</a></p>\n<p><a href=\"https://github.com/vigzmv/react-lazy-example\" target=\"_blank\" rel=\"noopener noreferrer\">Source Github</a></p>\n<p>Ph·∫ßn code s·ª≠ d·ª•ng <code class=\"language-inline-text\">React.lazy</code> kh√¥ng c√≥ g√¨ cao si√™u, thay v√¨ import b√¨nh th∆∞·ªùng, ch√∫ng ta <em>import</em> b·∫±ng <code class=\"language-inline-text\">React.lazy</code>.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> User <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./User'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//...</span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.Suspense</span></span> <span class=\"token attr-name\">fallback</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Loading Component...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span>user <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">User</span></span> <span class=\"token attr-name\">user</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span>loading <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Loading User...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">!</span>user <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>loadUser<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Press Me!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.Suspense</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Ch∆∞a t√¨m ƒë∆∞·ª£c t√†i li·ªáu ch√≠nh th·ª©c v·ªÅ <code class=\"language-inline-text\">React.Suspense</code>, m√¨nh ch·ªâ gi·∫£i th√≠ch nhanh</p>\n<p>Suspense l√† m·ªôt t√≠nh nƒÉng m·ªõi c·ªßa React, c√≥ th·ªÉ hi·ªÉu n√≥ nh∆∞ l√† m·ªôt <strong>Placeholder</strong> component, m√† theo ƒë·ªãnh nghƒ©a ch√≠nh x√°c ƒë·∫ßy ƒë·ªß nh·∫•t</p>\n<blockquote>\n<p>Suspense allows you to defer rendering part of your application tree until some condition is met (for example, data from an endpoint or a resource is loaded).</p>\n</blockquote>\n<p>T·∫°m d·ªãch: Suspense cho ph√©p ch√∫ng ta defer render (render kh√¥ng ƒë·ªìng th·ªùi) m·ªôt ph·∫ßn c·ªßa <strong>tree</strong> ƒë·∫øn khi th√µa ƒëi·ªÅu ki·ªán ( th√≠ d·ª• load xong data v√† resource )</p>\n<p><a href=\"https://codesandbox.io/s/8nq4w3jj39\" target=\"_blank\" rel=\"noopener noreferrer\">Demo Suspense</a></p>\n<p><a href=\"https://dev.to/vigzmv/reactlazy-what-and-how-to-use-in-your-app-p9a\" target=\"_blank\" rel=\"noopener noreferrer\">React.lazy, What and how to use in your app</a></p>\n","cover_image":""}},{"node":{"id":"ca24b2d17059151f239229dbb5d217c5","title":"Em c√≥ mu·ªën h·ªèi c√¢u g√¨ kh√¥ng?","path":"/2018-10-15-nhung-cau-nen-hoi-khi-di-phong-van/","date":"2018-10-15","timeToRead":12,"desc":"M·ªôt c√¢u b·∫°n s·∫Ω ƒë∆∞·ª£c h·ªèi trong l√∫c ph·ªèng v·∫•n, m·ªôt c∆° h·ªôi ƒë·ªÉ b·∫°n t√¨m hi·ªÉu v·ªÅ c√¥ng ty, v·∫≠y n√™n h·ªèi nh·ªØng c√¢u n√†o?","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#quy-tr%C3%ACnh-n%C6%A1i-l%C3%A0m-vi%E1%BB%87c-team\">Quy tr√¨nh, n∆°i l√†m vi·ªác, team</a></li>\n<li><a href=\"#c%C3%A1c-v%E1%BA%A5n-%C4%91%E1%BB%81-li%C3%AAn-quan-%C4%91%E1%BA%BFn-k%E1%BB%B9-thu%E1%BA%ADt\">C√°c v·∫•n ƒë·ªÅ li√™n quan ƒë·∫øn k·ªπ thu·∫≠t</a></li>\n<li><a href=\"#x%E1%BB%AD-l%C3%BD-c%C3%A1c-t%C3%ACnh-hu%E1%BB%91ng-kh%E1%BA%A9n-c%E1%BA%A5p\">X·ª≠ l√Ω c√°c t√¨nh hu·ªëng kh·∫©n c·∫•p</a></li>\n<li><a href=\"#con-%C4%91%C6%B0%E1%BB%9Dng-ph%C3%A1t-tri%E1%BB%83n-cho-t%E1%BB%ABng-nh%C3%A2n-vi%C3%AAn\">Con ƒë∆∞·ªùng ph√°t tri·ªÉn cho t·ª´ng nh√¢n vi√™n</a></li>\n<li><a href=\"#ph%C6%B0%C6%A1ng-ph%C3%A1p-qu%E1%BA%A3n-l%C3%BD-d%E1%BB%B1-%C3%A1n-v%C3%A0-x%C3%A9t-%C4%91%E1%BB%99-%C6%B0u-ti%C3%AAn\">Ph∆∞∆°ng ph√°p qu·∫£n l√Ω d·ª± √°n v√† x√©t ƒë·ªô ∆∞u ti√™n</a></li>\n<li><a href=\"#%C4%91%C3%A3-h%E1%BA%BFt-gi%E1%BB%9D-h%E1%BB%8Fi\">ƒê√£ h·∫øt gi·ªù h·ªèi!</a></li>\n</ul>\n<!-- /TOC -->\n<h1 id=\"quy-tr√¨nh-n∆°i-l√†m-vi·ªác-team\"><a href=\"#quy-tr%C3%ACnh-n%C6%A1i-l%C3%A0m-vi%E1%BB%87c-team\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Quy tr√¨nh, n∆°i l√†m vi·ªác, team</h1>\n<p><strong>M·ªôt task d√†i nh·∫•t l√† bao l√¢u? Fix m·ªôt l·ªói t·ªën nhi·ªÅu nh·∫•t l√† bao l√¢u? Theo anh ƒë√°nh gi√°, m·∫•t bao l√¢u ƒë·ªÉ hi·ªÉu h·∫øt to√†n b·ªô source code hi·ªán t·∫°i?</strong></p>\n<p>M·ªôt task c√†ng ng·∫Øn, ch·ª©ng t·ªè quy tr√¨nh t·ªët v√† ki·∫øn tr√∫c d·ª± √°n t·ªët, task ƒë∆∞·ª£c ph√¢n chia m·ªôt c√°ch r√µ r√†ng, l·ªói ƒë∆∞·ª£c c√¥ l·∫≠p v√† ki·ªÉm so√°t t·ªët.</p>\n<p>V·ªõi level junior ho·∫∑c mid th√¨ t·ªën m·ªôt th√°ng ƒë·ªÉ th√†nh th·∫°o l√† b√¨nh th∆∞·ªùng, ng∆∞·ªùi qu·∫£n l√Ω c√≥ v·∫•n ƒë·ªÅ g√¨ v·ªõi th·ªùi gian ƒë·ªÉ th√≠ch nghi nh∆∞ th·∫ø kh√¥ng, ƒë·∫∑c bi·ªát n·∫øu b·∫°n ch·ªâ ·ªü m·ª©c junior</p>\n<p>R·∫•t nhi·ªÅu team s·∫Ω kh√¥ng c√≥ 1 ng∆∞·ªùi c√≥ th·ªÉ hi·ªÉu h·∫øt to√†n b·ªô source code, c√≥ th·ªÉ gi·∫£i th√≠ch cho b·∫°n b·∫•t c·ª© ch·ªï n√†o. Nh∆∞ng hy v·ªçng b·∫°n lead c√≥ th·ªÉ n·∫Øm s∆° v√† bi·∫øt ai ƒëang ph·ª• tr√°ch ph·∫ßn n√†o.</p>\n<p><strong>M√¨nh ƒë∆∞·ª£c c·∫•p m√°y t√≠nh g√¨, c√¥ng ty c√≥ c·∫•p cho m√¨nh thi·∫øt b·ªã m√† m√¨nh c·∫ßn ƒë·ªÉ ph·ª•c v·ª• c√¥ng vi·ªác</strong></p>\n<p>V·ªõi m·∫•y ng√†nh kh√°c th√¨ kh√¥ng bi·∫øt sao, ch·ª© l√† d√¢n dev, c√°i m√°y t√≠nh r·∫•t quan tr·ªçng, m·ªôt ng√†y l√†m vi·ªác 8 ti·∫øng, m·ªôt tu·∫ßn c√†y ƒë·ªß 7 ng√†y, vi·ªác m·ªôt c√°i m√°y t√≠nh ch·∫°y ngon l√†nh kh√¥ng ch·∫øt n·ª≠a ch·ª´ng, kh√¥ng d√≠nh virus, ko t·ª± t·∫Øt m√°y b·∫•t th√¨nh l√¨nh l√† v√¥ c√πng c·∫ßn thi·∫øt.</p>\n<p>C√°c c√¥ng ty l·ªõn th∆∞·ªùng vi·ªác mua th√™m thi·∫øt b·ªã c≈©ng r·∫•t l·∫±ng nh·∫±n v·ªÅ quy tr√¨nh mua s·∫Øm thi·∫øt b·ªã m·ªõi.</p>\n<p><strong>L√†m sao c√¥ng ty ƒë√°nh gi√° ƒë∆∞·ª£c l√† em vi·ªác t·ªët, hi·ªáu qu·∫£ cao?</strong></p>\n<p>C√¢u n√†y quan tr·ªçng nh·∫•t nh√©, m·ªói ng∆∞·ªùi qu·∫£n l√Ω, m·ªói c√¥ng ty s·∫Ω c√≥ c√°ch tr·∫£ l·ªùi kh√°c nhau.</p>\n<p>N√≥ c≈©ng t√πy thu·ªôc v·ªã tr√≠ b·∫°n ƒëang apply, junior c√≥ th·ªÉ b·∫°n h·ªçc ƒë∆∞·ª£c nhanh t·ª´ nh·ªØng ng∆∞·ªùi kh√°c, senior th√¨ b·∫°n gi√∫p ƒë·ªìng nghi·ªáp c·ªßa m√¨nh n√¢ng cao ch·∫•t l∆∞·ª£ng c√¥ng vi·ªác.</p>\n<p><strong>Th∆∞·ªùng th√¨ 2 dev c√≥ c√πng l√†m 1 task kh√¥ng? (ho·∫∑c nhi·ªÅu h∆°n)</strong></p>\n<p>Pair program ho·∫∑c mob program c√≥ ƒë∆∞·ª£c √°p d·ª•ng trong c√¥ng ty kh√¥ng?</p>\n<p>C√°ch nh√¨n nh·∫≠n c·ªßa ng∆∞·ªùi l√†m chung v·ªÅ v·∫•n ƒë·ªÅ h·ªó tr·ª£ gi·ªØa c√°c b·ªô ph·∫≠n, ƒë√£ √°p d·ª•ng ch∆∞a?</p>\n<p><strong>C√≥ bao nhi√™u dev trong c√¥ng ty ch·ªâ m·ªõi l√†m vi·ªác trong kho·∫£ng 6 th√°ng?</strong></p>\n<p>C√≥ 2 nguy√™n nh√¢n cho v·∫•n ƒë·ªÅ n√†y: (1) ph√°t tri·ªÉn nhanh c·∫ßn th√™m ng∆∞·ªùi, (2) c√°c b·∫°n dev r·ªß nhau ra ƒëi qu√° ƒë√¥ng.</p>\n<p>C√¥ng ty ph√°t tri·ªÉn nhanh kh√¥ng c√≥ nghƒ©a l√† kh√¥ng c√≥ v·∫•n ƒë·ªÅ, h·ªç s·∫Ω √°p d·ª•ng nh·ªØng quy tr√¨nh m·ªõi, t·∫≠p h·ª£p nh·ªØng ng∆∞·ªùi ch∆∞a t·ª´ng l√†m vi·ªác chung v·ªõi nhau th√†nh m·ªôt team.</p>\n<p>Dev r·ªß nhau ra ƒëi qu√° ƒë√¥ng l√† t√¨nh hu·ªëng kh√¥ng ai mu·ªën nghe. C√≥ th·ªÉ c√¥ng ty ƒëang g·∫∑p kh√≥ khƒÉn ƒë·ªÉ c·ª©u v·ªõt d·ª± √°n s·∫Øp ch·∫øt, ch√≠nh s√°ch c√¥ng ty kh√¥ng t·ªët, hay l√† lead ngh·ªâ k√©o ng∆∞·ªùi theo, d√π l√† nguy√™n nh√¢n g√¨ c≈©ng n√™n bi·∫øt ch√≠nh x√°c.</p>\n<p>Team size ƒëang l√† bao nhi√™u ng∆∞·ªùi, s·ªë l∆∞·ª£ng mong mu·ªën l√† bao nhi√™u c≈©ng l√† m·ªôt c√°ch ƒë·ªÉ bi·∫øt.</p>\n<p><strong>C√≥ bao nhi√™u dev l√†m ·ªü ƒë√¢y 2, 4 nƒÉm r·ªìi?</strong></p>\n<p>M·ªôt minh ch·ª©ng cho vi·ªác c√°c dev c·∫£m th·∫•y h√†i l√≤ng v·ªõi c√¥ng ty. 1 dev c√≥ th·ªÉ <strong>ch·ªãu ƒë·ª±ng</strong> c√¥ng ty trong t·ªëi ƒëa m·ªôt nƒÉm, nh∆∞ng s·∫Ω hi·∫øm th·∫•y vi·ªác nhi·ªÅu dev c√≥ th·ªÉ c√πng ch·ªãu ƒë·ª±ng ƒë∆∞·ª£c trong nhi·ªÅu nƒÉm.</p>\n<p>V·ªõi nh·ªØng c√¥ng ty startup (th·ªùi gian th√†nh l·∫≠p b√© h∆°n 2 nƒÉm) th√¨ ch·ªâ c·∫ßn bi·∫øt ng∆∞·ªùi ƒë·∫ßu ti√™n gia nh·∫≠p c√¥ng ty c√≤n l√†m kh√¥ng.</p>\n<h1 id=\"c√°c-v·∫•n-ƒë·ªÅ-li√™n-quan-ƒë·∫øn-k·ªπ-thu·∫≠t\"><a href=\"#c%C3%A1c-v%E1%BA%A5n-%C4%91%E1%BB%81-li%C3%AAn-quan-%C4%91%E1%BA%BFn-k%E1%BB%B9-thu%E1%BA%ADt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C√°c v·∫•n ƒë·ªÅ li√™n quan ƒë·∫øn k·ªπ thu·∫≠t</h1>\n<p>M√¥i tr∆∞·ªùng l√†m vi·ªác l√† s·∫£n ph·∫©m c√°c dev ƒëang t·∫°o v√† vƒÉn h√≥a qu·∫£n l√Ω t·∫°o b·ªüi lead, m√¥i tr∆∞·ªùng l√†m vi·ªác t·ªët l√† c√¥ng vi·ªác kh√¥ng lu√¥n trong t√¨nh tr·∫°ng ch·∫°y ƒëua v·ªõi deadline.</p>\n<p><strong>T·ªën bao l√¢u ƒë·ªÉ ho√†n t·∫•t deploy?</strong></p>\n<p>N·∫øu t·ªën nhi·ªÅu th·ªùi gian deploy, nghƒ©a l√† n√≥ ƒëang ƒë∆∞·ª£c l√†m th·ªß c√¥ng, d·ªÖ ph√°t sinh l·ªói.</p>\n<p><strong>Th·∫ø n√†o ƒë∆∞·ª£c xem l√† m·ªôt pull request l·ªõn, s·ªë d√≤ng code, s·ªë file</strong></p>\n<p>N·∫øu task ƒë∆∞·ª£c chia nh·ªè s·∫Ω d·ªÖ qu·∫£n l√Ω, √≠t b·ªã conflict. Pull request nh·ªè ch·ª©ng t·ªè merge code th∆∞·ªùng xuy√™n, c√¥ng ty ƒëang theo quy tr√¨nh qu·∫£n l√Ω hi·ªán ƒë·∫°i. Branche l·ªõn, k√©o d√†i, cho th·∫•y ng∆∞·ªùi senior thi·∫øu kinh nghi·ªám chia c√¥ng vi·ªác. Pull request l·ªõn ch·ªâ khi source code ƒë∆∞·ª£c ph√¢n t√°ch r·∫•t r√µ r√†ng, ƒë·ªôc l·∫≠p, pull request nh·ªè c≈©ng ch·ª©ng t·ªè code ƒë∆∞·ª£c t·ªï ch·ª©c r·∫•t t·ªët.</p>\n<p>V·ªõi c√° nh√¢n m√¨nh, m·ªôt pull request ƒë∆∞·ª£c cho l√† l·ªõn khi c√≥ kho·∫£ng 2000 d√≤ng code, 20 file kh√°c nhau.</p>\n<p>M·ªôt c√¢u tr·∫£ l·ªùi m√¨nh c≈©ng mong mu·ªën nh·∫≠n ƒë∆∞·ª£c l√† c√°c team s·∫Ω l√†m vi·ªác tr√™n t·ª´ng feature branch. T·ªï ch·ª©c g√≠t theo t·ª´ng feature gi√∫p code d·ªÖ maintain h∆°n, m·∫∑c d√π c√°i n√†y kh√¥ng ph·∫£i l√∫c n√†o c≈©ng ƒë√∫ng, ƒë√¥i khi feature branch c≈©ng r·ªëi l·∫Øm.</p>\n<p><strong>Ph·∫£i ƒë·ª•ng ƒë·∫øn bao nhi√™u repository ƒë·ªÉ update m·ªôt t√≠nh nƒÉng n√†o ƒë√≥?</strong></p>\n<p>C√≥ nh·ªØng project ch·ªâ bao g·ªìm m·ªôt repository, c·∫£ ng√†n commit m·ªôt ng√†y. C√≥ d·ª± √°n ƒë∆∞·ª£c t·ªï ch·ª©c b·ªüi c·∫£ ch·ª•c c√°i repository quan h·ªá ch·∫±ng ch·ªãt v·ªõi nhau. C√¢u h·ªèi n√†y gi√∫p hi·ªÉu r√µ h∆°n c·∫•u tr√∫c project v√† c√°ch ph√¢n chia code. </p>\n<p>V·ªõi nh·ªØng c√¥ng ty tr·∫ª, ch·ªâ c√≥ m·ªôt s·∫£n ph·∫©m, c√≥ qu√° nhi·ªÅu repository c≈©ng kh√¥ng t·ªët. C√¥ng ty nh·ªè n√™n t·∫≠p trung v√† ti·∫øt ki·ªám th·ªùi gian t·ªëi ƒëa, x√¢y d·ª±ng s·∫£n ph·∫©m ƒë∆∞a ƒë·∫øn user, vi·ªác c√≥ nhi·ªÅu repository khi·∫øn ti√™u t·ªën th·ªùi gian ƒë·ªÉ qu·∫£n l√Ω v√† deploy kh√° nhi·ªÅu.</p>\n<p>M√¨nh c≈©ng th∆∞·ªùng h·ªèi c√°ch qu·∫£n l√Ω khi code b·ªã duplicate v√† c√°c th∆∞ vi·ªán c·ªßa ri√™ng c√¥ng ty.</p>\n<p><strong>Vi·ªác ph·∫£i thay ƒë·ªïi tr√™n nhi·ªÅu repository c√≥ th∆∞·ªùng xuy√™n kh√¥ng?</strong></p>\n<p>N·∫øu c√°c module kh√¥ng ƒë∆∞·ª£c t√°ch bi·ªát t·ªët, vi·ªác thay ƒë·ªïi nh∆∞ th·∫ø r·∫•t hay x·∫£y ra. Ph·∫£i deploy c√πng l√∫c nhi·ªÅu service s·∫Ω kh√≥ ƒëo√°n ƒë∆∞·ª£c l·ªói do ƒë√¢u n·∫øu c√≥ x·∫£y ra. C√πng ƒë·ªìng nghƒ©a v·ªõi vi·ªác service ch∆∞a ƒë∆∞·ª£c c·∫•u tr√∫c t·ªët.</p>\n<h1 id=\"x·ª≠-l√Ω-c√°c-t√¨nh-hu·ªëng-kh·∫©n-c·∫•p\"><a href=\"#x%E1%BB%AD-l%C3%BD-c%C3%A1c-t%C3%ACnh-hu%E1%BB%91ng-kh%E1%BA%A9n-c%E1%BA%A5p\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>X·ª≠ l√Ω c√°c t√¨nh hu·ªëng kh·∫©n c·∫•p</h1>\n<p><strong>C√≥ hay x·∫£y ra t√¨nh hu·ªëng ph·∫£i fix l·ªói kh·∫©n c·∫•p? Th·∫ø n√†o ƒë∆∞·ª£c xem l√† t√¨nh hu·ªëng kh·∫©n c·∫•p?</strong></p>\n<p>Th√≠ d·ª• nh∆∞ user kh√¥ng th·ªÉ truy c·∫≠p v√†o website, th·ª±c hi·ªán thanh to√°n kh√¥ng ƒë∆∞·ª£c sau khi n√¢ng c·∫•p t√≠nh nƒÉng m·ªõi.</p>\n<p>N·∫øu nh·ªØng t√¨nh hu·ªëng nh∆∞ v·∫≠y x·∫£y ra th∆∞·ªùng xuy√™n, ch·ª©ng t·ªè vi·ªác thay ƒë·ªïi m·ªôt ph·∫ßn d√π ch·ªâ nh·ªè trong code c≈©ng r·∫•t kh√≥. Trong source code ph·ª• thu·ªôc l·∫´n nhau kh√¥ng bi·∫øt tr∆∞·ªõc ƒë∆∞·ª£c.</p>\n<p><strong>Qu√° tr√¨nh x·ª≠ l√Ω l·ªói ph√°t sinh l√† nh∆∞ th·∫ø n√†o?</strong></p>\n<p>V·ªõi c√°c c√¥ng ty startup, thi·∫øu c√°c quy tr√¨nh n√†y l√† ƒëi·ªÅu t·ªët, code ch·∫°y t·ªët qu√° ƒë√¢u c·∫ßn quy tr√¨nh :D. Ch∆∞a c√≥ nhi·ªÅu l·ªói ƒë·∫øn m·ª©c ng∆∞·ªùi ta ph·∫£i nghƒ© ra quy tr√¨nh cho v·∫•n ƒë·ªÅ n√†y.</p>\n<p>V·ªõi nh·ªØng c√¥ng ty ƒë√£ ƒë∆∞·ª£c th√†nh l·∫≠p l√¢u th√¨ ng∆∞·ª£c l·∫°i, ch·∫Øc ch·∫Øn h·ªç ƒë√£ g·∫∑p nhi·ªÅu l·∫ßn v·∫•n ƒë·ªÅ n√†y, c·∫ßn c√≥ quy tr√¨nh r√µ r√†ng ƒë·ªÉ gi·∫£i quy·∫øt ƒë·ªÉ tr√°nh l·∫∑p l·∫°i nh·ªØng l·ªói nh∆∞ v·∫≠y</p>\n<p><strong>Gi·ªØa ƒë√™m em c√≥ b·ªã nh·∫≠n cu·ªôc g·ªçi l√™n ƒë·ªÉ fix bug kh√¥ng?</strong></p>\n<p>Trong tr∆∞·ªùng h·ª£p n√†o b·∫°n s·∫Ω b·ªã g·ªçi l√™n s·ªØa l·ªói, y√™u c·∫ßu OT, trong tr∆∞·ªùng h·ª£p OT th√¨ c√≥ th√™m ti·ªÅn kh√¥ng</p>\n<p>Th∆∞·ªùng tr∆∞·ªùng h·ª£p nh∆∞ v·∫≠y trong c√¥ng ty c√≥ x·∫£y ra nhi·ªÅu kh√¥ng, c√≥ ƒë∆∞·ª£c request th√™m ng√†y ngh·ªâ ph√©p kh√¥ng tr·ª´ l∆∞∆°ng trong tr∆∞·ªùng h·ª£p ƒë√≥.</p>\n<p>Th·∫≠t l√≤ng m√† n√≥i m√¨nh c≈©ng kh√¥ng th√≠ch l√†m vi·ªác trong c√°c c√¥ng ty y√™u c·∫ßu nh√¢n vi√™n l√†m vi·ªác ngo√†i gi·ªù qu√° nhi·ªÅu nh∆∞ v·∫≠y.</p>\n<h1 id=\"con-ƒë∆∞·ªùng-ph√°t-tri·ªÉn-cho-t·ª´ng-nh√¢n-vi√™n\"><a href=\"#con-%C4%91%C6%B0%E1%BB%9Dng-ph%C3%A1t-tri%E1%BB%83n-cho-t%E1%BB%ABng-nh%C3%A2n-vi%C3%AAn\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Con ƒë∆∞·ªùng ph√°t tri·ªÉn cho t·ª´ng nh√¢n vi√™n</h1>\n<p><strong>N·∫øu ƒë√£ ho√†n th√†nh c√¥ng vi·ªác ƒë∆∞·ª£c giao, th·ªùi gian r·∫£nh th√¨ m√¨nh c√≥ th·ªÉ t·ª± nghi√™n c·ª©u, h·ªçc t·∫≠p kh√¥ng?</strong></p>\n<p>L√† m·ªôt Developer, s·ªëng trong m√¥i tr∆∞·ªùng c√¥ng ngh·ªá lu√¥n ph√°t tri·ªÉn kh√¥ng ng·ª´ng, ch√∫ng ta kh√¥ng ng·ª´ng h·ªçc h·ªèi cho k·ªãp v·ªõi l·ªõp tr·∫ª. C√°c c√¥ng ty lu√¥n y√™u c·∫ßu ho√†n th√†nh c√¥ng vi·ªác s·ªõm ch·ª´ng n√†o t·ªët ch·ª´ng ·∫•y, v√† v·∫´n ƒë·∫£m b·∫£o ch·∫•t l∆∞·ª£ng, ƒë·ªÉ ƒë√°p ·ª©ng ƒë∆∞·ª£c chuy·ªán ƒë√≥, developer ph·∫£i c√≥ r·∫•t nhi·ªÅu ki·∫øn th·ª©c, h·ªçc h·ªèi kh√¥ng ng·ª´ng t·ª´ c·ªông ƒë·ªìng, √°p d·ª•ng v√†o c√¥ng vi·ªác ƒëang l√†m, cho c√°c d·ª± √°n m·ªõi. ƒê·ªÉ tr·ªü th√†nh dev ch·∫•t kh√¥ng c√≥ c√°ch n√†o kh√°c l√† b·∫°n ph·∫£i d√†nh th·ªùi gian nghi√™n c·ª©u ƒë·ªÅu ƒë·∫∑n.</p>\n<p>V·ªõi c√¢u h·ªèi n√†y, ng∆∞·ªùi tr·∫£ l·ªùi t·ªët nh·∫•t ch√≠nh l√† c√°c b·∫°n dev ƒëang l√†m trong c√¥ng ty, ch·ª© kh√¥ng ph·∫£i c·∫•p qu·∫£n l√Ω, v√¨ nh·ªØng ng∆∞·ªùi qu·∫£n l√Ω s·∫Ω lu√¥n n√≥i ƒëi·ªÅu t·ªët v·ªÅ ch√≠nh s√°ch. Kh√¥ng ph·∫£i c√¥ng ty n√†o c≈©ng c√≥ ƒë·ªìng quan ƒëi·ªÉm v·ªÅ vi·ªác h·ªçc t·ª´ ƒë√¢u, h·ªçc nh∆∞ th·∫ø n√†o, h·ªçc th·ªùi gian n√†o, s·∫Ω c√≥ nh·ªØng c√¥ng ty kh√¥ng cho ph√©p nh√¢n vi√™n truy c·∫≠p youtube, v·ªën l√† ngu·ªìn resource h·ªçc l·ªõn ƒë·ªëi v·ªõi m√¨nh, b√™n c·∫°nh medium. N·∫øu n√≥i th·ªùi gian nghi√™n c·ª©u c·ªßa nh√¢n vi√™n l√† vi·ªác nh√¢n vi√™n ph·∫£i l√†m ·ªü nh√†, c√¥ng ty ch·ªâ tr·∫£ ti·ªÅn 8 ti·∫øng cho b·∫°n ƒë·ªÉ l√†m vi·ªác trong c√¥ng ty kh√¥ng ph·∫£i ƒë·ªÉ ng·ªìi nghi√™n c·ª©u l√† m√¨nh th·∫•y kh√¥ng ƒë·ªìng √Ω.</p>\n<p><strong>C√°ch ƒë√°nh gi√° m·ªôt developer ch·∫•t l∆∞·ª£ng, c√≥ s·ª± ph√°t tri·ªÉn trong c√¥ng vi·ªác?</strong></p>\n<p>M·ªôt s·ªë c√¥ng ty ƒë√°nh gi√° developer ch·∫•t b·∫±ng vi·ªác anh ta ho√†n th√†nh to√†n b·ªô deadline, kh√¥ng g√¢y nhi·ªÅu issue. M·ªôt v√†i c√¥ng ty c√≥ ch∆∞∆°ng tr√¨nh ƒë√†o t·∫°o cho nh√¢n vi√™n m·ªõi, gi√∫p b·∫°n ƒë·∫°t v·ªã tr√≠ cao h∆°n, ho·∫∑c ƒë∆∞·ª£c ngh√≠a c√°c d·ª± √°n kh√°c ƒë·ªÉ h·ªçc h·ªèi c√¥ng ngh·ªá.\nNh∆∞ng c∆° b·∫£n ph·∫£i bi·∫øt m√¨nh mu·ªën g√¨ trong t∆∞∆°ng lai, v√† l√†m ·ªü c√¥ng ty ƒë√≥ th√¨ b·∫°n c√≥ ƒë·∫°t ƒë∆∞·ª£c m·ª•c ti√™u c·ªßa m√¨nh ng√†y qua ng√†y kh√¥ng.</p>\n<p><strong>C√¥ng ty c√≥ nh·ªØng ho·∫°t ƒë·ªông chia s·∫ª ki·∫øn th·ª©c nh∆∞ l√† semi t·ªï ch·ª©c r·∫ßm r·ªô kh√¥ng?</strong></p>\n<p>Chia s·∫ª ki·∫øn th·ª©c gi·ªØa c√°c developer l√† m·ªôt ph·∫ßn r·∫•t quan tr·ªçng. N·∫øu c√≥ c√°c bu·ªïi workshop h√†ng th√°ng, h√†ng qu√Ω ƒë·ªÉ ƒë·ªìng nghi·ªáp senior chia s·∫ª v√† c√πng nhau b√†n lu·∫≠n th√¨ tuy·ªát v·ªùi, n·∫øu ƒë∆∞·ª£c tr·∫£ l·ªùi ‚Äúc√≥, nh∆∞ng th·∫≠t s·ª± ch∆∞a ƒë·ªß‚Äù th√¨ qu√° ƒë·ªânh r·ªìi.</p>\n<p><strong>C√≥ ƒë∆∞·ª£c tham gia c√°c h·ªôi th·∫£o c√≥ t√≠nh ph√≠ kh√¥ng?</strong></p>\n<p>C√°c h·ªôi th·∫£o chuy√™n m√¥n, ƒë·∫∑c bi·ªát c√≥ t√≠nh ph√≠ tham gia r·∫•t t·ªët cho s·ª± ph√°t tri·ªÉn c√° nh√¢n, n·∫øu c√¥ng ty c√≥ chi tr·∫£ cho nh√¢n vi√™n tham gia nh·ªØng h·ªôi th·∫£o nh∆∞ v·∫≠y th√¨ qu√° tuy·ªát. N·∫øu ƒë∆∞·ª£c t√†i tr·ª£ tham gia c√°c h·ªôi th·∫£o nh∆∞ v·∫≠y, b·∫°n c≈©ng n√™n share l·∫°i ki·∫øn th·ª©c c√≥ ƒë∆∞·ª£c v·ªõi ƒë·ªìng nghi·ªáp trong c√°c bu·ªïi meeting n·ªôi b·ªô. M·ªói nƒÉm m·ªôt l·∫ßn l√† ƒë·ªß v·ªõi m√¨nh.</p>\n<h1 id=\"ph∆∞∆°ng-ph√°p-qu·∫£n-l√Ω-d·ª±-√°n-v√†-x√©t-ƒë·ªô-∆∞u-ti√™n\"><a href=\"#ph%C6%B0%C6%A1ng-ph%C3%A1p-qu%E1%BA%A3n-l%C3%BD-d%E1%BB%B1-%C3%A1n-v%C3%A0-x%C3%A9t-%C4%91%E1%BB%99-%C6%B0u-ti%C3%AAn\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ph∆∞∆°ng ph√°p qu·∫£n l√Ω d·ª± √°n v√† x√©t ƒë·ªô ∆∞u ti√™n</h1>\n<p><strong>C√°ch anh ƒëi·ªÅu ph·ªëi gi·ªØa vi·ªác ƒë∆∞a th√™m t√≠nh nƒÉng m·ªõi v√† b·∫£o tr√¨ nh·ªØng t√≠nh nƒÉng c≈©</strong></p>\n<p>Theo nhi·ªÅu kinh nghi·ªám ƒë∆∞·ª£c chia s·∫ª t·ª´ c√°c nh√† qu·∫£n l√Ω, 1/3 th·ªùi gian ƒë·ªÉ b·∫£o tr√¨, v√≠ d·ª• nh∆∞ refactor code, x√≥a code th·ª´a, b·ªï sung unit test, tƒÉng t·ªëc ƒë·ªô, l√† m·ª©c h·ª£p l√Ω ƒë·ªÉ c√¢n b·∫±ng gi·ªØa b·ªï sung t√≠nh nƒÉng m·ªõi v√† b·∫£o tr√¨.</p>\n<p>Ho·∫∑c h·ªèi th√™m kinh nghi·ªám nh·ªØng g√¨ c·∫ßn l√†m trong ƒë·ªÉ maintain</p>\n<p><strong>Quy tr√¨nh ph√°t tri·ªÉn m·ªôt s·∫£n ph·∫©m, t√≠nh nƒÉng m·ªõi, t·ª´ l√∫c l√™n √Ω t∆∞·ªüng ƒë·∫øn l√∫c deploy l√† th·∫ø n√†o?</strong></p>\n<p>C√¢u h·ªèi n√†y s·∫Ω ph·∫£i tr·∫£ l·ªùi r·∫•t nhi·ªÅu, t·ª´ l√∫c l·∫≠p k·∫ø ho·∫°ch, trao ƒë·ªïi gi·ªØa c√°c b·ªô ph·∫≠n, ƒë·∫øn l√∫c implement, feedback, deploy. N√≥ ƒë√£ gom ƒë·ªß m·ªôt v√≤ng.</p>\n<p><strong>Task ƒë∆∞·ª£c ki·ªÉm tra nh∆∞ th·∫ø n√†o? Ai l√† ng∆∞·ªùi t·∫°o ra m·∫•y task n√†y?</strong></p>\n<p>M·ªói c√¥ng ty m·ªói kh√°c, t√πy ng∆∞·ªùi qu·∫£n l√Ω.</p>\n<p><strong>L√†m th·∫ø n√†o ƒë·ªÉ x√°c ƒë·ªãnh n√™n build m·ªôt version?</strong></p>\n<p>D·ª±a tr√™n t√≠nh nƒÉng ƒë·∫∑t ra, kh√°ch h√†ng y√™u c·∫ßu, th·ªùi gian c·ªë ƒë·ªãnh</p>\n<p><strong>Khi n√†o task ƒë∆∞·ª£c xem l√† complete?</strong></p>\n<p>ƒê√∫ng y√™u c·∫ßu c·ªßa PR, QA b·∫£o ƒë√≥ng sau khi test, b√™n kinh doanh ƒë√£ th·∫•y ƒë∆∞·ª£c s·∫£n ph·∫©m deploy v√† kh√¥ng nh·∫≠n th√™m b·∫•t c·ª© ph√†n n√†n n√†o?</p>\n<p><strong>Ph·∫ßn m·ªÅm ƒëang s·ª≠ d·ª•ng ƒë·ªÉ qu·∫£n l√Ω task?</strong></p>\n<p>Nhi·ªÅu ph·∫ßn m·ªÅm d·∫°ng n√†y l·∫Øm: Pivotal, Asana, Wrike, JIRA, Trello, post-it + t·∫•m b·∫£ng, th·∫ª ƒë∆∞·ª£c in ra, Visual Studio Online, Marvel.</p>\n<p>C√° nh√¢n t√°c gi·∫£ b√†i vi·∫øt c≈©ng nh∆∞ m√¨nh ƒë·ªìng quan ƒëi·ªÉm: <strong>JIRA l√† th·∫±ng g·ªõm nh·∫•t</strong></p>\n<h1 id=\"ƒë√£-h·∫øt-gi·ªù-h·ªèi\"><a href=\"#%C4%91%C3%A3-h%E1%BA%BFt-gi%E1%BB%9D-h%E1%BB%8Fi\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒê√£ h·∫øt gi·ªù h·ªèi!</h1>\n<p>Kh√¥ng c√≥ con ng∆∞·ªùi ho√†n h·∫£o, kh√¥ng c√≥ c√¥ng ty ho√†n h·∫£o, b·∫°n ch·∫•p nh·∫≠n ƒë∆∞·ª£c nh·ªØng g√¨, nh·ªØng g√¨ b·∫°n s·∫Øp ∆∞u ti√™n n√≥ th·∫•p h∆°n. Ch√∫c c√°c b·∫°n t√¨m ƒë∆∞·ª£c c√¥ng vi·ªác t·ªët. M√¨nh ƒë√£ c√≥ vi·ªác r·ªìi, kh√¥ng mu·ªën ƒëi ph·ªèng v·∫•n n·ªØa ƒë√¢u c√°c b·∫°n.</p>\n<p><a href=\"https://medium.com/@vcarl/questions-to-ask-your-interviewer-82a26e67ce6c\" target=\"_blank\" rel=\"noopener noreferrer\">Questions to ask your interviewer: onboarding and the workplace</a></p>\n<p><a href=\"https://medium.com/@vcarl/questions-to-ask-your-interviewer-development-and-emergencies-f7fbc4519e5b\" target=\"_blank\" rel=\"noopener noreferrer\">Questions to ask your interviewer: development and emergencies</a></p>\n<p><a href=\"https://medium.com/@cvitullo/questions-to-ask-your-interviewer-growth-c88eed119ce2\" target=\"_blank\" rel=\"noopener noreferrer\">Questions to ask your interviewer: Growth</a></p>\n<p><a href=\"https://medium.com/@vcarl/questions-to-ask-your-interviewer-project-management-and-prioritization-69ac3aad3689\" target=\"_blank\" rel=\"noopener noreferrer\">Questions to ask your interviewer: Project management and prioritization</a></p>\n","cover_image":""}},{"node":{"id":"65c9d6e21303c8c99eff5408a9afcf9c","title":"G√≥c nh√¨n c·ªßa ng∆∞·ªùi tuy·ªÉn d·ª•ng m·ªôt l·∫≠p tr√¨nh vi√™n React","path":"/2018-10-14-react-job-interview-goc-nhin-nguoi-tuyen-dung/","date":"2018-10-14","timeToRead":6,"desc":"Trong m·ªôt t∆∞∆°ng lai kh√¥ng xa, khi m√¨nh ƒë∆∞·ª£c ƒë·∫∑t v√†o v·ªã tr√≠ ph·ªèng v·∫•n c√°c b·∫°n Front-End, m√¨nh s·∫Ω h·ªèi g√¨ ƒë√¢y?","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#m%E1%BB%9Di-b%E1%BA%A1n-t%E1%BB%B1-gi%E1%BB%9Bi-thi%E1%BB%87u\">M·ªùi b·∫°n t·ª± gi·ªõi thi·ªáu</a></li>\n<li><a href=\"#%C4%91i%E1%BB%81u-g%C3%AC-xui-khi%E1%BA%BFn-b%E1%BA%A1n-h%E1%BB%8Dc-react-hay-1-ng%C3%B4n-ng%E1%BB%AF-n%C3%A0o-%C4%91%C3%B3\">ƒêi·ªÅu g√¨ xui khi·∫øn b·∫°n h·ªçc React (hay 1 ng√¥n ng·ªØ n√†o ƒë√≥)</a></li>\n<li><a href=\"#%C4%91i-s%C3%A2u-technical-m%E1%BB%99t-ch%C3%BAt\">ƒêi s√¢u technical m·ªôt ch√∫t</a></li>\n<li><a href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81-l%E1%BB%9Bn-nh%E1%BA%A5t-b%E1%BA%A1n-%C4%91%E1%BB%91i-m%E1%BA%B7t-trong-d%E1%BB%B1-%C3%A1n-c%C5%A9-l%C3%A0-g%C3%AC-th%C3%A0nh-c%C3%B4ng-l%E1%BB%9Bn-nh%E1%BA%A5t-b%E1%BA%A1n-%C4%91%E1%BA%A1t-%C4%91%C6%B0%E1%BB%A3c-trong-%C4%91%C3%B3\">V·∫•n ƒë·ªÅ l·ªõn nh·∫•t b·∫°n ƒë·ªëi m·∫∑t trong d·ª± √°n c≈© l√† g√¨, th√†nh c√¥ng l·ªõn nh·∫•t b·∫°n ƒë·∫°t ƒë∆∞·ª£c trong ƒë√≥?</a></li>\n<li><a href=\"#n%E1%BA%BFu-ti%E1%BB%81n-kh%C3%B4ng-ph%E1%BA%A3i-v%E1%BA%A5n-%C4%91%E1%BB%81-th%E1%BB%9Di-gian-v%C3%B4-t%C6%B0-b%E1%BA%A1n-s%E1%BA%BD-l%C3%A0m-g%C3%AC-%C4%91%E1%BB%83-n%C3%A2ng-c%E1%BA%A5p-cho-d%E1%BB%B1-%C3%A1n-tr%C6%B0%E1%BB%9Bc-%C4%91%C3%A2y-t%E1%BA%A1i-sao\">N·∫øu ti·ªÅn kh√¥ng ph·∫£i v·∫•n ƒë·ªÅ, th·ªùi gian v√¥ t∆∞, b·∫°n s·∫Ω l√†m g√¨ ƒë·ªÉ n√¢ng c·∫•p cho d·ª± √°n tr∆∞·ªõc ƒë√¢y, t·∫°i sao?</a></li>\n<li><a href=\"#m%E1%BB%99t-s%E1%BB%91-c%C3%A2u-react-c%C6%A1-b%E1%BA%A3n-c%C3%A1c-b%E1%BA%A1n-c%C5%A9ng-n%C3%AAn-n%E1%BA%AFm\">M·ªôt s·ªë c√¢u React c∆° b·∫£n, c√°c b·∫°n c≈©ng n√™n n·∫Øm</a></li>\n<li><a href=\"#feedback\">Feedback</a></li>\n<li><a href=\"#c%C3%A2u-cu%E1%BB%91i-c%C3%B9ng-quan-tr%E1%BB%8Dng-nh%E1%BA%A5t\">C√¢u cu·ªëi c√πng, quan tr·ªçng nh·∫•t</a></li>\n</ul>\n<!-- /TOC -->\n<p>M√¨nh kh√¥ng n√≥i c·ª• th·ªÉ c√°c c√¢u ƒë·ªÉ h·ªèi nh∆∞ <a href=\"/2017-07-17-interview-react-developer-thi-hoi-gi\">b√†i n√†y</a>, s·∫Ω t·∫≠p trung h∆°n v√†o c√°ch h·ªèi, c√°ch ƒë√°nh gi√° c√°c b·∫°n d·ª±a v√†o c√¢u tr·∫£ l·ªùi. </p>\n<p>Anh @dan_abramov ·∫£nh c√≥ n√≥i tr√™n Twitter</p>\n<blockquote>\n<p>·ªû Facebook ch√∫ng t√¥i kh√¥ng h·ªèi b·∫°n c√¢u h·ªèi nh∆∞ s·ª± kh√°c nhau gi·ªØa <code class=\"language-inline-text\">componentWillMount</code> v√† <code class=\"language-inline-text\">componentDidMount</code>, ch√∫ng t√¥i t√¨m ng∆∞·ªùi c√≥ ki·∫øn th·ª©c t·ªët javascript v√† k·ªπ nƒÉng gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ. H·ªç c√≥ th·ªÉ h·ªçc b·∫•t c·ª© th∆∞ vi·ªán g√¨, ho·∫∑c t·ª± vi·∫øt ƒë·ªÉ x√†i.</p>\n</blockquote>\n<p>V·ªõi m√¨nh, vi·ªác l·ª±a ch·ªçn con ng∆∞·ªùi kh√¥ng ch·ªâ cƒÉn c·ª© h·∫øt v√†o vi·ªác anh ta c√≥ th·ªÉ tr·∫£ l·ªùi h·∫øt nh·ªØng c√¢u h·ªèi ƒë√≥ kh√¥ng, h·ªèi m·∫•y c√¢u ƒë√≥ b·ªüi v√¨ c√¥ng vi·ªác h√†ng ng√†y ph·∫£i x√†i n√≥, h·ªèng ph·∫£i h·ªèi ƒë·ªÉ ƒë√°nh ƒë·ªë, th·ª≠ th√°ch.</p>\n<h1 id=\"m·ªùi-b·∫°n-t·ª±-gi·ªõi-thi·ªáu\"><a href=\"#m%E1%BB%9Di-b%E1%BA%A1n-t%E1%BB%B1-gi%E1%BB%9Bi-thi%E1%BB%87u\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>M·ªùi b·∫°n t·ª± gi·ªõi thi·ªáu</h1>\n<p>C·∫ßn bi·∫øt tr∆∞·ªõc ƒë√≥ anh ·∫•y ƒë√£ l√†m g√¨, k·ªπ nƒÉng g√¨ anh ·∫•y ƒë√£ c√≥ ƒë∆∞·ª£c, team size c·ªßa anh ·∫•y, c√≥ qu·∫£n l√Ω ai ch∆∞a, s·∫£n ph·∫©m anh ·∫•y l√†m th∆∞·ªùng c√≥ bao nhi√™u ng∆∞·ªùi s·ª≠ d·ª•ng</p>\n<h1 id=\"ƒëi·ªÅu-g√¨-xui-khi·∫øn-b·∫°n-h·ªçc-react-hay-1-ng√¥n-ng·ªØ-n√†o-ƒë√≥\"><a href=\"#%C4%91i%E1%BB%81u-g%C3%AC-xui-khi%E1%BA%BFn-b%E1%BA%A1n-h%E1%BB%8Dc-react-hay-1-ng%C3%B4n-ng%E1%BB%AF-n%C3%A0o-%C4%91%C3%B3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒêi·ªÅu g√¨ xui khi·∫øn b·∫°n h·ªçc React (hay 1 ng√¥n ng·ªØ n√†o ƒë√≥)</h1>\n<p>C√≥ ph·∫£i t·∫°i th·ªã tr∆∞·ªùng ƒëang ƒë·ªï x√¥ h·ªçc React n√™n b·∫°n h·ªçc React? hay v√¨ b·∫°n anh n√≥ x√∫i, React ch·∫°y nhanh h∆°n Angular, Vue? hay c√¥ng ty anh b·∫Øt x√†i. B·∫•t k·ª≥ l√Ω do ƒë√£ h·ªçc React c·ª© k·ªÉ ra.</p>\n<p>M√¨nh th·∫•y nhi·ªÅu ng∆∞·ªùi tuy·ªÉn d·ª•ng hay nh·∫ßm v·ªÅ vi·ªác <strong>s·∫µn s√†ng h·ªçc c√°i m·ªõi</strong>. B·∫°n ph·∫£i r√µ r√†ng vi·ªác s·∫µn s√†ng h·ªçc c√°i m·ªõi ƒë·ªÉ t·ªët h∆°n, ch·ª© kh√¥ng ph·∫£i s·∫µn s√†ng h·ªçc c√°i m·ªõi d√π n√≥ l√† b·∫•t c·ª© th·ª© g√¨ nh√©.</p>\n<p>V√≠ d·ª•, b·∫°n l√† th·∫ßu x√¢y d·ª±ng nh√†, b·∫°n ch·ªß y·∫øu th·∫ßu nh√† th·ªï c∆∞, nh∆∞ng n·∫øu c√≥ c∆° h·ªôi b·∫°n s·∫µn s√†ng h·ªçc v√† ƒë·∫ßu t∆∞ ƒë·ªÉ x√¢y d·ª±ng nh·ªØng c√¥ng tr√¨nh b·ª± h∆°n nh∆∞ chung c∆∞, trung t√¢m th∆∞∆°ng m·∫°i, cao ·ªëc. ƒê√≥ l√† s·∫µn s√†ng h·ªçc c√°i m·ªõi, c√°i t·ªët h∆°n. C√≤n b·∫°n ƒë√¢m ngang, s·∫µn s√†ng ƒëi h·ªçc ƒë√≥ng thuy·ªÅn, l√†m ru·ªông, v√† xem nh∆∞ c√¥ng vi·ªác ch√≠nh th√¨ c√°i ƒë√≥ ng∆∞·ªùi ta g·ªçi l√† h·ªØu d≈©ng v√¥ m∆∞u.</p>\n<h1 id=\"ƒëi-s√¢u-technical-m·ªôt-ch√∫t\"><a href=\"#%C4%91i-s%C3%A2u-technical-m%E1%BB%99t-ch%C3%BAt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒêi s√¢u technical m·ªôt ch√∫t</h1>\n<p>Theo nh∆∞ kinh nghi·ªám ƒë∆∞·ª£c ph·ªèng v·∫•n c·ªßa m√¨nh, vi·ªác h·ªèi nhanh ƒë√°p li·ªÅn nh∆∞ ch∆∞∆°ng tr√¨nh nhanh nh∆∞ ch·ªõp r·∫•t l√† kh√≥ cho ·ª©ng vi√™n tr·∫£ l·ªùi r√†nh r·ªçt v√† tr·ªçn v·∫πn. C·ª• th·ªÉ l√† ngay c·∫£ m√¨nh, khi ƒë∆∞·ª£c h·ªèi s·ª± kh√°c nhau gi·ªØa GET/POST/PUT, m√¨nh c≈©ng s·∫Ω kh√¥ng th·ªÉ n√≥i m·ªôt c√°ch m·∫°ch l·∫°c ƒë∆∞·ª£c, ki·∫øn th·ª©c qu√° nhi·ªÅu, b·∫°n c·∫ßn cho ·ª©ng vi√™n t√≠ th·ªùi gian ƒë·ªÉ nh·ªõ l·∫°i. M·ªôt danh s√°ch in s·∫µn c√°c c√¢u s·∫Ω h·ªèi, cho anh ·∫•y ƒë·ªçc qua tr∆∞·ªõc 5-10 ph√∫t chu·∫©n b·ªã s·∫Ω t·ªët h∆°n.</p>\n<h1 id=\"v·∫•n-ƒë·ªÅ-l·ªõn-nh·∫•t-b·∫°n-ƒë·ªëi-m·∫∑t-trong-d·ª±-√°n-c≈©-l√†-g√¨-th√†nh-c√¥ng-l·ªõn-nh·∫•t-b·∫°n-ƒë·∫°t-ƒë∆∞·ª£c-trong-ƒë√≥\"><a href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81-l%E1%BB%9Bn-nh%E1%BA%A5t-b%E1%BA%A1n-%C4%91%E1%BB%91i-m%E1%BA%B7t-trong-d%E1%BB%B1-%C3%A1n-c%C5%A9-l%C3%A0-g%C3%AC-th%C3%A0nh-c%C3%B4ng-l%E1%BB%9Bn-nh%E1%BA%A5t-b%E1%BA%A1n-%C4%91%E1%BA%A1t-%C4%91%C6%B0%E1%BB%A3c-trong-%C4%91%C3%B3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V·∫•n ƒë·ªÅ l·ªõn nh·∫•t b·∫°n ƒë·ªëi m·∫∑t trong d·ª± √°n c≈© l√† g√¨, th√†nh c√¥ng l·ªõn nh·∫•t b·∫°n ƒë·∫°t ƒë∆∞·ª£c trong ƒë√≥?</h1>\n<p>C√≥ th·ªÉ l√† b·∫°n hi·ªÉu ƒë∆∞·ª£c m·ªôt process ph·ª©c t·∫°p, b·∫°n c√≥ th·ªÉ n√¢ng cao t·ªëc ƒë·ªô ·ª©ng d·ª•ng l√™n c·∫£ trƒÉm ph·∫ßn trƒÉm, b·∫°n ƒë·∫©y ƒë∆∞·ª£c t·ªëc ƒë·ªô d·ª± √°n b·∫±ng c√°ch k·∫øt h·ª£p nhi·ªÅu dev v·ªõi nhau.</p>\n<h1 id=\"n·∫øu-ti·ªÅn-kh√¥ng-ph·∫£i-v·∫•n-ƒë·ªÅ-th·ªùi-gian-v√¥-t∆∞-b·∫°n-s·∫Ω-l√†m-g√¨-ƒë·ªÉ-n√¢ng-c·∫•p-cho-d·ª±-√°n-tr∆∞·ªõc-ƒë√¢y-t·∫°i-sao\"><a href=\"#n%E1%BA%BFu-ti%E1%BB%81n-kh%C3%B4ng-ph%E1%BA%A3i-v%E1%BA%A5n-%C4%91%E1%BB%81-th%E1%BB%9Di-gian-v%C3%B4-t%C6%B0-b%E1%BA%A1n-s%E1%BA%BD-l%C3%A0m-g%C3%AC-%C4%91%E1%BB%83-n%C3%A2ng-c%E1%BA%A5p-cho-d%E1%BB%B1-%C3%A1n-tr%C6%B0%E1%BB%9Bc-%C4%91%C3%A2y-t%E1%BA%A1i-sao\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>N·∫øu ti·ªÅn kh√¥ng ph·∫£i v·∫•n ƒë·ªÅ, th·ªùi gian v√¥ t∆∞, b·∫°n s·∫Ω l√†m g√¨ ƒë·ªÉ n√¢ng c·∫•p cho d·ª± √°n tr∆∞·ªõc ƒë√¢y, t·∫°i sao?</h1>\n<p>Vi·∫øt t√†i li·ªáu t·ªët h∆°n, thay MobX b·∫±ng Redux, ƒë∆∞a unit test v√†o</p>\n<h1 id=\"m·ªôt-s·ªë-c√¢u-react-c∆°-b·∫£n-c√°c-b·∫°n-c≈©ng-n√™n-n·∫Øm\"><a href=\"#m%E1%BB%99t-s%E1%BB%91-c%C3%A2u-react-c%C6%A1-b%E1%BA%A3n-c%C3%A1c-b%E1%BA%A1n-c%C5%A9ng-n%C3%AAn-n%E1%BA%AFm\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>M·ªôt s·ªë c√¢u React c∆° b·∫£n, c√°c b·∫°n c≈©ng n√™n n·∫Øm</h1>\n<ol>\n<li>JSX l√† c√°i g√¨, l√†m sao tr√¨nh duy·ªát ch·∫°y ƒë∆∞·ª£c?</li>\n<li>T·∫°i sao c√°c component ƒë∆∞·ª£c ƒë·∫∑t t√™n b·∫±ng ch·ªØ c√°i ƒë·∫ßu vi·∫øt hoa?</li>\n<li>2 ki·ªÉu ƒë·ªÉ khai b√°o component l√† g√¨, v√† s·ª≠ d·ª•ng trong tr∆∞·ªùng h·ª£p n√†o?</li>\n<li>M·ªôt life cycle c·ªßa React g·ªìm c√°c ph∆∞∆°ng th·ª©c n√†o, g·ªçi API ·ªü ƒë√¢u?</li>\n<li>T·∫°i sao g·ªçi API ·ªü componentDidMount kh√¥ng ph·∫£i trong constructor</li>\n<li>L√†m sao ƒë·ªÉ kh√¥ng re-fetch data khi component ƒë∆∞·ª£c re-mount</li>\n<li>Gi·∫£i th√≠ch c√°i √Ω t∆∞·ªüng \"ƒë∆∞a state t·ª´ d∆∞·ªõi l√™n tr√™n\" (a hi hi, c√¢u n√†y h∆°i th√°ch ƒë·ªë ch√∫t nha)</li>\n<li>Khi c√≥ issue th√¨ b·∫°n debug nh∆∞ th·∫ø n√†o? L√†m sao ƒë·ªÉ ki·ªÉm tra t·∫°i sao component kh√¥ng re-render</li>\n<li>Th·ª≠ th√°ch c≈©ng b∆∞·ªõc nh·∫£y -  c√πng nhau ph√° code</li>\n</ol>\n<p>S·ª± kh√°c bi·ªát gi·ªØa c√°ch truy·ªÅn h√†m, chuy·ªán g√¨ x·∫£y ra khi click </p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  \n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">'MyComponent'</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick2 <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick1</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token function\">handleClick1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token function-variable function\">handleClick3</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">click 1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick1<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">click 2</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick2<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">click 3</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick3<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">click 4</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>T√¨m v√† fix l·ªói</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">search</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">handleChange</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>timeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>timeout <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">search</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>search <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Search for: </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span> <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Xong ph·∫ßn m√¨nh, th·∫ø b·∫°n c√≥ mu·ªën h·ªèi m√¨nh g√¨ kh√¥ng?</p>\n<h1 id=\"feedback\"><a href=\"#feedback\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Feedback</h1>\n<p><em>C√°i m√† m√¨nh th·∫•y r·∫•t thi·∫øu trong ƒëa s·ªë c√°c bu·ªïi m√¨nh b·ªã ph·ªèng v·∫•n.</em></p>\n<p>N·∫øu c√≥ ƒëi·ªÉm n√†o ƒë√≥ b·∫°n tr·∫£ l·ªùi kh√¥ng t·ªët, m√¨nh s·∫Ω feedback l·∫°i cho b·∫°n gi·∫£i ph√°p ho·∫∑c ƒëi·ªÉm b·∫°n c·∫ßn v·ªÅ nh√† nghi√™n c·ª©u.</p>\n<p>B·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c h·ªìi √¢m trong 2-3 ng√†y, ƒëa ph·∫ßn c√°c tr∆∞·ªùng h·ª£p l√¢u h∆°n 4 ng√†y l√† b·∫°n nh·∫≠n ƒë∆∞·ª£c th∆∞ c·∫£m ∆°n. B·∫°n kh√¥ng c·∫ßn l√™n ITViec ƒë·ªÉ check v·ªã tr√≠ ƒë√≥ c√≥ m·ªõi ch·∫°y qu·∫£ng c√°o n·ªØa kh√¥ng, m√¨nh ch·∫Øc ch·∫Øn g·ª≠i th∆∞ c·∫£m ∆°n.</p>\n<h1 id=\"c√¢u-cu·ªëi-c√πng-quan-tr·ªçng-nh·∫•t\"><a href=\"#c%C3%A2u-cu%E1%BB%91i-c%C3%B9ng-quan-tr%E1%BB%8Dng-nh%E1%BA%A5t\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C√¢u cu·ªëi c√πng, quan tr·ªçng nh·∫•t</h1>\n<p>C√¢u n√†y l√† c√¢u m√¨nh ƒë∆∞·ª£c h·ªèi khi ph·ªèng v·∫•n b√™n Sendo.vn, d·ª´ng l·∫°i 5 gi√¢y, h√≠t th·ªü, m√¨nh ƒë√£ kh√¥ng tr·∫£ l·ªùi ƒë∆∞·ª£c, v√† m√¨nh v·∫´n ƒëang t√¨m c√¢u tr·∫£ l·ªùi cho c√¢u h·ªèi n√†y.</p>\n<blockquote>\n<p>ƒêi·ªÅu g√¨ khi·∫øn b·∫°n kh√°c bi·ªát v·ªõi nh·ªØng FrontEnd Developer ·ª©ng tuy·ªÉn cho v·ªã tr√≠ n√†y, hay l·ªõn h∆°n l√† nh·ªØng dev ·ªü ngo√†i kia?</p>\n</blockquote>\n<p>Hy v·ªçng c√¢u n√†y s·∫Ω gi√∫p b·∫°n th·∫•y r√µ h∆°n con ƒë∆∞·ªùng m√¨nh mu·ªën ƒëi.</p>\n<p><a href=\"https://medium.com/@baphemot/a-react-job-interview-recruiter-perspective-f1096f54dd16\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">C√¢u h·ªèi t·ªïng h·ª£p v√† ph·∫ßn tr·∫£ l·ªùi</a></p>\n","cover_image":""}},{"node":{"id":"300f6e18ce1e36e4462d43bbeed7bae2","title":"H∆∞·ªõng d·∫´n lazy load component trong React","path":"/2018-10-07-huong-dan-lazy-load-component-react/","date":"2018-10-07","timeToRead":4,"desc":"S·ª± l√† h√¥m r·ªìi ƒëi ph·ªèng v·∫•n, ƒë∆∞·ª£c h·ªèi c√¢u n√†y m√† m√¨nh ƒë√≥ gi·ªù ch∆∞a l√†m n√™n kh√¥ng bi·∫øt, nay c√≥ th·ªùi gian r·∫£nh r·ªói t√¨m hi·ªÉu, chia s·∫ª l·∫°i cho c√°c b·∫°n ch∆∞a bi·∫øt.","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81\">V·∫•n ƒë·ªÅ</a></li>\n<li><a href=\"#gi%E1%BA%A3i-ph%C3%A1p\">Gi·∫£i ph√°p</a></li>\n<li><a href=\"#code-v%C3%AD-d%E1%BB%A5\">Code v√≠ d·ª•</a></li>\n<li><a href=\"#lazy-load-react-router\">Lazy load react-router</a></li>\n<li><a href=\"#t%E1%BB%95ng-k%E1%BA%BFt\">T·ªïng k·∫øt</a></li>\n</ul>\n<!-- /TOC -->\n<h1 id=\"v·∫•n-ƒë·ªÅ\"><a href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V·∫•n ƒë·ªÅ</h1>\n<p>B·∫°n vi·∫øt code, ch·∫°y th·ª≠ tr√™n localhost, yeah m·ªçi th·ª© super nhanh</p>\n<p><img src=\"https://pm1.narvii.com/6456/c88c177b7cee6af26086088dfcfa09cf401b676e_hq.jpg\" alt=\"H∆∞·ªõng d·∫´n lazy load component trong React\"></p>\n<p>Nh∆∞ng khi ch·∫°y tr√™n production th√¨ m·ªçi th·ª© s·∫Ω tr·ªü n√™n nh∆∞ th·∫ø n√†y</p>\n<p><img src=\"https://vetstreet-brightspot.s3.amazonaws.com/32/b9e550dfd411e1a02d005056ad4734/file/tortoise-137584694-lc080612.jpg\" alt=\"H∆∞·ªõng d·∫´n lazy load component trong React\"></p>\n<p>S·∫Ω c√≥ r·∫•t nhi·ªÅu gi·∫£i ph√°p ƒë·ªÉ x·ª≠ l√Ω v·∫•n ƒë·ªÅ n√†y.</p>\n<p>T·∫°i sao ch√∫ng ta ph·∫£i load m·ªôt component m√† user ch∆∞a s·ª≠ d·ª•ng ƒë·∫øn, th·∫≠m ch√≠ c√≥ khi trong su·ªët qu√° tr√¨nh l√†m vi·ªác, user s·∫Ω kh√¥ng ƒë·ª•ng ƒë·∫øn m·ªôt s·ªë m√†n h√¨nh?</p>\n<h1 id=\"gi·∫£i-ph√°p\"><a href=\"#gi%E1%BA%A3i-ph%C3%A1p\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Gi·∫£i ph√°p</h1>\n<p>N·∫øu b·∫°n l√†m web nhi·ªÅu th√¨ ch·∫Øc c√≥ nghe ƒë·∫øn lazy load image, ƒë·ªÉ gi·∫£m b·ªõt s·ªë l∆∞·ª£ng request g·ªüi ƒëi v√† d·ªØ li·ªáu tr·∫£ v·ªÅ cho l·∫ßn load ƒë·∫ßu ti√™n. Trong React c≈©ng c√≥ kh√°i ni·ªám t∆∞∆°ng t·ª± nh∆∞ v·∫≠y.</p>\n<p>T·∫•t c·∫£ nh·ªØng vi·ªác ƒë√≥ th·ª±c hi·ªán ƒë∆∞·ª£c l√† nh·ªù s·ª± th·∫ßn th√°nh c·ªßa <strong>webpack</strong></p>\n<p>Th√¥ng th∆∞·ªùng ch√∫ng ta import component nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> ScreenComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'./ScreenComponent'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>V·∫≠y ƒë√£ bao gi·ªù b·∫°n th·ª≠</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./ScreenComponent'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>V√¢ng, n√≥ s·∫Ω tr·∫£ v·ªÅ 1 <strong>Promise</strong>!</p>\n<p>N·∫øu import nh∆∞ th·∫ø, Webpack s·∫Ω split file build ra v√† th·ª±c hi·ªán vi·ªác load ch·ªâ khi ƒë∆∞·ª£c g·ªçi</p>\n<h1 id=\"code-v√≠-d·ª•\"><a href=\"#code-v%C3%AD-d%E1%BB%A5\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Code v√≠ d·ª•</h1>\n<p><img src=\"https://i.imgur.com/5zJ4s8b.png\" alt=\"H∆∞·ªõng d·∫´n lazy load component trong React\"></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Todo <span class=\"token keyword\">from</span> <span class=\"token string\">'./Todo'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">todos</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ...</span>\n<span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App-header<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          Add todo\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>changeValue<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>submitValue<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Add</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Todo</span></span> <span class=\"token attr-name\">todos</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>todos<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>N·∫øu ·ªü m√†n h√¨nh n√†y, user ch∆∞a c√≥ g√¨ trong <code class=\"language-inline-text\">state.todos</code>, ch√∫ng ta kh√¥ng th·ª±c s·ª± c·∫ßn <code class=\"language-inline-text\">import Todo from './Todo';</code>, ch·ªâ khi user nh·∫•n add ƒë·ªÉ th√™m m·ªôt item v√†o trong <code class=\"language-inline-text\">state.todos</code> ch√∫ng ta m·ªõi c·∫ßn load component <code class=\"language-inline-text\">&lt;Todo /></code></p>\n<p>Th√™m <code class=\"language-inline-text\">state.LLTodo</code> ƒë·ªÉ ki·ªÉm tra vi·ªác load component todo ch∆∞a, ch√∫ng ta ƒë∆∞a vi·ªác load n√†y v√†o <code class=\"language-inline-text\">componentDidUpdate()</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//import Todo from './Todo'; // b·ªè component import ·ªü ƒë√¢y</span>\n\n<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">todos</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">LLTodo</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps<span class=\"token punctuation\">,</span> prevState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>LLTodo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">lazyLoadTodo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function-variable function\">lazyLoadTodo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> lazyLoad <span class=\"token operator\">=</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./Todo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">debugger</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ƒë·ªÉ xem n√≥ tr·∫£ v·ªÅ g√¨</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"https://i.imgur.com/EQHSNyp.png\" alt=\"H∆∞·ªõng d·∫´n lazy load component trong React\"></p>\n<p>N√≥ ƒë√£ tr·∫£ v·ªÅ cho ch√∫ng ta m·ªôt Promise, s·ª≠a l·∫°i h√†m n√†y th√†nh async</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function-variable function\">lazyLoadTodo</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span><span class=\"token keyword\">default</span><span class=\"token operator\">:</span> Todo<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./Todo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">LLTodo</span><span class=\"token operator\">:</span> Todo<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta ki·ªÉm tra vi·ªác render n√†y theo <code class=\"language-inline-text\">state.LLTodo</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>LLTodo<span class=\"token punctuation\">,</span> todos<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> lazyLoadTodo <span class=\"token operator\">=</span> LLTodo <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LLTodo</span></span> <span class=\"token attr-name\">todos</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>todos<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App-header<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          Add todo\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>changeValue<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>submitValue<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Add</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>lazyLoadTodo<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ªÉ th·ª±c s·ª± th·∫•y ƒë∆∞·ª£c k·∫øt qu·∫£, ch√∫ng ta c√≥ th·ªÉ build, ho·∫∑c tr√™n m·ªü tab network, khi nh·∫≠p gi√° tr·ªã v√†o trong input, m·ªôt file <code class=\"language-inline-text\">[t√™n].chunk.js</code> s·∫Ω ƒë∆∞·ª£c load th√™m v√†o.</p>\n<p><img src=\"https://i.imgur.com/h9LyiS9.png\" alt=\"H∆∞·ªõng d·∫´n lazy load component trong React\"></p>\n<p>File 1.chunk.js ƒë∆∞·ª£c load khi component ƒë∆∞·ª£c update</p>\n<p><img src=\"https://i.imgur.com/8v6S8QR.png\" alt=\"H∆∞·ªõng d·∫´n lazy load component trong React\"></p>\n<p>M·ªü file n√†y ra ƒë·ªÉ check xem sau</p>\n<p><img src=\"https://i.imgur.com/Y9lytUD.png\" alt=\"H∆∞·ªõng d·∫´n lazy load component trong React\"></p>\n<p>ƒê√∫ng l√† file component c·ªßa ch√∫ng ta ƒë∆∞·ª£c ƒë∆∞·ª£c t√°ch ra :D</p>\n<h1 id=\"lazy-load-react-router\"><a href=\"#lazy-load-react-router\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Lazy load react-router</h1>\n<p>Gi·ªù xem x√©t ph·∫ßn ch√∫ng ta setup cho c√°i route, ƒë·∫°i kh√°i n√≥ s·∫Ω nh∆∞ th·∫ø n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> Home <span class=\"token keyword\">from</span> <span class=\"token string\">'./Home'</span>\n<span class=\"token keyword\">import</span> Blog <span class=\"token keyword\">from</span> <span class=\"token string\">'./Blog'</span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>HomeComponent<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/blog<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>BlogComponent<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>√Åp d·ª•ng lazy load component v·ªõi <em>route</em>, ·ªü ƒë√¢y m√¨nh vi·∫øt th√™m m·ªôt h√†m <code class=\"language-inline-text\">asyncComponent</code>, n√≥ s·∫Ω nh·∫≠n v√†o h√†m <code class=\"language-inline-text\">import('path/to/file')</code> v√† return v·ªÅ component ƒë√≥.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>Component<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">asyncComponent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">getComponent</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">class</span> <span class=\"token class-name\">AsyncComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">static</span> Component <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> \n      <span class=\"token comment\">// ch·ªï n√†y h∆°i tricky, tr·ªè v·ªÅ ch√≠nh n√≥</span>\n      <span class=\"token literal-property property\">Component</span><span class=\"token operator\">:</span> AsyncComponent<span class=\"token punctuation\">.</span>Component \n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps<span class=\"token punctuation\">,</span> prevState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// kh√¥ng re-load n·∫øu ƒë√£ c√≥ r·ªìi</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>Component<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">getComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">Component</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          AsyncComponent<span class=\"token punctuation\">.</span>Component <span class=\"token operator\">=</span> Component<span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Component<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> AsyncComponent<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>H√†m <code class=\"language-inline-text\">asyncComponent()</code> n√†y ch√∫ng ta s·∫Ω truy·ªÅn v√†o cho n√≥ function l√† <code class=\"language-inline-text\">getComponent()</code> (ch√≠nh l√† h√†m import)</p>\n<p>Ch·ªânh l·∫°i c√°ch ch√∫ng ta import component cho t·ª´ng route</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Dynamically imported components</span>\n<span class=\"token keyword\">const</span> Home <span class=\"token operator\">=</span> <span class=\"token function\">asyncComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./Home'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">module</span> <span class=\"token operator\">=></span> module<span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> Blog <span class=\"token operator\">=</span> <span class=\"token function\">asyncComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./Blog'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">module</span> <span class=\"token operator\">=></span> module<span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Home<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/blog<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Blog<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><img src=\"https://i.imgur.com/PN8f7w9.png\" alt=\"H∆∞·ªõng d·∫´n lazy load component trong React\"></p>\n<h1 id=\"t·ªïng-k·∫øt\"><a href=\"#t%E1%BB%95ng-k%E1%BA%BFt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·ªïng k·∫øt</h1>\n<p>Vi·ªác lazy load component kh√¥ng qu√° kh√≥, kh√¥ng c·∫ßn th√™m b·∫•t k·ª≥ th∆∞ vi·ªán, config g√¨ c·∫£ n·∫øu b·∫°n ƒëang init project b·∫±ng <code class=\"language-inline-text\">create-react-app</code>, nh∆∞ng n√≥ s·∫Ω l√† gi·∫£i ph√°p ph·∫£i l√†m khi file bundle c·ªßa b·∫°n ƒë√£ qu√° l·ªõn v√† ng√†y c√†ng l·ªõn h∆°n.</p>\n<p>Ch√∫c c√°c b·∫°n c√≥ m·ªôt ng√†y Happy Interview!</p>\n","cover_image":""}},{"node":{"id":"a488a7f0a330e799deba1b8bc5bb7105","title":"N√¢ng cao t·ªëc ƒë·ªô Component","path":"/2018-10-06-huong-dan-thiet-ket-component-de-nang-cao-toc-do/","date":"2018-10-06","timeToRead":3,"desc":"B√†i vi·∫øt c·ªßa team l√†m Facebook Ads chia s·∫Ω, c√πng ƒëi·ªÉm qua c√°c v·∫•n ƒë·ªÅ cƒÉn b·∫£n ƒë·ªÉ t·ªëi ∆∞u component","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-shouldcomponentupdate-v%C3%A0-reactpurecomponent\">S·ª≠ d·ª•ng <code class=\"language-inline-text\">shouldComponentUpdate</code> v√† <code class=\"language-inline-text\">React.PureComponent</code></a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-d%E1%BB%AF-li%E1%BB%87u-immutability-%C4%91%E1%BB%83-so-s%C3%A1nh\">S·ª≠ d·ª•ng d·ªØ li·ªáu Immutability ƒë·ªÉ so s√°nh</a></li>\n<li><a href=\"#chuy%C3%AAn-bi%E1%BB%87t-h%C3%B3a-%C4%91%E1%BB%83-maintain-v%C3%A0-c%E1%BA%A3i-thi%E1%BB%87n-hi%E1%BB%87u-n%C4%83ng\">Chuy√™n bi·ªát h√≥a ƒë·ªÉ maintain v√† c·∫£i thi·ªán hi·ªáu nƒÉng</a></li>\n<li><a href=\"#%C4%91%E1%BB%99c-l%E1%BA%ADp-tr%C3%AAn-t%E1%BB%ABng-children\">ƒê·ªôc l·∫≠p tr√™n t·ª´ng <code class=\"language-inline-text\">children</code></a></li>\n</ul>\n<!-- /TOC -->\n<h1 id=\"s·ª≠-d·ª•ng-shouldcomponentupdate-v√†-reactpurecomponent\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-shouldcomponentupdate-v%C3%A0-reactpurecomponent\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng <code class=\"language-inline-text\">shouldComponentUpdate</code> v√† <code class=\"language-inline-text\">React.PureComponent</code></h1>\n<p><strong>re-render</strong> l√† th·ª© s·∫Ω ti√™u t·ªën c√¥ng s·ª©c v√† ch√∫ng ta ph·∫£i h·∫°n ch·∫ø n√≥ t·ªëi ƒëa, b·∫±ng hook <code class=\"language-inline-text\">shouldComponentUpdate(nextProps, nextState)</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">shouldComponentUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextProps<span class=\"token punctuation\">,</span> nextState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">!</span><span class=\"token function\">shallowEqual</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">,</span> nextProps<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span>\n    <span class=\"token operator\">!</span><span class=\"token function\">shallowEqual</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">,</span> nextState<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Pure component l√† nh·ªØng component ch·ªâ d√πng gi√° tr·ªã <code class=\"language-inline-text\">props</code> v√† <code class=\"language-inline-text\">state</code> ƒë·ªÉ <code class=\"language-inline-text\">render</code>, kh√¥ng c·∫ßn t√≠nh to√°n logic, n√≥ c≈©ng s·∫Ω kh√¥ng c√≥ hook <code class=\"language-inline-text\">shouldComponentUpdate</code>, React s·∫Ω d√πng ki·ªÉu so s√°nh <strong>t∆∞∆°ng ƒë·ªëi</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ch·ªâ ph·ª• thu·ªôc v√†o props v√† state khi render</span>\n<span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>rows<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>V√¨ v·∫≠y ph·∫£i ƒë·∫£m b·∫£o c√°c <code class=\"language-inline-text\">children</code> c·ªßa m·ªôt PureComponent c√πng l√† m·ªôt PureComponent, n·∫øu kh√¥ng c√≥ tr∆∞·ªùng h·ª£p n√≥ s·∫Ω kh√¥ng render ƒë√∫ng.</p>\n<p>V√≠ d·ª• nh∆∞ b√™n d∆∞·ªõi, 2 object n√†y React s·∫Ω so s√°nh ƒë∆∞·ª£c</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">size</span><span class=\"token operator\">:</span> <span class=\"token number\">64</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'blue'</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// .vs</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">size</span><span class=\"token operator\">:</span> <span class=\"token number\">64</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'red'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Nh∆∞ng object th·∫ø n√†y th√¨ thua</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">isActive</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">balance</span><span class=\"token operator\">:</span> <span class=\"token string\">'1500000'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">picture</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token number\">29</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">first</span><span class=\"token operator\">:</span> <span class=\"token string\">'An'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">last</span><span class=\"token operator\">:</span> <span class=\"token string\">'Luu'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">contact</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">email</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">phone</span><span class=\"token operator\">:</span> <span class=\"token string\">'123456'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">'anluu@gmail'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">address</span><span class=\"token operator\">:</span> <span class=\"token string\">'123 Sai Gon'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"s·ª≠-d·ª•ng-d·ªØ-li·ªáu-immutability-ƒë·ªÉ-so-s√°nh\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-d%E1%BB%AF-li%E1%BB%87u-immutability-%C4%91%E1%BB%83-so-s%C3%A1nh\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng d·ªØ li·ªáu Immutability ƒë·ªÉ so s√°nh</h1>\n<p>C√°ch l√†m √°p d·ª•ng ·ªü ƒë√¢y t∆∞∆°ng t·ª± nh∆∞ vi·ªác tr·∫£ h√†ng h√≥a</p>\n<p><img src=\"https://uidesign.gearbest.com/gb_blog/2101-2400/2375/6-tips-about-applying-for-a-product-return-on-GearBest-Z00.jpg\"></p>\n<p>N·∫øu g√≥i h√†ng b·ªã tr·∫£ ch∆∞a khui g√¨ c·∫£, ng∆∞·ªùi b√°n h√†ng ch·ªâ c·∫ßn ki·ªÉm tra xung quanh ƒë·∫£m b·∫£o g√≥i h√†ng ch∆∞a b·ªã khui th√¨ h·ªç s·∫Ω xem nh∆∞ n√≥ c√≤n nguy√™n v·∫πn, kh√¥ng c·∫ßn ki·ªÉm tra b√™n trong.</p>\n<p>T∆∞∆°ng t·ª±, n·∫øu ch√∫ng ta d√πng d·ªØ li·ªáu Immuatable, ch√∫ng ta c√≥ th·ªÉ nhanh ch√≥ng bi·∫øt ƒë∆∞·ª£c 2 object hay m·∫£ng ƒë√≥ c√≥ kh√°c nhau hay kh√¥ng.</p>\n<p>ƒê·ªÉ bi·∫øt th√™m v·ªÅ Immutable, <a href=\"https://facebook.github.io/immutable-js/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ƒë·ªçc th√™m ·ªü ƒë√¢y</a></p>\n<h1 id=\"chuy√™n-bi·ªát-h√≥a-ƒë·ªÉ-maintain-v√†-c·∫£i-thi·ªán-hi·ªáu-nƒÉng\"><a href=\"#chuy%C3%AAn-bi%E1%BB%87t-h%C3%B3a-%C4%91%E1%BB%83-maintain-v%C3%A0-c%E1%BA%A3i-thi%E1%BB%87n-hi%E1%BB%87u-n%C4%83ng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Chuy√™n bi·ªát h√≥a ƒë·ªÉ maintain v√† c·∫£i thi·ªán hi·ªáu nƒÉng</h1>\n<p>Chuy√™n bi·ªát h√≥a l√† vi·ªác t√°ch nh·ªè c√°c component ra, m·ªói m·ªôt component ƒë·∫£m nhi·ªám m·ªôt c√¥ng vi·ªác c·ª• th·ªÉ</p>\n<p>V√≠ d·ª•, thay v√¨ vi·∫øt 1 component l√† <code class=\"language-inline-text\">ScrollingTable</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ScrollingTable</span></span>\n  <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>123<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\">blue</span><span class=\"token punctuation\">\"</span></span></span>\n  <span class=\"token attr-name\">scrollTop</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>offsetTop<span class=\"token punctuation\">}</span></span>\n<span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>N√™n vi·∫øt th√†nh 2 component</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OuterScroller</span></span> <span class=\"token attr-name\">scrollTop</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>offsetTop<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">InnerTable</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>123<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\">blue</span><span class=\"token punctuation\">\"</span></span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">OuterScroller</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h1 id=\"ƒë·ªôc-l·∫≠p-tr√™n-t·ª´ng-children\"><a href=\"#%C4%91%E1%BB%99c-l%E1%BA%ADp-tr%C3%AAn-t%E1%BB%ABng-children\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒê·ªôc l·∫≠p tr√™n t·ª´ng <code class=\"language-inline-text\">children</code></h1>\n<p>C√≥ th·ªÉ h√¨nh d√πng vi·ªác l·ªìng gh√©p c√°c component theo ki·ªÉu parent-children gi·ªëng nh∆∞ m·ªôt c√°i c√¢y-th√¢n-nh√°nh-l√°</p>\n<p><img src=\"https://media.istockphoto.com/vectors/tree-background-vector-id518399734?k=6&#x26;m=518399734&#x26;s=612x612&#x26;w=0&#x26;h=qxXFy440iXG-CXB9jlC-TyWPKU0NRWLa3cGYu_-ukQI=\"></p>\n<p>Khi l·ªìng gh√©p qu√° nhi·ªÅu d·∫´n ƒë·∫øn vi·ªác ƒë·ªÉ so s√°nh v√† bi·∫øt ƒë∆∞·ª£c s·ª± kh√°c nhau gi·ªØa <strong>c√¢y c≈©</strong> v√† <strong>c√¢y m·ªõi</strong> l√† v√¥ c√πng t·ªën s·ª©c</p>\n<p>Kh√¥ng nh·ªØng v·∫≠y, c√°c component children s·∫Ω thay ƒë·ªïi th∆∞·ªùng xuy√™n. L·∫•y v√≠ d·ª•</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">var</span> Parent <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">Component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">shouldComponentUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children <span class=\"token operator\">!==</span> nextProps<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>section</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>section</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> React<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Parent</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">child</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Parent</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>T·∫•t nhi√™n ƒë√¢y l√† v√≠ d·ª• ƒë·ªÉ b·∫°n d·ªÖ h√¨nh dung r·∫±ng c√°c component children th∆∞·ªùng xuy√™n thay ƒë·ªïi, vi·ªác ki·ªÉm tra <code class=\"language-inline-text\">shouldComponentUpdate</code> l√∫c n√†y r·∫•t kh√≥ n√≥i tr∆∞·ªõc l√† <code class=\"language-inline-text\">true</code> hay <code class=\"language-inline-text\">false</code></p>\n<p>Khuy·∫øn kh√≠ch s·ª≠ d·ª•ng ContainerComponent ƒë·ªÉ k·∫øt n·ªëi v√†o store v√† Component ch·ªâ ƒë·∫£m nhi·ªám vi·ªác render HTML</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// BudgetWidgetContainer</span>\n<span class=\"token keyword\">var</span> BudgetWidgetContainer <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">PureComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>  \n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BudgetWidget</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>amount<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-inline-text\">&lt;BudgetWidget/></code> kh√¥ng quan t√¢m value t·ª´ ƒë√¢u c√≥, n√≥ ch·ªâ vi·ªác render HTML, ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng component nh∆∞ v·∫≠y ·ªü nhi·ªÅu n∆°i, ch√∫ng ta ch·ªâ c·∫ßn vi·∫øt l·∫°i Container Component</p>\n<p><a href=\"https://www.youtube.com/watch?v=KYzlpRvWZ6c\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Xem video g·ªëc c·ªßa b√†i vi·∫øt</a></p>\n","cover_image":""}},{"node":{"id":"a8c04defa632eb7d8068cb4cac074ce9","title":"L√†m vi·ªác v·ªõi Redux trong ·ª©ng d·ª•ng l·ªõn","path":"/2018-10-04-huong-dan-redux-voi-ung-dung-lon/","date":"2018-10-04","timeToRead":9,"desc":"C√πng th·∫£o lu·∫≠n xung quanh v·∫•n ƒë·ªÅ ·ª©ng d·ª•ng thi√™n v·ªÅ d·ªØ li·ªáu l·ªõn, r·∫•t l·ªõn","content":"<p>ƒê√¢y l√† nh·ªØng ch·ªâ d·∫´n c·ªßa <a href=\"https://www.appnexus.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">AppNexus</a> ƒë·ªÉ t·ªëi ∆∞u redux v·ªõi l∆∞·ª£ng d·ªØ li·ªáu kh·ªßng. M·ª©c ƒë·ªô b√†i vi·∫øt kh√° chuy√™n s√¢u, b·∫°n c·∫ßn n·∫Øm th·∫≠t v·ªØng redux, ho·∫∑c xem l·∫°i redux ƒë·ªÉ hi·ªÉu r√µ v√† nh·ªõ l√¢u n·ªôi dung b√†i n√†y.</p>\n<h1 id=\"l∆∞u-d·ªØ-li·ªáu-v·ªõi-ch·ªâ-m·ª•c-truy-c·∫≠p-b·∫±ng-selector\"><a href=\"#l%C6%B0u-d%E1%BB%AF-li%E1%BB%87u-v%E1%BB%9Bi-ch%E1%BB%89-m%E1%BB%A5c-truy-c%E1%BA%ADp-b%E1%BA%B1ng-selector\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>L∆∞u d·ªØ li·ªáu v·ªõi ch·ªâ m·ª•c. Truy c·∫≠p b·∫±ng selector</h1>\n<p>C√°ch c·∫•u tr√∫c d·ªØ li·ªáu s·∫Ω ·∫£nh h∆∞·ªüng nhi·ªÅu ƒë·∫øn performance v√† vi·ªác t·ªï ch·ª©c ·ª©ng d·ª•ng. L∆∞u d·ªØ li·ªáu tr·∫£ v·ªÅ t·ª´ API theo ch·ªâ m·ª•c (index) mang l·∫°i nhi·ªÅu l·ª£i √≠ch. N√≥i n√¥m na, l∆∞u theo ch·ªâ m·ª•c t·ª©c l√† theo d·∫°ng object, theo c·∫∑p key-value. T√°c gi·∫£ Redux ( Dan Abramov ) c√≥ tr√¨nh b√†i v·∫•n ƒë·ªÅ n√†y <a href=\"https://egghead.io/lessons/javascript-redux-persisting-the-state-to-the-local-storage\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">·ªü ƒë√¢y</a></p>\n<p>T∆∞·ªüng t∆∞·ª£ng ch√∫ng ta c√≥ m·ªôt m·∫£ng object, ƒë∆∞·ª£c <code class=\"language-inline-text\">fetch</code> t·ª´ REST API. Gi·∫£ d·ª• ch√∫ng ta quy·∫øt ƒë·ªãnh l∆∞u to√†n b·ªô xu·ªëng <em>store</em> nh∆∞ n√≥ tr·∫£ v·ªÅ. Khi ch√∫ng ta mu·ªën l·∫•y m·ªôt object c·ª• th·ªÉ n√†o ƒë√≥? Ph·∫£i loop qua to√†n b·ªô, r·ªìi mu·ªën l∆∞u danh s√°ch c√°c user ƒëang ƒë∆∞·ª£c ch·ªçn v√† ch∆∞a ƒë∆∞·ª£c ch·ªçn?</p>\n<p>ƒê·ªÉ tr√°nh t√¨nh tr·∫°ng n√†y, l∆∞u n√≥ d·∫°ng ch·ªâ m·ª•c, vi·∫øt l·∫°i reducer tr∆∞·ªõc khi l∆∞u xu·ªëng store, c·ª•c d·ªØ li·ªáu mong mu·ªën, (b·∫°n n√†o s·ª≠ d·ª•ng FireStore, NoSQL database s·∫Ω hi·ªÉu li·ªÅn t·∫°i sao)</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">\"usersById\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token number\">123</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">123</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Jane Doe\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jdoe@example.com\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">phone</span><span class=\"token operator\">:</span> <span class=\"token string\">\"555-555-5555\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token operator\">...</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>D·ªØ li·ªáu ƒë∆∞·ª£c c·∫•u tr√∫c nh∆∞ th·∫ø n√†y th√¨ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ b·∫±ng c√°ch n√†o? V√≠ d·ª•, ch√∫ng ta mu·ªën truy c·∫≠p ƒë·∫øn m·ªôt user object c·ª• th·ªÉ</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> user <span class=\"token operator\">=</span> state<span class=\"token punctuation\">.</span>usersById<span class=\"token punctuation\">[</span>userId<span class=\"token punctuation\">]</span></code></pre></div>\n<p><strong>Kh√¥ng c·∫ßn loop, s·ª≠ d·ª•ng key ƒë·ªÉ l·∫•y tr·ª±c ti·∫øp ƒë·∫øn object mong mu·ªën</strong></p>\n<p>C√¢u h·ªèi ti·∫øp theo, ·ªßa v·∫≠y sao render ƒë∆∞·ª£c danh s√°ch user n·∫øu d·ªØ li·ªáu t·ªï ch·ª©c nh∆∞ v·∫≠y. ƒê·ªÉ l√†m chuy·ªán ƒë√≥, ch√∫ng ta vi·∫øt m·ªôt h√†m (h√†m nh∆∞ v·∫≠y g·ªçi l√† selector) ƒë∆°n gi·∫£n b·∫±ng <code class=\"language-inline-text\">Object.keys()</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getUsers</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>userById<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>usersById<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span> <span class=\"token operator\">=></span> usersById<span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Th√™m m·ªôt h√†m n·ªØa cho vi·ªác l·∫•y ra danh s√°ch user v·ªõi tham s·ªë truy·ªÅn v√†o l√† m·∫£ng user id</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getSelectedUsers</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> selectedUserIds<span class=\"token punctuation\">,</span> usersById <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> selectedUserIds<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> usersById<span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ª´ng lo chuy·ªán ph·∫£i vi·∫øt qu√° nhi·ªÅu h√†m, vi·∫øt nh∆∞ v·∫≠y c√†ng d·ªÖ cho sau n√†y maintain. Tr∆∞·ªùng h·ª£p c√°i model user c√≥ b·ªã thay ƒë·ªïi ƒëi n·ªØa, ch√∫ng ta kh√¥ng c·∫ßn ph·∫£i update c·∫£ trƒÉm c√°i view ƒëang s·ª≠ d·ª•ng d·ªØ li·ªáu n√†y, ƒë∆°n gi·∫£n l√† update nh·ªØng h√†m selector n√†y l·∫°i, re-format d·ªØ li·ªáu m·ªôt t√≠ l√† xong.</p>\n<h1 id=\"view-v√†-edit-n√™n-c√≥-2-state-kh√°c-nhau\"><a href=\"#view-v%C3%A0-edit-n%C3%AAn-c%C3%B3-2-state-kh%C3%A1c-nhau\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>View v√† edit n√™n c√≥ 2 state kh√°c nhau</h1>\n<p>Nh·ªØng d·ªØ li·ªáu t·ª´ REST API tr·∫£ v·ªÅ ƒë∆∞·ª£c xem l√† <strong>state chu·∫©n</strong>, gi·ªëng h·ªát v·ªõi database. State c·ªßa ·ª©ng d·ª•ng ch√∫ng ta s·∫Ω l∆∞u th√™m m·ªôt s·ªë meta data kh√°c cho t·ª´ng user, b√¨nh th∆∞·ªùng ch√∫ng ta s·∫Ω x·ª≠ l√Ω h·∫øt nh·ªØng d·ªØ li·ªáu trong c√πng m·ªôt reducer, v√¨ n√≥ ti·ªán.</p>\n<p>N√™n t√°ch vi·ªác x·ª≠ l√Ω state chu·∫©n tr√™n reducer kh√°c, <strong>n·∫øu t·∫≠p trong t·∫•t c·∫£ x·ª≠ l√Ω trong m·ªôt reducer s·∫Ω kh√≥ maintain h∆°n l√† t√°ch ra th√†nh nhi·ªÅu reducer ri√™ng bi·ªát</strong>. (d√πng <code class=\"language-inline-text\">combineReducers</code> ƒë·∫•y m√†)</p>\n<p>T·∫°i sao? V√≠ d·ª• ch√∫ng ta c√≥ 1 danh s√°ch user, l∆∞u d·∫°ng ch·ªâ m·ª•c nh∆∞ ·ªü tr√™n</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n <span class=\"token string-property property\">\"usersById\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token number\">123</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">123</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Jane Doe\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jdoe@example.com\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">phone</span><span class=\"token operator\">:</span> <span class=\"token string\">\"555-555-5555\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token operator\">...</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta c√≥ m√†n h√¨nh ƒë·ªÉ user ch·ªânh s·ª≠a, user click n√∫t <strong>Edit</strong>, ch√∫ng ta ph·∫£i update l·∫°i state ƒë·ªÉ render m√†n h√¨nh edit, ch√∫ng ta th√™m m·ªôt field m·ªõi v√†o object nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n <span class=\"token string-property property\">\"usersById\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token number\">123</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">123</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Jane Doe\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jdoe@example.com\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">phone</span><span class=\"token operator\">:</span> <span class=\"token string\">\"555-555-5555\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token operator\">...</span>\n      <span class=\"token literal-property property\">isEditing</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Submit l√™n tr√™n API sau khi s·ª≠a. API tr·∫£ v·ªÅ m·ªôt object m·ªõi. Nh∆∞ng l√†m sau ch√∫ng ta merge l·∫°i v√†o store? N·∫øu replace to√†n b·ªô object th√¨ ch√∫ng ta m·∫•t c√°i field <code class=\"language-inline-text\">isEditing</code>, t·∫•t nhi√™n l√† n·∫øu mu·ªën th√¨ v·∫´n check v√† ch·ªâ update nh·ªØng field m√¨nh mu·ªën, nh∆∞ng nh∆∞ v·∫≠y r·∫•t t·ªën <em>s·ª©c ng∆∞·ªùi s·ª©c m√°y</em>. T·ªët nh·∫•t ch√∫ng ta l∆∞u d·ªØ li·ªáu t·ª´ API v√†o m·ªôt n∆°i kh√°c trong store b·∫±ng m·ªôt reducer kh√°c, kh√¥ng ƒë·ª•ng g√¨ v√†o n√≥, action c≈©ng s·∫Ω ƒë∆°n gi·∫£n h∆°n v√† d·ªÖ x·ª≠ h∆°n</p>\n<p>Th√™m n·ªØa, n·∫øu user c√≥ n·ªØa ch·ª´ng ·∫•n <em>cancel</em> ch√∫ng ta d·ªÖ d√†ng reverse l·∫°i n·∫øu ƒë∆∞a edit state v√†o ch·ªï kh√°c</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string-property property\">\"usersByIds\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token number\">123</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">123</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Jane Doe\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jdoe@example.com\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">phone</span><span class=\"token operator\">:</span> <span class=\"token string\">\"555-555-5555\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token string-property property\">\"editingUsersById\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token number\">123</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">123</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Jane Smith\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jsmith@example.com\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">phone</span><span class=\"token operator\">:</span> <span class=\"token string\">\"555-555-5555\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Nh∆∞ v·∫≠y ch√∫ng ta v·∫´n c√≥ state chu·∫©n, ƒë·ªÉ reverse, edit state n·∫øu user click edit n·ªØa. N√≥i chung, t√°ch ra, ƒë·ª´ng g·ªçp chung</p>\n<h1 id=\"x√†i-chung-state-m·ªôt-c√°ch-kh√¥n-ngoan\"><a href=\"#x%C3%A0i-chung-state-m%E1%BB%99t-c%C3%A1ch-kh%C3%B4n-ngoan\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>X√†i chung state m·ªôt c√°ch kh√¥n ngoan</h1>\n<p>M·ªôt khi ·ª©ng d·ª•ng ph√¨nh ra, nhi·ªÅu t√≠nh nƒÉng h∆°n, n√™n c√≥ c√°i reducer cho t·ª´ng page, v√≠ d·ª• trang hi·ªÉn th·ªã list user, l∆∞u l·∫°i trong <code class=\"language-inline-text\">users</code> reducer, m·ªôt trang kh√°c bao g·ªìm t·∫•t c·∫£ post c·ªßa user hi·ªán t·∫°i. T·ªï ch·ª©c redux store nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">\"usersPage\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"usersById\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"postsPage\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"postsById\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>M·ªói trang ƒë·∫£m tr√°ch state c·ªßa ch√≠nh n√≥, c√°c file reducer c√≥ th·ªÉ ƒë·ªÉ c√πng v·ªõi c√°c file page lu√¥n.</p>\n<p>S·∫Ω ƒë·∫øn l√∫c ch√∫ng ta c·∫ßn chia s·∫ª m·ªôt v√†i state gi·ªØa 2 view. C√¢n nh·∫Øc c√°c c√¢u h·ªèi sau</p>\n<ul>\n<li>C√≥ bao nhi√™u view ho·∫∑c reducer s·∫Ω ph·ª• thu·ªôc v√†o d·ªØ li·ªáu n√†y?</li>\n<li>M·ªói trang c√≥ c·∫ßn m·ªôt b·∫£n sao d·ªØ li·ªáu kh√¥ng?</li>\n<li>D·ªØ li·ªáu thay ƒë·ªïi c√≥ th∆∞·ªùng xuy√™n kh√¥ng?</li>\n</ul>\n<p>V√≠ d·ª•, th√¥ng tin user ƒëang ƒëƒÉng nh·∫≠p s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã tr√™n t·∫•t c·∫£ c√°c trang. T·∫•t c·∫£ trang ƒë·ªÅu d√πng, th√¨ n√≥ s·∫Ω kh√¥ng h·ª£p l√Ω v·ªõi c√°ch l√†m m·ªói page m·ªôt reducer. Th√¥ng tin user s·∫Ω kh√¥ng ƒë·ªïi tr√™n t·∫•t c·∫£ c√°c trang (tr·ª´ khi n√≥ v√¥ s·ª≠a profile), v·∫≠y n√™n m·ªói trang kh√¥ng c·∫ßn ph·∫£i c√≥ m·ªôt b·∫£n sao th√¥ng tin n√†y.</p>\n<p>T·∫•t c·∫£ c√°c trang n√™n d√πng chung m·ªôt th√¥ng tin user ƒëang login, cho n√≥ m·ªôt reducer ri√™ng.</p>\n<p>Tr∆∞·ªùng h·ª£p n√†o chuy·ªán x√†i chung nh∆∞ v·∫≠y l√† ko h·ª£p l√Ω? Th√≠ d·ª• trong c√°c b√†i vi·∫øt c·ªßa user, n√≥ c√≥ th√™m danh s√°ch c√°c b√¨nh lu·∫≠n. M·ªôt trang hi·ªÉn th·ªã t·∫•t c·∫£ b√¨nh lu·∫≠n. Trang trang list post c√≥ t√πy ch·ªçn hi·ªÉn th·ªã b√¨nh lu·∫≠n cho post ƒëang ch·ªçn. Ch√∫ng ta c√≥ 2 trang ƒë·ªÅu ph·ª• thu·ªôc v√†o d·ªØ li·ªáu c·ªßa b√¨nh lu·∫≠n. Trang list post s·∫Ω b·ªã thay ƒë·ªïi kh√° th∆∞·ªùng xuy√™n: user update, edit, delete, add post, b√¨nh lu·∫≠n t√® le ·ªü ƒë√≥. ·ªû trang b√¨nh lu·∫≠n ch·ªâ cho t∆∞∆°ng t√°c v·ªõi API GET, PUT b√¨nh lu·∫≠n, c√≥ th·ªÉ ph√¢n trang. Trang post th√¨ ng∆∞·ª£c l·∫°i, n√≥ ch·ªâ l·∫•y danh s√°ch b√¨nh lu·∫≠n c·ªßa ch√≠nh n√≥. R√µ r√†ng, vi·ªác d√πng chung b√¨nh lu·∫≠n gi·ªØa c√°c view l√† kh√¥ng h·ª£p l√Ω. M·ªói trang n√™n l∆∞u ri√™ng m·ªôt b·∫£n sao c·ªßa b√¨nh lu·∫≠n.</p>\n<h1 id=\"t√°i-s·ª≠-d·ª•ng-c√°c-h√†m-x·ª≠-l√Ω-reducer\"><a href=\"#t%C3%A1i-s%E1%BB%AD-d%E1%BB%A5ng-c%C3%A1c-h%C3%A0m-x%E1%BB%AD-l%C3%BD-reducer\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T√°i s·ª≠ d·ª•ng c√°c h√†m x·ª≠ l√Ω reducer</h1>\n<p>Sau m·ªôt th·ªùi gian vi·∫øt reducer, s·∫Ω c√≥ l√∫c m√¨nh th·∫•y m·∫•y c√°i function n√†y x·ª≠ l√Ω na n√° nhau, nh∆∞ v·∫≠y th√¨ n√™n t√°i s·ª≠ d·ª•ng n√≥ ƒë·ª´ng vi·∫øt m·ªõi. V√≠ d·ª• n·∫øu logic c·ªßa vi·ªác load d·ªØ li·ªáu b√†i vi·∫øt v√† b√¨nh lu·∫≠n l√† nh∆∞ nhau, kh√°c c√°i endpoint th√¥i v√† object schema, ph√¢n trang c≈©ng gi·ªëng.</p>\n<p>ƒê·ªÉ d√πng chung reducer, c√°ch th·ª© nh·∫•t, truy·ªÅn v√†o scope b√™n trong payload c·ªßa action. ƒê·ªÉ d·ªÖ h√¨nh dung, l·∫•y v·ªã d·ª• m·ªôt trang ch·ª©a nhi·ªÅu section kh√°c nhau, t·∫•t c·∫£ ƒë·ªÅu load b·∫•t tu·∫ßn t·ª± t·ª´ c√°c API endpoint kh√°c nhau, ƒë·ªÉ theo d√µi t√¨nh trang load n√†y b·∫±ng state trong store</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> initialLoadingState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">usersLoading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">domainsLoading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">subDomainsLoading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">settingsLoading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ch√∫ng ta c√≥ th·ªÉ vi·∫øt 4 reducer cho 4 c√°i action, thay v√¨ nh∆∞ v·∫≠y n·∫øu truy·ªÅn th√™m scope, m·ªôt action <code class=\"language-inline-text\">SET_LOADING</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// reducer</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">loadingReducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> initialLoadingState<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> type<span class=\"token punctuation\">,</span> payload <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> action<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>type <span class=\"token operator\">===</span> <span class=\"token constant\">SET_LOADING</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// t√πy theo scope m√† g√°n cho key t∆∞∆°ng ·ª©ng</span>\n      <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>payload<span class=\"token punctuation\">.</span>scope<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">Loading</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> payload<span class=\"token punctuation\">.</span>loading<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Action</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setLoading</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">scope<span class=\"token punctuation\">,</span> loading</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">SET_LOADING</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      scope<span class=\"token punctuation\">,</span>\n      loading<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// v√≠ d·ª• g·ªçi dispatch</span>\nstore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">setLoading</span><span class=\"token punctuation\">(</span><span class=\"token string\">'users'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>L√†m nh∆∞ v·∫≠y ch√∫ng ta kh·ª≠ ƒë∆∞·ª£c qu√° nhi·ªÅu l·∫ßn l·∫≠p l·∫°i logic c·ªßa reducer.</p>\n<p>C√≤n v·ªÅ v·∫•n ƒë·ªÅ ph√¢n trang, API c√≥ th·ªÉ tr·∫£ v·ªÅ g·∫ßn gi·ªëng nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">\"users\"</span><span class=\"token operator\">:</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"count\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2500</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// t·ªïng s·ªë d√≤ng</span>\n  <span class=\"token string-property property\">\"pageSize\"</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// s·ªë ph·∫ßn t·ª≠ m·ªói trang</span>\n  <span class=\"token string-property property\">\"startElement\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// gi√° tr·ªã index ƒë·∫ßu ti√™n c·ªßa ph·∫ßn t·ª´ ƒë·∫ßu ti√™n</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ªÉ g·ªçi d·ªØ li·ªáu trang ti·∫øp theo, ch√∫ng ta c√≥ th·ªÉ d√πng tham s·ªë query <code class=\"language-inline-text\">startElement=100</code>. ƒê√¢y l√† c√°ch ch√∫ng ta hi·ªán th·ª±c reducer cho v·∫•n ƒë·ªÅ ph√¢n trang</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> initialPaginationState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">startElement</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">pageSize</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">paginationReducerFor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">prefix</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">paginationReducer</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> initialPaginationState<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> type<span class=\"token punctuation\">,</span> payload <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> action<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> prefix <span class=\"token operator\">+</span> types<span class=\"token punctuation\">.</span><span class=\"token constant\">SET_PAGINATION</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n          startElement<span class=\"token punctuation\">,</span>\n          pageSize<span class=\"token punctuation\">,</span>\n          count<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> payload<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n          startElement<span class=\"token punctuation\">,</span>\n          pageSize<span class=\"token punctuation\">,</span>\n          count<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> paginationReducer<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// V√≠ d·ª•</span>\n<span class=\"token keyword\">const</span> postsReducer <span class=\"token operator\">=</span> <span class=\"token function\">combineReducers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">postsData</span><span class=\"token operator\">:</span> postsDataReducer<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">paginationData</span><span class=\"token operator\">:</span> <span class=\"token function\">paginationReducerFor</span><span class=\"token punctuation\">(</span><span class=\"token string\">'POSTS_'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> commentsReducer <span class=\"token operator\">=</span> <span class=\"token function\">combineReducers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">commentsData</span><span class=\"token operator\">:</span> commentsDataReducer<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">paginationData</span><span class=\"token operator\">:</span> <span class=\"token function\">paginationReducerFor</span><span class=\"token punctuation\">(</span><span class=\"token string\">'COMMENTS_'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Action creator</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setPaginationFor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">prefix</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> \n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setPagination</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n      startElement<span class=\"token punctuation\">,</span>\n      pageSize<span class=\"token punctuation\">,</span>\n      count<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> response<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> prefix <span class=\"token operator\">+</span> types<span class=\"token punctuation\">.</span><span class=\"token constant\">SET_PAGINATION</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        startElement<span class=\"token punctuation\">,</span>\n        pageSize<span class=\"token punctuation\">,</span>\n        count<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> setPagination<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// v√≠ d·ª• s·ª≠ d·ª•ng</span>\n<span class=\"token keyword\">const</span> setPostsPagination <span class=\"token operator\">=</span> <span class=\"token function\">setPaginationFor</span><span class=\"token punctuation\">(</span><span class=\"token string\">'POSTS_'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> setCommentsPagination <span class=\"token operator\">=</span> <span class=\"token function\">setPaginationFor</span><span class=\"token punctuation\">(</span><span class=\"token string\">'COMMENTS_'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>N·∫øu ch√∫ng ta dispatch ra 1 action l√† <code class=\"language-inline-text\">POSTS_SET_PAGINATION</code> n√≥ s·∫Ω ch·ªâ ƒë·ª•ng ƒë·∫øn <code class=\"language-inline-text\">postsReducer</code>. M·ªôt ki·ªÉu vi·∫øt h∆°i tricky n·∫øu b·∫°n n√†o ch∆∞a n·∫Øm ƒë∆∞·ª£c <a href=\"https://developer.mozilla.org/vi/docs/Web/JavaScript/Closures\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Closure function</a> - m√¨nh c√≥ d·ªãch tr√™n MDN r·ªìi, c√°c b·∫°n l√™n ƒë√≥ ƒë·ªçc l·∫°i.</p>\n<h1 id=\"t√≠ch-h·ª£p-v·ªõi-react\"><a href=\"#t%C3%ADch-h%E1%BB%A3p-v%E1%BB%9Bi-react\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T√≠ch h·ª£p v·ªõi React</h1>\n<p>V√≠ d·ª• s·ª≠ d·ª•ng selector v√† action creator</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> ConnectedComponent <span class=\"token operator\">=</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">users</span><span class=\"token operator\">:</span> selectors<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrentUsers</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">editingUser</span><span class=\"token operator\">:</span> selectors<span class=\"token punctuation\">.</span><span class=\"token function\">getEditingUser</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> actions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">setPagination</span><span class=\"token operator\">:</span> actionCreatorFactories<span class=\"token punctuation\">.</span><span class=\"token function\">setPaginationFor</span><span class=\"token punctuation\">(</span><span class=\"token string\">'USERS_'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">bindActionCreators</span><span class=\"token punctuation\">(</span>actions<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>UsersComponent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>C√°c component n√≥ kh√¥ng c·∫ßn quan t√¢m c√°i scope n√†o ƒëang d√πng v·ªõi action v√† truy c·∫≠p t·ªõi state b·∫±ng c√°ch n√†o. Component gi·ªù kh√¥ng c·∫ßn quan t√¢m vi·ªác d·ªØ li·ªáu c·ª• th·ªÉ b√™n trong state l√†m vi·ªác th·∫ø n√†o.</p>\n<p>Xem th√™m</p>\n<ul>\n<li><a href=\"https://github.com/reactjs/reselect\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Reselect</a> th∆∞ vi·ªán t·∫°o selector</li>\n<li><a href=\"https://github.com/paularmstrong/normalizr\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Normalizr</a> th∆∞ vi·ªán chu·∫©n h√≥a d·ªØ li·ªáu JSON</li>\n</ul>\n<p><a href=\"https://techblog.appnexus.com/five-tips-for-working-with-redux-in-large-applications-89452af4fdcb\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">To√†n b·ªô v√†i vi·∫øt</a></p>\n","cover_image":""}},{"node":{"id":"c96e777ca9db4c279c1d03ebd80ea3f8","title":"X·ª≠ l√Ω t·∫≠p d·ªØ li·ªáu l·ªõn trong React","path":"/2018-10-03-huong-dan-reactjs-table-du-lieu-lon/","date":"2018-10-03","timeToRead":3,"desc":"T√¨nh hu·ªëng: b·∫°n c√≥ m·ªôt table v·ªõi r·∫•t nhi·ªÅu d·ªØ li·ªáu ƒë·ªï v√†o, n·∫øu b·∫°n th·∫•y component ƒë√≥ render ch·∫≠m tr√™n m√†n h√¨nh, ƒë√≥ l√† l√∫c c·∫ßn t√°i c·∫•u tr√∫c","content":"<p>Ch√∫ng ta c√≥ component nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ParentComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ChildComponent</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>item<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Khi m√† <code class=\"language-inline-text\">ParentComponent</code> nh·∫≠n ƒë∆∞·ª£c <code class=\"language-inline-text\">props.items</code>, tr∆∞·ªõc h·∫øt n√≥ s·∫Ω ƒë·ªï t·∫•t c·∫£ d·ªØ li·ªáu v√†o trong virtual DOM, sau ƒë√≥ ki·ªÉm tra xem ph·∫ßn n√†o c·ªßa real DOM c·∫ßn c·∫≠p nh·∫≠p, r·ªìi c·∫≠p nh·∫≠p to√†n b·ªô trong <strong>m·ªôt l·∫ßn</strong>. ƒê√≥ l√† l√Ω do ch√∫ng ta b·ªã <strong>delay</strong>, n√≥ t·ªën th·ªùi gian cho vi·ªác t·∫°o ra m·ªôt s·ªë l∆∞·ª£ng virtual DOM r·∫•t l·ªõn tr∆∞·ªõc khi update real DOM, gi·∫£ d·ª• c√≥ h∆°n 40.000 d√≤ng d·ªØ li·ªáu, n√≥ ƒë·ª£i t·∫°o 40.000 c√°i virtual DOM tr∆∞·ªõc khi ƒë·∫©y h·∫øt xu·ªëng real DOM.</p>\n<p>Ch√∫ng ta mu·ªën render <code class=\"language-inline-text\">ParentComponent</code> s·ªõm nh·∫•t c√≥ th·ªÉ, v√† sau ƒë√≥ th√™m c√°c item t·ª´ t·ª´. Ch√∫ng ta mu·ªën hi·ªÉn th·ªã c√°c item v·ª´a c√≥ trong virtual DOM, r·ªìi l·∫°i render ti·∫øp. </p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">items</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token comment\">//...</span>\n    <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span> <span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> \n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ChildComponent</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>item<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Gi·∫£i ph√°p ·ªü ƒë√¢y l√† ƒë∆∞a to√†n b·ªô <code class=\"language-inline-text\">item</code> v√†o trong <code class=\"language-inline-text\">state</code>, sau ƒë√≥ <code class=\"language-inline-text\">render()</code> theo <code class=\"language-inline-text\">state.items</code>. Vi·ªác c·∫ßn l√†m l√† update l·∫°i <code class=\"language-inline-text\">state.items</code> v√† ch√®n th√™m item m·ªôt c√°ch t·ª´ t·ª´. V·ªõi c√°ch n√†y, h√†m <code class=\"language-inline-text\">render</code> s·∫Ω g·ªçi kh√° th∆∞·ªùng xuy√™n, nh∆∞ng ƒë∆∞·ª£c c√°i n√≥ hi·ªÉn th·ªã li·ªÅn</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function-variable function\">recursive</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> hasMore <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token operator\">&lt;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">items</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> prev<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">.</span>length <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hasMore<span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>H√†m ƒë·ªá quy tr√™n n√≥ s·∫Ω ch·∫°y ƒë·∫øn khi <strong>length</strong> b·∫±ng nhau. Tr√™n m·ªói l·∫ßn l·∫∑p l·∫°i n√≥ th√™m m·ªôt element v√†o m·∫£ng <code class=\"language-inline-text\">state.items</code>. D√πng <code class=\"language-inline-text\">setTimeout</code> ƒë·ªÉ ƒë∆∞a th·ª© t·ª± ∆∞u ti√™n c·ªßa n√≥ xu·ªëng th·∫•p nh·∫•t.</p>\n<p>N·∫øu th·∫Øc m·∫Øc t·∫°i sao l·∫°i g·ªçi h√†m <code class=\"language-inline-text\">setState()</code> b√™n trong m·ªôt h√†m ƒë·ªá quy</p>\n<ul>\n<li>Bu·ªôc ph·∫£i d√πng <code class=\"language-inline-text\">setState</code> n·∫øu mu·ªën update real DOM, <code class=\"language-inline-text\">setState</code> n√≥ c√≥ c√°ch x·ª≠ l√Ω ri√™ng khi ch√∫ng ta g·ªçi nhi·ªÅu l·∫ßn</li>\n<li>V√≠ d·ª• tr√™n ƒëang th√™m 1 item m·ªôt l·∫ßn g·ªçi, t√πy theo nhu c·∫ßu, s·ªë l∆∞·ª£ng item c√≥ th·∫ø nhi·ªÅu h∆°n.</li>\n<li><code class=\"language-inline-text\">setTimeout</code> c√≥ th·ª© t·ª± ∆∞u ti√™n ch·∫°y cu·ªëi c√πng, n√™n, n·∫øu user t∆∞∆°ng t√°c v·ªõi component ƒë√£ ƒë∆∞·ª£c render, t∆∞∆°ng t√°c n√†y s·∫Ω ƒë∆∞·ª£c ∆∞u ti√™n cao h∆°n vi·ªác render c√°c item c√≤n l·∫°i. User c√≥ th·ªÉ b·∫Øt ƒë·∫ßu t∆∞∆°ng t√°c v·ªõi c√°c item ƒë√£ render m√† kh√¥ng ƒë·ª£i n√≥ show h·∫øt</li>\n<li>N·∫øu ƒë√£ c√≥ s·∫µn to√†n b·ªô c√°c item th√¨ ok, n·∫øu ph·∫£i ƒëi <code class=\"language-inline-text\">fetch</code>, d√πng c√°ch kh√°c</li>\n<li>N·∫øu d√πng HOC s·∫Ω kh√¥ng h·ªÅ l√†m side effect v·ªõi c√°ch n√†y</li>\n<li>B·∫°n c·ª© test performance ƒë·ªÉ ki·ªÉm tra th·ª≠ n√≥ l√†m nhanh hay ch·∫≠m app ƒë·ªÉ x√°c nh·∫≠n</li>\n</ul>\n<p>G·ªçi h√†m ƒë·ªá quy trong <code class=\"language-inline-text\">componentDidMount</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">recursive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Ghi ch√∫</strong></p>\n<p>C√°ch n√†y ƒë√£ ki·ªÉm tra khi render kho·∫£ng 10 ƒë·∫øn 1500 element, th·ªùi gian t·ªën kho·∫£ng 2 ƒë·∫øn 3ms.</p>\n<p>N·∫øu mu·ªën t√¨m m·ªôt gi·∫£i ph√°p c·ªßa ng∆∞·ªùi ta build s·∫µn th√¨ d√πng <a href=\"https://github.com/bvaughn/react-virtualized\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react-virtualized</a></p>\n<p><a href=\"https://itnext.io/handling-large-lists-and-tables-in-react-238397854625\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Link b√†i vi·∫øt g·ªëc</a></p>\n","cover_image":""}},{"node":{"id":"4819e08d90839e2a61d516158dad2f2e","title":"Ch·ªâ d·∫´n ƒë·ªÉ thi·∫øt k·∫ø React Component","path":"/2018-09-25-huong-dan-thiet-ke-react-component-tot/","date":"2018-09-25","timeToRead":3,"desc":"T·ªët h∆°n, t·ªët n·ªØa, t·ªët m√£i, lu√¥n l√† ƒëi·ªÅu m√¨nh mu·ªën, ngo√†i chuy·ªán vi·∫øt cho n√≥ ch·∫°y ƒë√∫ng, vi·∫øt th·∫ø n√†o t·ªët nh·∫•t n√™n l√† m·ª•c ti√™u khi l√†m vi·ªác","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#single-responsibility-principle\">Single Responsibility Principle</a></li>\n<li><a href=\"#export\">Export</a></li>\n<li><a href=\"#type-check\">Type check</a></li>\n<li><a href=\"#consistance\">Consistance</a></li>\n<li><a href=\"#naming\">Naming</a></li>\n</ul>\n<!-- /TOC -->\n<p><strong>ƒê√¢y l√† t·ªïng h·ª£p nh·ªØng quan ƒëi·ªÉm thi·∫øt k·∫ø component sao cho t·ªët, ch·ª© kh√¥ng ph·∫£i l√† chu·∫©n m·ª±c g√¨ h·∫øt, theo quan ƒëi·ªÉm c√° nh√¢n ng∆∞·ªùi vi·∫øt - l√† m√¨nh ƒë√¢y, kh√¥ng h·ªÅ l√† chu·∫©n m·ª±c c√¥ng nghi·ªáp g√¨ c·∫£.</strong></p>\n<p>Th·ª≠ h√¨nh dung, ch√∫ng ta c√≥ m·ªôt component v·ªõi kho·∫£ng h∆°n ch·ª•c <code class=\"language-inline-text\">prop</code>, d·ª±a tr√™n c√°c <code class=\"language-inline-text\">prop</code> truy·ªÅn v√†o, component s·∫Ω cho ra k·∫øt qu·∫£ kh√°c nhau, m·ªôt nhu c·∫ßu t·∫•t y·∫øu, tuy nhi√™n n·∫øu h·∫°n ch·∫ø ƒë∆∞·ª£c √≠t ch·ª´ng n√†o th√¨ t·ªët ch·ª´ng ·∫•y, g·∫ßn nh∆∞ s·ªë l∆∞·ª£ng <code class=\"language-inline-text\">prop</code> c·ªßa component qu√° nhi·ªÅu th√¨ ch√∫ng ta s·∫Ω kh√¥ng nh·ªõ n·ªïi c·∫ßn nh·ªØng g√¨ cho component ƒë√≥, l√∫c n√†o ch√∫ng ta c≈©ng ph·∫£i m·ªü ra ƒë·ªçc docs, ƒë√¥i khi m·ªü source ra ƒë·ªÉ check logic b√™n trong n√≥.</p>\n<h1 id=\"single-responsibility-principle\"><a href=\"#single-responsibility-principle\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Single Responsibility Principle</h1>\n<p>N·∫øu 1 component ƒëang c√≥ qu√° nhi·ªÅu <code class=\"language-inline-text\">prop</code>, n√≥ ƒëang √¥m ƒë·ªìm qu√° nhi·ªÅu c√¥ng vi·ªác, h√£y nh·ªõ ƒë·∫øn nguy√™n t·∫Øc <a href=\"https://en.wikipedia.org/wiki/Single_responsibility_principle\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Single Responsibility Principle</a> (SRP), t·∫°m d·ªãch l√† ai l√†m vi·ªác n·∫•y, chia component ƒë√≥ ra th√†nh c√°c component nh·ªè h∆°n, t·ª´ng component gi·∫£i quy·∫øt t·ª´ng v·∫•n ƒë·ªÅ.</p>\n<p><img src=\"https://techmaster.vn/fileman/Uploads/ImageBlog/hoc-lap-trinh-truc-tuyen-online-co-ban-den-nang-cao-20122015-1.jpg\"></p>\n<h1 id=\"export\"><a href=\"#export\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Export</h1>\n<p>M·ªôt ki·ªÉu vi·∫øt m√¨nh r·∫•t th√≠ch, thay v√¨ export component <code class=\"language-inline-text\">&lt;TableRow/></code>, <code class=\"language-inline-text\">&lt;TableCell/></code>, m√¨nh s·∫Ω export  component d·∫°ng <code class=\"language-inline-text\">&lt;Table.Row/></code>, <code class=\"language-inline-text\">&lt;Table.Cell/></code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> Table <span class=\"token keyword\">from</span> <span class=\"token string\">'./Table'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> TableRow <span class=\"token keyword\">from</span> <span class=\"token string\">'./TableRow'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> TableCell <span class=\"token keyword\">from</span> <span class=\"token string\">'./TableCell'</span><span class=\"token punctuation\">;</span>\n\nTable<span class=\"token punctuation\">.</span>Cell <span class=\"token operator\">=</span> TableCell<span class=\"token punctuation\">;</span>\nTable<span class=\"token punctuation\">.</span>Row <span class=\"token operator\">=</span> TableRow<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span>\n  TableCell<span class=\"token punctuation\">,</span>\n  TableRow\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Table<span class=\"token punctuation\">;</span></code></pre></div>\n<p><em>N·∫øu b·∫°n kh√¥ng hi·ªÉu v√¨ sao m√¨nh c√≥ th·ªÉ g·ªçi <code class=\"language-inline-text\">&lt;Table.Row/></code>, <code class=\"language-inline-text\">&lt;Table.Cell/></code>, m√¨nh gi·∫£i th√≠ch lu√¥n, l·ª£i d·ª•ng ƒë·∫∑c ƒëi·ªÉm bi·∫øn ki·ªÉu reference, tham kh·∫£o <a href=\"https://luubinhan.github.io/blog/2017-09-25-10-khai-niem-javascript-can-biet\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">l·∫°i b√†i n√†y</a>, th·∫±ng TableCell v√† Table.Cell ƒë·ªÅu tham chi·∫øu ƒë·∫øn c√πng v√πng nh·ªõ</em></p>\n<h1 id=\"type-check\"><a href=\"#type-check\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Type check</h1>\n<p>Lu√¥n d√πng type check cho component, th·ªùi ƒëi·ªÉm hi·ªán t·∫°i m√¨nh khuy·∫øn kh√≠ch <a href=\"https://luubinhan.github.io/blog/2018-09-10-huong-dan-lam-viec-voi-flow-react-type-checking\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">d√πng Flow</a>, n√≥ ƒë·∫£m b·∫£o r·∫±ng component s·∫Ω ƒë∆∞·ª£c truy·ªÅn ƒë√∫ng gi√° tr·ªã <code class=\"language-inline-text\">prop</code> n√≥ c·∫ßn, ƒë·ªìng th·ªùi l√∫c g√µ ra m√¨nh c≈©ng s·∫Ω th·∫•y ƒë∆∞·ª£c danh s√°ch c√°c <code class=\"language-inline-text\">prop</code> c·ªßa component ƒë√≥ tr√™n editor</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*cT7C0Tk53cilIYNWNo8KfA.gif\" alt=\"Ch·ªâ d·∫´n ƒë·ªÉ thi·∫øt k·∫ø React Component\"></p>\n<h1 id=\"consistance\"><a href=\"#consistance\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Consistance</h1>\n<p>Lu√¥n th·ªëng nh·∫•t trong h·ªá th·ªëng component ƒëang build, kh√¥ng th·ªÉ l√∫c vui b·∫°n d√πng <code class=\"language-inline-text\">prop</code> t√™n <code class=\"language-inline-text\">disable</code> ch·ªï kh√°c d√πng <code class=\"language-inline-text\">enable</code>, n·∫øu ƒë∆∞·ª£c th√¨ ch·ªâ ch·ªçn 1 trong 2 th√¥i.</p>\n<p>V√≠ d·ª• kh√°c, n·∫øu component cho ph√©p truy·ªÅn v√†o bi·∫øn m√†u s·∫Øc, ch·ªï n√†y b·∫°n d√πng <code class=\"language-inline-text\">variant=\"primary|secondary|danger\"</code>, ch·ªï kia b·∫°n l·∫°i d√πng <code class=\"language-inline-text\">color=\"blue|grey|red\"</code> th√¨ h·∫øt s·ª©c kh√≥ ch·ªãu cho ng∆∞·ªùi kh√°c.</p>\n<h1 id=\"naming\"><a href=\"#naming\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Naming</h1>\n<p>V·ªÅ c√°ch ƒë·∫∑t t√™n <code class=\"language-inline-text\">prop</code>, lu√¥n ƒë·∫∑t t√™n cho d·ªÖ h√¨nh dung ƒë∆∞·ª£c c√¥ng d·ª•ng c·ªßa component ƒë√≥ l√†m nhi·ªám v·ª• g√¨, ·∫£nh h∆∞·ªüng g√¨ ƒë·∫øn component</p>\n<p>Gi·ªù l·∫•y v√≠ d·ª• m·ªôt component r·∫•t ph·ªï bi·∫øn <code class=\"language-inline-text\">&lt;Alert /></code></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/0*xkEnUeapJT4ut5r1.png\" alt=\"Ch·ªâ d·∫´n ƒë·ªÉ thi·∫øt k·∫ø React Component\"></p>\n<p>Th∆∞·ªùng ch√∫ng ta s·∫Ω t·∫°o ra component c√≥ c√°c <code class=\"language-inline-text\">prop</code> ki·ªÉu n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Alert</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Th√¥ng b√°o</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Alert</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Alert</span></span> <span class=\"token attr-name\">success</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Th√†nh c√¥ng</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Alert</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Alert</span></span> <span class=\"token attr-name\">warning</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">C·∫£nh b√°o</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Alert</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Alert</span></span> <span class=\"token attr-name\">danger</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">H∆∞ m·∫π r·ªìi</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Alert</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>R·∫•t r√µ r√†ng s·∫°ch s·∫Ω, x√∫c t√≠ch. Tuy nhi√™n n·∫øu ch√∫ng ta d√πng theo ki·ªÉu sau</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Alert</span></span> <span class=\"token attr-name\">success</span> <span class=\"token attr-name\">warning</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Th√†nh c√¥ng</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Alert</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>S·∫Ω c√≥ nh·ªØng anh developer ngu ngu ng∆° ng∆° d√πng nh∆∞ v·∫≠y th·∫≠t ƒë·∫•y. T·∫•t nhi√™n n·∫øu ch√∫ng ta l√† ng∆∞·ªùi vi·∫øt c√°i <code class=\"language-inline-text\">&lt;Alert/></code> ch√∫ng ta s·∫Ω kh√¥ng ƒë·ªùi n√†o truy·ªÅn v√†o ki·ªÉu v·∫≠y. N·∫øu truy·ªÅn v√†o ki·ªÉu nh∆∞ v·∫≠y th√¨ n√≥ <code class=\"language-inline-text\">render</code> ra c√°i g√¨, ƒë√≥ m√† ƒëo√°n ƒë∆∞·ª£c. M·ªôt gi·∫£i ph√°p ƒë∆∞·ª£c khuy·∫øn kh√≠ch</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AlertBetter</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Th√¥ng b√°o</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">AlertBetter</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AlertBetter</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>success<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Th√†nh c√¥ng</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">AlertBetter</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AlertBetter</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>warning<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">C·∫£nh b√°o</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">AlertBetter</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AlertBetter</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>danger<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">H∆∞ m·∫π r·ªìi</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">AlertBetter</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Ngu·ªìn tham kh·∫£o v√† t·ªïng h·ª£p</p>\n<ul>\n<li><a href=\"https://blog.kentcdodds.com/make-impossible-states-impossible-cf85b97795c1\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://blog.kentcdodds.com/make-impossible-states-impossible-cf85b97795c1</a></li>\n<li><a href=\"https://hackernoon.com/principles-of-component-api-prop-design-bb20cd58da54\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://hackernoon.com/principles-of-component-api-prop-design-bb20cd58da54</a></li>\n</ul>\n","cover_image":""}},{"node":{"id":"18de52b6667fae340629f0c5b1fb3c22","title":"Gi·ªõi thi·ªáu React Profiler","path":"/2018-09-19-huong-dan-react-profiler-dev-tool/","date":"2018-09-19","timeToRead":3,"desc":"T·ª´ version React 16.5 b·ªï sung th√™m m·ªôt plugin DevTool profiler. Plugin n√†y ƒë∆∞·ª£c d√πng ƒë·ªÉ thu th·∫≠p c√°c th√¥ng tin v·ªÅ th·ªùi gian render m·ªôt component, x√°c ƒë·ªãnh nguy√™n nh√¢n l√†m tr√¨ tr·ªá performance.","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#thu-th%E1%BA%ADp\">Thu th·∫≠p</a></li>\n<li><a href=\"#%C4%91%E1%BB%8Dc-hi%E1%BB%83u-k%E1%BA%BFt-qu%E1%BA%A3\">ƒê·ªçc hi·ªÉu k·∫øt qu·∫£</a></li>\n<li><a href=\"#l%E1%BB%8Dc-commit\">L·ªçc commit</a></li>\n<li><a href=\"#flame-chart\">Flame chart</a></li>\n<li><a href=\"#ranked-chart\">Ranked chart</a></li>\n<li><a href=\"#component-chart\">Component Chart</a></li>\n<li><a href=\"#t%C6%B0%C6%A1ng-t%C3%A1c\">T∆∞∆°ng t√°c</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"thu-th·∫≠p\"><a href=\"#thu-th%E1%BA%ADp\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Thu th·∫≠p</h2>\n<p>Tr√™n b·ªô DevTools s·∫Ω c√≥ th√™m tab <strong>Profiler</strong></p>\n<p><img src=\"https://reactjs.org/static/4da6b55fc3c98de04c261cd902c14dc3/ad997/devtools-profiler-tab.png\"></p>\n<p>Tr√™n m√†n h√¨nh v·ª´a m·ªü, click n√∫t <strong>Record</strong> ƒë·ªÉ b·∫Øt ƒë·∫ßu thu th·∫≠p d·ªØ li·ªáu</p>\n<p><img src=\"https://reactjs.org/static/bae8d10e17f06eeb8c512c91c0153cff/ad997/start-profiling.png\" alt=\"record ƒë·ªÉ b·∫Øt ƒë·∫ßu thu th·∫≠p d·ªØ li·ªáu\"></p>\n<p>Khi m·ªôt component g·ªçi <code class=\"language-inline-text\">render</code>, th√¥ng tin s·∫Ω ƒë∆∞·ª£c thu th·∫≠p. S·ª≠ d·ª•ng app nh∆∞ b√¨nh th∆∞·ªùng, khi kh√¥ng mu·ªën thu th·∫≠p d·ªØ li·ªáu n·ªØa, click n√∫t <strong>stop</strong></p>\n<p><img src=\"https://reactjs.org/static/45619de03bed468869f7a0878f220586/ad997/stop-profiling.png\" alt=\"stop record\"></p>\n<h2 id=\"ƒë·ªçc-hi·ªÉu-k·∫øt-qu·∫£\"><a href=\"#%C4%91%E1%BB%8Dc-hi%E1%BB%83u-k%E1%BA%BFt-qu%E1%BA%A3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒê·ªçc hi·ªÉu k·∫øt qu·∫£</h2>\n<p>V·ªõi m·ªôt component th√¨ ch√∫ng ta quan t√¢m ƒë·∫øn c√°c s·ª± ki·ªán sau: khi <strong>insert</strong>, <strong>update</strong>, ho·∫∑c <strong>remove</strong> kh·ªèi DOM (c√°c s·ª± ki·ªán n√†y g·ªçi l√† <em>commit</em>)</p>\n<p>·ªû tr√™n c√πng, b√™n ph·∫£i, ƒë·ªÉ √Ω c√°i bar chart</p>\n<p><img src=\"https://reactjs.org/static/bd72dec045515d59be51c944e902d263/d8f62/commit-selector.png\"></p>\n<p>M·ªói m·ªôt c·ªôt trong chart n√†y ƒë·∫°i di·ªán cho m·ªôt commit, commit ƒëang ch·ªçn s·∫Ω ƒë∆∞·ª£c t√¥ ƒëen. ƒê·ªô cao c·ªßa c·ªôt n√†y t∆∞∆°ng ·ª©ng cho th·ªùi gian c·∫ßn ƒë·ªÉ render.</p>\n<h2 id=\"l·ªçc-commit\"><a href=\"#l%E1%BB%8Dc-commit\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>L·ªçc commit</h2>\n<p>Th·ªùi gian thu th·∫≠p d·ªØ li·ªáu c√†ng l√¢u, ·ª©ng d·ª•ng <code class=\"language-inline-text\">render</code> c√†ng nhi·ªÅu l·∫ßn, s·ªõm mu·ªôn s·ªë l∆∞·ª£ng d·ªØ li·ªáu qu√° l·ªõn nh∆∞ v·∫≠y ch√∫ng ta c·∫ßn ph·∫£i l·ªçc ƒë·ªÉ xem nhanh k·∫øt qu·∫£ c·∫ßn t√¨m. V√≠ d·ª• ·∫©n ƒëi to√†n b·ªô commit c√≥ th·ªùi gian b√© h∆°n gi√° tr·ªã <code class=\"language-inline-text\">ms</code> n√†o ƒë√≥</p>\n<p><img src=\"https://reactjs.org/683b9d860ef722e1505e5e629df7ef7e/filtering-commits.gif\"></p>\n<h2 id=\"flame-chart\"><a href=\"#flame-chart\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Flame chart</h2>\n<p><strong>Flame chart</strong> ƒë·∫°i di·ªán cho tr·∫°ng th√°i c·ªßa ·ª©ng d·ª•ng trong m·ªôt th·ªùi ƒëi·ªÉm commit c·ª• th·ªÉ. M·ªói c·ªôt ƒë·∫°i di·ªán cho m·ªôt component, k√≠ch th∆∞·ªõc v√† m√†u s·∫Øc th·ªÉ hi·ªán th·ªùi gian render component v√† c√°c component con b√™n trong. M√†u xanh th√¨ t·ªën √≠t th·ªùi gian, m√†u v√†ng l√† nhi·ªÅu th·ªùi gian v√† m√†u x√°m l√† kh√¥ng render</p>\n<p><img src=\"https://reactjs.org/static/3046f500b9bfc052bde8b7b3b3cfc243/ad997/flame-chart.png\" alt=\"Flame chart\"></p>\n<p>V√≠ d·ª• tr√™n, commit tr√™n ti√™u t·ªën h·∫øt 18.4ms ƒë·ªÉ render. Router t·ªën nhi·ªÅu nh·∫•t th·ªùi gian ƒë·ªÉ render: 18.4ms. Ph·∫ßn l·ªõn l√† do ph·∫£i render t·∫•t c·∫£ c√°c component con, <code class=\"language-inline-text\">Nav</code> (8.4ms), <code class=\"language-inline-text\">Route</code> (7.9ms)</p>\n<p>Click v√†o t·ª´ng c·ªôt ƒë·ªÉ hi·ªÉn th·ªã chi ti·∫øt c√°c component con</p>\n<p><img src=\"https://reactjs.org/39ba82394205242af7c37ccb3a631f4d/zoom-in-and-out.gif\" alt=\"Click v√†o t·ª´ng c·ªôt ƒë·ªÉ hi·ªÉn th·ªã chi ti·∫øt c√°c component con\"></p>\n<p>B√™n c·ªôt ph·∫£i ch√∫ng ta c√≥ c√°c th√¥ng tin nh∆∞ <code class=\"language-inline-text\">prop</code>, <code class=\"language-inline-text\">state</code>, t·ªïng s·ªë l·∫ßn render.</p>\n<p><img src=\"https://reactjs.org/1f4d023f1a0f281386625f28df87c78f/props-and-state.gif\"></p>\n<p>Trong m·ªôt s·ªë tr∆∞·ªùng h·ª£p, ch·ªçn v√†o component, chuy·ªÉn qua l·∫°i gi·ªØa commit, s·∫Ω c√≥ th√¥ng tin b·ªï sung t·∫°i sao component ƒë∆∞·ª£c render l·∫°i</p>\n<p><img src=\"https://reactjs.org/cc2a8b37bbce52c49a11c2f8e55dccbc/see-which-props-changed.gif\"></p>\n<p>Trong h√¨nh, gi√° tr·ªã <code class=\"language-inline-text\">state.scrollOffset</code> kh√°c nhau gi·ªØa hay l·∫ßn commit d·∫´n ƒë·∫øn re-render</p>\n<h2 id=\"ranked-chart\"><a href=\"#ranked-chart\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ranked chart</h2>\n<p><strong>Ranked chart</strong> ƒë·∫°i di·ªán cho 1 commit. M·ªói c·ªôt trong chart l√† m·ªôt component, c√°c c·ªôt n√†y ƒë∆∞·ª£c s·∫øp theo th·ª© t·ª± component n√†o t·ªën nhi·ªÅu th·ªùi gian render nh·∫•t s·∫Ω l√™n tr√™n.</p>\n<p><img src=\"https://reactjs.org/static/0c81347535e28c9cdef0e94fab887b89/ad997/ranked-chart.png\"></p>\n<blockquote>\n<p>Th·ªùi gian render component cha s·∫Ω bao g·ªìm t·ªïng th·ªùi gian render c√°c component con</p>\n</blockquote>\n<h2 id=\"component-chart\"><a href=\"#component-chart\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Component Chart</h2>\n<p>ƒê·ªÉ xem ƒë√£ bao nhi√™u l·∫ßn 1 component ƒë∆∞·ª£c render. M·ªói c·ªôt l√† m·ªói l·∫ßn component ƒë∆∞·ª£c render.</p>\n<p><img src=\"https://reactjs.org/static/d71275b42c6109e222fbb0932a0c8c09/ad997/component-chart.png\"></p>\n<p>Double-click v√†o component n√†y ho·∫∑c ch·ªçn component v√† ch·ªçn n√∫t blue bar ph·∫£i g√≥c ph·∫£i tr√™n. ƒê·ªÉ xem th√™m c√°c th√¥ng tin kh√°c</p>\n<p><img src=\"https://reactjs.org/99cb4321ded8eb0c21ae5fc673878563/see-all-commits-for-a-fiber.gif\"></p>\n<h2 id=\"t∆∞∆°ng-t√°c\"><a href=\"#t%C6%B0%C6%A1ng-t%C3%A1c\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T∆∞∆°ng t√°c</h2>\n<p>Hi·ªán t·∫°i ƒë√¢y ƒëang trong qu√° tr√¨nh th·ª≠ nghi·ªám cho t√≠nh nƒÉng n√†y, tracking nguy√™n nh√¢n g√¢y ra update.</p>\n<p><img src=\"https://reactjs.org/static/a91a39ac076b71aa7a202aaf46f8bd5a/ad997/interactions.png\"></p>\n<p>M·ªói d√≤ng l√† m·ªôt t∆∞∆°ng t√°c ƒë√£ ƒë∆∞·ª£c <em>track</em>. N√∫t m√†u xanh b√™n c·∫°nh l√† commit li√™n quan t·ªõi t∆∞∆°ng t√°c n√†y.</p>\n<p><img src=\"https://reactjs.org/static/9847e78f930cb7cf2b0f9682853a5dbc/ad997/interactions-for-commit.png\"></p>\n<p>Ki·ªÉm tra m·ªôt t∆∞∆°ng t√°c trong commit c·ª• th·ªÉ t·ª´ <strong>flame chart</strong> v√† <strong>ranked chart</strong></p>\n<p><img src=\"https://reactjs.org/7c66e7686b5242473c87b3d0b4576cf3/navigate-between-interactions-and-commits.gif\"></p>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/nySib7ipZdk\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n<p><a href=\"https://github.com/facebook/react-devtools/tree/master/test/example\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Source code v√≠ d·ª•</a></p>\n<p><a href=\"https://react-devtools-profiler-demo.now.sh/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Demo</a></p>\n<p><a href=\"https://reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Link b√†i g·ªëc</a></p>\n","cover_image":""}},{"node":{"id":"788d202fd25a809668b62e0786539170","title":"S·ª≠ d·ª•ng Flow ƒë·ªÉ check type trong React Redux","path":"/2018-09-13-huong-dan-su-dung-flow-voi-react-redux/","date":"2018-09-13","timeToRead":4,"desc":"Ch√∫ng ta s·∫Ω kh√¥ng n√≥i nhi·ªÅu c√°ch s·ª≠ d·ª•ng Redux trong b√†i n√†y, c√°c b·∫°n c√≥ th·ªÉ xem c√°c b√†i tr∆∞·ªõc, ·ªü ƒë√¢y m√¨nh ch·ªâ ƒëi ƒë·∫øn v·∫•n ƒë·ªÅ ƒë∆∞a Flow v√†o ƒë·ªÉ check type trong Redux","content":"<p><em>B√†i vi·∫øt mang t√≠nh ch·∫•t tham kh·∫£o, hi·ªán t·∫°i ƒë·ªôi ng≈© Facebook ƒë√£ b·ªè r∆°i Flow ƒë·ªÉ theo TypeScript <a href=\"https://github.com/facebook/jest/pull/7554\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/facebook/jest/pull/7554</a></em></p>\n<!-- TOC -->\n<ul>\n<li><a href=\"#constants\">Constants</a></li>\n<li><a href=\"#actions\">Actions</a></li>\n<li><a href=\"#reducer\">Reducer</a></li>\n</ul>\n<!-- /TOC -->\n<h1 id=\"constants\"><a href=\"#constants\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Constants</h1>\n<p>constants/actionTypes.js</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/* @flow */</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">PLAY</span><span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token string\">'PLAY'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">PAUSE</span><span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token string\">'PAUSE'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">STOP</span><span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token string\">'STOP'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">BACKWARD</span><span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token string\">'BACKWARD'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">FORWARD</span><span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token string\">'FORWARD'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">UPDATE_TIME</span><span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token string\">'UPDATE_TIME'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">SELECT_TRACK</span><span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token string\">'SELECT_TRACK'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Chuy·ªán n√†y c√≥ h∆°i d∆∞ th·ª´a v√¨ ch√∫ng ta bi·∫øt ch·∫Øc ch·∫Øn c√°c h·∫±ng s·ªë n√†y s·∫Ω lu√¥n l√† <code class=\"language-inline-text\">string</code>, c√≥ bao gi·ªù ch√∫ng ta l·∫°i ƒëi ƒë·ªïi gi√° tr·ªã trong constants</p>\n<p>Flow cho ph√©p ch√∫ng ta khai b√°o c√°c type sau:</p>\n<ul>\n<li><strong>string</strong></li>\n<li><strong>number</strong></li>\n<li><strong>boolean</strong></li>\n<li><strong>Function</strong></li>\n<li><strong>Array</strong></li>\n<li><strong>Object</strong></li>\n<li><strong>any</strong></li>\n<li><strong>mixed</strong></li>\n<li><strong>void</strong></li>\n</ul>\n<p>N·∫øu bi·∫øn c√≥ th·ªÉ <code class=\"language-inline-text\">null</code>, t·ª©c kh√¥ng b·∫Øt bu·ªôc th√¨ th√™m d·∫•u <strong>?</strong> v√†o tr∆∞·ªõc, ?string, ?number, ?boolean</p>\n<h1 id=\"actions\"><a href=\"#actions\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Actions</h1>\n<p>playerActions.js </p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">PLAY</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">PAUSE</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">STOP</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">BACKWARD</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">FORWARD</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">UPDATE_TIME</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">SELECT_TRACK</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'constants/actionTypes'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">PLAY</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">pause</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">PAUSE</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">STOP</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">backward</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">BACKWARD</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">forward</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">FORWARD</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">updateTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">UPDATE_TIME</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">selectTrack</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">track</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">SELECT_TRACK</span><span class=\"token punctuation\">,</span> track <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>V·ªõi nh·ªØng function th·∫ø n√†y, ch√∫ng ta ph·∫£i ch·ªâ ƒë·ªãnh ki·ªÉu params truy·ªÅn v√†o v√† ki·ªÉu return, m·ªói m·ªôt method ch√∫ng ta ƒë·ªãnh nghƒ©a ra m·ªôt custom type ƒë·ªÉ s·ª≠ d·ª•ng</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> type PlayerAction <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  track<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Track<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√≥ th·ªÉ th·∫•y Track c≈©ng l√† m·ªôt custom type kh√°c m√† ch√∫ng ta ƒë·ªãnh nghƒ©a ·ªü ƒë√¢u ƒë√≥ r·ªìi import v√†o nh∆∞ m·ªôt module</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> type Track <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> number<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">artistId</span><span class=\"token operator\">:</span> number<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">bucket</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta s·ª≠a l·∫°i c√°i playerActions.js ·ªü tr√™n v·ªõi Flow</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/* @flow */</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">PLAY</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">PAUSE</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">STOP</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">BACKWARD</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">FORWARD</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">UPDATE_TIME</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">SELECT_TRACK</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'constants/actionTypes'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> type PlayerAction <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  currentTime<span class=\"token operator\">?</span><span class=\"token operator\">:</span> number<span class=\"token punctuation\">;</span>\n  track<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Track<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Import Track type from player, defines the properties a Track object</span>\n<span class=\"token comment\">// can have.</span>\n<span class=\"token keyword\">import</span> type <span class=\"token punctuation\">{</span> Track <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'reducers/player'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> PlayerAction<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">PLAY</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">pause</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> PlayerAction <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">PAUSE</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> PlayerAction <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">STOP</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">backward</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> PlayerAction <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">BACKWARD</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">forward</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> PlayerAction <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">FORWARD</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">updateTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> PlayerAction <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">UPDATE_TIME</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">selectTrack</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">track</span><span class=\"token operator\">:</span> Track</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> PlayerAction <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">SELECT_TRACK</span><span class=\"token punctuation\">,</span> track <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"reducer\"><a href=\"#reducer\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Reducer</h1>\n<p>M·ªôt khi ƒë√£ quen thu·ªôc v·ªõi c√°ch ƒë·ªãnh nghƒ©a type cho h√†m nh∆∞ tr√™n th√¨ ch√∫ng ta s·∫Ω d·ªÖ d√†ng ch·ªânh s·ª≠a l·∫°i reducer th√¥i, v√¨ n√≥ c≈©ng t∆∞∆°ng t·ª±.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">/* @flow */</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">PLAY</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">PAUSE</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">STOP</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">BACKWARD</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">FORWARD</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">UPDATE_TIME</span><span class=\"token punctuation\">,</span>\n  <span class=\"token constant\">SELECT_TRACK</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'constants/actionTypes'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Import the PlayerAction type form the actions/playerActions.js file, much</span>\n<span class=\"token comment\">// like we imported the Track type into our action previously.</span>\n<span class=\"token keyword\">import</span> type <span class=\"token punctuation\">{</span> PlayerAction <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'actions/playerActions'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> type Track <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> number<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">artistId</span><span class=\"token operator\">:</span> number<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">bucket</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Create a type alias called Dictionary. This will allow us to define data</span>\n<span class=\"token comment\">// that follows the model, a bit superfluous for this example, but good to</span>\n<span class=\"token comment\">// understand how it works:</span>\n<span class=\"token comment\">// {</span>\n<span class=\"token comment\">//   key: value</span>\n<span class=\"token comment\">// }</span>\ntype Dictionary<span class=\"token operator\">&lt;</span><span class=\"token constant\">K</span><span class=\"token punctuation\">,</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span>key<span class=\"token operator\">:</span> <span class=\"token constant\">K</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token constant\">T</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// In our PlayerState definition we're also going to</span>\n<span class=\"token comment\">// define an instance of the Dictionary type</span>\n<span class=\"token comment\">// where the key int he object is a number, and</span>\n<span class=\"token comment\">// the value is of type Track.</span>\n<span class=\"token keyword\">export</span> type PlayerState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">tracks</span><span class=\"token operator\">:</span> Dictonary<span class=\"token operator\">&lt;</span>number<span class=\"token punctuation\">,</span> Track<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">currentTrackId</span><span class=\"token operator\">:</span> <span class=\"token operator\">?</span>number<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">currentTime</span><span class=\"token operator\">:</span> number<span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">playing</span><span class=\"token operator\">:</span> boolean<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Declare our initial player state which follows our PlayerState type.</span>\n<span class=\"token keyword\">const</span> <span class=\"token literal-property property\">initialState</span><span class=\"token operator\">:</span> PlayerState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">tracks</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">currentTrackId</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">currentTime</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">playing</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// This helper method will return the id of the next track</span>\n<span class=\"token comment\">// in our playlist. It receives a track dictionary from</span>\n<span class=\"token comment\">// the state, and the current track id. It maps out the</span>\n<span class=\"token comment\">// data to an array, and finds the next sequential index.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getNextTrackId</span><span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\"><span class=\"token literal-property property\">tracks</span><span class=\"token operator\">:</span> Dictonary<span class=\"token operator\">&lt;</span>Track<span class=\"token punctuation\">,</span> number<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">currentTrackId</span><span class=\"token operator\">:</span> number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> number <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> trackIds <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>tracks<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> nextTrackIndex <span class=\"token operator\">=</span> trackIds<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>currentTrackId<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextTrackIndex <span class=\"token operator\">>=</span> tracks<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    nextTrackIndex <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> tracksIds<span class=\"token punctuation\">[</span>nextTrackIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// This helper method will return the id of the</span>\n<span class=\"token comment\">// previous track in our playlist. It works exactly</span>\n<span class=\"token comment\">// like the previous helper function.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getPreviousTrackId</span><span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\"><span class=\"token literal-property property\">tracks</span><span class=\"token operator\">:</span> Dictonary<span class=\"token operator\">&lt;</span>Track<span class=\"token punctuation\">,</span> number<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">currentTrackId</span><span class=\"token operator\">:</span> number</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> number <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> trackIds <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>tracks<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> nextTrackIndex <span class=\"token operator\">=</span> trackIds<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>currentTrackId<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextTrackIndex <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    nextTrackIndex <span class=\"token operator\">=</span> trackIds<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> trackIds<span class=\"token punctuation\">[</span>nextTrackIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// This is our reducer. There's nothing special to call out</span>\n<span class=\"token comment\">// here except that we are declaring our two input types</span>\n<span class=\"token comment\">// of PlayerState and PlayerAction, and that we must</span>\n<span class=\"token comment\">// return a valid instance of PlayerState.</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">player</span><span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\"><span class=\"token literal-property property\">state</span><span class=\"token operator\">:</span> PlayerState <span class=\"token operator\">=</span> initialState<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">action</span><span class=\"token operator\">:</span> PlayerAction</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> PlayerState <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">case</span> <span class=\"token constant\">PLAY</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">playing</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">case</span> <span class=\"token constant\">PAUSE</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">playing</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">case</span> <span class=\"token constant\">STOP</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">playing</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">currentTime</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">case</span> <span class=\"token constant\">BACKWARD</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">currentTime</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">currentTrackId</span><span class=\"token operator\">:</span> <span class=\"token function\">getPreviousTrackId</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">.</span>tracks<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">.</span>currentTrackId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">case</span> <span class=\"token constant\">FORWARD</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">currentTime</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">currentTrackId</span><span class=\"token operator\">:</span> <span class=\"token function\">getNextTrackId</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">.</span>tracks<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">.</span>currentTrackId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">case</span> <span class=\"token constant\">UPDATE_TIME</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">currentTime</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">case</span> <span class=\"token constant\">SELECT_TRACK</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">currentTime</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">currentTrackId</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>track<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>M·ªôt l·ª£i √≠ch c·ªßa vi·ªác define type m√† m√¨nh r·∫•t th√≠ch l√† n√≥ s·∫Ω c√≥ c√°i hint tr√™n IDE m·ªói khi m√¨nh d√πng g·ªçi ƒë·∫øn h√†m hay params ƒë√≥.</p>\n<p><a href=\"/2018-09-10-huong-dan-lam-viec-voi-flow-react-type-checking\">ƒê·ªçc th√™m: T·∫°i sao s·ª≠ d·ª•ng Flow, v√† s·ª≠ d·ª•ng Flow nh∆∞ th·∫ø n√†o trong React</a></p>\n<p><a href=\"https://medium.com/@cdebotton/redux-and-flowtype-69ff1dd09036\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">T√†i li·ªáu tham kh·∫£o</a></p>\n","cover_image":""}},{"node":{"id":"5e3c368c783a403a32943f42293ddde0","title":"L√†m toast notification system trong React/Redux","path":"/2018-09-12-huong-dan-build-notify-system-voi-react-redux/","date":"2018-09-12","timeToRead":2,"desc":"C√≥ l·∫Ω ko c√≥ ·ª©ng d·ª•ng web n√†o l·∫°i ko c·∫ßn th√¥ng b√°o ƒë·∫øn user k·∫øt qu·∫£ c·ªßa m·ªôt thao t√°c n√†o ƒë√≥, x√¢y m·ªôt notification system ƒë·ªÉ s·ª≠ d·ª•ng l√† h·∫øt s·ª©c c·∫ßn thi·∫øt","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#actions--reducer\">Actions &#x26; Reducer</a></li>\n<li><a href=\"#components\">Components</a></li>\n</ul>\n<!-- /TOC -->\n<h1 id=\"actions--reducer\"><a href=\"#actions--reducer\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Actions &#x26; Reducer</h1>\n<p>B·∫Øt ƒë·∫ßu v·ªõi <em>reducer</em>, m·∫∑c ƒë·ªãnh l√† m·ªôt m·∫£ng r·ªóng, to√†n b·ªô n·ªôi dung th√¥ng b√°o s·∫Ω add v√†o m·∫£ng n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// scr/reducers/toast.js</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">toasts</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>payload<span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> action<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ª´ng qu√™n th√™m v√†o trong <code class=\"language-inline-text\">combineReducers</code> nh√©</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// src/reducers/index.js</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> combineReducers <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"redux\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> toasts <span class=\"token keyword\">from</span> <span class=\"token string\">\"./toasts\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">combineReducers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  toasts\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ch√∫ng ta s·∫Ω c·∫ßn 1 function <code class=\"language-inline-text\">createToast</code> nh·∫≠n v√†o options v√† tr·∫£ v·ªÅ m·ªôt object v·ªõi id t·ª± ƒë·ªông tƒÉng khi g·ªçi, c√≥ s·∫µn m·ªôt s·ªë default options s·∫Ω merge v·ªõi gi√° tr·ªã options truy·ªÅn v√†o</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// src/factories/createToast.js</span>\n<span class=\"token keyword\">let</span> id <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> defaultOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#6796e6'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">createToast</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">options</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>defaultOptions<span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">...</span>options<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> id<span class=\"token operator\">++</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta s·∫Ω c·∫ßn th√™m 1 action ƒë·ªÉ t·∫°o m·ªôt toast notification trong store, 1 action ƒë·ªÉ remove kh·ªèi store</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// src/constants/index.js</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">ADD_TOAST</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"ADD_TOAST\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token constant\">REMOVE_TOAST</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"REMOVE_TOAST\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// src/actions/index.js</span>\n<span class=\"token keyword\">import</span> createToast <span class=\"token keyword\">from</span> <span class=\"token string\">\"../factories/createToast\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">ADD_TOAST</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">REMOVE_TOAST</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../constants\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">addToast</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> <span class=\"token function\">creatToast</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">ADD_TOAST</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">removeToast</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> id<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token constant\">REMOVE_TOAST</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Gi·ªù ƒë·∫øn nhi·ªám v·ª• c·ªßa reducer l√† ph·∫£i x·ª≠ l√Ω khi c√≥ 2 action tr√™n</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// src/reducers/toasts.js</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">ADD_TOAST</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">REMOVE_TOAST</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../constants\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">toasts</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> payload<span class=\"token punctuation\">,</span> type <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> action<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">ADD_TOAST</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>payload<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token constant\">REMOVE_TOAST</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">toast</span> <span class=\"token operator\">=></span> toast<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> payload<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Xong vi·ªác x·ª≠ l√Ω trong Redux, gi·ªù ƒë·∫øn c√°i Component</p>\n<h1 id=\"components\"><a href=\"#components\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Components</h1>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> PropTypes <span class=\"token keyword\">from</span> <span class=\"token string\">\"prop-types\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> bindActionCreators <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"redux\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> connect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-redux\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Toast <span class=\"token keyword\">from</span> <span class=\"token string\">\"./Toast\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> removeToast <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../actions\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Toast</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> actions<span class=\"token punctuation\">,</span> toasts <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>removeToast<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>toasts<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>toasts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">toast</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>id<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> toast<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Toast</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>toast<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>id<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onDismissClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">removeToast</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nToasts<span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">actions</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">removeToast</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>func<span class=\"token punctuation\">.</span>isRequired\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">toasts</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span><span class=\"token function\">arrayOf</span><span class=\"token punctuation\">(</span>PropTypes<span class=\"token punctuation\">.</span>object<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>isRequired\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mapDispatchToProps</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">dispatch</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">actions</span><span class=\"token operator\">:</span> <span class=\"token function\">bindActionCreators</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> removeToast <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mapStateToProps</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">toasts</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>toasts\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>mapStateToProps<span class=\"token punctuation\">,</span> mapDispatchToProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Toasts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>·ªû component <code class=\"language-inline-text\">Toasts</code> n√†y ch√∫ng ta render t·∫•t c·∫£ notification c√≥ trong <strong>store</strong>, ƒë∆∞a v√†o function x·ª≠ l√Ω n√∫t close tr√™n m·ªói component.</p>\n<p>ƒê·∫øn Component <code class=\"language-inline-text\">Toast</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/components/Toast.jsx</span>\n\n<span class=\"token keyword\">import</span> PropTypes <span class=\"token keyword\">from</span> <span class=\"token string\">\"prop-types\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Toast</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">shouldComponentUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>color <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>onDismissClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nToast<span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">onDismissClick</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>func<span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">.</span>isRequired\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Toast<span class=\"token punctuation\">;</span></code></pre></div>\n<p>·ªû ƒë√¢y ch√∫ng ta kh√¥ng mu·ªën component n√†y update g√¨ c·∫£, n√™n ·ªü <code class=\"language-inline-text\">shouldComponentUpdate</code> ch√∫ng ta <code class=\"language-inline-text\">return false</code></p>\n<p><a href=\"https://www.natterly.com/blog/toast-notification-system-in-a-react-redux-application\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Link b√†i g·ªëc</a>;</p>\n","cover_image":""}},{"node":{"id":"cb3f4bb6b7e51df501700726716dff04","title":"T·∫°i sao s·ª≠ d·ª•ng Flow, v√† s·ª≠ d·ª•ng Flow nh∆∞ th·∫ø n√†o trong React","path":"/2018-09-10-huong-dan-lam-viec-voi-flow-react-type-checking/","date":"2018-09-10","timeToRead":4,"desc":"T·∫°i sao ch√∫ng ta c·∫ßn type checking trong javascript, t·∫°i sao Flow l·∫°i l√† l·ª±a ch·ªçn c·ªßa nhi·ªÅu developer hi·ªán nay","content":"<p><em>B√†i vi·∫øt mang t√≠nh ch·∫•t tham kh·∫£o, hi·ªán t·∫°i ƒë·ªôi ng≈© Facebook ƒë√£ b·ªè r∆°i Flow ƒë·ªÉ theo TypeScript <a href=\"https://github.com/facebook/jest/pull/7554\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/facebook/jest/pull/7554</a></em></p>\n<!-- TOC -->\n<ul>\n<li><a href=\"#static-vs-dynamic-typing\">Static vs Dynamic Typing</a></li>\n<li><a href=\"#t%E1%BA%A1i-sao-ch%E1%BB%8Dn-flow\">T·∫°i sao ch·ªçn Flow</a></li>\n<li><a href=\"#setup-flow-v%E1%BB%9Bi-react\">Setup Flow v·ªõi React</a></li>\n<li><a href=\"#define-type-check-cho-prop-v%C3%A0-state-c%E1%BB%A7a-cho-react-component\">Define type check cho Prop v√† State c·ªßa cho React Component</a></li>\n</ul>\n<!-- /TOC -->\n<h1 id=\"static-vs-dynamic-typing\"><a href=\"#static-vs-dynamic-typing\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Static vs Dynamic Typing</h1>\n<p>ƒê·ªÉ b·∫Øt ƒë·∫ßu ch√∫ng ta ph·∫£i hi·ªÉu c√°ch javascript l√†m vi·ªác v·ªõi <code class=\"language-inline-text\">type</code></p>\n<p>M·ªôt c√°ch ng·∫Øn g·ªçn nh·∫•t, ng√¥n ng·ªØ <strong>statically-typed</strong> th√¨ <code class=\"language-inline-text\">type</code> c·ªßa bi·∫øn c√≥ th·ªÉ x√°c ƒë·ªãnh l√∫c <strong>compile</strong> (tr∆∞·ªõc khi ch·∫°y), ng√¥n ng·ªØ <strong>dynamically-typed</strong> th√¨ ch·ªâ bi·∫øt ƒë∆∞·ª£c type c·ªßa bi·∫øn l√∫c <strong>run time</strong></p>\n<p>Nh∆∞ v·∫≠y v·ªõi ng√¥n ng·ªØ d·∫°ng <em>statically-typed</em>, l·ªói s·∫Ω ƒë∆∞·ª£c b√°o ngay khi build ho·∫∑c tr√™n editor khi ch√∫ng ta s·ª≠ d·ª•ng type kh√¥ng ƒë√∫ng. Nh∆∞ng v·ªõi nh·ªØng ng√¥n ng·ªØ ki·ªÉu dynamically-typed nh∆∞ Javascript n√≥ s·∫Ω kh√°c ch√∫t. Xem x√©t ƒëo·∫°n code sau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> myObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">prop1</span><span class=\"token operator\">:</span> <span class=\"token string\">'Some text here'</span>\n<span class=\"token punctuation\">}</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>myObject<span class=\"token punctuation\">.</span><span class=\"token function\">prop1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-inline-text\">prop1</code> ƒë∆∞·ª£c ƒë·ªãnh nghƒ© l√† m·ªôt <strong>string</strong> nh∆∞ng ch√∫ng ta l·∫°i g·ªçi <code class=\"language-inline-text\">myObject.prop1()</code> nh∆∞ m·ªôt <strong>function</strong>. N·∫øu ch√∫ng ta ch·∫°y ƒëo·∫°n code n√†y ch√∫ng ta s·∫Ω nh·∫≠n ƒë∆∞·ª£c l·ªói tr√™n tr√¨nh duy·ªát</p>\n<div class=\"gridsome-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">TypeError: myObject.prop1 is not a <span class=\"token keyword\">function</span></code></pre></div>\n<p>Nh·ªØng tr∆∞·ªùng h·ª£p <strong>qu√™n m·∫•t</strong> ki·ªÉu c·ªßa bi·∫øn nh∆∞ v·∫≠y r·∫•t d·ªÖ g·∫∑p trong l√∫c code. Vi·ªác s·ª≠ d·ª•ng static type check s·∫Ω gi√∫p ph√°t hi·ªán l·ªói s·ªõm h∆°n, m√† ph√°t hi·ªán l·ªói s·ªõm h∆°n th√¨ s·∫Ω t·ªët h∆°n, right?</p>\n<p>Trong javascript ch√∫ng ta c≈©ng c√≥ th·ªÉ thay ƒë·ªïi type c·ªßa bi·∫øn nh∆∞ v·∫ßy</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> myNumber <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> myNumber<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// number</span>\nmyNumber <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> myNumber<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// boolean</span></code></pre></div>\n<p>ƒê·ªÉ ngƒÉn ch·∫∑n nh·ªØng ng∆∞·ªùi kh√°c ho·∫∑c ch·ªânh b·∫£n th√¢n l√†m nh·ªØng chuy·ªán s·∫±n b·∫≠y nh∆∞ v·∫≠y, ch√∫ng ta ph·∫£i ƒë·∫∑t r√†ng bu·ªôc v·ªÅ type cho nh·ªØng bi·∫øn n√†y</p>\n<h1 id=\"t·∫°i-sao-ch·ªçn-flow\"><a href=\"#t%E1%BA%A1i-sao-ch%E1%BB%8Dn-flow\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·∫°i sao ch·ªçn Flow</h1>\n<p>ƒê·ªÉ ƒë·∫∑t r√†ng bu·ªôc type trong Javascript hay React ch√∫ng c√≥ nh·ªØng 3 t√™n tu·ªïi n·ªïi b·∫≠t Typescript, PropTypes, Flow.</p>\n<p>Flow l√† th∆∞ vi·ªán c·ªßa Facebook, h·ªó tr·ª£ t·ªët nh·∫•t cho React, ƒë·ª©ng tr√™n g√≥c ƒë·ªô c·ªßa ng∆∞·ªùi l√†m sell, n·∫øu n√≥i ch√∫ng ta s·ª≠ d·ª•ng Flow t·ª´ Facebook s·∫Ω ngon h∆°n, Typescript l√† superset c·ªßa javascript, vi·ªác d√πng Typescript c≈©ng thay ƒë·ªïi kh√° nhi·ªÅu th·ª© kh√°c trong project, m√¨nh c·∫£m th·∫•y n√≥ ti√™u t·ªën kh√° nhi·ªÅu th·ªùi gian h∆°n trong l√∫c dev, <code class=\"language-inline-text\">PropTypes</code> ƒë√£ ko c√≤n ƒë∆∞·ª£c quan t√¢m nhi·ªÅu nh∆∞ tr∆∞·ªõc n·ªØa t·ª´ sau khi c√≥ Flow</p>\n<p>C√≤n theo nh∆∞ ph√°t bi·ªÉu t·ª´ nh·ªØng ng∆∞·ªùi t·∫°o ra Flow (nh·ªØng developer trong Facebook)</p>\n<p>\"Ch√∫ng t√¥i built Flow v√¨ th·∫•y TypeScript ƒëang ƒëi theo h∆∞·ªõng m√† c√¥ng ƒë·ªìng kh√¥ng mong ƒë·ª£i. V√≠ d·ª•, TypeScript c·ªë t√¨nh kh√¥ng mu·ªën ƒëi theo h∆∞·ªõng t·∫≠p trung v√†o v·∫•n ƒë·ªÅ type checking nh∆∞ m·ªôt type system, kh√¥ng cung c·∫•p vi·ªác generate ra document cho API v·ªõi type ƒë√£ ƒë·ªãnh nghƒ©a. N·∫øu b·∫°n mu·ªën TypeScript l√†m c√°i g√¨, b·∫°n c≈©ng ph·∫£i b·∫£o n√≥ h·∫øt, ko ho√†n to√†n t·ª± ƒë·ªông. M·∫∑c d√π t·ª´ TypeScript 2.0 h·ªç b·∫Øt ƒë·∫ßu ƒë·ªÉ √Ω chuy·ªán n√†y, tuy nhi√™n c√≤n ph·∫£i r·∫•t l√¢u m·ªõi b·∫Øt k·ªãp Flow nh√©\"</p>\n<h1 id=\"setup-flow-v·ªõi-react\"><a href=\"#setup-flow-v%E1%BB%9Bi-react\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Setup Flow v·ªõi React</h1>\n<p>Theo h∆∞·ªõng d·∫´n tr√™n t√†i li·ªáu ch√≠nh th·ª©c <a href=\"https://flow.org/en/docs/react/\" target=\"_blank\" rel=\"noopener noreferrer\">https://flow.org/en/docs/react/</a></p>\n<p>N·∫øu kh·ªüi t·∫°o project b·∫±ng create-react-App th√¨ ch·ªâ vi·ªác install Flow v√† t·∫°o file <code class=\"language-inline-text\">.flowconfig</code></p>\n<div class=\"gridsome-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">npm i flow-bin <span class=\"token operator\">--</span><span class=\"token function\">save-dev</span></code></pre></div>\n<p>B√™n trong file <code class=\"language-inline-text\">package.json</code>, add th√™m ƒëo·∫°n script ƒë·ªÉ ch·∫°y flow</p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"flow\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"flow\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ªÉ init file <code class=\"language-inline-text\">.flowconfig</code></p>\n<div class=\"gridsome-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">npm run flow init</code></pre></div>\n<p>Sau khi ch·∫°y l·ªánh n√†y xong ch√∫ng ta s·∫Ω c√≥ file <code class=\"language-inline-text\">.flowconfig</code> v·ªõi n·ªôi dung sau</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[ignore]\n[include]\n[libs]\n[lints]\n[options]\n[strict]</code></pre></div>\n<p>ƒê·ªÉ th√™m type check c·ªßa t·ª´ng component</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">//@flow</span>\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>Component<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Props</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>app<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>N·∫øu d√πng c√°ch vi·∫øt th√™m <code class=\"language-inline-text\">//@flow</code> v√†o m·ªói file nh∆∞ v·∫≠y h∆°i chu·ªëi, ch√∫ng ta thay ƒë·ªïi config m·ªôt ch√∫t trong file <code class=\"language-inline-text\">.flowconfig</code></p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[ignore] // file n√†o ko check b·ªè v√†o ƒë√¢y\n.*/node_modules/.* // b·ªè qua file trong th∆∞ m·ª•c node_modules\n.*/src/registerServiceWWorker\\.js\n.*/src/index\\.js\n.*\\.test\\.js\n\n[options]\nall=true // check t·∫•t c·∫£ file, g·ªìm c·∫£ node_modules</code></pre></div>\n<h1 id=\"define-type-check-cho-prop-v√†-state-c·ªßa-cho-react-component\"><a href=\"#define-type-check-cho-prop-v%C3%A0-state-c%E1%BB%A7a-cho-react-component\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Define type check cho Prop v√† State c·ªßa cho React Component</h1>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\ntype Props <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">strType</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span>\n  numberType<span class=\"token operator\">?</span><span class=\"token operator\">:</span> number\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Props</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>strType<span class=\"token punctuation\">,</span> numberType<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>app<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">String </span><span class=\"token punctuation\">{</span>strType<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Number </span><span class=\"token punctuation\">{</span>numberType<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"/2018-09-13-huong-dan-su-dung-flow-voi-react-redux\">ƒê·ªçc th√™m: S·ª≠ d·ª•ng Flow ƒë·ªÉ check type trong React Redux</a></p>\n<p><a href=\"https://www.lullabot.com/articles/flow-for-static-type-checking-javascript\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ngu·ªìn tham kh·∫£o: Why I Chose to Use Flow for Static Type Checking My JavaScript</a></p>\n","cover_image":""}},{"node":{"id":"8a2282767758a497c6f466d12e5e61e4","title":"Con ƒë∆∞·ªùng ƒë·ªÉ tr·ªü th√†nh React Native developer ( phi√™n b·∫£n 2018)","path":"/2018-08-13-huong-dan-con-dong-hoc-lap-trinh-react-native/","date":"2018-08-13","timeToRead":2,"desc":"Ti·∫øp theo b√†i tr∆∞·ªõc m√¨nh s·∫Ω d·ªãch th√™m m·ªôt b√†i ƒë·ªÉ c√°c b·∫°n b·∫Øt ƒë·∫ßu h·ªçc l·∫≠p tr√¨nh React Native","content":"<p>N·∫øu b·∫°n ƒë√£ th√¥ng th·∫°o h·∫øt React, th√¨ kh√¥ng c√≥ l√Ω do v√¨ b·∫°n d∆∞·ª´ng l·∫°i ·ªü React JS m√† kh√¥ng ti·∫øn l√™n React Native.</p>\n<h1 id=\"setup-m√¥i-tr∆∞·ªùng\"><a href=\"#setup-m%C3%B4i-tr%C6%B0%E1%BB%9Dng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Setup m√¥i tr∆∞·ªùng</h1>\n<p><a href=\"https://habiletechnologies.com/blog/getting-started-react-native-complete-setup-guide/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Native Environment setup (iOS and Android) </a></p>\n<h1 id=\"tuts-b·∫Øt-ƒë·∫ßu-v·ªõi-react-native\"><a href=\"#tuts-b%E1%BA%AFt-%C4%91%E1%BA%A7u-v%E1%BB%9Bi-react-native\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tuts B·∫Øt ƒë·∫ßu v·ªõi React native</h1>\n<p><a href=\"https://www.raywenderlich.com/165140/react-native-tutorial-building-ios-android-apps-javascript\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Native Tutorial: Building iOS and Android apps with Javascript</a></p>\n<p><a href=\"https://school.shoutem.com/lectures/build-react-native-mobile-app-tutorial/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Shoutem Tutorial on React Native: Build your first Mobile app</a></p>\n<p><a href=\"https://rationalappdev.com/react-native-cheat-sheet/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Native Cheat Sheet </a></p>\n<h1 id=\"navigation-trong-react-native-b·∫±ng-react-navigation\"><a href=\"#navigation-trong-react-native-b%E1%BA%B1ng-react-navigation\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Navigation trong React Native b·∫±ng React Navigation</h1>\n<p><a href=\"https://hackernoon.com/getting-started-with-react-navigation-the-navigation-solution-for-react-native-ea3f4bd786a4\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Getting started with React Navigation </a></p>\n<p><a href=\"https://www.reactnative.guide/10-navigation/10.1-using-react-navigation.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Using React Navigation</a></p>\n<h1 id=\"debug\"><a href=\"#debug\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Debug</h1>\n<p>ƒê∆°n gi·∫£n nh·∫•t ƒë·ªÉ debug l√† d√πng <a href=\"https://github.com/jhen0409/react-native-debugger\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React native debugger</a></p>\n<p>ƒê·ªçc th√™m c√°ch s·ª≠ d·ª•ng</p>\n<ul>\n<li><a href=\"https://medium.com/research-engineering-at-simply-technologies/react-native-debugging-like-a-god-9610ac2ffd12\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Debug your React Native application like a God </a></li>\n<li><a href=\"https://blog.reactnativecoach.com/debugging-react-native-and-redux-with-react-native-debugger-62f6ceef3033\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Debugging React and Redux with React Native Debugger</a></li>\n<li><a href=\"https://github.com/infinitered/reactotron\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">T√†i li·ªáu ch√≠nh th·ª©c</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=tPBRfxswDjA\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Video n·∫øu th·∫•y ƒë·ªçc ch∆∞a hi·ªÉu l·∫Øm</a></li>\n</ul>\n<h1 id=\"x√¢y-d·ª±ng-m·ªôt-s·ªë-·ª©ng-d·ª•ng-react-native-ƒë∆°n-gi·∫£n\"><a href=\"#x%C3%A2y-d%E1%BB%B1ng-m%E1%BB%99t-s%E1%BB%91-%E1%BB%A9ng-d%E1%BB%A5ng-react-native-%C4%91%C6%A1n-gi%E1%BA%A3n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>X√¢y d·ª±ng m·ªôt s·ªë ·ª©ng d·ª•ng React Native ƒë∆°n gi·∫£n</h1>\n<p><a href=\"https://learn.handlebarlabs.com/p/react-native-basics-build-a-currency-converter\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Build a simple Currency convertor in React Native for iOS</a></p>\n<p><a href=\"https://code.tutsplus.com/tutorials/creating-a-dictionary-app-using-react-native-for-android--cms-24969\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Build a dictionary app in React Native for Android</a></p>\n<h1 id=\"c·∫£i-thi·ªán-performance\"><a href=\"#c%E1%BA%A3i-thi%E1%BB%87n-performance\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C·∫£i thi·ªán performance</h1>\n<p>2 ƒëi·ªÅu c·∫ßn nh·ªõ khi b·∫Øt ƒë·∫ßu c·∫£i thi·ªán performance v·ªõi React Native</p>\n<ul>\n<li><strong>Bridge optimize</strong>: ·ªü gi·ªØa javascript threat v√† native threat c·ªßa ·ª©ng d·ª•ng React native s·∫Ω c√≥ m·ªôt c√°i <strong>Bridge</strong> ·ªü gi·ªØa ƒë·ªÉ chuy·ªÉn ƒë·ªïi gi·ªØa 2 threat n√†y. Ph·∫ßn l·ªõn workload n·∫∑ng nh·∫•t l√† ·ªü ƒë√¢y, nh·ªØng animation ch·∫°y tr√™n single threat c·ªßa javascript s·∫Ω r·∫•t t·ªën k√©m. N·∫øu mu·ªën nghi√™n c·ª©u s√¢u h∆°n v·ªÅ ki·∫øn tr√∫c c·ªßa React Native, ng√¢m c·ª©u b√†i <a href=\"https://tadeuzagallo.com/blog/react-native-bridge/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://tadeuzagallo.com/blog/react-native-bridge/</a></li>\n<li><strong>Qu·∫£n l√Ω view ph·ª©c t·∫°p</strong> n·∫øu app ch·ªâ c√≥ m·ªôt v√†i view th√¨ ch·∫£ c√≥ g√¨ ph·∫£i c·∫£i thi·ªán. N·∫øu v·ªõi nhi·ªÅu view ph·ª©c t·∫°p, navigation lung tung, chuy·ªán ƒë·ªÉ √Ω t·ªõi performance l√† b·∫•t bu·ªôc.</li>\n</ul>\n<p>M·ªôt t√†i li·ªáu ƒë·ªÉ ƒë·ªçc</p>\n<p><a href=\"https://facebook.github.io/react-native/docs/performance.html#common-sources-of-performance-problems\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Dive into React Native performance</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=9VqVv_sVgv0\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">how to optimize the performance of your React Native app</a></p>\n<p><a href=\"https://www.simform.com/react-native-app-performance/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Native performance issues</a></p>\n<h1 id=\"test\"><a href=\"#test\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Test</h1>\n<p><a href=\"https://pillow.codes/testing-in-react-native-jest-detox-d7b3b79a166a\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Testing in React Native using Jest and Detox</a></p>\n<p><a href=\"https://chase-seibert.github.io/blog/2017/01/06/appium-react-native-quickstart.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Appium + React Native Quickstart</a></p>\n<p><a href=\"https://www.skcript.com/svr/testing-react-native-apps-with-appium-the-ultimate-guide/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Testing React Native Apps with Appium</a></p>\n<p><a href=\"https://alligator.io/react/roadmap-react-native-developer/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Link b√†i vi·∫øt g·ªëc t√°c gi·∫£ Rakshit Sora</a></p>\n","cover_image":""}},{"node":{"id":"7301bc1e150ab11c88255f912d71934a","title":"Con ƒë∆∞·ªùng ƒë·ªÉ tr·ªü th√†nh React developer ( phi√™n b·∫£n 2018)","path":"/2018-08-12-huong-dan-con-duong-tro-thanh-developer-2018/","date":"2018-08-12","timeToRead":2,"desc":"H∆∞·ªõng d·∫´n, soi s√°ng cho c√°c b·∫°n mu·ªën tr·ªü th√†nh FrontEnd Developer. N·∫øu ƒë√£ ch·ªçn FrontEnd l√†m nghi·ªáp, React l√†m m√≥n ƒÉn m·ªói s√°ng, m√† ch∆∞a bi·∫øt c·∫ßn h·ªçc c√°i g√¨, hy v·ªçng b√†i vi·∫øt n√†y s·∫Ω c√≥ √≠ch cho c√°c b·∫°n c√≤n ƒëang ko bi·∫øt h·ªçc c√°i g√¨","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#b%E1%BA%AFt-bu%E1%BB%99c-ph%E1%BA%A3i-h%E1%BB%8Dc\">B·∫Øt bu·ªôc ph·∫£i h·ªçc</a></li>\n<li><a href=\"#k%E1%BB%B9-n%C4%83ng-development\">K·ªπ nƒÉng Development</a></li>\n<li>\n<p><a href=\"#react-v%C3%A0-h%E1%BB%87-sinh-th%C3%A1i-nghe-k%C3%AAu-gh%C3%AA-ch%C6%B0a\">React v√† h·ªá sinh th√°i (nghe k√™u gh√™ ch∆∞a)</a></p>\n<ul>\n<li><a href=\"#css\">CSS</a></li>\n<li><a href=\"#build-tools\">Build tools</a></li>\n<li><a href=\"#state-management\">State management</a></li>\n<li><a href=\"#type-checkers\">Type Checkers</a></li>\n<li><a href=\"#routing\">Routing</a></li>\n<li><a href=\"#api-clients\">API clients</a></li>\n<li><a href=\"#th%C6%B0-vi%E1%BB%87n-ti%E1%BB%87n-%C3%ADch\">Th∆∞ vi·ªán ti·ªán √≠ch</a></li>\n<li><a href=\"#testing\">Testing</a></li>\n<li><a href=\"#static-site-generator\">Static Site Generator</a></li>\n<li><a href=\"#i18n\">i18n</a></li>\n<li><a href=\"#server-side-rendering\">Server Side Rendering</a></li>\n</ul>\n</li>\n</ul>\n<!-- /TOC -->\n<p>C√°i n√†o <strong>in ƒë·∫≠m</strong> l√† b·∫Øt bu·ªôc, <em>ƒë·ªÉ nghi√™ng</em> bi·∫øt th√¨ t·ªët, <del>g·∫°ch ngang</del> l√† ko c·∫ßn h·ªçc lu√¥n</p>\n<h1 id=\"b·∫Øt-bu·ªôc-ph·∫£i-h·ªçc\"><a href=\"#b%E1%BA%AFt-bu%E1%BB%99c-ph%E1%BA%A3i-h%E1%BB%8Dc\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>B·∫Øt bu·ªôc ph·∫£i h·ªçc</h1>\n<ul>\n<li><strong>HTML</strong>: cƒÉn b·∫£n html, c√°ch vi·∫øt semantic html, c√°ch structure DOM, t·∫≠p trung nhi·ªÅu v√†o c√°ch structure</li>\n<li><strong>CSS</strong>: h·ªçc CSS cƒÉn b·∫£n, Flexbox, Responsive Web Design, Media Queries</li>\n<li>\n<p><strong>JS cƒÉn b·∫£n</strong>: Hoisting, Event Bubbling, Prototyping, AJAX (XHR), thao t√°c tr√™n DOM, ECMA 6</p>\n<ul>\n<li><a href=\"http://www.learn-js.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">learn-js.org</a></li>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Mozilla developer Network</a></li>\n<li><a href=\"https://channel9.msdn.com/Series/Javascript-Fundamentals-Development-for-Absolute-Beginners\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Microsoft‚Äôs Virtual Academy</a></li>\n</ul>\n</li>\n<li><del>jQuery</del>: c√≥ th·ªÉ b·ªè qua kh√¥ng c·∫ßn h·ªçc</li>\n</ul>\n<h1 id=\"k·ªπ-nƒÉng-development\"><a href=\"#k%E1%BB%B9-n%C4%83ng-development\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>K·ªπ nƒÉng Development</h1>\n<ul>\n<li><strong>GIT, Github, Bitbucket, Gitlab</strong></li>\n<li><strong>HTTP/HTTPS</strong></li>\n<li><strong>K·ªπ nƒÉng search google</strong></li>\n<li><strong>D√πng terminal</strong></li>\n<li><strong>Data structure v√† Algorithms</strong></li>\n<li><strong>Design pattern</strong></li>\n</ul>\n<h1 id=\"react-v√†-h·ªá-sinh-th√°i-nghe-k√™u-gh√™-ch∆∞a\"><a href=\"#react-v%C3%A0-h%E1%BB%87-sinh-th%C3%A1i-nghe-k%C3%AAu-gh%C3%AA-ch%C6%B0a\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>React v√† h·ªá sinh th√°i (nghe k√™u gh√™ ch∆∞a)</h1>\n<h2 id=\"css\"><a href=\"#css\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>CSS</h2>\n<ul>\n<li>\n<p>CSS Preprocessor</p>\n<ul>\n<li><strong>Sass/SCSS, PostCSS</strong></li>\n<li><del>less</del></li>\n<li><del>stylus</del></li>\n</ul>\n</li>\n<li>CSS Framworks: <strong>Bootstrap</strong>, <em>Semantic UI</em></li>\n<li>\n<p>CSS Architecture</p>\n<ul>\n<li><strong>BEM</strong></li>\n<li><em>CSS modules</em></li>\n</ul>\n</li>\n<li>\n<p><strong>CSS in JS</strong></p>\n<ul>\n<li><em>styled components</em></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"build-tools\"><a href=\"#build-tools\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Build tools</h2>\n<ul>\n<li>\n<p>package manager</p>\n<ul>\n<li><strong>npm</strong></li>\n<li><em>yarn</em></li>\n</ul>\n</li>\n<li><strong>webpack</strong></li>\n<li>task runner: ch·ªâ c·∫ßn nghi√™n c·ª©u <strong>npm scripts</strong></li>\n</ul>\n<h2 id=\"state-management\"><a href=\"#state-management\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>State management</h2>\n<ul>\n<li><strong>Component state / context</strong></li>\n<li>\n<p><strong>Redux</strong></p>\n<ul>\n<li>async actions: <strong>redux thunk</strong>, <em>redux saga, redux observable</em></li>\n<li>helpers: <em>rematch, reselect</em></li>\n<li>\n<p>Form helpers</p>\n<ul>\n<li><em>redux form</em></li>\n<li><em>formik</em></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><em>Mobx</em></li>\n</ul>\n<h2 id=\"type-checkers\"><a href=\"#type-checkers\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Type Checkers</h2>\n<p>B·∫Øt bu·ªôc: <strong>PropTypes</strong>, bi·∫øt th√¨ t·ªët: <em>TypeScript</em>, <em>Flow</em></p>\n<h2 id=\"routing\"><a href=\"#routing\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Routing</h2>\n<p>Ch·ªâ c√≥ <strong>React-Router</strong> l√† b·∫Øt bu·ªôc</p>\n<h2 id=\"api-clients\"><a href=\"#api-clients\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>API clients</h2>\n<ul>\n<li>\n<p><strong>REST</strong></p>\n<ul>\n<li><strong>fetch</strong> (c√°i n√†y c·ªßa browser)</li>\n<li><em>axios</em></li>\n</ul>\n</li>\n<li>GraphQL (c√≥ th·ªÉ trong t∆∞∆°ng lai s·∫Ω ph·ªï bi·∫øn h∆°n, gi·ªù ch∆∞a b·∫Øt bu·ªôc)</li>\n</ul>\n<h2 id=\"th∆∞-vi·ªán-ti·ªán-√≠ch\"><a href=\"#th%C6%B0-vi%E1%BB%87n-ti%E1%BB%87n-%C3%ADch\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Th∆∞ vi·ªán ti·ªán √≠ch</h2>\n<ul>\n<li><strong>Lodash</strong></li>\n<li><strong>Moment</strong></li>\n<li><strong>Classnames</strong></li>\n<li><em>Numeral</em></li>\n<li><em>RxJS</em></li>\n</ul>\n<h2 id=\"testing\"><a href=\"#testing\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Testing</h2>\n<ul>\n<li>\n<p>Unit testing</p>\n<ul>\n<li><strong>Jest</strong></li>\n<li><strong>Enzyme</strong></li>\n<li><strong>Sinon</strong></li>\n<li><em>Macha</em></li>\n<li><em>Chai</em></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"static-site-generator\"><a href=\"#static-site-generator\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Static Site Generator</h2>\n<p>Hi·ªán gi·ªù ch·ªâ c√≥ <em>Gatsby</em></p>\n<h2 id=\"i18n\"><a href=\"#i18n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>i18n</h2>\n<ul>\n<li><strong>React Intl</strong></li>\n<li><em>React i18next</em></li>\n</ul>\n<h2 id=\"server-side-rendering\"><a href=\"#server-side-rendering\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Server Side Rendering</h2>\n<ul>\n<li><em>Next.js</em></li>\n</ul>\n<p>ƒê·∫•y ch·ªâ c√≥ b·∫•y nhi·∫øu th√¥i, n·∫øu ƒë√£ xong h·∫øt th√¨ l√†m ti·∫øp lu√¥n c√°i React Native v√† h·ªá sinh th√°i c·ªßa n√≥ n·ªØa l√† ngon l√†nh. :ƒê</p>\n<p><a href=\"https://raw.githubusercontent.com/adam-golab/react-developer-roadmap/master/roadmap.png\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Link file g·ªëc c·ªßa t√°c gi·∫£ Adam Golab</a></p>\n","cover_image":""}},{"node":{"id":"03393afe0d7b5976e9c258595df81919","title":"T·∫°o m·ªôt animation cho component trong React","path":"/2018-07-20-huong-dan-tao-animation-cho-component-voi-react/","date":"2018-07-20","timeToRead":4,"desc":"S·ª≠ d·ª•ng React, styled-components, react-flip-toolkit ƒë·ªÉ t·∫°o animation gi·ªëng nh∆∞ m√™n tr√™n trang ch·ªß c·ªßa Stripe","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#ph%C3%A2n-t%C3%ADch\">Ph√¢n t√≠ch</a></li>\n<li><a href=\"#d%E1%BB%B1ng-component-th%C3%B4-ch%C6%B0a-c%C3%B3-animate\">D·ª±ng component th√¥ ch∆∞a c√≥ animate</a></li>\n<li><a href=\"#animate-v%E1%BB%9Bi-flip-technique\">Animate v·ªõi Flip technique</a></li>\n<li><a href=\"#ch%C4%83m-ch%C3%BAc\">ChƒÉm ch√∫c</a></li>\n<li><a href=\"#background-animation\">Background animation</a></li>\n</ul>\n<!-- /TOC -->\n<h1 id=\"ph√¢n-t√≠ch\"><a href=\"#ph%C3%A2n-t%C3%ADch\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ph√¢n t√≠ch</h1>\n<p data-height=\"265\" data-theme-id=\"0\" data-slug-hash=\"PaYXEZ\" data-default-tab=\"js,result\" data-user=\"aholachek\" data-embed-version=\"2\" data-pen-title=\"React Stripe Menu\" class=\"codepen\">See the Pen <a href=\"https://codepen.io/aholachek/pen/PaYXEZ/\">React Stripe Menu</a> by Alex (<a href=\"https://codepen.io/aholachek\">@aholachek</a>) on <a href=\"https://codepen.io\">CodePen</a>.</p>\n<script async src=\"https://static.codepen.io/assets/embed/ei.js\"></script>\n<p>Tr∆∞·ªõc ti√™n ph√¢n t√≠ch c√°i animation n√†y ra th√†nh nhi·ªÅu ph·∫ßn ƒë·ªÉ d·ªÉ h√¨nh dung. C√≥ th·ªÉ xem d·∫°ng slow motion tr√™n Codepen ƒë·ªÉ xem nh√©.</p>\n<ul>\n<li>container dropdown m√†u tr·∫Øng s·∫Ω thay ƒë·ªïi k√≠ch th∆∞·ªõc v√† v·ªã tr√≠</li>\n<li>background m√†u x√°m ·ªü ph√≠a d∆∞·ªõi c·ªßa dropdown transition ƒë·ªô cao</li>\n<li>Khi di chuy·ªÉn chu·ªôt kh·ªèi dropdown, fade out n·ªôi dung tr∆∞·ªõc ƒë√≥ ƒëi v√† chuy·ªÉn v·ªã tr√≠ n√≥ sang element m·ªõi, sau ƒë√≥ ƒë∆∞a n·ªôi dung m·ªõi l√™n.</li>\n</ul>\n<p>M·ªôt v√†i l∆∞u √Ω khi l√†m animation v·ªõi React, c·ª© ƒë·ªÉ browser qu·∫£n l√Ω layout. Thay v√¨ s·ª≠ d·ª•ng c√°c dropdown kh√°c nhau, ch√∫ng ta d√πng 1 dropdown v√† thay ƒë·ªïi v·ªã tr√≠ c·ªßa n√≥, d√πng <a href=\"https://css-tricks.com/animating-layouts-with-the-flip-technique/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Flip technique</a> ƒë·ªÉ gi·∫£ l·∫≠p nh∆∞ c√≥ 3 dropdown kh√°c nhau.</p>\n<h1 id=\"d·ª±ng-component-th√¥-ch∆∞a-c√≥-animate\"><a href=\"#d%E1%BB%B1ng-component-th%C3%B4-ch%C6%B0a-c%C3%B3-animate\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>D·ª±ng component th√¥ ch∆∞a c√≥ animate</h1>\n<p data-height=\"265\" data-theme-id=\"0\" data-slug-hash=\"OELrzN\" data-default-tab=\"js,result\" data-user=\"aholachek\" data-embed-version=\"2\" data-pen-title=\"React Stripe Menu Before Animation\" class=\"codepen\">See the Pen <a href=\"https://codepen.io/aholachek/pen/OELrzN/\">React Stripe Menu Before Animation</a> by Alex (<a href=\"https://codepen.io/aholachek\">@aholachek</a>) on <a href=\"https://codepen.io\">CodePen</a>.</p>\n<script async src=\"https://static.codepen.io/assets/embed/ei.js\"></script>\n<p>ƒê·ªÉ b·∫Øt ƒë·∫ßu ta d·ª±ng m·ªôt component <code class=\"language-inline-text\">navbar</code> s·ª≠ d·ª•ng <code class=\"language-inline-text\">styled-component</code></p>\n<p>·ªû ƒë√¢y th√¨ ch∆∞a th√™m ph·∫ßn gray background ·ªü d∆∞·ªõi dropdown, c√°i n√†y n√≥ s·∫Ω n·∫±m <code class=\"language-inline-text\">absolute</code></p>\n<h1 id=\"animate-v·ªõi-flip-technique\"><a href=\"#animate-v%E1%BB%9Bi-flip-technique\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Animate v·ªõi Flip technique</h1>\n<p>Ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng <a href=\"https://github.com/aholachek/react-flip-toolkit\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react-flip-toolkit</a> ƒë·ªÉ thay ƒë·ªïi k√≠ch th∆∞·ªõc v√† v·ªã tr√≠ dropdown.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Flipper</span></span> <span class=\"token attr-name\">flipKey</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>currentIndex<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Navbar</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span>navbar<span class=\"token punctuation\">.</span>Config<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">n<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// render navbar items</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Navbar</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Flipper</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>·ªû <code class=\"language-inline-text\">DropdownContainer</code> component, ƒë∆∞a c√°c element s·∫Ω animate v√†o b√™n trong <code class=\"language-inline-text\">Flipped</code> component, nh·ªõ gi√° tr·ªã <code class=\"language-inline-text\">flipId</code> ph·∫£i kh√°c nhau</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DropdownRoot</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Flipped</span></span> <span class=\"token attr-name\">flipId</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>dropdown-caret<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Caret</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Flipped</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Flipped</span></span> <span class=\"token attr-name\">flipId</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>dropdown<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DropdownBackground</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">DropdownBackground</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Flipped</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">DropdownRoot</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>L√†m 2 c√°i animate tr√™n <code class=\"language-inline-text\">&lt;Caret/></code> v√† <code class=\"language-inline-text\">&lt;DropdownBackground/></code> ri√™ng bi·ªát, ƒë·ªÉ thu·ªôc t√≠nh <code class=\"language-inline-text\">overflow: hidden</code> set tr√™n <code class=\"language-inline-text\">&lt;DropdownBackground /></code> kh√¥ng ·∫£nh h∆∞·ªüng t·ªõi <code class=\"language-inline-text\">&lt;Caret/></code></p>\n<p>Gi·ªù c√≥ 1 v·∫•n ƒë·ªÅ nh·ªè l√† n·ªôi dung b√™n trong dropdown l√∫c xu·∫•t hi·ªán b·ªã stretch m·ªôt c√°ch k·ª≥ c·ª•c, l√Ω do l√† thu·ªôc t√≠nh <code class=\"language-inline-text\">transforms: scale</code> n√≥ √°p lu√¥n tr√™n children. X·ª≠ l√Ω c√°i n√†y b·∫±ng c√°ch ƒë∆∞a n·ªôi dung n√†y v√†o trong <code class=\"language-inline-text\">&lt;Flipped/></code> k√®m gi√° tr·ªã cho props <code class=\"language-inline-text\">inverseFlipId</code>, l√∫c n√†y children s·∫Ω kh√¥ng b·ªã effect t·ª´ th·∫±ng cha n·ªØa, ƒë·ªìng th·ªùi x√°c ƒë·ªãnh lu√¥n l√† ko mu·ªën √°p th·∫±ng <code class=\"language-inline-text\">scale</code></p>\n<p data-height=\"265\" data-theme-id=\"0\" data-slug-hash=\"MXgZxG\" data-default-tab=\"js,result\" data-user=\"aholachek\" data-embed-version=\"2\" data-pen-title=\"React Stripe Menu -- Error #1: no scale adjustment\" class=\"codepen\">See the Pen <a href=\"https://codepen.io/aholachek/pen/MXgZxG/\">React Stripe Menu -- Error #1: no scale adjustment</a> by Alex (<a href=\"https://codepen.io/aholachek\">@aholachek</a>) on <a href=\"https://codepen.io\">CodePen</a>.</p>\n<script async src=\"https://static.codepen.io/assets/embed/ei.js\"></script>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DropdownRoot</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Flipped</span></span> <span class=\"token attr-name\">flipId</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dropdown-caret<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Caret</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Flipped</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Flipped</span></span> <span class=\"token attr-name\">flipId</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dropdown<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DropdownBackground</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Flipped</span></span> <span class=\"token attr-name\">inverseFlipId</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dropdown<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">scale</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Flipped</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">DropdownBackground</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Flipped</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">DropdownRoot</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h1 id=\"chƒÉm-ch√∫c\"><a href=\"#ch%C4%83m-ch%C3%BAc\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ChƒÉm ch√∫c</h1>\n<p>C≈©ng g·∫ßn ƒë∆∞·ª£c r·ªìi, ch√∫ng ta c·∫ßn ƒë·ªÉ √Ω th√™m v√†o nh·ªØng chi ti·∫øt nh·ªè nh·∫•t ƒë·ªÉ animate nh√¨n cool h∆°n</p>\n<p>Styled-components h·ªó tr·ª£ r·∫•t t·ªët vi·ªác <a href=\"https://www.styled-components.com/docs/basics#animations\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">thay ƒë·ªïi keyframe animation</a>. Ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng t√≠nh nƒÉng n√†y ƒë·ªÉ l√†m animation l√∫c enter v√† cross-fade n·ªôi dung dropdown khi thay ƒë·ªïi v√≠ tr√≠ chu·ªôt.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFadeContainerKeyFrame</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> animatingOut<span class=\"token punctuation\">,</span> direction <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>direction<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> keyframes<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n    from {\n      transform: translateX(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n        animatingOut <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token operator\">:</span> direction <span class=\"token operator\">===</span> <span class=\"token string\">'left'</span> <span class=\"token operator\">?</span> <span class=\"token number\">20</span> <span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">20</span>\n      <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px);\n    }\n    to {\n      transform: translateX(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>\n        <span class=\"token operator\">!</span>animatingOut <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token operator\">:</span> direction <span class=\"token operator\">===</span> <span class=\"token string\">'left'</span> <span class=\"token operator\">?</span> <span class=\"token operator\">-</span><span class=\"token number\">20</span> <span class=\"token operator\">:</span> <span class=\"token number\">20</span>\n      <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px);\n      opacity: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>animatingOut <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;\n    }\n  </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> FadeContainer <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>div<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  animation-name: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>getFadeContainerKeyFrame<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;\n  animation-duration: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> props<span class=\"token punctuation\">.</span>duration <span class=\"token operator\">*</span> <span class=\"token number\">0.5</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">ms;\n  animation-fill-mode: forwards;\n  position: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>animatingOut <span class=\"token operator\">?</span> <span class=\"token string\">\"absolute\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"relative\"</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;\n  opacity: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">.</span>direction <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>props<span class=\"token punctuation\">.</span>animatingOut <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;\n  animation-timing-function: linear;\n  top: 0;\n  left: 0;\n</span><span class=\"token template-punctuation string\">`</span></span></code></pre></div>\n<p data-height=\"265\" data-theme-id=\"0\" data-slug-hash=\"NzPpwG\" data-default-tab=\"js,result\" data-user=\"aholachek\" data-embed-version=\"2\" data-pen-title=\"React Stripe Menu -- Simple FLIP\" class=\"codepen\">See the Pen <a href=\"https://codepen.io/aholachek/pen/NzPpwG/\">React Stripe Menu -- Simple FLIP</a> by Alex (<a href=\"https://codepen.io/aholachek\">@aholachek</a>) on <a href=\"https://codepen.io\">CodePen</a>.</p>\n<script async src=\"https://static.codepen.io/assets/embed/ei.js\"></script>\n<p>Khi user ƒë∆∞a chu·ªôt l√™n menu m·ªõi, ch√∫ng ta ko ch·ªâ ƒë∆∞a v√†o dropdown hi·ªán t·∫°i m√† con dropdown tr∆∞·ªõc ƒë√≥ nh∆∞ children cho <code class=\"language-inline-text\">DropdownContainer</code>, c√πng v·ªõi nh·ªØng th√¥ng tin v·ªÅ h∆∞·ªõng di chu·ªôt c·ªßa user. Sau ƒë√≥ <code class=\"language-inline-text\">DropdonwContainer</code> s·∫Ω wrap h·∫øt t·∫•t c·∫£ children c·ªßa n√≥ trong m·ªôt component m·ªõi, <code class=\"language-inline-text\">FadeContents</code>, th·∫±ng n√†y s·∫Ω s·ª≠ d·ª•ng keyframe animation code ·ªü tr√™n ƒë·ªÉ th√™m animation t∆∞∆°ng ·ª©ng</p>\n<h1 id=\"background-animation\"><a href=\"#background-animation\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Background animation</h1>\n<p>Cu·ªëi c√πng ch√∫ng ta th√™m gray background</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">updateAltBackground</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\n  altBackground<span class=\"token punctuation\">,</span>\n  prevDropdown<span class=\"token punctuation\">,</span>\n  currentDropdown\n<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> prevHeight <span class=\"token operator\">=</span> <span class=\"token function\">getFirstDropdownSectionHeight</span><span class=\"token punctuation\">(</span>prevDropdown<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> currentHeight <span class=\"token operator\">=</span> <span class=\"token function\">getFirstDropdownSectionHeight</span><span class=\"token punctuation\">(</span>currentDropdown<span class=\"token punctuation\">)</span>\n  \n  <span class=\"token comment\">// we'll use this function when we want a change </span>\n  <span class=\"token comment\">// to happen immediately, without CSS transitions</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">immediateSetTranslateY</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">el<span class=\"token punctuation\">,</span> translateY</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translateY(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>translateY<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span>\n    el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transition <span class=\"token operator\">=</span> <span class=\"token string\">\"transform 0s\"</span>\n    <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transitionDuration <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevHeight<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// transition the grey (\"alt\") background from its previous height</span>\n    <span class=\"token comment\">// to its current height</span>\n    <span class=\"token function\">immediateSetTranslateY</span><span class=\"token punctuation\">(</span>altBackground<span class=\"token punctuation\">,</span> prevHeight<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      altBackground<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>transform <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translateY(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>currentHeight<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// immediately set the background to the appropriate height</span>\n    <span class=\"token comment\">// since we don't have a stored value</span>\n    <span class=\"token function\">immediateSetTranslateY</span><span class=\"token punctuation\">(</span>altBackground<span class=\"token punctuation\">,</span> currentHeight<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p data-height=\"265\" data-theme-id=\"0\" data-slug-hash=\"qKRWBe\" data-default-tab=\"js,result\" data-user=\"aholachek\" data-embed-version=\"2\" data-pen-title=\"React Stripe Menu -- Animated Background\" class=\"codepen\">See the Pen <a href=\"https://codepen.io/aholachek/pen/qKRWBe/\">React Stripe Menu -- Animated Background</a> by Alex (<a href=\"https://codepen.io/aholachek\">@aholachek</a>) on <a href=\"https://codepen.io\">CodePen</a>.</p>\n<script async src=\"https://static.codepen.io/assets/embed/ei.js\"></script>\n<p>Source: <a href=\"https://github.com/aholachek/react-stripe-menu\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/aholachek/react-stripe-menu</a></p>\n<p><a href=\"https://css-tricks.com/building-a-complex-ui-animation-in-react-simply/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Link b√†i g·ªëc c·ªßa t√°c gi·∫£</a></p>\n","cover_image":""}},{"node":{"id":"a00acdfb9e418ce7cee1220fa57e1213","title":"Gi·ªõi thi·ªáu RxJS v√† Redux Observer","path":"/2018-07-18-huong-dan-gioi-thieu-ve-redux-observer/","date":"2018-07-18","timeToRead":3,"desc":"M·ªôt middleware m·∫°nh h∆°n redux-thunk, √≠t ph·ª©c t·∫°p h∆°n redux-saga. Ch√∫ng ta s·∫Ω ƒëi·ªÉm qua nh·ªØng kh√°i ni·ªám ch√≠nh ƒë·ªÉ b·∫Øt ƒë·∫ßu v·ªõi middleware n√†y","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#nh%E1%BB%AFng-kh%C3%A1i-ni%E1%BB%87m-ch%C3%ADnh-c%E1%BA%A7n-hi%E1%BB%83u-khi-l%C3%A0m-vi%E1%BB%87c-v%E1%BB%9Bi-rxjs\">Nh·ªØng kh√°i ni·ªám ch√≠nh c·∫ßn hi·ªÉu khi l√†m vi·ªác v·ªõi RxJS</a></li>\n<li>\n<p><a href=\"#kh%E1%BB%9Fi-t%E1%BA%A1o-observable\">Kh·ªüi t·∫°o <code class=\"language-inline-text\">Observable</code></a></p>\n<ul>\n<li><a href=\"#m%E1%BB%99t-ho%E1%BA%B7c-nhi%E1%BB%81u-gi%C3%A1-tr%E1%BB%8B\">m·ªôt ho·∫∑c nhi·ªÅu gi√° tr·ªã</a></li>\n<li><a href=\"#t%E1%BB%AB-m%E1%BB%99t-s%E1%BB%B1-ki%E1%BB%87n\">T·ª´ m·ªôt s·ª± ki·ªán</a></li>\n<li><a href=\"#t%E1%BB%AB-m%E1%BB%99t-promise\">T·ª´ m·ªôt promise</a></li>\n</ul>\n</li>\n<li><a href=\"#mergemap--alias-l%C3%A0-flatmap\">mergeMap ( alias l√† flatMap)</a></li>\n<li><a href=\"#redux-observable\">Redux-Observable</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"nh·ªØng-kh√°i-ni·ªám-ch√≠nh-c·∫ßn-hi·ªÉu-khi-l√†m-vi·ªác-v·ªõi-rxjs\"><a href=\"#nh%E1%BB%AFng-kh%C3%A1i-ni%E1%BB%87m-ch%C3%ADnh-c%E1%BA%A7n-hi%E1%BB%83u-khi-l%C3%A0m-vi%E1%BB%87c-v%E1%BB%9Bi-rxjs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nh·ªØng kh√°i ni·ªám ch√≠nh c·∫ßn hi·ªÉu khi l√†m vi·ªác v·ªõi RxJS</h2>\n<ul>\n<li><strong>Observable</strong> m·ªôt interface s·∫Ω l·∫Øng nghe nh·ªØng notification trong <em>m·ªôt kho·∫£n th·ªùi gian</em> v√† push cho nh·ªØng interface kh√°c s·∫Ω l√†m g√¨ ƒë√≥ khi c√≥ notification n√†y.</li>\n<li><strong>Subscription</strong> Khi <em>observable</em> b·∫Øt ƒë·∫ßu ƒë∆∞·ª£c th·ª±c thi, v√≠ d·ª• nh∆∞ l·∫Øng nghe s·ª± ki·ªán, v√† push</li>\n<li><strong>Observer</strong> m·ªôt interface s·∫Ω l√†m g√¨ ƒë√≥ v·ªõi data ƒë∆∞·ª£c push t·ª´ <em>observable</em></li>\n<li><strong>Operators</strong> c√°c ph∆∞∆°ng th·ª©c ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t∆∞∆°ng t√°c v·ªõi output c·ªßa <em>Observable</em></li>\n</ul>\n<p>V√≠ d·ª• ƒëƒÉng k√Ω listen l√™n m·ªôt s·ª± ki·ªán n√†o ƒë√≥</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nbutton<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Clicked'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Trong RxJS ch√∫ng ta vi·∫øt nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> button <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nRx<span class=\"token punctuation\">.</span>Observable<span class=\"token punctuation\">.</span><span class=\"token function\">fromEvent</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Clicked!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"kh·ªüi-t·∫°o-observable\"><a href=\"#kh%E1%BB%9Fi-t%E1%BA%A1o-observable\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kh·ªüi t·∫°o <code class=\"language-inline-text\">Observable</code></h2>\n<p>Ch√∫ng ta c√≥ th·ªÉ t·∫°o observable b·∫±ng c√°ch convert t·ª´</p>\n<h3 id=\"m·ªôt-ho·∫∑c-nhi·ªÅu-gi√°-tr·ªã\"><a href=\"#m%E1%BB%99t-ho%E1%BA%B7c-nhi%E1%BB%81u-gi%C3%A1-tr%E1%BB%8B\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>m·ªôt ho·∫∑c nhi·ªÅu gi√° tr·ªã</h3>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Rx<span class=\"token punctuation\">.</span>Observable<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"t·ª´-m·ªôt-s·ª±-ki·ªán\"><a href=\"#t%E1%BB%AB-m%E1%BB%99t-s%E1%BB%B1-ki%E1%BB%87n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·ª´ m·ªôt s·ª± ki·ªán</h3>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Rx<span class=\"token punctuation\">.</span>Observable<span class=\"token punctuation\">.</span><span class=\"token function\">fromEvent</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"t·ª´-m·ªôt-promise\"><a href=\"#t%E1%BB%AB-m%E1%BB%99t-promise\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·ª´ m·ªôt promise</h3>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Rx<span class=\"token punctuation\">.</span>Observable<span class=\"token punctuation\">.</span><span class=\"token function\">fromPromise</span><span class=\"token punctuation\">(</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/users'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ch√∫ng ta c≈©ng c√≥ th·ªÉ t·∫°o observable s·ª≠ d·ª•ng <code class=\"language-inline-text\">Observable.create</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> Rx<span class=\"token punctuation\">.</span>Observable<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">observer</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  observer<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token number\">42</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  observer<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  observer<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    observer<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  observer<span class=\"token punctuation\">.</span><span class=\"token function\">complete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfoo<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ƒê·ªÉ √Ω l√† <code class=\"language-inline-text\">observer</code> c√≥ ph∆∞∆°ng th·ª©c <code class=\"language-inline-text\">next</code> v√† <code class=\"language-inline-text\">complete</code>.</p>\n<h2 id=\"mergemap--alias-l√†-flatmap\"><a href=\"#mergemap--alias-l%C3%A0-flatmap\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>mergeMap ( alias l√† flatMap)</h2>\n<p>Ph∆∞∆°ng th·ª©c ph·ªï bi·∫øn nh·∫•t cho ph√©p transform output c·ªßa observable.</p>\n<div class=\"gridsome-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>text<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>input1<span class=\"token punctuation\">'</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>text<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>input2<span class=\"token punctuation\">'</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Combined value: <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>N·∫øu ch√∫ng ta mu·ªën <code class=\"language-inline-text\">subscribe</code> l√™n s·ª± ki·ªán user input gi√° tr·ªã v√¥ <code class=\"language-inline-text\">&lt;input/></code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> input1 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#input1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> input2 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#input2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> span <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'span'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> obs1 <span class=\"token operator\">=</span> Rx<span class=\"token punctuation\">.</span>Observable<span class=\"token punctuation\">.</span><span class=\"token function\">fromEvent</span><span class=\"token punctuation\">(</span>input1<span class=\"token punctuation\">,</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> span<span class=\"token punctuation\">.</span>textContext <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> obs2 <span class=\"token operator\">=</span> Rx<span class=\"token punctuation\">.</span>Observable<span class=\"token punctuation\">.</span><span class=\"token function\">fromEvent</span><span class=\"token punctuation\">(</span>input2<span class=\"token punctuation\">,</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span> <span class=\"token operator\">=></span> span<span class=\"token punctuation\">.</span>textContext <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Gi√° tr·ªã span s·∫Ω thay ƒë·ªïi khi ta nh·∫≠p gi√° tr·ªã cho 1 trong 2 input, tuy nhi√™n n√≥ s·∫Ω override gi√° tr·ªã c≈©. N·∫øu mu·ªën c√≥ m·ªôt k·∫øt qu·∫£ combine t·ª´ c·∫£ 2 gi√° tr·ªã nh·∫≠p v√†o t·ª´ input, ta <code class=\"language-inline-text\">mergeMap</code> 2 observable l·∫°i.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> obs1 <span class=\"token operator\">=</span> Rx<span class=\"token punctuation\">.</span>Observable<span class=\"token punctuation\">.</span><span class=\"token function\">fromEvent</span><span class=\"token punctuation\">(</span>input1<span class=\"token punctuation\">,</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> obs2 <span class=\"token operator\">=</span> Rx<span class=\"token punctuation\">.</span>Observable<span class=\"token punctuation\">.</span><span class=\"token function\">fromEvent</span><span class=\"token punctuation\">(</span>input2<span class=\"token punctuation\">,</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nobs1<span class=\"token punctuation\">.</span><span class=\"token function\">mergeMap</span><span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\">event1</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> obs2<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event2</span> <span class=\"token operator\">=></span> event1<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value <span class=\"token operator\">+</span> <span class=\"token string\">' '</span> <span class=\"token operator\">+</span> event2<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>\n  <span class=\"token parameter\">combineValue</span> <span class=\"token operator\">=></span> span<span class=\"token punctuation\">.</span>textContext <span class=\"token operator\">=</span> combineValue\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"redux-observable\"><a href=\"#redux-observable\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Redux-Observable</h2>\n<p>Redux-Observable cho ph√©p ch√∫ng ta ƒë∆∞a c√°c kh√°i ni·ªám c·ªßa RxJS v√†o trong Redux. N√≥ s·∫Ω t·∫°o ra c√°c Observable l·∫Øng nghe <code class=\"language-inline-text\">action</code>, x√†o n·∫•u tr∆∞·ªõc khi <code class=\"language-inline-text\">dispatch</code> m·ªôt action kh√°c ƒë·∫øn <code class=\"language-inline-text\">reducer</code>. N√≥ ƒë∆∞·ª£c g·ªçi m·ªôt c√°i t√™n ch·∫£nh ch√≥ l√† <strong>Epic</strong> (m√¨nh g·ªçi n√≥ l√† ch·∫£nh ch√≥ v√¨ m√¨nh th·∫•y n√≥ m√©o c√≥ g√¨ ƒë·ªÉ ƒë∆∞·ª£c g·ªçi l√† epic c·∫£)</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ajax <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'rxjs/observable/dom/ajax'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Action creators</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchUser</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">username</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'FETCH_USER'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> username <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchUserFulfilled</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">payload</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'FETCH_USER_FULFILLED'</span><span class=\"token punctuation\">,</span> payload <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Epic</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchUserEpic</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">action$</span> <span class=\"token operator\">=></span>\n  action$<span class=\"token punctuation\">.</span><span class=\"token function\">ofType</span><span class=\"token punctuation\">(</span><span class=\"token string\">'FETCH_USER'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">mergeMap</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">action</span> <span class=\"token operator\">=></span>\n      ajax<span class=\"token punctuation\">.</span><span class=\"token function\">getJSON</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://api.github.com/users/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>action<span class=\"token punctuation\">.</span>payload<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token function\">fetchUserFulfilled</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Dispatch FETCH_USER action</span>\n<span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">fetchUser</span><span class=\"token punctuation\">(</span><span class=\"token string\">'torvalds'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Khi action type <code class=\"language-inline-text\">FETCH_USER</code> ƒë∆∞·ª£c dispatch ra, <code class=\"language-inline-text\">fetchUserEpic</code> l·∫Øng nghe t·∫•t c·∫£ s·ª± ki·ªán, n·∫øu type l√† <code class=\"language-inline-text\">FETCH_USER</code>, n√≥ kh√¥ng ƒë∆∞a ngay xu·ªëng <code class=\"language-inline-text\">reducer</code> c·ªßa redux m√† d·ª´ng l·∫°i v√† g·ªçi ajax, sau khi c√≥ k·∫øt qu·∫£ ajax, n√≥ l·∫°i dispatch ra m·ªôt s·ª± ki·ªán kh√°c v·ªõi type l√† <code class=\"language-inline-text\">FETCH_USER_FULFILLED</code>, r·ªìi tr·∫£ v·ªÅ cho <code class=\"language-inline-text\">reducer</code></p>\n<p><a href=\"https://medium.com/@johnvoon/understanding-rxjs-and-redux-observable-93d953d436c6\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Link b√†i g·ªëc</a>\n<a href=\"http://www.hay16.com/videob59tcUwfpWU/mergemaprxjs-tutorial-watch.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Video gi·∫£i th√≠ch mergeMap</a></p>\n","cover_image":""}},{"node":{"id":"3cbd2588e65e7ca4b1ebac17d5d87485","title":"M·ªôt s·ªë ·ª©ng d·ª•ng c·ªßa middleware","path":"/2018-06-21-huong-dan-mot-so-ung-dung-cua-middleware/","date":"2018-06-21","timeToRead":5,"desc":"Ti·∫øp theo b√†i tr∆∞·ªõc v·ªÅ middleware, ·ª©ng d·ª•ng v·ªõi c√°c tr∆∞·ªùng h·ª£p th·ª±c t·∫ø","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#%C4%91%C3%B3ng-g%C3%B3i-c%C3%A1c-ph%C6%B0%C6%A1ng-th%E1%BB%A9c-g%E1%BB%8Di-api\">ƒê√≥ng g√≥i c√°c ph∆∞∆°ng th·ª©c g·ªçi API</a></li>\n<li><a href=\"#localstorage-v%C3%A0-cookies\">localStorage v√† Cookies</a></li>\n<li><a href=\"#theo-d%C3%B5i-file\">Theo d√µi file</a></li>\n<li><a href=\"#tr%C3%ACnh-nghe-nh%E1%BA%A1c\">Tr√¨nh nghe nh·∫°c</a></li>\n</ul>\n<!-- /TOC -->\n<p>T·ªïng h·ª£p l·∫°i ƒë·ªÉ nh·ªõ v·ªÅ middleware, n√≥ l√† 1 function nh·∫≠n v√†o</p>\n<p>storeInstance\n=> functionToCallWithAnActionThatWillSendItToTheNextMiddleware\n=> actionThatDispatchWasCalledWith\n=> valueToUseAsTheReturnValueOfTheDispatchCall</p>\n<p>ƒê∆∞·ª£c vi·∫øt v·ªõi d·∫°ng syntax</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">store => next => action => result</code></pre></div>\n<p>Sau ƒë·∫•y ƒë∆∞·ª£c s·ª≠ d·ª•ng b·∫±ng c√°ch truy·ªÅn v√†o nh∆∞ m·ªôt tham s·ªë cho h√†m <code class=\"language-inline-text\">applyMiddleware</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> middlewares <span class=\"token operator\">=</span> <span class=\"token function\">applyMiddleware</span><span class=\"token punctuation\">(</span>middleware1<span class=\"token punctuation\">,</span> middleware2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>reducers<span class=\"token punctuation\">,</span> initState<span class=\"token punctuation\">,</span> middlewares<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Middleware ƒë∆°n gi·∫£n nh·∫•t l√† m·ªôt function √©o l√†m g√¨ c·∫£, n√≥ ch·ªâ forward c√°i action ƒë·∫øn middleware k·∫ø ti·∫øp</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">middleware</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">next</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">action</span> <span class=\"token operator\">=></span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"ƒë√≥ng-g√≥i-c√°c-ph∆∞∆°ng-th·ª©c-g·ªçi-api\"><a href=\"#%C4%91%C3%B3ng-g%C3%B3i-c%C3%A1c-ph%C6%B0%C6%A1ng-th%E1%BB%A9c-g%E1%BB%8Di-api\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒê√≥ng g√≥i c√°c ph∆∞∆°ng th·ª©c g·ªçi API</h2>\n<p>N·∫øu API c·ªßa ch√∫ng ta c·∫ßn authentication token, thay v√¨ tr√™n m·ªói action creat·ªè ch√∫ng ta l·∫•y token (c√≥ th·ªÉ t·ª´ <code class=\"language-inline-text\">store.getState</code> ho·∫∑c <code class=\"language-inline-text\">sessionStorage</code>), r·ªìi truy·ªÅn tham s·ªë n√†y v√†o tr∆∞·ªõc khi g·ªçi api, ch√∫ng ta d√πng middleware ƒë·ªÉ l√†m chuy·ªán ƒë√≥ s·∫Ω t·ªët h∆°n</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetch</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">url<span class=\"token punctuation\">,</span> params</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'FETCH'</span><span class=\"token punctuation\">,</span>\n    url<span class=\"token punctuation\">,</span>\n    params<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">fetchMiddleware</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">fetchImplementation</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">next</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">action</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'FETCH'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>url<span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> action<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> token <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>token<span class=\"token punctuation\">;</span>\n        _<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>params<span class=\"token punctuation\">,</span> <span class=\"token string\">'headers.token'</span><span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">fetchImplementation</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> params<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> middleware <span class=\"token operator\">=</span> <span class=\"token function\">applyMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token function\">fetchMiddleware</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>fetch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>reducers<span class=\"token punctuation\">,</span> middleware<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// vi du goi action</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getUser</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">id</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>dispatch<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://api.website.com/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'GET'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Th·∫±ng middleware <code class=\"language-inline-text\">fetchMiddleware</code> khi t√∫m ƒë∆∞·ª£c <code class=\"language-inline-text\">action.type</code> t√™n l√† <strong>FETCH</strong> n√≥ s·∫Ω th·ª±c hi·ªán vi·ªác g·ªüi m·ªôt HTTP request v√† tr·∫£ v·ªÅ 1 <code class=\"language-inline-text\">promise</code></p>\n<p>·ªû ƒë√¢y ƒë·ªÉ l√†m cho v√≠ d·ª• ƒë∆°n gi·∫£n ch√∫ng ta kh√¥ng implement c√°i <code class=\"language-inline-text\">fetchImplementation</code> m√† ƒëang hard code th·∫±ng n√†y s·ª≠ d·ª•ng <code class=\"language-inline-text\">window.fetch</code></p>\n<h2 id=\"localstorage-v√†-cookies\"><a href=\"#localstorage-v%C3%A0-cookies\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>localStorage v√† Cookies</h2>\n<p>·ª®ng d·ª•ng n√†o c≈©ng s·∫Ω c·∫ßn l∆∞u th√¥ng tin user, c√≥ th·ªÉ l√† <em>authentication token</em> ho·∫∑c ƒë∆∞·ªùng d·∫´n l·∫ßn tr∆∞·ªõc user truy c·∫≠p. Ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng middleware ƒë·ªÉ l∆∞u tr·∫°ng th√°i n√†y xu·ªëng <code class=\"language-inline-text\">localStorage</code> ho·∫∑c <em>cookies</em>.</p>\n<p>N·∫øu ch√∫ng ta g·ªçi <code class=\"language-inline-text\">getState</code> tr∆∞·ªõc khi g·ªçi <code class=\"language-inline-text\">next(action)</code>, ch√∫ng ta s·∫Ω c√≥ <strong>before state</strong> tr∆∞·ªõc khi action ƒë·∫øn tay <code class=\"language-inline-text\">reducer</code>, n·∫øu ch√∫ng ta g·ªçi n√≥ sau <code class=\"language-inline-text\">next(action)</code>, ch√∫ng ta c√≥ <strong>after state</strong> sau khi reducer x·ª≠ l√Ω. D·ª±a v√†o <strong>before state</strong> v√† <strong>after state</strong> n√†y ch√∫ng ta c√≥ th·ªÉ thay ƒë·ªïi ƒë√∫ng c√°i ƒë√£ b·ªã thay ƒë·ªïi</p>\n<p>V√≠ d·ª• l∆∞u authentication token xu·ªëng <code class=\"language-inline-text\">localStorage</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">middleware</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">next</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">action</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// l·∫•y before state v√† after state</span>\n    <span class=\"token keyword\">const</span> previousToken <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>token<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> nextToken <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>token<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// thay ƒë·ªïi</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextToken <span class=\"token operator\">!==</span> previousToken<span class=\"token punctuation\">)</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'token'</span><span class=\"token punctuation\">,</span> nextToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// l·∫•y init state t·ª´ localStorage</span>\n<span class=\"token keyword\">const</span> token <span class=\"token operator\">=</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'token'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> initState <span class=\"token operator\">=</span> token\n    <span class=\"token operator\">?</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>defaultState<span class=\"token punctuation\">,</span> <span class=\"token string\">'token'</span><span class=\"token punctuation\">,</span> token<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">:</span> defaultState<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> middleware <span class=\"token operator\">=</span> <span class=\"token function\">applyMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token function\">middleware</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>reducers<span class=\"token punctuation\">,</span> initialState<span class=\"token punctuation\">,</span> middlewares<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"theo-d√µi-file\"><a href=\"#theo-d%C3%B5i-file\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Theo d√µi file</h2>\n<p>V√≠ d·ª• trong ·ª©ng d·ª•ng ta c√≥ state l√† <code class=\"language-inline-text\">activeFiles</code>, l√† m·ªôt m·∫£ng file b·∫°n mu·ªën theo d√µi thay ƒë·ªïi. Khi file thay ƒë·ªïi, ch√∫ng ta mu·ªën <code class=\"language-inline-text\">dispatch</code> 1 action</p>\n<p>S·ª≠ d·ª•ng t∆∞∆°ng t·ª± nh∆∞ tr√™n</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">middleware</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> fileWatcher <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FileWatcher</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fileWatcher<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'file-changed'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">filename</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'FILE_CHANGED'</span><span class=\"token punctuation\">,</span> filename <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Make sure we're watching files that may be included in the store's initial state</span>\n    <span class=\"token keyword\">const</span> initialFiles <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>activeFiles<span class=\"token punctuation\">;</span>\n    fileWatcher<span class=\"token punctuation\">.</span><span class=\"token function\">watchFiles</span><span class=\"token punctuation\">(</span>initialFiles<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token parameter\">next</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">action</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Get the state before and after the action was performed</span>\n        <span class=\"token keyword\">const</span> previousFiles <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>activeFiles<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> nextFiles <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>activeFiles<span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// See what changed before and after</span>\n        <span class=\"token keyword\">const</span> filesToUnwatch <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">difference</span><span class=\"token punctuation\">(</span>previousFiles<span class=\"token punctuation\">,</span> nextFiles<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> filesToWatch <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">difference</span><span class=\"token punctuation\">(</span>nextFiles<span class=\"token punctuation\">,</span> previousFiles<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Respond to changes</span>\n        fileWatcher<span class=\"token punctuation\">.</span><span class=\"token function\">unwatchFiles</span><span class=\"token punctuation\">(</span>filesToUnwatch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        fileWatcher<span class=\"token punctuation\">.</span><span class=\"token function\">watchFiles</span><span class=\"token punctuation\">(</span>filesToWatch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>·ªû ƒë√¢y th√¨ n√≥ kh√¥ng ph·ª• thu·ªôc action: v√¥ t∆∞ t·∫°o v√¥ s·ªë action n·∫øu mu·ªën thay ƒë·ªïi gi√° tr·ªã active files, ch√∫ng ta kh√¥ng c·∫ßn thay ƒë·ªïi logic trong middleware.</p>\n<p>V·ªÅ m·∫∑t k·ªπ thu·∫≠t, v√≠ v·ª• tr√™n c√≥ th·ªÉ vi·∫øt l·∫°i b·∫±ng c√°ch s·ª≠ d·ª•ng <code class=\"language-inline-text\">store.subscribe</code>. Tuy nhi√™n ti·∫øp c·∫≠n v·∫•n ƒë·ªÅ li√™n quan t·ªõi side-effect c·ªßa middleware ph·ª• thu·ªôc v√†o action b·∫±ng middleware l√† t·ªët nh·∫•t</p>\n<h2 id=\"tr√¨nh-nghe-nh·∫°c\"><a href=\"#tr%C3%ACnh-nghe-nh%E1%BA%A1c\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tr√¨nh nghe nh·∫°c</h2>\n<p>R·∫•t gi·ªëng nh∆∞ v√≠ v·ª• tr√™n. Kh√°c bi·ªát quan tr·ªçng l√†: s·ª± thay ƒë·ªïi c·ªßa <code class=\"language-inline-text\">state</code> c√≥ th·ªÉ x·∫£y ra t·ª´ middleware ho·∫∑c t·ª´ nh·ªØng ngu·ªìn kh√°c.</p>\n<p>Gi·ªù ch√∫ng ta c√≥ <code class=\"language-inline-text\">state</code> l√† <code class=\"language-inline-text\">isPlaying</code> v√† <code class=\"language-inline-text\">currentTime</code>. Ch√∫ng ta s·∫Ω gi·ªØ ƒë√∫ng kh√°i ni·ªám \"single source of truth\" c·ªßa redux, middleware s·∫Ω ƒë·∫£m nhi·ªám vi·ªác gi·ªØ gi√° r·ªã state n√†y. N·∫øu action thay ƒë·ªïi <code class=\"language-inline-text\">isPlaying</code> t·ª´ <code class=\"language-inline-text\">false</code> sang <code class=\"language-inline-text\">true</code>, th√¨ ta play nh·∫°c, n·∫øu action thay ƒë·ªïi <code class=\"language-inline-text\">currentTime</code> ch√∫ng ta s·∫Ω ph√°t ƒë·∫øn ƒë√∫ng th·ªùi gian ƒë√≥.</p>\n<p>ƒê·ªÉ cho ch√≠nh x√°c, trong middleware ch√∫ng ta adjust m·ªôt ch√∫t ƒë·ªÉ khi <code class=\"language-inline-text\">isPlaying</code> chuy·ªÉn sang <code class=\"language-inline-text\">false</code>, ch√∫ng ta thay ƒë·ªïi lu√¥n <code class=\"language-inline-text\">currentTime</code>. C√°i ng√†y c·ª±c k·ª≥ quan tr·ªçng v√¨ ch√∫ng ta kh√¥ng mu·ªën c·ª© m·ªói khi <code class=\"language-inline-text\">currentTime</code> m√† thay ƒë·ªïi th√¨ ch√∫ng ta l·∫°i ph√°t ƒë√∫ng ƒë·∫øn th·ªùi ƒëi·ªÉm ƒë√≥. Th√™m parameter <code class=\"language-inline-text\">origin</code> trong action ƒë·ªÉ l√†m ƒë·ªëi s·ªë ki·ªÉm tra</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">middleware</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">musicPlayer</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> playbackOrigin <span class=\"token operator\">=</span> <span class=\"token string\">'playbackOrigin'</span><span class=\"token punctuation\">;</span>\n\n    musicPlayer<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'current-time-changed'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">currentTime</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'SET_CURRENT_TIME'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">origin</span><span class=\"token operator\">:</span> playbackOrigin<span class=\"token punctuation\">,</span> currentTime <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    musicPlayer<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'playback-finished'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'STOP_PLAYING'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">origin</span><span class=\"token operator\">:</span> playbackOrigin <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> initState <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>initState<span class=\"token punctuation\">.</span>isPlaying<span class=\"token punctuation\">)</span> musicPlayer<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    musicPlayer<span class=\"token punctuation\">.</span><span class=\"token function\">seek</span><span class=\"token punctuation\">(</span>initState<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token parameter\">next</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">action</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">isPlaying</span><span class=\"token operator\">:</span> wasPlaying<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">currentTime</span><span class=\"token operator\">:</span> previousTime <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">isPlaying</span><span class=\"token operator\">:</span> isPlaying<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">currentTime</span><span class=\"token operator\">:</span> nextTime <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// kh√¥ng dispatch action v·ªõi c√°c action t·ª´ player</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>origin <span class=\"token operator\">===</span> playbackOrigin<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>wasPlaying <span class=\"token operator\">&amp;&amp;</span> isPlaying<span class=\"token punctuation\">)</span> musicPlayer<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>wasPlaying <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>isPlaying<span class=\"token punctuation\">)</span> musicPlayer<span class=\"token punctuation\">.</span><span class=\"token function\">pause</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>previousTime <span class=\"token operator\">!==</span> nextTime<span class=\"token punctuation\">)</span> musicPlayer<span class=\"token punctuation\">.</span><span class=\"token function\">seek</span><span class=\"token punctuation\">(</span>nextTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Mi·ªÖn l√† l√†m ƒë√∫ng c√°i middleware n√†y, ch√∫ng ta s·∫Ω kh√¥ng bao gi·ªù d√≠nh m·∫•y con bug ki·ªÉu nh∆∞ n√∫t Play th√¨ ƒëang cho th·∫•y ·ªü tr·∫°ng th√°i Pause trong khi ƒëang ph√°t r·∫ßm r·∫ßm.</p>\n<p><a href=\"https://medium.com/@jacobp100/you-arent-using-redux-middleware-enough-94ffe991e6\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Link b√†i g·ªëc c·ªßa t√°c gi·∫£ Jacob Parker</a></p>\n","cover_image":""}},{"node":{"id":"0a408624be828657679088cbca8986c7","title":"Ti·∫øp t·ª•c lu·∫≠n b√†n v·ªÅ c√°ch t·ªï ch·ª©c th∆∞ m·ª•c, ƒë·∫∑t t√™n component trong React","path":"/2018-06-18-huong-dan-luan-ban-ve-cach-to-chuc-thu-muc-dat-ten/","date":"2018-06-18","timeToRead":5,"desc":"H·ªïm ƒë√£ vi·∫øt v·ªÅ v·∫•n ƒë·ªÅ n√†y r·ªìi, gi·ªù l·∫°i vi·∫øt ti·∫øp, v√¨ b·∫£n th√¢n React c≈©ng kh√¥ng ra b·∫•t c·ª© rule n√†o v·ªÅ vi·ªác n√†y, b·∫°n t·ª± do t·ªï ch·ª©c sao m√† m√¨nh th·∫•y h·ª£p l√Ω, b√†i tr∆∞·ªõc l√† c·ªßa t√°c gi·∫£ ƒë√≥ th·∫•y v·∫≠y l√† hay, b√†i n√†y th√¨ t√°c gi·∫£ th√≠ch t·ªï ch·ª©c th·∫ø n√†y","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#t%E1%BB%95-ch%E1%BB%A9c-th%C6%B0-m%E1%BB%A5c\">T·ªï ch·ª©c th∆∞ m·ª•c</a></li>\n<li><a href=\"#containers-v%C3%A0-components\">Containers v√† Components</a></li>\n<li><a href=\"#t%C3%A1c-v%C3%A0-nh%C3%B3m-code-l%E1%BA%A1i-v%E1%BB%9Bi-nhau\">T√°c v√† nh√≥m code l·∫°i v·ªõi nhau</a></li>\n<li><a href=\"#ui-components\">UI Components</a></li>\n<li><a href=\"#%C4%91%E1%BA%B7t-t%C3%AAn-components\">ƒê·∫∑t t√™n components</a></li>\n<li><a href=\"#screens\">Screens</a></li>\n<li><a href=\"#k%E1%BA%BFt-lu%E1%BA%ADn\">K·∫øt lu·∫≠n</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"t·ªï-ch·ª©c-th∆∞-m·ª•c\"><a href=\"#t%E1%BB%95-ch%E1%BB%A9c-th%C6%B0-m%E1%BB%A5c\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·ªï ch·ª©c th∆∞ m·ª•c</h2>\n<p>N·∫øu init project b·∫±ng <strong>create-react-app</strong>, ch√∫ng ta s·∫Ω c√≥ s·∫µn nh·ªØng th∆∞ m·ª•c v√† file c∆° b·∫£n nh·∫•t: <em>.gitinore</em>, <em>package.json</em>, <em>README.md</em>, <em>yarn.lock</em>, th∆∞ m·ª•c <strong>public</strong> v√† <strong>src</strong></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*eXN1LlNnuZmosJ7n7EsJ-Q.png\"></p>\n<p>Ch√∫ng ta s·∫Ω ch·ªâ t·∫≠p trung v√†o th∆∞ m·ª•c <strong>src</strong> v√† khoog quan t√¢m t·ªõi nh·ªØng file v√† th∆∞ m·ª•c ·ªü kh√°c.</p>\n<h2 id=\"containers-v√†-components\"><a href=\"#containers-v%C3%A0-components\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Containers v√† Components</h2>\n<p>B√™n trong th∆∞ m·ª•c <strong>src</strong> ch√∫ng ta s·∫Ω t·∫°o th√™m 2 th∆∞ m·ª•c l√† <strong>components</strong> v√† <strong>containers</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src\n‚îú‚îÄ components // ch·ª©a components l√†m nhi·ªám v·ª• render \n‚îî‚îÄ containers // c√°c component x·ª≠ l√Ω logic</code></pre></div>\n<p>N·∫øu l√† theo c√°ch n√†y c√≥ m·ªôt v√†i ch·ªï kh√¥ng h·ª£p l√Ω</p>\n<ul>\n<li>R·∫•t l√† kh√≥ ƒë·ªÉ ph√¢n bi·ªát v√† t√°ch bi·ªát 100% gi·ªØa container v√† presentational component, ch·∫Øc ch·∫Øn trong team s·∫Ω c√≥ ng∆∞·ªùi l√† l√™n \"em th·∫•y c√°i n√†y l√† container ch·ª© sao l·∫°i l√† presentational ƒë∆∞·ª£c\", ki·ªÉu nh∆∞ v·∫≠y.</li>\n<li>Cho ph√©p 2 component c√≥ c√πng t√™n v·ªõi nhau, trong to√†n b·ªô project m·ªói component ch·ªâ n√™n l√† duy nh·∫•t, tr√°nh confuse tr√°ch nhi·ªám c·ªßa m·ªói b√™n.</li>\n<li>T·ªën c√¥ng, vi·ªác t√°ch container ·ªü m·ªôt th∆∞ m·ª•c, presentationial ·ªü th∆∞ m·ª•c kh√°c, r·∫•t l√† phi·ªÅn n·∫øu mu·ªën bay qua bay l·∫°i gi·ªØa 2 th∆∞ m·ª•c.</li>\n</ul>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src\n‚îî‚îÄ User\n  ‚îú‚îÄ components\n  ‚îî‚îÄ containers</code></pre></div>\n<p>C√°ch n√†y th√¨ sao? C√≥ th·ªÉ gi·∫£i quy·∫øt ƒë∆∞·ª£c v·∫•n ƒë·ªÅ bay qua bay l·∫°i ·ªü tr√™n, nh∆∞ng n·∫øu c√≥ 100 c√°i components chung ta ti·∫øp t·ª•c ng·ª•p l·∫∑n trong c·∫£ trƒÉm th∆∞ m·ª•c components containers ·ªü kh·∫Øp m·ªçi n∆°i.</p>\n<p>Theo t√°c gi·∫£ ch√∫ng ta n√™n d·∫πp lu√¥n kh√°i ni·ªám container v√† presentational lu√¥n, t·∫•t c·∫£ ch√∫ng ta c·∫ßn l√† 2 th∆∞ m·ª•c <strong>components</strong> v√† <strong>screens</strong></p>\n<h2 id=\"t√°c-v√†-nh√≥m-code-l·∫°i-v·ªõi-nhau\"><a href=\"#t%C3%A1c-v%C3%A0-nh%C3%B3m-code-l%E1%BA%A1i-v%E1%BB%9Bi-nhau\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T√°c v√† nh√≥m code l·∫°i v·ªõi nhau</h2>\n<p>B√™n trong th∆∞ m·ª•c <em>components</em> ch√∫ng ta group files theo module/t√≠nh nƒÉng.</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src\n‚îî‚îÄ components\n  ‚îî‚îÄ User\n    ‚îú‚îÄ Form.jsx\n    ‚îî‚îÄ List.jsx</code></pre></div>\n<p>Khi component l√† k·∫øt h·ª£p c·ªßa nhi·ªÅu component l·∫°i ta gom c√°c file components v√†o 1 th∆∞ m·ª•c. Th√≠ d·ª• n·∫øu c√≥ th√™m file <code class=\"language-inline-text\">Form.css</code> ta s·∫Ω l√†m nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src\n‚îî‚îÄ components\n  ‚îî‚îÄ User\n    ‚îú‚îÄ Form\n    ‚îÇ ‚îú‚îÄ Form.jsx\n    ‚îÇ ‚îî‚îÄ Form.css\n    ‚îî‚îÄ List.jsx</code></pre></div>\n<h2 id=\"ui-components\"><a href=\"#ui-components\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>UI Components</h2>\n<p>B√™n trong th∆∞ m·ª•c <strong>components</strong> ta c√≥ th·ªÉ c√≥ th√™m th∆∞ m·ª•c <strong>UI</strong>, trong ƒë√¢y s·∫Ω ch·ª©a c√°c component d·∫°ng generic. Th·∫ø n√†o l√† component generic? l√† nh·ªØng component d·∫°ng gi·ªëng nh∆∞ nh·ªØng React UI Components c·ªßa Sematic UI, Office Fabric UI, Reactrap.</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src\n‚îî‚îÄ components\n  ‚îî‚îÄ UI</code></pre></div>\n<h2 id=\"ƒë·∫∑t-t√™n-components\"><a href=\"#%C4%91%E1%BA%B7t-t%C3%AAn-components\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒê·∫∑t t√™n components</h2>\n<p>Ch√∫ng ta ƒë√£ b√†n v·ªÅ c√°ch s·∫Øp x·∫øp th∆∞ m·ª•c v√† chia c√°c component ra d·∫°ng module. Gi·ªù c√≤n c√¢u h·ªèi l√† ƒë·∫∑t t√™n n√≥ sao?</p>\n<p>Nh∆∞ ƒë√£ n√≥i ·ªü tr√™n t√™n c·ªßa m·ªói component n√™n l√† duy nh·∫•t v√† g·ª£i h√¨nh, ƒë·ªçc xong c√≥ th·ªÉ h√¨nh dung ƒë∆∞·ª£c component ƒë√≥ d√πng ƒë·ªÉ l√†m g√¨. Vi·ªác n√†y c≈©ng r·∫•t c√≥ l·ª£i trong l√∫c debug b·∫±ng React Dev Tools.</p>\n<p>Pattern ƒë·ªÉ ƒë·∫∑t t√™n component <strong>ƒë∆∞·ªùng d·∫´n-t√™n file</strong>. Th√≠ d·ª• component ·ªü file <code class=\"language-inline-text\">components/User/List.jsx</code> th√¨ ƒë·∫∑t l√† <code class=\"language-inline-text\">UserList</code></p>\n<p>N·∫øu <code class=\"language-inline-text\">components/User/Form/Form.jsx</code> th√¨ kh√¥ng c·∫ßn ƒë·∫∑t l√† <code class=\"language-inline-text\">UserFormForm</code>, ch·ªâ c·∫ßn g·ªçi n√≥ l√† <code class=\"language-inline-text\">UserForm</code> trong tr∆∞·ªùng h·ª£p t√™n file c√πng t√™n v·ªõi th∆∞ m·ª•c ch·ª©a n√≥.</p>\n<p>L·ª£i √≠ch c·ªßa vi·ªác ƒë·∫∑t t√™n nh∆∞ v·∫≠y l√† gi√∫p ch√∫ng ta navigate ƒë·∫øn file ƒë√≥ r·∫•t nhanh, ƒëa ph·∫ßn c√°c editor 'x·ªãn' ƒë·ªÅu c√≥ th·ªÉ d√πng fuzzy search</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*vZO9Ci9a_lrfi2yTP9OiMA.png\"></p>\n<p>Tr√°nh l·∫∑p l·∫°i t√™n, ng√†y x∆∞a khi m·ªõi b·∫Øt ƒë·∫ßu ch√∫ng ta th∆∞·ªùng ƒë·∫∑t t√™n file r·∫•t l√† ƒë·∫ßy ƒë·ªß chu·∫©n kh√¥ng c·∫ßn ch·ªânh, tuy nhi√™n vi·ªác n√†y l√†m cho l√∫c <code class=\"language-inline-text\">import</code> r·∫•t d√†i d√≤ng, ƒë∆∞·ªùng d·∫´n d√†i c·∫£ c√¢y s·ªë. Trong tr∆∞·ªùng h·ª£p ·ªü tr√™n do <code class=\"language-inline-text\">Form</code> ƒëang n·∫±m trong <code class=\"language-inline-text\">User</code> th√¨ ta bi·∫øt ngay l√† <code class=\"language-inline-text\">FormUser</code> r·ªìi, kh√¥ng n√™n ƒë·∫∑t t√™n file l√† <code class=\"language-inline-text\">FormUser</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> ScreenUserForm <span class=\"token keyword\">from</span> <span class=\"token string\">'./screens/User/UserForm'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ƒë·∫•u v·ªõi</span>\n\n<span class=\"token keyword\">import</span> ScreenUserForm <span class=\"token keyword\">from</span> <span class=\"token string\">'./screens/User/Form'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>N·∫øu v√≠ d·ª• tr√™n ch∆∞a ƒë·ªß thuy·∫øt ph·ª•c, h√£y xem ti·∫øp th√™m m·ªôt v√≠ d·ª• kh√°ch</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> MediaPlanViewChannel <span class=\"token keyword\">from</span> <span class=\"token string\">'/MediaPlan/MediaPlanView/MediaPlanViewChannel.jsx'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> MediaPlanViewChannel <span class=\"token keyword\">from</span> <span class=\"token string\">'./MediaPlan/View/Channel'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"screens\"><a href=\"#screens\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Screens</h2>\n<p>N√£y c√≥ n√≥i th∆∞ m·ª•c <strong>screen</strong> m√† ch∆∞a gi·∫£i th√≠ch, screens s·∫Ω n∆°i ch·ª©a l√† nh·ªØng components ƒë∆∞·ª£c map v√†o cho <code class=\"language-inline-text\">route</code>, nh∆∞ screen ƒë·ªÉ t·∫°o user m·ªõi, reset password, ƒëƒÉng nh·∫≠p. Screen kh√¥ng n√™n ch·ª©a logic g√¨ c·∫£, 1 functional component, ch√∫ng ta s·∫Ω ƒë∆∞a screen v√†o m·ªôt th∆∞ m·ª•c h·∫≥n hoi ƒë·ªÉ d·ªÖ mapping ƒë√∫ng v·ªõi structure c·ªßa <code class=\"language-inline-text\">route</code> ch·ª© ch√∫ng ta kh√¥ng theo module</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src\n‚îú‚îÄ components \n‚îî‚îÄ screens\n  ‚îî‚îÄ User\n    ‚îú‚îÄ Form.jsx\n    ‚îî‚îÄ List.jsx</code></pre></div>\n<p>Ch√∫ng ta c√≥ file <code class=\"language-inline-text\">Route.jsx</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Router <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Redirect<span class=\"token punctuation\">,</span> Route<span class=\"token punctuation\">,</span> Switch <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> ScreensUserForm <span class=\"token keyword\">from</span> <span class=\"token string\">'./User/Form'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ScreensUserList <span class=\"token keyword\">from</span> <span class=\"token string\">'./User/List'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ScreensRoot</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/user/list<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ScreensUserList<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/user/create<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ScreensUserForm<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/user/:id<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ScreensUserForm<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> ScreensRoot<span class=\"token punctuation\">;</span></code></pre></div>\n<p>B·∫±ng c√°ch n√†y ch·ªâ c·∫ßn nh√¨n url ta c√≥ th·ªÉ trace ƒë∆∞·ª£c ƒëang d√πng component ·ªü th∆∞ m·ª•c n√†o</p>\n<p>V·ªÅ t√™n g·ªçi c·ªßa component trong th∆∞ m·ª•c screen n√†y,\nn·∫øu <code class=\"language-inline-text\">scr/screens/User/List.jsx</code> th√¨ ƒë·∫∑t t√™n l√† <code class=\"language-inline-text\">ScreensUserList</code>;</p>\n<p>N·∫øu b·∫°n ƒë·ªÉ √Ω th√¨ s·∫Ω th·∫•y 2 route <code class=\"language-inline-text\">create</code> v√† <code class=\"language-inline-text\">edit</code> ƒëang c√πng ƒë∆∞·ª£c render c√πng 1 component <code class=\"language-inline-text\">ScreensUserForm</code>, c√°i n√†y implement c≈©ng d·ªÉ th√¥i</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> UserForm <span class=\"token keyword\">from</span> <span class=\"token string\">'../../components/User/Form/Form'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ScreensUserForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">match</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> params <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token operator\">!</span>params<span class=\"token punctuation\">.</span>id <span class=\"token operator\">?</span> <span class=\"token string\">'Create'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Update'</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"> User\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">UserForm</span></span> <span class=\"token attr-name\">id</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>params<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> ScreensUserForm<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Th∆∞ m·ª•c cu·ªëi c√πng c√≥ nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src\n‚îú‚îÄ components \n‚îÇ  ‚îú‚îÄ User\n‚îÇ  ‚îÇ ‚îú‚îÄ Form\n‚îÇ  ‚îÇ ‚îÇ ‚îú‚îÄ Form.jsx\n‚îÇ  ‚îÇ ‚îÇ ‚îî‚îÄ Form.css\n‚îÇ  ‚îÇ ‚îî‚îÄ List.jsx\n‚îÇ  ‚îî‚îÄ UI \n‚îÇ\n‚îî‚îÄ screens\n  ‚îú‚îÄ User\n  ‚îÇ ‚îú‚îÄ Form.jsx\n  ‚îÇ ‚îî‚îÄ List.jsx\n  ‚îî‚îÄ Root.jsx</code></pre></div>\n<h2 id=\"k·∫øt-lu·∫≠n\"><a href=\"#k%E1%BA%BFt-lu%E1%BA%ADn\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>K·∫øt lu·∫≠n</h2>\n<p>Trong b√†i n√†y t√°c gi·∫£ s·∫Ω ch·ªâ ƒë·ªÅ t·∫≠p trung v√†o project s·ª≠ d·ª•ng React, ch∆∞a ƒë·ªÅ c·∫∑p t·ªõi Redux, b√†i sau c√≥.</p>\n<p>N·∫øu th√≠ch th√¨ c√≥ th·ªÉ c·∫£m ∆°n v√† follow t√°c gi·∫£ ƒë·ªÉ c√≥ th√™m nhi·ªÅu b√†i vi·∫øt hay ho kh√°c.</p>\n<p><a href=\"https://hackernoon.com/structuring-projects-and-naming-components-in-react-1261b6e18d76\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Link b√†i g·ªëc c·ªßa Vinicius Dacal</a></p>\n","cover_image":""}},{"node":{"id":"02a5a60cd7a087f460f4ccfd777912ea","title":"S·ª≠ d·ª•ng Middleware v·ªõi Redux d√†nh cho ng∆∞·ªùi m·ªõi b·∫Øt ƒë·∫ßu","path":"/2018-06-18-huong-dan-tim-hieu-middleware-va-redux/","date":"2018-06-18","timeToRead":5,"desc":"N·∫øu ƒë√£ n·∫Øm r√µ redux, b∆∞·ªõc ti·∫øp theo ph·∫£i t√¨m hi·ªÉu l√† middleware","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#middleware-l%C3%A0-g%C3%AC\">Middleware l√† g√¨</a></li>\n<li><a href=\"#t%E1%BA%A1i-sao-v%C3%A0-t%E1%BA%A1i-sao\">T·∫°i sao v√† t·∫°i sao</a></li>\n<li>\n<p><a href=\"#m%E1%BB%99t-s%E1%BB%91-%E1%BB%A9ng-d%E1%BB%A5ng-c%E1%BB%A7a-middleware\">M·ªôt s·ªë ·ª©ng d·ª•ng c·ªßa Middleware</a></p>\n<ul>\n<li><a href=\"#loging\">Loging</a></li>\n<li><a href=\"#%C4%91%E1%BB%A3i-user-confirm\">ƒê·ª£i user confirm</a></li>\n</ul>\n</li>\n<li><a href=\"#m%E1%BB%99t-s%E1%BB%91-l%E1%BB%B1a-ch%E1%BB%8Dn\">M·ªôt s·ªë l·ª±a ch·ªçn</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"middleware-l√†-g√¨\"><a href=\"#middleware-l%C3%A0-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Middleware l√† g√¨</h2>\n<p>Nghe t√™n th√¨ h∆°i ph·ª©c t·∫°p nh∆∞ng th·ª±c s·ª± n√≥ ƒë∆°n gi·∫£n l·∫Øm, n√≥ l√† m·ªôt h√†m s·∫Ω modify v√† ƒë∆∞·ª£c g·ªçi tr∆∞·ªõc khi action ƒë∆∞·ª£c dispatch.</p>\n<p>M√¥ ph·ªèng qu√° tr√¨nh ho·∫°t ƒë·ªông kh√¥ng c√≥ middleware</p>\n<p><img src=\"https://viblo.asia/uploads/5c72ff3e-859a-457a-ae11-e1392baa90af.gif\"></p>\n<p>v√† khi √°p d·ª•ng middleware</p>\n<p><img src=\"https://viblo.asia/uploads/8ff8bd43-308a-47da-b382-891adae237d2.gif\"></p>\n<h2 id=\"t·∫°i-sao-v√†-t·∫°i-sao\"><a href=\"#t%E1%BA%A1i-sao-v%C3%A0-t%E1%BA%A1i-sao\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·∫°i sao v√† t·∫°i sao</h2>\n<p>Trong th·∫ø gi·ªõi c·ªßa Rect, Redux l√† l·ª±a ch·ªçn ƒë∆∞·ª£c ∆∞a chu·ªông ƒë·ªÉ c√≥ m·ªôt container ch·ª©a ch·ªâ ch·ª©a state. √ù t∆∞·ªüng ch√≠nh c·ªßa redux l√† t·∫•t c·∫£ nh·ªØng logic c·ªßa app th√¨ ƒë∆∞a v√†o <strong>reducers</strong>, l√† nh·ªØng function nh·∫≠n v√†o 1 <code class=\"language-inline-text\">state</code>, 1 <code class=\"language-inline-text\">action</code> v√† tr·∫£ v·ªÅ <code class=\"language-inline-text\">state</code> m·ªõi. <strong>Reducers</strong> bu·ªôc ph·∫£i l√† <em>pure function</em> kh√¥ng ph·ª• thu·ªôc v√† ch·ªânh s·ª≠a global state, ƒë·ªÉ m√† d·ªÖ test, d·ªÉ refactor, performance t·ªët h∆°n.</p>\n<p>Th√≠ d·ª• 1 redux store l∆∞u gi√° tr·ªã counter</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> redux <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">counter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'INCREMENT'</span><span class=\"token operator\">:</span>\n            <span class=\"token keyword\">return</span> state <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> redux<span class=\"token punctuation\">.</span><span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>counter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>N·∫øu ƒë·ªÉ √Ω ch√∫ng ta c√≥ th·ªÉ th·∫•y redux c√≥ 2 r√†ng bu·ªôc</p>\n<ol>\n<li><strong>Reducers</strong> PH·∫¢I l√† h√†m sync, tr·∫£ v·ªÅ <code class=\"language-inline-text\">state</code> m·ªõi</li>\n<li>Do kh√¥ng ƒë∆∞·ª£c thay ƒë·ªïi global state, reducers kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng nh·ªØng h√†m nh∆∞ <code class=\"language-inline-text\">setInterval()</code></li>\n</ol>\n<p>Th√≠ d·ª• ch√∫ng ta l√†m m·ªôt c√°i app ƒë·ªÉ b·∫•m th·ªùi gian, sau khi user b·∫•m stop hi·ªÉn th·ªã gi√° tr·ªã th·ªùi gian ƒë√£ ch·∫°y v√† sau ƒë√≥ l∆∞u l·∫°i tr√™n server b·∫±ng HTTP request. Chuy·ªán g√¨ s·∫Ω x·∫£y ra khi ta ƒëang mu·ªën quƒÉng m·ªôt h√†m ch·∫°y async?</p>\n<p>Reducer c·ªßa ch√∫ng ta c·∫ßn listen 3 actions:</p>\n<ol>\n<li><code class=\"language-inline-text\">START_TIMER</code>, khi b·∫Øt ƒë·∫ßu t√≠nh th·ªùi gian</li>\n<li><code class=\"language-inline-text\">STICK</code>, khi ta thay ƒë·ªïi gi√° tr·ªã hi·ªán t·∫°i</li>\n<li><code class=\"language-inline-text\">STOP_TIMER</code> khi ch√∫ng ta kh√¥ng nh·∫≠n ƒë∆∞·ª£c action <code class=\"language-inline-text\">TICK</code> n√†o n·ªØa</li>\n</ol>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">stopWatch</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'START_TIMMER'</span><span class=\"token operator\">:</span>\n            <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">startTime</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">elapsed</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'TICK'</span><span class=\"token operator\">:</span>\n            <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">elapsed</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>currentTime <span class=\"token operator\">-</span> state<span class=\"token punctuation\">.</span>startTime<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token string\">'STOP_TIMER'</span><span class=\"token operator\">:</span>\n            <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> redux<span class=\"token punctuation\">.</span><span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>stopWatch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Khi user click button start, ch√∫ng ta dispatch event <code class=\"language-inline-text\">START_TIMER</code>, khi user click stop, ta dispatch <code class=\"language-inline-text\">STOP_TIMMER</code></p>\n<p>V·∫•n ƒë·ªÅ l√† l√†m sao dispatch <code class=\"language-inline-text\">TICK</code>, n·∫øu ch√∫ng ta g·ªçi <code class=\"language-inline-text\">setInterval()</code> trong <code class=\"language-inline-text\">START_TIMER</code> th√¨ l√∫c ƒë√≥ ch√∫ng ta ƒë√£ thay ƒë·ªïi global state v√† vi ph·∫°m best practices c·ªßa redux. Ch·ªï th√≠ch h·ª£p nh·∫•t ƒë·ªÉ dispatch <code class=\"language-inline-text\">TICK</code> l√† ·ªü middleware</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">timerMiddleware</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">next</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">action</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'START_TIMER'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        action<span class=\"token punctuation\">.</span>interval <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> store<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'TICK'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">currentTime</span><span class=\"token operator\">:</span> Date<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'STOP_TIMER'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>interval<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">stopWatch</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'START_TIMER'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">startTime</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">elapsed</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">interval</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>interval\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'TICK'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">elapsed</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>currentTime <span class=\"token operator\">-</span> state<span class=\"token punctuation\">.</span>startTime <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'STOP_TIMER'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">interval</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> middleware <span class=\"token operator\">=</span> redux<span class=\"token punctuation\">.</span><span class=\"token function\">applyMiddleware</span><span class=\"token punctuation\">(</span>timerMiddleware<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> redux<span class=\"token punctuation\">.</span><span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>stopWatch<span class=\"token punctuation\">,</span> middleware<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Syntax c·ªßa redux middleware l√† ƒëi·ªÅu c·∫ßn ph·∫£i b√†n t·ªõi: 1 middleware function l√† 1 function return 1 function return 1 function. Nh·∫•t ƒë·∫ßu gh√™ ch∆∞a. Th·∫≠t ra ƒëang d√πng currying function trong javascript (<a href=\"https://luubinhan.github.io/blog/2018-03-02-gioi-thieu-higher-order-component-trong-react\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ƒë·ªçc c√†-ri function ·ªü ƒë√¢y</a>). Function ƒë·∫ßu ti√™n nh·∫≠n v√†o <code class=\"language-inline-text\">store</code> l√†m parameter, function th·ª© 2 s·∫Ω nh·∫≠n function <code class=\"language-inline-text\">next</code> l√†m parameter, v√† function th·ª© 3 nh·∫≠n dispatch <code class=\"language-inline-text\">action</code> l√†m parameter. <code class=\"language-inline-text\">store</code> v√† <code class=\"language-inline-text\">action</code> l√† gi√° tr·ªã store v√† dispatch action hi·ªán t·∫°i. Chi·∫øc ƒë≈©a thu·∫ßn k·ª≥ ·ªü ƒë√¢y ch√≠nh l√† function <code class=\"language-inline-text\">next</code>, b·∫°n c√≥ th·ªÉ g·ªçi n√≥ l√† \"sau khi middleware ch·∫°y xong, truy·ªÅn c√°i c√°i action n√†y cho middleware k·∫ø ti·∫øp\". N√≥i c√°ch kh√°c, middleware c√≥ th·ªÉ l√† h√†m async.</p>\n<p>Ti·∫øp theo ch√∫ng ta s·∫Ω l∆∞u gi√° tr·ªã sau khi user click stop l√™n server.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">promiseMiddleware</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">next</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">action</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ki·ªÉm tra payload n·∫øu l√† promise th√¨ ƒë·ª£i n√≥ resolve</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>payload <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">typeof</span> action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">.</span>then <span class=\"token operator\">===</span> <span class=\"token string\">'function'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        action<span class=\"token punctuation\">.</span>payload<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n            <span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> action<span class=\"token punctuation\">.</span>payload <span class=\"token operator\">=</span> res<span class=\"token punctuation\">;</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> action<span class=\"token punctuation\">.</span>error <span class=\"token operator\">=</span> err<span class=\"token punctuation\">;</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> middleware <span class=\"token operator\">=</span> redux<span class=\"token punctuation\">.</span><span class=\"token function\">applyMiddleware</span><span class=\"token punctuation\">(</span>timerMiddleware<span class=\"token punctuation\">,</span> promiseMiddleware<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> redux<span class=\"token punctuation\">.</span><span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>stopWatch<span class=\"token punctuation\">,</span> middleware<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Khi g·ªüi l√™n m·ªôt HTTP request, ch√∫ng ta s·∫Ω g·ªüi request n√†y ·ªü d·∫°ng <code class=\"language-inline-text\">promise</code>, <code class=\"language-inline-text\">promiseMiddelware</code> s·∫Ω ƒë·ª©ng ƒë·ª£i promise n√†y c√≥ gi√° tr·ªã tr·∫£ v·ªÅ th√¨ m·ªõi g·ªçi <code class=\"language-inline-text\">next(action)</code></p>\n<p>Ta s·∫Ω g·ªüi l√™n server b·∫±ng <code class=\"language-inline-text\">axios</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span><span class=\"token punctuation\">;</span>\n\nstore<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'SAVE_TIME'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">payload</span><span class=\"token operator\">:</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/save'</span><span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Reducer listen <code class=\"language-inline-text\">SAVE_TIME</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">stopwatch</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'START_TIMER'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">startTime</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">elapsed</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">interval</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>interval\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'TICK'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">elapsed</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>currentTime <span class=\"token operator\">-</span> state<span class=\"token punctuation\">.</span>startTime <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'STOP_TIMER'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">interval</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'SAVE_TIME'</span><span class=\"token operator\">:</span>\n      <span class=\"token comment\">// If there was an error, set the error property on the state</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> action<span class=\"token punctuation\">.</span>error <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token comment\">// Otherwise, clear all the timer state</span>\n      <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">startTime</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">elapsed</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"m·ªôt-s·ªë-·ª©ng-d·ª•ng-c·ªßa-middleware\"><a href=\"#m%E1%BB%99t-s%E1%BB%91-%E1%BB%A9ng-d%E1%BB%A5ng-c%E1%BB%A7a-middleware\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>M·ªôt s·ªë ·ª©ng d·ª•ng c·ªßa Middleware</h2>\n<h3 id=\"loging\"><a href=\"#loging\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Loging</h3>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">loggerMiddleware</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">next</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">action</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"ƒë·ª£i-user-confirm\"><a href=\"#%C4%91%E1%BB%A3i-user-confirm\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒê·ª£i user confirm</h3>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">confirmationMiddleware</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">store</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">next</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">action</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>shouldConfirm<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Are you sure?'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">next</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"m·ªôt-s·ªë-l·ª±a-ch·ªçn\"><a href=\"#m%E1%BB%99t-s%E1%BB%91-l%E1%BB%B1a-ch%E1%BB%8Dn\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>M·ªôt s·ªë l·ª±a ch·ªçn</h2>\n<p>M·ªôt s·ªë th∆∞ vi·ªán ƒë·ªÉ l√†m vi·ªác v·ªõi middleware cho Redux r·∫•t ph·ªï bi·∫øn c√≥ th·ªÉ tham kh·∫£o l√† <code class=\"language-inline-text\">redux-thunk</code>, <code class=\"language-inline-text\">redux-saga</code>, <code class=\"language-inline-text\">redux-observable</code></p>\n<p><a href=\"https://www.codementor.io/vkarpov/beginner-s-guide-to-redux-middleware-du107uyud\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Link b√†i g·ªëc c·ªßa t√°c gi·∫£ Vkarpov</a></p>\n<p>Tham kh·∫£o th√™m:</p>\n<ul>\n<li><a href=\"https://github.com/gothinkster/react-redux-realworld-example-app/blob/master/src/middleware.js\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Realworld example s·ª≠ d·ª•ng redux, middleware</a></li>\n<li><a href=\"https://medium.com/@meagle/understanding-87566abcfb7a\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">T√¨m hi·ªÉu Middleware c·ªßa t√°c gi·∫£ Mark</a></li>\n<li><a href=\"https://redux.js.org/api-reference/applymiddleware\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">applyMiddleware</a></li>\n</ul>\n","cover_image":""}},{"node":{"id":"67122717b0acf53933fa6e376df98e0c","title":"L√†m vi·ªác v·ªõi CSS Modules trong React","path":"/2018-06-15-huong-dan-lam-viec-voi-css-module/","date":"2018-06-15","timeToRead":3,"desc":"Sau r·∫•t nhi·ªÅu nƒÉm ki·∫øm c∆°m v·ªõi CSS, v√† hi·ªán t·∫°i v·∫´n th·∫ø, CSS v·∫´n lu√¥n l√† ni·ªÅm h·ª©ng th√∫ c·ªßa c√° nh√¢n m√¨nh. Ng√†y n·∫£y ng√†y nay ƒë·ªÉ l√†m vi·ªác v·ªõi Component c·ªßa React, ch√∫ng ta s·∫Ω c√≥ nhi·ªÅu l·ª±a ch·ªçn h∆°n khi 'CSS trong JS' ƒëang l√† l·ª±a ch·ªçn h√†ng ƒë·∫ßu. Trong th·ªùi ƒë·∫°i c·ªßa component ph·ªß s√≥ng kh·∫Øp c√°c m·∫∑t tr·∫≠n, CSS Modules h·ª©a hi·ªán l√† m√≥n ngon","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#css-modules-l%C3%A0-g%C3%AC\">CSS modules l√† g√¨</a></li>\n<li><a href=\"#x%C3%B3a-style-%C4%91%E1%BA%A7y-t%E1%BB%B1-tin\">X√≥a style ƒë·∫ßy t·ª± tin</a></li>\n<li><a href=\"#m%E1%BB%99t-v%C3%A0i-l%E1%BB%B1a-ch%E1%BB%8Dn-n%C3%A2ng-cao\">M·ªôt v√†i l·ª±a ch·ªçn n√¢ng cao</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"css-modules-l√†-g√¨\"><a href=\"#css-modules-l%C3%A0-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>CSS modules l√† g√¨</h2>\n<p>D·ª±a v√†o c√°i t√™n ch·∫Øc ph·∫ßn n√†o c≈©ng ƒëo√°n ƒë∆∞·ª£c, n√≥ l√† ki·ªÉu vi·∫øt module h√≥a stylesheet th√†nh t·ª´ng file nh·ªè, kh√¥ng c√≤n s·ª≠ d·ª•ng m·ªôt file stylesheet t·∫≠p trung n·ªØa. Th√™m v√†o ƒë√≥, t·∫•t c·∫£ t√™n class l√∫c n√†y s·∫Ω ƒë∆∞·ª£c scope l·∫°i local, c√≥ th·∫ø vi·∫øt b·∫±ng vanilla CSS hay SCSS (l·ª±a ch·ªçn h√†ng ƒë·∫ßu c·ªßa c√°c frontend ch·∫•t).</p>\n<p>file Button.scss</p>\n<div class=\"gridsome-highlight\" data-language=\"scss\"><pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token selector\">.button </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 8px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> blue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>file Button.js</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">'./Button.scss'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Button</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">An Luu Blog</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>V·ªõi c√°ch vi·∫øt n√†y, class <code class=\"language-inline-text\">.button</code> l√∫c tr·∫£ v·ªÅ s·∫Ω l√† <code class=\"language-inline-text\">button-[hash string ·ªü ƒë√¢y]</code>, n√™n s·∫Ω kh√¥ng s·ª£ b·ªã tr√πng t√™n, ch·∫Øc ch·∫Øn kh√¥ng g√¢y side effect l√™n c√°c component kh√°c v√¨ ch·∫£ bao gi·ªù trung t√™n ƒë√¢u.</p>\n<p>M·ªôt l·ª£i √≠ch kh√°c l√† khi vi·∫øt ta c√≥ th·ªÉ vi·∫øt <code class=\"language-inline-text\">.my-class-name</code> ki·ªÉu kebab case, nh∆∞ng khi vi·∫øt js ch√∫ng ta c√≥ l·∫°i th√≠ch transform th√†nh <code class=\"language-inline-text\">styles.myClassName</code> theo ki·ªÉu camel case.</p>\n<p>CSS module tho·∫°t th√¨ th·∫•y kh√¥ng c√≥ chi ƒë·∫∑c bi·ªát, ƒë∆°n gi·∫£n ch·ªâ l√† th·∫ø th√¥i, nh∆∞ng l·ª£i √≠ch c·ªßa vi·ªác n√†y l√† gi√∫p ch√∫ng ta r·∫•t d·ªÖ maintain stylesheet v√¨ n√≥ bu·ªôc khi ch√∫ng ta vi·∫øt css ph·∫£i ƒë∆°n gi·∫£n nh·∫•t c√≥ th·ªÉ.</p>\n<h2 id=\"x√≥a-style-ƒë·∫ßy-t·ª±-tin\"><a href=\"#x%C3%B3a-style-%C4%91%E1%BA%A7y-t%E1%BB%B1-tin\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>X√≥a style ƒë·∫ßy t·ª± tin</h2>\n<p>Th√≠ch nh·∫•t l√† vi·∫øt feature m·ªõi v√† ƒë·∫≠p b·ªè c√°i code chu·ªëi c·∫£ n√£y h·ªìi x∆∞a. Ph·∫ßn kh√≥ nh·∫•t l√† g√¨? L√†m sao bi·∫øt ƒë∆∞·ª£c x√≥a c√°i style c≈© n√†y ƒëi c√≥ b·ªã g√¨ kh√¥ng? L·ª° ƒë√¢u ƒëang x√†i ƒë√¢u ƒë√≥.</p>\n<p>·ªû c√°i <code class=\"language-inline-text\">Button</code> v√≠ d·ª• tr√™n, ph·∫ßn stylesheet v√† component g·∫ßn nh∆∞ l√† g·∫Øn ch·∫∑t v√†o nhau nh∆∞ h√¨nh v·ªõi b√≥ng, m·ªëi quan h·ªá m·ªôt-m·ªôt gi·ªØa component v√† style sheet ƒë√≥ l√† m·ªôt quy ∆∞·ªõc cho m·ªôt component ƒë∆∞·ª£c vi·∫øt t·ªët, file style sheet ƒë√≥ ch·ªâ ph·ª•c v·ª• cho ƒë√∫ng component ƒë√≥, n·∫øu m√† l·ª° x√≥a file stylesheet ho·∫∑c class n√†o m√† ƒëang s·ª≠ d·ª•ng, ch·∫Øc ch·∫Øn qu√° tr√¨nh build s·∫Ω b√°o ngay l·ªói cho ch√∫ng ta bi·∫øt l·ª° x√≥a ph·∫ßn n√†o.</p>\n<h2 id=\"m·ªôt-v√†i-l·ª±a-ch·ªçn-n√¢ng-cao\"><a href=\"#m%E1%BB%99t-v%C3%A0i-l%E1%BB%B1a-ch%E1%BB%8Dn-n%C3%A2ng-cao\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>M·ªôt v√†i l·ª±a ch·ªçn n√¢ng cao</h2>\n<p>Nh·ªØng th∆∞ vi·ªán CSS-trong-JS n√¢ng cao nh∆∞ styled-components hay emotion c≈©ng ƒë∆∞·ª£c nhi·ªÅu front-end ch·∫•t x√†i, cung c·∫•p nhi·ªÅu t√≠nh nƒÉng t√¢n ti·∫øn h∆°n, n·∫øu kh√¥ng ng·∫°i h·ªçc th√™m v√† t√¨m hi·ªÉu c√°ch ho·∫°t ƒë·ªông th√¨ c≈©ng l√† l·ª±a ch·ªçn kh√¥ng ƒë·∫øn n·ªïi.</p>\n<p>V·ªõi ki·ªÉu vi·∫øt CSS Module v·ªõi Vanilla CSS hay SCSS ƒë√£ ƒë∆∞·ª£c t√≠n nhi·ªám t·ª´ nhi·ªÅu nƒÉm qua, b√™n c·∫°nh ƒë√≥ th√¨ SCSS c√≤n c√≥ bi·∫øn n√®, ki·ªÉu vi·∫øt nesting r·∫•t ti·ªán l·ª£i n√®,... th√¨ th·∫≠t ra ch·ªâ s·ª≠ d·ª•ng SCSS th√¥i c≈©ng ƒë√£ l√† ƒë·ªß</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">'./App.scss'</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>log ra xem c√≥ c√°i m·ª£ g√¨</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*o9VrQ1idA8SqwJ_o6TL9Hg.png\"></p>\n<p>B√†i d·ªãch c·ªßa t√°c gi·∫£: Spencer Miskoviak</p>\n<p><a href=\"https://medium.com/@skovy/writing-maintainable-styles-and-components-with-css-modules-308a9216a6c2\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Link b√†i g·ªëc</a></p>\n<p><a href=\"https://medium.com/@kswanie21/css-modules-sass-in-create-react-app-37c3152de9\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://medium.com/@kswanie21/css-modules-sass-in-create-react-app-37c3152de9</a></p>\n","cover_image":""}},{"node":{"id":"4be93db6e537bdcb646a0586abd148e5","title":"Kinh nghi·ªám t·ªï ch·ª©c file v√† th∆∞ m·ª•c React project","path":"/2018-06-08-huong-dan-kinh-nghiem-lam-viec-voi-du-an-lon/","date":"2018-06-08","timeToRead":5,"desc":"C√≥ bao gi·ªù c·∫£m th·∫•y l·∫°c l·ªëi trong ƒë√≥ng code ng√†y c√†ng l√∫c b·ª± ra, m·ªôt v√†i tip t·ª´ ng∆∞·ªùi c√≥ kinh nghi·ªám","content":"<!-- TOC -->\n<ul>\n<li>\n<p><a href=\"#th%C6%B0-m%E1%BB%A5c\">Th∆∞ m·ª•c</a></p>\n<ul>\n<li><a href=\"#api\">/api</a></li>\n<li><a href=\"#assets\">/assets</a></li>\n<li><a href=\"#components\">components</a></li>\n<li><a href=\"#lang\">/lang</a></li>\n<li><a href=\"#lib\">/lib</a></li>\n<li><a href=\"#store\">/store</a></li>\n<li><a href=\"#styles\">/styles</a></li>\n<li><a href=\"#view\">/view</a></li>\n</ul>\n</li>\n<li><a href=\"#cu%E1%BB%99c-chi%E1%BA%BFn-v%E1%BB%9Bi-css\">Cu·ªôc chi·∫øn v·ªõi CSS</a></li>\n<li><a href=\"#m%E1%BB%99t-s%E1%BB%91-th%C6%B0-vi%E1%BB%87n-th%C6%B0%E1%BB%9Dng-s%E1%BB%AD-d%E1%BB%A5ng\">M·ªôt s·ªë th∆∞ vi·ªán th∆∞·ªùng s·ª≠ d·ª•ng</a></li>\n</ul>\n<!-- /TOC -->\n<p>C√°ch t·ªï ch·ª©c project th√¨ kh√¥ng ph·∫£i l√† rule, m·ªói ng∆∞·ªùi m·ªói ki·ªÉu, ch·ªâ l√† m·ªôt v√†i c√¢n nh·∫Øc ƒë·ªÉ qu·∫£n l√Ω code t·ªët h∆°n.</p>\n<h2 id=\"th∆∞-m·ª•c\"><a href=\"#th%C6%B0-m%E1%BB%A5c\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Th∆∞ m·ª•c</h2>\n<p>ƒê√¢y l√† th∆∞ m·ª•c project hi·ªán t·∫°i c·ªßa t√°c gi·∫£ b√†i vi·∫øt n√†y</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/600/1*vStBUv5egjAAb1XNWeVSRA.png\"></p>\n<p>Gi·∫£i th√≠ch c·ªßa t√°c gi·∫£ v·ªÅ c√°ch t·ªï ch·ª©c n√†y</p>\n<h3 id=\"api\"><a href=\"#api\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>/api</h3>\n<p>N∆°i ch·ª©a nh·ªØng functions ƒë·∫£m nhi·ªám chuy·ªán g·ªçi API</p>\n<h3 id=\"assets\"><a href=\"#assets\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>/assets</h3>\n<p>N∆°i ch·ª©a external resource</p>\n<h3 id=\"components\"><a href=\"#components\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>components</h3>\n<p>T·∫•t c·∫£ component ƒë∆∞·ª£c s·ª≠ d·ª•ng t·ª´ 2 l·∫ßn tr·ªü l√™n s·∫Ω n·∫±m ·ªü ƒë√¢y. M·ªói component l√† m·ªôt th∆∞ m·ª•c bao g·ªìm <code class=\"language-inline-text\">index.js</code> ƒë·ªÉ export, <code class=\"language-inline-text\">styles.module.scss</code> stylesheet k√®m theo c·ªßa component, ·ªü ƒë√¢y quan ƒëi·ªÉm c·ªßa m√¨nh l√† n√™n c√≥ m·ªôt file l√† <code class=\"language-inline-text\">ExampleComponent.js</code>, l√Ω do ƒë·ªÉ l√∫c code m√¨nh c√≥ th·ªÉ tr·ªè ngay ƒë·∫øn t√™n file theo c√°ch ƒë·∫∑t t√™n component = t√™n file nh∆∞ v·∫≠y, n·∫øu component n√†o c≈©ng <code class=\"language-inline-text\">index.js</code> th√¨ m·ªü ch·ª´ng ch·ª•c file <code class=\"language-inline-text\">index.js</code> nh∆∞ v·∫≠y tr√™n VSCode s·∫Ω ch·∫≥ng th·ªÉ bi·∫øt ƒëang s·ª≠a th·∫±ng n√†o.</p>\n<h3 id=\"lang\"><a href=\"#lang\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>/lang</h3>\n<p>Th∆∞ m·ª•c n√†y ch·ªâ c√≥ khi ·ª©ng d·ª•ng c·ªßa m√¨nh h·ªó tr·ª£ ƒëa ng√¥n ng·ªØ. T√°c gi·∫£ ƒëang s·ª≠ d·ª•ng i18n-js cho ƒëa ng√¥n ng·ªØ, v√¨ n√≥ d·ªÖ x√†i</p>\n<p>File <code class=\"language-inline-text\">index.js</code> c·ªßa lang</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> i18n <span class=\"token keyword\">from</span> <span class=\"token string\">'i18n-js'</span>\n\n<span class=\"token keyword\">import</span> en <span class=\"token keyword\">from</span> <span class=\"token string\">'./locales/en'</span>\n<span class=\"token keyword\">import</span> es <span class=\"token keyword\">from</span> <span class=\"token string\">'./locales/es'</span>\n<span class=\"token keyword\">import</span> pt <span class=\"token keyword\">from</span> <span class=\"token string\">'./locales/pt'</span>\n\ni18n<span class=\"token punctuation\">.</span>translations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  en<span class=\"token punctuation\">,</span>\n  es<span class=\"token punctuation\">,</span>\n  pt<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\ni18n<span class=\"token punctuation\">.</span>fallbacks <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> i18n<span class=\"token punctuation\">.</span>t\n\n<span class=\"token keyword\">export</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./locales/keys'</span></code></pre></div>\n<p><img src=\"https://cdn-images-1.medium.com/max/600/1*vStBUv5egjAAb1XNWeVSRA.png\" alt=\"Gi·ªëng h√¨nh tr√™n th√¥i, ƒë·ª° ph·∫£i scroll l√™n\"></p>\n<h3 id=\"lib\"><a href=\"#lib\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>/lib</h3>\n<p>Ch·ª©a nh·ªØng file helper, utils, validation,...</p>\n<h3 id=\"store\"><a href=\"#store\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>/store</h3>\n<p>D√†nh cho ng∆∞·ªùi x√†i Redux, ch∆∞a s·ª≠ d·ª•ng MobX nhi·ªÅu, c√≥ th·ªÉ s·∫Ω kh√°c. B√™n trong n√†y s·∫Ω c√≥ nh·ªØng th∆∞ m·ª•c con</p>\n<ul>\n<li><strong>/actions</strong> ch·ª©a action creators</li>\n<li><strong>/definitions</strong> hay <strong>/actionTypes</strong></li>\n<li><strong>/reducers</strong> trong ƒë√¢y m·ªói reducer s·∫Ω l√† 1 file ri√™ng bi·ªát, file index.js s·∫Ω combine t·∫•t c·∫£ export l·∫°i. Ho·∫∑c <strong>/sagas</strong> n·∫øu d√πng redux saga</li>\n</ul>\n<p>File <code class=\"language-inline-text\">index.js</code> c·ªßa th∆∞ m·ª•c store</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createStore<span class=\"token punctuation\">,</span> applyMiddleware <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span>\n\n<span class=\"token keyword\">import</span> createSagaMiddleware <span class=\"token keyword\">from</span> <span class=\"token string\">'redux-saga'</span>\n<span class=\"token keyword\">import</span> loggerMiddleware <span class=\"token keyword\">from</span> <span class=\"token string\">'redux-logger'</span>\n\n<span class=\"token keyword\">import</span> combinedReducer <span class=\"token keyword\">from</span> <span class=\"token string\">'src/store/reducers'</span>\n<span class=\"token keyword\">import</span> rootSaga <span class=\"token keyword\">from</span> <span class=\"token string\">'src/store/sagas'</span>\n\n<span class=\"token keyword\">const</span> sagaMiddleware <span class=\"token operator\">=</span> <span class=\"token function\">createSagaMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nsagaMiddleware<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>rootSaga<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>\n  combinedReducer<span class=\"token punctuation\">,</span>\n  <span class=\"token function\">applyMiddleware</span><span class=\"token punctuation\">(</span>\n    sagaMiddleware<span class=\"token punctuation\">,</span>\n    loggerMiddleware<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"styles\"><a href=\"#styles\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>/styles</h3>\n<p>Ch·ª©a common style</p>\n<h3 id=\"view\"><a href=\"#view\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>/view</h3>\n<p>Trong component th√¨ ta ƒë·ªÉ m·∫•y component ƒë·ªÉ hi·ªÉn th·ªã, pure component, th∆∞ m·ª•c view n√†y th√¨ ch·ª©a container component.</p>\n<p>File <code class=\"language-inline-text\">index.js</code> c·ªßa th∆∞ m·ª•c n√†y ch√∫ng ta s·∫Ω export to√†n b·ªô m·∫•y c√°i view ƒë·ªÉ ta ƒë∆∞a n√≥ v√¥ <code class=\"language-inline-text\">router</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  BrowserRouter<span class=\"token punctuation\">,</span>\n  Route<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n\n<span class=\"token keyword\">import</span> Home <span class=\"token keyword\">from</span> <span class=\"token string\">'./Home'</span>\n<span class=\"token keyword\">import</span> Settings <span class=\"token keyword\">from</span> <span class=\"token string\">'./Settings'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BrowserRouter</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.Fragment</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Home<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/settings<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Settings<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.Fragment</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">BrowserRouter</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"cu·ªôc-chi·∫øn-v·ªõi-css\"><a href=\"#cu%E1%BB%99c-chi%E1%BA%BFn-v%E1%BB%9Bi-css\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Cu·ªôc chi·∫øn v·ªõi CSS</h2>\n<p>C√≥ t·ªõi c·∫£ trƒÉm b√†i vi·∫øt v√† tranh lu·∫≠n xung quanh s·ª≠ d·ª•ng CSS trong React. T√°c gi·∫£ b√†i vi·∫øt n√†y th√≠ch CSS module, ch∆∞a th·∫•y ƒë∆∞·ª£c l√Ω do t·∫°i sao d√πng Styled Components.</p>\n<p>L√Ω do th√≠ch CSS module? Tuy kh√¥ng ph·∫£i l√∫c n√†o c≈©ng gi·∫£i quy·∫øt ƒë∆∞·ª£c m·ªçi v·∫•n ƒë·ªÅ v·ªõi CSS module, n√™n vi·ªác s·ª≠ d·ª•ng k·∫øt h·ª£p gi·ªØa CSS module v√† global import style l√† s·ª± l·ª±a ch·ªçn c·ªßa t√°c gi·∫£</p>\n<p>ƒê√¢y l√† c√°ch config SASS trong webpack</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(?&lt;!\\.module)\\.scss$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'style-loader'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'css-loader'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">importLoaders</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'postcss-loader'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Necessary for external CSS imports to work</span>\n        <span class=\"token comment\">// https://github.com/facebookincubator/create-react-app/issues/2677</span>\n        <span class=\"token literal-property property\">ident</span><span class=\"token operator\">:</span> <span class=\"token string\">'postcss'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n          <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'postcss-flexbugs-fixes'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token function\">autoprefixer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">browsers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n              <span class=\"token string\">'>1%'</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">'last 4 versions'</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">'Firefox ESR'</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">'not ie &lt; 9'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// React doesn't support IE8 anyway</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">flexbox</span><span class=\"token operator\">:</span> <span class=\"token string\">'no-2009'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sass-loader'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">test</span><span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.module\\.scss$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">use</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'style-loader'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'css-loader'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">importLoaders</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">modules</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">localIdentName</span><span class=\"token operator\">:</span> <span class=\"token string\">'[local]__[hash:base64:5]'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'postcss-loader'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Necessary for external CSS imports to work</span>\n        <span class=\"token comment\">// https://github.com/facebookincubator/create-react-app/issues/2677</span>\n        <span class=\"token literal-property property\">ident</span><span class=\"token operator\">:</span> <span class=\"token string\">'postcss'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n          <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'postcss-flexbugs-fixes'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token function\">autoprefixer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">browsers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n              <span class=\"token string\">'>1%'</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">'last 4 versions'</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">'Firefox ESR'</span><span class=\"token punctuation\">,</span>\n              <span class=\"token string\">'not ie &lt; 9'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// React doesn't support IE8 anyway</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">flexbox</span><span class=\"token operator\">:</span> <span class=\"token string\">'no-2009'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">loader</span><span class=\"token operator\">:</span> require<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sass-loader'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>S·ª≠ d·ª•ng css module trong component</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> classNames <span class=\"token keyword\">from</span> <span class=\"token string\">'classnames'</span>\n\n<span class=\"token keyword\">import</span> styles <span class=\"token keyword\">from</span> <span class=\"token string\">'./styles.module.scss'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> negative <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> surname <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n    <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token function\">classNames</span><span class=\"token punctuation\">(</span>\n      styles<span class=\"token punctuation\">[</span><span class=\"token string\">'name-container'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      negative <span class=\"token operator\">&amp;&amp;</span> styles<span class=\"token punctuation\">[</span><span class=\"token string\">'name-negative'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">[</span><span class=\"token string\">'name-content'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, </span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Or should I refer to you by </span><span class=\"token punctuation\">{</span>surname<span class=\"token punctuation\">}</span><span class=\"token plain-text\">?</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>ƒê·ªÉ t√¨m hi·ªÉu th√™m v·ªÅ CSS Module trong React, <a href=\"https://blog.pusher.com/css-modules-react/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ƒë·ªçc b√†i n√†y</a></p>\n<h2 id=\"m·ªôt-s·ªë-th∆∞-vi·ªán-th∆∞·ªùng-s·ª≠-d·ª•ng\"><a href=\"#m%E1%BB%99t-s%E1%BB%91-th%C6%B0-vi%E1%BB%87n-th%C6%B0%E1%BB%9Dng-s%E1%BB%AD-d%E1%BB%A5ng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>M·ªôt s·ªë th∆∞ vi·ªán th∆∞·ªùng s·ª≠ d·ª•ng</h2>\n<ul>\n<li>Lu√¥n s·ª≠ d·ª•ng <strong>react</strong>, <strong>react-dom</strong> m·ªõi nh·∫•t</li>\n<li><code class=\"language-inline-text\">classnames</code> ƒë·ªÉ join <code class=\"language-inline-text\">className</code> theo ƒëi·ªÅu ki·ªán</li>\n<li><code class=\"language-inline-text\">i18n-js</code> ƒë·ªÉ l√†m ƒëa ng√¥n ng·ªØ</li>\n<li><code class=\"language-inline-text\">lodash</code>, m·ªôt s·ªë utility function s·ª≠ l√Ω chu·ªïi, object n√†y n·ªç</li>\n<li><code class=\"language-inline-text\">ramda</code> thay cho <code class=\"language-inline-text\">lodash</code> n·∫øu b·∫°n kho√°i pure function, v√† <code class=\"language-inline-text\">recompose</code> n·∫øu ƒë√£ th√≠ch <code class=\"language-inline-text\">ramda</code></li>\n<li><code class=\"language-inline-text\">dinero.js</code> ƒë·ªÉ hi·ªÉn th·ªã v√† s·ª≠ l√Ω ti·ªÅn</li>\n<li><code class=\"language-inline-text\">moment</code> ƒë·ªÉ l√†m vi·ªác v·ªõi date time</li>\n<li><code class=\"language-inline-text\">react-helmet</code> ƒë·ªÉ thay ƒë·ªïi tag <code class=\"language-inline-text\">&lt;head></code> cho t·ª´ng component</li>\n<li><code class=\"language-inline-text\">react-table</code> v√† <code class=\"language-inline-text\">react-virtualized</code> cho hi·ªÉn th·ªã d·ªØ li·ªáu ki·ªÉu table</li>\n<li><code class=\"language-inline-text\">react-redux</code> <code class=\"language-inline-text\">redux</code> <code class=\"language-inline-text\">redux-saga</code> v√† <code class=\"language-inline-text\">redux-logger</code> ƒë·ªÉ qu·∫£n l√Ω state t·∫≠p trung</li>\n<li><code class=\"language-inline-text\">react-router-dom</code> n·∫øu l√†m web, v√† <code class=\"language-inline-text\">react-navigation</code> n·∫øu l√† react native</li>\n</ul>\n<p>C·∫£m ∆°n b·∫°n ƒë√£ ƒë·ªçc h·∫øt b√†i vi·∫øt</p>\n<p><a href=\"https://hackernoon.com/tips-on-react-for-large-scale-projects-3f9ece85983d\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Link b√†i g·ªëc: Tips on React for large scale projects</a>\nT√°c gi·∫£: Luis Felipe Zaguini</p>\n","cover_image":""}},{"node":{"id":"fa886c080ce0cc5ae7c411b14a1be10f","title":"Gi·ªõi thi·ªáu React Portal","path":"/2018-05-31-huong-dan-gioi-thieu-react-portal/","date":"2018-05-31","timeToRead":2,"desc":"T√¨m hi·ªÉu v·ªÅ Portals, b·∫£n h·ªó tr·ª£ ch√≠nh th·ª©c c·ªßa react-dom","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81-portal-gi%E1%BA%A3i-quy%E1%BA%BFt\">V·∫•n ƒë·ªÅ Portal gi·∫£i quy·∫øt</a></li>\n<li><a href=\"#c%C3%BA-ph%C3%A1p\">C√∫ ph√°p</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng\">S·ª≠ d·ª•ng</a></li>\n</ul>\n<!-- /TOC -->\n<p>G·ªçi l√† b·∫£n h·ªó tr·ª£ ch√≠nh th·ª©c v√¨ tr∆∞·ªõc b·∫£n React 16 th√¨ kh√¥ng c√≥ support, ch√∫ng ta ph·∫£i d√πng c√°c th∆∞ vi·ªán b·ªï sung. Gi·ªù th√¨ n√≥ official r·ªìi nh√©.</p>\n<h2 id=\"v·∫•n-ƒë·ªÅ-portal-gi·∫£i-quy·∫øt\"><a href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81-portal-gi%E1%BA%A3i-quy%E1%BA%BFt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V·∫•n ƒë·ªÅ Portal gi·∫£i quy·∫øt</h2>\n<p>Th√¥ng th∆∞·ªùng khi ch√∫ng ta c√≥ component cha l√† A, b√™n trong ƒë√≥ render component con l√† B, th√¨ th·∫±ng B n√†y s·∫Ω lu√¥n b·ªã b·ªçc l·∫°i b√™n trong A</p>\n<div class=\"gridsome-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>component-c<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>component-a<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>component-b<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Gi·ªù n·∫øu ta mu·ªën khi vi·∫øt th√¨ v·∫´n vi·∫øt component B b√™n trong component A, nh∆∞ng k·∫øt qu·∫£ html ta c√≥ ƒë∆∞·ª£c th√¨ component B l·∫°i n·∫±m trong component C. ƒê√≥ l√† l√∫c ch√∫ng ta c·∫ßn ƒë·∫øn Portal, ta s·∫Ω b·ªçc component B b·∫±ng h√†m <code class=\"language-inline-text\">createPortal</code>, ƒë·ªÉ khi <code class=\"language-inline-text\">render</code> B th√¨ n√≥ l·∫°i <code class=\"language-inline-text\">render</code> ·ªü C.</p>\n<h2 id=\"c√∫-ph√°p\"><a href=\"#c%C3%BA-ph%C3%A1p\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C√∫ ph√°p</h2>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span><span class=\"token punctuation\">;</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createPortal</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Trong ƒë√≥</p>\n<ul>\n<li><code class=\"language-inline-text\">ReactDOM.createPortal</code> l√† h√†m c·ªßa <code class=\"language-inline-text\">react-dom</code></li>\n<li>child l√† th·∫±ng B, th·∫±ng con ƒëi l√¥ng nh√¥ng kh√¥ng th√®m ·ªü nh√† v·ªõi cha n√≥</li>\n<li>container l√† nh√† th·∫±ng h√†ng x√≥m, n∆°i th·∫±ng con B hoang ƒë√†ng s·∫Ω ·ªü k√©.</li>\n</ul>\n<h2 id=\"s·ª≠-d·ª•ng\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng</h2>\n<p>ƒê·ªÉ s·ª≠ d·ª•ng Portal, ch√∫ng ta t·∫°o ra m·ªôt component m·ªõi, ƒë·ªôc l·∫≠p v·ªõi B, r·ªìi ƒë·∫©y th·∫±ng B hay b·∫•t k·ª≥ ƒë·ª©a n√†o mu·ªën c√≥ cu·ªôc s·ªëng du m·ª•c th√†nh child component c·ªßa component m·ªõi t·∫°o n√†y, ƒë·∫∑t t√™n l√† <code class=\"language-inline-text\">MyPortal</code> nha.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> PropTypes <span class=\"token keyword\">from</span> <span class=\"token string\">'prop-types'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyPortal</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// t√¨m coi c√≥ ƒë·ª©a n√†o ch·ªãu ch·ª©a ch·∫•p n√≥ kh√¥ng</span>\n    <span class=\"token keyword\">const</span> haveTarget <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// kh√¥ng n∆°i ch·ª©a ch·∫•p th√¨ ta ko render lu√¥n</span>\n    <span class=\"token keyword\">return</span> haveTarget <span class=\"token operator\">?</span> ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createPortal</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">,</span>\n      haveTarget\n    <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">null</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\nMyPortal<span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// l√† id c·ªßa html element ta s·∫Ω append c√°i ƒë·ª©a con hoang ƒë√†ng v√¥</span>\n  <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> PropTypes<span class=\"token punctuation\">.</span>string<span class=\"token punctuation\">.</span>isRequired<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> MyPortal<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Component A s·∫Ω vi·∫øt nh∆∞ th·∫ø n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token operator\">...</span>\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>component-a<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Hello An.Luu\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyPortal</span></span> <span class=\"token attr-name\">target</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>targetForB<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>component-b<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                Em l√† B!\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">MyPortal</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">...</span>\n\n<span class=\"token comment\">// trong ƒë√≥, id c√≥ th·ªÉ n·∫±m ·ªü b·∫•t k·ª≥ component n√†o ƒë√≥ kh√°c, th·∫≠m ch√≠ window kh√°c lu√¥n m·ªõi gh√™</span>\n\n<span class=\"token comment\">// v√≠ d·ª• component C</span>\n<span class=\"token operator\">...</span>\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>component-c<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Em l√† C!\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>targetForB<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n)\n...</span></code></pre></div>\n<p>ƒê·ªçc th√™m </p>\n<ul>\n<li><a href=\"https://reactjs.org/docs/portals.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://reactjs.org/docs/portals.html</a> </li>\n<li><a href=\"https://hackernoon.com/using-a-react-16-portal-to-do-something-cool-2a2d627b0202\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://hackernoon.com/using-a-react-16-portal-to-do-something-cool-2a2d627b0202</a></li>\n</ul>\n","cover_image":""}},{"node":{"id":"b8095fcc4fddb26736d28255b2cd38ed","title":"L√†m vi·ªác v·ªõi Form trong React","path":"/2018-05-22-huong-dan-lam-viec-voi-form-trong-react/","date":"2018-05-22","timeToRead":3,"desc":"X·ª≠ l√Ω form trong React, cƒÉn b·∫£n nh·∫•t","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#controlled-component-vs-uncontrolled-component\">controlled component vs. uncontrolled component</a></li>\n<li><a href=\"#d%E1%BB%B1ng-form\">D·ª±ng Form</a></li>\n</ul>\n<!-- /TOC -->\n<p>![null][https://process.filestackapi.com/cache=expiry:max/resize=width:700/compress/glrbsytsygriccnehidf]</p>\n<h2 id=\"controlled-component-vs-uncontrolled-component\"><a href=\"#controlled-component-vs-uncontrolled-component\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>controlled component vs. uncontrolled component</h2>\n<p>Kh√¥ng gi·ªëng c√°c element DOM, element FORM s·∫Ω l√†m vi·ªác h∆°i kh√°c trong React. Data c·ªßa form s·∫Ω ƒë∆∞·ª£c x·ª≠ l√Ω b·ªüi component, kh√¥ng ph·∫£i b·ªüi DOM, th√¥ng th∆∞·ªùng ch√∫ng ta s·ª≠ d·ª•ng controlled component, data c·ªßa form s·∫Ω ƒë∆∞·ª£c ƒë∆∞a v√¥ component <code class=\"language-inline-text\">state</code> nh∆∞ h√¨nh b√™n d∆∞·ªõi</p>\n<p><img src=\"https://process.filestackapi.com/cache=expiry:max/Qb7pi8kTzenybAUcijaB\"></p>\n<p>Data t·ª´ <code class=\"language-inline-text\">dump components</code> s·∫Ω ƒë∆∞·ª£c g·ªüi v√¥ h√†m callback, n∆°i ch√∫ng ta l∆∞u l·∫°i c√°c thay ƒë·ªïi</p>\n<p>N·∫øu s·ª≠ d·ª•ng uncontrolled component, t∆∞∆°ng t·ª± nh∆∞ HTML form truy·ªÅn th·ªëng, d·ªØ li·ªáu s·∫Ω n·∫±m trong DOM, kh√¥ng n·∫±m trong component state, c√°c component <code class=\"language-inline-text\">&lt;input /></code> hay <code class=\"language-inline-text\">&lt;textarea/></code> s·∫Ω t·ª± qu·∫£n l√Ω state c·ªßa n√≥ v√† t·ª± ƒë·ªông thay ƒë·ªïi khi user nh·∫≠p d·ªØ li·ªáu, n·∫øu c·∫ßn d·ªØ li·ªáu n√†y, ch√∫ng ta query t·ªõi DOM ƒë√≥ ƒë·ªÉ l·∫•y gi√° tr·ªã b·∫±ng <code class=\"language-inline-text\">ref</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">UncontrolledComponentForm</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSubmit <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The value is: '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSubmit<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          Name:\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> input <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Submit<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒêa s·ªë c√°c tr∆∞·ªùng h·ª£p m√¨nh th∆∞·ªùng s·ª≠ d·ª•ng controlled component ƒë·ªÉ l√†m form, nh√¨n v√†o tr·ª±c quan h∆°n v√† m√¨nh c√≥ th·ªÉ validate ƒë∆∞·ª£c d·ªØ li·ªáu l√∫c nh·∫≠p v√†o lu√¥n.</p>\n<h2 id=\"d·ª±ng-form\"><a href=\"#d%E1%BB%B1ng-form\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>D·ª±ng Form</h2>\n<p>S·∫Ω c√≥ kh√° nhi·ªÅu th∆∞ vi·ªán c√≥ s·∫µn ƒë·ªÉ l√†m vi·ªác v·ªõi form, nh∆∞ng v·ªõi c√° nh√¢n m√¨nh, m√¨nh v·∫´n th√≠ch t·ª± build h∆°n v√¨ n·∫øu m√¨nh mu·ªën th√™m validate ƒë·∫∑c bi·ªát hay t√πy bi·∫øn behavior c·ªßa n√≥ c≈©ng ƒë∆°n gi·∫£n h∆°n, ƒë·ªìng th·ªùi gi√∫p ch√∫ng ta n·∫Øm r√µ h∆°n v·ªÅ React Form lu√¥n.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>Component<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>  \n\n<span class=\"token comment\">/* Import Components */</span>\n<span class=\"token keyword\">import</span> CheckBox <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/CheckBox'</span><span class=\"token punctuation\">;</span>  \n<span class=\"token keyword\">import</span> Input <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/Input'</span><span class=\"token punctuation\">;</span>  \n<span class=\"token keyword\">import</span> TextArea <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/TextArea'</span><span class=\"token punctuation\">;</span>  \n<span class=\"token keyword\">import</span> Select <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/Select'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Button <span class=\"token keyword\">from</span> <span class=\"token string\">'../components/Button'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">FormContainer</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>  \n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">newUser</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">gender</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">expertise</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">about</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span>\n\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token literal-property property\">genderOptions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Male'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Female'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Others'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">skillOptions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Programming'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Development'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Design'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Testing'</span><span class=\"token punctuation\">]</span>\n\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">/* This life cycle hook gets executed when the component mounts */</span>\n\n  <span class=\"token function-variable function\">handleFormSubmit</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Form submission logic</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">handleClearForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Logic for resetting the form</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">changeValue</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//update state</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>container<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onSubmit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleFormSubmit<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Input</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>changeValue<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* Name of the user */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Input</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>changeValue<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* Input for Age */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"> \n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Select</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>changeValue<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* Gender Selection */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CheckBox</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>changeValue<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* List of Skills (eg. Programmer, developer) */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TextArea</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>changeValue<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"> </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* About you */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleFormSubmit<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            Submit\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Button</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClearForm<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            Reset\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Button</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> FormContainer<span class=\"token punctuation\">;</span></code></pre></div>\n<p>M√¨nh s·∫Ω kh√¥ng ƒëi s√¢u v√†o c√°c component <code class=\"language-inline-text\">Input</code>, <code class=\"language-inline-text\">Select</code>, <code class=\"language-inline-text\">Checkbox</code>, <code class=\"language-inline-text\">TextArea</code>, c√°c b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng m·ªôt UI library React b·∫•t k·ª≥, ho·∫∑c t·ª± build n·∫øu th√≠ch, ƒëa ph·∫ßn c√°c library n√†y s·∫Ω cho ph√©p s·ª≠ d·ª•ng c·∫£ 2 ki·ªÉu controlled/uncontrolled</p>\n<p>H√†m <code class=\"language-inline-text\">handleClearForm</code> s·∫Ω reset to√†n b·ªô state</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function-variable function\">handleClearForm</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> \n    <span class=\"token literal-property property\">newUser</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">gender</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">skills</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">about</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>B√™n trong h√†m <code class=\"language-inline-text\">handleFormSubmit</code> ta c√≥ th·ªÉ l·∫•y gi√° tr·ªã c·ªßa form v√† th·ª±c hi·ªán m·ªôt x·ª≠ l√Ω nh∆∞ <code class=\"language-inline-text\">dispatch</code> ra m·ªôt action</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function-variable function\">handleFormSubmit</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> userData <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>newUser<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// n·∫øu connect FormContainer v√†o Redux, ta c√≥ th·ªÉ d√πng dispatch ·ªü ƒë√¢y</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">someFunction</span><span class=\"token punctuation\">(</span>userData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>   </code></pre></div>\n<p>B√†i n√†y t√°c gi·∫£ ch∆∞a ƒë·ªÅ c·∫≠p nh·ªØng v·∫•n ƒë·ªÅ s√¢u h∆°n nh∆∞ validate, b√†i sau m√¨nh s·∫Ω b·ªï sung th√™m.</p>\n<p><a href=\"https://www.codementor.io/blizzerand/building-forms-using-react-everything-you-need-to-know-iz3eyoq4y\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Link b√†i g·ªëc</a></p>\n<p>T√°c gi·∫£: Manjunath</p>\n","cover_image":""}},{"node":{"id":"c739028abbcb89e9d3e7c89db87fa879","title":"Transition trong React Native v·ªõi React Navigation","path":"/2018-05-02-huong-dan-transition-voi-react-navigation/","date":"2018-05-02","timeToRead":3,"desc":"H∆∞·ªõng d·∫´n l√†m transition trong React Native v·ªõi react navigation","content":"<p>Ch√∫ng ta s·∫Ω build nh·ªØng m√†n h√¨nh ƒë·∫ßu ti√™n khi m·ªõi v√†o app: on-boarding screen, m·∫•y c√°i m√†n h√¨nh ki·ªÉu ch√†o h·ªèi khi m·ªõi v·ª´a c√†i app xong, m·ªü app l√™n, gi·ªõi thi·ªáu ƒë√¥i ba n√©t r·ªìi k√™u ng∆∞·ªùi ta sign in/sign up.</p>\n<p>Ch√∫ng ta s·∫Ω setup 2 screen, <code class=\"language-inline-text\">Screen1</code>, <code class=\"language-inline-text\">Screen2</code>, nh√©t 2 screens n√†y v√†o trong <code class=\"language-inline-text\">StackNavigator</code> component</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>Component<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>Text<span class=\"token punctuation\">,</span> View<span class=\"token punctuation\">,</span> Button<span class=\"token punctuation\">,</span> Image<span class=\"token punctuation\">,</span> StyleSheet <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>StackNavigator<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-navigation'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">LogoImage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Image</span></span> <span class=\"token attr-name\">source</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">uri</span><span class=\"token operator\">:</span> <span class=\"token string\">'https://picsum.photos/100/100?image=56'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Screen1</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">View</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>container<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LogoImage</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>largeLogo<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>paragraph<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                    Welcome!\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Text</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Next<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">onPress</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>navigation<span class=\"token punctuation\">.</span><span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Screen2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">View</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Screen2</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">View</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>container<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LogoImage</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>smallLogo<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>paragraph<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">fontWeight</span><span class=\"token operator\">:</span><span class=\"token string\">'normal'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                    Now you should have a basic understanding of how this app works. \n                    Please sign up and take part in this fantastic user experience!\n                  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Text</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Text</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">  \n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>paragraph<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                    This is the last page of the onboarding.\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Text</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">  \n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Back<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onPress</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>navigation<span class=\"token punctuation\">.</span><span class=\"token function\">goBack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">View</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> Navigator <span class=\"token operator\">=</span> <span class=\"token function\">StackNavigator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">screen1</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">screen</span><span class=\"token operator\">:</span> Screen1<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">screen2</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">screen</span><span class=\"token operator\">:</span> Screen2<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Navigator</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> styles <span class=\"token operator\">=</span> StyleSheet<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">container</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">flex</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">alignItems</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">justifyContent</span><span class=\"token operator\">:</span> <span class=\"token string\">'space-around'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#ecf0f1'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">largeLogo</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">smallLogo</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">paragraph</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token number\">24</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fontWeight</span><span class=\"token operator\">:</span> <span class=\"token string\">'bold'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">textAlign</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#34495e'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"th√™m-transition\"><a href=\"#th%C3%AAm-transition\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Th√™m transition</h2>\n<p>Ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng th√™m m·ªôt th∆∞ vi·ªán <code class=\"language-inline-text\">react-navigation-fluid-transitions</code> ƒë·ªÉ th√™m transition khi chuy·ªÉn t·ª´ <code class=\"language-inline-text\">Screen1</code> qua <code class=\"language-inline-text\">Screen2</code>, logo ·ªü <code class=\"language-inline-text\">Screen1</code> s·∫Ω nh·ªè d·∫ßn nh·ªè d·∫ßn th√†nh logo ·ªü <code class=\"language-inline-text\">Screen2</code>.</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i react-navigation-fluid-transitions --save</code></pre></div>\n<p>Thay v√¨ s·ª≠ d·ª•ng <code class=\"language-inline-text\">StackNavigator</code>, ta chuy·ªÉn sang d√πng <code class=\"language-inline-text\">FluidNavigator</code> c·ªßa th∆∞ vi·ªán m·ªõi</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> FluidNavigator<span class=\"token punctuation\">,</span> Transition <span class=\"token punctuation\">}</span> from react<span class=\"token operator\">-</span>navigation<span class=\"token operator\">-</span>fluid<span class=\"token operator\">-</span>transitions‚Äô<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> Navigator <span class=\"token operator\">=</span> <span class=\"token function\">FluidNavigator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n <span class=\"token literal-property property\">screen1</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">screen</span><span class=\"token operator\">:</span> Screen1<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n <span class=\"token literal-property property\">screen2</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">screen</span><span class=\"token operator\">:</span> Screen2<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>·ªû ƒë√¢y ch√∫ng ta mu·ªën c√°i Logo s·∫Ω <em>bi·∫øn h√¨nh</em> n√™n b·ªçc n√≥ v√†o <code class=\"language-inline-text\">Transition</code> v·ªõi c√πng m·ªôt gi√° tr·ªã <em>prop</em> <code class=\"language-inline-text\">shared</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Transition</span></span> <span class=\"token attr-name\">shared</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>logo<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LogoImage</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>largeLogo<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Transition</span></span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Transition</span></span> <span class=\"token attr-name\">shared</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>logo<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">LogoImage</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>smallLogo<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Transition</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>K·∫øt qu·∫£ c√≥ ƒë∆∞·ª£c</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*Pg-22BI0Z_vG1mMxe9Scjg.gif\"></p>\n<p>N·∫øu ƒë·ªÉ √Ω ta s·∫Ω th·∫•y ph·∫ßn text s·∫Ω kh√¥ng c√≥ √°p d·ª•ng transition l√™n n√™n n√≥ ƒë∆°n gi·∫£n l√† ·∫©n/hi·ªán khi chuy·ªÉn qua l·∫°i gi·ªØa 2 m√†n h√¨nh, ch√∫ng ta s·∫Ω th√™m transition lu√¥n cho ph·∫ßn text n√†y b·∫±ng component <code class=\"language-inline-text\">Transition</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Transition</span></span> <span class=\"token attr-name\">appear</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>horizontal<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>paragraph<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    Welcome!\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Text</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Transition</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*Da1RpwEKtsKL4fwp0oZ8Iw.gif\"></p>\n<p>Th∆∞ vi·ªán React Navigation Fluid Transition h·ªó tr·ª£ s·∫µn m·ªôt s·ªë transition c√≥ th·ªÉ d√πng m√¨-ƒÉn-li·ªÅn nh∆∞ <code class=\"language-inline-text\">appear</code> ·ªü tr√™n, m·ªôt s·ªë hi·ªáu ·ª©ng c√≥ s·∫µn kh√°c, ƒë·ªçc th√™m t·∫°i <a href=\"https://github.com/fram-x/FluidTransitions/blob/develop/README.md\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">document ·ªü ƒë√¢y</a></p>\n<p>T√°c Gi·∫£: Christian Falch\nLink B√†i G·ªëc: <a href=\"https://medium.com/@christian.falch/fluid-transitions-with-react-navigation-a049d2f71494\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://medium.com/@christian.falch/fluid-transitions-with-react-navigation-a049d2f71494</a></p>\n","cover_image":""}},{"node":{"id":"ed20ea853375e5181c942b2bd43f7653","title":"C·∫£i thi·ªán performance c·ªßa React App","path":"/2018-05-01-huong-dan-cai-thien-performance-react-app/","date":"2018-05-01","timeToRead":7,"desc":"Trong b√†i n√†y, ch√∫ng ta c√πng ƒëi qua c√°c b∆∞·ªõc ƒë·ªÉ fix nh·ªØng issue li√™n quan ƒë·∫øn performance th∆∞·ªùng th·∫•y.","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#x%C3%A1c-%C4%91%E1%BB%8Bnh-c%C3%A1c-tr%C6%B0%E1%BB%9Dng-h%E1%BB%A3p-render-kh%C3%B4ng-c%E1%BA%A7n-thi%E1%BA%BFt\">X√°c ƒë·ªãnh c√°c tr∆∞·ªùng h·ª£p render kh√¥ng c·∫ßn thi·∫øt</a></li>\n<li><a href=\"#t%C3%A1ch-c%C3%A1c-component-update-th%C6%B0%E1%BB%9Dng-xuy%C3%AAn-th%C3%A0nh-c%C3%A1c-component-%C4%91%E1%BB%99c-l%E1%BA%ADp\">T√°ch c√°c component update th∆∞·ªùng xuy√™n th√†nh c√°c component ƒë·ªôc l·∫≠p</a></li>\n<li><a href=\"#shouldcomponentupdate-v%C3%A0-purecomponent\"><code class=\"language-inline-text\">shouldComponentUpdate</code> v√† PureComponent</a></li>\n<li><a href=\"#tr%C3%A1nh-vi%E1%BB%87c-%C4%91%C6%B0a-m%E1%BB%99t-object-m%E1%BB%9Bi-nh%C6%B0-l%C3%A0-prop\">Tr√°nh vi·ªác ƒë∆∞a m·ªôt object m·ªõi nh∆∞ l√† prop</a></li>\n<li><a href=\"#production\">Production</a></li>\n<li><a href=\"#code-splitting\">Code splitting</a></li>\n<li><a href=\"#thay-%C4%91%E1%BB%95i-dom-qu%C3%A1-nhi%E1%BB%81u-l%E1%BA%A7n\">Thay ƒë·ªïi DOM qu√° nhi·ªÅu l·∫ßn</a></li>\n<li><a href=\"#callback\">Callback</a></li>\n</ul>\n<!-- /TOC -->\n<p>To√†n b·ªô source app v√≠ d·ª• c√≥ th·ªÉ l·∫•y <a href=\"https://github.com/ohansemmanuel/Cardie-performace\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">·ªü ƒë√¢y https://github.com/ohansemmanuel/Cardie-performace</a>, khuy·∫øn kh√≠ch c√°c b·∫°n n√™n t·ª± l·∫•y v·ªÅ v√† v·ªçc.</p>\n<p>Ch·∫°y l√™n n√≥ s·∫Ω c√≥ nh∆∞ v·∫ßy</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*Yh4h7wXPOcbaDBKdVJxm-g.png\" alt=\"C·∫£i thi·ªán performance c·ªßa React App\"></p>\n<p>Khi click v√†o button n√≥ s·∫Ω update l·∫°i th√¥ng tin ngh·ªÅ nghi·ªáp</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*o-8SuFxH2Tl37JG-wSOj0g.gif\" alt=\"C·∫£i thi·ªán performance c·ªßa React App\"></p>\n<h1 id=\"x√°c-ƒë·ªãnh-c√°c-tr∆∞·ªùng-h·ª£p-render-kh√¥ng-c·∫ßn-thi·∫øt\"><a href=\"#x%C3%A1c-%C4%91%E1%BB%8Bnh-c%C3%A1c-tr%C6%B0%E1%BB%9Dng-h%E1%BB%A3p-render-kh%C3%B4ng-c%E1%BA%A7n-thi%E1%BA%BFt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>X√°c ƒë·ªãnh c√°c tr∆∞·ªùng h·ª£p render kh√¥ng c·∫ßn thi·∫øt</h1>\n<p>Ph∆∞∆°ng ph√°p ƒë∆°n gi·∫£n nh·∫•t ƒë·ªÉ ki·ªÉm tra l√† b·∫≠t n√∫t <code class=\"language-inline-text\">highlight update</code> tr√™n React Dev tool.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*jfeS12BHr2dt5ooLeh5u3Q.gif\" alt=\"C·∫£i thi·ªán performance c·ªßa React App\"></p>\n<p>C√°i vi·ªÅn m√†u xanh hi·ªÉn th·ªã xung quanh component cho bi·∫øt n√≥ ƒëang g·ªçi render.</p>\n<p>Trong v√≠ d·ª• n√†y c√≥ th·ªÉ th·∫•y nguy√™n component <code class=\"language-inline-text\">App</code> ƒë∆∞·ª£c re-render, kh√¥ng ƒë√∫ng nh∆∞ ch√∫ng ta mong mu·ªën.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*ofXx-J4tr7KXXlNozuW9OA.gif\" alt=\"C·∫£i thi·ªán performance c·ªßa React App\"></p>\n<p>T·ªët nh·∫•t l√† ƒë√∫ng c√°i ph·∫ßn hi·ªÉn th·ªã th√¥ng tin ngh·ªÅ nghi·ªáp g·ªçi render.</p>\n<h1 id=\"t√°ch-c√°c-component-update-th∆∞·ªùng-xuy√™n-th√†nh-c√°c-component-ƒë·ªôc-l·∫≠p\"><a href=\"#t%C3%A1ch-c%C3%A1c-component-update-th%C6%B0%E1%BB%9Dng-xuy%C3%AAn-th%C3%A0nh-c%C3%A1c-component-%C4%91%E1%BB%99c-l%E1%BA%ADp\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T√°ch c√°c component update th∆∞·ªùng xuy√™n th√†nh c√°c component ƒë·ªôc l·∫≠p</h1>\n<p>Sau khi ƒë√£ b·∫Øt ƒë∆∞·ª£c component n√†o ƒëang re-render kh√¥ng c·∫ßn thi·∫øt, t√°ch component n√†y theo ph∆∞∆°ng ph√°p sau</p>\n<p>Component <code class=\"language-inline-text\">App</code> connect v·ªõi redux store b·∫±ng h√†m <code class=\"language-inline-text\">connect</code>, n√≥ nh·∫≠n c√°c props l√† <code class=\"language-inline-text\">name</code>, <code class=\"language-inline-text\">location</code>, <code class=\"language-inline-text\">likes</code> v√† <code class=\"language-inline-text\">description</code></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*EQLJ8lXEchp_USFfj2Em7A.png\" alt=\"C·∫£i thi·ªán performance c·ªßa React App\"></p>\n<p>Khi user click c√°i button, c√°i description b·ªã thay ƒë·ªïi. N√≥ l√†m cho component <code class=\"language-inline-text\">App</code> re-render.</p>\n<p>Nh·ªõ l·∫°i ki·∫øn th·ª©c cƒÉn b·∫£n React, khi prop ho·∫∑c state thay ƒë·ªïi, c√¢y virtual DOM ƒë∆∞·ª£c update</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*rv3Y1Au-GarKtoiTJSmWRA.png\" alt=\"C·∫£i thi·ªán performance c·ªßa React App\">\n<img src=\"https://cdn-images-1.medium.com/max/800/1*x6NfWjAOcqwoZs2GhbdTZw.png\" alt=\"C·∫£i thi·ªán performance c·ªßa React App\">\n<img src=\"https://cdn-images-1.medium.com/max/800/1*EpSSnv8Wjql-IcrNvzvz_A.png\" alt=\"C·∫£i thi·ªán performance c·ªßa React App\"></p>\n<p>Gi·ªù ƒë·ªÉ x·ª≠ l√Ω, ch√∫ng ta t·∫°o m·ªôt component m·ªõi, ƒë·∫∑t l√† <code class=\"language-inline-text\">Profession</code>, ƒë·ªÉ render th√¥ng tin description, ch√∫ng ta c·∫ßn t·ªï ch·ª©c l·∫°i ƒë·ªÉ c√≥ c√¢y virtual DOM nh∆∞ th·∫ø n√†y</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*g8w3av5rclzcX9N387nxgQ.png\" alt=\"C·∫£i thi·ªán performance c·ªßa React App\">\n<img src=\"https://cdn-images-1.medium.com/max/1600/1*0kqtSR4WxvGy4yYBKyReIw.png\" alt=\"C·∫£i thi·ªán performance c·ªßa React App\"></p>\n<p>Thay v√¨ <code class=\"language-inline-text\">&lt;App /></code> nh·∫≠n prop l√† <code class=\"language-inline-text\">profession</code>, chuy·ªÉn tr√°ch nhi·ªám n√†y cho <code class=\"language-inline-text\">&lt;Profession /></code></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*tLbbgUgBavBm6FMpOzqL7Q.png\" alt=\"C·∫£i thi·ªán performance c·ªßa React App\"></p>\n<p>K·∫øt qu·∫£ sau khi t√°ch component</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*Poo-6-5-bfYQ0qYBcXoyiw.gif\" alt=\"C·∫£i thi·ªán performance c·ªßa React App\"></p>\n<h1 id=\"shouldcomponentupdate-v√†-purecomponent\"><a href=\"#shouldcomponentupdate-v%C3%A0-purecomponent\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">shouldComponentUpdate</code> v√† PureComponent</h1>\n<p>C√°c b√†i vi·∫øt li√™n quan ƒë·∫øn ch·ªß ƒë·ªÅ performance, ch·∫Øc ch·∫Øn s·∫Ω nh·∫Øc ƒë·∫øn <code class=\"language-inline-text\">PureComponent</code>, b√†i n√†y c≈©ng kh√¥ng ngo·∫°i l·ªá.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>PureComponent</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒêi·ªÅu g√¨ b·∫°n c·∫ßn quan t√¢m khi khai b√°o m·ªôt component l√† <code class=\"language-inline-text\">PureComponent</code>? ƒê√≥ l√† vi·ªác m·∫•t ƒëi h√†m <code class=\"language-inline-text\">shouldComponentUpdate</code>. V·ªÅ nguy√™n t·∫Øc n√≥ ch·ªâ render l·∫°i khi <code class=\"language-inline-text\">prop</code> thay ƒë·ªïi</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Description</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> description <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>faint<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">I am</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> a </span><span class=\"token punctuation\">{</span>description<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>T√°c gi·∫£ b√†i vi·∫øt n√†y c√≤n chia nh·ªè h∆°n n·ªØa</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Description</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> description <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">I</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Am</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">A</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Profession</span></span> <span class=\"token attr-name\">profession</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>description<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*TpXci0NJ24imQqmsc7S-_A.png\" alt=\"C·∫£i thi·ªán performance c·ªßa React App\"></p>\n<p>Ch√∫ng ta c·∫ßn nh·ªõ l·∫°i 1 l·∫ßn n·ªØa: React ƒë·ªãnh nghƒ©a th·∫ø n√†o l√† m·ªôt PureComponent?</p>\n<p>H√£y th·ª≠ xem x√©t c√°ch vi·∫øt <code class=\"language-inline-text\">shouldComponentUpdate</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ShouldNotUpdate</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>counter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token function\">shouldComponentUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextProps<span class=\"token punctuation\">,</span> nextState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children <span class=\"token operator\">!==</span> nextProps<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">;</span>    \n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">I should be rendered only 1 time. actual times rendered: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token operator\">++</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>counter<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>K·∫øt qu·∫£ tr·∫£ v·ªÅ s·∫Ω kh√¥ng ph·∫£i counter = 1, nghƒ©a l√† h√†m render th·ª±c s·ª± s·∫Ω ch·∫°y r·∫•t nhi·ªÅu l·∫ßn, t·∫°i sao l·∫°i v·∫≠y? b·ªüi v√¨ <code class=\"language-inline-text\">this.props.children !== nextProps.children</code> s·∫Ω lu√¥n lu√¥n tr·∫£ v·ªÅ <code class=\"language-inline-text\">true</code>, React s·∫Ω t·∫°o ra m·ªôt instance m·ªõi, 1 <strong>ReactElement m·ªõi</strong> m·ªói khi render</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ShouldNotUpdate</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>PureComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>counter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">I should be rendered only 1 time. actual times rendered: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token operator\">++</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>counter<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>S·ªë l·∫ßn render v·∫´n kh√¥ng gi·∫£m ƒëi, t·∫°i sao? ƒê·ªçc ti·∫øp s·∫Ω r√µ.</p>\n<h1 id=\"tr√°nh-vi·ªác-ƒë∆∞a-m·ªôt-object-m·ªõi-nh∆∞-l√†-prop\"><a href=\"#tr%C3%A1nh-vi%E1%BB%87c-%C4%91%C6%B0a-m%E1%BB%99t-object-m%E1%BB%9Bi-nh%C6%B0-l%C3%A0-prop\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tr√°nh vi·ªác ƒë∆∞a m·ªôt object m·ªõi nh∆∞ l√† prop</h1>\n<p>N√≥ s·∫Ω x·∫£y ra t√¨nh hu·ªëng l√† <code class=\"language-inline-text\">prop</code> kh√¥ng thay ƒë·ªïi, nh∆∞ng React nghƒ© l√† n√≥ ƒë√£ thay ƒë·ªïi, n√™n render l·∫°i. V√≠ d·ª•</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">I</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">PureComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>faint<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>i<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ƒë√¢u ƒë√≥ truy·ªÅn v√†o </span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Description</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> i <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t  <span class=\"token literal-property property\">value</span><span class=\"token operator\">:</span> <span class=\"token string\">\"i\"</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">I</span></span> <span class=\"token attr-name\">i</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Am</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">A</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Profession</span></span> <span class=\"token attr-name\">profession</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\t  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"https://cdn-images-1.medium.com/max/1600/1*NymA8dLgtXQIHhk7AI2LzQ.png\" alt=\"C·∫£i thi·ªán performance c·ªßa React App\"></p>\n<p>Ngay c·∫£ khi <code class=\"language-inline-text\">&lt;I /></code> l√† m·ªôt PureComponent, n√≥ v·∫´n render khi <code class=\"language-inline-text\">profession</code> thay ƒë·ªïi.</p>\n<p>T·∫°i sao?</p>\n<p>Khi <code class=\"language-inline-text\">&lt;Description /></code> nh·∫≠n m·ªôt prop m·ªõi, h√†m render ƒë∆∞·ª£c g·ªçi</p>\n<p>Khi ƒë·∫øn ƒëo·∫°n n√†y <code class=\"language-inline-text\">&lt;I i={i} /></code>, gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">i</code> l√† m·ªôt object ho√†n to√†n m·ªõi</p>\n<p>V·ªõi <code class=\"language-inline-text\">PureComponent</code> n√≥ ch·ªâ d√πng <strong>shallow compare</strong> gi·ªØa prop c≈© v√† m·ªõi, t·ª©c l√† <code class=\"language-inline-text\">string</code> v√† <code class=\"language-inline-text\">number</code> th√¨ so s√°nh theo gi√° tr·ªã, c√≤n <code class=\"language-inline-text\">object</code> so s√°nh theo tham chi·∫øu ƒë·∫øn v√πng nh·ªõ</p>\n<p>Gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">i</code> kh√¥ng kh√°c, nh∆∞ng th·ª±c s·ª± n√≥ ƒë√£ tham chi·∫øu ƒë·∫øn v√πng nh·ªõ kh√°c</p>\n<p>ƒêi·ªÅu n√†y c≈©ng gi·∫£i th√≠ch cho vi·ªác t·∫°i sao c√°ch l√†m nh∆∞ th·∫ø n√†y kh√¥ng ƒë∆∞·ª£c khuy·∫øn kh√≠ch</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">Render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/*do something*/</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>Function c≈©ng l√† m·ªôt <code class=\"language-inline-text\">object</code>, b·∫°n ƒëang truy·ªÅn v√†o m·ªôt <code class=\"language-inline-text\">object</code> m·ªói l·∫ßn render</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Do this, please</span>\n<span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">&lt;</span>div onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"production\"><a href=\"#production\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Production</h1>\n<p>Deploy th√¨ lu√¥n build b·∫±ng production nh·ªâ, ngo√†i ra ·ªü ph√≠a server n√™n n√©n l·∫°i b·∫±ng Gzip. N·∫øu d√πng Node/Express ·ªü backend, c√†i th√™m module <code class=\"language-inline-text\">compression</code> v√† s·ª≠ d·ª•ng nh∆∞ Express middleware</p>\n<h1 id=\"code-splitting\"><a href=\"#code-splitting\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Code splitting</h1>\n<p>C√°i n√†y m√¨nh c√≥ h∆∞·ªõng d·∫´n r·ªìi, ƒë·ªçc l·∫°i <a href=\"/2018-10-07-huong-dan-lazy-load-component-react\">·ªü ƒë√¢y</a></p>\n<h1 id=\"thay-ƒë·ªïi-dom-qu√°-nhi·ªÅu-l·∫ßn\"><a href=\"#thay-%C4%91%E1%BB%95i-dom-qu%C3%A1-nhi%E1%BB%81u-l%E1%BA%A7n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Thay ƒë·ªïi DOM qu√° nhi·ªÅu l·∫ßn</h1>\n<p>C√≥ bao gi·ªù b·∫°n t·ª´ng s·ª≠ d·ª•ng m·ªôt <em>component</em> nhi·ªÅu l·∫ßn trong app, c·∫£m th·∫•y app h∆°i lag? Animation c·∫£m gi√°c ch·∫°y kh√¥ng m∆∞·ª£t?</p>\n<p>Khi x√¢y c√°c component ph·ª©c t·∫°p, b·∫°n s·∫Ω ph·∫£i x·ª≠ l√Ω DOM m·ªôt ch√∫t, kh·∫£ nƒÉng s·∫Ω v∆∞·ªõng v√†o 2 issue sau</p>\n<ol>\n<li><a href=\"https://developers.google.com/web/fundamentals/performance/rendering/avoid-large-complex-layouts-and-layout-thrashing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Trigger layout</a></li>\n<li><a href=\"https://developers.google.com/web/fundamentals/performance/rendering/avoid-large-complex-layouts-and-layout-thrashing#avoid_layout_thrashing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Layout Thrashing</a></li>\n</ol>\n<p>H√£y ch·∫°y th·ª≠ hi·ªáu ·ª©ng ƒëang l√†m cho m·ªôt component <strong>Collapse</strong> v·ªõi kho·∫£n v√†i ch·ª•c c√°i instance, sau ƒë√≥ ch·ªçn 6x slowdown tr√™n dev tool ƒë·ªÉ th·∫•y s·ª± kh√°c bi·ªát, 6x slowdown l√† gi√° tr·ªã t∆∞∆°ng ·ª©ng v·ªõi t·ªëc ƒë·ªô khi xem tr√™n ƒëi·ªán tho·∫°i</p>\n<p><a href=\"https://cdn-images-1.medium.com/max/800/1*2xOju9iTPGs22U0joILHmQ.png\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">C·∫£i thi·ªán performance c·ªßa React App</a></p>\n<p>Component <strong>Collapse</strong>, ta th∆∞·ªùng s·∫Ω l√†m l√† thay ƒë·ªïi ƒë·ªô cao c·ªßa n√≥</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">updateHeight</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">isOpen</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isOpen<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>containerEl<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>contentEl<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>containerEl<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> <span class=\"token string\">'0px'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√≥ 2 ƒëi·ªÉm c·∫ßn l∆∞u √Ω</p>\n<ol>\n<li>Ch√∫ng ta thay ƒë·ªïi <em>height</em>, l√† ch√∫ng ta trigger chuy·ªán s·∫Øp x·∫øp l·∫°i Layout. N·∫øu ch√∫ng ta thay ƒë·ªïi <code class=\"language-inline-text\">transform</code>, ch√∫ng ta ch·ªâ s·∫Ω trigger <strong>Composite</strong> v√† nh√¨n n√≥ s·∫Ω smooth h∆°n.</li>\n<li>D√≤ng <code class=\"language-inline-text\">this.containerEl.style.height = ${this.contentEl.scrollHeight}px;</code> l√† m·ªôt v√≠ d·ª• ƒëi·ªÉn h√¨nh c·ªßa <strong>Layout Thrashing</strong>, ch√∫ng ta ƒë·ªçc gi√° tr·ªã ƒë·ªô cao hi·ªán t·∫°i, r·ªìi l·∫•y gi√° tr·ªã ƒë√≥ update cho m·ªôt ƒë·ªëi t∆∞·ª£ng DOM, nh√¢n s·ªë l·∫ßn n√†y l√™n v·ªõi s·ªë l∆∞·ª£ng component <strong>Collapse</strong> s·∫Ω l√† m·ªôt s·ªë l·∫ßn ƒë√°ng quan t√¢m. S·∫Ω t·ªët h∆°n n·∫øu ch√∫ng ta ch·ªâ ƒë·ªçc m·ªôt l·∫ßn r·ªìi g√°n gi√° tr·ªã m·ªôt l∆∞·ª£t lu√¥n.</li>\n</ol>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">updateHeight</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">isOpen</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>lastRAF <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">cancelAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>lastRAF<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isOpen<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>lastRAF <span class=\"token operator\">=</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// ƒë·ªçc</span>\n      <span class=\"token keyword\">const</span> height <span class=\"token operator\">=</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>contentEl<span class=\"token punctuation\">.</span>scrollHeight<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>lastRAF <span class=\"token operator\">=</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>lastRAF <span class=\"token operator\">=</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">// g√°n gi√° tr·ªã</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>containerEl<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> height<span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>lastRAF <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>containerEl<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> <span class=\"token string\">'0px'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√≥ th·ªÉ s·ª≠ d·ª•ng th∆∞ vi·ªán <a href=\"https://github.com/wilsonpage/fastdom\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Fastdom</a> thay v√¨ t·ª± vi·∫øt</p>\n<h1 id=\"callback\"><a href=\"#callback\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Callback</h1>\n<p>Khi attach m·ªôt function v√†o b·∫•t k·ª≥ event n√†o trong DOM, n·∫øu c√≥ th√™m <code class=\"language-inline-text\">debounced</code> ho·∫∑c <code class=\"language-inline-text\">throttled</code> s·∫Ω t·ªët h∆°n, gi·∫£m t·∫£i s·ªë l·∫ßn g·ªçi ƒë·∫øn function n√†y ƒë·∫øn m·ª©c th·∫•p nh·∫•t.</p>\n<p>C√°ch vi·∫øt r·∫•t th∆∞·ªùng th·∫•y</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resize'</span><span class=\"token punctuation\">,</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Nh∆∞ng t·∫°i sao kh√¥ng s·ª≠ d·ª•ng n√≥ trong component callback?</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UnleashedOne</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onChange<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ch√∫ng ta ƒëang l·∫Øng nghe t·∫•t t·∫ßn t·∫≠t m·ªói khi c√≥ thay ƒë·ªïi tr√™n <code class=\"language-inline-text\">input</code>, nh∆∞ v·∫≠y th·ª±c s·ª± c√≥ c·∫ßn thi·∫øt kh√¥ng?</p>\n<p>ƒê·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ tr√™n, c√≥ th·ªÉ vi·∫øt l·∫°i component</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LeashedOne</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onChangeDebounce <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">debounce</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChangeDebounce</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onChange<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ª£i user nh·∫≠p xong ƒëi r·ªìi x·ª≠ l√Ω s·ª± ki·ªán, ·ªü ƒë√¢y s·ª≠ d·ª•ng <code class=\"language-inline-text\">_.debounce</code>, <code class=\"language-inline-text\">_.throttle</code> t·ª´ th∆∞ vi·ªán <strong>lodash</strong>, s·ª± kh√°c nhau c·ªßa 2 th·∫±ng n√†y th√¨ ƒë·ªçc th√™m tr√™n docs c·ªßa lodash.</p>\n<p>N·∫øu b·ªã nghi·ªán performance, b·∫°n c√≥ th·ªÉ chia s·∫ª th√™m m·ªôt s·ªë tip v·ªõi m√¨nh.</p>\n<p>Tham kh·∫£o th√™m </p>\n<ul>\n<li><a href=\"/2018-09-19-huong-dan-react-profiler-dev-tool\">Gi·ªõi thi·ªáu React Profiler</a></li>\n</ul>\n<p>T√†i li·ªáu tham kh·∫£o</p>\n<ul>\n<li><a href=\"https://medium.com/myheritage-engineering/how-to-greatly-improve-your-react-app-performance-e70f7cbbb5f6\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://medium.com/myheritage-engineering/how-to-greatly-improve-your-react-app-performance-e70f7cbbb5f6</a></li>\n<li><a href=\"https://logrocket-blog.ghost.io/death-by-a-thousand-cuts-a-checklist-for-eliminating-common-react-performance-issues/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://logrocket-blog.ghost.io/death-by-a-thousand-cuts-a-checklist-for-eliminating-common-react-performance-issues/</a></li>\n</ul>\n","cover_image":""}},{"node":{"id":"819a9c7b235ca822b9ba12c248406cf3","title":"Google Maps v√† React","path":"/2018-04-27-huong-dan-google-maps-va-react/","date":"2018-04-27","timeToRead":3,"desc":"H∆∞·ªõng S·ª≠ d·ª•ng google maps api trong React","content":"<p>Nh√∫ng Google Maps v√†o web site b√¨nh th∆∞·ªùng th√¨ qu√° s·ª©c ƒë∆°n gi·∫£n, ƒë·ªÉ s·ª≠ d·ª•ng v·ªõi React Js th√¨ h∆°i v·ª•ng c√¥ng m·ªôt ch√∫t.</p>\n<p>ƒê·ªÉ s·ª≠ d·ª•ng Google Maps API, ta ch·ªâ c·∫ßn load ƒëo·∫°n js t·ª´ googleapis, ch√®n th√™m m·ªôt c√°i <code class=\"language-inline-text\">div</code> v·ªõi id l√† <em>map</em> ch·∫±ng h·∫°n.</p>\n<div class=\"gridsome-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Basic Google Map on a web page<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>map<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&amp;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>ƒêo·∫°n script c·ªßa google s·∫Ω ƒë∆∞·ª£c load <strong>sau khi</strong> c√≥ static DOM, c√°i <code class=\"language-inline-text\">&lt;div id='map' /></code> l√∫c ƒë√≥ ƒë√£ t·ªìn t·∫°i v√† c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng tho·∫£i m√°i b·ªüi google maps api.</p>\n<p>Nh∆∞ng m√† trong React JS th√¨ DOM ƒë∆∞·ª£c render v√† re-render t·ª´ <strong>virtual DOM</strong>, m·ªôt file html c·ªßa app React JS th∆∞·ªùng l√† ch·ªâ c√≥ th·∫ø n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Simple React app<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>js/app.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>T·ª©c l√† n·∫øu l√†m nh∆∞ c√°ch b√¨nh th∆∞·ªùng ·ªü tr√™n th√¨ c√°i <code class=\"language-inline-text\">&lt;div id='map' /></code> ch∆∞a h·ªÅ t·ªìn t·∫°i tr√™n x√£ h·ªôi.</p>\n<h2 id=\"load-b·∫•t-ƒë·ªìng-b·ªô-asynchronous-loading\"><a href=\"#load-b%E1%BA%A5t-%C4%91%E1%BB%93ng-b%E1%BB%99-asynchronous-loading\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Load b·∫•t ƒë·ªìng b·ªô (Asynchronous Loading)</h2>\n<p>C·∫£ hai ƒëo·∫°n script React v√† Google maps ƒë·ªÅu ph·∫£i t·ªën th·ªùi gian ƒë·ªÉ load, ch√∫ng ta ph·∫£i ƒë·∫£m b·∫£o Google Map ch·ªâ ƒë∆∞·ª£c t·∫°o ra <strong>sau khi</strong> React app ƒë√£ kh·ªüi t·∫°o v√† render DOM xong. Tho·∫°t nh√¨n th√¨ d√πng asyn google map s·∫Ω l√† m·ªôt gi·∫£i ph√°p.</p>\n<div class=\"gridsome-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&amp;callback=initMap<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">async</span> <span class=\"token attr-name\">defer</span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>Ch√∫ng ta th√™m <code class=\"language-inline-text\">asyn</code> v√† <code class=\"language-inline-text\">defer</code> ƒë·ªÉ load ƒëo·∫°n googleapis n√†y sau c√πng, ƒë·ªìng th·ªùi th√™m h√†m <em>callback</em> sau khi load xong. N·∫øu <code class=\"language-inline-text\">initMap</code> l√† m·ªôt <em>global function</em> th√¨ ta c√≥ th·ªÉ g·ªçi n√≥ b√™n trong React Component</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">initMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">google<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>Map</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'map'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Bu·ªìn thay! Kh√¥ng ch·∫°y ƒë√¢u c√°c b·∫°n ·∫°. Ngay c·∫£ khi Google Maps ch·ªâ ƒë∆∞·ª£c load sau khi React ƒë∆∞·ª£c load, kh√¥ng c√≥ nghƒ©a l√† to√†n b·ªô c√¢y DOM ƒë√£ ƒë∆∞·ª£c <em>mount</em> v√† <em>render</em> khi th·ª±c thi h√†m <em>callback</em>.</p>\n<p>Ok, ch√∫ng ta c·∫ßn gi·∫£i ph√°p t·ªët h∆°n. V·ªÅ c∆° b·∫£n </p>\n<blockquote>\n<p>ch√∫ng ta mu·ªën load ƒëo·∫°n script c·ªßa google ngay khi <em>component</em> c√≥ s·ª≠ d·ª•ng ƒë·∫øn google api ƒë∆∞·ª£c <strong>mounted</strong></p>\n</blockquote>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">componentDidMount <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// tr·ªè global function window.initMap n√†y v√†o h√†m initMap c·ªßa component ƒë·ªÉ th·∫±ng google c√≥ th·ªÉ  g·ªçi trong h√†m callback</span>\n    window<span class=\"token punctuation\">.</span>initMap <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>initMap<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ch√®n ngay ƒëo·∫°n js c·ªßa googleapis cho anh x√†i ngay.</span>\n    <span class=\"token function\">loadJS</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&amp;callback=initMap'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function-variable function\">initMap</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">google<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>Map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>refs<span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">getDOMNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* c√°c options kh√°c*/</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nrender <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>map<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">height</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'500px'</span><span class=\"token punctuation\">,</span> <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'500px'</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">&lt;‚ÅÑdiv>\n        &lt;‚ÅÑdiv>\n    );\n}\n\n// h√†m n√†y ƒë·ªÉ ch√®n th√™m &lt;script /> sau khi g·ªçi\nfunction loadJS(src) </span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> ref <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"script\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> script <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"script\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    script<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> src<span class=\"token punctuation\">;</span>\n    script<span class=\"token punctuation\">.</span>async <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    ref<span class=\"token punctuation\">.</span>parentNode<span class=\"token punctuation\">.</span><span class=\"token function\">insertBefore</span><span class=\"token punctuation\">(</span>script<span class=\"token punctuation\">,</span> ref<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ªÉ √Ω l√† ta th√™m <code class=\"language-inline-text\">ref='map'</code> ƒë·ªÉ tr·ªè t·ªõi ƒë√∫ng c√°i <code class=\"language-inline-text\">div</code> s·ª≠ d·ª•ng ƒë·ªÉ ƒë∆∞a v√†o cho Google Map constructor b·∫±ng h√†m <code class=\"language-inline-text\">this.refs.map.getDOMNode()</code> ngay khi DOM ƒë√£ render.</p>\n<p>V·∫≠y l√† xong. Google Map ƒë√£ c√≥ th·ªÉ ho·∫°t ƒë·ªông tr∆°n tru v·ªõi React Component, ƒë√∫ng h∆°n l√† v·ªõi Virtual DOM.</p>\n<p>T√°c gi·∫£: klaasnotfound\nLink b√†i g·ªëc: <a href=\"http://www.klaasnotfound.com/2016/11/06/making-google-maps-work-with-react/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://www.klaasnotfound.com/2016/11/06/making-google-maps-work-with-react/</a></p>\n","cover_image":""}},{"node":{"id":"038bc8dd6494a9d7ff4a2ffd06cb8a36","title":"M·ªôt s·ªë c√°ch l√†m Animation trong React","path":"/2018-04-24-huong-dan-huong-dan-lam-animation-voi-react/","date":"2018-04-24","timeToRead":8,"desc":"T·ªïng h·ª£p m·ªôt s·ªë ph∆∞∆°ng ph√°p l√†m animation v·ªõi React","content":"<!-- TOC -->\n<ul>\n<li>\n<p><a href=\"#css-animation-d%E1%BB%B1a-tr%C3%AAn-component-state\">CSS animation d·ª±a tr√™n component state</a></p>\n<ul>\n<li><a href=\"#nh%C6%B0%E1%BB%A3c\">Nh∆∞·ª£c</a></li>\n<li><a href=\"#%C6%B0u\">∆Øu</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#js-style-animation-d%E1%BB%B1a-tr%C3%AAn-component-state\">JS Style animation d·ª±a tr√™n component state</a></p>\n<ul>\n<li><a href=\"#nh%C6%B0%E1%BB%A3c-1\">Nh∆∞·ª£c</a></li>\n<li><a href=\"#%C6%B0u-1\">∆Øu</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#react-motion-c%E1%BB%A7a-t%C3%A1c-gi%E1%BA%A3-cheng-louhttpsmediumcomchenglou\">React Motion c·ªßa t√°c gi·∫£ [Cheng Lou](https://medium.com/@chenglou)</a></p>\n<ul>\n<li><a href=\"#nh%C6%B0%E1%BB%A3c-2\">Nh∆∞·ª£c</a></li>\n<li><a href=\"#%C6%B0u-2\">∆Øu</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#th%C6%B0-vi%E1%BB%87n-animated\">Th∆∞ vi·ªán Animated</a></p>\n<ul>\n<li><a href=\"#nh%C6%B0%E1%BB%A3c-3\">Nh∆∞·ª£c</a></li>\n<li><a href=\"#%C6%B0u-3\">∆Øu</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#th%C6%B0-vi%E1%BB%87n-velocity-react\">Th∆∞ vi·ªán Velocity React</a></p>\n<ul>\n<li><a href=\"#nh%C6%B0%E1%BB%A3c-4\">Nh∆∞·ª£c</a></li>\n<li><a href=\"#%C6%B0u-4\">∆Øu</a></li>\n</ul>\n</li>\n<li><a href=\"#k%E1%BA%BFt-lu%E1%BA%ADn\">K·∫øt lu·∫≠n</a></li>\n</ul>\n<!-- /TOC -->\n<p>Ch√∫ng ta s·∫Ω ƒëi·ªÉm qua 5 c√°ch l√†m sau</p>\n<ol>\n<li>CSS animation d·ª±a tr√™n component <code class=\"language-inline-text\">state</code></li>\n<li>JS style animation d·ª±a tr√™n component <code class=\"language-inline-text\">state</code></li>\n<li>React Motion c·ªßa t√°c gi·∫£ Cheng Lou</li>\n<li>Th∆∞ vi·ªán Animated</li>\n<li>Th∆∞ vi·ªán Velocity-React</li>\n</ol>\n<p>To√†n b·ªô source <a href=\"https://github.com/react-native-training/react-animations\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">code demo</a></p>\n<h2 id=\"css-animation-d·ª±a-tr√™n-component-state\"><a href=\"#css-animation-d%E1%BB%B1a-tr%C3%AAn-component-state\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>CSS animation d·ª±a tr√™n component state</h2>\n<p>C√°ch c∆° b·∫£n v√† d·ªÖ h√¨nh dung nh·∫•t, s·ª≠ d·ª•ng class CSS, add/remove c√°c class n√†y ƒë·ªÉ th·ª±c thi m·ªôt animation. N·∫øu ƒëang s·ª≠ d·ª•ng CSS trong App r·ªìi th√¨ ƒë√¢y l√† c√°ch l√†m kh√° ok, performance kh√° t·ªët.</p>\n<h3 id=\"nh∆∞·ª£c\"><a href=\"#nh%C6%B0%E1%BB%A3c\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nh∆∞·ª£c</h3>\n<p>Kh√¥ng h·ªó tr·ª£ cross-platform, c∆° b·∫£n l√† kh√¥ng ch·∫°y ƒë∆∞·ª£c tr√™n React Native, ch·ªâ ch·∫°y c√°c tr√¨nh duy·ªát h·ªó tr·ª£ c√°c thu·ªôc t√≠nh CSS d√πng ƒë·ªÉ l√†m animation. Ph·ª• thu·ªôc v√†o CSS v√† DOM n√™n c≈©ng h·∫°n ch·∫ø c√°c thay ƒë·ªïi theo logic ph·ª©c t·∫°p.</p>\n<h3 id=\"∆∞u\"><a href=\"#%C6%B0u\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>∆Øu</h3>\n<p>Do ch·ªâ th·ª±c hi·ªán tr√™n CSS n√™n c√°c thu·ªôc t√≠nh thay ƒë·ªïi g·∫ßn nh∆∞ ch·ªâ l√† <code class=\"language-inline-text\">Opacity</code>, <code class=\"language-inline-text\">Transform</code>, performance kh√¥ng ph·∫£i l√† v·∫•n ƒë·ªÅ lo ng·∫°i, thay ƒë·ªïi c√°c gi√° tr·ªã n√†y theo <code class=\"language-inline-text\">state</code> c≈©ng ƒë∆∞∆°ng ƒë·ªëi d·ªÖ, smooth, kh√¥ng can thi·ªáp qu√° tr√¨nh <code class=\"language-inline-text\">render</code>.</p>\n<p>V√≠ d·ª• l√†m <em>transition</em> khi input focus</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*Gg4wRWbWlU01edcXmoPk2A.gif\"></p>\n<div class=\"gridsome-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.input</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">transition</span><span class=\"token punctuation\">:</span> width .35s linear<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">outline</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 4px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 150px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #dddddd<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.input-focused</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 240px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>K·∫øt h·ª£p v·ªõi React, ta s·∫Ω th√™m 2 event listener tr√™n input khi n√≥ <code class=\"language-inline-text\">focus</code> v√† <code class=\"language-inline-text\">blur</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">focused</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'focus'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>focus<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'blur'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>focus<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">focus</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">focused</span><span class=\"token operator\">:</span> <span class=\"token operator\">!</span>state<span class=\"token punctuation\">.</span>focused <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n            <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">input</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> input<span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">className</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>focused <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">'input-focused'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"js-style-animation-d·ª±a-tr√™n-component-state\"><a href=\"#js-style-animation-d%E1%BB%B1a-tr%C3%AAn-component-state\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JS Style animation d·ª±a tr√™n component state</h2>\n<p>C√°ch n√†y c≈©ng t∆∞∆°ng t·ª± nh∆∞ s·ª≠ d·ª•ng class CSS. Th·∫≠t l√† vi·∫øt inline css ƒë·ªÉ ta c√≥ th·ªÉ control ƒë∆∞·ª£c c√°c logic trong file js lu√¥n</p>\n<h3 id=\"nh∆∞·ª£c-1\"><a href=\"#nh%C6%B0%E1%BB%A3c-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nh∆∞·ª£c</h3>\n<p>T∆∞∆°ng t·ª± nh∆∞ CSS Animation</p>\n<h3 id=\"∆∞u-1\"><a href=\"#%C6%B0u-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>∆Øu</h3>\n<p>T∆∞∆°ng t·ª± nh∆∞ CSS Animation</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*JzdCEVZi3wFGg9YCSuAQRw.gif\"></p>\n<p>Ph∆∞∆°ng th·ª©c <code class=\"language-inline-text\">onChange</code> s·∫Ω ƒë∆∞·ª£c g·∫Øn v√†o input ƒë·ªÉ ki·ªÉm tra s·ªë ch·ªØ nh·∫≠p v√†o input, n·∫øu c√≥ 4 ho·∫∑c nhi·ªÅu h∆°n 4 k√Ω t·ª± ƒë∆∞·ª£c nh·∫≠p v√†o, thay ƒë·ªïi <em>state</em> <code class=\"language-inline-text\">disable</code> th√†nh <code class=\"language-inline-text\">false</code>. Button s·∫Ω animate tr√™n <code class=\"language-inline-text\">width</code> v√† <code class=\"language-inline-text\">backgroundColor</code> khi state <code class=\"language-inline-text\">disable</code> n√†y thay ƒë·ªïi.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">disabled</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">onChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>length <span class=\"token operator\">>=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">disabled</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>disabled<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">disabled</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> label <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>disabled <span class=\"token operator\">?</span> <span class=\"token string\">'Disabled'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Submit'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n          <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> styles<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">,</span> <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>disabled <span class=\"token operator\">&amp;&amp;</span> styles<span class=\"token punctuation\">.</span>buttonEnabled<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">disabled</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>disabled<span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>label<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n          <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onChange<span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> styles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">outline</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#ddd'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">marginTop</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">button</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">180</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">transition</span><span class=\"token operator\">:</span> <span class=\"token string\">'.25s all'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">buttonEnabled</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#ffc107'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">220</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"react-motion-c·ªßa-t√°c-gi·∫£-cheng-lou\"><a href=\"#react-motion-c%E1%BB%A7a-t%C3%A1c-gi%E1%BA%A3-cheng-lou\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>React Motion c·ªßa t√°c gi·∫£ <a href=\"https://medium.com/@chenglou\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Cheng Lou</a></h2>\n<p>Idea ƒëƒÉng sau React Motion l√† n√≥ s·∫Ω d·ª±a tr√™n API theo kh√°i ni·ªám \"Spring\", m·ªôt kh√°i ni·ªám l√†m animation r·∫•t ƒë√£ ƒë∆∞·ª£c b·∫£o ch·ª©ng ngon, l√†m vi·ªác t·ªët trong h·∫ßu h·∫øt c√°c t√¨nh hu·ªëng l√†m animation, n√≥ kh√¥ng ph·ª• thu·ªôc v√†o <em>timing</em>, nghƒ©a l√† trong c√°c tr∆∞·ªùng h·ª£p c·∫ßn <strong>d·ª´ng</strong>, <strong>undo</strong> m·ªôt animation gi·ªØa ch·ª´ng th√¨ l√†m ƒë∆∞·ª£c, ch·ª© kh√¥ng c·∫ßn ƒë·ª£i animation ch·∫°y h·∫øt.</p>\n<p>V·ªõi React Motion, ch√∫ng ta set c√°c gi√° tr·ªã ƒë·ªÉ config cho React Motion component, ch√∫ng ta s·∫Ω nh·∫≠n v·ªÅ m·ªôt callback ch·ª©a gi√° tr·ªã c·ªßa style, l·∫•y gi√° tr·ªã style n√†y ta set l·∫°i tr√™n component l√†m animation</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Motion</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token function\">spring</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> x <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translateX(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>x<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Motion</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3 id=\"nh∆∞·ª£c-2\"><a href=\"#nh%C6%B0%E1%BB%A3c-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nh∆∞·ª£c</h3>\n<p>Performance kh√¥ng m∆∞·ªõt b·∫±ng CSS/JS style trong m·ªôt s·ªë t√¨nh hu·ªëng. Ph·∫£i h·ªçc th√™m c√°ch ti·∫øp c·∫≠n kh√°i ni·ªám spring.</p>\n<h3 id=\"∆∞u-2\"><a href=\"#%C6%B0u-2\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>∆Øu</h3>\n<p>React Motion l√†m vi·ªác t·ªët tr√™n c·∫£ React Native v√† React Web, kh√°i ni·ªám \"spring\" tho·∫°t ƒë·∫ßu s·∫Ω r·∫•t l√† k·ª≥ khi s·ª≠ d·ª•ng, nh∆∞ng c·ª© x√†i d·∫ßn khi ƒë√£ th·∫Øm s·∫Ω th·∫•y n√≥ hay.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*jJTq3gD6MVLq3Rk-_1tN6Q.gif\"></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>Motion<span class=\"token punctuation\">,</span> spring<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-motion'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">38</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">animate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>height <span class=\"token operator\">===</span> <span class=\"token number\">233</span> <span class=\"token operator\">?</span> <span class=\"token number\">38</span> <span class=\"token operator\">:</span> <span class=\"token number\">233</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>animate<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Animate</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Motion</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token function\">spring</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token punctuation\">{</span>\n            <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> height <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> styles<span class=\"token punctuation\">.</span>menu<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> height <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>selection<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Selection 1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>selection<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Selection 2</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>selection<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Selection 3</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>selection<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Selection 4</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>selection<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Selection 5</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>selection<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Selection 6</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Motion</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> styles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">menu</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">overflow</span><span class=\"token operator\">:</span> <span class=\"token string\">'hidden'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'2px solid #ddd'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">300</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">marginTop</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">selection</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">borderBottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'1px solid #ededed'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">button</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">justifyContent</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">alignItems</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">45</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#ffc107'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>import <code class=\"language-inline-text\">Motion</code> v√† <code class=\"language-inline-text\">spring</code> t·ª´ <code class=\"language-inline-text\">react-motion</code></li>\n<li>Set gi√° tr·ªã kh·ªüi t·∫°o <code class=\"language-inline-text\">height = 38</code></li>\n<li>h√†m <code class=\"language-inline-text\">animate</code> s·∫Ω ki·ªÉm tra ƒë·ªô cao hi·ªán t·∫°i, n·∫øu l√† gi√° tr·ªã kh·ªüi t·∫°o th√¨ change n√≥ sang 250, ng∆∞·ª£c l·∫°i set v·ªÅ 38</li>\n<li>Trong h√†m render, s·ª≠ d·ª•ng Motion component ƒë·ªÉ wrap to√†n b·ªô c√°c tags <code class=\"language-inline-text\">p</code>, ƒë∆∞a gi√° tr·ªã <code class=\"language-inline-text\">this.state.height</code> v√†o cho h√†m <code class=\"language-inline-text\">spring</code>, n√≥ s·∫Ω tr·∫£ v·ªÅ m·ªôt gi√° tr·ªã <code class=\"language-inline-text\">heigh</code> m·ªõi, l·∫•y gi√° tr·ªã <code class=\"language-inline-text\">height</code> m·ªõi n√†y set l√™n th·∫±ng component</li>\n</ul>\n<h2 id=\"th∆∞-vi·ªán-animated\"><a href=\"#th%C6%B0-vi%E1%BB%87n-animated\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Th∆∞ vi·ªán Animated</h2>\n<p>Th∆∞ vi·ªán <a href=\"https://github.com/animatedjs/animated\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Animated</a> s·ª≠ d·ª•ng t∆∞∆°ng t·ª± nh∆∞ th∆∞ vi·ªán Animated d√πng trong React Native.</p>\n<p>√ù t∆∞·ªüng c∆° b·∫£n c·ªßa Animated l√† t·∫°o ra c√°c animation theo ki·ªÉu khai b√°o <strong>declarative</strong>, truy·ªÅn m·ªôt object ƒë·ªÉ config chuy·ªán g√¨ s·∫Ω x·∫£y ra khi ch·∫°y animation.</p>\n<h3 id=\"nh∆∞·ª£c-3\"><a href=\"#nh%C6%B0%E1%BB%A3c-3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nh∆∞·ª£c</h3>\n<p>Ch∆∞a ƒë∆∞·ª£c 100% stable tr√™n web theo nh∆∞ th·ª±c nghi·ªám, c√°c tr√¨nh duy·ªát c≈©, m·ªôt s·ªë v·∫•n ƒë·ªÅ x·∫£y ra v·ªõi performance</p>\n<h3 id=\"∆∞u-3\"><a href=\"#%C6%B0u-3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>∆Øu</h3>\n<p>Cross Platform. ƒê√£ ƒë∆∞·ª£c ki·ªÉm ch·ª©ng trong React Native, n·∫øu ƒë√£ h·ªçc c√°ch s·ª≠ d·ª•ng n√≥ th√¨ c√≥ th·ªÉ √°p d·ª•ng lu√¥n l√∫c l√†m React Native.</p>\n<p>ƒê·ªÉ t√¨m hi·ªÉu th√™m v·ªÅ th∆∞ vi·ªán n√†y th√¨ c√≥ th·ªÉ th·∫£m kh·∫£o <a href=\"http://browniefed.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">blog</a> v√† <a href=\"https://egghead.io/instructors/jason-brown-20a6bf03-254a-428c-9984-dca76cc84f32\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">video</a> c·ªßa Jason Brown</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*6lWQD3_uLWTcEFZpR04tWA.gif\"></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> Animated <span class=\"token keyword\">from</span> <span class=\"token string\">'animated/lib/targets/react-dom'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Easing <span class=\"token keyword\">from</span> <span class=\"token string\">'animated/lib/Easing'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  animatedValue <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Animated<span class=\"token punctuation\">.</span>Value</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function-variable function\">animate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>animatedValue<span class=\"token punctuation\">.</span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    Animated<span class=\"token punctuation\">.</span><span class=\"token function\">timing</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>animatedValue<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">toValue</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">easing</span><span class=\"token operator\">:</span> Easing<span class=\"token punctuation\">.</span><span class=\"token function\">elastic</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> marginLeft <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>animatedValue<span class=\"token punctuation\">.</span><span class=\"token function\">interpolate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">inputRange</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">outputRange</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">120</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>animate<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Animate</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Animated.div</span>\n            <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>\n              Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span>\n                <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                styles<span class=\"token punctuation\">.</span>box<span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">opacity</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>animatedValue<span class=\"token punctuation\">,</span> marginLeft <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Thanks for your submission!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Animated.div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>Kh·ªüi t·∫°o m·ªôt class animateValue v·ªõi gi√° tr·ªã ban ƒë·∫ßu l√† 0</li>\n<li>Khai b√°o h√†m <code class=\"language-inline-text\">animate</code>, h√†m n√†y s·∫Ω handle t·∫•t c·∫£ animation s·∫Ω th·ª±c thi, b√™n trong h√†m n√†y ta set gi√° tr·ªã v·ªÅ 0 b·∫±ng <code class=\"language-inline-text\">this.animatedValue.setValue(0)</code> ƒë·ªÉ trigger animation ch·∫°y m·ªói khi h√†m ƒë∆∞·ª£c g·ªçi. Khi g·ªçi Animated.timing, truy·ªÅn v√†o c√°c gi√° tr·ªã s·∫Ω animate, gi√° tr·ªã ban ƒë·∫ßu, gi√° tr·ªã l√∫c k·∫øt th√∫c animate, duration, easing.</li>\n<li>Trong h√†m render, ch√∫ng ta t·∫°o m·ªôt gi√° tr·ªã m·ªõi <code class=\"language-inline-text\">marginLeft</code> s·ª≠ d·ª•ng h√†m <code class=\"language-inline-text\">interpolate</code>, h√†m n√†y s·∫Ω nh·∫≠n v·ªÅ m·∫£ng <code class=\"language-inline-text\">inputRange</code> v√† <code class=\"language-inline-text\">outputRange</code>, n√≥ s·∫Ω t·∫°o ra gi√° tr·ªã m·ªõi d·ª±a tr√™n input v√† output. Ch√∫ng ta l·∫•y gi√° tr·ªã output n√†y ƒë·ªÉ set cho thu·ªôc t√≠nh <code class=\"language-inline-text\">marginLeft</code></li>\n<li>Thay v√¨ s·ª≠ d·ª•ng <code class=\"language-inline-text\">div</code> ch√∫ng ta ph·∫£i s·ª≠ d·ª•ng <code class=\"language-inline-text\">Animated.div</code></li>\n</ul>\n<h2 id=\"th∆∞-vi·ªán-velocity-react\"><a href=\"#th%C6%B0-vi%E1%BB%87n-velocity-react\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Th∆∞ vi·ªán Velocity React</h2>\n<p>Th∆∞ vi·ªán <a href=\"https://github.com/google-fabric/velocity-react\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Velocity React</a> d·ª±a tr√™n th∆∞ vi·ªán Velocity DOM, phi√™n b·∫£n <strong>React</strong> c·ªßa Velocity.</p>\n<p>C√≥ th·ªÉ n√≥i c√°c API c·ªßa Velocity React l√† s·ª± k·∫øt h·ª£p gi·ªØa Animated v√† React Motion. Nh√¨n chung l√† m·ªôt th∆∞ vi·ªán kh√° th√∫ v·ªã, n·∫øu ch·ªâ ƒëang l√†m web, am t∆∞·ªüng Velocity th√¨ v√¥ t∆∞ s·ª≠ d·ª•ng.</p>\n<h3 id=\"nh∆∞·ª£c-4\"><a href=\"#nh%C6%B0%E1%BB%A3c-4\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nh∆∞·ª£c</h3>\n<p>H∆°i k·ª≥ l√† n√≥ kh√¥ng ch·∫°y tr√™n <code class=\"language-inline-text\">componentDidMount</code> m√† b·∫°n ph·∫£i khai b√°o <code class=\"language-inline-text\">runOnMount</code>, kh√¥ng h·ªó tr·ª£ cross-platform</p>\n<h3 id=\"∆∞u-4\"><a href=\"#%C6%B0u-4\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>∆Øu</h3>\n<p>API kh√° simple v√† d·ªÖ hi·ªÉu, d·ªÖ c√†i ch·∫°y c≈©ng ngon</p>\n<p>Khai b√°o simple nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VelocityComponent</span></span>\n  <span class=\"token attr-name\">animation</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">opacity</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>showSubComponent <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>      \n  <span class=\"token attr-name\">duration</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">500</span><span class=\"token punctuation\">}</span></span>\n<span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MySubComponent</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">VelocityComponent</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*NaL_X8_q3nr1tasEkDWW6w.gif\"></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> VelocityComponent <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'velocity-react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">VelocityLetter</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> letter <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VelocityComponent</span></span>\n    <span class=\"token attr-name\">runOnMount</span>\n    <span class=\"token attr-name\">animation</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">opacity</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">marginTop</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">duration</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">500</span><span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>letter<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>letter<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">VelocityComponent</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">letters</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">onChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> letters <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    letters<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">l<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      arr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">VelocityLetter</span></span> <span class=\"token attr-name\">letter</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>l<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">letters</span><span class=\"token operator\">:</span> arr <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>onChange<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>styles<span class=\"token punctuation\">.</span>letters<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>letters\n            <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> styles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#ddd'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">outline</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">marginBottom</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token number\">22</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">letters</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">140</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">letter</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">opacity</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">marginTop</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token number\">22</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">whiteSpace</span><span class=\"token operator\">:</span> <span class=\"token string\">'pre'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"k·∫øt-lu·∫≠n\"><a href=\"#k%E1%BA%BFt-lu%E1%BA%ADn\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>K·∫øt lu·∫≠n</h1>\n<p>V·ªõi c√°c animation ƒë∆°n gi·∫£n m√¨nh s·∫Ω s·ª≠ d·ª•ng JS Style animation, c√≤n khi g·∫∑p c√°c animation ƒëi√™n kh√πng c·ªßa t·ª•i design th√¨ nghƒ© t·ªõi React Motion, n·∫øu l√† React Native, m√¨nh s·∫Ω lu√¥n s·ª≠ d·ª•ng Animated.</p>\n","cover_image":""}},{"node":{"id":"6f0a36bc96e70468240bed06d352fce7","title":"Gi·∫£i th√≠ch Observer Pattern trong javascript","path":"/2018-04-17-huong-dan-giai-thich-observer-pattern-trong-javascript/","date":"2018-04-17","timeToRead":3,"desc":"Observer l√† m·ªôt pattern kh√° ph·ªï bi·∫øn trong javascript, b√†i gi·∫£i th√≠ch ng·∫Øn g·ªçn v·ªÅ pattern n√†y","content":"<p>M√¨nh l·∫•y m·ªôt pattern trong cu·ªôc s·ªëng ƒë·ªÉ b·∫°n d·ªÖ h√¨nh dung tr∆∞·ªõc: c∆° quan ph√°t thanh c·ªßa th·ªã tr·∫•n, qu·∫£n l√Ω to√†n b·ªô c√°c loa ph√°t thanh xung quanh th·ªã tr·∫•n. Khi c√≥ m·ªôt c√¥ng d√¢n trong th·ªã tr·∫•n ƒëƒÉng k√Ω k·∫øt h√¥n, m·∫•t tr·ªôm,... m·ªôt s·ª± ki·ªán n√†o ƒë√≥ x·∫£y ra trong th·ªã tr·∫•n, c∆° quan n√†y s·∫Ω lan tin t·ª©c ƒë·∫øn to√†n b·ªô d√¢n l√†ng, n·∫øu tin t·ª©c n√†y li√™n quan ƒë·∫øn ng∆∞·ªùi n√†o ƒë√≥, v√≠ d·ª• anh n√†y c√≥ h·∫πn h√≤ v·ªõi ch·ªã kia m√† c√≤n ƒëƒÉng k√Ω k·∫øt h√¥n ch·ªã n·ªç, th√¨ c√°c nh√† ƒë√≥ t·ª± gi·∫£i quy·∫øt v·ªõi nhau.</p>\n<p>Gi·ªù ph√¢n vai</p>\n<ul>\n<li><strong>Observable</strong>: c∆° quan ph√°t thanh</li>\n<li><strong>Observer</strong>: c√°c h·ªô d√¢n trong x√£</li>\n<li><strong>Notify</strong>: h√†nh ƒë·ªông lan tin cho to√†n x√£</li>\n</ul>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Observable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// ch·ª©a danh s√°ch c√°c h·ªô d√¢n trong x√£</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>observers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token comment\">// th√™m h·ªô d√¢n m·ªõi v√†o x√£ m√¨nh</span>\n    <span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">f</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>observers<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// b·ªè x√£ ra ƒëi</span>\n    <span class=\"token function\">unsubscribe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">f</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>observers <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>observers<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">subscriber</span> <span class=\"token operator\">=></span> subscriber <span class=\"token operator\">!==</span> f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// lan tin cho to√†n x√£</span>\n    <span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>observers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">observer</span> <span class=\"token operator\">=></span> <span class=\"token function\">observer</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>V√≠ d·ª• s·ª≠ d·ª•ng</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> input <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.js-input'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> p1 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.js-p1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> p2 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.js-p2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> p3 <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.js-p3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// m·ªôt s·ªë h√†nh ƒë·ªông s·∫Ω l√†m khi nghe tin t·ª´ loa ph∆∞·ªùng</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">updateP1</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">text</span> <span class=\"token operator\">=></span> p1<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> text<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">updateP2</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">text</span> <span class=\"token operator\">=></span> p2<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> text<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">updateP3</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">text</span> <span class=\"token operator\">=></span> p3<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> text<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// th√†nh l·∫≠p ·ªßy ban loa ph∆∞·ªùng</span>\n<span class=\"token keyword\">const</span> headingsObserver <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Observable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// cho em ƒëƒÉng k√Ω v·ªõi m·∫•y anh ∆°i</span>\nheadingsObserver<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>updateP1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheadingsObserver<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>updateP2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nheadingsObserver<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span>updateP3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// khi gi√° tr·ªã input thay ƒë·ªïi</span>\n<span class=\"token comment\">// b·∫Øn tin t·ª©c n√†y ƒë·∫øn cho c·∫£ l√†ng</span>\ninput<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'keyup'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  headingsObserver<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ƒê√¢y l√† phi√™n b·∫£n si√™u ƒë∆°n gi·∫£n c·ªßa observer pattern, n·∫øu mu·ªën t√¨m hi·ªÉu s√¢u h∆°n n·ªØa b·∫°n c√≥ th·ªÉ ƒë·ªçc <a href=\"https://addyosmani.com/resources/essentialjsdesignpatterns/book/#observerpatternjavascript\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Learning Javascript Design Patterns</a> c·ªßa anh Addy Osmani. Observe pattern c√≤n ƒë∆∞·ª£c g·ªçi \"Publication/Subscription\", th·∫≠t ra th√¨ n√≥ c√≥ x√≠u kh√°c bi·ªát m√† Addy <a href=\"https://addyosmani.com/resources/essentialjsdesignpatterns/book/#observerpatternjavascript\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ƒë√£ ƒë·ªÅ c·∫≠p</a></p>\n<p>Trong Observer pattern, <em>Observer</em> (object) mu·ªën nh·∫≠n th√¥ng b√°o ph·∫£i ƒëƒÉng k√Ω h·ªô kh·∫©u (subscribe), trong khi ƒë√≥ Publish/Subscribe pattern s·ª≠ d·ª•ng nh∆∞ m·ªôt c·∫ßu n·ªëi ƒë·ª©ng gi·ªØa object mu·ªën nh·∫≠n th√¥ng b√°o (subscriber) v√† object b·∫Øn ra s·ª± ki·ªán (publisher), √Ω t∆∞·ªüng ·ªü ƒë√¢y l√† ƒë·ªÉ t√°ch s·ª± ph·ª• thu·ªôc c·ªßa subscriber v√† publisher. Gi·ªëng nh∆∞ Youtube h·ªç ko t·ª± s·∫£n xu·∫•t video m√† c√°c b·∫°n Youtuber l√†m video v√† ph√°t qua k√™nh Youtube</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// email ƒë√£ nh·∫≠n</span>\n<span class=\"token keyword\">var</span> mailCounter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token comment\">// kh·ªüi t·∫°o subscriber s·∫Ω l·∫Øng nghe s·ª± ki·ªán \"inbox/newMessage\" </span>\n<span class=\"token keyword\">var</span> subscriber1 <span class=\"token operator\">=</span> <span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"inbox/newMessage\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span> <span class=\"token parameter\">topic<span class=\"token punctuation\">,</span> data</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n \n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"A new message was received: \"</span><span class=\"token punctuation\">,</span> topic <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   \n  <span class=\"token comment\">// D√πng d·ªØ li·ªáu tr·∫£ v·ªÅ ƒë·ªÉ render v√† n·ªôi dung  </span>\n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\".messageSender\"</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">html</span><span class=\"token punctuation\">(</span> data<span class=\"token punctuation\">.</span>sender <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\".messagePreview\"</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">html</span><span class=\"token punctuation\">(</span> data<span class=\"token punctuation\">.</span>body <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token comment\">// M·ªôt subscriber kh√°c c≈©ng l·∫Øng nghe s·ª± ki·ªán n√†y v√† th·ª±c hi·ªán m·ªôt t√°c v·ª• kh√°c </span>\n<span class=\"token comment\">// Update l·∫°i counter </span>\n<span class=\"token keyword\">var</span> subscriber2 <span class=\"token operator\">=</span> <span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"inbox/newMessage\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span> <span class=\"token parameter\">topic<span class=\"token punctuation\">,</span> data</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.newMessageCounter'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">html</span><span class=\"token punctuation\">(</span> <span class=\"token operator\">++</span>mailCounter <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token function\">publish</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"inbox/newMessage\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">sender</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hello@google.com\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hey there! How are you doing today?\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token comment\">// unsubscribe( subscriber1 );</span>\n<span class=\"token comment\">// unsubscribe( subscriber2 );</span></code></pre></div>\n<p>T·ª©c l√† ·ªü ƒë√¢y th·∫±ng Observer ta m√≥c n√≥ v√†o s·ª± ki·ªán x·∫£y ra tr√™n ƒë·ªëi t∆∞·ª£ng (v√≠ d·ª• tr√™n l√† input), c√≤n Pub/Sub th√¨ s·∫Ω c√≥ th·∫±ng ƒë·ª©ng gi·ªØa 2 ƒë·ª©a, l√†m nhi·ªám v·ª• cung c·∫•p 2 h√†m l√† <code class=\"language-inline-text\">publish</code> ƒë·ªÉ t·∫°o s·ª± ki·ªán, <code class=\"language-inline-text\">subscribe</code> ƒë·ªÉ l·∫Øng nghe s·ª± ki·ªán.</p>\n","cover_image":""}},{"node":{"id":"1791be0a9e147d1a847171d0eaedb2be","title":"Gi·ªõi thi·ªáu Expo, nh·∫≠p m√¥n React Native","path":"/2018-04-16-huong-dan-react-native-bat-dau-voi-expo/","date":"2018-04-16","timeToRead":3,"desc":"ƒê·ªÉ b·∫Øt ƒë·∫ßu v·ªõi React Native, c√°ch nhanh nh·∫•t kh√¥ng c·∫ßn c√†i Android Studio, Xcode c√≥ ngay m√¥i tr∆∞·ªùng ƒë·ªÉ ch·∫°y test React Native th√¨ Expo ch√≠nh l√† c√°i b·∫°n c·∫ßn","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#expo-l%C3%A0-c%C3%A1i-g%C3%AC\">Expo l√† c√°i g√¨</a></li>\n<li><a href=\"#h%E1%BA%A1n-ch%E1%BA%BF-c%E1%BB%A7a-expo\">H·∫°n ch·∫ø c·ªßa Expo</a></li>\n<li><a href=\"#app-s%E1%BA%BD-vi%E1%BA%BFt\">App s·∫Ω vi·∫øt</a></li>\n<li><a href=\"#c%C3%A0i-expo\">C√†i Expo</a></li>\n<li><a href=\"#t%E1%BA%A1o-m%E1%BB%99t-d%E1%BB%B1-%C3%A1n-expo-m%E1%BB%9Bi\">T·∫°o m·ªôt d·ª± √°n Expo m·ªõi</a></li>\n<li><a href=\"#ch%E1%BA%A1y-code-v%C3%AD-d%E1%BB%A5\">Ch·∫°y code v√≠ d·ª•</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"expo-l√†-c√°i-g√¨\"><a href=\"#expo-l%C3%A0-c%C3%A1i-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Expo l√† c√°i g√¨</h2>\n<p>Expo l√† m·ªôt framework ƒë·ªÉ ƒë·∫©y nhanh vi·ªác vi·∫øt app React Native. Gi·ªëng nh∆∞ Laravel hay Symphony cho PHP, Ruby on Rail c·ªßa Ruby. ƒê·ªìng th·ªùi cung c·∫•p m·ªôt c√¥ng c·ª• ƒë·ªÉ ch·∫°y th·ª≠ v√† debug.</p>\n<h2 id=\"h·∫°n-ch·∫ø-c·ªßa-expo\"><a href=\"#h%E1%BA%A1n-ch%E1%BA%BF-c%E1%BB%A7a-expo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>H·∫°n ch·∫ø c·ªßa Expo</h2>\n<p>Tr∆∞·ªõc khi nghi√™n c·ª©u ti·∫øp, m·ªôt v√†i v·∫•n ƒë·ªÅ quan tr·ªçng sau c·∫ßn bi·∫øt</p>\n<ol>\n<li><strong>Expo ch·ªâ h·ªó tr·ª£ nh·ªØng API m√† Expo SDK h·ªó tr·ª£</strong>, c√≥ nghƒ©a l√†, n·∫øu ·ª©ng d·ª•ng ƒëang vi·∫øt c·∫ßn t∆∞∆°ng t√°c v·ªõi Bluetooh, v·ªën kh√¥ng ƒë∆∞·ª£c h·ªó tr·ª£ b·ªüi Expo SDK th√¨ b·∫°n ph·∫£i vi·∫øt code React Native thu·∫ßn lu√¥n, ho·∫∑c t·ª± vi·∫øt th√™m native code s·ª≠ d·ª•ng th∆∞ vi·ªán <a href=\"https://docs.expo.io/versions/latest/expokit/expokit\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ExpoKit</a>.</li>\n<li><strong>S·ª≠ d·ª•ng Expo l√† ch·∫øt d√≠nh v·ªõi b·ªô toolset c·ªßa n√≥</strong>. M·ªôt s·ªë ƒë·ªì ch∆°i s·∫Ω kh√¥ng ch·∫°y ƒë∆∞·ª£c v·ªõi Expo, trong tr∆∞·ªùng h·ª£p c·∫ßn x√†i t·ªõi, ph·∫£i <code class=\"language-inline-text\">eject</code> c√°i app ra kh·ªèi Expo, m√† khi ƒë√£ <code class=\"language-inline-text\">eject</code> th√¨ s·∫Ω ko th·ªÉ c√≥ <code class=\"language-inline-text\">inject</code> ng∆∞·ª£c l·∫°i.</li>\n<li><strong>·ª®ng d·ª•ng Expo ch·ªâ build online</strong>. Expo cung c·∫•p m·ªôt c√¥ng c·ª• command-line l√† <em>Exp</em>, cho ph√©p vi·ªác build l√™n Expo Server, m·ªôt khi ho√†n t·∫•t, m·ªôt URL ƒë·ªÉ download <strong>.apk</strong> ho·∫∑c <strong>ipa</strong>, <a href=\"https://docs.expo.io/versions/latest/distribution/building-standalone-apps\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">B√†i h∆∞·ªõng d·∫´n</a></li>\n</ol>\n<p>M·∫∑c d√π nghe c√≥ v·∫ª kh√° h·∫°n ch·∫ø, nh∆∞ng th·ª±c s·ª± Expo r·∫•t m·∫°nh, r·∫•t nhi·ªÅu th·ª© h·ªó tr·ª£ s·∫µn cho Android v√† iOS. C√≥ nghƒ©a l√† n·∫øu app ƒëang vi·∫øt kh√¥ng c√≥ g√¨ qu√° ƒë·∫∑c bi·ªát, qu√° \"ƒë·ªânh c·ªßa ƒë·ªânh\" th√¨ vi·ªác s·ª≠ d·ª•ng Expo s·∫Ω mang t·ªõi r·∫•t nhi·ªÅu l·ª£i √≠ch.</p>\n<h2 id=\"app-s·∫Ω-vi·∫øt\"><a href=\"#app-s%E1%BA%BD-vi%E1%BA%BFt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>App s·∫Ω vi·∫øt</h2>\n<p>L√†m c√°i game ki·ªÉu t√¨m c·∫∑p</p>\n<p><img src=\"https://cms-assets.tutsplus.com/uploads/users/1125/posts/30546/image/memory-game-default.png\" alt=\"Gi·ªõi thi·ªáu Expo, nh·∫≠p m√¥n React Native\"></p>\n<p>V√† ƒë√¢y l√† m·∫∑t kia c·ªßa th·∫ª</p>\n<p><img src=\"https://cms-assets.tutsplus.com/uploads/users/1125/posts/30546/image/memory-game-done.png\" alt=\"Gi·ªõi thi·ªáu Expo, nh·∫≠p m√¥n React Native\"></p>\n<p>Sau khi t√¨m ra ƒë∆∞·ª£c h·∫øt c√°c c·∫∑p, user nh·∫•n reset ƒë·ªÉ ch∆°i l·∫°i</p>\n<h2 id=\"c√†i-expo\"><a href=\"#c%C3%A0i-expo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C√†i Expo</h2>\n<p>Kh√¥ng gi·ªëng v·ªõi vi·ªác vi·∫øt React Native thu·∫ßn, ch√∫ng ta ph·∫£i c√†i v√† c·∫•u h√¨nh Android Studio, Xcode v√† m·ªôt s·ªë th·ª© linh tinh kh√°c, t·∫•t c·∫£ nh·ªØng g√¨ ƒë·ªÉ b·∫Øt ƒë·∫ßu v·ªõi Expo l√†</p>\n<p><em>D·∫°o n√†y n√≥ c√≥ th√™m c√°i service Snack ƒë·ªÉ l√†m online kh√° ngon.</em></p>\n<ol>\n<li>C√†i Node.js, vi·∫øt React th√¨ ph·∫£i c√≥ r·ªìi</li>\n<li>C√†i Expo Client tr√™n thi·∫øt b·ªã iOS ho·∫∑c Android, c√°i n√†y ƒë·ªÉ preview app. L√™n App Store, Google Play t·∫£i v·ªÅ</li>\n<li>C√†i b·ªô CLI tool c·ªßa Expo, ƒë·ªÉ m√† kh·ªüi ch·∫°y m·ªôt d·ª± √°n Expo m·ªõi, ch·∫°y build,... d·ªÖ l·∫Øm nh∆∞ sau</li>\n</ol>\n<div class=\"gridsome-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> expo --global\n\n// init m·ªôt project m·ªõi\nexpo init luckyluu-project\n<span class=\"token builtin class-name\">cd</span> luckyluu-project\nexpo start</code></pre></div>\n<h2 id=\"t·∫°o-m·ªôt-d·ª±-√°n-expo-m·ªõi\"><a href=\"#t%E1%BA%A1o-m%E1%BB%99t-d%E1%BB%B1-%C3%A1n-expo-m%E1%BB%9Bi\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·∫°o m·ªôt d·ª± √°n Expo m·ªõi</h2>\n<p>M·ªôt khi ho√†n t·∫•t 3 th·ª© c√¥ng vi·ªác ƒë∆°n gi·∫£n tr√™n, gi·ªù ch√∫ng ta t·∫°o m·ªôt app m·ªõi</p>\n<div class=\"gridsome-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">exp init MemoryGame\n\n// tr·ªè v√¥ th∆∞ m·ª•c m·ªõi t·∫°o\n<span class=\"token builtin class-name\">cd</span> MemoryGame\n\n// Let ruuuuuuun\nexp start</code></pre></div>\n<p>N·∫øu s·ª≠ d·ª•ng Expo XDE th√¨ c√≥ th·ªÉ t·∫°o v√† ch·∫°y Expo app qua giao di·ªán, <a href=\"https://github.com/expo/xde/releases\" target=\"_blank\" rel=\"noopener noreferrer\">t·∫£i ·ªü ƒë√¢y n√®</a>. Sau khi ch·∫°y xong th√¨ tr√™n m√†n h√¨nh command-line s·∫Ω c√≥ ƒëo·∫°n QR code</p>\n<p><img src=\"https://cms-assets.tutsplus.com/uploads/users/1125/posts/30546/image/run-dev-server.png\" alt=\"Gi·ªõi thi·ªáu Expo, nh·∫≠p m√¥n React Native\"></p>\n<p>R√∫t ƒëi·ªán tho·∫°i ra, m·ªü app Expo l√™n, qu√©t ƒëo·∫°n QR code n√†y v√† xong. S·∫Ω th·∫•y m√†n h√¨nh m·∫∑c ƒë·ªãnh c·ªßa ·ª©ng d·ª•ng, m·ªói l·∫ßn b·∫•m <code class=\"language-inline-text\">Ctrl + S</code> l√† n√≥ s·∫Ω t·ª± ƒë·ªông load l·∫°i.</p>\n<p>V·ªõi b·∫°n n√†o ƒëang x√†i Iphone, g·∫ßn ƒë√¢y Expo ph·∫£i x√≥a c√°i qu√©t m√£ QR ra kh·ªèi app v√¨ b·ªã Apple ch·ª≠i b·ªõi, tr√™n b·ªô c√¥ng c·ª• debug m·ªõi (l√∫c ch·∫°y expo start n√≥ s·∫Ω m·ªü l√™n tr√¨nh duy·ªát), b·∫°n ch·ªâ c·∫ßn ch·ªçn g·ª≠i link qua email</p>\n<h2 id=\"ch·∫°y-code-v√≠-d·ª•\"><a href=\"#ch%E1%BA%A1y-code-v%C3%AD-d%E1%BB%A5\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ch·∫°y code v√≠ d·ª•</h2>\n<p>To√†n b·ªô code v√≠ d·ª• c√≥ th·ªÉ <a href=\"https://github.com/tutsplus/easier-react-native-development-with-expo\" target=\"_blank\" rel=\"noopener noreferrer\">download ·ªü ƒë√¢y</a>, b·∫°n c√≥ th·ªÉ down v·ªÅ ch·∫°y th·ª≠. M√¨nh kh√¥ng ph√¢n t√≠ch to√†n b·ªô code v√¨ m√¨nh ch·ªâ t·∫≠p trung gi·ªõi thi·ªáu v·ªÅ Expo, m√¨nh m·∫∑c ƒë·ªãnh c√°c b·∫°n ƒë√£ bi·∫øt React, React Native cƒÉn b·∫£n nh√©.</p>\n<p><a href=\"https://code.tutsplus.com/tutorials/easier-react-native-development-with-expo--cms-30546\" target=\"_blank\" rel=\"noopener noreferrer\">Wern Ancheta</a></p>\n","cover_image":""}},{"node":{"id":"8eedc3591fcf6d3c79f1d05a3ad61ae6","title":"Danh s√°ch ƒë·ªì ch∆°i ƒë·ªÉ b·∫Øt ƒë·∫ßu v·ªõi React Native","path":"/2018-04-04-huong-dan-danh-sach-doi-choi-voi-react-native/","date":"2018-04-04","timeToRead":4,"desc":"ƒê·ªÉ b·∫Øt ƒë·∫ßu v√† ƒë√†o s√¢u v·ªçc v·∫°ch v·ªõi React Native, b·∫°n s·∫Ω c·∫ßn ƒë·ª•ng t·ªõi nh·ªØng m√≥n ƒë·ªì ch∆°i sau","content":"<!-- TOC -->\n<ul>\n<li>\n<p><a href=\"#%C4%91%E1%BB%93-ch%C6%A1i-development\">ƒë·ªì ch∆°i Development</a></p>\n<ul>\n<li><a href=\"#sdk\">SDK</a></li>\n<li><a href=\"#check-code-chu%E1%BA%A9n\">Check code chu·∫©n</a></li>\n<li><a href=\"#debugging\">Debugging</a></li>\n</ul>\n</li>\n<li><a href=\"#boilerplate-v%C3%A0-ui-frameworks\">Boilerplate v√† UI Frameworks</a></li>\n<li><a href=\"#th%C6%B0-vi%E1%BB%87n-v%C3%A0-components\">Th∆∞ vi·ªán v√† components</a></li>\n<li>\n<p><a href=\"#web-services\">Web Services</a></p>\n<ul>\n<li><a href=\"#database\">Database</a></li>\n<li><a href=\"#analytics\">Analytics</a></li>\n<li><a href=\"#push-notifications\">Push Notifications</a></li>\n<li><a href=\"#code-update\">Code update</a></li>\n</ul>\n</li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"ƒë·ªì-ch∆°i-development\"><a href=\"#%C4%91%E1%BB%93-ch%C6%A1i-development\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒë·ªì ch∆°i Development</h2>\n<h3 id=\"sdk\"><a href=\"#sdk\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>SDK</h3>\n<p>Ch∆∞a ai qua m·∫∑t ƒë∆∞·ª£c <a href=\"https://expo.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Expo</a>. Expo cho ph√©p d·ª±ng app m√† ko c·∫ßn Android Studio hay Xcode.</p>\n<p>Workflow ƒë·ªÉ l√†m vi·ªác v·ªõi Expo</p>\n<ol>\n<li>T·∫°o project m·ªõi s·ª≠ d·ª•ng <a href=\"https://github.com/react-community/create-react-native-app\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">create-react-native-app</a></li>\n<li>Code, code v√† code...</li>\n<li>Ch·∫°y th·ª≠ b·∫±ng Expo app c√≥ th·ªÉ t√¨m th·∫•y trong app store, google play</li>\n</ol>\n<p>Kh√¥ng c·∫ßn k·∫øt n·ªëi ƒëi·ªán tho·∫°i v·ªõi m√°y t√≠nh, ch·ªâ c·∫ßn ƒëi·ªán tho·∫°i k·∫øt n·ªëi c√πng m·∫°ng v·ªõi localhost ƒëang ch·∫°y, ƒëi·ªán tho·∫°i c√≥ c√†i Expo app, scan ƒëo·∫°n QR code tr√™n command line l√† ƒë∆∞·ª£c.</p>\n<p>ƒêi·ªÅu h·∫°n ch·∫ø c·ªßa Expo l√† n√≥ ko cho ph√©p c√†i th√™m m·ªôt s·ªë package kh√°c n·ªØa ngo√†i nh·ªØng package ƒë√£ ƒë∆∞·ª£c c√†i s·∫µn c·ªßa Expo nh∆∞ Camera, Facebook, Map. Tr∆∞·ªùng h·ª£p c·∫ßn nh·ªØng package n√†y, s·ª≠ d·ª•ng <code class=\"language-inline-text\">react-native init</code>, l√∫c ƒë√≥ b·∫°n ph·∫£i handle m·ªçi th·ª©, ph·ª©c t·∫°p h∆°n d√πng Expo.</p>\n<h3 id=\"check-code-chu·∫©n\"><a href=\"#check-code-chu%E1%BA%A9n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Check code chu·∫©n</h3>\n<p>N·∫øu b·ªã nghi·ªán code cho chu·∫©n nh∆∞ l√™ du·∫©n, ESLint l√† ng∆∞·ªùi b·∫°n ƒë·ªìng h√†nh, m√¨nh hay s·ª≠ d·ª•ng b·ªô style guide c·∫•u h√¨nh s·∫µn c·ªßa <a href=\"https://github.com/airbnb/javascript\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Airbnb's Javascript Style Guide</a>.</p>\n<p>N·∫øu s·ª≠ d·ª•ng ESLint th√¨ m√¨nh nghƒ© b·∫°n n√™n d√πng th√™m m·ªôt s·ªë plugin c·ªßa VSCode hay Atom, m·ªôt s·ªë plugin c·ªßa Sublime text m√¨nh c√†i v·ªÅ th√¨ ch·∫°y kh√¥ng nh∆∞ √Ω l·∫Øm.</p>\n<h3 id=\"debugging\"><a href=\"#debugging\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Debugging</h3>\n<p>·ª®ng d·ª•ng ch·∫°y tr√™n desktop <a href=\"https://infinite.red/reactotron\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Reactotron</a> cho ph√©p debug React v√† React Native v·ªõi nh·ªØng t√≠nh nƒÉng nh∆∞: inspecting, mofifying, subscribing, tracking HTTP, ƒëo performance ·ª©ng d·ª•ng, track error...</p>\n<h2 id=\"boilerplate-v√†-ui-frameworks\"><a href=\"#boilerplate-v%C3%A0-ui-frameworks\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Boilerplate v√† UI Frameworks</h2>\n<p><a href=\"https://github.com/bartonhammond/snowflake\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Snowflake</a> bao g·ªìm c·∫£ Frontend ƒë·∫øn Back-End code c·ªßa ·ª©ng d·ª•ng, m·ªôt l·ª±a ch·ªçn t·ªët ƒë·ªÉ b·∫Øt ƒë·∫ßu d·ª± √°n m·ªõi nhanh nh·∫•t.</p>\n<p>React Native c√≥ s·∫µn m·ªôt s·ªë components UI c∆° b·∫£n, n·∫øu mu·ªën custome style th√¨ ch√∫ng ta ph·∫£i vi·∫øt th√™m CSS, c√≤n kh√¥ng, n·∫øu mu·ªën nhi·ªÅu h∆°n nh·ªØng component ƒë√£ ƒë∆∞·ª£c vi·∫øt s·∫µn, m√†u m√® hoa l√° h·∫π h·∫øt r·ªìi th√¨ c√≥ th·ªÉ d√πng <a href=\"https://nativebase.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">NativeBase</a> t∆∞∆°ng ƒë·ªëi k·∫ø th·ª´a kh√°i ni·ªám c·ªßa Bootstrap, ho·∫∑c React Native Kittens c√≥ m·ªôt s·ªë components c≈©ng hay ho.</p>\n<h2 id=\"th∆∞-vi·ªán-v√†-components\"><a href=\"#th%C6%B0-vi%E1%BB%87n-v%C3%A0-components\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Th∆∞ vi·ªán v√† components</h2>\n<p>L√†m navigation th√¨ nghƒ© ng√†y ƒë·∫øn <a href=\"https://reactnavigation.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React navigatio</a> c·ªßa ch√≠nh facebook lu√¥n.</p>\n<p>Qu·∫£n l√Ω state th√¨ d√πng <a href=\"http://mobx.js.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Mobx</a> ho·∫∑c <a href=\"http://redux.js.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Redux</a>, redux th√¨ th∆∞·ªùng cho nh·ªØng d·ªØ li·ªáu nhi·ªÅu v√† l·ªõn, nƒÉm 2018 ch√∫ng ta s·∫Ω v·∫´n s·ª≠ d·ª•ng Redux nh√©, ƒë·ª´ng t∆∞·ªüng l√† n√≥ ƒë√£ c≈© v√† c√≥ c√°i kh√°c thay th·∫ø.</p>\n<p><a href=\"https://github.com/oblador/react-native-animatable\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Animatable</a> r·∫•t c√≥ √≠ch khi mu·ªën l√†m animation cho layout hay m·∫•y c√°i micro animation tr√™n component.</p>\n<p>M·ªôt s·ªë UI Components kh√°c c√≥ th·ªÉ tham kh·∫£o</p>\n<ul>\n<a href=\"https://github.com/christopherdro/react-native-calendar\" rel=\"external\" target=\"_blank\" rel=\"noopener noreferrer\"><strong>react-native-calendar</strong></a></li>\n<li>\n<a href=\"https://github.com/xgfe/react-native-datepicker\" target=\"_self\"><strong>react-native-</strong></a><a href=\"https://github.com/xgfe/react-native-datepicker\" target=\"_self\"><strong>datepicker</strong></a></li>\n<li>\n<a href=\"https://github.com/oblador/react-native-progress\" rel=\"external\" target=\"_blank\"><strong>react-native-progress</strong></a></li>\n<li>\n<a href=\"https://github.com/maxs15/react-native-spinkit\" rel=\"external\" target=\"_blank\"><strong>react-native-spinkit</strong></a></li>\n<li>\n<a href=\"https://github.com/oblador/react-native-vector-icons\" rel=\"external\" target=\"_blank\"><strong>Vector Icons</strong></a></li>\n<li>\n<a href=\"https://github.com/leecade/react-native-swiper\" rel=\"external\" target=\"_blank\"><strong>react-native-swiper</strong></a></li>\n<li>\n<a href=\"https://github.com/skv-headless/react-native-scrollable-tab-view\" rel=\"external\" target=\"_blank\"><strong>react-native-scrollable-tab-view</strong></a></li>\n<li>\n<a href=\"https://github.com/oblador/react-native-lightbox\" rel=\"external\" target=\"_blank\"><strong>react-native-lightbox</strong></a></li>\n<li>\n<a href=\"https://github.com/airbnb/react-native-maps\" rel=\"external\" target=\"_blank\"><strong>react-native-maps</strong></a></li>\n<li>\n<a href=\"https://github.com/sghiassy/react-native-sglistview\" rel=\"external\" target=\"_blank\"><strong>SGListView</strong></a></li>\n<li>\n<a href=\"https://github.com/jaredpalmer/formik\" rel=\"external\" target=\"_blank\"><strong>Formik</strong></a></li>\n<li>\n<a href=\"https://github.com/AlexanderZaytsev/react-native-i18n\" rel=\"external\" target=\"_blank\"><strong>react-native-i18n</strong></a></li>\n<li>\n<a href=\"https://github.com/zo0r/react-native-push-notification\" rel=\"external\" target=\"_blank\"><strong>react-native-push-notification</strong></a></li>\n<li>\n<strong><a href=\"https://community.algolia.com/react-instantsearch/\" rel=\"external\" target=\"_blank\">InstantSearch</a></strong></li>\n<li>\n<a href=\"https://github.com/itinance/react-native-fs\" rel=\"external\" target=\"_blank\"><strong>react-native-fs</strong></a></li>\n<li>\n<strong><a href=\"https://github.com/lwansbrough/react-native-camera\" rel=\"external\" target=\"_blank\">react-native-camera</a></strong></li>\n<li>\n<strong><a href=\"https://github.com/react-native-community/react-native-video\" rel=\"external\" target=\"_blank\">react-native-video</a></strong></li>\n<li>\n<strong><a href=\"https://github.com/andpor/react-native-sqlite-storage\" rel=\"external\" target=\"_blank\">react-native-</a><a href=\"https://github.com/andpor/react-native-sqlite-storage\" rel=\"external\" target=\"_blank\">sqlite</a><a href=\"https://github.com/andpor/react-native-sqlite-storage\" rel=\"external\" target=\"_blank\">-storage</a></strong></li>\n<li>\n<a href=\"https://github.com/thewei/react-native-store\" rel=\"external\" target=\"_blank\"><strong>react-native-store</strong></a></li>\n<li>\n<strong><a href=\"https://github.com/oney/react-native-webrtc\" rel=\"external\" target=\"_blank\">react-native-</a><a href=\"https://github.com/oney/react-native-webrtc\" rel=\"external\" target=\"_blank\">webrtc</a></strong></li>\n</ul>\n<h2 id=\"web-services\"><a href=\"#web-services\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Web Services</h2>\n<h3 id=\"database\"><a href=\"#database\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Database</h3>\n<p><a href=\"https://realm.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Realm</a> real-time database chuy√™n cho mobile app, b√†o g·ªìm c√°c t√≠nh nƒÉng nh∆∞ two-way data sync, offline-first, data push.</p>\n<p>N·∫øu Realm c√≥ qu√° nhi·ªÅu t√≠nh nƒÉng ko d√πng ƒë·∫øn, th√¨ c√≥ th·ªÉ s·ª≠ d·ª•ng <a href=\"https://facebook.github.io/react-native/docs/asyncstorage.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">AsyncStorage</a> ƒëi k√®m React Native</p>\n<h3 id=\"analytics\"><a href=\"#analytics\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Analytics</h3>\n<p><a href=\"https://get.fabric.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Fabric</a> b·ªô c√¥ng c·ª• t·∫•t c·∫£ trong m·ªôt ho·∫∑c n·∫øu th√≠ch Google Analytics th√¨ c√≥ nhi·ªÅu <a href=\"https://github.com/idehub/react-native-google-analytics-bridge\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">th∆∞ vi·ªán kh√°c</a> h·ªó tr·ª£</p>\n<h3 id=\"push-notifications\"><a href=\"#push-notifications\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Push Notifications</h3>\n<p>C√°i n√†y th√¨ ko c√≥ nhi·ªÅu service l·∫Øm, n√≥i c√°ch kh√°c <a href=\"https://firebase.google.com/docs/cloud-messaging/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Firebase Cloud Messaging</a> (tr∆∞·ªõc ƒë√¢y l√† Google Cloud Messaging) g·∫ßn nh∆∞ th·ªëng tr·ªã, ƒë·ªÉ s·ª≠ d·ª•ng FCM ch√∫ng ta s·∫Ω c·∫ßn t·ªõi <a href=\"https://github.com/evollu/react-native-fcm\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react-native-fcm package</a></p>\n<h3 id=\"code-update\"><a href=\"#code-update\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Code update</h3>\n<p><a href=\"https://microsoft.github.io/code-push/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">CodePush</a> cho ph√©p deploy code m·ªõi nh·∫•t tr·ª±c ti·∫øp ƒë·∫øn device c·ªßa user, n√≥ gi·ªëng nh∆∞ kho trung t√¢m, n∆°i ch√∫ng ta quƒÉng h·∫øt HTML, CSS, Javascript, assets l√™n ƒë√≥ h·∫øt. Th√¥ng qua CodePush ch√∫ng ta kh√¥ng c·∫ßn upload nh·ªØng thay ƒë·ªïi l√™n app store v√† ƒë·ª£i user ch·ªçn update ·ª©ng d·ª•ng. S·ª≠ d·ª•ng v·ªõi ƒë·ªëng <a href=\"https://github.com/Microsoft/react-native-code-push\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">th∆∞ vi·ªán n√†y</a> </p>\n","cover_image":""}},{"node":{"id":"d5343507bdfb3d91dba410ab2f481ef8","title":"Query String v·ªõi React Router","path":"/2018-03-29-huong-dan-query-string-voi-react-router/","date":"2018-03-29","timeToRead":1,"desc":"C√°ch s·ª≠ d·ª•ng query string v·ªõi React Router si√™u cƒÉn b·∫£n","content":"<p>Khi l√†m web, n·∫øu ch√∫ng ta mu·ªën truy·ªÅn m·ªôt th√¥ng tin g√¨ ƒë√≥ qu√° URL, ta s·∫Ω s·ª≠ d·ª•ng query string, c√°i n√†y ai l√†m web ch·∫Øc c≈©ng bi·∫øt</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">http://luubinhan.github.io/list?sortBy=date&amp;sortOrder=desc</code></pre></div>\n<p>C√°i ƒëo·∫°n sau d·∫•u ch·∫•m h·ªèi g·ªçi l√† query string <code class=\"language-inline-text\">sortBy=date&amp;sortOrder=desc</code></p>\n<p>ƒê·ªÉ t·∫°o ra m·ªôt ƒëo·∫°n <em>query string</em> nh∆∞ v·∫≠y ta s·∫Ω s·ª≠ d·ª•ng component <code class=\"language-inline-text\">Link</code> c·ªßa <em>react-router</em></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">let</span> queryParameters <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">sortBy</span><span class=\"token operator\">:</span> <span class=\"token string\">'date'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">sortOrder</span><span class=\"token operator\">:</span> <span class=\"token string\">'desc'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span>\n      <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">pathname</span><span class=\"token operator\">:</span> <span class=\"token string\">'/list'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">query</span><span class=\"token operator\">:</span> queryParameters\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    CLICK ME!\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>N·∫øu ta thi·∫øt ƒë·∫∑t Route cho ƒë∆∞·ªùng path <code class=\"language-inline-text\">list</code> ƒë·∫øn <code class=\"language-inline-text\">ListComponent</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>list<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>ListComponent<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>th√¨ b√™n trong <code class=\"language-inline-text\">ListComponent</code> ta c√≥ th·ªÉ truy xu·∫•t ƒë·∫øn gi√° tr·ªã c·ªßa query string n√†y b·∫±ng <code class=\"language-inline-text\">props.location</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>location<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>location<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// { sortBy: 'date', sortOrder: 'desc' }</span></code></pre></div>\n","cover_image":""}},{"node":{"id":"02a02d68e2737698423d912c23786ac2","title":"M·ªôt s·ªë c√°ch vi·∫øt s·ª≠ d·ª•ng trong React","path":"/2018-03-19-huong-dan-react-patterns-can-ban/","date":"2018-03-19","timeToRead":2,"desc":"T·ªïng h·ª£p c√°c c√°ch l√†m ph·ªï bi·∫øn trong React","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#containerview\">Container/View</a></li>\n<li><a href=\"#container--branch--view\">Container / Branch / View</a></li>\n<li><a href=\"#higher-order-components\">Higher Order Components</a></li>\n<li><a href=\"#stateless-function\">Stateless function</a></li>\n<li><a href=\"#jsx-spread-attributes\">JSX spread attributes</a></li>\n<li><a href=\"#render-theo-%C4%91i%E1%BB%81u-ki%E1%BB%87n-%C4%91%C3%BAng-sai\">render theo ƒëi·ªÅu ki·ªán ƒë√∫ng sai</a></li>\n<li><a href=\"#style-component\">Style component</a></li>\n<li><a href=\"#event-switch\">Event switch</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"containerview\"><a href=\"#containerview\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Container/View</h2>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">PlanetView</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">renderLoading</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Loading...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">renderError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">I'm sorry! Please try again</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">renderPlanet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">,</span> climate<span class=\"token punctuation\">,</span> terrain<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>planet<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Climate: </span><span class=\"token punctuation\">{</span>climate<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Terrain: </span><span class=\"token punctuation\">{</span>terrain<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>loading<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">renderLoading</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>planet<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">renderPlanet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">renderError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PlanetContainer</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'www.api.com/planet/5'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n                <span class=\"token parameter\">planet</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> planet<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PlanetView</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√°ch chia container - d√πng ƒë·ªÉ x·ª≠ l√Ω logic v√† view - d√πng ƒë·ªÉ nh·∫≠n v√† hi·ªÉn th·ªã d·ªØ li·ªáu c√≥ nhi·ªÅu ƒëi·ªÉm h·ªØu d·ª•ng, c√°i view b·∫°n c√≥ th·ªÉ d√πng ƒë∆∞·ª£c nhi·ªÅu l·∫ßn h∆°n khi t√°ch bi·ªát n√≥ kh·ªèi ph·∫ßn x·ª≠ l√Ω business logic</p>\n<h2 id=\"higher-order-component---hoc\"><a href=\"#higher-order-component---hoc\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Higher Order Component - HOC</h2>\n<p>C√°i n√†y c√≥ b√†i vi·∫øt r·ªìi, ƒë·ªçc l·∫°i b√†i c≈© <a href=\"https://luubinhan.github.io/blog/2018-03-02-gioi-thieu-higher-order-component-trong-react\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">·ªü ƒë√¢y</a></p>\n<h2 id=\"jsx-spread-attribute\"><a href=\"#jsx-spread-attribute\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JSX spread attribute</h2>\n<p>Gi·ªëng nh∆∞ c√°ch vi·∫øt <code class=\"language-inline-text\">...</code> ƒë·ªÉ spread object, 2 C√°ch vi·∫øt sau s·∫Ω cho c√πng k·∫øt qu·∫£</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>main<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>main<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">// d√πng spread attributes</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">className</span><span class=\"token operator\">:</span> <span class=\"token string\">\"main\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">role</span><span class=\"token operator\">:</span> <span class=\"token string\">\"main\"</span><span class=\"token punctuation\">,</span> children<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>C√°i ƒëo·∫°n tr√™n ch·∫Øc s·∫Ω √≠t th·∫•y ai vi·∫øt, th∆∞·ªùng g·∫∑p nh∆∞ th·∫ø n√†y nhi·ªÅu h∆°n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">FancyDiv</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>fancy<span class=\"token punctuation\">\"</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>L∆∞u √Ω th·ª© t·ª± s·∫Ω ·∫£nh h∆∞·ªüng ƒë·∫øn chuy·ªán override, th√≠ d·ª• n·∫øu truy·ªÅn <code class=\"language-inline-text\">className</code> nh∆∞ sau s·∫Ω override l·∫°i c√°i class <em>fancy</em></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FancyDiv</span></span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>my-fancy-div<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token comment\">// k·∫øt qu·∫£ &lt;div class='my-fancy-div'/></span></code></pre></div>\n<p>Nh∆∞ng n·∫øu khai b√°o <code class=\"language-inline-text\">FancyDiv</code> nh∆∞ v·∫ßy th√¨ s·∫Ω ko b·ªã override</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">FancyDiv</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>fancy<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<h2 id=\"render-theo-ƒëi·ªÅu-ki·ªán-ƒë√∫ng-sai\"><a href=\"#render-theo-%C4%91i%E1%BB%81u-ki%E1%BB%87n-%C4%91%C3%BAng-sai\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>render theo ƒëi·ªÅu ki·ªán ƒë√∫ng sai</h2>\n<p>Render khi ƒëi·ªÅu ki·ªán === true</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">{</span>condition <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Got it</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Render khi ƒëi·ªÅu ki·ªán === false</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">{</span>condition <span class=\"token operator\">||</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Got it</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>Render v·ªõi c·∫≠p ƒëi·ªÅu ki·ªán ƒë√∫ng sai</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">{</span> condition\n    <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Got it</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Not really</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a href=\"https://luubinhan.github.io/blog/2018-03-05-8-cach-render-component-trong-react\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">M·ªôt s·ªë ki·ªÉu vi·∫øt v·ªõi rend·∫ª theo ƒëi·ªÅu ki·ªán</a></p>\n<h2 id=\"event-switch\"><a href=\"#event-switch\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Event switch</h2>\n<p>V·ªõi component c·∫ßn handle nhi·ªÅu ki·ªÉu event kh√°c nhau, t·∫°o m·ªôt h√†m v√† d√πng c√¢u <code class=\"language-inline-text\">switch</code> trong ƒë√≥ s·∫Ω tr·ª±c quan h∆°n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Thay v√¨</span>\n<span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./actions/doStuff\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* action stuff */</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n<span class=\"token function\">handleMouseEnter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hovered</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n<span class=\"token function\">handleMouseLeave</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hovered</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Th√¨ vi·∫øt</span>\n<span class=\"token function\">handleEvent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>type<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"click\"</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./actions/doStuff\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* action dates */</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"mouseenter\"</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hovered</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"mouseleave\"</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hovered</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">No case for event type \"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>type<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n","cover_image":""}},{"node":{"id":"5b4fe9781945e374b48da5bb259e6195","title":"React Authentication v·ªõi Amazon Cognito - Ph·∫ßn 2","path":"/2018-03-17-huong-dan-react-native-authentication-voi-amazone-cognito-phan-2/","date":"2018-03-17","timeToRead":10,"desc":"Implement authentication 2 factor s·ª≠ d·ª•ng React, React Router, Amazone Cognito, ph·∫ßn 2 ti·∫øp t·ª•c v·ªõi Routing v√† TOTP ƒë·ªÉ c√≥ th·ªÉ l√†m Google Authenticator.","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#authenticatorjs\"><code class=\"language-inline-text\">Authenticator.js</code></a></li>\n<li><a href=\"#headerjs\"><code class=\"language-inline-text\">Header.js</code></a></li>\n<li><a href=\"#homejs\"><code class=\"language-inline-text\">Home.js</code></a></li>\n<li><a href=\"#signinjs\"><code class=\"language-inline-text\">SignIn.js</code></a></li>\n<li><a href=\"#signupjs\"><code class=\"language-inline-text\">SignUp.js</code></a></li>\n<li><a href=\"#routerjs\"><code class=\"language-inline-text\">Router.js</code></a></li>\n<li><a href=\"#appjs\"><code class=\"language-inline-text\">App.js</code></a></li>\n<li><a href=\"#v%E1%BB%81-v%E1%BA%A5n-%C4%91%E1%BB%81-totp-time-based-one-time-passwords\">V·ªÅ v·∫•n ƒë·ªÅ TOTP (time-based one-time passwords)</a></li>\n<li><a href=\"#signinjs-1\"><code class=\"language-inline-text\">SignIn.js</code></a></li>\n</ul>\n<!-- /TOC -->\n<p>Xem <a href=\"https://luubinhan.github.io/blog/2018-03-16-react-authentication-phan-1\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ph·∫ßn 1 ·ªü ƒë√¢y</a></p>\n<p>Ph·∫ßn n√†y ch√∫ng ta ti·∫øp t·ª•c v·ªõi React Router, ch√∫ng ta ch·ªâ cho ph√©p nh·ªØng user ƒë√£ login xem ·ª©ng d·ª•ng, redirect ƒë·∫øn trang signup/sign in khi ch∆∞a ƒëƒÉng nh·∫≠p.</p>\n<p>Ta s·∫Ω build component <code class=\"language-inline-text\">PrivateRoute</code>, nh·ªØng trang m√† user ph·∫£i ƒëƒÉng nh·∫≠p ƒë·ªÉ v√†o xem, n·∫øu c·ªë t√¨nh access v√†o c√°c trang m√† ch∆∞a ƒëƒÉng nh·∫≠p th√¨ b·ªã ƒë√° ra ngay</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PrivateRoute</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> Component<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>rest<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span>\n        <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>rest<span class=\"token punctuation\">}</span></span>\n        <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span>\n                isAuthenticated <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n                <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Redirect</span></span>\n                        <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n                            <span class=\"token literal-property property\">pathname</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/auth\"</span>\n                            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n                    <span class=\"token punctuation\">/></span></span>\n                <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PrivateRoute</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/route1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Route1<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<h2 id=\"authenticatorjs\"><a href=\"#authenticatorjs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">Authenticator.js</code></h2>\n<p>Component s·∫Ω l√† trang sign in v√† sign up, t√°ch trang sign up v√† sign in ra 2 route c≈©ng ƒë∆∞·ª£c nh∆∞ng l√†m th·∫ø n√†y cho g·ªçn.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> css <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'glamor'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> withRouter <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n\n<span class=\"token keyword\">import</span> SignIn <span class=\"token keyword\">from</span> <span class=\"token string\">'./SignIn'</span>\n<span class=\"token keyword\">import</span> SignUp <span class=\"token keyword\">from</span> <span class=\"token string\">'./SignUp'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Authenticator</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">showSignIn</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">switchState</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">showSignIn</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      showSignIn\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> showSignIn <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>\n          showSignIn <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SignIn</span></span> <span class=\"token punctuation\">/></span></span>\n          <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SignUp</span></span> <span class=\"token punctuation\">/></span></span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>buttonContainer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span>\n            <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">,</span> showSignIn <span class=\"token operator\">&amp;&amp;</span> styles<span class=\"token punctuation\">.</span>underline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">switchState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Sign In</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span>\n            <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">switchState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n            <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">,</span> <span class=\"token operator\">!</span>showSignIn <span class=\"token operator\">&amp;&amp;</span> styles<span class=\"token punctuation\">.</span>underline<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Sign Up</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>Authenticator<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> styles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">buttonContainer</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">justifyContent</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">button</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">paddingBottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'10px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">borderBottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'2px solid transparent'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">underline</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">borderBottomColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#ddd'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"headerjs\"><a href=\"#headerjs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">Header.js</code></h2>\n<p>Component si√™u cƒÉn b·∫£n, si√™u quen thu·ªôc</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> css <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'glamor'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Header</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Auth Demo</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> styles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'white'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token string\">'25px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">textAlign</span><span class=\"token operator\">:</span> <span class=\"token string\">'left'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">container</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'80px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#4CAF50'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Header</code></pre></div>\n<h2 id=\"homejs\"><a href=\"#homejs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">Home.js</code></h2>\n<p>Trong file n√†y ta s·∫Ω th√™m m·ªôt v√†i component t∆∞∆°ng ·ª©ng cho 1 route, c√°c component n√†y ch·ªâ ƒë∆∞·ª£c bind v√¥ khi user ƒë√£ ƒëƒÉng nh·∫≠p, chuy·ªán ki·ªÉm tra n√†y s·∫Ω n·∫±m ·ªü Route</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> withRouter<span class=\"token punctuation\">,</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Auth <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'aws-amplify'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Home</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">username</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Auth<span class=\"token punctuation\">.</span><span class=\"token function\">currentUserInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">username</span><span class=\"token operator\">:</span> data<span class=\"token punctuation\">.</span>username\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error: '</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Welcome </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/route1<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>route1<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Route 1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Route1</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Route 1</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          Auth<span class=\"token punctuation\">.</span><span class=\"token function\">signOut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/auth'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error signing out...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Sign Out</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nHome <span class=\"token operator\">=</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>Home<span class=\"token punctuation\">)</span>\nRoute1 <span class=\"token operator\">=</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>Route1<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span>\n  Home<span class=\"token punctuation\">,</span>\n  Route1\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√°c component tr√™n ƒëi·ªÅu ƒë∆∞·ª£c <em>l·ªìng</em> qua <code class=\"language-inline-text\">withRouter</code> ƒë·ªÉ c√≥ th·ªÉ truy c·∫≠p v√†o prop <code class=\"language-inline-text\">history</code> trong React Router trong tr∆∞·ªùng h·ª£p c·∫ßn navigate ƒë·∫øn m·ªôt trang kh√°c.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*DH2Bg4EXTVuoRYtUTNqOXg.jpeg\"></p>\n<h2 id=\"signinjs\"><a href=\"#signinjs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">SignIn.js</code></h2>\n<p>Update l·∫°i component t·ª´ ph·∫ßn 1, ch·ªâ m·ªôt ch·ªï kh√°c l√† ta s·∫Ω ·∫©n ph·∫ßn confirm code ƒëi, khi <code class=\"language-inline-text\">confirmSignIn</code> tr·∫£ v·ªÅ th√†nh c√¥ng, ta navigate user ƒë·∫øn route Home s·ª≠ d·ª•ng <code class=\"language-inline-text\">history</code> prop</p>\n<p><code class=\"language-inline-text\">history.push('/')</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> css <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'glamor'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Auth <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'aws-amplify'</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> withRouter <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SignIn</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">username</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">password</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">showConfirmation</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">user</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">authCode</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">onChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">signIn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    Auth<span class=\"token punctuation\">.</span><span class=\"token function\">signIn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>password<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> user<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">showConfirmation</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error signing in...: '</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">confirmSignIn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> history <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props\n    Auth<span class=\"token punctuation\">.</span><span class=\"token function\">confirmSignIn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>authCode<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        history<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error confirming signing in...: '</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>\n          <span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>showConfirmation <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n                <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token string\">'username'</span><span class=\"token punctuation\">,</span> evt<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>username<span class=\"token punctuation\">'</span></span>\n              <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n                <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>password<span class=\"token punctuation\">'</span></span>\n                <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token string\">'password'</span><span class=\"token punctuation\">,</span> evt<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>password<span class=\"token punctuation\">'</span></span>\n              <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signIn<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>buttonText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Sign In</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>showConfirmation <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n                <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token string\">'authCode'</span><span class=\"token punctuation\">,</span> evt<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Confirmation Code<span class=\"token punctuation\">'</span></span>\n              <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">confirmSignIn</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>buttonText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Confirm Sign In</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> styles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">button</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token string\">'10px 60px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#ddd'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token string\">'3px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">':hover'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#ededed'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">buttonText</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">marginBottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'10px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">outline</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">borderBottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'2px solid #4CAF50'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">'::placeholder'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'rgba(0, 0, 0, .3)'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">container</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">flex</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">paddingTop</span><span class=\"token operator\">:</span> <span class=\"token string\">'15px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">alignItems</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">justifyContent</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">flexDirection</span><span class=\"token operator\">:</span> <span class=\"token string\">'column'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>SignIn<span class=\"token punctuation\">)</span></code></pre></div>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*aZdu5cNtAcTIkUTgA4PiGA.jpeg\"></p>\n<h2 id=\"signupjs\"><a href=\"#signupjs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">SignUp.js</code></h2>\n<p>C·∫≠p nh·∫≠p l·∫°i t·ª´ ph·∫ßn 1</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> css <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'glamor'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> withRouter <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Auth <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'aws-amplify'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SignUp</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">username</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">password</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">phone_number</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">authCode</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">showConfirmation</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">onChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">signUp</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> username<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> phone_number <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state\n    Auth<span class=\"token punctuation\">.</span><span class=\"token function\">signUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      username<span class=\"token punctuation\">,</span>\n      password<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">attributes</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        email<span class=\"token punctuation\">,</span>\n        phone_number\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">showConfirmation</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error signing up: '</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">confirmSignUp</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    Auth<span class=\"token punctuation\">.</span><span class=\"token function\">confirmSignUp</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>authCode<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error confirming signing up: '</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> showConfirmation <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>\n          <span class=\"token operator\">!</span>showConfirmation <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n                <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Username<span class=\"token punctuation\">'</span></span>\n                <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token string\">'username'</span><span class=\"token punctuation\">,</span> evt<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n              <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n                <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Password<span class=\"token punctuation\">'</span></span>\n                <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>password<span class=\"token punctuation\">'</span></span>\n                <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token string\">'password'</span><span class=\"token punctuation\">,</span> evt<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n              <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n                <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Email<span class=\"token punctuation\">'</span></span>\n                <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token string\">'email'</span><span class=\"token punctuation\">,</span> evt<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n              <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n                <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Phone Number<span class=\"token punctuation\">'</span></span>\n                <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token string\">'phone_number'</span><span class=\"token punctuation\">,</span> evt<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n              <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signUp<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>buttonText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Sign Up</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>\n          showConfirmation <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n                <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token string\">'authCode'</span><span class=\"token punctuation\">,</span> evt<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n                <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Confirmation Code<span class=\"token punctuation\">'</span></span>\n              <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>confirmSignUp<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>buttonText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Confirm Sign Up</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n              </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> styles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">button</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token string\">'10px 60px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#ddd'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token string\">'3px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">':hover'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#ededed'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">buttonText</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">container</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">flex</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">alignItems</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">justifyContent</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">flexDirection</span><span class=\"token operator\">:</span> <span class=\"token string\">'column'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">paddingTop</span><span class=\"token operator\">:</span> <span class=\"token string\">'15px'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">marginBottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'10px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">outline</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">borderBottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'2px solid #4CAF50'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">'::placeholder'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'rgba(0, 0, 0, .3)'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>SignUp<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"routerjs\"><a href=\"#routerjs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">Router.js</code></h2>\n<p>Cu·ªëi c√πng, last but not least, router</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  withRouter<span class=\"token punctuation\">,</span>\n  Switch<span class=\"token punctuation\">,</span>\n  Route<span class=\"token punctuation\">,</span>\n  Redirect<span class=\"token punctuation\">,</span>\n  BrowserRouter <span class=\"token keyword\">as</span> Router\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Auth <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'aws-amplify'</span>\n\n<span class=\"token keyword\">import</span> Authenticator <span class=\"token keyword\">from</span> <span class=\"token string\">'./Authenticator'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  Home<span class=\"token punctuation\">,</span>\n  Route1\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./Home'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PrivateRoute</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">loaded</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">isAuthenticated</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>unlisten <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      Auth<span class=\"token punctuation\">.</span><span class=\"token function\">currentAuthenticatedUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'user: '</span><span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>isAuthenticated<span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">isAuthenticated</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">unlisten</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Auth<span class=\"token punctuation\">.</span><span class=\"token function\">currentAuthenticatedUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">loaded</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">isAuthenticated</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>history<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/auth'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> Component<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>rest <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> loaded <span class=\"token punctuation\">,</span> isAuthenticated<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>loaded<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Route\n        <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>rest<span class=\"token punctuation\">}</span>\n        render<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> isAuthenticated <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n          <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Redirect</span></span>\n              <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n                <span class=\"token literal-property property\">pathname</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/auth\"</span><span class=\"token punctuation\">,</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n            <span class=\"token punctuation\">/></span></span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nPrivateRoute <span class=\"token operator\">=</span> <span class=\"token function\">withRouter</span><span class=\"token punctuation\">(</span>PrivateRoute<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Routes</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/auth<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Authenticator<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PrivateRoute</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/route1<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Route1<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PrivateRoute</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Home<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Switch</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Routes</code></pre></div>\n<p>Trong ph·∫ßn import s·ª≠ d·ª•ng component <code class=\"language-inline-text\">Redirect</code> c·ªßa <em>react-router-dom</em>, component n√†y s·∫Ω cho ph√©p navigate user ƒë·∫øn m·ªôt route m·ªõi, l√†m web ch·∫Øc ai c≈©ng bi·∫øt redirect l√† g√¨ m√†.</p>\n<p>Component <code class=\"language-inline-text\">PrivateRoute</code> c√≥ nhi·ªám v·ª• l√† m·ªôt <em>container</em> cho c√°c route c·∫ßn ki·ªÉm tra t√¨nh tr·∫°ng ƒëƒÉng nh·∫≠p.</p>\n<p>Kh·ªüi t·∫°o <em>state</em> l√† <code class=\"language-inline-text\">loaded</code> v√† <code class=\"language-inline-text\">isAuthenticated</code> v·ªõi gi√° tr·ªã ban ƒë·∫ßu l√† <code class=\"language-inline-text\">false</code></p>\n<p><code class=\"language-inline-text\">componentDidMount</code> - ch√∫ng ta l√†m chuy·ªán l√† ki·ªÉm tra ngay v√† lu√¥n t√¨nh tr·∫°ng h√¥n nh√¢n gia ƒë√¨nh, kh√¥ng t√¨nh tr·∫°ng login, n·∫øu ch∆∞a th√¨ m·ªùi em ƒë·∫øn ph√≤ng ƒëƒÉng k√Ω (k·∫øt h√¥n), ƒë·ªìng th·ªùi trong ta t·∫°o ra t√¨nh tr·∫°ng \"h√≥ng tin\", listen c√°c s·ª± thay ƒë·ªïi c·ªßa history (d√πng <code class=\"language-inline-text\">this.props.history.listen</code>) v√† ki·ªÉm tra l·∫°i tr√¨nh tr·∫°ng ƒëƒÉng nh·∫≠p</p>\n<h2 id=\"appjs\"><a href=\"#appjs\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">App.js</code></h2>\n<p>B√™n trong component App v√† ta c√≥ th·ªÉ thu g·ªçn l·∫°i</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'./App.css'</span>\n\n<span class=\"token keyword\">import</span> Header <span class=\"token keyword\">from</span> <span class=\"token string\">'./Header'</span>\n<span class=\"token keyword\">import</span> Router <span class=\"token keyword\">from</span> <span class=\"token string\">'./Router'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</code></pre></div>\n<h2 id=\"v·ªÅ-v·∫•n-ƒë·ªÅ-totp-time-based-one-time-passwords\"><a href=\"#v%E1%BB%81-v%E1%BA%A5n-%C4%91%E1%BB%81-totp-time-based-one-time-passwords\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V·ªÅ v·∫•n ƒë·ªÅ TOTP (time-based one-time passwords)</h2>\n<p>TOTP ƒëang tr·ªü th√†nh l·ª±a ch·ªçn s·ªë m·ªôt c·ªßa c√°c c√¥ng ty ƒë·ªÅ cao t√≠nh b·∫£o m·∫≠t tuy·ªát ƒë·ªëi khi mu·ªën d√πng MFA ( Multi-Factor Authentication ), thay th·∫ø cho vi·ªác d√πng MFA v·ªõi SMS. S·ª≠ d·ª•ng nh·ªØng ·ª©ng d·ª•ng nh∆∞ Authy, Google Authenticator &#x26; Dou ƒë·ªÉ t·∫°o ra m·ªôt access token t·∫°m th·ªùi, expire trong 30 ƒë·∫øn 60 gi√¢y.</p>\n<p>Cognito v√† b√¢y gi·ªù l√† AWS Amplify c≈©ng ƒë√£ b·ªï sung t√≠nh nƒÉng n√†y, th·ª≠ m·ªü r·ªông ·ª©ng d·ª•ng ra v·ªõi t√≠nh nƒÉng n√†y</p>\n<p>Tr∆∞·ªõc khi s·ª≠ d·ª•ng TOTP th√¨ ch√∫ng ta n√™n nh·ªõ m·ªôt ƒëi·ªÅu r·∫±ng: ƒë·ª´ng bao gi·ªù √©p bu·ªôc user s·ª≠ d·ª•ng n√≥ thay cho MFA, tr·ª´ khi user c·ªë t√¨nh ch·ªçn, v√¨ TOTP th√¨ x√†i c≈©ng r·∫•t ∆∞ l√† phi·ªÅn ph·ª©c cho user, v·ªõi nh·ªØng ·ª©ng d·ª•ng m√† user kh√¥ng cung c·∫•p b·∫•t k·ª≥ th√¥ng tin g√¨ quan tr·ªçng th√¨ h√† chi ph·∫£i l√†m kh√≥ user v·∫≠y</p>\n<p>Flow s·∫Ω nh∆∞ th·∫ø n√†y</p>\n<ol>\n<li>User ƒëƒÉng k√Ω, m·∫∑c ƒë·ªãnh d√πng MFA v·ªõi SMS</li>\n<li>User ƒëƒÉng nh·∫≠p, ·ªü m·ªôt h√≥c b√† t√≥ n√†o ƒë√≥ c·ªßa ·ª©ng d·ª•ng, th∆∞·ªùng l√† trong m·ª•c thi·∫øt ƒë·∫∑t, cho ph√©p user s·ª≠ d·ª•ng TOTP.</li>\n<li>User b·∫≠t TOTP l√™n, cho h·ªç m·ªôt c√°i QR Code, h·ªç l·∫•y ƒëi·ªán tho·∫°i m√† scan c√°i QR code n√†y, ki·ªÉu Zalo ƒë√≥ m·∫•y b·∫°n.</li>\n<li>Cho ph√©p user quay l·∫°i SMS n·∫øu th√≠ch</li>\n</ol>\n<p>Trong ·ª©ng d·ª•ng v√≠ d·ª• th√¨ ta th√™m n√≥ lu√¥n v√¥ trong <code class=\"language-inline-text\">Home</code>, s·ª≠ d·ª•ng ph∆∞∆°ng th·ª©c <code class=\"language-inline-text\">Auth.setupTOTP</code>, n√≥ s·∫Ω tr·∫£ v·ªÅ m·ªôt <em>promise</em> ƒë·ªÉ ch√∫ng ta d√πng t·∫°o QR code cho user</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Auth.setupTOTP(user).then(code => /* create qrcode */ )</code></pre></div>\n<p>C√†i th√™m <code class=\"language-inline-text\">qrcode.react</code></p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install qrcode.react --save</code></pre></div>\n<p>B√™n trong component <code class=\"language-inline-text\">Home</code>, th√™m ph∆∞∆°ng th·ª©c <code class=\"language-inline-text\">addTop</code> ƒë·ªÉ set QRCode, nh·ªõ import QRCode trong Home nha.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function-variable function\">addTTOP</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  Auth<span class=\"token punctuation\">.</span><span class=\"token function\">setupTOTP</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">code</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> authCode <span class=\"token operator\">=</span> <span class=\"token string\">\"otpauth://totp/AWSCognito:\"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>username <span class=\"token operator\">+</span> <span class=\"token string\">\"?secret=\"</span> <span class=\"token operator\">+</span> code <span class=\"token operator\">+</span> <span class=\"token string\">\"&amp;issuer=AWSCognito\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">qrCode</span><span class=\"token operator\">:</span> authCode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Cho ph√©p user ch·ªçn ph∆∞∆°ng th·ª©c x√°c th·ª±c t√†i kho·∫£n MFA hay TOTP</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function-variable function\">setPreferredMFA</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">authType</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  Auth<span class=\"token punctuation\">.</span><span class=\"token function\">verifyTotpToken</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>challengeAnswer\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    Auth<span class=\"token punctuation\">.</span><span class=\"token function\">setPreferredMFA</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">,</span> authType<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'MFA update success: '</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'MFA update error: '</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Tr√™n UI th√™m ch·ªï nh·∫≠p TOTP code, m·ªôt v√†i c√°i button</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    // previous code omitted\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n      <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>addTTOP<span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'1px solid #ddd'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">125</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Add TOTP</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>qrCode <span class=\"token operator\">!==</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">QRCode</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>qrCode<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n      <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setPreferredMFA</span><span class=\"token punctuation\">(</span><span class=\"token string\">'TOTP'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'1px solid #ddd'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">125</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Prefer TOTP</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n      <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>TOTP Code<span class=\"token punctuation\">'</span></span>\n      <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">challengeAnswer</span><span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'1px solid #ddd'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">35</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"signinjs-1\"><a href=\"#signinjs-1\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">SignIn.js</code></h2>\n<p>Update l·∫°i ph∆∞∆°ng th·ª©c <code class=\"language-inline-text\">signin</code> ƒë·ªÉ s·ª≠ d·ª•ng MFA, c√°c th√¥ng tin c·∫ßn thi·∫øt c·ªßa user n·∫±m trong object <code class=\"language-inline-text\">user.challengename</code>, ch√∫ng ta s·ª≠ d·ª•ng ƒë·ªÉ truy·ªÅn v√†o cho <code class=\"language-inline-text\">Auth.confirmSignIn</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function-variable function\">confirmSignIn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> history <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props\n  Auth<span class=\"token punctuation\">.</span><span class=\"token function\">confirmSignIn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>authCode<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>challengeName<span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// rest of code omitted</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*xC3g-S2iveqB1PH5U7Ec_A.png\"></p>\n<p>L√∫c n√†y sau khi user ƒëƒÉng nh·∫≠p c√≥ th·ªÉ click v√†o n√∫t <strong>Add TOTP</strong>, scan ƒëo·∫°n QR code v√† chuy·ªÉn sang ch·∫ø ƒë·ªô authentication d√πng TOTP</p>\n<p><a href=\"https://github.com/dabit3/react-authentication-in-depth\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">To√†n b·ªô code ·ªü ƒë√¢y</a></p>\n<p>B√†i d·ªãch t·ª´ t√°c gi·∫£ Nader Dabit tr√™n HackerNoon</p>\n","cover_image":""}},{"node":{"id":"465c085453aba70681b8078667ba6b33","title":"React Authentication v·ªõi Amazon Cognito - Ph·∫ßn 1","path":"/2018-03-16-huong-dan-react-authentication-phan-1/","date":"2018-03-16","timeToRead":5,"desc":"Implement authentication 2 factor s·ª≠ d·ª•ng React, React Router, Amazon Cognito","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#setup\">Setup</a></li>\n<li><a href=\"#m%C3%A0n-h%C3%ACnh-%C4%91%C4%83ng-k%C3%BD\">M√†n h√¨nh ƒëƒÉng k√Ω</a></li>\n<li><a href=\"#sign-in\">Sign In</a></li>\n</ul>\n<!-- /TOC -->\n<p>Trong demo ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng</p>\n<ul>\n<li>Create React App</li>\n<li>Glamor</li>\n<li>React Router</li>\n<li>Amazon Cognito ƒë·ªÉ authentication</li>\n<li>AWS amplify ƒë·ªÉ t∆∞∆°ng t√°c v·ªõi AWS Services</li>\n</ul>\n<h1 id=\"setup\"><a href=\"#setup\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Setup</h1>\n<p>Kh·ªüi t·∫°o project v√† c√°c th∆∞ vi·ªán s·∫Ω s·ª≠ d·ª•ng</p>\n<div class=\"gridsome-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">create-react-app react-auth\n<span class=\"token builtin class-name\">cd</span> react-auth\n\n<span class=\"token function\">npm</span> i react-router-dom glamor --save</code></pre></div>\n<p>C√†i AWSMobile CLI</p>\n<div class=\"gridsome-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> i -g awsmobile-cli</code></pre></div>\n<p>Kh·ªüi t·∫°o config AWS IAM</p>\n<div class=\"gridsome-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">awsmobile configure\nawsmobile init</code></pre></div>\n<p>N√≥ s·∫Ω t·∫°o project Mobile Hub v√† file aws-exports.js trong th∆∞ m·ª•c src. Ti·∫øp theo, th√™m user-signin v√† deploy c√°c config m·ªõi</p>\n<div class=\"gridsome-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">awsmobile user-signin <span class=\"token builtin class-name\">enable</span>\nawsmobile push</code></pre></div>\n<p><code class=\"language-inline-text\">awsmobile user-signin enable</code> s·∫Ω b·∫≠t Amazon Congito trong project v·ªõi c√°c thi·∫øt ƒë·∫∑t m·∫∑c ƒë·ªãnh, bao g·ªìm 2 factor authentication v·ªõi SMS (s·∫Ω th√™m TOTP sau). N·∫øu mu√¥n can thi·ªáp c√°c thi·ªát ƒë·∫∑t, v√†o tr·ª±c ti·∫øp <a href=\"https://signin.aws.amazon.com/signin?redirect_uri=https%3A%2F%2Fconsole.aws.amazon.com%2Fcognito%2Fhome%3Fregion%3Dus-east-1%26state%3DhashArgs%2523%26isauthcode%3Dtrue&#x26;client_id=arn%3Aaws%3Aiam%3A%3A015428540659%3Auser%2Fcognito&#x26;forceMobileApp=0\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Amazon Cognito</a> ƒë·ªÉ ch·ªânh</p>\n<h1 id=\"m√†n-h√¨nh-ƒëƒÉng-k√Ω\"><a href=\"#m%C3%A0n-h%C3%ACnh-%C4%91%C4%83ng-k%C3%BD\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>M√†n h√¨nh ƒëƒÉng k√Ω</h1>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*U_Oa4dWFeIqJ9TPJFx9lmQ.jpeg\"></p>\n<p>ƒê·ªÉ t∆∞∆°ng t√°c v·ªõi Amazon Cognito, ch√∫ng ta s·∫Ω s·ª≠ c√°c h√†m trong class <code class=\"language-inline-text\">Auth</code> t·ª´ th∆∞ vi·ªán <code class=\"language-inline-text\">aws-amplify</code>:</p>\n<p><code class=\"language-inline-text\">signUp</code> - t·∫°o user m·ªõi</p>\n<div class=\"gridsome-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">signUp</span><span class=\"token punctuation\">(</span>username<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> attributes<span class=\"token operator\">?</span><span class=\"token operator\">:</span> object<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-inline-text\">confirmSignUp</code> - ƒë·ªÉ x√°c nh·∫≠n ƒëƒÉng k√Ω th√†nh c√¥ng</p>\n<div class=\"gridsome-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">confirmSignUp</span><span class=\"token punctuation\">(</span>username<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> authenticationCode<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-inline-text\">signIn</code> - ƒëƒÉng nh·∫≠p</p>\n<div class=\"gridsome-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">signIn</span><span class=\"token punctuation\">(</span>username<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-inline-text\">confirmSignIn</code> - x√°c nh·∫≠n ƒëƒÉng nh·∫≠p</p>\n<div class=\"gridsome-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">confirmSignIn</span><span class=\"token punctuation\">(</span>user<span class=\"token operator\">:</span> object<span class=\"token punctuation\">,</span> authenticationCode<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Trong file root c·ªßa project, th∆∞·ªùng l√† <code class=\"language-inline-text\">index.js</code> </p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// m·ªôt s·ªë import kh√°c</span>\n<span class=\"token comment\">// </span>\n<span class=\"token keyword\">import</span> config <span class=\"token keyword\">from</span> <span class=\"token string\">'./aws-exports'</span>\n<span class=\"token keyword\">import</span> Amplify <span class=\"token keyword\">from</span> <span class=\"token string\">'aws-amplify'</span>\n\nAmplify<span class=\"token punctuation\">.</span><span class=\"token function\">configure</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">registerServiceWorker</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Screen <code class=\"language-inline-text\">SignUp.js</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> css <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'glamor'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SignUp</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">username</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">password</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">phone_number</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">authCode</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">SignUp</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> styles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">container</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">flexDirection</span><span class=\"token operator\">:</span> <span class=\"token string\">'column'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">alignItems</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Flow s·∫Ω nh∆∞ th·∫ø n√†y, sau khi user cung c·∫•p c√°c th√¥ng tin trong form signup, ch√∫ng ta g·ªçi ƒë·∫øn ph∆∞∆°ng th·ª©c <code class=\"language-inline-text\">signUp</code>, user s·∫Ω nh·∫≠n ƒë∆∞·ª£c m·ªôt m√£ code ƒë·ªÉ verify qu√° SMS, user ƒëi·ªÅn m√£ code n√†y v√†o form verify, ch√∫ng ta verify c√°i m√£ code n√†y b·∫±ng ph∆∞∆°ng th·ª©c 'confirmSignUp'</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*Z1sFmf-KG7iiHG_-VMieQw.jpeg\"></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> css <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'glamor'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SignUp</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">username</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">password</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">email</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">phone_number</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">authCode</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">onChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> value</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Sign Up</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n          <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Username<span class=\"token punctuation\">'</span></span>\n          <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token string\">'username'</span><span class=\"token punctuation\">,</span> evt<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n          <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Password<span class=\"token punctuation\">'</span></span>\n          <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>password<span class=\"token punctuation\">'</span></span>\n          <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token string\">'password'</span><span class=\"token punctuation\">,</span> evt<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n          <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Email<span class=\"token punctuation\">'</span></span>\n          <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token string\">'email'</span><span class=\"token punctuation\">,</span> evt<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n          <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Phone Number<span class=\"token punctuation\">'</span></span>\n          <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token string\">'phone_number'</span><span class=\"token punctuation\">,</span> evt<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Sign Up</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        \n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n          <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Authentication Code<span class=\"token punctuation\">'</span></span>\n          <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token string\">'authCode'</span><span class=\"token punctuation\">,</span> evt<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n        <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Confirm Sign Up</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        \n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> styles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">container</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">flexDirection</span><span class=\"token operator\">:</span> <span class=\"token string\">'column'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">alignItems</span><span class=\"token operator\">:</span> <span class=\"token string\">'center'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">button</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'170px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">padding</span><span class=\"token operator\">:</span> <span class=\"token string\">'10px 0px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#ddd'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">cursor</span><span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">borderRadius</span><span class=\"token operator\">:</span> <span class=\"token string\">'3px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">':hover'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#ededed'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">input</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">marginBottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'10px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">border</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">outline</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">borderBottom</span><span class=\"token operator\">:</span> <span class=\"token string\">'2px solid #4CAF50'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fontSize</span><span class=\"token operator\">:</span> <span class=\"token string\">'16px'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">'::placeholder'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'rgba(0, 0, 0, .3)'</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> SignUp</code></pre></div>\n<p>Xong c√°i UI, gi·ªù ta s·ª≠ d·ª•ng 2 ph∆∞∆°ng th·ª©c class <code class=\"language-inline-text\">Auth</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// previous imports omitted</span>\n\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Auth <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'aws-amplify'</span>\n\n  <span class=\"token comment\">// previously shown code omitted</span>\n  <span class=\"token function-variable function\">signUp</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> username<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> phone_number <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state\n    Auth<span class=\"token punctuation\">.</span><span class=\"token function\">signUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      username<span class=\"token punctuation\">,</span>\n      password<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">attributes</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        email<span class=\"token punctuation\">,</span>\n        phone_number\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'successful sign up!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error signing up: '</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">confirmSignUp</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    Auth<span class=\"token punctuation\">.</span><span class=\"token function\">confirmSignUp</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>authCode<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'successful confirm sign up!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error confirming signing up: '</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// </span>\n    <span class=\"token comment\">// here we need to update the buttons to attach class methods to onClick event</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>signUp<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Sign Up</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n      <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Authentication Code<span class=\"token punctuation\">'</span></span>\n      <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">evt</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span><span class=\"token string\">'authCode'</span><span class=\"token punctuation\">,</span> evt<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">css</span><span class=\"token punctuation\">(</span>styles<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>confirmSignUp<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Confirm Sign Up</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Cu·ªëi c√πng import v√† s·ª≠ d·ª•ng component trong <code class=\"language-inline-text\">App.js</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> logo <span class=\"token keyword\">from</span> <span class=\"token string\">'./logo.svg'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'./App.css'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> SignUp <span class=\"token keyword\">from</span> <span class=\"token string\">'./SignUp'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App-header<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>logo<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App-logo<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>logo<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App-title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Welcome to React</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SignUp</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<p>C√°c th√¥ng tin c·ªßa user s·∫Ω ƒë∆∞·ª£c l·∫°i trong 'Manage your User Pools', v√†o Amazon Coginito dashboard, ch·ªçn ·ª©ng d·ª•ng ƒë√£ setup, ch·ªçn m·ª•c 'Users and Settings'</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/1000/1*XQfNfYhaGlkD0wxEPtr8bQ.jpeg\"></p>\n<h1 id=\"sign-in\"><a href=\"#sign-in\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sign In</h1>\n<p>Sign in th√¨ c≈©ng t∆∞∆°ng t·ª± nh∆∞ signup, ch√∫ng ta s·ª≠ d·ª•ng <code class=\"language-inline-text\">Auth.signIn(username, password)</code>, tr·∫£ v·ªÅ object n·∫øu th√†nh c√¥ng, sau ƒë√≥ n√≥ s·∫Ω g·ª≠i SMS t·ªõi user v·ªõi code x√°c nh·∫≠n l·∫ßn n·ªØa, verify b·∫±ng <code class=\"language-inline-text\">confirmSignIn</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">signIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Auth<span class=\"token punctuation\">.</span><span class=\"token function\">signIn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>password<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> user <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error signing in! :'</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">confirmSignIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Auth<span class=\"token punctuation\">.</span><span class=\"token function\">confirmSignIn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>authCode<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">userData</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'userdata: '</span><span class=\"token punctuation\">,</span> userData<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'error confirming sign in!: '</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>User data n·∫±m trong c·ª•c d·ªØ li·ªáu tr·∫£ v·ªÅ sau khi g·ªçi h√†m <code class=\"language-inline-text\">confirmSignIn</code></p>\n<p><img src=\"https://cdn-images-1.medium.com/max/800/1*yBT-_MdRPCIj5KN3PnyFmw.png\"></p>\n<p>C√≥ r·∫•t nhi·ªÅu c√°ch ƒë·ªÉ l·∫•y th√¥ng tin user ƒëang ƒëƒÉng nh·∫≠p, c√≥ th·ªÉ d√πng <code class=\"language-inline-text\">Auth.currentAuthenticatedUser()</code> l√† d·ªÖ nh·∫•t, to√†n b·ªô API c√≥ th·ªÉ tham kh·∫£o <a href=\"https://aws.github.io/aws-amplify/api/classes/authclass.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">·ªü ƒë√¢y</a></p>\n<p>K·∫øt th√∫c ph·∫ßn 1 ·ªü ƒë√¢y, ph·∫ßn 2 ti·∫øp t·ª•c v·ªõi Routing v√† TOTP ƒë·ªÉ c√≥ th·ªÉ l√†m Google Authenticator.</p>\n<hr>\n<p>B√†i d·ªãch t·ª´ t√°c gi·∫£ Nader Dabit tr√™n HackerNoon</p>\n","cover_image":""}},{"node":{"id":"dea079a7d56929f46cf5c0bdd1070ebf","title":"Redux v·∫≠n h√†nh nh∆∞ th·∫ø n√†o","path":"/2018-03-06-huong-dan-redux-van-hanh-nhu-the-nao-kem-vi-du/","date":"2018-03-06","timeToRead":5,"desc":"Actions, reducers, action creators, middleware, pure functions, immutability,... nh·ªØng ngo·∫°i ng·ªØ l√†m r·ªëi b·∫•t k·ª≥ ai n·∫øu ch∆∞a bi·∫øt redux","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#Ch%E1%BB%89-s%E1%BB%AD-d%E1%BB%A5ng-State-c%E1%BB%A7a-React\">Ch·ªâ s·ª≠ d·ª•ng State c·ªßa React</a></li>\n<li><a href=\"#Th%C3%AAm-Redux\">Th√™m Redux</a></li>\n<li><a href=\"#Action\">Action</a></li>\n<li><a href=\"#Kh%C3%B4ng-bao-gi%E1%BB%9D-%C4%91%C6%B0%E1%BB%A3c-ph%C3%A9p-thay-%C4%91%E1%BB%95i-State-tr%E1%BB%B1c-ti%E1%BA%BFp\">Kh√¥ng bao gi·ªù ƒë∆∞·ª£c ph√©p thay ƒë·ªïi State tr·ª±c ti·∫øp</a></li>\n<li><a href=\"#Action-t%E1%BB%AB-%C4%91%C3%A2u-m%C3%A0-c%C3%B3\">Action t·ª´ ƒë√¢u m√† c√≥</a></li>\n</ul>\n<!-- /TOC -->\n<p>N·∫øu ch∆∞a bi·∫øt t·∫°i sao l·∫°i sinh ra th·∫±ng Redux n√†y, c√≥ th·ªÉ xem ·ªü tuts tr∆∞·ªõc c·ªßa m√¨nh.</p>\n<h2 id=\"ch·ªâ-s·ª≠-d·ª•ng-state-c·ªßa-react\"><a href=\"#ch%E1%BB%89-s%E1%BB%AD-d%E1%BB%A5ng-state-c%E1%BB%A7a-react\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ch·ªâ s·ª≠ d·ª•ng State c·ªßa React</h2>\n<p>Component s·∫Ω build</p>\n<p><img src=\"https://daveceddia.com/images/counter-plain.png\" alt=\"Redux v·∫≠n h√†nh nh∆∞ th·∫ø n√†o\"></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Counter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function-variable function\">increment</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function-variable function\">decrement</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Counter</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>decrement<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">-</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>increment<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">+</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Counter<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Gi·∫£i th√≠ch ng·∫Øn g·ªçn cho d·ªÖ theo d√µi</p>\n<ul>\n<li>Gi√° tr·ªã <code class=\"language-inline-text\">count</code> ƒë∆∞·ª£c l∆∞u trong <em>state</em> c·ªßa component <code class=\"language-inline-text\">Counter</code></li>\n<li>Khi user click '+', h√†m <code class=\"language-inline-text\">increment</code> s·∫Ω tƒÉng gi√° tr·ªã <code class=\"language-inline-text\">count</code> l√™n</li>\n<li>Khi state b·ªã thay ƒë·ªïi, React s·∫Ω render l·∫°i <code class=\"language-inline-text\">Counter</code> v√† nh·ªØng component b√™n trong c·ªßa n√≥, gi√° tr·ªã m·ªõi s·∫Ω hi·ªÉn th·ªã</li>\n</ul>\n<h2 id=\"th√™m-redux\"><a href=\"#th%C3%AAm-redux\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Th√™m Redux</h2>\n<p>Nh∆∞ ƒë√£ ƒë·ªÅ c·∫≠p trong tuts tr∆∞·ªõc, Redux l∆∞u <em>state</em> l·∫°i trong 1 c√°i <strong>store</strong>, tranh l·∫´n l·ªôn, <strong>store</strong> l√† n∆°i l∆∞u <strong>state</strong>, v√† <strong>state</strong> d·ªØ li·ªáu.</p>\n<p>C√†i redux v√† react-redux package</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install redux react-redux --save</code></pre></div>\n<p>T·∫°i sao ph·∫£i 2 c√°i package?, c√°i redux ch·ªâ cho ta c√°i <strong>store</strong>, ƒë·ªÉ l·∫•y ƒë∆∞·ª£c c√°i <em>state</em> ra, s·ª≠ d·ª•ng h√†m <code class=\"language-inline-text\">connect</code> trong <code class=\"language-inline-text\">react-redux</code>, v√¨ redux kh√¥ng ph·∫£i ch·ªâ l√†m vi·ªác chung ƒë∆∞·ª£c v·ªõi React th√¥i kh√¥ng, n√≥ c√≥ th·ªÉ ch∆°i v·ªõi Vue, Angular kh√¥ng ch·ª´ng.</p>\n<p>B·ªè state ƒëi</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Counter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">increment</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function-variable function\">decrement</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Counter</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>decrement<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">-</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>increment<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">+</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Counter<span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-inline-text\">connect</code> n√≥ v·ªõi store th√¥i</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> connect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ...</span>\n<span class=\"token comment\">// Vi·∫øt th√™m h√†m n√†y</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">mapStateToProps</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Thay c√°i</span>\n<span class=\"token comment\">// export default Counter;</span>\n\n<span class=\"token comment\">// b·∫±ng</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>mapStateToProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Counter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ok v·∫≠y l√† xong ph·∫ßn connect component v·ªõi c√°c state ·ªü trong <em>store</em>, ch√∫ng ta c·∫ßn khai b√°o Store!</p>\n<p>B·ªçc to√†n b·ªô c√°i <code class=\"language-inline-text\">App</code> b√™n trong component <code class=\"language-inline-text\">Provider</code> c·ªßa <em>react-redux</em> ƒë·ªÉ t·∫•t c·∫£ component b√™n trong <code class=\"language-inline-text\">App</code> c√≥ th·ªÉ s·ª≠ d·ª•ng h√†m <code class=\"language-inline-text\">connect</code> ƒë·ªÉ g·ªçi ƒë·∫øn <em>store</em></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Provider <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">...</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Counter</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Provider</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Ch∆∞a xong, ch√∫ng ta ph·∫£i setup c√°i store ƒë·ªÉ ƒë∆∞a v√†o cho Provider</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'redux'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Provider</span></span> <span class=\"token attr-name\">store</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>store<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Counter</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Provider</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>V·∫´n ch∆∞a ƒë·ªß, th·∫≠t s·ª± Redux kh√¥ng ƒë∆∞·ª£c th√¥ng minh nh∆∞ ch√∫ng ta t∆∞·ªüng t∆∞·ª£ng, l√∫c ƒë·∫ßu m√¨nh ƒë√£ nghƒ© r·∫±ng khi create store nh∆∞ v·∫≠y n√≥ s·∫Ω cho m√¨nh nh·ªØng gi√° tr·ªã default b√™n trong store. Nh∆∞ng kh√¥ng ch√∫ng ta ph·∫£i l√†m tay t·∫•t c·∫£. Ch√∫ng ta ph·∫£i cung c·∫•p cho n√≥ 1 h√†m g·ªçi l√† <code class=\"language-inline-text\">reducer</code>, c√°i h√†m <code class=\"language-inline-text\">reducer</code> n√†y ph·∫£i <em>return</em> v·ªÅ m·ªôt gi√° tr·ªã cho state, lu√¥n ph·∫£i return state nh√©. B√™n trong <code class=\"language-inline-text\">reducer</code> ta s·∫Ω x√†o n·∫•u state theo y√™u c·∫ßu, n√≥ s·∫Ω nh·∫≠n state hi·ªán t·∫°i v√† tr·∫£ v·ªÅ state m·ªõi.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> initialState<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span>reducer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Provider</span></span> <span class=\"token attr-name\">store</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>store<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Counter</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Provider</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"action\"><a href=\"#action\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Action</h2>\n<p>Action l√† g√¨, n√≥ ƒë√≥ng vai tr√≤ nh∆∞ th·∫ø n√†o v√† n√≥ ƒë·∫øn t·ª´ ƒë√¢u? L√†m th·∫ø n√†o m√† ta ƒë·ªïi gi√° tr·ªã <code class=\"language-inline-text\">counter</code>?</p>\n<p><code class=\"language-inline-text\">action</code> l√† 1 JS object n√≥ s·∫Ω cho bi·∫øt b·∫°n ƒëang mu·ªën <code class=\"language-inline-text\">order</code> m√≥n n√†o, nh∆∞ t·ªù gi·∫•y ghi <code class=\"language-inline-text\">order</code> trong nh√† h√†ng ·∫•y m√†, n√≥ s·∫Ω ch∆∞a th√¥ng tin 'm√≥n' b·∫°n order, ƒë·∫ßu b·∫øp <code class=\"language-inline-text\">reducer</code> s·∫Ω d·ª±a v√†o ƒë√≥ m√† x√†o n·∫•u ra 'm√≥n' b·∫°n order</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">reducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> initialState<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'INCREMENT'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'DECREMENT'</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Reducer s·∫Ω cƒÉn c·ª© v√†o <code class=\"language-inline-text\">action.type</code> ƒë·ªÉ th·ª±c hi·ªán thay ƒë·ªïi v√† tr·∫£ v·ªÅ state m·ªõi, n√™n nh·ªõ ch√∫ng ta ph·∫£i LU√îN LU√îN tr·∫£ v·ªÅ state trong <code class=\"language-inline-text\">reducer</code>, n·∫øu c√≥ hay kh√¥ng c√≥ thay ƒë·ªïi c≈©ng ph·∫£i tr·∫£ v·ªÅ <em>state</em></p>\n<h2 id=\"kh√¥ng-bao-gi·ªù-ƒë∆∞·ª£c-ph√©p-thay-ƒë·ªïi-state-tr·ª±c-ti·∫øp\"><a href=\"#kh%C3%B4ng-bao-gi%E1%BB%9D-%C4%91%C6%B0%E1%BB%A3c-ph%C3%A9p-thay-%C4%91%E1%BB%95i-state-tr%E1%BB%B1c-ti%E1%BA%BFp\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kh√¥ng bao gi·ªù ƒë∆∞·ª£c ph√©p thay ƒë·ªïi State tr·ª±c ti·∫øp</h2>\n<p>State l√† m·ªôt immutable object, tuy·ªát ƒë·ªëi <strong>KH√îNG</strong> thay ƒë·ªïi state nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">brokenReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state <span class=\"token operator\">=</span> initialState<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'INCREMENT'</span><span class=\"token operator\">:</span>\n      <span class=\"token comment\">// B·∫¨Y: ƒë·ª´ng thay gi√° tr·ªã b·∫±ng ki·ªÉu n√†y</span>\n      state<span class=\"token punctuation\">.</span>count<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'DECREMENT'</span><span class=\"token operator\">:</span>\n      <span class=\"token comment\">// B·∫¨Y: ƒë·ª´ng thay gi√° tr·ªã b·∫±ng ki·ªÉu n√†y</span>\n      state<span class=\"token punctuation\">.</span>count<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>L√†m nh∆∞ v·∫≠y c≈©ng c·∫•m tuy·ªát ƒë·ªëi nh√©: </p>\n<ul>\n<li><code class=\"language-inline-text\">state.foo = 7</code></li>\n<li><code class=\"language-inline-text\">state.items.push(newItem)</code></li>\n<li><code class=\"language-inline-text\">delete state.something</code></li>\n</ul>\n<h2 id=\"action-t·ª´-ƒë√¢u-m√†-c√≥\"><a href=\"#action-t%E1%BB%AB-%C4%91%C3%A2u-m%C3%A0-c%C3%B3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Action t·ª´ ƒë√¢u m√† c√≥</h2>\n<p>Action kh√¥ng t·ª± sinh ra, n√≥ ƒë∆∞·ª£c <code class=\"language-inline-text\">dispatch</code> ra t·ª´ h√†m <code class=\"language-inline-text\">dispatch</code>. H√†m <code class=\"language-inline-text\">dispatch</code> th√¨ ƒë·∫∑c bi·ªát l√† n√≥ kh√¥ng ƒë∆∞·ª£c import, m√¨nh c√≥ th·ªÉ g·ªçi <code class=\"language-inline-text\">store.dispatch(someAction)</code>, nh∆∞ng c√°i store n√†y th√¨ n√≥ nƒÉm ·ªü trong 1 file th√¥i, V·∫≠y h√†m <code class=\"language-inline-text\">dispatch</code> n√†y l√†m sao c√≥ ƒë√¢y?</p>\n<p>Th·∫≠t ra l√∫c ch√∫ng ta g·ªçi <code class=\"language-inline-text\">connect</code> th√¨ h√†m <code class=\"language-inline-text\">connect</code> c≈©ng ƒë√£ <em>map</em> c√°i h√†m <code class=\"language-inline-text\">dispatch</code> v√†o trong props c·ªßa component lu√¥n.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> connect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Counter</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">increment</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'INCREMENT'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function-variable function\">decrement</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'DECREMENT'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Counter</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>decrement<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">-</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>increment<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">+</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">mapStateToProps</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>mapStateToProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Counter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n","cover_image":""}},{"node":{"id":"e0a65fb71b048a3e4e4569e089a64b09","title":"8 c√¢u ƒëi·ªÅu ki·ªán khi render trong React","path":"/2018-03-05-8-huong-dan-cach-render-component-trong-react/","date":"2018-03-05","timeToRead":3,"desc":"Tutorial n√†y s·∫Ω cover nh·ªØng c√¢u ƒëi·ªÅu ki·ªán d√πng ƒë·ªÉ render component ph·ªï bi·∫øn nh·∫•t","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#ifelse\">If/Else</a></li>\n<li><a href=\"#ko-render-v%E1%BB%9Bi-null\">Ko render v·ªõi <code class=\"language-inline-text\">null</code></a></li>\n<li><a href=\"#%C4%91%E1%BA%B7t-bi%E1%BA%BFn-cho-element\">ƒê·∫∑t bi·∫øn cho element</a></li>\n<li><a href=\"#c%C3%A2u-%C4%91i%E1%BB%81u-ki%E1%BB%87n-r%C3%BAt-g%E1%BB%8Dn\">C√¢u ƒëi·ªÅu ki·ªán r√∫t g·ªçn</a></li>\n<li><a href=\"#short-circuit-operator-\">Short-circuit operator (&#x26;&#x26;)</a></li>\n<li><a href=\"#immediately-invoked-function-expressions-iife\">Immediately-invoked function expressions (IIFE)</a></li>\n<li><a href=\"#subcomponents\">Subcomponents</a></li>\n<li><a href=\"#higher-order-component-hoc\">Higher-Order Component (HOC)</a></li>\n</ul>\n<!-- /TOC -->\n<h1 id=\"ifelse\"><a href=\"#ifelse\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>If/Else</h1>\n<p>D·ªÖ nh·∫•t v√† cƒÉn b·∫£n nh·∫•t</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>mode <span class=\"token operator\">===</span> <span class=\"token string\">'view'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"ko-render-v·ªõi-null\"><a href=\"#ko-render-v%E1%BB%9Bi-null\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ko render v·ªõi <code class=\"language-inline-text\">null</code></h1>\n<p>N·∫øu kh√¥ng mu·ªën render m·ªôt component, trong h√†m return tr·∫£ v·ªÅ gi√° tr·ªã <code class=\"language-inline-text\">null</code>, l∆∞u √Ω khi return null nh∆∞ng h√†m render v·∫´n ƒë∆∞·ª£c g·ªçi.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>mode <span class=\"token operator\">===</span> <span class=\"token string\">'view'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token keyword\">null</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"ƒë·∫∑t-bi·∫øn-cho-element\"><a href=\"#%C4%91%E1%BA%B7t-bi%E1%BA%BFn-cho-element\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒê·∫∑t bi·∫øn cho element</h1>\n<p>Gi·ªù n·∫øu kh√¥ng mu·ªën th√™m c√¢u <code class=\"language-inline-text\">else</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> input<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>mode <span class=\"token operator\">!==</span> <span class=\"token string\">'view'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      input <span class=\"token operator\">=</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n      \n    <span class=\"token keyword\">return</span> input<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"c√¢u-ƒëi·ªÅu-ki·ªán-r√∫t-g·ªçn\"><a href=\"#c%C3%A2u-%C4%91i%E1%BB%81u-ki%E1%BB%87n-r%C3%BAt-g%E1%BB%8Dn\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C√¢u ƒëi·ªÅu ki·ªán r√∫t g·ªçn</h1>\n<p>Thay g√¨ <code class=\"language-inline-text\">if/else</code>, c√≥ th·ªÉ d√πng c√¢u ƒëi·ªÅu ki·ªán r√∫t g·ªçn ƒë·ªÉ render lu√¥n</p>\n<div class=\"gridsome-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ƒëi·ªÅu ki·ªán ? n·∫øu true : n·∫øu false</code></pre></div>\n<p>S·ª≠ d·ª•ng v·ªõi v√≠ d·ª• tr√™n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>mode <span class=\"token operator\">===</span> <span class=\"token string\">'view'</span> <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> : null}\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    )\n}</span></code></pre></div>\n<p>G·ªçn g√†ng s·∫°ch s·∫Ω h∆°n, tuy nhi√™n c≈©ng ƒë·ª´ng l·∫°m d·ª•ng qu√°, c√≥ anh b·∫°n l√†m chung v·ªõi m√¨nh, l·∫°m d·ª•ng c√°ch n√†y qu√° l·ªë, ƒë·∫øn n·ªïi m·ªói l·∫ßn ƒë·ªçc code c·ªßa anh ·∫•y l√† c∆°n √°c m·ªông, m·∫∑c d√π kh√¥ng sai, nh∆∞ng th·∫±ng n√†o code sau m·ªü l√™n ƒë·ªçc t·ªôi n√≥ l·∫Øm.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span> condition1\n      <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component1</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span> condition2\n        <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component2</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span> condition3\n          <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component3</span></span> <span class=\"token punctuation\">/></span></span>\n          <span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token attr-name\">4</span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1 id=\"short-circuit-operator-\"><a href=\"#short-circuit-operator-\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Short-circuit operator (&#x26;&#x26;)</h1>\n<p>Trong tr∆∞·ªùng h·ª£p tr√™n, r√µ r√†ng vi·ªác tr·∫£ v·ªÅ <code class=\"language-inline-text\">null</code> c≈©ng h∆°i d∆∞ th·ª´a, c√≥ th·ªÉ s·ª≠ d·ª•ng ng·∫Øn-h∆°n-c·∫£-ng·∫Øn v·ªõi c√∫ ph√°p <code class=\"language-inline-text\">&amp;&amp;</code>. C≈©ng nh∆∞ c√¢u ƒëi·ªÅu ki·ªán r√∫t g·ªçn, tuy nhi√™n n√≥ s·∫Ω ch·ªâ render n·∫øu <code class=\"language-inline-text\">true</code>, con <code class=\"language-inline-text\">false</code> n√≥ s·∫Ω kh√¥ng l√†m g√¨ c·∫£</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>mode <span class=\"token operator\">===</span> <span class=\"token string\">'view'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">}\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    )\n}</span></code></pre></div>\n<h1 id=\"immediately-invoked-function-expressions-iife\"><a href=\"#immediately-invoked-function-expressions-iife\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Immediately-invoked function expressions (IIFE)</h1>\n<p>IIFE nh∆∞ t√™n g·ªçi n√≥ ƒë√£ n√≥i l√™n t·∫•t c·∫£, h√†m s·∫Ω th·ª±c thi ngay khi n√≥ ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a.</p>\n<p>B√¨nh th∆∞·ªùng</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ƒê·ªÉ bi·∫øn n√≥ th√†nh IIFE, convert n√≥ qua th√†nh m·ªôt expression</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* tham s·ªë*/</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span> <span class=\"token comment\">/* tham s·ªë*/</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// vi√™t nh∆∞ v·∫ßy c≈©ng ƒë∆∞·ª£c nha</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">myFunction</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* tham s·ªë*/</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span> <span class=\"token comment\">/* tham s·ªë*/</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ho·∫∑c b·ªè lu√¥n t√™n</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* tham s·ªë*/</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span> <span class=\"token comment\">/* tham s·ªë*/</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ho·∫∑c d√πng lu√¥n arrow function cho m√°u</span>\n<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token comment\">/* tham s·ªë*/</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span> <span class=\"token comment\">/* tham s·ªë*/</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Gi·ªù th√¨ d√πng IIFE v·ªõi component</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token punctuation\">{</span>\n              <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">const</span> handler <span class=\"token operator\">=</span> view \n                    <span class=\"token operator\">?</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleEdit \n                    <span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSave<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">const</span> label <span class=\"token operator\">=</span> view <span class=\"token operator\">?</span> <span class=\"token string\">'Edit'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'Save'</span><span class=\"token punctuation\">;</span>\n              \n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n                  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handler<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                    </span><span class=\"token punctuation\">{</span>label<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n                  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token plain-text\">  \n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"subcomponents\"><a href=\"#subcomponents\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Subcomponents</h1>\n<p>N·∫øu th·∫•y d√πng IFEE c√≥ v·∫ª h∆°i kh√≥ ch·ªãu, ch√∫ng ta ƒëang l√†m React, t·∫•t c·∫£ h√£y ƒë∆∞a v·ªÅ component, t√°ch ph·∫ßn logic c·ªßa component v√† ph·∫ßn render c√°i view ra lu√¥n l√† ƒë·ªÅu ƒë∆∞·ª£c khuy·∫øn c√°o, declarative vs. imperative programing</p>\n<p>V·∫≠y n√™n chuy·ªÉn c√°c ƒëi·ªÅu ki·ªán n√†y sang m·ªôt sub component ƒë·ªÉ render d·ª±a tr√™n <code class=\"language-inline-text\">props</code> lu√¥n l√† √Ω hay.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">const</span> view <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>mode <span class=\"token operator\">===</span> <span class=\"token string\">'view'</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token punctuation\">{</span>\n              view\n                <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">EditComponent</span></span> <span class=\"token attr-name\">handleEdit</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleEdit<span class=\"token punctuation\">}</span></span>  <span class=\"token punctuation\">/></span></span>\n                <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n                  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SaveComponent</span></span> \n                   <span class=\"token attr-name\">handleChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span></span>\n                   <span class=\"token attr-name\">handleSave</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleSave<span class=\"token punctuation\">}</span></span>\n                   <span class=\"token attr-name\">text</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>inputText<span class=\"token punctuation\">}</span></span>\n                 <span class=\"token punctuation\">/></span></span>\n                <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token plain-text\"> \n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Ho·∫∑c trong React-Router-4 m·ªói route l√† m·ªôt <code class=\"language-inline-text\">If component</code> v·ªõi c√°ch th·ª©c v·∫≠n h√†nh nh∆∞ sao</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">If</span></span>\n    <span class=\"token attr-name\">condition</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span> view <span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">then</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span> editComponent <span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">else</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span> editComponent <span class=\"token punctuation\">}</span></span>\n<span class=\"token punctuation\">/></span></span>\n\n<span class=\"token comment\">// Component Route trong React-Router</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Home<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>ƒê·ªçc th√™m v·ªÅ <a href=\"/2018-01-12-react-router-dom-gioi-thieu-react-router-4\">React-Router-4</a></p>\n<h1 id=\"higher-order-component-hoc\"><a href=\"#higher-order-component-hoc\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Higher-Order Component (HOC)</h1>\n<p>S·ª≠ d·ª•ng HOC ƒë·ªÉ truy·ªÅn xu·ªëng m·ªôt <code class=\"language-inline-text\">prop</code> d·ª±a tr√™n ki·ªÉm tra logic</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">higherOrderComponent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">Component</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token function\">EnhancedComponent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>condition<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AnotherComponent</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>props <span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AnotherComponent</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>props <span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ªçc th√™m v·ªÅ <a href=\"/2018-03-02-gioi-thieu-higher-order-component-trong-react\">HOCs t·∫°i ƒë√¢y</a></p>\n","cover_image":""}},{"node":{"id":"2357b01f4fedb762de94f08f22517a13","title":"Gi·ªõi thi·ªáu Higher-Order Component trong React","path":"/2018-03-02-huong-dan-gioi-thieu-higher-order-component-trong-react/","date":"2018-03-02","timeToRead":3,"desc":"Higher-Order Component (HOC) l√† k·ªπ thu·∫≠t m√† c√°c b·∫°n l·∫≠p tr√¨nh vi√™n Vi·ªát Nam r·∫•t th√≠ch khi nh·∫Øc ƒë·∫øn React, ri√™ng m√¨nh th√¨ kh√¥ng","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#t%E1%BB%95ng-quan\">T·ªïng quan</a></li>\n<li><a href=\"#higher-order-function\">Higher-Order Function</a></li>\n<li><a href=\"#higher-order-component\">Higher-Order Component</a></li>\n</ul>\n<!-- /TOC -->\n<p>HOC nghe kh√° tr·ª´u t∆∞·ª£ng v√† cao si√™u, m·ªôt c√°i t√™n sang ch·∫£nh cho m·ªôt c√°ch l√†m trong React, n√≥ c≈©ng c√≥ c√°i h·∫°n ch·∫ø v√† ∆∞u ƒëi·ªÉm ri√™ng, tuy nhi√™n th√≠ch th√¨ h·ªçc th√¥i.</p>\n<h2 id=\"√¥n-l·∫°i-currying-function\"><a href=\"#%C3%B4n-l%E1%BA%A1i-currying-function\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>√în l·∫°i Currying function</h2>\n<p>ƒê·ªÉ ƒë·ªçc hi·ªÉu b√†i n√†y dƒ© nhi√™n c·∫ßn n·∫Øm c∆° b·∫£n ES6, hi·ªÉu c√†-ri function l√† th·∫ø n√†o (Currying Functional Programming)</p>\n<p>C√†-ri function l√† c√°ch vi·∫øt t√°ch m·ªôt function nh·∫≠n m·ªôt ƒë·ªën...ggggg arguments, t√°ch function ƒë√≥ ra th√†nh nhi·ªÅu function con, m·ªói function nh·∫≠n 1 argument. V√≠ d·ª•</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// m·ªôt h√†m sum th√¥ng th∆∞·ªùng</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">sum</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// c√†-ri function</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">curriedSum</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// vi·∫øt h√†m c√†-ri b·∫±ng arrow function</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">curriedSum</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">a</span> <span class=\"token operator\">=></span> <span class=\"token parameter\">b</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span> b\n\n<span class=\"token comment\">//g·ªçi h√†m c√†-ri</span>\n<span class=\"token function\">curriedSum</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>M·ªôt s·ªë c√°ch vi·∫øt kh√°c c·ªßa ES6 t√¨m l·∫°i m·∫•y b√†i c≈© c·ªßa m√¨nh <a href=\"/2016-11-15-chuong-1-es6-can-ban\">ƒë√£ chia s·∫ª</a>.</p>\n<h2 id=\"higher-order-function\"><a href=\"#higher-order-function\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Higher-Order Function</h2>\n<p>C√°i n√†y kh√¥ng m·ªõi, tr∆∞·ªõc ƒë√¢y trong javascript v·∫´n th∆∞·ªùng vi·∫øt ki·ªÉu truy·ªÅn m·ªôt callback function (<em>v√¨ trong javascript function ƒë∆∞·ª£c xem l√† object n√™n l√†m ƒë∆∞·ª£c chuy·ªán n√†y</em>), hay 1 function <strong>tr·∫£ v·ªÅ m·ªôt k·∫øt qu·∫£ tr·∫£ v·ªÅ</strong> c·ªßa function kh√°c.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">calculator</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">inputFunction</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> resultValue <span class=\"token operator\">=</span> <span class=\"token function\">inputFunction</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>resultValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> resultValue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>all</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> all<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">multiply</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>all</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> all<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span>b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a<span class=\"token operator\">*</span>b<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ta c√≥ th·ªÉ s·ª≠ d·ª•ng h√†m <code class=\"language-inline-text\">calculator</code> nh∆∞ sau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">calculator</span><span class=\"token punctuation\">(</span>mutiply<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 8</span>\n\n<span class=\"token function\">calculator</span><span class=\"token punctuation\">(</span>add<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">9</span><span class=\"token punctuation\">,</span><span class=\"token number\">12</span><span class=\"token punctuation\">,</span><span class=\"token number\">15</span><span class=\"token punctuation\">,</span><span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => 63</span></code></pre></div>\n<p>C√°c h√†m nh∆∞ <code class=\"language-inline-text\">add</code>, <code class=\"language-inline-text\">multiply</code> ch·∫•p nh·∫≠n s·ªë l∆∞·ª£ng input kh√¥ng gi·ªõi h·∫°n, h√†m <code class=\"language-inline-text\">calculator</code> s·ª≠ d·ª•ng nh∆∞ m·ªôt container, l√†m cha thi√™n h·∫°, sai h·∫øt ƒë·ª©a n√†y t·ªõi ƒë∆∞a kh√°c l√†m vi·ªác, <strong>extend</strong> th√™m m·ªôt s·ªë x·ª≠ l√Ω tr∆∞·ªõc khi g·ªçi h√†m <code class=\"language-inline-text\">add</code>, <code class=\"language-inline-text\">multiply</code></p>\n<h1 id=\"higher-order-component\"><a href=\"#higher-order-component\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Higher-Order Component</h1>\n<p>M·ªôt higher-order component l√† m·ªôt <strong>m·ªôt function</strong> nh·∫≠n v√†o m·ªôt <code class=\"language-inline-text\">component</code> nh∆∞ m·ªôt argument v√† tr·∫£ v·ªÅ \"phi√™n b·∫£n m·ªü r·ªông\" c·ªßa component ƒë√≥.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">(</span><span class=\"token parameter\">InputComponent</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> ExtendedComponent\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ho·∫∑c</span>\n<span class=\"token parameter\">InputComponent</span> <span class=\"token operator\">=></span> ExtendedComponent</code></pre></div>\n<p><code class=\"language-inline-text\">ExtendedComponent</code> l√† m·ªôt component container, n√≥ tr·∫£ v·ªÅ <code class=\"language-inline-text\">InputComponent</code> v·ªõi m·ªôt s·ªë extend</p>\n<p><img src=\"https://cms-assets.tutsplus.com/uploads/users/1795/posts/30094/image/Introduction-To-Higher-Order-Components-in-React-Overview.jpg\" alt=\"Gi·ªõi thi·ªáu Higher-Order Components trong React\"></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">withGreyBg</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">WrappedComponent</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">NewComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> bgStyle <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'grey'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>wrapper<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>bgStyle<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">WrappedComponent</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> SmallCardWithGreyBg <span class=\"token operator\">=</span> <span class=\"token function\">withGreyBg</span><span class=\"token punctuation\">(</span>SmallCard<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> BigCardWithGreyBg <span class=\"token operator\">=</span> <span class=\"token function\">withGreyBg</span><span class=\"token punctuation\">(</span>BigCard<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> HugeCardWithGreyBg <span class=\"token operator\">=</span> <span class=\"token function\">withGreyBg</span><span class=\"token punctuation\">(</span>HugeCard<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CardsDemo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SmallCardWithGreyBg</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BigCardWithGreyBg</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n        <span class=\"token operator\">&lt;</span>HugeCardWithGreyBg <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"https://cms-assets.tutsplus.com/uploads/users/1795/posts/30094/image/Introduction-To-Higher-Order-Components-in-React-An-Example-HOC.jpg\" alt=\"Gi·ªõi thi·ªáu Higher-Order Components trong React\"></p>\n<h2 id=\"nh∆∞·ª£c-ƒëi·ªÉm\"><a href=\"#nh%C6%B0%E1%BB%A3c-%C4%91i%E1%BB%83m\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nh∆∞·ª£c ƒëi·ªÉm</h2>\n<ul>\n<li>Trong m·ªôt s·ªë <a href=\"https://stackoverflow.com/questions/41084313/what-are-the-downsides-of-repeating-react-higher-order-components\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">tr∆∞·ªùng h·ª£p</a> s·∫Ω l√†m ·∫£nh h∆∞·ªüng ƒë·∫øn hi·ªáu nƒÉng, ƒë·∫øn m·ª©c <a href=\"https://www.youtube.com/watch?v=zD_judE-bXk\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Andrew Clark</a> ph·∫£i build h·∫≥n m·ªôt th∆∞ vi·ªán ƒë·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ n√†y</li>\n<li>R√µ r√†ng s·∫Ω th·∫•y HOC ko <strong>minh b·∫°ch</strong> trong vi·ªác ƒë√£ <strong>extend</strong> nh·ªØng ph·∫ßn n√†o cho th·∫±ng con</li>\n<li>N·∫øu m·ªôt component ƒë∆∞·ª£c b·ªçc trong nhi·ªÅu HOC c√πng l√∫c, c√≥ th·ªÉ s·∫Ω <em>v√¥ t√¨nh d·∫´m ƒë·∫°p</em> qua l·∫°i</li>\n<li>Debug c≈©ng kh√¥ng d·ªÖ g√¨ v√¨ ƒëang s·ª≠ d·ª•ng arrow function, ph·∫£i tung th√™m chi√™u <code class=\"language-inline-text\">displayName</code></li>\n</ul>\n","cover_image":""}},{"node":{"id":"9fb0c6362096788ba892dbc1ce48951b","title":"Redux l√† g√¨ v√† t·∫°i sao ph·∫£i d√πng?","path":"/2018-02-14-huong-dan-redux-la-gi-tai-sao-phai-dung/","date":"2018-02-14","timeToRead":3,"desc":"N·∫øu ƒë√£ ƒë·ª•ng t·ªõi React th√¨ s·ªõm mu·ªôn g√¨ b·∫°n c≈©ng s·∫Ω nghe ƒë·∫øn Redux","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#t%E1%BA%A1i-sao\">T·∫°i sao?</a></li>\n<li><a href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81-l%C3%A0-data-flow-lu%E1%BB%93ng-d%E1%BB%AF-li%E1%BB%87u\">V·∫•n ƒë·ªÅ l√†: Data Flow (Lu·ªìng d·ªØ li·ªáu)</a></li>\n<li><a href=\"#k%E1%BA%BFt-n%E1%BB%91i-tr%E1%BB%B1c-ti%E1%BA%BFp-%C4%91%E1%BA%BFn-d%E1%BB%AF-li%E1%BB%87u-v%E1%BB%9Bi-redux\">K·∫øt n·ªëi tr·ª±c ti·∫øp ƒë·∫øn d·ªØ li·ªáu v·ªõi Redux</a></li>\n<li><a href=\"#khi-n%C3%A0o-s%E1%BB%AD-d%E1%BB%A5ng-redux\">Khi n√†o s·ª≠ d·ª•ng Redux</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"t·∫°i-sao\"><a href=\"#t%E1%BA%A1i-sao\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·∫°i sao?</h2>\n<p>C√¢u h·ªèi ƒë·∫ßu ti√™n c·∫ßn tr·∫£ l·ªùi: T·∫°i sao ch√∫ng ta c·∫ßn Redux?</p>\n<p>Dƒ© nhi√™n c√¢u tr·∫£ l·ªùi kh√¥ng ph·∫£i l√† b·ªüi v√¨ ai tr√™n m·∫°ng c≈©ng b·∫£o th·∫ø n√™n em ph·∫£i x√†i n√≥.</p>\n<p>Redux ƒë∆∞·ª£c s·ª≠ d·ª•ng r·ªông r√£i v√¨ n√≥ gi·∫£i quy·∫øt <strong>v·∫•n ƒë·ªÅ</strong> m√† ch√∫ng ta th∆∞·ªùng g·∫∑p khi l√†m Single Page App.</p>\n<p>V·∫•n ƒë·ªÅ \"State management\"? Kh√¥ng h·ªÅ, b·∫£n th√¢n React ƒë√£ gi·∫£i quy·∫øt State management r·ªìi, Redux gi√∫p qu·∫£n l√Ω <code class=\"language-inline-text\">state</code>, nh∆∞ng n√≥ kh√¥ng ph·∫£i l√† <strong>v·∫•n ƒë·ªÅ</strong> m·∫•u ch·ªët.</p>\n<h2 id=\"v·∫•n-ƒë·ªÅ-l√†-data-flow-lu·ªìng-d·ªØ-li·ªáu\"><a href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81-l%C3%A0-data-flow-lu%E1%BB%93ng-d%E1%BB%AF-li%E1%BB%87u\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V·∫•n ƒë·ªÅ l√†: Data Flow (Lu·ªìng d·ªØ li·ªáu)</h2>\n<p>N·∫øu s·ª≠ d·ª•ng React m·ªôt th·ªùi gian, ch√∫ng ta th·∫•y ngay <code class=\"language-inline-text\">props</code> trong React l√† d·ªØ li·ªáu ƒëi xu·ªëng theo 1 chi·ªÅu t·ª´ tr√™n xu·ªëng. D·ªØ li·ªáu truy·ªÅn xu·ªëng qua <code class=\"language-inline-text\">props</code>.</p>\n<p>V√≠ d·ª• v·ªõi <em>component</em> <code class=\"language-inline-text\">Couter</code> nh∆∞ sau</p>\n<p><img src=\"https://daveceddia.com/images/counter-component.png\" alt=\"Redux l√† g√¨ v√† t·∫°i sao ph·∫£i d√πng?\"></p>\n<p>Gi√° tr·ªã <code class=\"language-inline-text\">count</code> l∆∞u trong <em>state</em> c·ªßa component <code class=\"language-inline-text\">App</code>, ƒë∆∞·ª£c truy·ªÅn xu·ªëng qua <em>props</em></p>\n<p><img src=\"https://daveceddia.com/images/passing-props-down.png\" alt=\"Redux l√† g√¨ v√† t·∫°i sao ph·∫£i d√πng?\"></p>\n<p>ƒê·ªÉ d·ªØ li·ªáu ƒëi ng∆∞·ª£c l√™n tr√™n, c√≥ ph·∫£i ch√∫ng ta s·∫Ω c√≥ 1 h√†m <em>callback</em>, h√†m <em>callback</em> n√†y ƒë∆∞·ª£c truy·ªÅn xu·ªëng cho <strong>t·∫•t c·∫£</strong> c√°c component con, khi d·ªØ li·ªáu <code class=\"language-inline-text\">count</code> thay ƒë·ªïi, ch√∫ng ta g·ªçi l·∫°i h√†m <em>callback</em> n√†y ƒë·ªÉ 'b√°o' cho <code class=\"language-inline-text\">App</code> bi·∫øt gi√° tr·ªã <code class=\"language-inline-text\">count</code> ƒë√£ thay ƒë·ªïi.</p>\n<p><img src=\"https://daveceddia.com/images/passing-callbacks-down.png\" alt=\"Redux l√† g√¨ v√† t·∫°i sao ph·∫£i d√πng?\"></p>\n<p>H√¨nh dung nh∆∞ th·∫ø n√†y, d·ªØ li·ªáu nh∆∞ l√† ngu·ªìn ƒëi·ªán ·ªü nh√†, mu·ªën c√≥ ƒëi·ªán t·ª´ nh√† m√°y t·ªõi t·ª´ng h·ªô d√¢n ta c·∫ßn ƒë∆∞·ªùng d√¢y ƒëi·ªán ƒë∆∞·ª£c n·ªëi xuy√™n su·ªët t·ª´ nh√† m√°y ƒë·∫øn t·ª´ng h·ªô d√¢n, v√¨ ƒëi·ªán kh√¥ng th·ªÉ truy·ªÅn qua kh√¥ng kh√≠ nh∆∞ s√≥ng ƒëi·ªán tho·∫°i. ƒê√≥ l√† c√°ch React ƒë∆∞a d·ªØ li·ªáu ƒë·∫øn c√°c <em>component</em> con, v·ªõi Redux ch√∫ng ta s·∫Ω h·ªó tr·ª£ d·ªØ li·ªáu ƒëi qua ƒë∆∞·ªùng s√≥ng ƒëi·ªán tho·∫°i.</p>\n<p>S·ªõm hay mu·ªôn g√¨ b·∫°n c≈©ng r∆°i v√†o t√¨nh hu·ªëng nh∆∞ tr√™n, container ·ªü tr√™n c√πng c√≥ m·ªôt v√†i d·ªØ li·ªáu m√† components b√™n d∆∞·ªõi n√≥ c≈©ng c·∫ßn d·ªØ li·ªáu t∆∞∆°ng t·ª±. L·∫•y v√≠ d·ª• nh∆∞ th√¥ng tin user tr√™n trang Twitter</p>\n<p><img src=\"https://daveceddia.com/images/twitter-user-data.png\" alt=\"Redux l√† g√¨ v√† t·∫°i sao ph·∫£i d√πng?\"></p>\n<p>ƒê·ªÉ ƒë∆∞a d·ªØ li·ªáu t·ª´ <code class=\"language-inline-text\">App</code> xu·ªëng c√°c <code class=\"language-inline-text\">Avatar</code> components, b·∫°n ph·∫£i truy·ªÅn d·ªØ li·ªáu n√†y qua nh·ªØng component kh√¥ng c·∫ßn thi·∫øt.</p>\n<p><img src=\"https://daveceddia.com/images/twitter-hierarchy.png\" alt=\"Redux l√† g√¨ v√† t·∫°i sao ph·∫£i d√πng?\"></p>\n<h2 id=\"k·∫øt-n·ªëi-tr·ª±c-ti·∫øp-ƒë·∫øn-d·ªØ-li·ªáu-v·ªõi-redux\"><a href=\"#k%E1%BA%BFt-n%E1%BB%91i-tr%E1%BB%B1c-ti%E1%BA%BFp-%C4%91%E1%BA%BFn-d%E1%BB%AF-li%E1%BB%87u-v%E1%BB%9Bi-redux\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>K·∫øt n·ªëi tr·ª±c ti·∫øp ƒë·∫øn d·ªØ li·ªáu v·ªõi Redux</h2>\n<p>S·ª≠ d·ª•ng h√†m <code class=\"language-inline-text\">connect</code> trong Redux s·∫Ω cho ph√©p ch√∫ng ta k·∫øt n·ªëi b·∫•t k·ª≥ <em>component</em> n√†o ƒë·∫øn trung t√¢m c·ªßa m·ªçi d·ªØ li·ªáu, th√≠ch c√°i g√¨ th√¨ <em>map</em> n√≥ v√¥ component</p>\n<p><img src=\"https://daveceddia.com/images/redux-connected-twitter.png\" alt=\"Redux l√† g√¨ v√† t·∫°i sao ph·∫£i d√πng?\"></p>\n<p>B√™n c·∫°nh ƒë√≥ n√≥ c√≤n c√≥ m·ªôt s·ªë t√≠nh nƒÉng kh√°c ƒëi k√®m, nh∆∞ gi√∫p debug d·ªÖ h∆°n v·ªõi Redux DevTools cho ph√©p ki·ªÉm tra m·ªói khi state thay ƒë·ªïi, time-travel debug cho ph√©p roll back l·∫°i state tr∆∞·ªõc ƒë√≥</p>\n<p>C√°ch connect m·ªôt component v·ªõi Redux store</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> connect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-redux'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Avatar</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> user <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>user<span class=\"token punctuation\">.</span>avatar<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mapStateToProps</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">state</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">user</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>user\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> Avatar <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>mapStateToProps<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>Avatar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>B·∫£n th√¢n component <em>Avatar</em> kh√¥ng c√≥ g√¨ kh√°c bi·ªát v·ªõi component kh√°c, n√≥ s·∫Ω nh·∫≠n <code class=\"language-inline-text\">props</code> v√† <code class=\"language-inline-text\">render</code> ra nh∆∞ b√¨nh th∆∞·ªùng, h√†m <code class=\"language-inline-text\">connect</code> s·∫Ω l√†m chuy·ªán <em>map</em> c√°i state ·ªü trong Redux store v·ªÅ th√†nh <code class=\"language-inline-text\">props</code>.</p>\n<h2 id=\"khi-n√†o-s·ª≠-d·ª•ng-redux\"><a href=\"#khi-n%C3%A0o-s%E1%BB%AD-d%E1%BB%A5ng-redux\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Khi n√†o s·ª≠ d·ª•ng Redux</h2>\n<ul>\n<li>N·∫øu c√°c <em>component</em> ƒë∆∞·ª£c t·ªï ch·ª©c theo c√¢y nh∆∞ v√≠ d·ª• ·ªü tr√™n</li>\n<li>N·∫øu c·∫ßn l∆∞u d·ªØ li·ªáu t·∫°m th·ªùi gi·ªØa c√°c view, th√≠ d·ª• load d·ªØ li·ªáu ·ªü trang list xong v√¥ trang detail load d·ª± li·ªáu trang detail, r·ªìi khi quay l·∫°i trang list kh√¥ng c·∫ßn ph·∫£i load d·ªØ li·ªáu l·∫°i l·∫ßn n·ªØa.</li>\n<li>N·∫øu ·ª©ng d·ª•ng l·ªõn, qu·∫£n l√Ω d·ªØ li·ªáu nhi·ªÅu.</li>\n</ul>\n","cover_image":""}},{"node":{"id":"c919a56a3b126ea31da9b991ff155b3d","title":"Gi·ªõi thi·ªáu React Router v4 (react router dom)","path":"/2018-01-12-huong-dan-react-router-dom-gioi-thieu-react-router-4/","date":"2018-01-12","timeToRead":6,"desc":"Tr∆∞·ªõc ƒë√¢y c√≥ b√†i gi·ªõi thi·ªáu v·ªÅ React Router r·ªìi, nh∆∞ng gi·ªù React Router 4 ra, g·∫ßn nh∆∞ ƒë·∫≠p ƒëi l√†m l·∫°i ch·ª© ko k·∫ø th·ª´a nhi·ªÅu.","content":"<p>L√∫c ƒë·∫ßu Michael and Ryan (2 t√°c gi·∫£ c·ªßa React Router) v·ªën l√† ng∆∞·ªùi vi·∫øt Ember, ch∆∞a r√µ c√°ch v·∫≠n h√†nh l·∫Øm c·ªßa React, n√™n l√∫c anh vi·∫øt c√°i React Router th√¨ c≈©ng gi·ªëng nh∆∞ Ember, Express, Angular, gi·ªù khi 2 anh ƒë√£ n·∫Øm v·ªØng React, 2 anh quy·∫øt ƒë·ªãnh ƒë·∫≠p ƒëi l√†m l·∫°i React Router ƒë·ªÉ k·∫ø th·ª´a nh·ªØng √Ω t∆∞·ªüng c·ªßa React Component. V√† ta c√≥ React Router v4 ho√†n to√†n m·ªõi so v·ªõi b·∫£n c≈©</p>\n<p>Ch√¨a kh√≥a ƒë·ªÉ n·∫Øm r√µ React Router v4, g·ªçi react-router-dom ƒëi h√©, v√¨ package gi·ªù c≈©ng ƒë·ªïi t√™n react-router-dom, l√† <strong>qu√™n h·∫øt nh·ªØng g√¨ v·ªÅ React Router</strong> t·ª´ng bi·∫øt, <strong>React Router l√† m·ªôt component v·ªõi h√†m render ra m·ªôt component khi ƒë∆∞·ªùng d·∫´n th√µa ƒëi·ªÅu ki·ªán trong path.</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        React Router Course\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</code></pre></div>\n<p>Gi·ªù import <code class=\"language-inline-text\">BrowserRouter</code> r·ªìi ƒë·ªïi t√™n l·∫°i th√†nh <code class=\"language-inline-text\">Router</code>, c√°i n√†y ko b·∫Øt bu·ªôc m√† ƒëa ph·∫ßn ng∆∞·ªùi ta l√†m v·∫≠y quen r·ªìi.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  BrowserRouter <span class=\"token keyword\">as</span> Router<span class=\"token punctuation\">,</span>\n  Route<span class=\"token punctuation\">,</span>\n  Link<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span></code></pre></div>\n<p>Th·∫±ng <code class=\"language-inline-text\">BrowserRouter</code> n√†y s·∫Ω ƒë∆∞a t·∫•t c·∫£ th√¥ng tin <em>route</em> xu·ªëng cho t·∫•t c·∫£ c√°c component con th√¥ng quan <code class=\"language-inline-text\">context</code>. Gi·ªù b·ªçc nguy√™n c√°i app trong Router n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  BrowserRouter <span class=\"token keyword\">as</span> Router<span class=\"token punctuation\">,</span>\n  Route<span class=\"token punctuation\">,</span>\n  Link<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          React Router Course\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</code></pre></div>\n<p>Ti·∫øp theo, ta s·∫Ω s·ª≠ d·ª•ng component <code class=\"language-inline-text\">Route</code>, khi ƒë∆∞·ªùng d·∫´n tr√¨nh duy·ªát kh·ªõp v·ªõi props <code class=\"language-inline-text\">path</code> c·ªßa th·∫±ng <code class=\"language-inline-text\">Route</code> th√¨ n√≥ s·∫Ω render ra component kh√¥ng th√¨ tr·∫£ v·ªÅ null</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  BrowserRouter <span class=\"token keyword\">as</span> Router<span class=\"token punctuation\">,</span>\n  Route<span class=\"token punctuation\">,</span>\n  Link<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Home</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">About</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">About</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Topics</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Topics</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Home<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/about<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>About<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/topics<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Topics<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</code></pre></div>\n<p>C·ª© v·∫≠y, n·∫øu mu·ªën c√≥ th√™m routes th√¨ c·ª© add th√™m c√°c component <code class=\"language-inline-text\">Route</code> n√†y, khi user truy c·∫≠p <code class=\"language-inline-text\">/hello-viet-nam</code> th√¨ ch·ªâ component Home ƒë∆∞·ª£c render ra, 2 Route about v√† topics s·∫Ω tr·∫£ v·ªÅ null. ·ªû ƒë√¢y khi truy c·∫≠p /about hay /topics th√¨ component Home v·∫´n ƒë∆∞·ª£c render ra, n·∫øu ko mu·ªën render Home, th√™m v√†o n√≥ props l√† exact</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Home<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>Gi·ªù th√™m m·ªôt thanh navigation ƒë·ªÉ user c√≥ th·ªÉ click chuy·ªÉn qua l·∫°i gi·ªØa c√°c 'trang', Link trong react-router-dom th√¨ ko kh√°c phi√™n b·∫£n tr∆∞·ªõc</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/about<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">About</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/topics<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Topics</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Home<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/about<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>About<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>/topics<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Topics<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>B√¢y gi·ªù b√™n trong component <code class=\"language-inline-text\">Topics</code>, c·ª© v√¥ t∆∞ l·ªìng th√™m Route v√†o nh∆∞ l·ªìng <code class=\"language-inline-text\">div</code> trong <code class=\"language-inline-text\">div</code> th√¥i</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Topic</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">TOPIC</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Topics</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Topics</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/topics/rendering</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          Rendering with React\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/topics/components</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          Components\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/topics/props-v-state</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          Props v. State\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/topics/rendering</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Topic<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/topics/components</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Topic<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/topics/props-v-state</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Topic<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Khi user truy c·∫≠p v√†o /topics s·∫Ω c√≥ m·ªôt thanh navigation v√† m·ªôt component <code class=\"language-inline-text\">ƒë·ªông</code> t√πy thu·ªôc v√†o routes (~ ƒë∆∞·ªùng d·∫´n tr√™n tr√¨nh duy·ªát, g·ªçi routes cho sang).</p>\n<p>M√† hardcode c√°i path th·∫ø n√†y kh√¥ng hay, khi React Router render ra m·ªôt component n√≥ s·∫Ω truy·ªÅn v√†o 3 props cho component l√†: <code class=\"language-inline-text\">match</code>, <code class=\"language-inline-text\">location</code>, <code class=\"language-inline-text\">history</code>. Trong v√≠ d·ª• n√†y n·∫øu g·ªçi <code class=\"language-inline-text\">match.url</code> n√≥ s·∫Ω cho ta gi√° tr·ªã l√† <code class=\"language-inline-text\">/topics</code>. S·ª≠a l·∫°i component Topics m·ªôt c√°ch th√¥ng minh h∆°n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Topic</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">TOPIC</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Topics</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> match <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Topics</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token punctuation\">.</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/rendering</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          Rendering with React\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token punctuation\">.</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/components</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          Components\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token punctuation\">.</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/props-v-state</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          Props v. State\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token punctuation\">.</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/rendering</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Topic<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token punctuation\">.</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/components</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Topic<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token punctuation\">.</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/props-v-state</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Topic<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Ngo√†i url ra, th·∫±ng match c√≤n c√≥ c√°c params d∆∞·ªùng truy·ªÅn v√†o</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Topics</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> match <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    ...\n\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token punctuation\">.</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/:topicId</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Topic<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">//th·∫±ng con c√≥ th·∫ø l·∫•y gi√° tr·ªã params topicId n√†y</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Topic</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> match <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>match<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">.</span>topicId<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>V√≠ d·ª• mu·ªën c√≥ m·ªôt component hi·ªÉn th·ªã text l√† \"√ä ch·ªçn topic ƒëi\" khi n√≥ ƒëang ·ªü trang /topics, h√£y nh·ªõ Route c≈©ng l√† component render m·ªôt component kh√°c theo ƒëi·ªÅu ki·ªán th√¥i m√†</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>match<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Please select a topic.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>Full Code</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  BrowserRouter <span class=\"token keyword\">as</span> Router<span class=\"token punctuation\">,</span>\n  Route<span class=\"token punctuation\">,</span>\n  Link\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Home</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">About</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">About</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Topic</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> match <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>match<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">.</span>topicId<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Topics</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> match <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Topics</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token punctuation\">.</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/rendering</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          Rendering with React\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token punctuation\">.</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/components</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          Components\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token punctuation\">.</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/props-v-state</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          Props v. State\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>match<span class=\"token punctuation\">.</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/:topicId</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Topic<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>match<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">render</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Please select a topic.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/about<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">About</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/topics<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Topics</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>hr</span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">exact</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Home<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/about<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>About<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/topics<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Topics<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</code></pre></div>\n<p>Th√≠ch c√¢u n√†y: H·ªçc React s·∫Ω gi√∫p b·∫°n c·ª©ng javascript h∆°n, ch∆°i v·ªõi React Router 4 gi√∫p b·∫°n gi·ªèi React h∆°n</p>\n","cover_image":""}},{"node":{"id":"449eea9422d09591cde689cb274c2924","title":"React Children v√† React cloneElement","path":"/2017-10-27-react-children-react-clone-element/","date":"2017-10-27","timeToRead":2,"desc":"T√¨m hi·ªÉu c√°ch s·ª≠ d·ª•ng react Children v√† react cloneElement","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#reactchildrenforeach\"><code class=\"language-inline-text\">React.Children.forEach</code></a></li>\n<li><a href=\"#reactchildrencount\"><code class=\"language-inline-text\">React.Children.count</code></a></li>\n<li><a href=\"#reactchildrentoarraychildren\"><code class=\"language-inline-text\">React.Children.toArray(children)</code></a></li>\n<li><a href=\"#reactchildrenonly\"><code class=\"language-inline-text\">React.Children.only</code></a></li>\n</ul>\n<!-- /TOC -->\n<p>H√£y nghƒ© ngay t·ªõi c·∫∑p ƒë√¥i <code class=\"language-inline-text\">React.Children.map</code> v√† <code class=\"language-inline-text\">React.cloneElement</code> khi c·∫ßn truy·ªÅn <code class=\"language-inline-text\">props</code> t·ª´ component cha xu·ªëng c√°c component con m√† <strong>KH√îNG c·∫ßn g·ªçi render component b√™n trong component cha</strong></p>\n<p>H∆°i m√¢u thu·∫´n v√¨ kh√¥ng <code class=\"language-inline-text\">render</code> component con v·∫≠y sao n√≥ hi·ªÉn th·ªã, v√≠ d·ª• ƒëi</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ComponentChaChu</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n     </span><span class=\"token punctuation\">{</span>\n        React<span class=\"token punctuation\">.</span>Children<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>children<span class=\"token punctuation\">,</span> <span class=\"token parameter\">child</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n            React<span class=\"token punctuation\">.</span><span class=\"token function\">cloneElement</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token literal-property property\">style</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'green'</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'white'</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Luckyluu</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">,</span> posts<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ComponentChaChu</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">NavBar</span></span> <span class=\"token attr-name\">title</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ComponentChaChu</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>\n            posts<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">post</span> <span class=\"token operator\">=></span><span class=\"token punctuation\">(</span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Post</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>post<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ComponentChaChu</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PostHeader</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>post<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"> \n                    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ComponentChaChu</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n                    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PostBody</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>post<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n                </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Post</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>2 component con ·ªü ƒë√¢y l√† <code class=\"language-inline-text\">PostHeader</code> v√† <code class=\"language-inline-text\">NavBar</code> c√≥ th·ªÉ s·ª≠ d·ª•ng ·ªü b·∫•t k·ª≥ ƒë√¢u, c√≤n <code class=\"language-inline-text\">ComponentChaChu</code> c√≥ th·ªÉ c√≥ b·∫•t k·ª≥ ƒë·ª©a con n√†o, kh√¥ng c·∫ßn bi·∫øt sau n√†y con n√≥ l√† ai th√¨ n√≥ s·∫Ω truy·ªÅn h·∫øt t√†i s·∫£n l√† <code class=\"language-inline-text\">backgroundColor</code> v√† <code class=\"language-inline-text\">color</code> cho ƒë·ª©a con y√™u d·∫•u ƒë√≥</p>\n<p>S·∫µn ti·ªán th√¨ n√≥i lu√¥n m·ªôt s·ªë <em>function</em> kh√°c c·ªßa <code class=\"language-inline-text\">React.Children</code> lu√¥n</p>\n<h2 id=\"reactchildrenforeach\"><a href=\"#reactchildrenforeach\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">React.Children.forEach</code></h2>\n<p>Gi·ªëng nh∆∞ <code class=\"language-inline-text\">React.Children.map</code> nh∆∞ng kh√¥ng tr·∫£ v·ªÅ g√¨ h·∫øt</p>\n<h2 id=\"reactchildrencount\"><a href=\"#reactchildrencount\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">React.Children.count</code></h2>\n<p>Nh√† c√≥ nhi√™u ƒë·ª©a con ?</p>\n<h2 id=\"reactchildrentoarraychildren\"><a href=\"#reactchildrentoarraychildren\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">React.Children.toArray(children)</code></h2>\n<p>Convert component con v·ªÅ <code class=\"language-inline-text\">array</code></p>\n<h2 id=\"reactchildrenonly\"><a href=\"#reactchildrenonly\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">React.Children.only</code></h2>\n<p>ƒê·ªÉ √°p d·ª•ng ch∆∞∆°ng tr√¨nh k·∫ø ho·∫°ch h√≥a gia ƒë√¨nh, m·ªói component cha ch·ªâ c√≥ <strong>1</strong> v√† ph·∫£i c√≥ 1 con duy nh·∫•t, quƒÉng c√°i th√¥ng b√°o n·∫øu kh√¥ng ƒë√°p ·ª©ng y√™u c·∫ßu n√†y.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">BaBa</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>N·∫øu b·∫Øt bu·ªôc con th·∫±ng <code class=\"language-inline-text\">BaBa</code> ph·∫£i l√† <code class=\"language-inline-text\">function</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">BaBa<span class=\"token punctuation\">.</span>propTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>propTypes<span class=\"token punctuation\">.</span>func<span class=\"token punctuation\">.</span>isRequired\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>N√≥ log ra th√¥ng b√°o l·ªói khi truy·ªÅn v√†o con kh√¥ng ph·∫£i l√† <code class=\"language-inline-text\">function</code>, dev l∆∞·ªùi bi·∫øn c√≥ th·ªÉ 'cho qua' th√¥ng b√°o n√†y. Nh∆∞ng khi m√¨nh b·∫Øt bu·ªôc ki·ªÉu n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">BaBa</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> React<span class=\"token punctuation\">.</span>Children<span class=\"token punctuation\">.</span><span class=\"token function\">only</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">children</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>N·∫øu kh√¥ng c√≥ con l√† app ch·∫øt lu√¥n, cho c√°c anh dev kh√¥ng c√≤n l∆∞·ªùi bi·∫øng, gi·ªëng ki·ªÉu m·∫•y ng∆∞·ªùi x∆∞a ko c√≥ con l√† kh√¥ng c√≥ ƒë∆∞·ª£c v√¢y. ;)</p>\n","cover_image":""}},{"node":{"id":"bf4e1b9fbb5e25cb5df5a22e50560552","title":"Gi·∫£i th√≠ch React Component Lifecycle","path":"/2017-10-20-react-lifecycle-la-gi/","date":"2017-10-20","timeToRead":4,"desc":"T√¨m hi·ªÉu v√≤ng ƒë·ªùi c·ªßa m·ªôt Component React, khi n√†o v√† s·ª≠ d·ª•ng ra sao","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#render\">render()</a></li>\n<li><a href=\"#constructorprops\">constructor(props)</a></li>\n<li><a href=\"#componentdidmount\">componentDidMount()</a></li>\n<li><a href=\"#componentdidupdateprevprops-prevstate-snapshot\">componentDidUpdate(prevProps, prevState, snapshot)</a></li>\n<li><a href=\"#componentwillunmount\">componentWillUnmount</a></li>\n<li><a href=\"#shouldcomponentupdatenextprops-nextstate\">shouldComponentUpdate(nextProps, nextState)</a></li>\n<li><a href=\"#static-getderivedstatefrompropsprops-state\">static getDerivedStateFromProps(props, state)</a></li>\n<li><a href=\"#getsnapshotbeforeupdateprevprops-prevstate\">getSnapshotBeforeUpdate(prevProps, prevState)</a></li>\n<li><a href=\"#componentdidcatcherror-info\">componentDidCatch(error, info)</a></li>\n</ul>\n<!-- /TOC -->\n<p><img src=\"https://cdn-images-1.medium.com/max/1800/0*OoDfQ7pzAqg6yETH.\" alt=\"Gi·∫£i th√≠ch React Component Lifecycle\"></p>\n<p>ƒê·ªÉ th·ª±c s·ª± tr·ªü th√†nh m·ªôt master React, vi·ªác hi·ªÉu lifecycle c·ªßa component l√† b·∫Øt bu·ªôc.</p>\n<p>C√°c ph∆∞∆°ng th·ª©c c·ªßa lifecycle l√† m·ªôt d·∫°ng <code class=\"language-inline-text\">hook</code> (gi·ªëng nh∆∞ kh√°i ni·ªám <code class=\"language-inline-text\">hook</code> trong wordpress)</p>\n<p>C√≥ th·ªÉ group c√°c ph∆∞∆°ng th·ª©c lifecycle ra 3 nh√≥m, ·ª©ng v·ªõi 4 giai ƒëo·∫°n c·ªßa component: <strong>Mounting</strong>, <strong>Updating</strong>, <strong>Unmounting</strong>, <strong>Error Handling</strong></p>\n<p><strong>Mounting</strong></p>\n<p>N√≥ s·∫Ω theo th·ª© t·ª± sau</p>\n<ol>\n<li>constructor()</li>\n<li>static getDerivedStateFromProps()</li>\n<li>render()</li>\n<li>componentDidMount()</li>\n</ol>\n<p><strong>Updating</strong></p>\n<p>C√°c ph∆∞∆°ng th·ª©c n√†y s·∫Ω ƒë∆∞·ª£c g·ªçi khi c√≥ s·ª± thay ƒë·ªïi c·ªßa <code class=\"language-inline-text\">state</code> ho·∫∑c <code class=\"language-inline-text\">props</code></p>\n<ol>\n<li>static getDerivedStateFromProps()</li>\n<li>shouldComponentUpdate()</li>\n<li>render()</li>\n<li>getSnapshotBeforeUpdate()</li>\n<li>componentDidUpdate()</li>\n</ol>\n<p><strong>Unmounting</strong></p>\n<p>Ph∆∞∆°ng th·ª©c ƒë∆∞·ª£c g·ªçi tr∆∞·ªõc khi remove component kh·ªèi DOM</p>\n<ol>\n<li>componentWillUnmount()</li>\n</ol>\n<p><strong>Error Handling</strong></p>\n<p>B·∫•t k·ªÉ l·ªói ·ªü ƒë√¢u trong component, n√≥ s·∫Ω g·ªçi ƒë·∫øn ph∆∞∆°ng th·ª©c n√†y</p>\n<ol>\n<li>componentDidCatch()</li>\n</ol>\n<h1 id=\"render\"><a href=\"#render\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>render()</h1>\n<p>ƒê√¢y l√† ph∆∞∆°ng th·ª©c b·∫Øt bu·ªôc duy nh·∫•t khi t·∫°o ra m·ªôt component, b·∫Øt bu·ªôc tr·∫£ v·ªÅ m·ªôt trong nh·ªØng gi√° tr·ªã</p>\n<ul>\n<li>React element</li>\n<li>Arrays and fragments</li>\n<li>Portals</li>\n<li>String and numbers</li>\n<li>Booleans or null</li>\n</ul>\n<p><strong>H√†m n√†y s·∫Ω kh√¥ng ƒë∆∞·ª£c g·ªçi n·∫øu <code class=\"language-inline-text\">shouldComponentUpdate()</code> return false</strong></p>\n<h1 id=\"constructorprops\"><a href=\"#constructorprops\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>constructor(props)</h1>\n<p>Ph∆∞∆°ng th·ª©c kh·ªüi t·∫°o m·ªôt component, n·∫øu kh√¥ng kh·ªüi t·∫°o <code class=\"language-inline-text\">state</code>, bind c√°c ph∆∞∆°ng th·ª©c, th√¨ ko c·∫ßn khai b√°o ph∆∞∆°ng th·ª©c n√†y.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Clicker</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleClick</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token literal-property property\">clicks</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> \n      <span class=\"token literal-property property\">clicks</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>clicks <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>ƒê·ª´ng chuy·ªÉn props sang state! X·ª≠ l√Ω logic s·∫Ω h·∫øt s·ª©c r·∫Øc r·ªëi v·ªÅ sau</p>\n</blockquote>\n<p>ƒê·ª´ng l√†m th·∫ø n√†y nh√©</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token comment\">// DON'T DO THIS</span>\n <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> props<span class=\"token punctuation\">.</span>color <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"componentdidmount\"><a href=\"#componentdidmount\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>componentDidMount()</h1>\n<p>Component ƒë√£ hi·ªán h√¨nh, l√† l√∫c m√† ta g·ªçi AJAX</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://gitconnected.com'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">user</span><span class=\"token operator\">:</span> res<span class=\"token punctuation\">.</span>user\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>C√≥ th·ªÉ g·ªçi <code class=\"language-inline-text\">setState()</code> ·ªü d√≤ng ƒë·∫ßu ti√™n c·ªßa ph∆∞∆°ng th·ª©c <code class=\"language-inline-text\">componentDidMount()</code>, h√†m <code class=\"language-inline-text\">render()</code> s·∫Ω ƒë∆∞·ª£c g·ªçi l·∫°i m·ªôt l·∫ßn n·ªØa, nh∆∞ng n√≥ ch·ªâ x·∫£y ra tr∆∞·ªõc khi tr√¨nh duy·ªát update DOM, render ch·∫Øc ch·∫Øn s·∫Ω g·ªçi 2 l·∫ßn, user c√≥ th·ªÉ kh√¥ng nh·∫≠n ra s·ª± thay ƒë·ªïi n√†y, tuy nhi√™n ƒë√¢y l√† nguy√™n nh√¢n cho v·∫•n ƒë·ªÅ v·ªõi performance. Nh∆∞ng c·∫ßn thi·∫øt trong tr∆∞·ªùng h·ª£p nh∆∞ modal hay tooltip ch√∫ng ta c·∫ßn t√≠nh to√°n v·ªã tr√≠ c·ªßa DOM tr∆∞·ªõc khi render</p>\n<h1 id=\"componentdidupdateprevprops-prevstate-snapshot\"><a href=\"#componentdidupdateprevprops-prevstate-snapshot\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>componentDidUpdate(prevProps, prevState, snapshot)</h1>\n<p>Ngay sau khi component ƒë∆∞·ª£c c·∫≠p nh·∫≠p, hook n√†y s·∫Ω ƒë∆∞·ª£c g·ªçi. Kh√¥ng g·ªçi trong l·∫ßn render ƒë·∫ßu. ƒê√¢y c≈©ng c√≥ th·ªÉ l√† n∆°i ƒë·ªÉ t·∫°o m·ªôt network request khi ch√∫ng ta so s√°nh <code class=\"language-inline-text\">prop</code> hi·ªán t·∫°i v·ªõi <code class=\"language-inline-text\">prop</code> ·ªü th·ªùi ƒëi·ªÉm tr∆∞·ªõc ƒë√≥</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">componentDidUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevProps<span class=\"token punctuation\">,</span> prevState<span class=\"token punctuation\">,</span> snapshot</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Tr∆∞·ªùng h·ª£p th∆∞·ªùng d√πng (ƒë·ª´ng qu√™n ki·ªÉm tra so s√°nh props):</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>userID <span class=\"token operator\">!==</span> prevProps<span class=\"token punctuation\">.</span>userID<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>userID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>N·∫øu mu·ªën g·ªçi <code class=\"language-inline-text\">setState</code> ·ªü ƒë√¢y, ph·∫£i ƒë∆∞a n√≥ trong c√¢u ƒëi·ªÅu ki·ªán, n·∫øu kh√¥ng s·∫Ω b·ªã l·∫∑p v√¥ t·∫≠n</p>\n<p>N·∫øu c√≥ implement ph∆∞∆°ng th·ª©c <code class=\"language-inline-text\">getSnapshotBeforeUpdate()</code>, gi√° tr·ªã return c·ªßa <code class=\"language-inline-text\">getSnapshotBeforeUpdate()</code> s·∫Ω ƒë∆∞·ª£c ƒë∆∞a v√†o <code class=\"language-inline-text\">snapshot</code>, n·∫øu kh√¥ng th√¨ l√† <code class=\"language-inline-text\">undefined</code></p>\n<p>H√†m n√†y c≈©ng kh√¥ng ƒë∆∞·ª£c g·ªçi n·∫øu <code class=\"language-inline-text\">shouldComponentUpdate()</code> return false</p>\n<h1 id=\"componentwillunmount\"><a href=\"#componentwillunmount\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>componentWillUnmount</h1>\n<p>C√≥ th·ªÉ s·ª≠ d·ª•ng ƒë·ªÉ remove c√°c listener, c√°c h√†m setInterval, cancel network request</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resize'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>resizeEventHandler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"shouldcomponentupdatenextprops-nextstate\"><a href=\"#shouldcomponentupdatenextprops-nextstate\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>shouldComponentUpdate(nextProps, nextState)</h1>\n<p>C√≥ ph∆∞∆°ng th·ª©c n√†y ƒë·ªÉ c·∫£i thi·ªán performance c·ªßa React, v√¨ ƒë√¥i l√∫c thay ƒë·ªïi <code class=\"language-inline-text\">state</code> ho·∫∑c <code class=\"language-inline-text\">props</code> ta kh√¥ng mu·ªën c·∫≠p nh·∫≠p l·∫°i UI, ch·ªâ c·∫ßn cho h√†m n√†y return <code class=\"language-inline-text\">false</code> (m·∫∑c ƒë·ªãnh l√† return <code class=\"language-inline-text\">true</code>), khi return <code class=\"language-inline-text\">false</code> th√¨ <code class=\"language-inline-text\">render</code>, <code class=\"language-inline-text\">componentDidUpdate</code> s·∫Ω kh√¥ng ƒë∆∞·ª£c g·ªçi.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">shouldComponentUpdate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">nextProps<span class=\"token punctuation\">,</span> nextState</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>clicks <span class=\"token operator\">!==</span> nextProps<span class=\"token punctuation\">.</span>clicks<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"static-getderivedstatefrompropsprops-state\"><a href=\"#static-getderivedstatefrompropsprops-state\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>static getDerivedStateFromProps(props, state)</h1>\n<p>ƒê∆∞·ª£c g·ªçi tr∆∞·ªõc khi xu·ªëng <code class=\"language-inline-text\">render</code>, c√≥ th·ªÉ return m·ªôt object ƒë·ªÉ update state, ho·∫∑c <code class=\"language-inline-text\">null</code></p>\n<p>R·∫•t hi·∫øm khi s·ª≠ d·ª•ng, ch·ªâ khi gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">state</code> ph·ª• thu·ªôc v√†o <code class=\"language-inline-text\">prop</code></p>\n<p>N√™n h·∫°n ch·∫ø s·ª≠ d·ª•ng h√†m n√†y, v√¨ l√†m logic hi·ªÉn th·ªã c·ªßa component r·∫•t ∆∞ kh√≥ hi·ªÉu, h√£y nghƒ© ƒë·∫øn nh·ªØng c√°ch implement ƒë∆°n gi·∫£n h∆°n b·∫±ng nh·ªØng lifecycle kh√°c.</p>\n<h1 id=\"getsnapshotbeforeupdateprevprops-prevstate\"><a href=\"#getsnapshotbeforeupdateprevprops-prevstate\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>getSnapshotBeforeUpdate(prevProps, prevState)</h1>\n<p>G·ªçi ngay tr∆∞·ªõc khi render xu·ªëng DOM, cho ph√©p l·∫•y m·ªôt s·ªë th√¥ng tin c·ªßa DOM (v√≠ d·ª• v·ªã tr√≠ thanh scroll), c√°c gi√° tr·ªã return t·ª´ h√†m n√†y s·∫Ω ƒë∆∞a cho <code class=\"language-inline-text\">componentDidUpdate()</code></p>\n<h1 id=\"componentdidcatcherror-info\"><a href=\"#componentdidcatcherror-info\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>componentDidCatch(error, info)</h1>\n<p>N·∫øu m·ªôt component n√†o ƒë√≥ b·ªã l·ªói n√≥ s·∫Ω kh√¥ng ch·∫øt nguy√™n c√°i app n·ªØa m√† s·∫Ω quƒÉn l·ªói ·ªü ƒë√¢y, s·ª≠ d·ª•ng ƒë·ªÉ hi·ªÉn th·ªã l·ªói l√™n UI</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ErrorBoundary</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hasError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidCatch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> info</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Display fallback UI</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">hasError</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// You can also log the error to an error reporting service</span>\n    <span class=\"token function\">logErrorToMyService</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>hasError<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// You can render any custom fallback UI</span>\n      <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Something went wrong.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ErrorBoundary</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MyWidget</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ErrorBoundary</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><a href=\"https://reactjs.org/docs/react-component.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">T√†i li·ªáu ƒë·∫ßy ƒë·ªß ch√≠nh th·ª©c c·ªßa React Lifecycle</a></p>\n","cover_image":""}},{"node":{"id":"40cc46c7d4b3636c0af94b280aa14af6","title":"React Bind Pattern: 5 c√°ch ch·ªâ ƒë·ªãnh tham chi·∫øu this","path":"/2017-10-11-react-bind-pattern-5-cach-tham-chieu-this/","date":"2017-10-11","timeToRead":2,"desc":"ƒê·ªÉ thay ƒë·ªïi ng·ªØ c·∫£nh c·ªßa ch·ªØ this trong javascript, s·ª≠ d·ª•ng ·ªü ƒë√¢u v√† nh∆∞ th·∫ø n√†o cho h·ª£p l√Ω nh·∫•t","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-reactcreateclass\">S·ª≠ d·ª•ng <code class=\"language-inline-text\">React.createClass</code></a></li>\n<li><a href=\"#bind-trong-l%C3%BAc-render\">Bind trong l√∫c render</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-arrow-function\">S·ª≠ d·ª•ng Arrow function</a></li>\n<li><a href=\"#bind-trong-cunstructor\">Bind trong cunstructor</a></li>\n<li><a href=\"#s%E1%BB%AD--d%E1%BB%A5ng-arrow-function-trong-thu%E1%BB%99c-t%C3%ADnh-c%E1%BB%A7a-class\">S·ª≠  d·ª•ng <code class=\"language-inline-text\">Arrow Function</code> trong thu·ªôc t√≠nh c·ªßa class</a></li>\n</ul>\n<!-- /TOC -->\n<h1 id=\"s·ª≠-d·ª•ng-reactcreateclass\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-reactcreateclass\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng <code class=\"language-inline-text\">React.createClass</code></h1>\n<p>N·∫øu s·ª≠ d·ª•ng <code class=\"language-inline-text\">React.createClass</code> react t·ª± ƒë·ªông <strong>bind to√†n b·ªô</strong> t·ª´ kh√≥a <code class=\"language-inline-text\">this</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> Contacts <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Tuy nhi√™n t·ª´ khi ES6 c√≥ h·ªó tr·ª£ <code class=\"language-inline-text\">class</code>, React.createClass c√≥ th·ªÉ b·ªã t√°ch ra c√°c release trong t∆∞∆°ng lai.</p>\n<h1 id=\"bind-trong-l√∫c-render\"><a href=\"#bind-trong-l%C3%BAc-render\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Bind trong l√∫c render</h1>\n<p>N·∫øu khai b√°o m·ªôt component React b·∫±ng c√°ch <code class=\"language-inline-text\">extends React.Component</code>, <code class=\"language-inline-text\">this</code> s·∫Ω kh√¥ng ƒë∆∞·ª£c t·ª± ƒë·ªông bind nh∆∞ ƒë√£ n√≥i ·ªü tr√™n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Contacts</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>C√°ch n√†y tuy l√† s·∫°ch s·∫Ω g·ªçn r√†ng d·ªÖ hi·ªÉu, tuy nhi√™n l·∫°i ·∫£nh h∆∞·ªüng nhi·ªÅu t·ªõi performance v√¨ m·ªói function s·∫Ω <em>reallocated</em> l√∫c render. <strong>Kinh nghi·ªám kh√¥ng bind b·∫±ng c√°ch n√†y</strong></p>\n<h1 id=\"s·ª≠-d·ª•ng-arrow-function\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-arrow-function\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng Arrow function</h1>\n<p>T∆∞∆°ng t·ª± nh∆∞ c√°ch tr√™n, s·ª≠ d·ª•ng <strong>arrow function</strong> ƒë·ªÉ kh√¥ng thay ƒë·ªïi gi√° tr·ªã c·ªßa <code class=\"language-inline-text\">this</code> l√∫c render</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Contacts</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>C√°ch n√†y c≈©ng kh√¥ng n√™n l√†m v√¨ ·∫£nh h∆∞∆°ng t·ªõi performance lu√¥n</p>\n<h1 id=\"bind-trong-cunstructor\"><a href=\"#bind-trong-cunstructor\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Bind trong cunstructor</h1>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê√¢y l√† c√°ch ƒë∆∞·ª£c khuy·∫øn c√°o s·ª≠ d·ª•ng, n·∫øu th·∫≠t s·ª± quan t√¢m t·ªõi performance th√¨ n√™n s·ª≠ d·ª•ng c√°ch n√†y khi mu·ªën bind t·ª´ kh√≥a <code class=\"language-inline-text\">this</code>.</p>\n<h1 id=\"s·ª≠--d·ª•ng-arrow-function-trong-thu·ªôc-t√≠nh-c·ªßa-class\"><a href=\"#s%E1%BB%AD--d%E1%BB%A5ng-arrow-function-trong-thu%E1%BB%99c-t%C3%ADnh-c%E1%BB%A7a-class\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠  d·ª•ng <code class=\"language-inline-text\">Arrow Function</code> trong thu·ªôc t√≠nh c·ªßa class</h1>\n<p>Mu·ªën s·ª≠ d·ª•ng c√°ch n√†y, ph·∫£i b·∫≠t t√≠nh nƒÉng <em>transform-class-properties</em> trong Babel, xem th√™m package n√†y t·∫°i <a href=\"http://babeljs.io/docs/plugins/transform-class-properties\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://babeljs.io/docs/plugins/transform-class-properties</a></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function-variable function\">handleChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// call this function from render </span>\n  <span class=\"token comment\">// and this.whatever in here works fine.</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ƒê√¢y c≈©ng l√† c√°ch m√† m√¨nh th∆∞·ªùng s·ª≠ d·ª•ng nh·∫•t v√¨ v·ª´a s·∫°ch v·ª´a t·ªët cho performance</p>\n","cover_image":""}},{"node":{"id":"8905cbcbcbfca00a569175a000425311","title":"7 kh√°i ni·ªám JavaScript c·∫ßn bi·∫øt","path":"/2017-09-25-10-khai-niem-javascript-can-biet/","date":"2017-09-25","timeToRead":4,"desc":"M·ªôt v√†i kh√°i ni·ªám cƒÉn b·∫£n trong javascript c·∫ßn n·∫Øm n·∫øu b·∫°n l√† frontend developer","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#gi%C3%A1-tr%E1%BB%8B-vs-tham-chi%E1%BA%BFu\">Gi√° tr·ªã vs. Tham chi·∫øu</a></li>\n<li><a href=\"#so-s%C3%A1nh--v%C3%A0-\">So s√°nh <code class=\"language-inline-text\">==</code> v√† <code class=\"language-inline-text\">===</code></a></li>\n<li>\n<p><a href=\"#scope\">Scope</a></p>\n<ul>\n<li><a href=\"#global-scope\">Global Scope</a></li>\n<li><a href=\"#local-scope\">Local scope</a></li>\n</ul>\n</li>\n<li><a href=\"#block-scope\">Block scope</a></li>\n<li><a href=\"#hoisting\">Hoisting</a></li>\n<li><a href=\"#closure\">Closure</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"gi√°-tr·ªã--tham-chi·∫øu\"><a href=\"#gi%C3%A1-tr%E1%BB%8B--tham-chi%E1%BA%BFu\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Gi√° tr·ªã # Tham chi·∫øu</h2>\n<p>5 ki·ªÉu d·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u tr·ªØ ·ªü d·∫°ng <strong>gi√° tr·ªã</strong> - <strong>primitive type</strong>:</p>\n<ul>\n<li><strong>Boolean</strong></li>\n<li><strong>null</strong></li>\n<li><strong>undefined</strong></li>\n<li><strong>String</strong></li>\n<li><strong>Number</strong></li>\n</ul>\n<p>Khi <em>copy</em> gi√° tr·ªã c·ªßa bi·∫øn n√†y cho bi·∫øn kh√°c, 2 gi√° tr·ªã n√†y ho√†n to√†n ƒë·ªôc l·∫≠p kh√¥ng c√≥ li√™n h·ªá g√¨ v·ªõi nhau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> x<span class=\"token punctuation\">;</span>\n\na <span class=\"token operator\">=</span> a <span class=\"token operator\">+</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></code></pre></div>\n<p>3 ki·ªÉu d·ªØ li·ªáu ƒë∆∞·ª£c l∆∞u tr·ªØ ·ªü d·∫°ng <strong>tham chi·∫øu</strong> - <strong>Object type</strong>:</p>\n<ul>\n<li><strong>Array</strong></li>\n<li><strong>Function</strong></li>\n<li><strong>Object</strong></li>\n</ul>\n<p>N√≥ kh√¥ng mang gi√° tr·ªã m√† ch·ªâ <strong>tham chi·∫øu</strong> ƒë·∫øn <strong>v√πng l∆∞u tr·ªØ</strong> c·ªßa ƒë·ªëi t∆∞·ª£ng ƒë√≥ trong b·ªô nh·ªõ.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\narr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> refArr <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">;</span>\n\nrefArr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">,</span> refArrr<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"so-s√°nh--v√†-\"><a href=\"#so-s%C3%A1nh--v%C3%A0-\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>So s√°nh <code class=\"language-inline-text\">==</code> v√† <code class=\"language-inline-text\">===</code></h2>\n<p>Khi th·ª±c hi·ªán so s√°nh <code class=\"language-inline-text\">=</code> tr√™n bi·∫øn ki·ªÉu tham chi·∫øu, tr·∫£ v·ªÅ <code class=\"language-inline-text\">true</code> khi c·∫£ 2 bi·∫øn s·ªë <strong>c√πng tr·ªè v·ªÅ m·ªôt d√πng nh·ªõ</strong> ch·ª© kh√¥ng ph·∫£i so s√°nh gi√° tr·ªã c·ªßa 2 bi·∫øn.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> arrRef <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Hi!'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> arrRef2 <span class=\"token operator\">=</span> arrRef<span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arrRef <span class=\"token operator\">===</span> arrRef2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// -> true</span>\n\n<span class=\"token keyword\">var</span> arr1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Hi!'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> arr2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Hi!'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>arr1 <span class=\"token operator\">===</span> arr2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// -> false</span></code></pre></div>\n<h2 id=\"scope---khu-v·ª±c-ho·∫°t-ƒë·ªông-ph·∫°m-vi-l√£nh-th·ªï\"><a href=\"#scope---khu-v%E1%BB%B1c-ho%E1%BA%A1t-%C4%91%E1%BB%99ng-ph%E1%BA%A1m-vi-l%C3%A3nh-th%E1%BB%95\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Scope - khu v·ª±c ho·∫°t ƒë·ªông, ph·∫°m vi l√£nh th·ªï</h2>\n<h3 id=\"global-scope---c√¥ng-d√¢n-to√†n-c·∫ßu\"><a href=\"#global-scope---c%C3%B4ng-d%C3%A2n-to%C3%A0n-c%E1%BA%A7u\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Global Scope - c√¥ng d√¢n to√†n c·∫ßu</h3>\n<p>N·∫øu l√† m·ªôt bi·∫øn c√≥ ph·∫°m <strong>l√£nh th·ªï</strong> l√† <strong>global scope</strong>, ƒëi·ªÅu ƒë√≥ c√≥ nghƒ©a anh ·∫•y l√† c√¥ng d√¢n to√†n c·∫ßu, h√†ng ng√¥i sao qu·ªëc t·∫ø, ai c≈©ng bi·∫øt anh ·∫•y l√† ai.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"luckyluu\"</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// luckyluu</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">logName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">logName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// luckyluu</span></code></pre></div>\n<h3 id=\"local-scope\"><a href=\"#local-scope\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Local scope</h3>\n<p>N·∫øu anh b·∫°n t√™n \"bi·∫øn\" c·ªßa ch√∫ng ta ch·ªâ l√† v√¥ danh ti·ªÉu t·ªët, local scope, th√¨ anh ·∫•y ch·ªâ ƒë∆∞·ª£c bi·∫øt ƒë·∫øn b·ªüi <em>d√¢n ƒë·ªãa ph∆∞∆°ng</em>, n∆°i anh ·∫•y ƒëƒÉng k√Ω h·ªô kh·∫©u th∆∞·ªùng tr√∫.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Global Scope</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">someFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Local Scope #1</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">someOtherFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Local Scope #2</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Global Scope</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">anotherFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Local Scope #3</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// Global Scope</span></code></pre></div>\n<h3 id=\"block-scope\"><a href=\"#block-scope\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Block scope</h3>\n<p>Nh·ªØng c√¢u khai b√°o nh∆∞ <code class=\"language-inline-text\">if</code>, <code class=\"language-inline-text\">switch</code>, <code class=\"language-inline-text\">for</code>, <code class=\"language-inline-text\">while</code> kh√¥ng gi·ªëng nh∆∞ <code class=\"language-inline-text\">function</code> b√¨nh th∆∞·ªùng, anh b·∫°n <em>bi·∫øn</em> l√∫c n√†y con ƒë∆∞·ª£c bi·∫øt ƒë·∫øn ·ªü <em>to√†n t·ªânh</em> do nh√† anh ·∫•y n·∫±m thu·ªôc di·ªán cocc</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// c√¢u l·ªánh ƒëi·ªÅu ki·ªán 'if' kh√¥ng t·∫°o ra m·ªôt scope m·ªõi</span>\n    <span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Con √¥ng If'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// name v·∫´n l√† global scope</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// logs 'Con √¥ng If'</span></code></pre></div>\n<p>Trong ES6, ƒë·ªÉ tr√°nh s·ª± nh·∫≠p nh·∫±n n√†y, khai b√°o bi·∫øn b·∫±ng <code class=\"language-inline-text\">let</code>,<code class=\"language-inline-text\">const</code> ch·ªõ c√≥ d·∫°i d√πng <code class=\"language-inline-text\">var</code> ƒë·ªÉ khai b√°o.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// name = global scope</span>\n    <span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'Con √¥ng If'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// likes = local scope</span>\n    <span class=\"token keyword\">let</span> likes <span class=\"token operator\">=</span> <span class=\"token string\">'luckyluu'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// skills = local scope</span>\n    <span class=\"token keyword\">const</span> skills <span class=\"token operator\">=</span> <span class=\"token string\">'JavaScript and PHP'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'Con √¥ng If'</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>likes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Uncaught ReferenceError: likes is not defined</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>skills<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Uncaught ReferenceError: skills is not defined</span></code></pre></div>\n<h2 id=\"hoisting\"><a href=\"#hoisting\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Hoisting</h2>\n<p>M·ªôt ƒë·∫∑c ƒëi·ªÉm c·ªßa Javascript, bi·∫øn c√≥ th·ªÉ ƒë∆∞·ª£c <strong>s·ª≠ d·ª•ng tr∆∞·ªõc, khai b√°o sau</strong>! Vi·∫øt nh∆∞ sau l√† ho√†n to√†n h·ª£p l·ªá trong javascript</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// g√°n gi√° tr·ªã 5 cho bi·∫øn x ch∆∞a ƒë∆∞·ª£c khai b√°o</span>\nx <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// khai b√°o bi·∫øn x</span>\n<span class=\"token keyword\">var</span> x<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Do ƒë√≥ <strong>lu√¥n nh∆∞ khai b√°o bi·∫øn tr∆∞·ªõc khi s·ª≠ d·ª•ng</strong> l√†  nguy√™n t·∫Øc g·ªëi ƒë·∫ßu c·ªßa m·ªçi frontend developer, n·∫øu kh√¥ng c√≥ th·ªÉ x·∫£y ra tr∆∞·ªùng h·ª£p sau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">‚Äã<span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"Michael Jackson\"</span><span class=\"token punctuation\">;</span>\n‚Äã\n‚Äã<span class=\"token keyword\">function</span> <span class=\"token function\">showCelebrityName</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n‚Äã\n‚Äã<span class=\"token keyword\">function</span> <span class=\"token function\">showOrdinaryPersonName</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    name <span class=\"token operator\">=</span> <span class=\"token string\">\"Johnny Evers\"</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">showCelebrityName</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Michael Jackson‚Äã‚Äã</span>\n‚Äã\n<span class=\"token function\">showOrdinaryPersonName</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Johnny Evers‚Äã</span>\n‚Äã\n<span class=\"token comment\">// bi·∫øn to√†n c·ª•c name gi·ªù ƒë√¢y s·∫Ω b·ªã change gi√° tr·ªã th√†nh Johnny Evers ‚Äã</span>\n<span class=\"token function\">showCelebrityName</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Johnny Evers‚Äã</span>\n‚Äã\n‚Äã<span class=\"token comment\">// lu√¥n nh·ªõ khai b√°o bi·∫øn b·∫±ng var,let,const</span>\n‚Äã<span class=\"token keyword\">function</span> <span class=\"token function\">showOrdinaryPersonName</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"Johnny Evers\"</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Th·∫≠m ch√≠ khi khai b√°o bi·∫øn k√®m gi√° tr·ªã cho n√≥ m√† kh√¥ng d√πng t·ª´ kh√≥a <code class=\"language-inline-text\">var</code>, bi·∫øn ƒë√≥ s·∫Ω tr·ªü th√†nh bi·∫øn to√†n c·ª•c</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">showAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    age <span class=\"token operator\">=</span> <span class=\"token number\">90</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// n·ª±c c∆∞·ªùi ch∆∞a</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">showAge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 90</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>age<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 90</span></code></pre></div>\n<h2 id=\"closure\"><a href=\"#closure\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Closure</h2>\n<p>Closure √°m ch·ªâ m·ªôt c∆° ch·∫ø ho·∫°t ƒë·ªông, m·ªôt function b√™n trong m·ªôt function kh√°c l·∫°i <strong>truy c·∫≠p ƒë∆∞·ª£c</strong> c√°c bi·∫øn c·ªßa function ngo√†i, nghƒ©a l√† n√≥ vi ph·∫°m nguy√™n l√Ω bi·∫øn kh√¥ng c√πng <strong>scope</strong> th√¨ KO ƒë∆∞·ª£c d√≤ x√©t l·∫´n nhau, chuy·ªán n√†y l·∫°i <strong>l√†m ƒë∆∞·ª£c</strong> n·∫øu 2 function n√≥ l√† cha con v·ªõi nhau.</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">showName</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">firstName<span class=\"token punctuation\">,</span> lastName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ‚Äã<span class=\"token keyword\">var</span> nameIntro <span class=\"token operator\">=</span> <span class=\"token string\">\"Your name is \"</span><span class=\"token punctuation\">;</span>\n    ‚Äã<span class=\"token keyword\">function</span> <span class=\"token function\">makeFullName</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        ‚Äã<span class=\"token keyword\">return</span> nameIntro <span class=\"token operator\">+</span> firstName <span class=\"token operator\">+</span> <span class=\"token string\">\" \"</span> <span class=\"token operator\">+</span> lastName<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    ‚Äã\n    ‚Äã<span class=\"token keyword\">return</span> <span class=\"token function\">makeFullName</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n‚Äã\n<span class=\"token function\">showName</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"Michael\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Jackson\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Your name is Michael Jackson</span></code></pre></div>\n<p>Nh∆∞ v·∫≠y ch∆∞a ƒë·ªß qu√° ƒë√°ng, n√≥ c√≤n c√≥ th·ªÉ truy c·∫≠p <strong>ngay c·∫£ khi function ngo√†i (cha) ƒë√£ return</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">celebrityName</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">firstName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> nameIntro <span class=\"token operator\">=</span> <span class=\"token string\">\"This celebrity is \"</span><span class=\"token punctuation\">;</span>\n  ‚Äã\n  <span class=\"token keyword\">function</span> <span class=\"token function\">lastName</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theLastName</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> nameIntro <span class=\"token operator\">+</span> firstName <span class=\"token operator\">+</span> <span class=\"token string\">\" \"</span> <span class=\"token operator\">+</span> theLastName<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> lastName<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n‚Äã\n‚Äã<span class=\"token keyword\">var</span> mjName <span class=\"token operator\">=</span> <span class=\"token function\">celebrityName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Michael\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n‚Äã\n<span class=\"token keyword\">var</span> result <span class=\"token operator\">=</span> <span class=\"token function\">mjName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Jackson\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// This celebrity is Michael Jackson</span></code></pre></div>\n<p>T·∫≠n d·ª•ng ƒë·∫∑c ƒëi·ªÉm n√†y c·ªßa closure function, t·∫°m g·ªçi l√† cha truy·ªÅn con n·ªëi, l∆∞u tham chi·∫øu ƒë·∫øn bi·∫øn c·ªßa function ngo√†i m√† kh√¥ng l∆∞u gi√° tr·ªã, ta c√≥ th·ªÉ vi·∫øt m·ªôt function nh∆∞ class th·∫ø n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">celebrityID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> celebrityID <span class=\"token operator\">=</span> <span class=\"token number\">999</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">{</span>\n        <span class=\"token function-variable function\">getID</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> celebrityID<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">setID</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theNewID</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            celebrityID <span class=\"token operator\">=</span> theNewID<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> myID <span class=\"token operator\">=</span> <span class=\"token function\">celebrityID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyID<span class=\"token punctuation\">.</span><span class=\"token function\">getID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// return 999</span>\nmyID<span class=\"token punctuation\">.</span><span class=\"token function\">setID</span><span class=\"token punctuation\">(</span><span class=\"token number\">567</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyID<span class=\"token punctuation\">.</span><span class=\"token function\">getID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// return 567</span></code></pre></div>\n<p>ƒê·ªçc th√™m chi ti·∫øt v·ªÅ b√†i vi·∫øt clusure c·ªßa m√¨nh tr√™n <a href=\"https://developer.mozilla.org/vi/docs/Web/JavaScript/Closures\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">mozilla.org</a></p>\n","cover_image":""}},{"node":{"id":"0be257d7b6339261c05ba76120350279","title":"Gi·ªõi thi·ªáu React Router","path":"/2017-07-31-react-router/","date":"2017-07-31","timeToRead":4,"desc":"React kh√¥ng ph·∫£i m·ªôt framework, n√≥ ch·ªâ l√† m·ªôt th∆∞ vi·ªán javascript, b·ªüi v√¨ v·∫≠y n√≥ kh√¥ng th·ªÉ gi·∫£i quy·∫øt t·∫•t c·∫£ c√°c y√™u c·∫ßu m·ªôt ·ª©ng d·ª•ng. Vi·ªác m√† React l√†m r·∫•t t·ªët l√† t·∫°o component v√† c√°ch th·ª©c qu·∫£n l√Ω state c·ªßa component, nh∆∞ng ƒë·ªÉ t·∫°o m·ªôt Single Page App (s·∫Ω vi·∫øt t·∫Øt l√† SPA) ph·ª©c t·∫°p, n√≥ c·∫ßn nh·ªØng th∆∞ vi·ªán kh√°c n·ªØa, ƒë·∫ßu ti√™n c·∫ßn nh·∫Øc ƒë·∫øn l√† React Router","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#gi%E1%BB%9Bi-thi%E1%BB%87u-v%E1%BB%81-react-router\">Gi·ªõi thi·ªáu v·ªÅ React Router</a></li>\n<li><a href=\"#nhi%E1%BB%81u-route\">Nhi·ªÅu Route</a></li>\n<li><a href=\"#t%C3%A1i-s%E1%BB%AD-d%E1%BB%A5ng-component-v%E1%BB%9Bi-nested-route\">T√°i s·ª≠ d·ª•ng component v·ªõi Nested Route</a></li>\n<li><a href=\"#indexroute\">IndexRoute</a></li>\n<li><a href=\"#m%E1%BB%99t-s%E1%BB%91-c%C3%A1ch-khai-b%C3%A1o-v%E1%BB%9Bi-route\">M·ªôt s·ªë c√°ch khai b√°o v·ªõi Route</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-link-component-%C4%91%E1%BB%ABng-s%E1%BB%AD-d%E1%BB%A5ng-tag-a\">S·ª≠ d·ª•ng Link component, ƒë·ª´ng s·ª≠ d·ª•ng tag a</a></li>\n<li><a href=\"#browser-history\">Browser History</a></li>\n<li><a href=\"#route-v%E1%BB%9Bi-parameter-string\">Route v·ªõi parameter string</a></li>\n</ul>\n<!-- /TOC -->\n<h1 id=\"gi·ªõi-thi·ªáu-v·ªÅ-react-router\"><a href=\"#gi%E1%BB%9Bi-thi%E1%BB%87u-v%E1%BB%81-react-router\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Gi·ªõi thi·ªáu v·ªÅ React Router</h1>\n<p>C√°ch ti·∫øp c·∫≠n c·ªßa React Router kh√¥ng kh√°c m·∫•y so v·ªõi c√°c th∆∞ vi·ªán Router tr∆∞·ªõc ƒë√¢y</p>\n<p>V√≠ d·ª• v·ªõi 1 component <code class=\"language-inline-text\">Home</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Home</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Welcome Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Home</span></span><span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>S·ª≠ d·ª•ng v·ªõi React-Router</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Home<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"> \n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>C√¢u khai b√°o tr√™n c√≥ th·ªÉ di·ªÖn gi·∫£i l√† v·ªõi route \"/\" (t∆∞∆°ng ƒë∆∞∆°ng v·ªõi trang ch·ªß), th√¨ g·ªçi <code class=\"language-inline-text\">render</code> component <code class=\"language-inline-text\">Home</code></p>\n<p>2 component <code class=\"language-inline-text\">&lt;Router></code> v√† <code class=\"language-inline-text\">&lt;Route></code> l√† nh·ªØng component React kh√¥ng render trong DOM, n·∫øu <code class=\"language-inline-text\">path</code> kh·ªõp v·ªõi uri, n√≥ render ra component ch√∫ng ta truy·ªÅn v√†o cho n√≥ (qua props component), ch√∫ng ta s·∫Ω g·∫∑p l·∫°i kh√°i ni·ªám n√†y th∆∞·ªùng xuy√™n: <strong>M·ªôt component b·∫£n th√¢n kh√¥ng render trong DOM, m√† render m·ªôt component kh√°c</strong></p>\n<h1 id=\"nhi·ªÅu-route\"><a href=\"#nhi%E1%BB%81u-route\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nhi·ªÅu Route</h1>\n<p>X√©t v√≠ d·ª•</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Home<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/tags<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>TagsPage<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/post/:id<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Post<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>V·ªõi URL yourpage.com/ -> render component <code class=\"language-inline-text\">Home</code></li>\n<li>V·ªõi URL yourpage.com/tags -> render component <code class=\"language-inline-text\">TagsPage</code></li>\n<li>V·ªõi URL yourpage.com/post/12 -> render component <code class=\"language-inline-text\">Post</code></li>\n</ul>\n<h1 id=\"t√°i-s·ª≠-d·ª•ng-component-v·ªõi-nested-route\"><a href=\"#t%C3%A1i-s%E1%BB%AD-d%E1%BB%A5ng-component-v%E1%BB%9Bi-nested-route\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T√°i s·ª≠ d·ª•ng component v·ªõi Nested Route</h1>\n<p>Khai b√°o nested Route</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>MainLayout<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>SearchLayout<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>users<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>UserList<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> \n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Khi user truy c·∫≠p ƒë∆∞·ªùng d·∫´n <em>/users</em>, React Router s·∫Ω render component <code class=\"language-inline-text\">&lt;UserList /></code> b√™n trong component <code class=\"language-inline-text\">&lt;SearchLayout/></code>, c·∫£ 2 component n√†y l·∫°i ƒë·∫∑t trong component <code class=\"language-inline-text\">&lt;MainLayout/></code></p>\n<p>N·∫øu mu·ªën trang ch·ªß c≈©ng render <code class=\"language-inline-text\">&lt;MainLayout/></code> c√πng v·ªõi component <code class=\"language-inline-text\">&lt;Home/></code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>MainLayout<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Home<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>SearchLayout<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>users<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>UserList<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>widgets<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>WidgetList<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> \n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1 id=\"indexroute\"><a href=\"#indexroute\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>IndexRoute</h1>\n<p>Thay v√¨ vi·∫øt nh∆∞ tr√™n, c√≥ th·ªÉ s·ª≠ d·ª•ng component <code class=\"language-inline-text\">IndexRoute</code> c≈©ng cho c≈©ng k·∫øt qu·∫£</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>MainLayout<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">IndexRoute</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>Home<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>SearchLayout<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>users<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>UserList<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>widgets<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>WidgetList<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> \n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1 id=\"m·ªôt-s·ªë-c√°ch-khai-b√°o-v·ªõi-route\"><a href=\"#m%E1%BB%99t-s%E1%BB%91-c%C3%A1ch-khai-b%C3%A1o-v%E1%BB%9Bi-route\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>M·ªôt s·ªë c√°ch khai b√°o v·ªõi Route</h1>\n<p>N·∫øu c√≥ m·ªôt khai b√°o cho trang <em>User</em> nh∆∞ b√™n d∆∞·ªõi</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user/settings<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>UserSettings<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user/inventory<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>UserInventory<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user/orders<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>UserOrders<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>Vi·∫øt l·∫°i cho g·ªçn</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>settings<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>UserSettings<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>inventory<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>UserInventory<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>orders<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>UserOrders<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>C·∫ßn b·ªï sung th√™m component cho trang <code class=\"language-inline-text\">/user</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>user<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">IndexRoute</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>UserProfile<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>settings<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>UserSettings<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>inventory<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>UserInventory<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>orders<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>UserOrders<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h1 id=\"s·ª≠-d·ª•ng-link-component-ƒë·ª´ng-s·ª≠-d·ª•ng-tag-a\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-link-component-%C4%91%E1%BB%ABng-s%E1%BB%AD-d%E1%BB%A5ng-tag-a\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng Link component, ƒë·ª´ng s·ª≠ d·ª•ng tag a</h1>\n<p>Khi ƒë√£ ƒë·ªãnh nghƒ©a v·ªõi Route, n·∫øu mu·ªën d·∫´n ƒë·∫øn m·ªôt route n√†o ƒë√≥, s·ª≠ d·ª•ng component <code class=\"language-inline-text\">&lt;Link to=\"\" /></code> thay cho tag <code class=\"language-inline-text\">&lt;a/></code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>primary-header<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>aside</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>primary-aside<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Home</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/user<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Users</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/user/settings<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Settings</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>aside</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>V·ªõi <code class=\"language-inline-text\">&lt;Link></code> n√≥ bi·∫øt khi n√†o ƒëang active</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/users<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">activeClassName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>active<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Users</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h1 id=\"browser-history\"><a href=\"#browser-history\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Browser History</h1>\n<p><code class=\"language-inline-text\">&lt;Router></code> mu·ªën ho·∫°t ƒë·ªông ƒë∆∞·ª£c, ph·∫£i khai b√°o v·ªõi <code class=\"language-inline-text\">ReactRouter.browserHistory</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">var</span> browserHistory <span class=\"token operator\">=</span> ReactRouter<span class=\"token punctuation\">.</span>browserHistory<span class=\"token punctuation\">;</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Router</span></span> <span class=\"token attr-name\">history</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>browserHistory<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Router</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Nh·ªØng version tr∆∞·ªõc ƒë√¢y c·ªßa React Router, attribute <code class=\"language-inline-text\">history</code> c√≥ gi√° tr·ªã m·∫∑c ƒë·ªãnh l√† hashHistory gi·ªëng nh∆∞ router c·ªßa Backbone.js, c√°c version sau n√†y, attribute history s·∫Ω kh√¥ng c√≥ gi√° tr·ªã m·∫∑c ƒë·ªãnh v√† b·∫Øt bu·ªôc ph·∫£i khai b√°o khi s·ª≠ d·ª•ng</p>\n<p>N·∫øu mu·ªën redirect user ƒë·∫øn m·ªôt route n√†o ƒë√≥</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">browserHistory<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/some/path'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h1 id=\"route-v·ªõi-parameter-string\"><a href=\"#route-v%E1%BB%9Bi-parameter-string\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Route v·ªõi parameter string</h1>\n<div class=\"gridsome-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Route</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>users/:userId<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">component</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>{UserProfile}</span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>Component UserProfile s·∫Ω ƒë∆∞·ª£c render trong c√°c tr∆∞·ªùng h·ª£p: <code class=\"language-inline-text\">users/1</code>, <code class=\"language-inline-text\">users/145</code>, <code class=\"language-inline-text\">users/abc</code>, React Router s·∫Ω truy·ªÅn v√†o gi√° tr·ªã <code class=\"language-inline-text\">userId</code> v√†o UserProfile nh∆∞ m·ªôt props, access ƒë·∫øn gi√° tr·ªã n√†y b·∫±ng <code class=\"language-inline-text\">this.props.params.userId</code></p>\n","cover_image":""}},{"node":{"id":"800cb5408a7f326ad56eeb5a2dc01e29","title":"Interview React Developer th√¨ h·ªèi g√¨?","path":"/2017-07-17-interview-react-developer-thi-hoi-gi/","date":"2017-07-17","timeToRead":4,"desc":"M·ªôt v√†i c√¢u h·ªèi ƒë·ªÉ ki·ªÉm tra m·ª©c ƒë·ªô am hi·ªÉu react c·ªßa m·ªôt l·∫≠p tr√¨nh vi√™n frontend","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#chuy%E1%BB%87n-g%C3%AC-x%E1%BA%A3y-ra-khi-g%E1%BB%8Di-setstate-\">Chuy·ªán g√¨ x·∫£y ra khi g·ªçi <code class=\"language-inline-text\">setState</code> ?</a></li>\n<li><a href=\"#s%E1%BB%B1-kh%C3%A1c-nhau-gi%E1%BB%AFa-element-v%C3%A0-component-trong-react\">S·ª± kh√°c nhau gi·ªØa Element v√† Component trong React?</a></li>\n<li><a href=\"#khi-n%C3%A0o-th%C3%AC-s%E1%BB%AD-d%E1%BB%A5ng-class-component-v%C3%A0-functional-component\">Khi n√†o th√¨ s·ª≠ d·ª•ng Class Component v√† Functional Component</a></li>\n<li><a href=\"#ref-trong-react-d%C3%B9ng-%C4%91%E1%BB%83-l%C3%A0m-g%C3%AC\"><code class=\"language-inline-text\">Ref</code> trong React d√πng ƒë·ªÉ l√†m g√¨</a></li>\n<li><a href=\"#key-trong-react-l%C3%A0-g%C3%AC\">Key trong React l√† g√¨</a></li>\n<li><a href=\"#s%E1%BB%B1-kh%C3%A1c-nhau-gi%E1%BB%AFa-controlled-component-v%C3%A0-uncontrolled-component\">S·ª± kh√°c nhau gi·ªØa controlled component v√† uncontrolled component</a></li>\n<li><a href=\"#%C4%91%E1%BB%83-g%E1%BB%8Di-ajax-s%E1%BB%AD-d%E1%BB%A5ng-s%E1%BB%B1-ki%E1%BB%87n-n%C3%A0o-c%E1%BB%A7a-lifecycle\">ƒê·ªÉ g·ªçi AJAX, s·ª≠ d·ª•ng s·ª± ki·ªán n√†o c·ªßa lifecycle?</a></li>\n<li><a href=\"#shouldcomponentupdate-d%C3%B9ng-%C4%91%E1%BB%83-l%C3%A0m-g%C3%AC\"><code class=\"language-inline-text\">shouldComponentUpdate</code> d√πng ƒë·ªÉ l√†m g√¨</a></li>\n<li><a href=\"#build-product-b%E1%BA%B1ng-c%C3%A1ch-n%C3%A0o\">Build Product b·∫±ng c√°ch n√†o?</a></li>\n<li><a href=\"#t%E1%BA%A1i-sao-n%C3%AAn-s%E1%BB%AD-d%E1%BB%A5ng-reactchildrenmap-thay-v%C3%AC-propschildrenmap\">T·∫°i sao n√™n s·ª≠ d·ª•ng <code class=\"language-inline-text\">React.Children.map()</code> thay v√¨ <code class=\"language-inline-text\">props.children.map()</code></a></li>\n<li><a href=\"#events-%C4%91%C6%B0%E1%BB%A3c-x%E1%BB%AD-l%C3%BD-trong-react-nh%C6%B0-th%E1%BA%BF-n%C3%A0o\">Events ƒë∆∞·ª£c x·ª≠ l√Ω trong React nh∆∞ th·∫ø n√†o?</a></li>\n<li><a href=\"#s%E1%BB%B1-kh%C3%A1c-nhau-gi%E1%BB%AFa-createelement-v%C3%A0-cloneelement\">S·ª± kh√°c nhau gi·ªØa <code class=\"language-inline-text\">createElement</code> v√† <code class=\"language-inline-text\">cloneElement</code></a></li>\n<li><a href=\"#argument-th%E1%BB%A9-2-c%E1%BB%A7a-setstate-d%C3%B9ng-%C4%91%E1%BB%83-l%C3%A0m-g%C3%AC\">Argument th·ª© 2 c·ªßa <code class=\"language-inline-text\">setState</code> d√πng ƒë·ªÉ l√†m g√¨</a></li>\n<li><a href=\"#%C4%91o%E1%BA%A1n-code-sau-sai-%E1%BB%9F-%C4%91%C3%A2u\">ƒêo·∫°n code sau sai ·ªü ƒë√¢u</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"chuy·ªán-g√¨-x·∫£y-ra-khi-g·ªçi-setstate-\"><a href=\"#chuy%E1%BB%87n-g%C3%AC-x%E1%BA%A3y-ra-khi-g%E1%BB%8Di-setstate-\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Chuy·ªán g√¨ x·∫£y ra khi g·ªçi <code class=\"language-inline-text\">setState</code> ?</h2>\n<p>ƒê·∫ßu ti√™n, object ƒë∆∞·ª£c truy·ªÅn trong <code>setState</code> s·∫Ω ƒë∆∞·ª£c merge v·ªõi state hi·ªán t·∫°i c·ªßa component, d·ª±a tr√™n s·ª± thay ƒë·ªïi c·ªßa object n√†y, UI ƒë∆∞·ª£c update v·ªõi state m·ªõi.</p>\n<p>ƒê·ªÉ l√†m ƒë∆∞·ª£c chuy·ªán n√†y, React s·∫Ω d·ª±ng m·ªôt c√¢y React Element m·ªõi, so s√°nh s·ª± kh√°c nhau c·ªßa c√¢y element m·ªõi v√† c√¢y element tr∆∞·ªõc ƒë√≥, React bi·∫øt ƒë∆∞·ª£c ch√≠nh x√°c ch·ªâ c·∫ßn update ph·∫ßn UI n√†o ƒë√£ b·ªã thay ƒë·ªïi.</p>\n<h2 id=\"s·ª±-kh√°c-nhau-gi·ªØa-element-v√†-component-trong-react\"><a href=\"#s%E1%BB%B1-kh%C3%A1c-nhau-gi%E1%BB%AFa-element-v%C3%A0-component-trong-react\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª± kh√°c nhau gi·ªØa Element v√† Component trong React?</h2>\n<p>React Element √°m ch·ªâ nh·ªØng g√¨ th·∫•y tr√™n m√†n h√¨nh.</p>\n<p>React component l√† m·ªôt function ho·∫∑c class c√≥ ho·∫∑c kh√¥ng c√≥ input v√† s·∫Ω tr·∫£ v·ªÅ m·ªôt React element.</p>\n<h2 id=\"khi-n√†o-th√¨-s·ª≠-d·ª•ng-class-component-v√†-functional-component\"><a href=\"#khi-n%C3%A0o-th%C3%AC-s%E1%BB%AD-d%E1%BB%A5ng-class-component-v%C3%A0-functional-component\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Khi n√†o th√¨ s·ª≠ d·ª•ng Class Component v√† Functional Component</h2>\n<p>N·∫øu component c√≥ state v√† c√°c ph∆∞∆°ng th·ª©c c·ªßa lifecycle, s·ª≠ d·ª•ng <strong>Class Component</strong>, ng∆∞·ª£c l·∫°i d√πng <strong>functional component</strong></p>\n<h2 id=\"ref-trong-react-d√πng-ƒë·ªÉ-l√†m-g√¨\"><a href=\"#ref-trong-react-d%C3%B9ng-%C4%91%E1%BB%83-l%C3%A0m-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">Ref</code> trong React d√πng ƒë·ªÉ l√†m g√¨</h2>\n<p>Ref ƒë·ªÉ truy c·∫≠p tr·ª±c ti·∫øp ƒë·∫øn DOM sau khi render</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> input<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<h2 id=\"key-trong-react-l√†-g√¨\"><a href=\"#key-trong-react-l%C3%A0-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Key trong React l√† g√¨</h2>\n<p>Key gi√∫p React theo d√µi s·ª± thay ƒë·ªïi c·ªßa m·ªôt item trong list. T·∫°i sao th√™m key? ƒë·ªÉ <strong>t·ªëi ∆∞u performance</strong>, gi√∫p React t√¨m nhanh t·ªõi element ƒë√≥ khi c·∫ßn.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>todoItems<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">task<span class=\"token punctuation\">,</span> uid</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>uid<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>task<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"s·ª±-kh√°c-nhau-gi·ªØa-controlled-component-v√†-uncontrolled-component\"><a href=\"#s%E1%BB%B1-kh%C3%A1c-nhau-gi%E1%BB%AFa-controlled-component-v%C3%A0-uncontrolled-component\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª± kh√°c nhau gi·ªØa controlled component v√† uncontrolled component</h2>\n<p><strong>Controlled Component</strong>: <code class=\"language-inline-text\">prop</code> ho·∫∑c <code class=\"language-inline-text\">state</code> c·ªßa component ƒë∆∞·ª£c g√°n cho gi√° tr·ªã DOM</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>text<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>updateUsername<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p><strong>Uncontrolled Component</strong>: gi√° tr·ªã c·ªßa DOM th√¨ do DOM qu·∫£n</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>text<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">input</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>input <span class=\"token operator\">=</span> input<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<h2 id=\"ƒë·ªÉ-g·ªçi-ajax-s·ª≠-d·ª•ng-s·ª±-ki·ªán-n√†o-c·ªßa-lifecycle\"><a href=\"#%C4%91%E1%BB%83-g%E1%BB%8Di-ajax-s%E1%BB%AD-d%E1%BB%A5ng-s%E1%BB%B1-ki%E1%BB%87n-n%C3%A0o-c%E1%BB%A7a-lifecycle\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒê·ªÉ g·ªçi AJAX, s·ª≠ d·ª•ng s·ª± ki·ªán n√†o c·ªßa lifecycle?</h2>\n<p><code class=\"language-inline-text\">componentDidMount</code></p>\n<h1 id=\"shouldcomponentupdate-d√πng-ƒë·ªÉ-l√†m-g√¨\"><a href=\"#shouldcomponentupdate-d%C3%B9ng-%C4%91%E1%BB%83-l%C3%A0m-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code class=\"language-inline-text\">shouldComponentUpdate</code> d√πng ƒë·ªÉ l√†m g√¨</h1>\n<p><code class=\"language-inline-text\">shouldComponentUpdate</code> cho ph√©p can thi·ªáp qu√° tr√¨nh update UI c·ªßa component v√† c√°c component con c·ªßa n√≥. N·∫øu return <code class=\"language-inline-text\">true</code> th√¨ update, ng∆∞·ª£c l·∫°i <code class=\"language-inline-text\">false</code></p>\n<h2 id=\"t·∫°i-sao-n√™n-s·ª≠-d·ª•ng-reactchildrenmap-thay-v√¨-propschildrenmap\"><a href=\"#t%E1%BA%A1i-sao-n%C3%AAn-s%E1%BB%AD-d%E1%BB%A5ng-reactchildrenmap-thay-v%C3%AC-propschildrenmap\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>T·∫°i sao n√™n s·ª≠ d·ª•ng <code class=\"language-inline-text\">React.Children.map()</code> thay v√¨ <code class=\"language-inline-text\">props.children.map()</code></h2>\n<p><code class=\"language-inline-text\">props.children</code> ch∆∞a ch·∫Øc l√∫c n√†o c≈©ng l√† <code class=\"language-inline-text\">array</code>. V√≠ d·ª•</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Parent</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Welcome.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Parent</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>N·∫øu s·ª≠ d·ª•ng <code class=\"language-inline-text\">props.children.map</code> trong Parent s·∫Ω b·ªã l·ªói v√¨ <code class=\"language-inline-text\">props.children</code> l√† m·ªôt object kh√¥ng ph·∫£i array.</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Parent</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Welcome.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">props.children will now be an array</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Parent</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"language-inline-text\">React.Children.map</code> cho ph√©p <code class=\"language-inline-text\">props.children</code> l√† <code class=\"language-inline-text\">array</code> ho·∫∑c <code class=\"language-inline-text\">object</code> ƒë·ªÅu ƒë∆∞·ª£c.</p>\n<h2 id=\"events-ƒë∆∞·ª£c-x·ª≠-l√Ω-trong-react-nh∆∞-th·∫ø-n√†o\"><a href=\"#events-%C4%91%C6%B0%E1%BB%A3c-x%E1%BB%AD-l%C3%BD-trong-react-nh%C6%B0-th%E1%BA%BF-n%C3%A0o\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Events ƒë∆∞·ª£c x·ª≠ l√Ω trong React nh∆∞ th·∫ø n√†o?</h2>\n<p>C√°c h√†m x·ª≠ l√Ω event trong React s·∫Ω ƒë∆∞·ª£c truy·ªÅn v√†o m·ªôt instance c·ªßa <code class=\"language-inline-text\">SyntheticEvent</code>, <code class=\"language-inline-text\">SyntheticEvent</code> c≈©ng gi·ªëng nh∆∞ nh·ªØng native event b√¨nh th∆∞·ªùng c·ªßa Browser tr·ª´ vi·ªác n√≥ c√≥ th·ªÉ l√†m vi·ªác tr√™n t·∫•t c·∫£ c√°c tr√¨nh duy·ªát.</p>\n<p>React kh√¥ng attach event v√¥ c√°c child node, m√† s·∫Ω l·∫Øng nghe t·∫•t c·∫£ c√°c event s·ª≠ d·ª•ng 1 event listener duy nh·∫•t, V·ªõi m·ª•c ƒë√≠ch l√† ƒë·ªÉ tƒÉng performance v√† React kh√¥ng c·∫ßn ph·∫£i update l·∫°i event listener khi update DOM.</p>\n<h2 id=\"s·ª±-kh√°c-nhau-gi·ªØa-createelement-v√†-cloneelement\"><a href=\"#s%E1%BB%B1-kh%C3%A1c-nhau-gi%E1%BB%AFa-createelement-v%C3%A0-cloneelement\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª± kh√°c nhau gi·ªØa <code class=\"language-inline-text\">createElement</code> v√† <code class=\"language-inline-text\">cloneElement</code></h2>\n<p><code class=\"language-inline-text\">createElement</code> l√† ƒë·ªÉ t·∫°o element, <code class=\"language-inline-text\">cloneElement</code> copy element v√† ƒë∆∞a v√†o c√°c props m·ªõi.</p>\n<h2 id=\"argument-th·ª©-2-c·ªßa-setstate-d√πng-ƒë·ªÉ-l√†m-g√¨\"><a href=\"#argument-th%E1%BB%A9-2-c%E1%BB%A7a-setstate-d%C3%B9ng-%C4%91%E1%BB%83-l%C3%A0m-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Argument th·ª© 2 c·ªßa <code class=\"language-inline-text\">setState</code> d√πng ƒë·ªÉ l√†m g√¨</h2>\n<p>callback function, function s·∫Ω ch·∫°y sau khi <code class=\"language-inline-text\">component</code> ƒë∆∞·ª£c <code class=\"language-inline-text\">render</code> l·∫°i v·ªõi state m·ªõi.</p>\n<p><code class=\"language-inline-text\">setState</code> l√† m·ªôt ph∆∞∆°ng th·ª©c b·∫•t ƒë·ªìng b·ªô (asynchronous)</p>\n<h2 id=\"ƒëo·∫°n-code-sau-sai-·ªü-ƒë√¢u\"><a href=\"#%C4%91o%E1%BA%A1n-code-sau-sai-%E1%BB%9F-%C4%91%C3%A2u\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒêo·∫°n code sau sai ·ªü ƒë√¢u</h2>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevState<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">streak</span><span class=\"token operator\">:</span> prevState<span class=\"token punctuation\">.</span>streak <span class=\"token operator\">+</span> props<span class=\"token punctuation\">.</span>count <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Kh√¥ng sai g√¨ c·∫£, √≠t ng∆∞·ªùi bi·∫øt r·∫±ng khi <code class=\"language-inline-text\">setState</code> c√≥ th·ªÉ truy·ªÅn v√†o <code class=\"language-inline-text\">previous state</code>.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://tylermcginnis.com/react-interview-questions/\">üìú React Interview Questions</a></p>\n","cover_image":""}},{"node":{"id":"4ec3d6b800b60890a6bb7edc81dda541","title":"N·∫Øm v·ªØng 5 kh√°i ni·ªám sau, xem nh∆∞ master React","path":"/2017-01-10-nam-vung-5-khai-niem-sau-xem-nhu-master-react/","date":"2017-01-10","timeToRead":5,"desc":"S·∫°o v·∫≠y th√¥i ch·ª© l√†m g√¨ m√† tr·ªü th√†nh master ngay l·∫≠p t·ª©c ƒë∆∞·ª£c, l√Ω l·∫Ω b√¨nh th∆∞·ªùng mu·ªën master b·∫•t c·ª© th·ª© g√¨ c≈©ng c·∫ßn m·ªì h√¥i v√† n∆∞·ªõc m·∫Øt. Hi·ªÉu ƒë∆∞·ª£c 5 kh√°i ni·ªám ƒë∆∞·ª£c cho l√† cƒÉn c∆° nh·∫•t n√†y s·∫Ω gi√∫p b·∫°n d·ªÖ xa l·∫ßy h∆°n.","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#kh%C3%A1i-ni%E1%BB%87m-1-react-component-ho%E1%BA%A1t-%C4%91%E1%BB%99ng-ra-sau\">Kh√°i ni·ªám #1: React component ho·∫°t ƒë·ªông ra sau</a></li>\n<li><a href=\"#kh%C3%A1i-ni%E1%BB%87m-2-jsx-ch%E1%BA%A1y-th%E1%BA%BF-n%C3%A0o\">Kh√°i ni·ªám #2: JSX ch·∫°y th·∫ø n√†o</a></li>\n<li><a href=\"#kh%C3%A1i-ni%E1%BB%87m-3-props-v%C3%A0-state\">Kh√°i ni·ªám 3: Props v√† State</a></li>\n<li><a href=\"#kh%C3%A1i-ni%E1%BB%87m-4-component-api\">Kh√°i ni·ªám #4: Component API</a></li>\n<li><a href=\"#kh%C3%A1i-ni%E1%BB%87m-5-component-type\">Kh√°i ni·ªám 5: Component Type</a></li>\n</ul>\n<!-- /TOC -->\n<p>S·∫°o v·∫≠y th√¥i ch·ª© l√†m g√¨ m√† tr·ªü th√†nh master ngay l·∫≠p t·ª©c ƒë∆∞·ª£c, l√Ω l·∫Ω b√¨nh th∆∞·ªùng mu·ªën master b·∫•t c·ª© th·ª© g√¨ c≈©ng c·∫ßn m·ªì h√¥i v√† n∆∞·ªõc m·∫Øt. Hi·ªÉu ƒë∆∞·ª£c 5 kh√°i ni·ªám ƒë∆∞·ª£c cho l√† cƒÉn c∆° nh·∫•t n√†y s·∫Ω gi√∫p b·∫°n d·ªÖ xa l·∫ßy h∆°n.</p>\n<ol>\n<li>Component</li>\n<li>JSX</li>\n<li>Props &#x26; State</li>\n<li>Component API</li>\n<li>Component Type</li>\n</ol>\n<h1 id=\"kh√°i-ni·ªám-1-react-component-ho·∫°t-ƒë·ªông-ra-sau\"><a href=\"#kh%C3%A1i-ni%E1%BB%87m-1-react-component-ho%E1%BA%A1t-%C4%91%E1%BB%99ng-ra-sau\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kh√°i ni·ªám #1: React component ho·∫°t ƒë·ªông ra sau</h1>\n<p>ƒêi·ªÅu ƒë·∫ßu ti√™n c·∫ßn n·∫±m l√≤ng l√† t·∫•t c·∫£ nh·ªØng g√¨ React x√¢y d·ª±ng ƒëi·ªÅu xoay quanh component. Th·∫ø th√¨ component l√† g√¨. V√≠ d·ª• tuy·ªát v·ªùi nh·∫•t l√† select HTML element, select c√≥ th·ªÉ xem nh∆∞ m·ªôt component ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a s·∫µn v·ªõi ki·ªÉu hi·ªÉn th·ªã ri√™ng c·ªßa n√≥ (m√†u x√°m, c√≥ label, n√∫t tam gi√°c n·∫±m ·ªü g√≥c ph·∫£i) v√† t·ª± n√≥ x·ª≠ l√Ω t√°c v·ª• ƒë√≥ng m·ªü m·∫•y c√°i option</p>\n<p><img src=\"https://img.readitlater.com/i/cdn-images-1.medium.com/max/800/1*dPxDcCmCItzEyQuPpHOS3Q/RS/w704.gif\"></p>\n<p>Gi·ªù t∆∞·ªüng t∆∞·ª£ng l√† ch√∫ng ta s·∫Ω t·ª± build ra m·ªôt c√°i component t∆∞∆°ng t·ª± nh∆∞ select v·ªõi giao di·ªán v√† event ch√∫ng ta t·ª± ki·ªÉm so√°t</p>\n<p><img src=\"https://img.readitlater.com/i/cdn-images-1.medium.com/max/800/1*AZ2IbiM4WskvgvIyhq6qPA/RS/w704.gif\"></p>\n<p>ƒê√≥ l√† nh·ªØng g√¨ React gi√∫p ch√∫ng ta l√†m, x√¢y d·ª±ng m·ªôt ƒë·ªëi t∆∞·ª£ng kh√¥ng ch·ªâ output ra m·ªôt HTML templete th√¥ng th∆∞·ªùng,¬† ch√∫ng ta s·∫Ω vi·∫øt ra nh·ªØng function ƒë·ªÉ control nh·ªØng event tr√™n c√°i template ƒë√≥</p>\n<p>ƒê·ªÉ t·∫°o ra m·ªôt React component cƒÉn b·∫£n nh·∫•t</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>component</span> <span class=\"token punctuation\">{</span>\n <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Hello World<span class=\"token operator\">!</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"kh√°i-ni·ªám-2-jsx-ch·∫°y-th·∫ø-n√†o\"><a href=\"#kh%C3%A1i-ni%E1%BB%87m-2-jsx-ch%E1%BA%A1y-th%E1%BA%BF-n%C3%A0o\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kh√°i ni·ªám #2: JSX ch·∫°y th·∫ø n√†o</h1>\n<p>C√≥ th·ªÉ th·∫•y l√† v·ªõi c√°ch t·∫°o ra m·ªôt component nh∆∞ React th√¨ javascript v√† HTML s·ªëng chung m·ªôt nh√†. V≈© kh√≠ b√≠ m·∫≠t c·ªßa React ƒë·ªÉ l√†m ƒë∆∞·ª£c chuy·ªán \"what-the-heck\" ƒë√≥ l√† JSX language.</p>\n<p>Ng√†y x∆∞a, ƒëi h·ªçc ƒë∆∞·ª£c d·∫°y ph·∫£i t√°ch bi·ªát HTML ra m·ªôt file v√† JS ra m·ªôt file, th·ªùi gian sau n√†y anh em l√†m frontend th·∫•y l√†m gom nh∆∞ v·∫≠y l√†m th·∫•y nhanh h∆°n, m√† c≈©ng kh√¥ng qu√° evil nh∆∞ m·∫•y √¥ng th·∫ßy d·∫°y</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>component</span> <span class=\"token punctuation\">{</span>\n <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\nreturnToday is<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ƒê·ªÉ √Ω c√°i c√°ch ta ch√®n code javascript ·ªü trong HTML b·∫±ng c√°ch ƒë∆∞a n√†o v√†o b√™n trong d·∫•u {}, ƒë√≥ l√† c√°ch vi·∫øt JSX</p>\n<h1 id=\"kh√°i-ni·ªám-3-props-v√†-state\"><a href=\"#kh%C3%A1i-ni%E1%BB%87m-3-props-v%C3%A0-state\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kh√°i ni·ªám 3: Props v√† State</h1>\n<p>B·∫°n ch·∫Øc ch·∫Øn bi·∫øt ƒë·∫øn attribute href cho th·∫ª a , ch∆∞a bi·∫øt? v·ªÅ l·∫°i w3com h·ªçc nh√©. V·ªõi m·ªôt component c·ªßa React nh·ªØng attribute nh∆∞ v·∫≠y ƒë∆∞·ª£c g·ªçi l√† props . Props l√† c√°ch m√† c√°c component t∆∞∆°ng t√°c l·∫´n nhau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">ParentComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">{</span>\n <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>ChildComponent message<span class=\"token operator\">=</span><span class=\"token string\">\"Hello World\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ChildComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">{</span>\n <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> And then <span class=\"token constant\">I</span> said<span class=\"token punctuation\">,</span> <span class=\"token string\">\"{this.props.message}\"</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>D·ªØ li·ªáu trong component c√≥ th·ªÉ truy·ªÅn t·ª´ cha xu·ªëng con v√† kh√¥ng c√≥ ng∆∞·ª£c l·∫°i</p>\n<p>ƒê√¥i khi d·ªØ li·ªáu s·∫Ω kh√¥ng ph·∫£i ƒë∆∞·ª£c truy·ªÅn t·ª´ cha xu·ªëng con, m√† n√≥ ch·ªâ l√† m·ªôt d·ªØ li·ªáu t·∫°m th·ªùi n√†o ƒë√≥, v√≠ d·ª• nh∆∞ gi√° tr·ªã input c·ªßa user ch·∫≥ng h·∫°n, l√∫c ƒë√≥ n√≥ ƒë∆∞·ª£c g·ªçi l√† state</p>\n<p>Cho d·ªÖ h√¨nh dung, n·∫øu xem c√°i b·∫£ng nam ch√¢m l√† m·ªôt component th√¨ props l√† n√∫t g·∫°t x√≥a, state l√† nh·ªØng g√¨ vi·∫øt tr√™n b·∫£ng</p>\n<p><img src=\"https://img.readitlater.com/i/cdn-images-1.medium.com/max/1000/1*aYxNrkwkAPwIoGc0-3k_Ug/RS/w704.jpeg\"></p>\n<p>B√™n trong m·ªôt component, state ƒë∆∞·ª£c qu·∫£n l√Ω b·∫±ng h√†m setState th∆∞·ªùng ƒë∆∞·ª£c vi·∫øt l√≤ng trong m·ªôt h√†m x·ª≠ l√Ω s·ª± ki·ªán</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">clicked</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>a href<span class=\"token operator\">=</span><span class=\"token string\">\"#\"</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span><span class=\"token operator\">></span> Click Me<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"kh√°i-ni·ªám-4-component-api\"><a href=\"#kh%C3%A1i-ni%E1%BB%87m-4-component-api\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kh√°i ni·ªám #4: Component API</h1>\n<p>Nh·ªØng h√†m nh∆∞ render v√† setState l√† m·ªôt ph·∫ßn c·ªßa component API, ngo√†i ra n√≥ c√≤n m·ªôt s·ªë h√†m h·ªØu √≠ch kh√°c n·ªØa nh∆∞ constructor ƒë·ªÉ kh·ªüi t·∫°o state v√† k√≠ch ho·∫°t c√°c ph∆∞∆°ng th·ª©c, m·ªôt s·ªë h√†m trigger tr∆∞·ªõc khi component ƒë∆∞·ª£c load, sau khi load, sau khi unmounting. v√¢ng v√¢ng.</p>\n<p>Th·∫≠t ra vi·ªác master ƒë∆∞·ª£c React ph·∫ßn nhi·ªÅu l√† master ƒë∆∞·ª£c vi·ªác l·∫≠p tr√¨nh v√† kh√°i ni·ªám ƒë·ªÉ ki·∫øn tr√∫c ra m·ªôt component h∆°n l√† m·ªôt lo·∫°t c√°c API ƒë∆∞·ª£c h·ªó tr·ª£ s·∫µn, v·∫≠y n√™n ph·∫ßn n√†y k·∫øt th√∫c ·ªü ƒë√¢y.</p>\n<h1 id=\"kh√°i-ni·ªám-5-component-type\"><a href=\"#kh%C3%A1i-ni%E1%BB%87m-5-component-type\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kh√°i ni·ªám 5: Component Type</h1>\n<p>M·∫•y v√≠ d·ª• tr√™n, ƒë·ªãnh nghƒ©a m·ªôt component ƒë∆∞·ª£c khai b√°o d·∫°ng class</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Gi·ªù th√¨ h√£y qu√™n c√°ch vi·∫øt n√†y ƒëi! B√¢y gi·ªù ai c≈©ng vi·∫øt m·ªôt component ·ªü d·∫°ng function component</p>\n<p>M·ªôt functional component l√† m·ªôt function nh·∫≠n m·ªôt props object nh∆∞ tham s·ªë truy·ªÅn v√†o v√† tr·∫£ v·ªÅ m·ªôt ƒë·ªëng HTML l·∫±n x√† ngo·∫±n. Y h·ªát nh∆∞ c√°ch vi·∫øt template kinh ƒëi·ªÉn, kh√°c bi·ªát c∆° b·∫£n l√† ·ªü ch·ªï m√¨nh c√≥ th·ªÉ x√†i JavaScript b·∫•t c·ª© ch·ªï n√†o khi c·∫ßn</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">myComponent</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">props</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Hello <span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> Today is <span class=\"token punctuation\">{</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Vi·∫øt c√°ch n√†y c√≥ m·ªôt h·∫≠u qu·∫£ l√† m√¨nh kh√¥ng th·ªÉ access ƒë∆∞·ª£c ph∆∞∆°ng th·ª©c c·ªßa component, tr√™n th·ª±c t·∫ø vi·ªác n√†y kh√¥ng ·∫£nh h∆∞·ªüng g√¨ l√†m v√¨ ph·∫ßn l·ªõn tr∆∞·ªùng h·ª£p ta kh√¥ng d√πng t·ªõi.</p>\n<p>V√† nh∆∞ v·∫≠y component n√†y s·∫Ω kh√¥ng c√≥ ph∆∞∆°ng th·ª©c setState , kh√¥ng c√≥ state lu√¥n, ng∆∞·ªùi ta c√≤n g·ªçi l√† stateless functional component.</p>\n<p>C√°ch vi·∫øt n√†y r·∫•t l√† g·ªçn g√†ng, ph√π h·ª£p cho nh·ªØng tr∆∞·ªùng component ƒë∆°n gi·∫£n, n√™n √°p d·ª•ng khi c√≥ th·ªÉ.</p>\n<p>Ngu·ªìn</p>\n<blockquote>\n<blockquote>\n<p><a href=\"https://medium.freecodecamp.com/the-5-things-you-need-to-know-to-understand-react-a1dbd5d114a3\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://medium.freecodecamp.com/the-5-things-you-need-to-know-to-understand-react-a1dbd5d114a3</a></p>\n</blockquote>\n</blockquote>\n","cover_image":""}}]}}},"context":{}}