{"hash":"6f8620c4b9320834772a34e00598bbfeaacfb63b","data":{"tag":{"title":"mobile-web-specialist","belongsTo":{"edges":[{"node":{"id":"0ad0cd22a45ddb048f8607ccc85df2f1","title":"Ràng buộc dữ liệu input với HTML5","path":"/rang-buoc-du-lieu-input-voi-htm-l5/","date":"2019-03-25","timeToRead":4,"desc":"Vì form quá phức tạp, chúng ta cần thêm một bài viết nữa về validation với html","content":"<p>Với HTML5 chúng ta có một số kiểu input để validate những giá trị mà user đưa vào, ko cần tự viết javascript để check, chỉ đơn giản là khai báo mấy cái attribute, trường hợp phức tạp hơn, chúng ta có thể can thiệp trong cái <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Constraint_validation\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Validation API</a> để có kết quả mong muốn</p>\n<blockquote>\n<p>Luôn nhớ validate ở phía client không có nghĩa là ko cần đến validate ở server.</p>\n</blockquote>\n<h2 id=\"một-vài-ràng-buộc-phổ-biến\"><a href=\"#m%E1%BB%99t-v%C3%A0i-r%C3%A0ng-bu%E1%BB%99c-ph%E1%BB%95-bi%E1%BA%BFn\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Một vài ràng buộc phổ biến</h2>\n<p>Dùng kiểu input\n<code>&#x3C;input type=”email” /></code>: bắt buộc là giá trị email\n<code>&#x3C;input type=\"url\" /></code>: bắt buộc là giá trị url</p>\n<p>Dùng attribute khác</p>\n<table>\n<thead>\n<tr>\n<th>Attribute</th>\n<th align=\"center\">Kiểu input hỗ trợ</th>\n<th align=\"right\">Giải thích</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>pattern</code></td>\n<td align=\"center\">text, search, url, tel, email, password</td>\n<td align=\"right\">phải khớp với giá trị regular expression</td>\n</tr>\n<tr>\n<td><code>min</code></td>\n<td align=\"center\">range, number, date, month, week, datetime, datetime-local, time</td>\n<td align=\"right\">giá trị phải lớn hơn hoặc bằng giá trị <code>min</code></td>\n</tr>\n<tr>\n<td><code>max</code></td>\n<td align=\"center\">range, number, date, month, week, datetime, datetime-local, time</td>\n<td align=\"right\">giá trị phải nhỏ hơn hoặc bằng giá trị <code>max</code></td>\n</tr>\n<tr>\n<td><code>required</code></td>\n<td align=\"center\">text, search, url, tel, email, password, date, datetime, datetime-local, month, week, time, number, checkbox, radio, file, select, textarea</td>\n<td align=\"right\">bắt buộc phải có giá trị</td>\n</tr>\n<tr>\n<td><code>minlength</code></td>\n<td align=\"center\">text, search, url, tel, email, password, textarea</td>\n<td align=\"right\">số ký tự nhập vào phải thỏa lớn hơn hoặc bằng <code>minlength</code></td>\n</tr>\n<tr>\n<td><code>maxlength</code></td>\n<td align=\"center\">text, search, url, tel, email, password, textarea</td>\n<td align=\"right\">số ký tự nhập vào phải thỏa nhỏ hơn hoặc bằng <code>maxlength</code></td>\n</tr>\n</tbody>\n</table>\n<p>Ví dụ</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Enter username (upper and lowercase letters): <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">required</span> <span class=\"token attr-name\">pattern</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>[A-Za-z]+<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>Submit<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"quá-trình-validate-dữ-liệu\"><a href=\"#qu%C3%A1-tr%C3%ACnh-validate-d%E1%BB%AF-li%E1%BB%87u\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Quá trình validate dữ liệu</h2>\n<p>Quá trình này sẽ thông qua bộ Validation API, nó có thể là trên cả form hoặc trên từng element trong form. Được thực hiện bằng một trong các cách sau\nbằng cách gọi <code>checkValidity()</code> của các element input, select, button, textarea. Nó sẽ chỉ validate dữ liệu trên element đó thôi. Nó thường được thực hiện bởi trình duyệt, sau đó chúng ta dùng selector của CSS là <code>:valid</code> và <code>:invalid</code> để format\ngọi <code>checkValidity()</code> hoặc <code>reportValidity()</code> trên thằng form\nKhi form được submit bằng click ‘<input type=’submit’ /><code>hoặc ‘&#x3C;button type=’submit’ /></code> hoặc ấn enter</p>\n<p>Lưu ý</p>\n<ul>\n<li>Nếu set novalidate trên thẻ <code>&#x3C;form novalidate /></code>, là chúng ta bỏ qua hết việc validate</li>\n<li>Khi gọi <code>submit()</code> trên form, không trigger validation, phương thức này sẽ gửi hết dữ liệu của form lên server dù nó có hay không thỏa điều kiện. Nên gọi sự kiện <code>click()</code> của nút submit</li>\n</ul>\n<h2 id=\"can-thiệp-vào-quá-trình-validate-bằng-bộ-validation-api\"><a href=\"#can-thi%E1%BB%87p-v%C3%A0o-qu%C3%A1-tr%C3%ACnh-validate-b%E1%BA%B1ng-b%E1%BB%99-validation-api\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Can thiệp vào quá trình validate bằng bộ Validation API</h2>\n<p>Ý tưởng chính là bắt một sự kiện nào đó trên element như <code>onchange</code>, rồi trigger một đoạn javascript để validate, sau đó dùng phương thức <code>field.setCustomValidity()</code> để set kết quả validate: nếu là String rỗng nghĩa là ok, còn ngược lại là error, đoạn string này sẽ đem đi hiển thị như thông báo error cho user</p>\n<h3 id=\"giới-hạn-file-size-khi-upload\"><a href=\"#gi%E1%BB%9Bi-h%E1%BA%A1n-file-size-khi-upload\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Giới hạn file size khi upload</h3>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FS<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Select a file smaller than 75 kB : <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>file<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FS<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Dùng javascript để đọc file được chọn, <code>FIle.size()</code>, so sánh kích thước này rồi trả về kết quả cho trình duyệt</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">checkFileSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> <span class=\"token constant\">FS</span> <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FS\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> files <span class=\"token operator\">=</span> <span class=\"token constant\">FS</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">files</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Nếu có ít nhất 1 file được chọn</span>\n  <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>files<span class=\"token punctuation\">.</span><span class=\"token property-access\">length</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">size</span> <span class=\"token operator\">></span> <span class=\"token number\">75</span> <span class=\"token operator\">*</span> <span class=\"token number\">1024</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// kiểm tra size</span>\n       <span class=\"token constant\">FS</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setCustomValidity</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The selected file must not be larger than 75 kB\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token keyword control-flow\">return</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// Không có file, ko check.</span>\n  <span class=\"token constant\">FS</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setCustomValidity</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Hook cái phương thức này vào trong sự kiện mong muốn</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method-variable function-variable method function property-access\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FS\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">onchange</span> <span class=\"token operator\">=</span> checkFileSize<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"hiển-thị-validation\"><a href=\"#hi%E1%BB%83n-th%E1%BB%8B-validation\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Hiển thị validation</h2>\n<p>Dùng <code>:required</code> và <code>:optional</code> để trỏ đến các element nào có thuộc tính <code>required</code> hoặc không</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">input<span class=\"token pseudo-class\">:required</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> <span class=\"token color\">red</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">input<span class=\"token pseudo-class\">:optional</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> <span class=\"token color\">blue</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p><code>:valid</code> và <code>:invalid</code> trên các element bị/không bị lỗi</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">input<span class=\"token pseudo-class\">:valid</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> <span class=\"token color\">black</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">input<span class=\"token pseudo-class\">:invalid</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> <span class=\"token color\">red</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Để thay đổi nội dung câu thông báo, sử dụng <code>element.setCustomValidity('thông báo')</code> trên các element: <code>&#x3C;fieldset></code>, <code>&#x3C;input></code>, <code>&#x3C;output></code>, <code>&#x3C;select></code>, <code>&#x3C;button></code>, <code>&#x3C;textarea></code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> nameInput <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> form <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'form'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nnameInput<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  nameInput<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setCustomValidity</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  nameInput<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">checkValidity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nnameInput<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'invalid'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">if</span><span class=\"token punctuation\">(</span>nameInput<span class=\"token punctuation\">.</span><span class=\"token property-access\">value</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    nameInput<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setCustomValidity</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Enter your username!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">else</span> <span class=\"token punctuation\">{</span>\n    nameInput<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setCustomValidity</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Usernames can only contain upper and lowercase letters. Try again!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5/Constraint_validation\">Constraint validation\n</a></p>\n","cover_image":""}},{"node":{"id":"58ea8827c07db478a5f5fc39667a1858","title":"Map và Object trong Javascript","path":"/map-va-object-trong-javascript/","date":"2018-12-07","timeToRead":5,"desc":"Kẻ tám lạng người nữa cân","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#key\">key</a></li>\n<li><a href=\"#th%E1%BB%A9-t%E1%BB%B1-c%C3%A1c-element\">Thứ tự các element</a></li>\n<li><a href=\"#kh%E1%BB%9Fi-t%E1%BA%A1o\">Khởi tạo</a></li>\n<li><a href=\"#l%E1%BA%A5y-gi%C3%A1-tr%E1%BB%8B\">Lấy giá trị</a></li>\n<li><a href=\"#th%C3%AAm-m%E1%BB%99t-element\">Thêm một element</a></li>\n<li><a href=\"#x%C3%B3a-element\">Xóa element</a></li>\n<li><a href=\"#l%E1%BA%A5y-size-hay-length\">Lấy <code>size</code> (hay length)</a></li>\n<li><a href=\"#loop\">Loop</a></li>\n<li><a href=\"#khi-n%C3%A0o-d%C3%B9ng-map-khi-n%C3%A0o-d%C3%B9ng-object\">Khi nào dùng <code>Map</code>, khi nào dùng <code>Object</code></a></li>\n</ul>\n<!-- /TOC -->\n<p><code>Map</code> có thể coi là con đẻ của <code>Object</code>, nó kế thừa, cắt bỏ, bổ sung một số thứ trong Object</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>map <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//true</span>\n\n<span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//false</span></code></pre>\n<p>Mỗi phần tử trong Map được lưu theo cặp <code>key: value</code>, các giá trị <code>key</code> này cũng là duy nhất trong Map, không có trường hợp được lặp lại, giống Object thôi, phần khác nhau sẽ được đề cặp ở dưới.</p>\n<p>Nói về cái tên Map một chút, vì mang các đặc điểm rất giống với World Map, Street Map. Chữ <code>Map</code> được dùng trong các trường hợp cần tìm nhanh dữ liệu, vì các giá trị trên Map là duy nhất.</p>\n<p>Ví dụ bản đồ TP.HCM thì tất cả các con đường là khác nhau (do hết tên anh hùng nên nhiều khi đặt trùng trên một số quận, vụ này không tính nhé), bản đồ thế giới thì mỗi nước là duy nhất trên bản đồ.</p>\n<p>Giờ nói các điểm khác nhau nè</p>\n<h2 id=\"key\"><a href=\"#key\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>key</h2>\n<p>Key của <code>Object</code> chỉ có thể là <code>String</code> hoặc <code>Integer</code></p>\n<p>Key trong <code>Map</code> có thể là một <code>Object</code>, <code>Array</code>, <code>Function</code>, nói chung không giới hạn</p>\n<h2 id=\"thứ-tự-các-element\"><a href=\"#th%E1%BB%A9-t%E1%BB%B1-c%C3%A1c-element\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Thứ tự các element</h2>\n<p>Trong Map <strong>thứ tự các element là cố định</strong>, ngược lại so với Object</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> myObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    z<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'@'</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    b<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">1</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">5</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>myObject<span class=\"token punctuation\">)</span> \n<span class=\"token comment\">// Object {1: 4, 5: 5, z: 1, @: 2, b: 3}</span>\n\n<span class=\"token keyword control-flow\">for</span> <span class=\"token punctuation\">(</span>item <span class=\"token keyword\">in</span> myObject<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token spread operator\">...</span>\n<span class=\"token comment\">// 1</span>\n<span class=\"token comment\">// 5</span>\n<span class=\"token comment\">// z</span>\n<span class=\"token comment\">// @</span>\n<span class=\"token comment\">// b</span></code></pre>\n<p>Thứ tự các phần trong object không quan trọng, khi <code>for...in</code> qua các phần tử trên object, tùy theo enzine của trình duyệt, thứ tự này có thể khác nhau</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> myObject <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyObject<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'z'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyObject<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmyObject<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword control-flow\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">]</span> <span class=\"token keyword\">of</span> myObject<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// z 1</span>\n<span class=\"token comment\">// @ 2</span>\n<span class=\"token comment\">// b 3</span></code></pre>\n<p>Thứ tự khi chạy <code>for...of</code> trên Map luôn đúng theo thứ tự đã thêm</p>\n<h2 id=\"khởi-tạo\"><a href=\"#kh%E1%BB%9Fi-t%E1%BA%A1o\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Khởi tạo</h2>\n<p>Với Oject ta có một số cách để khởi tạo</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// bằng constructor</span>\n<span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">;</span> \n<span class=\"token comment\">// cùng kết quả như trên</span>\n\n<span class=\"token comment\">// dùng Object.prototype.create</span>\n<span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Object</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">create</span><span class=\"token punctuation\">(</span><span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<blockquote>\n<p>Dùng <code>Object.create</code> để tạo object mới *<em>kế thừa</em> từ một object khác.</p>\n</blockquote>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> <span class=\"token maybe-class-name\">Vehicle</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    type<span class=\"token operator\">:</span> <span class=\"token string\">\"General\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">display</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">type</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Car sẽ kế thừa các property của Vehicle</span>\n<span class=\"token keyword\">var</span> <span class=\"token maybe-class-name\">Car</span> <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Object</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">create</span><span class=\"token punctuation\">(</span><span class=\"token maybe-class-name\">Vehicle</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// overwrite lại giá trị type</span>\n<span class=\"token maybe-class-name\">Car</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">type</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Car\"</span><span class=\"token punctuation\">;</span> \n<span class=\"token maybe-class-name\">Car</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">display</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"Car\"</span>\n\n<span class=\"token maybe-class-name\">Vehicle</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">display</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// vẫn là \"General\"</span></code></pre>\n<p>Cũng tương tự như Array, chúng ta không dùng constructor nhiều vì nó tốn tài nguyên (và lười đánh máy dài)</p>\n<p>Với <code>Map</code> chúng ta sẽ <strong>chỉ có duy nhất một cách để khởi tạo</strong> bằng constructor <code>new Map</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token comment\">// map = {1=>2, 2=>3}</span></code></pre>\n<h2 id=\"lấy-giá-trị\"><a href=\"#l%E1%BA%A5y-gi%C3%A1-tr%E1%BB%8B\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Lấy giá trị</h2>\n<p>Lấy một giá trị trong Map thông qua <code>Map.prototype.get(key)</code></p>\n<pre class=\"language-js\"><code class=\"language-js\">map<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">get</span><span class=\"token punctuation\">(</span>keyName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Object thì cũng có vài đường</p>\n<pre class=\"language-js\"><code class=\"language-js\">obj<span class=\"token punctuation\">.</span><span class=\"token property-access\">keyName</span>\nobj<span class=\"token punctuation\">[</span><span class=\"token string\">'keyName'</span><span class=\"token punctuation\">]</span></code></pre>\n<p>Kiểm tra element có tồn tại trong Map dễ hơn chút so với Object</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Map</span>\nmap<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">has</span><span class=\"token punctuation\">(</span>keyName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// object</span>\n<span class=\"token keyword\">var</span> isExist <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span><span class=\"token property-access\">keyName</span> <span class=\"token operator\">===</span> <span class=\"token keyword nil\">undefined</span>\n<span class=\"token comment\">// hoặc</span>\n<span class=\"token keyword\">var</span> isExist <span class=\"token operator\">=</span> <span class=\"token string\">'keyName'</span> <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// kiểm tra property trường hợp ko phải kế thừa từ object cha</span>\nobj<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">hasOwnProperty</span><span class=\"token punctuation\">(</span>keyName<span class=\"token punctuation\">)</span></code></pre>\n<h2 id=\"thêm-một-element\"><a href=\"#th%C3%AAm-m%E1%BB%99t-element\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Thêm một element</h2>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Map</span>\n\nmap<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">set</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// cặp giá trị key, value</span>\n\n<span class=\"token comment\">// Object</span>\nobj<span class=\"token punctuation\">[</span><span class=\"token string\">'gender'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'female'</span><span class=\"token punctuation\">;</span>\nobj<span class=\"token punctuation\">.</span><span class=\"token property-access\">gender</span> <span class=\"token operator\">=</span> <span class=\"token string\">'male'</span><span class=\"token punctuation\">;</span> </code></pre>\n<h2 id=\"xóa-element\"><a href=\"#x%C3%B3a-element\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Xóa element</h2>\n<p>Object không có phương thức để xóa một element, chúng ta dùng operator <code>delete</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">delete</span> obj<span class=\"token punctuation\">.</span><span class=\"token property-access\">keyName</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Chỗ này cũng sẽ có nhiều tranh luận quanh vấn đề performance, một số quan điểm cho là làm như bên dưới tốt hơn</p>\n<pre class=\"language-js\"><code class=\"language-js\">obj<span class=\"token punctuation\">.</span><span class=\"token property-access\">keyName</span> <span class=\"token operator\">=</span> <span class=\"token keyword nil\">undefined</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Nhưng đây rõ ràng là 2 cách làm khác nhau, nếu <code>delete</code> là xóa hẳn, thì cách sau là gán <code>key</code> đó với giá trị <code>undefined</code>, đồng nghĩa với việc khi <code>for..in</code> nó vẫn chạy qua element đó.</p>\n<p>Map thì có các hàm sẵn để làm chuyện xóa element</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// trả về true/false</span>\n<span class=\"token keyword\">var</span> isDeleteSuccessed <span class=\"token operator\">=</span> map<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">delete</span><span class=\"token punctuation\">(</span>keyName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// xóa sạch</span>\nmap<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// {}</span></code></pre>\n<h2 id=\"lấy-size-hay-length\"><a href=\"#l%E1%BA%A5y-size-hay-length\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Lấy <code>size</code> (hay length)</h2>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Object không có trực tiếp mà phải gọi hàm keys</span>\n<span class=\"token known-class-name class-name\">Object</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">keys</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">length</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Map, rất đơn giản</span>\nmap<span class=\"token punctuation\">.</span><span class=\"token property-access\">size</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"loop\"><a href=\"#loop\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Loop</h2>\n<blockquote>\n<p>Một trong những khác biệt đáng chú ý nhất mà bạn nên cân nhắc dùng <code>Map</code> thay vì <code>Object</code></p>\n</blockquote>\n<p>Kiểm tra xem kiểu dữ liệu có là dạng <code>iterable</code> (loop được)</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> obj<span class=\"token punctuation\">[</span><span class=\"token known-class-name class-name\">Symbol</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">iterator</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token comment\">// > undefined</span>\n\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> map<span class=\"token punctuation\">[</span><span class=\"token known-class-name class-name\">Symbol</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">iterator</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token comment\">// > function</span></code></pre>\n<p>Nghĩa là chúng ta có thể dùng <code>for...of</code> trên <code>Map</code>, <code>Object</code> chỉ có thể <code>for...in</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//For map: { 2=>3, 4=>5}</span>\n<span class=\"token keyword control-flow\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> item <span class=\"token keyword\">of</span> map<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token comment\">// Array[2,3]</span>\n<span class=\"token comment\">// Array[4,5]</span>\n\n<span class=\"token keyword control-flow\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">,</span>value<span class=\"token punctuation\">]</span> <span class=\"token keyword\">of</span> map<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">key: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, value: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>value<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//key: 2, value: 3</span>\n<span class=\"token comment\">//key: 4, value: 5</span></code></pre>\n<p>Hoặc <code>forEach</code></p>\n<pre class=\"language-js\"><code class=\"language-js\">map<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value<span class=\"token punctuation\">,</span> key</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">key: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, value: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>value<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// key: 2, value: 3</span>\n<span class=\"token comment\">// key: 4, value: 5</span></code></pre>\n<p>Trong Object thậm chí là khi ta dùng <code>for..in</code> cũng không thể dùng trực tiếp <code>value</code> mà phải viết <code>obj[key]</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">:</span> <span class=\"token string\">\"test\"</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword control-flow\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> key <span class=\"token keyword\">in</span> obj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">key: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>key<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, value: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>obj<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// key: id, value: 1</span>\n<span class=\"token comment\">// key: name, value: test</span></code></pre>\n<h2 id=\"khi-nào-dùng-map-khi-nào-dùng-object\"><a href=\"#khi-n%C3%A0o-d%C3%B9ng-map-khi-n%C3%A0o-d%C3%B9ng-object\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Khi nào dùng <code>Map</code>, khi nào dùng <code>Object</code></h2>\n<p>Mặc dù nãy giờ đọc thì bạn sẽ thấy <code>Map</code> quá ư thần thánh, vậy tại sao ta không dẹp luôn Object?</p>\n<ul>\n<li>Trường hợp mà các giá trị key của chúng ta nó chỉ là <code>integer</code>, <code>string</code>, truy xuất một element trong object bằng key là <strong>nhanh nhất</strong>, trong khi <code>Map.prototype.get</code> là một function thì nó phải tốn chút tính toán</li>\n<li>Hoặc trường hợp chúng ta có các element phụ thuộc lẫn nhau như bên dưới</li>\n</ul>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> \n    name<span class=\"token operator\">:</span> <span class=\"token string\">\"It's Me!\"</span><span class=\"token punctuation\">,</span> \n    <span class=\"token function-variable function\">print</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> \n         <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Object Id: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">id</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, with Name: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">name</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Với <code>Map</code>? đơn giản là hổng làm được.</p>\n<p>JSON bản thân đã hỗ trợ Object, xài luôn Object chứ không cần convert qua chi.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://medium.com/front-end-hacking/es6-map-vs-object-what-and-when-b80621932373\">ES6 — Map vs Object — What and when?</a></p>\n","cover_image":""}},{"node":{"id":"e604c1874dc653589d8750eac8a17993","title":"Kim chỉ nam khi thiết kế form từ Google","path":"/kim-chi-nam-khi-thiet-ke-form-tu-google/","date":"2018-11-14","timeToRead":4,"desc":"Bài này nằm trong loạt bài chuẩn kiến thức để đi thi web mobile specialist của google. Một vài điểm cần nhớ khi thiết kế và làm việc với form","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#tr%C3%A1nh-l%E1%BA%B7p-l%E1%BA%A1i\">Tránh lặp lại</a></li>\n<li><a href=\"#t%C3%B4i-%C4%91ang-%C4%91%E1%BB%A9ng-%E1%BB%9F-b%C6%B0%E1%BB%9Bc-n%C3%A0o\">Tôi đang đứng ở bước nào?</a></li>\n<li><a href=\"#gi%C3%A1-tr%E1%BB%8B-ng%C3%A0y-th%C3%A1ng\">Giá trị ngày tháng</a></li>\n<li>\n<p><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-input-type-ph%C3%B9-h%E1%BB%A3p\">Sử dụng input type phù hợp</a></p>\n<ul>\n<li><a href=\"#typeurl\"><code>type='url'</code></a></li>\n<li><a href=\"#typetel\"><code>type='tel'</code></a></li>\n<li><a href=\"#typeemail\"><code>type='email'</code></a></li>\n<li><a href=\"#typesearch\"><code>type='search'</code></a></li>\n<li><a href=\"#typenumber\"><code>type='number'</code></a></li>\n<li><a href=\"#typerange\"><code>type='range'</code></a></li>\n<li><a href=\"#typedatetime-local\"><code>type='datetime-local'</code></a></li>\n<li><a href=\"#typedatetime\"><code>type='datetime'</code></a></li>\n<li><a href=\"#typetime\"><code>type='time'</code></a></li>\n<li><a href=\"#typeweek\"><code>type='week'</code></a></li>\n<li><a href=\"#typemonth\"><code>type='month'</code></a></li>\n<li><a href=\"#typecolor\"><code>type='color'</code></a></li>\n</ul>\n</li>\n<li><a href=\"#g%E1%BB%A3i-%C3%BD-th%C3%B4ng-qua-tr%C6%B0%E1%BB%9Dng-datalist\">Gợi ý thông qua trường <code>datalist</code></a></li>\n<li><a href=\"#auto-focus-khi-c%E1%BA%A7n-thi%E1%BA%BFt\">auto focus khi cần thiết</a></li>\n<li>\n<p><a href=\"#h%C3%A3y-tin-v%C3%A0o-chrome\">Hãy tin vào Chrome</a></p>\n<ul>\n<li><a href=\"#kh%C3%B4ng-s%E1%BB%AD-d%E1%BB%A5ng-input-chu%E1%BA%A9n\">Không sử dụng input chuẩn</a></li>\n<li><a href=\"#d%C3%B9ng-placeholder-gi%E1%BA%A3\">Dùng placeholder giả</a></li>\n<li><a href=\"#t%E1%BB%B1-%C4%91%E1%BB%99ng-copy-shipping-address-v%C3%A0o-billing-address\">Tự động copy shipping address vào billing address</a></li>\n</ul>\n</li>\n<li><a href=\"#validate-form-v%E1%BB%9Bi-html5\">Validate form với HTML5</a></li>\n</ul>\n<!-- /TOC -->\n<p>Thiết kế form cần tránh việc bắt user làm tới làm lui, đòi hỏi nhiều thông tin hơn cần thiết, hay cảm giác bị lạc lối giữa một cái form quá dài quá nhiều step</p>\n<p>Nguyên tắc chung</p>\n<ul>\n<li>Bật autofill trên form đề trình duyệt của user có thể tự điền các field đã biết, hiển thị lại những giá trị mà user đã nhập</li>\n<li>Label rõ ràng để user biết mình đang nhập cái gì, ở đâu.</li>\n</ul>\n<h2 id=\"tránh-lặp-lại\"><a href=\"#tr%C3%A1nh-l%E1%BA%B7p-l%E1%BA%A1i\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tránh lặp lại</h2>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/input/forms/imgs/forms-multipart-good.png\" alt=\"Một số gợi ý khi thiết kế form\"></p>\n<p>Ví dụ trên trang đăng ký nếu chúng ta đã cho user nhập first name và last name, có thể cho generate tự động ra một giá trị cho field nickname để đăng nhập. Hoặc trường hợp trên trang checkout, cho phép lưu lại địa chỉ giao hàng cho lần checkout sau.</p>\n<p>Để tiết kiệm thời gian tiền bạc cho user, khai thác tính năng <strong>autocomplete</strong> có sẵn của trình duyệt.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">autocomplete</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">autocomplete</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>address-line1<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre>\n<p>Ta muốn autocomplete giá trị gì thì báo với trình duyệt luôn, hoặc dùng giá trị <code>name='giá trị name chuẩn'</code>, hoặc <code>autocomplete='giá trị autocomplete chuẩn'</code></p>\n<p>Chuẩn này đã được <a href=\"https://html.spec.whatwg.org/multipage/forms.html#autofill\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">WHATWG HTML Standard.</a> đặt ra ko phải mình</p>\n<table>\n<thead>\n<tr>\n<th>Trường</th>\n<th>Giá trị name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Name</td>\n<td>name fname mname lname</td>\n</tr>\n<tr>\n<td>Email</td>\n<td>email</td>\n</tr>\n<tr>\n<td>Address</td>\n<td>address city region province state zip zip2 postal country</td>\n</tr>\n<tr>\n<td>Phone</td>\n<td>phone mobile country-code area-code exchange suffix ext</td>\n</tr>\n<tr>\n<td>Credit Card</td>\n<td>ccname cardnumber cvc ccmonth ccyear exp-date card-type</td>\n</tr>\n<tr>\n<td>Usernames</td>\n<td>username</td>\n</tr>\n<tr>\n<td>Passwords</td>\n<td>password</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"tôi-đang-đứng-ở-bước-nào\"><a href=\"#t%C3%B4i-%C4%91ang-%C4%91%E1%BB%A9ng-%E1%BB%9F-b%C6%B0%E1%BB%9Bc-n%C3%A0o\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tôi đang đứng ở bước nào?</h2>\n<p>Với các form được chia làm nhiều step trước khi submit, một thanh trạng thái cho user biết mình đang đến bước nào là bắt buộc.</p>\n<p><img src=\"https://designmodo.com/wp-content/uploads/2016/10/Checkout-Form.jpg\" alt=\"Một số gợi ý khi thiết kế form\"></p>\n<h2 id=\"giá-trị-ngày-tháng\"><a href=\"#gi%C3%A1-tr%E1%BB%8B-ng%C3%A0y-th%C3%A1ng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Giá trị ngày tháng</h2>\n<p>Trường ngày tháng để user chọn từ lịch, không tách ra thành các input độc lập dạng ngày-tháng-năm, user không cần phải mở một ứng dụng calendar khác đó trên điện thoại, trên máy tính để kiểm tra ngày trước khi chọn.</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/input/forms/imgs/forms-calendar-good.png\" alt=\"Một số gợi ý khi thiết kế form\"></p>\n<h2 id=\"sử-dụng-input-type-phù-hợp\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-input-type-ph%C3%B9-h%E1%BB%A3p\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sử dụng input type phù hợp</h2>\n<p>HTML5 hỗ trợ khá nhiều kiểu input, khi cung cấp giá trị <code>type</code> rõ ràng cho input, trình duyệt sẽ biết và hiển thị kiểu keyboard nào cho phù hợp trên điện thoại, cũng như có những validation tích hợp sẵn</p>\n<h3 id=\"typeurl\"><a href=\"#typeurl\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>type='url'</code></h3>\n<p>Chuỗi bắt đầu phải là '<a href=\"http://&#x27;\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://'</a>, 'ftp://', 'mailto:'</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/input/forms/imgs/url-ios.png\" alt=\"Một số gợi ý khi thiết kế form\"></p>\n<h3 id=\"typetel\"><a href=\"#typetel\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>type='tel'</code></h3>\n<p>Ko có ép một syntax hay validation nào cả, giúp hiện thì bàn phím điện thoại trên mobile</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/input/forms/imgs/tel-android.png\" alt=\"ko có ép một syntax hay validation nào cả, giúp hiện thì bàn phím điện thoại trên mobile\"></p>\n<h3 id=\"typeemail\"><a href=\"#typeemail\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>type='email'</code></h3>\n<p>Trên mobile nó sẽ hiện sẵn phím @</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/input/forms/imgs/email-android.png\" alt=\"Một số gợi ý khi thiết kế form\"></p>\n<h3 id=\"typesearch\"><a href=\"#typesearch\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>type='search'</code></h3>\n<p>Bàn phím search chuẩn trên từng thiết bị</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/input/forms/imgs/plain-ios.png\" alt=\"Một số gợi ý khi thiết kế form\"></p>\n<h3 id=\"typenumber\"><a href=\"#typenumber\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>type='number'</code></h3>\n<p>iOS yêu cầu có thêm <code>pattern='\\d*'</code> để hiển thị bàn phím số</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/input/forms/imgs/number-android.png\" alt=\"Một số gợi ý khi thiết kế form\"></p>\n<h3 id=\"typerange\"><a href=\"#typerange\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>type='range'</code></h3>\n<p>Hiển thị kiếu slider control</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/input/forms/imgs/range-ios.png\" alt=\"Một số gợi ý khi thiết kế form\"></p>\n<h3 id=\"typedatetime-local\"><a href=\"#typedatetime-local\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>type='datetime-local'</code></h3>\n<p>Giá trị ngày tháng có timezone</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/input/forms/imgs/datetime-local-ios.png\" alt=\"Một số gợi ý khi thiết kế form\"></p>\n<h3 id=\"typedatetime\"><a href=\"#typedatetime\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>type='datetime'</code></h3>\n<p>Giá trị ngày tháng ko có timezone</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/input/forms/imgs/date-android.png\" alt=\"Một số gợi ý khi thiết kế form\"></p>\n<h3 id=\"typetime\"><a href=\"#typetime\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>type='time'</code></h3>\n<p>Chỉ có giá trị giờ</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/input/forms/imgs/time-ios.png\" alt=\"Một số gợi ý khi thiết kế form\"></p>\n<h3 id=\"typeweek\"><a href=\"#typeweek\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>type='week'</code></h3>\n<p>Chỉ có giá trị tuần</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/input/forms/imgs/week-android.png\" alt=\"Một số gợi ý khi thiết kế form\"></p>\n<h3 id=\"typemonth\"><a href=\"#typemonth\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>type='month'</code></h3>\n<p>Chỉ có giá trị tháng</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/input/forms/imgs/month-ios.png\" alt=\"Một số gợi ý khi thiết kế form\"></p>\n<h3 id=\"typecolor\"><a href=\"#typecolor\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>type='color'</code></h3>\n<p>Bảng màu để chọn</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/input/forms/imgs/color-android.png\" alt=\"Một số gợi ý khi thiết kế form\"></p>\n<h2 id=\"gợi-ý-thông-qua-trường-datalist\"><a href=\"#g%E1%BB%A3i-%C3%BD-th%C3%B4ng-qua-tr%C6%B0%E1%BB%9Dng-datalist\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Gợi ý thông qua trường <code>datalist</code></h2>\n<p><code>&#x3C;datalist /></code> là element cho phép chúng ta cung cấp các giá trị <strong>gợi ý</strong> với một <code>&#x3C;input /></code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>frmFavChocolate<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Favorite Type of Chocolate<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>fav-choc<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>frmFavChocolate<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">list</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>chocType<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>datalist</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>chocType<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>white<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>milk<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dark<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>datalist</span><span class=\"token punctuation\">></span></span></code></pre>\n<div class=\"note\">User không bắt buộc phải chọn các giá trị trong datalist, chỉ là gợi ý thích thì chọn</div>\n<p><a href=\"https://googlesamples.github.io/web-fundamentals/fundamentals/design-and-ux/input/forms/order.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Xem một form đã hiện thực</a></p>\n<h2 id=\"auto-focus-khi-cần-thiết\"><a href=\"#auto-focus-khi-c%E1%BA%A7n-thi%E1%BA%BFt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>auto focus khi cần thiết</h2>\n<p>Trên thẻ input, nếu muốn input được focus ngay lập tức khi vừa vào trang, như login, focus vào ô username. Thuộc tính <code>autofocus</code> này sẽ tự động bị ignore trên mobile để tránh xuất hiện bàn phím ko cần thiết.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">autofocus</span> <span class=\"token attr-name\">...</span> <span class=\"token punctuation\">/></span></span></code></pre>\n<h2 id=\"hãy-tin-vào-chrome\"><a href=\"#h%C3%A3y-tin-v%C3%A0o-chrome\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Hãy tin vào Chrome</h2>\n<p>Rất nhiều trường hợp vì customize theo ý design mà tính năng autofill của Chrome không còn chạy đúng, nguyên nhân có thể là</p>\n<h3 id=\"không-sử-dụng-input-chuẩn\"><a href=\"#kh%C3%B4ng-s%E1%BB%AD-d%E1%BB%A5ng-input-chu%E1%BA%A9n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Không sử dụng input chuẩn</h3>\n<p>Lỗi thường thấy khi phải customize cái dropdown theo design mà không thể dùng thẻ <code>&#x3C;select /></code></p>\n<h3 id=\"dùng-placeholder-giả\"><a href=\"#d%C3%B9ng-placeholder-gi%E1%BA%A3\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Dùng placeholder giả</h3>\n<p>Placeholder giả là gì? Thay vì dùng attribute placeholder, dùng <code>value=\"First Name\"</code> rồi viết javascript để khi focus xóa giá trị này đi.</p>\n<h3 id=\"tự-động-copy-shipping-address-vào-billing-address\"><a href=\"#t%E1%BB%B1-%C4%91%E1%BB%99ng-copy-shipping-address-v%C3%A0o-billing-address\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tự động copy shipping address vào billing address</h3>\n<p>Cơ bản thì Autofill của Chrome KO thể chạy được nữa nếu chúng ta cho copy dữ liệu từ shipping address qua billing address bằng javascript</p>\n<h2 id=\"validate-form-với-html5\"><a href=\"#validate-form-v%E1%BB%9Bi-html5\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Validate form với HTML5</h2>\n<p>Bài này đọc lại <a href=\"/2018-11-02-validate-form-voi-html-5\">ở đây</a></p>\n<p><a href=\"https://googlesamples.github.io/web-fundamentals/fundamentals/design-and-ux/input/forms/order.html\" target=\"_blank\" rel=\"noopener noreferrer\">Sample</a></p>\n<p><a href=\"https://developers.google.com/web/fundamentals/design-and-ux/input/forms/\" target=\"_blank\" rel=\"noopener noreferrer\">Create Amazing Forms</a></p>\n<p><a href=\"https://developers.google.com/web/updates/2015/06/checkout-faster-with-autofill\" target=\"_blank\" rel=\"noopener noreferrer\">Help users checkout faster with Autofill</a></p>\n","cover_image":""}},{"node":{"id":"40f4269c65301f97776bcc60476d95c7","title":"Validate form với HTML5","path":"/validate-form-voi-htm-l5/","date":"2018-11-02","timeToRead":4,"desc":"Bài này nằm trong loạt bài chuẩn kiến thức để đi thi web mobile specialist của google. Một số cách validate bằng HTML, sử dụng API kết hợp với javascript để custom lại theo ý muốn","content":"<p>Chúng ta cùng điểm qua các attribute mà HTML5 cung cấp để validate</p>\n<!-- TOC -->\n<ul>\n<li><a href=\"#type\">type</a></li>\n<li><a href=\"#required\">required</a></li>\n<li><a href=\"#minlength-maxlength-min-max\">minlength, maxlength, min, max</a></li>\n<li><a href=\"#pattern\">pattern</a></li>\n<li><a href=\"#g%E1%BB%A3i-%C3%BD\">Gợi ý</a></li>\n<li><a href=\"#customize-c%C3%A2u-hi%E1%BB%83n-th%E1%BB%8B-l%E1%BB%97i\">Customize câu hiển thị lỗi</a></li>\n<li><a href=\"#demo\">Demo</a></li>\n<li><a href=\"#t%C3%A0i-li%E1%BB%87u-tham-kh%E1%BA%A3o\">Tài liệu tham khảo</a></li>\n</ul>\n<!-- /TOC -->\n<h1 id=\"type\"><a href=\"#type\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>type</h1>\n<p>Ngoài giá trị <code>text</code>, chúng ta sẽ có thêm</p>\n<ul>\n<li><code>email</code>: chỉ cho phép nhập địa chỉ email</li>\n<li><code>number</code>: chỉ cho phép nhập số</li>\n<li><code>url</code>: chỉ cho phép nhập dạng đường dẫn url</li>\n<li><code>tel</code>: <strong>không nên xài</strong>, vì mỗi nước của một kiểu format số điện thoại riêng</li>\n</ul>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>your_email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>your_money<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>number<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>your_website<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>Gửi<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre>\n<p><img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2014/06/1401959773image-1.png\" alt=\"Validate form với HTML5\"></p>\n<h1 id=\"required\"><a href=\"#required\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>required</h1>\n<p>Một attribute đơn giản nhất, truyền vào một giá trị <code>boolean</code>, bắt buộc user phải nhập giá trị nếu đang set <code>true</code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>choose<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Cafe hay Trà Đá?<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>choose<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>i_like<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">required</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>Gửi<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Dùng CSS selector <code>:valid</code>, <code>:invalid</code> để format cho element</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">input<span class=\"token pseudo-class\">:invalid</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token unit\">px</span> solid <span class=\"token color\">red</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">input<span class=\"token pseudo-class\">:valid</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token unit\">px</span> solid <span class=\"token color\">black</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<h1 id=\"minlength-maxlength-min-max\"><a href=\"#minlength-maxlength-min-max\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>minlength, maxlength, min, max</h1>\n<p>Với <code>&#x3C;input type=\"number\"/></code> chúng ta dùng <code>min</code> và <code>max</code> để đặt ràng buộc khoảng giá trị, các <code>&#x3C;input/></code>, <code>&#x3C;textarea/></code> còn lại dùng <code>minlength</code> và <code>maxlength</code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>choose<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>từ 3 đến 6 ký tự<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>choose<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>i_like<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">required</span> <span class=\"token attr-name\">minlength</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">maxlength</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>6<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>number<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Từ 1 đến 10<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>number<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>number<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>amount<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">min</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">max</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>Gửi<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>CSS selector cho giá trị của element <code>:in-range</code>, <code>:out-of-range</code></p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">input<span class=\"token pseudo-class\">:out-of-range</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token unit\">px</span> solid <span class=\"token color\">red</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">input<span class=\"token pseudo-class\">:in-range</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token unit\">px</span> solid <span class=\"token color\">black</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<h1 id=\"pattern\"><a href=\"#pattern\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>pattern</h1>\n<p>Truyền vào một <a href=\"/2018-08-05-huong-dan-lam-viec-voi-javascript-regular-expressions\">regular expression</a>, chỉ có trên <code>&#x3C;input/></code>, <strong>không sử dụng được với <code>&#x3C;textarea/></code></strong></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>choose<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Bạn chỉ có thể nhập \"cherry\" hoặc \"banana\"<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>choose<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>i_like<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">required</span> <span class=\"token attr-name\">pattern</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>banana|cherry<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>Gửi<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Ví dụ một số regular expression hay xài</p>\n<p>Số điện thoại Việt Nam</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n  <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">pattern</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>(\\+84|0)\\d{9,10}<span class=\"token punctuation\">\"</span></span> \n<span class=\"token punctuation\">/></span></span></code></pre>\n<p>Chỉ gồm số và chữ</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n  <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">pattern</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>[a-zA-Z0-9]+<span class=\"token punctuation\">\"</span></span> \n<span class=\"token punctuation\">></span></span></code></pre>\n<p>Giá trị Hex Color như <code>#3b5998</code> hoặc <code>#000</code>.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n  <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">pattern</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>^#+([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">></span></span></code></pre>\n<h1 id=\"gợi-ý\"><a href=\"#g%E1%BB%A3i-%C3%BD\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Gợi ý</h1>\n<p>Sử dụng <code>title</code> để hiển thị một tooltip cho user biết chúng ta muốn user nhập vào giá trị gì</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n  <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>phone<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">pattern</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>(\\+84|0)\\d{9,10}<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Nhập số điện thoại từ 10 đến 11 số<span class=\"token punctuation\">\"</span></span> \n<span class=\"token punctuation\">/></span></span></code></pre>\n<p><img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2014/06/1401959770image-2.png\" alt=\"Validate form với HTML5\"></p>\n<h1 id=\"customize-câu-hiển-thị-lỗi\"><a href=\"#customize-c%C3%A2u-hi%E1%BB%83n-th%E1%BB%8B-l%E1%BB%97i\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Customize câu hiển thị lỗi</h1>\n<p>Khi element invalid, nó sẽ hiện một câu thông báo kèm theo trên element, cái này phụ thuộc vào từng trình duyệt, không thể chỉnh lại bằng CSS, trình duyệt đang set ngôn ngữ gì thì nó hiển thị câu lỗi bằng ngôn ngữ đó, không đi theo ngôn ngữ khai báo của trang web.</p>\n<p>Để thay đổi nội dung của câu thông báo, chúng ta buộc phải dùng javascript</p>\n<p>Khá nhiều trình duyệt hiện tại cung cấp API để làm việc với validation, để đối phó với các trình duyệt cũ thì tất nhiên chúng ta dùng đến polyfill như <a href=\"https://hyperform.js.org/\" target=\"_blank\" rel=\"noopener noreferrer\">Hyperform</a> </p>\n<p>Chúng ta cùng làm thử một custom error.</p>\n<p>Đầu tiên là html</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">novalidate</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mail<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span>Vui lòng nhập địa chỉ email:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mail<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mail<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>error<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">aria-live</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>polite<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>Gửi<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Chúng ta khai báo <code>novalidate</code> để tắt validate của trình duyệt.</p>\n<p>Javascript sử dụng API của trình duyệt để tương tác với validate của HTML5</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> form  <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'form'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> email <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mail'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> error <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.error'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nemail<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"input\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// kiểm tra khi user bắt đầu nhập</span>\n  <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">.</span><span class=\"token property-access\">validity</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">valid</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// nếu valid, remove</span>\n    error<span class=\"token punctuation\">.</span><span class=\"token property-access\">innerHTML</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span> \n    error<span class=\"token punctuation\">.</span><span class=\"token property-access\">className</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"error\"</span><span class=\"token punctuation\">;</span> \n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nform<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"submit\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// kiểm tra khi user click submit.</span>\n  <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>email<span class=\"token punctuation\">.</span><span class=\"token property-access\">validity</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">valid</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    error<span class=\"token punctuation\">.</span><span class=\"token property-access\">innerHTML</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Baby à, cho anh địa chỉ email chứ\"</span><span class=\"token punctuation\">;</span>\n    error<span class=\"token punctuation\">.</span><span class=\"token property-access\">className</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"error active\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// chặn việc submit form</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h1 id=\"demo\"><a href=\"#demo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Demo</h1>\n<iframe width=\"100%\" height=\"300\" src=\"//jsfiddle.net/luubinhan/qsk5xp9y/18/embedded/\" allowfullscreen=\"allowfullscreen\" allowpaymentrequest frameborder=\"0\"></iframe>\n<h1 id=\"tài-liệu-tham-khảo\"><a href=\"#t%C3%A0i-li%E1%BB%87u-tham-kh%E1%BA%A3o\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tài liệu tham khảo</h1>\n<p><a href=\"https://www.sitepoint.com/client-side-form-validation-html5/\" target=\"_blank\" rel=\"noopener noreferrer\">Client-Side Form Validation with HTML5</a></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Form_validation\" target=\"_blank\" rel=\"noopener noreferrer\">Form data validation</a></p>\n","cover_image":""}},{"node":{"id":"0da94706a1e6b0e733fc6085a9118cc2","title":"Một số nguyên tắc với hình ảnh responsive","path":"/mot-so-nguyen-tac-voi-hinh-anh-responsive/","date":"2018-10-25","timeToRead":4,"desc":"Nếu bạn đã quên hoặc chưa biết, hình tiêu tốn hơn 50% dung lượng tải trang. Responsive image tuy dễ nhưng không nên xem nhẹ","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#m%E1%BB%99t-s%E1%BB%91-nguy%C3%AAn-t%E1%BA%AFc-chung\">Một số nguyên tắc chung</a></li>\n<li><a href=\"#k%C3%ADch-th%C6%B0%E1%BB%9Bc-ph%C3%B9-h%E1%BB%A3p\">Kích thước phù hợp</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-srcset\">Sử dụng <code>srcset</code></a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-th%E1%BA%BB-picture-\">Sử dụng thẻ <code>&#x3C;picture /></code></a></li>\n<li><a href=\"#thu%E1%BB%99c-t%C3%ADnh-sizes\">Thuộc tính <code>sizes</code></a></li>\n<li><a href=\"#tr%C6%B0%E1%BB%9Dng-h%E1%BB%A3p-%C4%91%E1%BA%B7c-bi%E1%BB%87t-%E1%BA%A3nh-s%E1%BA%A3n-ph%E1%BA%A9m\">Trường hợp đặc biệt: ảnh sản phẩm</a></li>\n<li>\n<p><a href=\"#m%E1%BB%99t-s%E1%BB%91-k%E1%BB%B9-thu%E1%BA%ADt-kh%C3%A1c\">Một số kỹ thuật khác</a></p>\n<ul>\n<li><a href=\"#n%C3%A9n-%E1%BA%A3nh\">Nén ảnh</a></li>\n<li><a href=\"#d%C3%B9ng-javascript\">Dùng javascript</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-lo%E1%BA%A1i-%E1%BA%A3nh-ph%C3%B9-h%E1%BB%A3p\">Sử dụng loại ảnh phù hợp</a></li>\n</ul>\n</li>\n</ul>\n<!-- /TOC -->\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/responsive/img/art-direction.png\" alt=\"Một số nguyên tắc với hình ảnh responsive\"></p>\n<p>Crop, thay đổi vị trí đặt hình, hoặc thậm chí là thay luôn một hình khác trên từng màn hình, miễn sao nó hiển thị đúng ý đồ của designer, như trong hình ví dụ, hình người chèo thuyền phải nằm giữa</p>\n<h1 id=\"một-số-nguyên-tắc-chung\"><a href=\"#m%E1%BB%99t-s%E1%BB%91-nguy%C3%AAn-t%E1%BA%AFc-chung\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Một số nguyên tắc chung</h1>\n<ul>\n<li>Luôn sử dụng kích thước hình phù hợp</li>\n<li>Sử dụng thẻ <code>&#x3C;picture ></code> khi muốn chỉ định từng hình cũ thể cho từng màn hình.</li>\n<li>Sử dụng <code>srcset</code> trong thẻ <code>&#x3C;img /></code> để báo với trình duyệt chọn hình tốt nhất trong từng trường hợp</li>\n<li>Nếu chỉ có 1 hoặc 2 hình, và nó chỉ được sử dụng ở một trang, sử dụng loại ảnh phù hợp</li>\n</ul>\n<h1 id=\"kích-thước-phù-hợp\"><a href=\"#k%C3%ADch-th%C6%B0%E1%BB%9Bc-ph%C3%B9-h%E1%BB%A3p\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Kích thước phù hợp</h1>\n<p>Chỉ định đơn vị <code>width</code> của hình phù hợp, tránh để nó lớn viewport.</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">img<span class=\"token punctuation\">,</span> embed<span class=\"token punctuation\">,</span> object<span class=\"token punctuation\">,</span> video</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token unit\">%</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<h1 id=\"sử-dụng-srcset\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-srcset\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sử dụng <code>srcset</code></h1>\n<p>Với thuộc tính <code>srcset</code>, trình duyệt có thể quyết định load hình nào tùy theo thiết bị, ví dụ 2x trên màn hình retina, hoặc 1x trên màn hình retina khi mạng chậm</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>photo.png<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">srcset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>photo@2x.png 2x<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre>\n<h1 id=\"sử-dụng-thẻ-picture-\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-th%E1%BA%BB-picture-\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sử dụng thẻ <code>&#x3C;picture /></code></h1>\n<p>Thẻ <code>&#x3C;picture /></code> sẽ cho khai báo nhiều hình khác nhau ứng với từng điều kiện như: kích thước, độ phân giải, chiều đứng hay ngang.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>picture</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">media</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>(min-width: 800px)<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">srcset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>head.jpg, head-2x.jpg 2x<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">media</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>(min-width: 450px)<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">srcset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>head-small.jpg, head-small-2x.jpg 2x<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>head-fb.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">srcset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>head-fb-2x.jpg 2x<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>a head carved out of wood<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>picture</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Xài thử <a href=\"https://googlesamples.github.io/web-fundamentals/fundamentals/design-and-ux/responsive/media.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://googlesamples.github.io/web-fundamentals/fundamentals/design-and-ux/responsive/media.html</a></p>\n<h1 id=\"thuộc-tính-sizes\"><a href=\"#thu%E1%BB%99c-t%C3%ADnh-sizes\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Thuộc tính <code>sizes</code></h1>\n<p>Đọc thêm bài <a href=\"/2018-07-30-huong-dan-tam-quan-trong-cua-thuoc-tinh-sizes-trong-the-img\">Tầm quan trọng của thuộc tính sizes trong thẻ img</a></p>\n<h1 id=\"trường-hợp-đặc-biệt-ảnh-sản-phẩm\"><a href=\"#tr%C6%B0%E1%BB%9Dng-h%E1%BB%A3p-%C4%91%E1%BA%B7c-bi%E1%BB%87t-%E1%BA%A3nh-s%E1%BA%A3n-ph%E1%BA%A9m\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Trường hợp đặc biệt: ảnh sản phẩm</h1>\n<p>Khách hàng luôn thích xem, sờ, ngắm thật kỹ sản phẩm muốn mua, luôn cho khách hàng ảnh thật chi tiết, to nhất, chất lượng nhất có thể, để khách hàng có thể zoom vào mà soi</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/responsive/img/sw-make-images-expandable-good.png\" alt=\"Một số nguyên tắc với hình ảnh responsive\"></p>\n<h1 id=\"một-số-kỹ-thuật-khác\"><a href=\"#m%E1%BB%99t-s%E1%BB%91-k%E1%BB%B9-thu%E1%BA%ADt-kh%C3%A1c\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Một số kỹ thuật khác</h1>\n<h2 id=\"nén-ảnh\"><a href=\"#n%C3%A9n-%E1%BA%A3nh\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Nén ảnh</h2>\n<p><a href=\"https://www.html5rocks.com/en/mobile/high-dpi/#toc-tech-overview\" rel=\"noopener noreferrer\">Kỹ thuật nén ảnh</a> này, với mức độ nén phù hợp, định dạng của ảnh gốc, chất lượng ảnh sau nén không thay đổi, nhưng kích thước giảm khá nhiều.</p>\n<h2 id=\"dùng-javascript\"><a href=\"#d%C3%B9ng-javascript\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Dùng javascript</h2>\n<p>Kiểm tra độ phân giả của màn hình bằng <code>window.devicePixelRatio</code>, và thông tin mạng <code>navigator.connection</code> rồi quyết định load hình nào.</p>\n<p>Nhược điểm của cách này là phải đợi javascript chạy xong mới load hình, bị delay một chút.</p>\n<h2 id=\"sử-dụng-loại-ảnh-phù-hợp\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-lo%E1%BA%A1i-%E1%BA%A3nh-ph%C3%B9-h%E1%BB%A3p\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sử dụng loại ảnh phù hợp</h2>\n<p>Nếu được thì xài SVG vì dung lượng nhỏ mà có võ, có thể nén bằng <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"https://www.sarasoueidan.com/blog/svgo-tools/\">công cụ này</a></p>\n<p><img src=\"https://developers.google.com/web/fundamentals/design-and-ux/responsive/img/html5.svg\" alt=\"Một số nguyên tắc với hình ảnh responsive\"></p>\n<p>Sử dụng Data URI để encode Base64 file hình thành <code>string</code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>data:image/svg+xml;base64,[data]<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token comment\">&lt;!-- Ví dụ --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiB\nBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW ...<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Để convert, thì có thể dùng <a href=\"http://jpillora.com/base64-encoder/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">jpillora.com/base64-encoder</a></p>\n<p>string convert được cũng có thể xài với thuộc tính background trong css</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token class\">.element</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIi...<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Việc sử dụng background trong css có thể làm giảm số lượng HTTP request, bên cạnh đó là một số nhược điểm</p>\n<ul>\n<li>Trên mobile, Data URI hiển thị chậm hơn <code>&#x3C;img src=\"http://\" /></code></li>\n<li>Dảm số lượng request, nhưng tăng kích thước của request css</li>\n<li>Data URI không cache được</li>\n<li>IE8 không hổ trợ</li>\n<li>HTTP/2 giảm số lượng request không còn cần thiết</li>\n</ul>\n<p>Trong CSS có một thuộc tính để load hình như thẻ <code>&#x3C;picture /></code> là <code>image-set</code> (hiện tại hổ trợ bởi chrome và safari)</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token class\">.element</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>icon1x.png<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token function\">-webkit-image-set</span><span class=\"token punctuation\">(</span>  \n    <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>icon1x.png<span class=\"token punctuation\">)</span></span> <span class=\"token number\">1</span><span class=\"token unit\">x</span><span class=\"token punctuation\">,</span>  \n    <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>icon2x.png<span class=\"token punctuation\">)</span></span> <span class=\"token number\">2</span><span class=\"token unit\">x</span>  \n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n  <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token function\">image-set</span><span class=\"token punctuation\">(</span>\n    <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>icon1x.jpg<span class=\"token punctuation\">)</span></span> <span class=\"token number\">1</span><span class=\"token unit\">x</span><span class=\"token punctuation\">,</span>\n    <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>icon2x.jpg<span class=\"token punctuation\">)</span></span> <span class=\"token number\">2</span><span class=\"token unit\">x</span>  \n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Với độ phân giải 2x, 1x</p>\n<pre class=\"language-css\"><code class=\"language-css\">@media <span class=\"token punctuation\">(</span><span class=\"token property\">min-resolution</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token unit\">dppx</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n<span class=\"token punctuation\">(</span><span class=\"token property\">-webkit-min-device-pixel-ratio</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">/* Dành riêng cho Safari và Android */</span> \n<span class=\"token punctuation\">{</span>\n  <span class=\"token selector\"><span class=\"token class\">.sample</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-size</span><span class=\"token punctuation\">:</span> contain<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>icon2x.png<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Các phương pháp như lựa chọn hình JPG, GIF, PNG, các phương pháp giảm kích thước file (mình hay dùng <a href=\"https://nikkhokkho.sourceforge.io/static.php?page=FileOptimizer\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">FileOptimizer</a>), <a href=\"https://www.w3schools.com/css/css_image_sprites.asp\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">image sprite</a>, <a href=\"https://css-tricks.com/native-lazy-loading/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">lazy load</a> khá phổ biến nên mình không đề cập ở đây.</p>\n<ul>\n  <li>\n    <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://responsiveimages.org/demos/\">\n      Demo\n    </a>\n  </li>\n  <li>\n    <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://developers.google.com/web/fundamentals/design-and-ux/responsive/images\">\n      Images\n    </a>\n  </li>\n</ul>\n","cover_image":""}},{"node":{"id":"3ad2e9e7003506e22a151e23675c3fe1","title":"Làm Progressive Web App cho người mới","path":"/lam-progressive-web-app-cho-nguoi-moi/","date":"2018-10-16","timeToRead":13,"desc":"Cùng mình đú trend, dựng một Progressive Web App theo chỉ dẫn của Google","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#gi%e1%bb%9bi-thi%e1%bb%87u\">Giới thiệu</a></li>\n<li><a href=\"#%c4%90%c3%a1nh-gi%c3%a1-b%e1%ba%b1ng-lighthouse\">Đánh giá bằng Lighthouse</a></li>\n<li><a href=\"#th%c3%aam-web-app-manifest\">Thêm web app manifest</a></li>\n<li>\n<p><a href=\"#offline-m%e1%bb%a9c-c%c4%83n-b%e1%ba%a3n\">Offline mức căn bản</a></p>\n<ul>\n<li><a href=\"#%c4%90%c4%83ng-k%c3%bd-service-worker\">Đăng ký service worker</a></li>\n<li><a href=\"#x%e1%bb%ad-l%c3%bd-network-request-b%e1%bb%8b-fail\">Xử lý network request bị fail</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#service-worker-life-cycle\">Service worker life cycle</a></p>\n<ul>\n<li><a href=\"#install\"><code>install</code></a></li>\n<li><a href=\"#activate\"><code>activate</code></a></li>\n<li><a href=\"#fetch\"><code>fetch</code></a></li>\n</ul>\n</li>\n<li><a href=\"#offline-m%e1%bb%a9c-cao-c%e1%ba%a5p-h%c6%a1n-m%e1%bb%99t-ch%c3%bat\">Offline mức cao cấp hơn một chút</a></li>\n<li><a href=\"#th%c3%aam-ph%e1%ba%a7n-c%c3%a0i-%c4%91%e1%ba%b7t\">Thêm phần cài đặt</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"giới-thiệu\"><a href=\"#gi%E1%BB%9Bi-thi%E1%BB%87u\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Giới thiệu</h2>\n<p>Trong lúc lầm Progressive Web App (PWA), chúng ta cần nhớ những điều sau</p>\n<ul>\n<li>Không quan trọng user đang dùng trình duyệt gì</li>\n<li>Hỗ trợ tốt trên nhiều loại thiết bị desktop, mobile, tablet bằng responsive</li>\n<li>Sử dụng service worker để có thể làm việc offline hoặc khi mạng chậm</li>\n<li>Có khả năng cài đặt, sử dụng web app manifest và sự kiện <code>beforeinstallprompt</code> để báo user biết có thể install</li>\n</ul>\n<p>Ứng dụng sẽ thực hành là trang dự báo thời tiết</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/img/95fe6f7fbeee5bb1.png\" alt=\"Ứng dụng thông báo thời tiết.\"></p>\n<p>Chúng ta sẽ tìm hiểu các vấn đề\nLàm sao để tạo và thêm file web app manifest\nCung cấp một trải nghiệm cơ bản khi không có mạng\nLàm sao để làm cho app có thể install\nBạn cần gì để follow tuts này</p>\n<ul>\n<li>Phiên bản mới nhất của Chrome</li>\n<li>Kiến thức căn bản HTML/CSS/Javascript và Chrome DevTools</li>\n<li>Đăng ký <a href=\"https://darksky.net/dev\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Dark Sky API</a> để có 1 API key, dữ liệu thời tiết sẽ do API này cung cấp</li>\n</ul>\n<p>Sao khi đã có 1 API key, chúng ta có thể kiểm tra xem nó có hoạt động hay không bằng cách mở URL này trên trình duyệt</p>\n<pre class=\"language-text\"><code class=\"language-text\">https://api.darksky.net/forecast/DARKSKY_API_KEY/40.7720232,-73.9732319</code></pre>\n<p><a href=\"https://github.com/googlecodelabs/your-first-pwapp/archive/master.zip\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Download Source code ví dụ</a></p>\n<p>Vì chúng ta sử dụng Glitch để làm, nên không cần download bộ source về làm gì</p>\n<ol>\n<li>Trước hết mở trang <a href=\"https://glitch.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://glitch.com/</a>, đăng ký 1 tài khoản trên đây</li>\n<li>Chọn <strong>New Project</strong>, sau đó chọn vào <strong>Clone from Git Repo</strong></li>\n<li>Paste đường dẫn <code>https://github.com/googlecodelabs/your-first-pwapp.git</code> vào trong hộp thoại popup rồi click OK</li>\n<li>Sau khi repo đã được load về, mở file <code>.env</code> lên và điền vào API key đã đăng ký</li>\n<li>Click vào nút <strong>Show</strong> > <strong>In a new window</strong> để xem kết quả, nó sẽ theo cấu trúc là &#x3C;tên project>.glitch.me</li>\n</ol>\n<h2 id=\"đánh-giá-bằng-lighthouse\"><a href=\"#%C4%91%C3%A1nh-gi%C3%A1-b%E1%BA%B1ng-lighthouse\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Đánh giá bằng Lighthouse</h2>\n<p>Trước tiên chúng ta đánh giá sơ bộ trang hiện tại bằng công cụ Lighthouse có sẵn của Chrome. Trên DevTool sẽ có một tab là Audit ở cuối. Nó sẽ cho kết quả đánh giá performance, accessibility, PWA và một số thứ linh tinh khác nữa</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/img/b112675caafccef0.png\" alt=\"Trước tiên chúng ta đánh giá sơ bộ trang hiện tại bằng công cụ Lighthouse có sẵn của Chrome.\"></p>\n<p>Để chạy đánh giá\n1. Mở DevTool lên, chọn vào <strong>Audits</strong> tab\n2. Dùng tất cả các thiết đặt mặc định nếu ko có ý kiến gì khác\n3. Click <strong>Run audit</strong>, đợi chút nó sẽ cho kết quả</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/img/af1a64a13725428e.png\" alt=\"Làm Progressive Web App cho người mới\"></p>\n<p>Chúng ta tập trung fix mấy cái bị báo đỏ</p>\n<h2 id=\"thêm-web-app-manifest\"><a href=\"#th%C3%AAm-web-app-manifest\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Thêm web app manifest</h2>\n<p>Nó là một file JSON cho phép chúng ta config một số thứ khi xuất hiện trên thiết bị của user</p>\n<ul>\n<li>Mở cửa sổ mới hay không <code>display</code></li>\n<li>Trang mặc định sẽ mở (nếu bạn không muốn là trang index) <code>start_url</code></li>\n<li>Icon sẽ hiển thị <code>icons</code></li>\n<li>Tên <code>short_name</code></li>\n<li>Splash screen <code>name</code>, <code>icons</code>, <code>colors</code></li>\n<li>Mở ngang hay dọc <code>orientation</code></li>\n<li>Tạo một file <code>public/manifest.json</code> rồi copy nội dung sau vào đó</li>\n</ul>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Weather\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"short_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Weather\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"icons\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/images/icons/icon-128x128.png\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"128x128\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/images/icons/icon-144x144.png\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"144x144\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/images/icons/icon-152x152.png\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"152x152\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/images/icons/icon-192x192.png\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"192x192\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/images/icons/icon-256x256.png\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"256x256\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token string\">\"src\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/images/icons/icon-512x512.png\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"sizes\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"512x512\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"image/png\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"start_url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/index.html\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"display\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"standalone\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"background_color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#3E4EB8\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"theme_color\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"#2F3BA2\"</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<blockquote>\n<p>Trình duyệt Chrome bắt buộc cung cấp ít nhất 2 icon kích thước 192x192px và 512x512px</p>\n</blockquote>\n<p>Bổ sung file này vào trong <code>public.index.html</code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>manifest<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/manifest.json<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Trên cửa sổ DevTools, chọn tab <strong>Application</strong> có thể kiểm tra file manifest đã load thành công chưa</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/img/c462743e1bc26958.png\" alt=\"Làm Progressive Web App cho người mới\"></p>\n<p>Trình duyệt Safari trên iOS chưa hỗ trợ file manifest này thì có thể bổ sung một số tag sau</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>apple-mobile-web-app-capable<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>yes<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>apple-mobile-web-app-status-bar-style<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>black<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>apple-mobile-web-app-title<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Weather PWA<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>apple-touch-icon<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/images/icons/icon-152x152.png<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Nếu cửa số Audit PWA có thông báo “Does not set an address-bar theme color”, chọn màu thanh address cho phù hợp với màu thương hiệu</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theme-color<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#2F3BA2<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre>\n<h2 id=\"offline-mức-căn-bản\"><a href=\"#offline-m%E1%BB%A9c-c%C4%83n-b%E1%BA%A3n\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Offline mức căn bản</h2>\n<p>Bạn có thể tắt mạng, sau đó mở trang google drive, bạn sẽ thấy vẫn xem được danh sách file, folder trong drive, tất nhiên không mở xem chỉnh sửa mấy file này được, nhưng vẫn đảm bảo có những trải nghiệm “không quá tệ”</p>\n<blockquote>\n<p>Service worker chỉ chạy trên trang web truy cập qua giao thức <code>https</code></p>\n</blockquote>\n<p>Những tính năng mà service worker cung cấp, câng nhắc nó như một dạng “nice-to-have”, đừng quá đặt nặng và xem service worker như đấng cứu thế, và cũng đừng chém xuyên lục địa về những tính năng siêu việt của service worker.</p>\n<h3 id=\"đăng-ký-service-worker\"><a href=\"#%C4%91%C4%83ng-k%C3%BD-service-worker\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Đăng ký service worker</h3>\n<p>public/index.html</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'serviceWorker'</span> <span class=\"token keyword\">in</span> <span class=\"token dom variable\">navigator</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'load'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token dom variable\">navigator</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">serviceWorker</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/service-worker.js'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">reg</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Service worker registered.'</span><span class=\"token punctuation\">,</span> reg<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Service worker có <code>scope</code> (phạm vi hoạt động) theo vị trí file, nghĩa là nếu nhét nó vào file rồi đưa file này trong thư mục con <code>scripts</code> nó sẽ không can thiệp được gì những đoạn script nằm ngoài thư mục gốc, nếu đặt ở thư mục gốc, toàn bộ thư mục con sẽ kế thừa được service worker đăng ký ở thư mục gốc</p>\n<p>Cache cái gì? Chúng ta có 1 file là <code>public/offline.html</code>, nếu không có mạng, chúng ta sẽ hiển thị file này, cache file này xuống trình duyệt là hợp lý.</p>\n<p><a href=\"https://github.com/googlecodelabs/your-first-pwapp/blob/master/public/service-worker.js#L23\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">public/service-worker.js</a></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">FILES_TO_CACHE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">'/offline.html'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span></code></pre>\n<p>Tiếp theo, trong sự kiện <code>install</code>, chúng ta đưa file này vào danh sách muốn cache</p>\n<p><a href=\"https://github.com/googlecodelabs/your-first-pwapp/blob/master/public/service-worker.js#L29\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">public/service-worker.js</a></p>\n<pre class=\"language-js\"><code class=\"language-js\">evt<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">waitUntil</span><span class=\"token punctuation\">(</span>\n  caches<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">open</span><span class=\"token punctuation\">(</span><span class=\"token constant\">CACHE_NAME</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cache</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[ServiceWorker] Pre-caching offline page'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword control-flow\">return</span> cache<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addAll</span><span class=\"token punctuation\">(</span><span class=\"token constant\">FILES_TO_CACHE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre>\n<blockquote>\n<p>Toàn bộ các sự kiện của service worker sẽ được để cập ở phần sau</p>\n</blockquote>\n<p>Mở DevTools, trên tab <strong>Application</strong>, chọn vào service worker để xem những đứa nào đã đăng ký thành công, như hình bên dưới chưa đăng ký gì cả</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/img/b3aa37b67863fd03.png\" alt=\"Chưa đăng ký service worker nào cả\"></p>\n<p>Với đoạn code đăng ký thành công, chúng ta có danh sách các service worker đã đăng ký được, không chỉ một mà có thể đăng ký nhiều nhé</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/img/69808e4bf3aee41b.png\" alt=\"Service worker đã đăng ký thành công\"></p>\n<p>Chổ <strong>status</strong>, cái nút tròn xanh xanh cho biết nó đang hoạt động, con số kế bên (34251) sẽ tự động tăng khi update service worker mới</p>\n<p>Trên sự kiện <code>activate</code>, chúng ta sẽ thực hiện xóa các cache trước đó</p>\n<p><a href=\"https://github.com/googlecodelabs/your-first-pwapp/blob/master/public/service-worker.js#L36\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">public/service-worker.js</a></p>\n<pre class=\"language-js\"><code class=\"language-js\">evt<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">waitUntil</span><span class=\"token punctuation\">(</span>\n    caches<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">keys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">keyList</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword control-flow\">return</span> <span class=\"token known-class-name class-name\">Promise</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">all</span><span class=\"token punctuation\">(</span>keyList<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">key</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>key <span class=\"token operator\">!==</span> <span class=\"token constant\">CACHE_NAME</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[ServiceWorker] Removing old cache'</span><span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword control-flow\">return</span> caches<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">delete</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Ấn F5 trên cửa sổ để refresh lại trang, con số bên cạnh status sẽ cho biết đã cập nhập mới</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/img/1db827d76bc0b359.png\" alt=\"Làm Progressive Web App cho người mới\"></p>\n<h3 id=\"xử-lý-network-request-bị-fail\"><a href=\"#x%E1%BB%AD-l%C3%BD-network-request-b%E1%BB%8B-fail\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Xử lý network request bị fail</h3>\n<p>Khi gọi <code>fetch</code>, service worker sẽ là thằng đứng giữa, nếu có mạng thì gọi lên server, còn không, thì gọi lại giá trị cache trước đó</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/img/6302ad4ba8460944.png\" alt=\"Làm Progressive Web App cho người mới\"></p>\n<p><a href=\"https://github.com/googlecodelabs/your-first-pwapp/blob/master/public/service-worker.js#L43\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">public/service-worker.js</a></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// thêm xử lý sự kiện fetch</span>\n<span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>evt<span class=\"token punctuation\">.</span><span class=\"token property-access\">request</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">mode</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'navigate'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nevt<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">respondWith</span><span class=\"token punctuation\">(</span>\n    <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>evt<span class=\"token punctuation\">.</span><span class=\"token property-access\">request</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token keyword control-flow\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword control-flow\">return</span> caches<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">open</span><span class=\"token punctuation\">(</span><span class=\"token constant\">CACHE_NAME</span><span class=\"token punctuation\">)</span>\n              <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cache</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword control-flow\">return</span> cache<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">match</span><span class=\"token punctuation\">(</span><span class=\"token string\">'offline.html'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Nó giống như khái niệm middleware, incepter của axios vậy thôi.</p>\n<blockquote>\n<p>Đưa đoạn <code>fetch</code> vào bên trong <code>evt.respondWith()</code> sẽ chặn trình duyệt tự ý đi mà không nói với ai, chúng ta sẽ dùng người trung gian để đi nói chuyện với thế giới. Nếu không sử dụng <code>evt.respondWith()</code> thì cache trước đó sẽ chẳng có tác dụng vì hết.</p>\n</blockquote>\n<p>Bên dưới của tab <strong>Application</strong>, sẽ cho biết những gì đã được cache lại bên dưới trình duyệt</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/img/c80a2a2e93c1c3ee.png\" alt=\"Làm Progressive Web App cho người mới\"></p>\n<p>Để giả lập tình trạng mất mạng, quay lại <strong>Service workers</strong>, click chọn vào checkbox <strong>Offline</strong>. F5 nếu thấy hình em gấu này là coi như thành công.</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/img/984b34dc2aa667a.png\" alt=\"Làm Progressive Web App cho người mới\"></p>\n<p>Trên cửa sổ <strong>Service Workers</strong> có một số option khác ngoài <strong>Offline</strong></p>\n<ul>\n<li><strong>Update on reload</strong> luôn luôn load lại service worker khi reload</li>\n<li><strong>Bypass for network</strong> bỏ qua service worker, chạy như không có</li>\n</ul>\n<p><img src=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/img/c7ac93904f473a91.png\" alt=\"Làm Progressive Web App cho người mới\"></p>\n<p>Trên điện thoại có thể dùng chế độ máy bay để tắt mạng và xem trang web nó sẽ ra hình thù thế nào.</p>\n<h2 id=\"service-worker-life-cycle\"><a href=\"#service-worker-life-cycle\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Service worker life cycle</h2>\n<h3 id=\"install\"><a href=\"#install\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>install</code></h3>\n<p>Sự kiện này sẽ bắn ra khi worker chạy, và chỉ được tạo ra một lần cho mỗi service worker</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/img/72ed77b1720512da.png\" alt=\"Làm Progressive Web App cho người mới\"></p>\n<p>Thông thường nó được sử dụng để cache mọi thứ cho app</p>\n<h3 id=\"activate\"><a href=\"#activate\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>activate</code></h3>\n<p>Sau khi <code>install</code>, mỗi lần nó khởi động nó sẽ bắn ra sự kiện <code>activate</code>, tức là bạn truy cập lại trang web đã vào trước đó. Được dùng để xóa cache trước đó</p>\n<h3 id=\"fetch\"><a href=\"#fetch\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>fetch</code></h3>\n<p>Sự kiện này cho phép chúng ta can thiệp vào mọi network request, trước khi ra khỏi <em>nhà</em>, phải trình báo ở đây</p>\n<p>Xem <a href=\"https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">các trường hợp sử dụng ở đây</a></p>\n<h2 id=\"offline-mức-cao-cấp-hơn-một-chút\"><a href=\"#offline-m%E1%BB%A9c-cao-c%E1%BA%A5p-h%C6%A1n-m%E1%BB%99t-ch%C3%BAt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Offline mức cao cấp hơn một chút</h2>\n<p>Ở trên chúng ta chỉ hiển một trang HTML, thông báo với user là mày đang offline, giờ chúng ta sẽ cho nó thấy cái như là có mạng luôn, giống như khi bạn vào Google Drive lúc ko có mạng đó.</p>\n<p>Quay lại với ví dụ, app chúng ta sử dụng object <code>caches</code> bên trong <code>window</code>, tuy nhiên không phải browser nào cũng hỗ trợ <code>window.caches</code>, chúng ta sẽ update hàm <code>getForecastFromCache</code> để rơi vào tình huống đó, vẫn ko ảnh hưởng gì tới app</p>\n<p><a href=\"https://github.com/googlecodelabs/your-first-pwapp/blob/master/public/scripts/app.js#L164\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">public/scripts/app.js</a></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// kiểm tra trước khi thực hiện những việc tiếp theo</span>\n<span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token string\">'caches'</span> <span class=\"token keyword\">in</span> <span class=\"token dom variable\">window</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">location</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">origin</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/forecast/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>coords<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword control-flow\">return</span> caches<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">match</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword control-flow\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword control-flow\">return</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token keyword control-flow\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error getting data from cache'</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword control-flow\">return</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Sửa tiếp <a href=\"https://github.com/googlecodelabs/your-first-pwapp/blob/master/public/scripts/app.js#L196\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">updateData()</a>\n<a href=\"https://github.com/googlecodelabs/your-first-pwapp/blob/master/public/scripts/app.js#L200\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">public/scripts/app.js</a></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">getForecastFromCache</span><span class=\"token punctuation\">(</span><span class=\"token dom variable\">location</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">geo</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">forecast</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">renderForecast</span><span class=\"token punctuation\">(</span>card<span class=\"token punctuation\">,</span> forecast<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>App sẽ gọi lấy dữ liệu từ 1 trong 2 hàm, thông qua cache hoặc <code>fetch</code> từ API. Với dữ liệu trả về, chúng ta sẽ xử lý để render lại giao diện nếu cần thiết</p>\n<p><a href=\"https://github.com/googlecodelabs/your-first-pwapp/blob/master/public/scripts/app.js#L85\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">public/scripts/app.js</a></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// nếu dữ liệu này đã mới rồi thì ko cần update làm gì</span>\n<span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>lastUpdated <span class=\"token operator\">>=</span> data<span class=\"token punctuation\">.</span><span class=\"token property-access\">currently</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">time</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Để App có <em>hình hài</em> lúc mất mạng như lúc có mạng, chúng ta phải cache lại toàn bộ những resource cần thiết khác, ngoài data get từ API</p>\n<p><a href=\"https://github.com/googlecodelabs/your-first-pwapp/blob/master/public/service-worker.js#L23\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">public/service-worker.js</a></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">FILES_TO_CACHE</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/index.html'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/scripts/app.js'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/scripts/install.js'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/scripts/luxon-1.11.4.js'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/styles/inline.css'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/add.svg'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/clear-day.svg'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/clear-night.svg'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/cloudy.svg'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/fog.svg'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/hail.svg'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/install.svg'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/partly-cloudy-day.svg'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/partly-cloudy-night.svg'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/rain.svg'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/refresh.svg'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/sleet.svg'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/snow.svg'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/thunderstorm.svg'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/tornado.svg'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'/images/wind.svg'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Vì danh sách mấy file này chúng ta thêm bằng tay, nếu sao này chúng ta thay đổi danh sách file này, phải sửa tay tên <code>CACHE_NAME</code>, ví dụ như từ  </p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">CACHE_NAME</span> <span class=\"token operator\">=</span> <span class=\"token string\">'static-cache-v2'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// đổi khi thay đổi danh sách file muốn cache</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">CACHE_NAME</span> <span class=\"token operator\">=</span> <span class=\"token string\">'static-cache-v3'</span><span class=\"token punctuation\">;</span></code></pre>\n<blockquote>\n<p>Nếu chỉ sửa mỗi cái tên file cũng phải đổi lại tên cache thì quá tốn công, chưa kể phía user phải down lại toàn bộ resource. <a href=\"https://developers.google.com/web/tools/workbox/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Workbox</a> do google phát triển sẽ giải quyết dùm chúng ta vấn đề này, trong quá trình build, chỉ những file nào đã thay đổi mới cần update phía người dùng</p>\n</blockquote>\n<p>Để đảm bảo trong quá trình <code>activate</code>, nó ko vô tình xóa dữ liệu của chúng ta, bên trong hàm bắt sự kiện <code>activate</code></p>\n<p>public/service-worker.js</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>key <span class=\"token operator\">!==</span> <span class=\"token constant\">CACHE_NAME</span> <span class=\"token operator\">&amp;&amp;</span> key <span class=\"token operator\">!==</span> <span class=\"token constant\">DATA_CACHE_NAME</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></code></pre>\n<p>Trong sự kiện <code>fetch</code> của service worker, chúng ta cũng thực hiện cập nhập, chúng ta luôn ưu tiên lấy data từ API trước, chỉ khi ko thể gọi được API, chúng ta mới lôi thằng cache ra xài</p>\n<p><a href=\"https://github.com/googlecodelabs/your-first-pwapp/blob/master/public/service-worker.js#L42\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">public/service-worker.js</a></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>evt<span class=\"token punctuation\">.</span><span class=\"token property-access\">request</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">url</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/forecast/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'[Service Worker] Fetch (data)'</span><span class=\"token punctuation\">,</span> evt<span class=\"token punctuation\">.</span><span class=\"token property-access\">request</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">url</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  evt<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">respondWith</span><span class=\"token punctuation\">(</span>\n      caches<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">open</span><span class=\"token punctuation\">(</span><span class=\"token constant\">DATA_CACHE_NAME</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cache</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword control-flow\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>evt<span class=\"token punctuation\">.</span><span class=\"token property-access\">request</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token comment\">// nếu lấy được data từ API, xài luôn và lưu xuống cache một bản</span>\n              <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token property-access\">status</span> <span class=\"token operator\">===</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                cache<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">put</span><span class=\"token punctuation\">(</span>evt<span class=\"token punctuation\">.</span><span class=\"token property-access\">request</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">url</span><span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token punctuation\">}</span>\n              <span class=\"token keyword control-flow\">return</span> response<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token keyword control-flow\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token comment\">// lỗi network thì đưa về cache</span>\n              <span class=\"token keyword control-flow\">return</span> cache<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">match</span><span class=\"token punctuation\">(</span>evt<span class=\"token punctuation\">.</span><span class=\"token property-access\">request</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword control-flow\">return</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nevt<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">respondWith</span><span class=\"token punctuation\">(</span>\n    caches<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">open</span><span class=\"token punctuation\">(</span><span class=\"token constant\">CACHE_NAME</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cache</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword control-flow\">return</span> cache<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">match</span><span class=\"token punctuation\">(</span>evt<span class=\"token punctuation\">.</span><span class=\"token property-access\">request</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword control-flow\">return</span> response <span class=\"token operator\">||</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>evt<span class=\"token punctuation\">.</span><span class=\"token property-access\">request</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Chúng ta bỏ phần điều kiện <code>evt.request.mode !== 'navigate'</code> vì không chỉ muốn lấy cache cho network request, chúng ta muốn cache mọi thứ từ HTML, CSS, script, image,...</p>\n<p>Giờ gần như chúng ta đã đưa hết những gì cần thiết xuống cache, kiểm tra xem kết quả trên DevTool đã cache thành công chưa nhé</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/img/731e91776cb6ef18.png\" alt=\"xem kết quả trên DevTool đã cache thành công chưa nhé\"></p>\n<h2 id=\"thêm-phần-cài-đặt\"><a href=\"#th%C3%AAm-ph%E1%BA%A7n-c%C3%A0i-%C4%91%E1%BA%B7t\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Thêm phần cài đặt</h2>\n<p>App thì phải cài đặt được chứ, chúng ta sẽ thêm một nút cho phép user “Cài đặt” vào màn hình điện thoại luôn</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/img/d824e1712e46a1cc.png\" alt=\"Làm Progressive Web App cho người mới\"></p>\n<p>User nào <em>thông minh</em> như mình thì sẽ biết cách vào menu của Chrome (hoặc Safari) rồi chọn <strong>Add to Homescreen</strong>, tuy nhiên đâu ai thông minh như mình đâu!</p>\n<p>Thêm file <code>install.js</code></p>\n<p><a href=\"https://github.com/googlecodelabs/your-first-pwapp/blob/master/public/index.html#L204\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">public/index.html</a></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/scripts/install.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Điều kiện để user có thể cài đặt được\n<img src=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/img/b921f5583fcddf03.png\" alt=\"Làm Progressive Web App cho người mới\"></p>\n<p>Khi mấy điều kiện này đã có đủ, Chrome sẽ bắn ra sự kiện <code>beforeinstallprompt</code>, chúng ta nắm lấy sự kiện này </p>\n<p><a href=\"https://github.com/googlecodelabs/your-first-pwapp/blob/master/public/scripts/install.js#L24\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">public/scripts/install.js</a></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'beforeinstallprompt'</span><span class=\"token punctuation\">,</span> saveBeforeInstallPromptEvent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Bên trong hàm <code>saveBeforeInstallPromptEvent</code> chúng ta cho hiện nút cài đặt, lưu tạm cái sự kiện <code>beforeinstallprompt</code> để dành xài</p>\n<p><a href=\"https://github.com/googlecodelabs/your-first-pwapp/blob/master/public/scripts/install.js#L34\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">public/scripts/install.js</a></p>\n<pre class=\"language-js\"><code class=\"language-js\">deferredInstallPrompt <span class=\"token operator\">=</span> evt<span class=\"token punctuation\">;</span>\ninstallButton<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">removeAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hidden'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Khi user click vào nút <strong>Install</strong>, chúng ta gọi lại thằng <code>beforeinstallprompt.prompt()</code>, rồi ẩn nút này đi</p>\n<p><a href=\"https://github.com/googlecodelabs/your-first-pwapp/blob/master/public/scripts/install.js#L45\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">public/scripts/install.js</a></p>\n<pre class=\"language-js\"><code class=\"language-js\">deferredInstallPrompt<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">prompt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nevt<span class=\"token punctuation\">.</span><span class=\"token property-access\">srcElement</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hidden'</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Cũng có thể bắt lấy lựa chọn mà user đã trả lời</p>\n<p><a href=\"https://github.com/googlecodelabs/your-first-pwapp/blob/master/public/scripts/install.js#L47\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">public/scripts/install.js</a></p>\n<pre class=\"language-js\"><code class=\"language-js\">deferredInstallPrompt<span class=\"token punctuation\">.</span><span class=\"token property-access\">userChoice</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">choice</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>choice<span class=\"token punctuation\">.</span><span class=\"token property-access\">outcome</span> <span class=\"token operator\">===</span> <span class=\"token string\">'accepted'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User accepted the A2HS prompt'</span><span class=\"token punctuation\">,</span> choice<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User dismissed the A2HS prompt'</span><span class=\"token punctuation\">,</span> choice<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      deferredInstallPrompt <span class=\"token operator\">=</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Khi thêm vào màn hình chính thành công, hay gọi hoa mỹ là Cài đặt thành công, trình duyệt bắn tiếp một sự kiện khác, chúng ta có thể túm lấy sự kiện này và thông báo gì đó nếu thích</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'appinstalled'</span><span class=\"token punctuation\">,</span> logAppInstalled<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<blockquote>\n<p>Tips: để CSS riêng cho trường hợp web đang chạy dạng “App” như vậy ta dùng <code>display-mode</code></p>\n</blockquote>\n<p>Code đầy đủ nè</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@media</span> all <span class=\"token keyword\">and</span> <span class=\"token punctuation\">(</span><span class=\"token property\">display-mode</span><span class=\"token punctuation\">:</span> standalone<span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">body</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token color\">yellow</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://developers.google.com/web/fundamentals/codelabs/your-first-pwapp/\">Your First Progressive Web App</a></p>\n","cover_image":""}},{"node":{"id":"a4038078aa9cfcdf6005b795c5abedb1","title":"Sử dụng aria trên site eCommerce, vấn đề accessibility cần quan tâm","path":"/su-dung-aria-tren-site-e-commerce-van-de-accessibility-can-quan-tam/","date":"2018-10-08","timeToRead":5,"desc":"Accessible là một thuật ngữ ít bạn làm web quan tâm, không có nghĩa là nó không tồn tại, cùng tham khảo những aria nào cần bổ sung cho trang ecommerce","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#aria-l%c3%a0-g%c3%ac\"><code>aria</code> là gì</a></li>\n<li>\n<p><a href=\"#m%e1%bb%99t-v%c3%a0i-aria-ph%e1%bb%95-bi%e1%ba%bfn\">Một vài <code>aria</code> phổ biến</a></p>\n<ul>\n<li><a href=\"#aria-label-v%c3%a0-aria-labelledby\"><code>aria-label</code> và <code>aria-labelledby</code></a></li>\n<li><a href=\"#role\">role</a></li>\n<li><a href=\"#aria-live\">aria-live</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#aria-owns\">aria-owns</a></p>\n<ul>\n<li><a href=\"#aria-activedescendant\">aria-activedescendant</a></li>\n<li><a href=\"#aria-pressed\">aria-pressed</a></li>\n<li><a href=\"#aria-hidden\">aria-hidden</a></li>\n</ul>\n</li>\n<li><a href=\"#th%c3%aam-aria-c%e1%ba%a7n-thi%e1%ba%bft-cho-trang-ecommerce\">Thêm <code>aria</code> cần thiết cho trang ecommerce</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"aria-là-gì\"><a href=\"#aria-l%C3%A0-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>aria</code> là gì</h2>\n<p>ARIA (Accessible Rich Internet Applications) là một attribute trên thẻ HTML, chúng ta gắn thẻ nào cũng được, nội dung này thông tin và tác dụng của thẻ element đó. Với user bình thường thì nó sẽ không có ý nghĩa mấy, nhưng với người sử dụng web thông qua một thiết bị đọc màn hình (cho những người khiếm khuyết) thì nó vô cùng quan trọng.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">aria-label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button click me<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Click Me<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"một-vài-aria-phổ-biến\"><a href=\"#m%E1%BB%99t-v%C3%A0i-aria-ph%E1%BB%95-bi%E1%BA%BFn\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Một vài <code>aria</code> phổ biến</h2>\n<h3 id=\"aria-label-và-aria-labelledby\"><a href=\"#aria-label-v%C3%A0-aria-labelledby\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>aria-label</code> và <code>aria-labelledby</code></h3>\n<p>Chức năng tương tự như attribute <code>alt</code> của thẻ <code>&#x3C;img/></code>, nhưng có thể gắn cho bất kỳ element nào.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n    <span class=\"token attr-name\">aria-label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>menu<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hamburger<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span> </code></pre>\n<p>Thay vì thêm <code>aria-label</code> trực tiếp, <code>aria-labelledby</code> trỏ đến id một element khác để làm label </p>\n<p><img src=\"https://developers.google.com/web/fundamentals/accessibility/semantics-aria/imgs/aria-label.jpg\" alt=\"aria-label\"></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rg-label<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    Drink options\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>radiogroup<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">aria-labelledby</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rg-label<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">></span></span>\n    ...\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<p><img src=\"https://developers.google.com/web/fundamentals/accessibility/semantics-aria/imgs/aria-labelledby.jpg\" alt=\"aria-labeledby\"></p>\n<h3 id=\"role\"><a href=\"#role\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>role</h3>\n<p>Không bắt đầu bằng <code>aria</code>, dùng để khai báo công dụng của từng element</p>\n<ul>\n<li>search</li>\n<li>banner</li>\n<li>presentation</li>\n<li>toolbar</li>\n<li>status</li>\n<li>menuitem</li>\n<li>log</li>\n<li>dialog</li>\n<li>link</li>\n</ul>\n<pre class=\"language-html\"><code class=\"language-html\"> \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>questionmark.png<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tooltip<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre>\n<h3 id=\"aria-live\"><a href=\"#aria-live\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>aria-live</h3>\n<p>Thông báo đến user ngay khi nội dung bên trong element gắn thuộc tính này có thay đổi.</p>\n<p>Có 2 giá trị có thể thêm cho thuộc tính <code>aria-live</code>: <strong>polite</strong>, <strong>assertive</strong></p>\n<ul>\n<li><strong>polite</strong>: user không cần tương tác gì, nội dụng tự động cập nhập bởi server, ví dụ như bài viết mới được push lên</li>\n<li><strong>assertive</strong>: user thực hiện một tương tác làm thay đổi giá trị nào đó, ví dụ như tăng số lượng sản phẩm muốn mua</li>\n</ul>\n<h2 id=\"aria-owns\"><a href=\"#aria-owns\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>aria-owns</h2>\n<p>Nó cung cấp thông tin \"tui là ba của đứa bé\". Trường hợp nào chúng ta cần dùng? Ví dụ cái submenu, vì lý do nào đó không đặt nó trong cấu trúc lồng ghép được, phải tách riêng ra, ta khai báo để screen reader biết được ai là ba đứa bé</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>menu<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>menuitem<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">aria-haspopup</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">></span></span>\n        New\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">aria-owns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submenu<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    ...\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>menu<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submenu<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>menuitem<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<p><img src=\"https://developers.google.com/web/fundamentals/accessibility/semantics-aria/imgs/aria-owns.jpg\" alt=\"aria-owns\"></p>\n<h3 id=\"aria-activedescendant\"><a href=\"#aria-activedescendant\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>aria-activedescendant</h3>\n<p>Thuộc tính này dùng trong cái dropdown, khi cái dropdown được focus, chứa giá trị thằng nào đang được chọn</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/accessibility/semantics-aria/imgs/aria-activedescendant.jpg\" alt=\"aria-activedescendant\"></p>\n<h3 id=\"aria-pressed\"><a href=\"#aria-pressed\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>aria-pressed</h3>\n<p>Thông tin về trạng thái \"bị nhấn\" của một element</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">aria-pressed</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Save<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Để định dạng cho theo từng giá trị của <code>aria</code>, lấy ví như cái <code>pressed</code> này, chúng ta dùng css selector</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token class\">.button</span><span class=\"token attribute\"><span class=\"token punctuation\">[</span><span class=\"token attr-name\">aria-pressed</span><span class=\"token operator\">=</span><span class=\"token attr-value\">\"true\"</span><span class=\"token punctuation\">]</span></span></span> <span class=\"token punctuation\">{</span> ... <span class=\"token punctuation\">}</span></code></pre>\n<h3 id=\"aria-hidden\"><a href=\"#aria-hidden\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>aria-hidden</h3>\n<p>Nếu chúng ta muốn bỏ qua những element khỏi \"ánh mắt dòm ngó\" của screen reader, dùng <code>aria-hidden</code>, ngoài ra nếu các element này được định dạng là <code>visibility: hidden</code>, <code>display: none</code> hay <code>hidden</code> thì nó cũng sẽ bị bỏ qua</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">hidden</span><span class=\"token punctuation\">></span></span>Ko thấy đâu<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">aria-hidden</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Vấn thấy, nhưng screen reader ko đọc<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Còn có nhưng element không được hiển thị cho user thấy, những vẫn được dòm ngó bởi screen reader, kỹ thuật css sẽ làm điều đó</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token class\">.sr-only</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> <span class=\"token number\">-10000</span><span class=\"token unit\">px</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token unit\">px</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token unit\">px</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"thêm-aria-cần-thiết-cho-trang-ecommerce\"><a href=\"#th%C3%AAm-aria-c%E1%BA%A7n-thi%E1%BA%BFt-cho-trang-ecommerce\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Thêm <code>aria</code> cần thiết cho trang ecommerce</h2>\n<p>Mockup ví dụ</p>\n<p><img src=\"https://cms-assets.tutsplus.com/uploads/users/1526/posts/31890/image/untitled_page.png\" alt=\"Sử dụng Aria trên site eCommerce, vấn đề accessibility cần quan tâm\"></p>\n<p>Bổ sung cho cái mockup này với các attribute cần thiết</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>main<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span> \n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n            <span class=\"token attr-name\">...</span>\n            <span class=\"token attr-name\">aria-labelledby</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>product-title<span class=\"token punctuation\">'</span></span>\n        <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n \n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>product-title<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span>A Nice Bag<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n         \n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span>\n            <span class=\"token attr-name\">...</span>\n            <span class=\"token attr-name\">aria-label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Color Selection Drop Down<span class=\"token punctuation\">'</span></span>\n        <span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span>\n                <span class=\"token attr-name\">...</span>\n                <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>option<span class=\"token punctuation\">'</span></span>\n                <span class=\"token attr-name\">aria-selected</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>false<span class=\"token punctuation\">'</span></span>\n            <span class=\"token punctuation\">></span></span>\n                Brown\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span>\n     \n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n            <span class=\"token attr-name\">...</span>\n            <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>checkbox<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">aria-checked</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">aria-label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Glossy Bag?<span class=\"token punctuation\">'</span></span>\n        <span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>fieldset</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>legend</span><span class=\"token punctuation\">></span></span>Adjust Quantity<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>legend</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>qty-element<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Current Quantity<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n                <span class=\"token attr-name\">...</span>\n                <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>alert<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">aria-live</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>assertive<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>qty-element<span class=\"token punctuation\">\"</span></span> \n            <span class=\"token punctuation\">/></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n                <span class=\"token attr-name\">...</span>\n                <span class=\"token attr-name\">aria-label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Add to Quantity<span class=\"token punctuation\">'</span></span>\n                <span class=\"token attr-name\">aria-controls</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>qty-element<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token punctuation\">></span></span>\n                +\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n                <span class=\"token attr-name\">...</span>\n                <span class=\"token attr-name\">aria-label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Subtract from Quantity<span class=\"token punctuation\">'</span></span>\n                <span class=\"token attr-name\">aria-controls</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>qty-element<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token punctuation\">></span></span>\n                -\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>fieldset</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">aria-label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Add to Cart<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Add to Cart<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n     \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Nếu trang sản phẩm có các tab thông tin</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>comlementary<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">aria-label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Expanded Content Area<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tablist<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>presentation<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span>\n                <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#more-info<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tab-more-info<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tab<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">aria-selected</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token punctuation\">></span></span>\n            Product Info\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n        <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>more-info<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabpanel<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">aria-hidden</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">aria-labelledby</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tab-more-info<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">></span></span>\n        More product info...\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<p><img src=\"https://cms-assets.tutsplus.com/uploads/users/769/posts/31890/image/untitled_page.png\" alt=\"Sử dụng Aria trên site eCommerce, vấn đề accessibility cần quan tâm\"></p>\n<p>Menu phân trang</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>navigation<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">aria-label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>Pagination Links<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span>\n    1\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">aria-controls</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>product-listings<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span>2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">aria-controls</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>product-listings<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span>3<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n    ...\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">aria-controls</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>product-listings<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span>Last<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span> \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Danh sách sản phẩm</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">role</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>main<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">aria-live</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>polite<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span> \n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>product-title<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span>A Nice Bag<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span> \n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>bag.jpg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>A paper bag<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span> \n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">aria-labelledby</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>product-title<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span>Add to cart<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>     \n    ... \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Để test accessibility của trang thì có thể dùng <a href=\"https://chrome.google.com/webstore/detail/accessibility-developer-t/fpkknkljclfencbdbgkenhalefipecmb?hl=en\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">extention này của chrome</a></p>\n<p>Bài viết liên quan</p>\n<ul>\n<li><a href=\"2019-03-25-rang-buoc-du-lieu-voi-html-5/\">Ràng buộc dữ liệu input với HTML5</a></li>\n<li><a href=\"/2018-10-05-gioi-thieu-focus\">Giới thiệu focus trên web</a></li>\n<li><a href=\"http://vuilaptrinh.com/2018-10-02-huong-dan-su-dung-tabindex-de-di-chuyen/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Sử dụng tabindex</a></li>\n</ul>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://code.tutsplus.com/tutorials/hands-on-with-aria-ecommerce-implementations--cms-31890\">📜 Hands-on With ARIA: Accessibility for eCommerce</a></p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://developers.google.com/web/fundamentals/accessibility/accessible-styles\">📜 Styling focus</a></p>\n","cover_image":""}},{"node":{"id":"421cd1b7e8f634b686167801383d5d13","title":"Giới thiệu focus trên web","path":"/gioi-thieu-focus-tren-web/","date":"2018-10-05","timeToRead":2,"desc":"Chúng ta nói về focus và làm cách nào chúng ta sử dụng nó trong ứng dụng web, bạn nào quan tâm accessibility thì phải biết cái này, đặt biệt mấy chế designer hay kêu bỏ focus ring","content":"<p>Nói đến focus là nói đến element nào (như input, button, link, checkbox, select) đang nhận input từ bàn phím, hoặc clipboard nếu user gọi paste</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/accessibility/focus/imgs/keyboard-focus.png\" alt=\"Giới thiệu focus trên web\"></p>\n<p>Element đang có trạng thái focus sẽ được xác định bằng vòng focus ring, tùy theo mỗi trình duyệt mà cách hiển thị khác nhau.</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/accessibility/focus/imgs/sign-up.png\" alt=\"Giới thiệu focus trên web\"></p>\n<p>Mình từng gặp tình huống là lướt web bằng smart tv không có bàn phím và chuột, thao tác hoàn toàn bằng remote, hoặc một số người sử dụng máy tính chủ yếu bằng bàn phím, không thể dùng chuột vì lý do nào đó, không có cái focus ring là mình không biết được mình đang trỏ tới element nào hết</p>\n<blockquote>\n<p>Luôn đảm bảo ứng dụng có thể thao tác bình thường dù không cần chuột, chỉ cần bàn phím</p>\n</blockquote>\n<p><img src=\"https://developers.google.com/web/fundamentals/accessibility/focus/imgs/system-prefs2.png\" alt=\"Giới thiệu focus trên web\"></p>\n<p>Một số element của HTML như <code>input</code>, <code>button</code>, <code>select</code>, <code>a</code>, <code>textarea</code> được gọi là <em>focusable</em>, nghĩa là mặc định nó đã có <code>tabindex=0</code> và bạn tab là tới mà không cần viết thêm code gì cả </p>\n<p><img src=\"https://developers.google.com/web/fundamentals/accessibility/focus/imgs/implicitly-focused.png\" alt=\"Giới thiệu focus trên web\"></p>\n<p>Những element khác như <code>&#x3C;p/></code>, <code>&#x3C;div/></code> không focus khi chúng ta ấn tab, không cần phải focus vào những element mà mình không cần tương tác gì với nó</p>\n<p><img src=\"https://developers.google.com/web/fundamentals/accessibility/focus/imgs/not-all-elements.png\" alt=\"Giới thiệu focus trên web\"></p>\n<p>Thử mở trang <a href=\"http://udacity.github.io/ud891/lesson2-focus/01-basic-form/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">airline site mockup page</a> và tab thử qua các element, trên trang này đang tắt hết các sự kiện mouse input.</p>\n<p>Một tình huống cũng hay xảy ra, là ko biết focus đang nằm đâu, đang tab ngon lành, bỗng dưng mất tiêu focus ring, không thấy xuất hiện nữa, tab thêm vài cái nữa thì nó lại xuất hiện.</p>\n<p>Nguyên nhân là có element focusable đang bị ẩn đi, không nằm trên màn hình, mặc dù nó có tồn tại, để xác định được element nào đang focus, có thể dùng javascript <code>document.activeElement</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">activeElement</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Đã thấy công dụng của vòng focus, nếu bạn design không thích vòng focus mặc định của trình duyệt, dễ dàng bỏ đi bằng thuộc tính <code>outline</code></p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token pseudo-class\">:hover</span><span class=\"token punctuation\">,</span> <span class=\"token pseudo-class\">:focus</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">outline</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span> // hoặc <span class=\"token number\">0</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p><img src=\"https://developers.google.com/web/fundamentals/accessibility/imgs/focus-ring.png\" alt=\"Giới thiệu focus trên web\"></p>\n<p>Bạn hãy cho nó một cách hiển thị khác, để user biết được đang focus vào element nào</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token pseudo-class\">:hover</span><span class=\"token punctuation\">,</span> <span class=\"token pseudo-class\">:focus</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> <span class=\"token color\">red</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Bài viết liên quan</p>\n<ul>\n<li><a href=\"/2019-03-25-rang-buoc-du-lieu-voi-html-5/\">Ràng buộc dữ liệu input với HTML5</a></li>\n<li><a href=\"/2018-10-08-huong-dan-aria-va-su-dung-voi-ecommerce-site\">Sử dụng aria trên site eCommerce, vấn đề accessibility cần quan tâm</a></li>\n<li><a href=\"http://vuilaptrinh.com/2018-10-02-huong-dan-su-dung-tabindex-de-di-chuyen/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Sử dụng tabindex</a></li>\n</ul>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://developers.google.com/web/fundamentals/accessibility/focus/\">📜 Introduction to Focus</a></p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://developers.google.com/web/fundamentals/accessibility/accessible-styles\">📜 Styling focus</a></p>\n","cover_image":""}},{"node":{"id":"34e1a6e4e7dac657edca4c9832d737dc","title":"Sử dụng tabindex","path":"/su-dung-tabindex/","date":"2018-10-02","timeToRead":3,"desc":"Mặc định thứ tự tab theo vị trí của DOM rất hữu dụng, tuy nhiên có trường hợp chúng ta sẽ muốn thay đổi thứ tự tab này. Cùng nghiên cứu tabindex để set thứ tự tab","content":"<p><code>tabindex</code> có thể sử dụng trong bất kỳ thẻ html nào</p>\n<p><strong><code>tabindex=\"0\"</code></strong>: element sẽ có thứ tự tab theo mặc định (theo vị trí DOM), nó có thể được focus bằng cách ấn phím <strong>Tab</strong>, hoặc gọi phương thức <code>focus()</code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Press Tab to Focus Me!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Các element có thể focus như thẻ <code>a</code>, <code>button</code>, <code>select</code>, <code>input</code>, <code>textarea</code> thì đã có sẵn <code>tabindex=0</code>, trừ khi chúng ta dùng một thẻ <code>div</code> như <code>button</code> thì phải đặt <code>tabindex=0</code>, để user có thể tab tới đó mà.</p>\n<p><strong><code>tabindex=\"-1\"</code></strong>: sẽ bỏ qua element này khi nhấn tab, vẫn có thể focus bằng cách gọi <code>focus()</code></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>foo<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Chớ bao giờ tab được anh đâu<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token special-attr\"><span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\">foo<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>Focus vào thằng ở trên<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre>\n<p><strong><code>tabindex=\"5\"</code></strong>: nếu là giá trị lớn hơn 0, nó sẽ được ưu tiên cao hơn. Nếu có nhiều tabindex lớn hơn 0, nó sẽ đi theo thứ tự <strong>bắt đầu từ giá trị nhỏ nhất (nhưng vẫn lớn hơn 0 nhé) đến giá trị cao hơn.</strong></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>Anh trước<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>Chú sau<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Chị có bầu, phải được ưu tiên em ơi<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Sử dụng đúng nhất cho các trường hợp cần được ưu tiên cao hơn như header, navigation. Khuyến khích tổ chức DOM theo logic như thứ tự tab mong muốn. Nếu bạn muốn dùng <code>tabindex</code></p>\n<h1 id=\"quản-lý-focus-trên-trang\"><a href=\"#qu%E1%BA%A3n-l%C3%BD-focus-tr%C3%AAn-trang\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Quản lý focus trên trang</h1>\n<blockquote>\n<p>Tip: kiểm tra element đang được focus: <code>document.activeElement</code></p>\n</blockquote>\n<p>Đây là trường hợp mà <code>tabindex</code> không chỉ hữu ích mà còn cần thiết. Bạn có  trang single page chứa các section khác nhau, nó không hiển thị đồng thời nhiều section trên cùng viewport được. Click vào thanh navigation để di chuyển giữa các section. Lúc đó, chúng ta sẽ có được section đang hiển thị trên viewport, đặt giá trị <code>tabindex=\"-1\"</code> để tách nó khỏi thứ tự tab mặc định và gọi <code>focus()</code>.</p>\n<h1 id=\"quản-lý-tab-trên-component\"><a href=\"#qu%E1%BA%A3n-l%C3%BD-tab-tr%C3%AAn-component\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Quản lý tab trên component</h1>\n<p>Lấy ví dụ thẻ <code>&#x3C;select /></code>, khi được focus, user có thể dùng các phím mũi tên để chọn các option. Nếu đang build một <code>&#x3C;select /></code> custom bằng <code>&#x3C;ul /></code> chẳng hạn, user phải có kiểu hoạt động tương tự như vậy</p>\n<p>Để tham khảo thêm chi tiết keyboard nào cho element nào, đọc bài <a href=\"https://www.w3.org/TR/wai-aria-practices/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Accessible Rich Internet Applications (ARIA) Authoring Practices</a></p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>radio-group</span><span class=\"token punctuation\">></span></span>\n  // Giả dụ user nhấn phím mũi tên đi xuống, chúng ta gọi focus vào đứa tiếp theo\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>radio-button</span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Water<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>radio-button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>radio-button</span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Coffee<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>radio-button</span><span class=\"token punctuation\">></span></span> // call .focus() on this element\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>radio-button</span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Tea<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>radio-button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>radio-button</span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Cola<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>radio-button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>radio-button</span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Ginger Ale<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>radio-button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>radio-group</span><span class=\"token punctuation\">></span></span></code></pre>\n<h1 id=\"vấn-đề-với-modal-và-keyboard\"><a href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81-v%E1%BB%9Bi-modal-v%C3%A0-keyboard\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Vấn đề với Modal và keyboard</h1>\n<p>Có tình huống focus sẽ lặp mãi mãi, như cái autocomplete nó sẽ bắt sự kiện focus và tab, không cho user ra khỏi element đó nếu dùng phím. Nó được đề cập cụ thể <a href=\"http://webaim.org/standards/wcag/checklist#sc2.1.2\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">trong đây</a>. </p>\n<p>Tình huống khác cũng hay gặp là cái modal, khi modal hiển thị, chúng ta không cho user truy cập đến các phần khác bên dưới, nhưng nếu dùng phím vẫn có thể di chuyển qua các phần tử bên dưới.</p>\n<p>Bằng cách cho keyboard tạm thời <em>khóa</em> trên modal để user không di chuyển ra khỏi modal này nếu dùng phím tab, nhớ trả lại bình thường sau khi modal đóng lại.</p>\n<ul>\n<li>Chi tiết về cách làm <a href=\"https://github.com/udacity/ud891/tree/gh-pages/lesson2-focus/07-modals-and-keyboard-traps/solution\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">tham khảo source code</a> và <a href=\"http://udacity.github.io/ud891/lesson2-focus/07-modals-and-keyboard-traps/solution/index.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">demo ở đây</a></li>\n<li><a href=\"https://developers.google.com/web/fundamentals/accessibility/focus/using-tabindex\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Dịch từ Google Web Fundamentals</a></li>\n<li><a href=\"https://www.udacity.com/course/web-accessibility--ud891\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Course hay của Udacity về Web Accessibility</a></li>\n</ul>\n","cover_image":""}},{"node":{"id":"f9b9d628fc5725a639e6c8edff449057","title":"Giới thiệu fetch() của javascript","path":"/gioi-thieu-fetch-cua-javascript/","date":"2018-10-01","timeToRead":5,"desc":"Tạm biệt XMLHttpRequest và cách viết dài dòng, giờ đây ta đã có fetch API","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#vi%E1%BA%BFt-m%E1%BB%99t-c%C3%A2u-request-network-%C4%91%C6%A1n-gi%E1%BA%A3n-v%E1%BB%9Bi-fetch\">Viết một câu request network đơn giản với fetch</a></li>\n<li><a href=\"#response-metadata\">Response Metadata</a></li>\n<li><a href=\"#response-types\">Response Types</a></li>\n<li><a href=\"#chu%E1%BB%97i-promise\">Chuỗi Promise</a></li>\n<li><a href=\"#post-request\">POST Request</a></li>\n<li><a href=\"#g%E1%BB%ADi-th%C3%B4ng-tin-x%C3%A1c-th%E1%BB%B1c-v%E1%BB%9Bi-fetch\">Gửi thông tin xác thực với Fetch</a></li>\n<li><a href=\"#upload-file\">Upload file</a></li>\n<li><a href=\"#upload-nhi%E1%BB%81u-file\">Upload nhiều file</a></li>\n</ul>\n<!-- /TOC -->\n<p><code>fetch()</code> cho phép tạo một network request tương tự như XMLHttpRequest(XHR). Sự khác nhau chủ yếu là Fetch hoạt động theo <strong>Promises</strong>, cho phép viết gọn ràng, dễ nhớ hơn là XHR. API Fetch có trong <code>window.fetch()</code> giờ đã được hổ trợ phổ biến, bạn không cần polyfill gì đâu, vĩnh biệt IE.</p>\n<h1 id=\"một-câu-request-network-bằng-fetch\"><a href=\"#m%E1%BB%99t-c%C3%A2u-request-network-b%E1%BA%B1ng-fetch\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Một câu request network bằng <code>fetch</code></h1>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/some-url'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token property-access\">status</span> <span class=\"token operator\">!==</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Lỗi, mã lỗi '</span> <span class=\"token operator\">+</span> response<span class=\"token punctuation\">.</span><span class=\"token property-access\">status</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword control-flow\">return</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token comment\">// parse response data</span>\n      response<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token keyword control-flow\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error :-S'</span><span class=\"token punctuation\">,</span> err<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Response của câu <code>fetch()</code> là một đối tượng <strong>Stream</strong>, nghĩa là khi chúng ta gọi phương thức <code>json()</code>, một <code>Promise</code> được trả về, vì quá trình đọc stream sẽ diễn ra bất đồng bộ.</p>\n<h1 id=\"response-metadata\"><a href=\"#response-metadata\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Response MetaData</h1>\n<p>Bên cạnh các dữ liệu chúng ta có thể truy cập như trong ví dụ trên, chúng ta có thể truy cập đến các meta data khác</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/api/some-url'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token property-access\">headers</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token property-access\">headers</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Date'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token property-access\">status</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token property-access\">statusText</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token property-access\">type</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token property-access\">url</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<h1 id=\"responsetype\"><a href=\"#responsetype\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>response.type</code></h1>\n<p>Khi chúng ta tạo một fetch request, response trả về sẽ chứa <strong>response.type</strong>, với một trong 3 giá trị: <strong>basic</strong>, <strong>cors</strong>, <strong>opaque</strong>. </p>\n<p>Nó cho biết resource này đến từ đâu, cho chúng ta biết cách chúng ta nên <em>đối xử</em> với object trả về</p>\n<p><img src=\"https://rootsec.info/wp-content/uploads/2017/07/same-origin-policy.jpg\" alt=\"same origin\"></p>\n<ul>\n<li>Nếu request lên cùng một <strong>nhà</strong> (ứng dụng host trên server A gửi request lên API trên server A), <code>response.type</code> sẽ là <code>basic</code>, không có bất kỳ giới hạn việc xem các thông tin trên response.</li>\n<li>Nếu request dạng <strong>CORS</strong>, nhà em ở Hồ Chí Mình, em quen bạn gái Hà Nội,  <code>type</code> trả về sẽ là <code>cors.cors</code>, lúc đó bên trong <code>header</code> chúng ta chỉ được phép truy cập đến <code>Cache-Control</code>, <code>Content-Language</code>, <code>Content-Type</code>, <code>Expires</code>, <code>Last-Modified</code> và <code>Pragma</code></li>\n<li>Type <code>opaque</code> cho các request tạo ra khác <strong>nhà</strong>, và thằng server nó không chấp nhận dạng request <strong>CORS</strong>, ba má cấm chú quen gái Hà Nội, nghĩa là không trả về dữ liệu, không xem được status của request, chia tay tình yêu.</li>\n</ul>\n<p>Để khai báo 1 fetch request chỉ <code>resolve</code> khi thõa điều kiện <strong>mode</strong></p>\n<ul>\n<li><code>same-origin</code>: các request nhà kế bên sẽ trả về <code>reject</code></li>\n<li><code>cors</code>: cho phép nhà khác nếu header trả về cũng là cors</li>\n<li><code>cors-with-forced-preflight</code> luôn thực hiện kiểm tra <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#Preflighted_requests\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">preflight</a>. Là trước khi gửi đi, để đảm bảo an toàn, tạo một request dùng phương thức OPTIONS để kiểm tra độ an toàn, (nhà anh có điều kiện ko mà đòi quen bạn gái tận Hà Nội xa xôi)</li>\n<li><code>no-cors</code> tạo một request không <em>cùng nhà</em>, không trả về <code>CORS</code></li>\n</ul>\n<p>Để khai báo mode</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://some-site.com/cors-enabled/some.json'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>mode<span class=\"token punctuation\">,</span> <span class=\"token string\">'cors'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword control-flow\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">text</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Request successful'</span><span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token keyword control-flow\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Request failed'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h1 id=\"liên-kết-promise\"><a href=\"#li%C3%AAn-k%E1%BA%BFt-promise\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Liên kết Promise</h1>\n<p>Một trong những tính năng hay (<strong>và sinh ra rắc rối</strong>) của Promise là cho phép mắc-xích-các-Promise lại với nhau.</p>\n<p>Khi làm việc với JSON API, chúng ta quan tâm đến <code>status</code> và <code>parse</code> JSON trả về, để đơn giản hóa, đưa phần xử lý kiểm tra <code>status</code> và <code>parse</code> này ra hàm riêng. Chúng ta chỉ lo xử lý kết quả cuối cùng và trường hợp có lỗi</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token property-access\">status</span> <span class=\"token operator\">>=</span> <span class=\"token number\">200</span> <span class=\"token operator\">&amp;&amp;</span> response<span class=\"token punctuation\">.</span><span class=\"token property-access\">status</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword control-flow\">return</span> <span class=\"token known-class-name class-name\">Promise</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">resolve</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword control-flow\">return</span> <span class=\"token known-class-name class-name\">Promise</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">reject</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span><span class=\"token property-access\">statusText</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span>status<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Request succeeded with JSON response'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token keyword control-flow\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Request failed'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h1 id=\"post-request\"><a href=\"#post-request\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>POST Request</h1>\n<p>Set giá trị <code>method</code> và <code>body</code> để tạo một POST request</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  method<span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n  headers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"Content-Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"application/x-www-form-urlencoded; charset=UTF-8\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  body<span class=\"token operator\">:</span> <span class=\"token string\">'foo=bar&amp;lorem=ipsum'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span>json<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Request succeeded with JSON response'</span><span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token keyword control-flow\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Request failed'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Gửi lên dữ liệu dạng JSON</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>username<span class=\"token operator\">:</span> <span class=\"token string\">'example'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  method<span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span> \n  body<span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">stringify</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n  headers<span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token arrow operator\">=></span> res<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Success:'</span><span class=\"token punctuation\">,</span> <span class=\"token known-class-name class-name\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">stringify</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token keyword control-flow\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<h1 id=\"gửi-thông-tin-xác-thực-với-fetch\"><a href=\"#g%E1%BB%ADi-th%C3%B4ng-tin-x%C3%A1c-th%E1%BB%B1c-v%E1%BB%9Bi-fetch\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Gửi thông tin xác thực với Fetch</h1>\n<p>Để gửi kèm thông tin xác thực cookie (user là ai), chúng ta truyền tham số <code>credentials: include</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  credentials<span class=\"token operator\">:</span> <span class=\"token string\">'include'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Nếu muốn gửi credentials khi request URL là <strong>cùng nhà*</strong>, truyền giá trị <code>same-origin</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  crendentials<span class=\"token operator\">:</span> <span class=\"token string\">'same-origin'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Không cho trình duyệt gửi thông tin xác thực, dùng <code>omit</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  crendentials<span class=\"token operator\">:</span> <span class=\"token string\">'omit'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<h1 id=\"upload-file\"><a href=\"#upload-file\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Upload file</h1>\n<p>Sử dụng cùng <code>&#x3C;input type='file' /></code>, <code>FormData()</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> formData <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> fileField <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"input[type='file']\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nformData<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'username'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'abc123'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nformData<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'avatar'</span><span class=\"token punctuation\">,</span> fileField<span class=\"token punctuation\">.</span><span class=\"token property-access\">files</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://example.com/profile/avatar'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  method<span class=\"token operator\">:</span> <span class=\"token string\">'PUT'</span><span class=\"token punctuation\">,</span>\n  body<span class=\"token operator\">:</span> formData\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token arrow operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Success:'</span><span class=\"token punctuation\">,</span> <span class=\"token known-class-name class-name\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">stringify</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">.</span><span class=\"token keyword control-flow\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre>\n<h1 id=\"upload-nhiều-file\"><a href=\"#upload-nhi%E1%BB%81u-file\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Upload nhiều file</h1>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> formData <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FormData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> photos <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"input[type='file'][multiple]\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nformData<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'title'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'My Vegas Vacation'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nformData<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'photos'</span><span class=\"token punctuation\">,</span> photos<span class=\"token punctuation\">.</span><span class=\"token property-access\">files</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://example.com/posts'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  method<span class=\"token operator\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n  body<span class=\"token operator\">:</span> formData\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token arrow operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Success:'</span><span class=\"token punctuation\">,</span> <span class=\"token known-class-name class-name\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">stringify</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token keyword control-flow\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p><a href=\"https://developers.google.com/web/updates/2015/03/introduction-to-fetch\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Link bài viết gốc</a></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ví dụ tham khảo, chi tiết hơn về header, body, response object</a></p>\n","cover_image":""}},{"node":{"id":"fccbfa6b2a57a09f8aee77da3d52b06f","title":"Bộ kiến thức của google để được gọi là chuẩn Web Mobile Developer","path":"/bo-kien-thuc-cua-google-de-duoc-goi-la-chuan-web-mobile-developer/","date":"2018-09-30","timeToRead":5,"desc":"Mình bắt đầu một series mới, đây là bài đầu tiên tổng hợp tất cả những chủ đề sẽ điểm qua trong series này, nắm hết các kiến thức này, các bạn có thể tự tin lấy chứng chỉ Web Mobile Specialist của Google","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#website-layout-and-styling\">Website layout and styling</a></li>\n<li><a href=\"#network\">Network</a></li>\n<li><a href=\"#accessibility\">Accessibility</a></li>\n<li><a href=\"#progressive-web-apps\">Progressive Web Apps</a></li>\n<li><a href=\"#performance-optimization-v%C3%A0-caching\">Performance Optimization và Caching</a></li>\n<li><a href=\"#testing-v%C3%A0-debugging\">Testing và Debugging</a></li>\n<li><a href=\"#kh%C3%A1i-ni%E1%BB%87m-es2015-v%C3%A0-c%C3%BA-ph%C3%A1p\">Khái niệm ES2015 và cú pháp</a></li>\n<li><a href=\"#mobile-web-forms\">Mobile Web Forms</a></li>\n</ul>\n<!-- /TOC -->\n<h1 id=\"website-layout-and-styling\"><a href=\"#website-layout-and-styling\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Website layout and styling</h1>\n<p>Cần nắm</p>\n<ul>\n<li>Chỉ sử dụng javascript để truy cập và thao tác trên DOM mà không dùng thư viện jQuery</li>\n<li>Khai báo document type, viewport tag phù hợp</li>\n<li>Responsive grid-base sử dụng CSS</li>\n<li>Media queries để tạo break point trên các kích thước màn hình</li>\n<li>Multimedia tag để hiển thị video và audio</li>\n<li>Responsive image theo từng resolution và hướng màn hình (ngang hay đứng) trên bất kỳ thiết bị mobile nào</li>\n<li>Cách bắt Sự kiện Touch và mouse</li>\n</ul>\n<p>Nguồn tham khảo</p>\n<ul>\n<li><a href=\"https://www.udacity.com/course/responsive-web-design-fundamentals--ud893\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Responsive Web Design</a> - video course của udacity, rất chi tiết và tỉ mỉ.</li>\n<li><a href=\"/2018-07-04-huong-dan-tong-hop-canh-le-voi-flexbox-alignment\">Tổng quát về canh lề với Flexbox display</a></li>\n<li><a href=\"https://developer.mozilla.org/vi/docs/Learn/HTML/Multimedia_and_embedding/Video_and_audio_content\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Video and audio content</a>, bài này mình dịch nếu sai chổ nào các bạn sữa giúp</li>\n<li><a href=\"https://www.udacity.com/course/responsive-images--ud882\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Responsive Image course</a></li>\n<li><a href=\"/2018-07-30-huong-dan-tam-quan-trong-cua-thuoc-tinh-sizes-trong-the-img\">Tầm quan trọng của thuộc tính sizes trong thẻ img</a></li>\n<li>Supporting both TouchEvent and MouseEvent</li>\n<li><a href=\"https://developer.mozilla.org/vi/docs/Web/API/Touch_events/Supporting_both_TouchEvent_and_MouseEvent\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Touch events</a></li>\n</ul>\n<h1 id=\"network\"><a href=\"#network\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Network</h1>\n<ul>\n<li>Request data sử dụng <code>fetch()</code></li>\n<li>Kiểm trả response status, sau đó <code>parse</code> dữ liệu này về thành data có thể sử dụng</li>\n<li>Render dữ liệu lên trang</li>\n<li>Cấu hình POST request với tham số <code>method</code> và <code>body</code></li>\n<li>Sử dụng đúng cách cấu hình CORS ( cross-origin resource sharing protocol ) với fetch request, tùy thuộc vào header trả về từ server</li>\n<li>Xử lý error bằng promise trong fetch request</li>\n<li>Phân tích lỗi network sử dụng các công cụ debug</li>\n</ul>\n<p>Nguồn tham khảo ( mình sẽ viết từ từ )</p>\n<ul>\n<li><a href=\"/2018-10-01-huong-dan-gioi-thieu-fetch-javascript\">Giới thiệu fetch() của javascript</a></li>\n<li><a href=\"/2017-10-12-javascript-promise\">Nắm vững Promise trong javascript</a></li>\n<li>HTTP access control (CORS)</li>\n</ul>\n<h1 id=\"accessibility\"><a href=\"#accessibility\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Accessibility</h1>\n<ul>\n<li>Cách đặt tab order để di chuyển bằng tab</li>\n<li>Sử dụng skip navigation link để bypass</li>\n<li>Tránh sử dụng nội dung ẩn làm cản trở việc di chuyển bằng tab</li>\n<li>Sử dụng thẻ head phù hợp để dựng cấu trúc trang</li>\n<li>Sử dụng các thẻ <code>alt</code>, <code>label</code>, <code>aria-label</code> và <code>aria-labelledby</code></li>\n<li>Áp dụng độ tương phản thích hợp tuân theo quy ước chung</li>\n<li>Gởi thông báo khẩn cấp sử dụng <code>aria-live</code></li>\n<li>Sử dụng semantic markup để giữ nội dung chính và các element khác riêng biệt</li>\n</ul>\n<p>Nguồn tham khảo</p>\n<ul>\n<li>Web Fundamentals – Accessibility</li>\n<li>Web Accessibility</li>\n<li>Mobile Accessibility</li>\n<li><a href=\"/2018-10-02-huong-dan-su-dung-tabindex-de-di-chuyen/\">Sử dụng tabindex</a></li>\n<li><a href=\"/2018-10-05-gioi-thieu-focus\">Focus</a></li>\n<li>Skip Navigation Links</li>\n<li><a href=\"/2018-10-08-huong-dan-aria-va-su-dung-voi-ecommerce-site\">ARIA</a></li>\n</ul>\n<h1 id=\"progressive-web-apps\"><a href=\"#progressive-web-apps\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Progressive Web Apps</h1>\n<ul>\n<li>Tạo web app có thể sử dụng offline, cache các element bằng cách đưa request về service worker</li>\n<li>Lưu những giá trị hiển thị mặc định như màu sắc, icon (nút thêm vào màn hình chính trên điện thoại) và splash screen trong web application manifest ( hoặc dùng meta tag )</li>\n<li>Tách các tính năng quan trọng và UI để có thể load độc lập nội dung</li>\n</ul>\n<p>Nguồn tham khảo ( mình sẽ viết từ từ )</p>\n<ul>\n<li>Progressive Web Apps Training</li>\n<li>Web Fundamentals - The App Shell Model</li>\n<li><a href=\"/2018-10-16-huong-dan-progressive-web-app-cho-nguoi-moi-bat-dau\">Dựng Progressive Web App đầu tiên của bạn</a></li>\n<li>Using Service Workers</li>\n</ul>\n<h1 id=\"performance-optimization-và-caching\"><a href=\"#performance-optimization-v%C3%A0-caching\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Performance Optimization và Caching</h1>\n<ul>\n<li>Tránh khóa thread chính (web app chạy trên một single threat thôi) bằng web worker phù hợp</li>\n<li>\n<p>Tối ưu render bằng cách sử dụng hợp lý</p>\n<ul>\n<li>Compressed và minified javascript, HTML, CSS</li>\n<li>Inline CSS cho một số trang nhất định, load bất đồng bộ một số stylesheet khác nếu cần</li>\n<li>Inline javascript trong lúc khởi chạy render  những chổ cần thiết (hoặc đánh dấu deferred, async)</li>\n<li>Đặt thứ tự load phù hợp, các phần nào bắt buộc thì cho load trước, những resource khác cho nằm sau cùng</li>\n<li>Hạn chế tạo DOM nhiều tầng lớp</li>\n<li>Sử dụng trình duyệt để phân tích lỗi trên mobile</li>\n</ul>\n</li>\n<li>Load lại file khi nó available</li>\n<li>\n<p>Lưu lại dữ liệu xuống client</p>\n<ul>\n<li><a href=\"/2018-09-17-huong-dan-luu-token-o-dau\">Quản lý session</a></li>\n<li>Cache asset nào tốn thời gian để load</li>\n<li>Sử dụng IndexedDB để lưu dữ liệu động trong lúc chạy offline</li>\n</ul>\n</li>\n</ul>\n<p>Nguồn tham khảo ( mình sẽ viết từ từ )</p>\n<ul>\n<li>Using Web Workers</li>\n<li>Offline Web Applications by Google</li>\n<li>Web Fundamentals - Performance</li>\n<li>The Offline Cookbook</li>\n<li>Cache - MDN</li>\n<li>Storage</li>\n<li>Local Storage And How To Use It On Websites</li>\n<li>IndexedDB API</li>\n<li>Get Started with Analyzing Network Performance in Chrome DevTools</li>\n</ul>\n<h1 id=\"testing-và-debugging\"><a href=\"#testing-v%C3%A0-debugging\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Testing và Debugging</h1>\n<ul>\n<li>Viết unit test để kiểm tra function</li>\n<li>Đặt breakpoint bên trong các function phức tạp để xác định chính xác luồn chạy có đúng không</li>\n<li>Sử dụng <code>console</code> để log thông tin</li>\n<li>Re-produce và fix bug dựa trên report của user</li>\n</ul>\n<p>Nguồn tham khảo ( mình sẽ viết từ từ )</p>\n<ul>\n<li>Get Started with Debugging JavaScript in Chrome DevTools</li>\n<li><a href=\"/2018-06-24-huong-dan-lam-viec-voi-console-trong-javascript\">Làm việc với console trong javascript</a></li>\n<li>Debugging Service Workers</li>\n</ul>\n<h1 id=\"khái-niệm-es2015-và-cú-pháp\"><a href=\"#kh%C3%A1i-ni%E1%BB%87m-es2015-v%C3%A0-c%C3%BA-ph%C3%A1p\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Khái niệm ES2015 và cú pháp</h1>\n<ul>\n<li>Cú pháp Promise để tạo hàm bất tuần tự và xử lý lỗi</li>\n<li>Biến có thể sử dụng với block scope, function scope, và cách làm cho nó không thay đổi theo <strong>context</strong> sử dụng <code>let</code>, <code>var</code>, <code>const</code></li>\n<li>String literal</li>\n<li>Arrow function</li>\n<li>Default parameter cho function</li>\n<li><code>for...of</code> để loop và object và chạy một custom function</li>\n<li>Map</li>\n<li>Set</li>\n</ul>\n<p>Nguồn tham khảo</p>\n<ul>\n<li><a href=\"/2017-10-12-javascript-promise\">JavaScript Promises</a></li>\n<li><a href=\"/2016-11-19-phan-5-es6-can-ban-template-literals\">Template literals</a></li>\n<li><a href=\"/2016-11-16-chuong-2-es-6-can-ban-arrow-function\">Arrow Function</a></li>\n<li><a href=\"/2016-11-18-phan-4-es6-can-ban-rest-parameters-va-spread-operator\">Rest Parameters và Spread Operator</a></li>\n<li><a href=\"https://developer.mozilla.org/vi/docs/Web/JavaScript/Reference/Statements/for...of\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">For...of</a></li>\n<li><a href=\"/2018-12-07-giai-thich-su-dung-map-hay-object\">Map và Object trong Javascript</a></li>\n<li><a href=\"https://developer.mozilla.org/vi/docs/Web/JavaScript/Reference/Global_Objects/Set\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Set</a></li>\n</ul>\n<h1 id=\"mobile-web-forms\"><a href=\"#mobile-web-forms\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Mobile Web Forms</h1>\n<ul>\n<li>Sử dụng thẻ <code>label</code> cho input</li>\n<li>Input với giá trị <code>type</code>, <code>name</code>, <code>autocomplete</code> phù hợp</li>\n<li>Sử dụng input có kích thước phù hợp cho việc touch</li>\n<li>Suggestion cho user bằng <code>datalist</code></li>\n<li>Validate các input ở FrontEnd ( ví dụ pattern, maxlength, required)</li>\n<li>Kiểm tra validate ngay lặp tức bằng <strong>pseudo-classes</strong> trên input</li>\n<li>Thực hiện validate khi submit</li>\n</ul>\n<p>Nguồn tham khảo</p>\n<ul>\n<li><a href=\"/2018-11-14-chi-dan-thiet-ke-form-cua-google\">Chỉ dẫn thiết kế form từ Google</a></li>\n<li>Constraint Validation</li>\n<li><a href=\"/2018-11-02-validate-form-voi-html-5\">Validate form với HTML5</a></li>\n</ul>\n<p><a href=\"https://developers.google.com/training/certification/mobile-web-specialist/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Tham khảo cách lấy chứng chỉ Web Mobile Specialist</a></p>\n","cover_image":""}},{"node":{"id":"ffeea5b9452c4a7e8d3f574163978d1d","title":"Tầm quan trọng của thuộc tính sizes, srcset trong thẻ img","path":"/tam-quan-trong-cua-thuoc-tinh-sizes-srcset-trong-the-img/","date":"2018-07-30","timeToRead":3,"desc":"Hướng dẫn sử dụng srcset và sizes để tối ưu việc load ảnh responsive","content":"<h2 id=\"srcset\"><a href=\"#srcset\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>srcset</code></h2>\n<p>Công dụng của thuộc tính <code>srcset</code> trên thẻ <code>&#x3C;img/></code> là cho phép chúng ta cung cấp các file với kích thước khác file được cung cấp trên <code>src</code>, chúng ta có thể sử dụng <code>srcset</code> vô tư, nếu trình duyệt ko hổ trợ <code>srcset</code> (IE cũ), nó đơn giản chỉ load file trên thuộc tính <code>src</code>.</p>\n<p>Trên thuộc tính <code>srcset</code> chúng ta báo kích thước của hình này luôn, <code>medium.jpg 1000w</code> ( có nghĩa hình này width=1000px ) đa phần dùng width có thể giải quyết tất cả các trường hợp, trình duyệt không cần download vẫn biết được độ rộng của file, trên cơ sở đó, trình duyệt tính toán với viewport hiện tại và download hình thích hợp</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>small.jpg<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">srcset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>medium.jpg 1000w, large.jpg 2000w<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>luckyluu blog | Tầm quan trọng của thuộc tính sizes, srcset trong thẻ img<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">></span></span></code></pre>\n<p>Thử xem trình duyệt đã tính toán thế nào. </p>\n<p>Thí dụ kích thước thiết bị là <em>320px</em>, 1x (là giá trị <em>density</em> của màn hình, xem ở đây <a href=\"https://pixensity.com/list/phone/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://pixensity.com/list/phone/</a>, hoặc check bằng javascript <code>window.devicePixelRatio</code>).</p>\n<p>Chúng ta có 3 hình</p>\n<ul>\n<li>small.jpg: 500px wide</li>\n<li>medium.jpg: 1000px wide</li>\n<li>large.jpg: 2000px wide</li>\n</ul>\n<pre class=\"language-text\"><code class=\"language-text\">500 / 320 = 1.5625\n1000 / 320 = 3.125\n2000 / 320 = 6.25</code></pre>\n<p><em>Trình duyệt</em> - màn hình của mày là 1x, 1.5625 là tỉ lệ gần nhất với 1, tuy hơi cao nhưng tốt hơn mấy thằng kia. Tao load thằng <code>small.jpg</code></p>\n<p>Nếu là màn hình 2x (nó sẽ lấy gía trị của <code>window.devicePixelRatio</code>), trình duyệt sẽ chọn 3.125 vì nó gần với 2 nhất.</p>\n<p>Bên cạnh đơn vị <code>w</code>, tương ứng với kích thước của hình, chúng ta cũng có thể dùng đơn vị <code>x</code> tương ứng cho <strong>độ</strong> <em>density</em> của màn hình</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> \n  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>image_2x.jpg<span class=\"token punctuation\">\"</span></span> \n  <span class=\"token attr-name\">srcset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>image_2x.jpg 2x, image_1x.jpg 1x<span class=\"token punctuation\">\"</span></span> \n  <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>luckyluu blog | Tầm quan trọng của thuộc tính sizes, srcset trong thẻ img<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">/></span></span></code></pre>\n<h2 id=\"sizes\"><a href=\"#sizes\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>sizes</code></h2>\n<p>Bên cạnh <code>srcset</code>, một thuộc tính rất hay ho khác là <code>sizes</code>, nó cũng sẽ giúp trình duyệt có cơ sở để load hình nào</p>\n<blockquote>\n<p>Nếu không dùng thuộc tính <code>sizes</code>. Trình duyệt ngầm hiểu chúng ta muốn render ảnh ở độ rộng 100vw.</p>\n</blockquote>\n<p><img src=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1531489586/640-version_txwye1.png\" alt=\"Tầm quan trọng của thuộc tính sizes trong thẻ img\"></p>\n<p>Không phải lúc nào hình sẽ hiển thị hết 100vw của màn hình, ví dụ bạn có mà hình rộng 1000px, hình không hiển thị hết chiều ngang của màn hình, nhỏ hơn một nữa đi, tức là bạn chỉ cần hình có kích thước <code>1000/2 = 500px</code> là đủ xài</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">img</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">float</span><span class=\"token punctuation\">:</span> left<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> <span class=\"token number\">500</span><span class=\"token unit\">px</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Trước khi trình duyệt load được css, nó sẽ <strong>ko biết được</strong> là hình chỉ có hiển thị tối đa 500px, chúng ta báo với nó, \"Ê, hình này của tao chỉ hiển thị tối đa là 500px nhé\" bằng HTML</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span>\n  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>small.jpg<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">srcset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>medium.jpg 1000w, large.jpg 2000w<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>luckyluu blog | Tầm quan trọng của thuộc tính sizes, srcset trong thẻ img<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">sizes</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>500px<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">></span></span></code></pre>\n<p>Nhưng trên điện thoại, chúng ta muốn khác, hình này sẽ full hết 100% viewport,</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@media</span> <span class=\"token punctuation\">(</span><span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> <span class=\"token number\">600</span><span class=\"token unit\">px</span><span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">img</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">float</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token unit\">vw</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Để báo với trình duyệt có một sự thay đổi *nhỏ** trên nếu màn hình &#x3C; 600px, chúng ta khai báo thuộc tính <code>sizes</code> như sau</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> \n  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>small.jpg<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">srcset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>medium.jpg 1000w, large.jpg 2000w<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>luckyluu blog | Tầm quan trọng của thuộc tính sizes, srcset trong thẻ img<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">sizes</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>(max-width: 600px) 100vw, 500px<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">/></span></span></code></pre>\n<p>Đoạn trên nếu dịch rad: ê trình duyệt, hình này sẽ render kích thước 100vw khi viewport &#x3C; 600px, còn lại cứ dùng kích thước 500px</p>\n<p><img src=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1531489882/320-version_afwzxa.png\" alt=\"Tầm quan trọng của thuộc tính sizes trong thẻ img\"></p>\n<p>Kích thước trên mobile</p>\n<p><img src=\"https://res.cloudinary.com/css-tricks/image/upload/c_scale,w_1000,f_auto,q_auto/v1531490069/640-version-mobile_l15ira.png\" alt=\"Tầm quan trọng của thuộc tính sizes trong thẻ img\"></p>\n<p><a href=\"https://css-tricks.com/sometimes-sizes-is-quite-important/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">css-tricks.com/sometimes-sizes-is-quite-important</a></p>\n<p><a href=\"https://css-tricks.com/responsive-images-youre-just-changing-resolutions-use-srcset/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Responsive Images: If you’re just changing resolutions, use srcset.</a></p>\n","cover_image":""}},{"node":{"id":"6297a4b130cbfb44751f6a38e22a2c07","title":"Tổng quát về canh lề với Flexbox display","path":"/tong-quat-ve-canh-le-voi-flexbox-display/","date":"2018-07-04","timeToRead":2,"desc":"Bây giờ chưa nắm vững về flexbox và cách canh lề trong flexbox thì thật là thiếu xót trong thời đại 2018, chúng ta đã qua thời xài float, clearfix","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#c%E1%BA%A7n-n%E1%BA%AFm\">Cần nắm</a></li>\n<li><a href=\"#flex-direction\">flex-direction</a></li>\n<li><a href=\"#justify-content\">justify-content</a></li>\n<li><a href=\"#align-items-v%C3%A0-align-self\">align-items và align-self</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"cần-nắm\"><a href=\"#c%E1%BA%A7n-n%E1%BA%AFm\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Cần nắm</h2>\n<p>Khi sử dụng <code>display: flex</code> các element con bên trong chúng ta sẽ canh theo 2 phương, gọi là phương ngang và phương đứng</p>\n<p><img src=\"https://cms-assets.tutsplus.com/uploads/users/30/posts/30183/image/axes.png\"></p>\n<h2 id=\"flex-direction\"><a href=\"#flex-direction\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>flex-direction</h2>\n<p><code>flex-direction</code> sẽ có 4 giá trị để ta set</p>\n<ol>\n<li><code>flex-direction: row</code>: element con xếp theo từng hàng, chỉ xuống hàng khi set <code>flex-wrap: wrap</code>, hoặc viết tắt 2 thuộc tính này lại thành <code>flex-flow: row wrap</code></li>\n<li><code>flex-direction: row-reserve</code>: element con xếp thèo hàng đi từ phải qua trái</li>\n<li><code>flex-direction: column</code>: element con xếp theo cột từ trên xuống dưới</li>\n<li><code>flex-direction: column-reserve</code>: element con xếp theo cột từ dưới lên trên</li>\n</ol>\n<p><img src=\"http://codropspz.tympanus.netdna-cdn.com/codrops/wp-content/uploads/2015/02/flex-direction-illustration.jpg\"></p>\n<h2 id=\"justify-content\"><a href=\"#justify-content\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>justify-content</h2>\n<p>Với <code>justify-content</code> sẽ ảnh hưởng tới <strong>phương ngang</strong> của các element con, nếu <code>.container</code> chúng ta xếp các element theo dạng row (mặc định khi set <code>display: flex</code>), chúng ta can thiệp chiều xếp element con trong row này bằng <code>justify-content</code></p>\n<ol>\n<li><code>flex-start</code> : elements từ trái qua phải trong 1 row</li>\n<li><code>flex-end</code>: elements từ phải qua trái trong 1 row</li>\n<li><code>center</code>: dàn các element từ giữa ra 2 bên</li>\n<li><code>space-between</code>: dàn các element đều hết 1 row, chỉ chừa khoảng trống giữa 2 element, không chừa khoảng trống 2 element cuối</li>\n<li><code>space-around</code>: tương tự như <code>space-around</code> nhưng chừa luôn khoảng trống 2 element cuối</li>\n</ol>\n<p><img src=\"https://uploads.toptal.io/blog/image/122559/toptal-blog-image-1490181185089.2_newsletter_copy_11-ac07811eeed0c992b21c660cd6119ca8.jpg\"></p>\n<h2 id=\"align-items-và-align-self\"><a href=\"#align-items-v%C3%A0-align-self\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>align-items và align-self</h2>\n<p>Thuộc tính <code>align-items</code> sẽ ảnh hưởng đến <strong>phương đứng</strong> của element con, nếu <code>align-items</code> dùng để set ở <code>.container</code>, thì <code>align-self</code> sẽ set ở element con để đè lại giá trị trên từng thằng con</p>\n<p>Cả 2 thằng này đều có thể dùng các giá trị sau</p>\n<ol>\n<li><code>auto</code> giá trị <code>align-self</code> kế thừa từ <code>align-items</code>, mặc định của <code>align-self</code></li>\n<li><code>flex-start</code>: canh từ trên xuống</li>\n<li><code>flex-end</code>: canh từ dưới lên</li>\n<li><code>center</code>: canh từ giữa ra trên dưới</li>\n<li><code>baseline</code>: canh theo baseline của các element nằm ngang nhau</li>\n<li><code>stretch</code>: kéo độ cao của element để phủ hết chiều đứng của <code>.container</code></li>\n</ol>\n<p><img src=\"https://image.slidesharecdn.com/css3-layoutinctrlpdf-130218082731-phpapp01/95/slide-53-1024.jpg\"></p>\n","cover_image":""}}]}}},"context":{}}