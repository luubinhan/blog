{"hash":"6000b69201124b9452c41d38889aba5b11cf5e89","data":{"tag":{"title":"thu-thuat","belongsTo":{"edges":[{"node":{"id":"8958a2113badc0e460e80f2970e78e79","title":"H∆∞·ªõng d·∫´n k·ªπ thu·∫≠t FLIP animation v·ªõi React","path":"/2020-11-18-huong-dan-flip-animation-voi-react/","date":"2020-11-18","timeToRead":2,"desc":"N·∫øu b·∫°n l√† ng∆∞·ªùi l√†m animation c√≥ t√¢m, b·∫°n kh√¥ng mu·ªën animation l√†m ·∫£nh h∆∞·ªüng ƒë·∫øn t·ªëc ƒë·ªô c·ªßa ·ª©ng d·ª•ng, b·∫°n c·∫ßn bi·∫øt ƒë·∫øn FLIP animation","content":"<p>Tr∆∞·ªõc ƒë√¢y m√¨nh ƒë√£ c√≥ m·ªôt b√†i v·ªÅ FLIP animation, c√°c b·∫°n c√≥ th·ªÉ ƒë·ªçc l·∫°i <a href=\"https://vuilaptrinh.com/2018-07-25-huong-dan-tao-animate-voi-flip-technique/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">·ªü ƒë√¢y</a> ƒë·ªÉ bi·∫øt k·ªπ thu·∫≠t n√†y l√† g√¨ v√† t·∫°i sao n√≥ l·∫°i gi√∫p t·ªëi ∆∞u t·ªëc ƒë·ªô.</p>\n<p>C√≥ th·ªÉ t√≥m t·∫Øt k·ªπ thu·∫≠t FLIP b·∫±ng h√¨nh minh h·ªça b√™n d∆∞·ªõi</p>\n<p><img src=\"https://i2.wp.com/css-tricks.com/wp-content/uploads/2020/06/JakPwnSa.png?w=398&#x26;ssl=1\"></p>\n<p>Nh·ªØng g√¨ trong √¥ m√†u t√≠m, c·∫ßn di·ªÖn ra tr∆∞·ªõc s·ª± ki·ªán <em>paint</em> c·ªßa tr√¨nh duy·ªát.</p>\n<p>ƒê·ªÉ ƒë·∫°t m·ª•c ƒë√≠ch <strong><em>transform</em> tr∆∞·ªõc khi tr√¨nh duy·ªát th·ª±c hi·ªán <code class=\"language-text\">paint</code></strong>, ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng <code class=\"language-text\">useLayoutEffect</code>, nh·ªØng g√¨ di·ªÖn ra ·ªü ƒë√¢y s·∫Ω x·∫£y ra <strong>sau khi DOM c·∫≠p nh·∫≠p</strong>, <strong>tr∆∞·ªõc khi paint</strong></p>\n<iframe height=\"265\" style=\"width: 100%;\" scrolling=\"no\" title=\"React FLIP animations\" src=\"https://codepen.io/jlkiri/embed/oNjaMrK?height=265&theme-id=light&default-tab=js,result\" frameborder=\"no\" loading=\"lazy\" allowtransparency=\"true\" allowfullscreen=\"true\">\n  See the Pen <a href='https://codepen.io/jlkiri/pen/oNjaMrK'>React FLIP animations</a> by Kirill Vasiltsov\n  (<a href='https://codepen.io/jlkiri'>@jlkiri</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n<p>V·ªõi l·∫ßn render ƒë·∫ßu ti√™n, ch√∫ng ta c·∫ßn <em>cache</em> l·∫°i v·ªã tr√≠ cu·ªëi c√πng c·ªßa animation</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token keyword\">const</span> rects <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">current</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">const</span> squares <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.square'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> square <span class=\"token keyword\">of</span> squares<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        rects<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">set</span><span class=\"token punctuation\">(</span>square<span class=\"token punctuation\">.</span><span class=\"token property-access\">id</span><span class=\"token punctuation\">,</span> square<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getBoundingClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">useLayoutEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> squares <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.square'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> square <span class=\"token keyword\">of</span> squares<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> cachedRect <span class=\"token operator\">=</span> rects<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">get</span><span class=\"token punctuation\">(</span>square<span class=\"token punctuation\">.</span><span class=\"token property-access\">id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cachedRect<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> nextRect <span class=\"token operator\">=</span> square<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getBoundingClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \n            <span class=\"token comment\">// invert</span>\n            <span class=\"token keyword\">const</span> translateX <span class=\"token operator\">=</span> cachedRect<span class=\"token punctuation\">.</span><span class=\"token property-access\">x</span> <span class=\"token operator\">-</span> nextRect<span class=\"token punctuation\">.</span><span class=\"token property-access\">x</span><span class=\"token punctuation\">;</span>\n            \n            <span class=\"token comment\">// cache position v√† size</span>\n            rects<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">set</span><span class=\"token punctuation\">(</span>square<span class=\"token punctuation\">.</span><span class=\"token property-access\">id</span><span class=\"token punctuation\">,</span> nextRect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \n            <span class=\"token comment\">// play animation</span>\n            square<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">animate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span> transform<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translateX(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>translateX<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            \t<span class=\"token punctuation\">{</span> transform<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translateX(0px)</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> ids<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>T√≥m t·∫Øt nh·ªØng g√¨ ƒë√£ th·ª±c hi·ªán b·∫±ng h√¨nh minh h·ªça sau</p>\n<p><img src=\"https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/06/kTkr-F7_.png?fit=1024%2C1024&#x26;ssl=1\" alt=\"Diagram. Cache the size and position, retrieve previous size and position from cache, get new size and position, calculate the difference, and play the animation.\"></p>\n<p><strong>M·ªôt v√†i l∆∞u √Ω</strong></p>\n<ul>\n<li>ƒê·∫£m b·∫£o c√°c t√≠nh to√°n kh√¥ng v∆∞·ª£t qu√° 100ms, ƒëi·ªÅu n√†y nh·∫±m ƒë·∫£m b·∫£o user kh√¥ng c·∫£m nh·∫≠n c√≥ m·ªôt ƒë·ªô tr·ªÖ tr√™n giao di·ªán, c√≥ th·ªÉ ki·ªÉm tra b·∫±ng DevTools\n<img src=\"https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/06/6LqLR8Jc.png?fit=1024%2C275&#x26;ssl=1\" alt=\"img\"></li>\n<li>ƒê·ªÉ tr√°nh re-render kh√¥ng c·∫ßn thi·∫øt, ch√∫ng ta ko ƒë∆∞·ª£c d√πng <code class=\"language-text\">useState</code>, thay v√†o ƒë√≥ ch√∫ng ta ph·∫£i d√πng <code class=\"language-text\">useRef</code> m·ªôt object c·ªë ƒë·ªãnh ch√∫ng ta c√≥ th·ªÉ thay ƒë·ªïi gi√° tr·ªã m√† kh√¥ng g√¢y ra re-render</li>\n<li>Kh√¥ng th·ª±c hi·ªán ƒë·ªçc v·ªã tr√≠ -> ch·∫°y animate ngay v√† lu√¥n tr√™n element ƒë√≥, lu√¥n th·ª±c hi·ªán theo d·∫°ng ƒë·ªçc h√†ng lo·∫°t, sau ƒë√≥ animate m·ªôt lo·∫°t</li>\n<li>N·∫øu kh√¥ng mu·ªën t·ª± vi·∫øt, c√≥ th·ªÉ tham kh·∫£o 2 th∆∞ vi·ªán d√πng v·ªõi React: <a href=\"https://github.com/aholachek/react-flip-toolkit\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">react-flip-toolkit</code></a> v√† <a href=\"https://github.com/jlkiri/react-easy-flip\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">react-easy-flip</code></a>.</li>\n</ul>\n<p><a href=\"https://css-tricks.com/everything-you-need-to-know-about-flip-animations-in-react/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Everything You Need to Know About FLIP Animations in React</a></p>\n","cover_image":""}},{"node":{"id":"2bda1aea7bf5ac181ed1d3a656b277f5","title":"H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng useMemo trong React","path":"/2020-10-26-huong-dan-su-dung-usememo-react/","date":"2020-10-26","timeToRead":2,"desc":"N·∫øu b·∫°n th·∫•y app c·ªßa m√¨nh b·∫Øt ƒë·∫ßu ch·∫≠m, ƒë√≥ l√† l√∫c b·∫°n n√™n b·∫Øt ƒë·∫ßu c√¢n nh·∫Øc c√°c ph∆∞∆°ng ph√°p ƒë·ªÉ t·ªëi ∆∞u t·ªëc ƒë·ªô v√† ƒë·ªçc b√†i vi·∫øt n√†y.","content":"<p>Th∆∞·ªùng React kh√° nhanh, ch√∫ng ta c≈©ng kh√¥ng c·∫ßn qu√° b·∫≠n t√¢m ƒë·∫øn vi·ªác t·ªëi ∆∞u, nhi·ªÅu b·∫°n c≈©ng s·∫Ω kh√¥ng ƒë·ªìng √Ω v·ªõi quan ƒëi·ªÉm n√†y: nh·ªØng <strong>ti·ªán √≠ch</strong> ƒë·ªÉ t·ªëi ∆∞u m√† React cung c·∫•p, ch∆∞a ƒë·ªß <strong>tr∆∞·ªüng th√†nh</strong> (premature - theo quan ƒëi·ªÉm c·ªßa t√°c gi·∫£).</p>\n<p>Ch√∫ng ta s·∫Ω c√πng xem qua c√°ch s·ª≠ d·ª•ng m·ªôt <strong>ti·ªán √≠ch</strong> nh∆∞ v·∫≠y trong React ƒë·ªÉ t·ªëi ∆∞u t·ªëc ƒë·ªô: <code class=\"language-text\">useMemo</code></p>\n<h2 id=\"khi-n√†o-s·ª≠-d·ª•ng-usememo\"><a href=\"#khi-n%C3%A0o-s%E1%BB%AD-d%E1%BB%A5ng-usememo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Khi n√†o s·ª≠ d·ª•ng <code class=\"language-text\">useMemo</code></h2>\n<blockquote>\n<p>Khi c√≥ nh·ªØng t√≠nh to√°n ƒë·ªÉ l·∫•y gi√° tr·ªã kh√° m·∫•t c√¥ng, ch√∫ng ta l∆∞u k·∫øt qu·∫£ t√≠nh l·∫°i cho ti·∫øt ki·ªám th·ªùi gian t√≠nh to√°n.</p>\n</blockquote>\n<p>ƒê·ª´ng d√πng l·ªôn v·ªõi <code class=\"language-text\">React.memo</code> v√† <code class=\"language-text\">useCallback</code>, ch√∫ng n√≥ ƒë∆∞·ª£c d√πng v√†o nh·ªØng m·ª•c ƒë√≠ch r·∫•t kh√°c nhau.</p>\n<h2 id=\"v√≠-d·ª•\"><a href=\"#v%C3%AD-d%E1%BB%A5\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V√≠ d·ª•</h2>\n<p>V√≠ d·ª• ch√∫ng ta c√≥ ·ª©ng d·ª•ng hi·ªÉn th·ªã danh s√°ch user, v·ªõi t√≠nh nƒÉng cho ph√©p filter theo user name.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword module\">import</span> <span class=\"token maybe-class-name\">React</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">const</span> users <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'Robin'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'Dennis'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">App</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>text<span class=\"token punctuation\">,</span> setText<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>search<span class=\"token punctuation\">,</span> setSearch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleText</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n \n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleSearch</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setSearch</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n \n  <span class=\"token keyword\">const</span> filteredUsers <span class=\"token operator\">=</span> users<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Filter function is running ...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">.</span><span class=\"token property-access\">name</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">includes</span><span class=\"token punctuation\">(</span>search<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>text<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleText<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleSearch<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        Search\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n \n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span></span> <span class=\"token attr-name\">list</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>filteredUsers<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">List</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> list <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>list<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ListItem</span></span> <span class=\"token attr-name\">key</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span><span class=\"token property-access\">id</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">item</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">ListItem</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> item <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span><span class=\"token property-access\">name</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token maybe-class-name\">App</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Ch·ªâ khi ƒëi·ªÅn gi√° tr·ªã v√†o input, sau ƒë√≥ click <code class=\"language-text\">handleSearch</code> th√¨ l√∫c gi√° tr·ªã c·ªßa <code class=\"language-text\">filteredUsers</code> m·ªõi c√≥ s·ª± thay ƒë·ªïi, tuy nhi√™n v√¨ <code class=\"language-text\">filteredUsers</code> l√† m·ªôt h√†m n√≥ s·∫Ω lu√¥n ƒë∆∞·ª£c r·ªìi khi render, m·ªói l·∫ßn g√µ m·ªôt k√Ω t·ª± v√†o input, n√≥ ƒë√£ b·ªã g·ªçi l·∫°i, v·ªõi gi√° tr·ªã tr·∫£ v·ªÅ y nh∆∞ nhau.</p>\n<p>T·∫•t nhi√™n ·ª©ng d·ª•ng nh·ªè th√¨ v·∫•n ƒë·ªÅ ·ªü ƒë√¢y ko qu√° nghi√™m tr·ªçng. C√≤n n·∫øu mu·ªën t·ªëi ∆∞u h∆°n, ch√∫ng ta l∆∞u l·∫°i k·∫øt qu·∫£, v√† ch·ªâ ch·∫°y l·∫°i h√†m t√≠nh to√°n k·∫øt qu·∫£ khi c√≥ m·ªôt s·ª± thay ƒë·ªïi n√†o ƒë√≥.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> filteredUsers <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useMemo</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span>\n    users<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">user</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Filter function is running ...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">.</span><span class=\"token property-access\">name</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">includes</span><span class=\"token punctuation\">(</span>search<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>search<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>H√†m n√†y ch·ªâ <em>execute</em> khi gi√° tr·ªã <code class=\"language-text\">search</code> thay ƒë·ªïi so v·ªõi l·∫ßn ch·∫°y tr∆∞·ªõc ƒë√≥.</p>\n<p>B·∫£n ch·∫•t b√™n trong React th·ª±c hi·ªán m·ªôt ph√©p so s√°nh tr√™n gi√° tr·ªã <code class=\"language-text\">search</code> tr∆∞·ªõc khi th·ª±c thi. ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† n·∫øu chi ph√≠ cho vi·ªác so s√°nh n√†y trong m·ªôt s·ªë t√¨nh hu·ªëng, ƒë√¥i khi c√≤n t·ªën nhi·ªÅu th·ªùi gian h∆°n l√† vi·ªác g·ªçi lu√¥n m√† ko c·∫ßn so s√°nh. N√™n c√°c b·∫°n c√≥ s·ª≠ d·ª•ng c≈©ng n√™n linh ƒë·ªông, kh√¥ng n√™n qu√° c·ª©ng nh·∫Øc.</p>\n<p><a href=\"https://www.robinwieruch.de/react-usememo-hook?ck_subscriber_id=887772023\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">How to useMemo in React</a></p>\n","cover_image":""}},{"node":{"id":"65939cbff171700edacd6c539fa75296","title":"H∆∞·ªõng d·∫´n ch·∫°y nhi·ªÅu Node version kh√°c nhau tr√™n Windows","path":"/2020-10-09-huong-dan-chay-nhieu-node-version-khac-nhau/","date":"2020-10-09","timeToRead":1,"desc":"","content":"<p><strong>T·∫°i sao l·∫°i c√≥ nhu c·∫ßu n√†y</strong>?</p>\n<p>V√≠ d·ª• nh∆∞ source code m·ªói project y√™u c·∫ßu m·ªôt node version kh√°c nhau, v√† b·∫Øt bu·ªôc ph·∫£i ƒë√∫ng version ƒë√≥ <em>m·ªõi ch·ªãu</em></p>\n<p><strong>Todo b·∫°n c·∫ßn l√†m</strong></p>\n<p>G·ª° b·ªè Node ƒëang s·ª≠ d·ª•ng, v√† x√≥a h·∫øt c√°c th∆∞ m·ª•c li√™n quan\n<code class=\"language-text\">C:\\Users&lt;user&gt;\\AppData\\Roaming\\npm</code></p>\n<p>T·∫£i v·ªÅ v√† c√†i ƒë·∫∑t <em>Node Version Manager</em></p>\n<ul>\n<li>N·∫øu d√πng linux hay macOS: <a href=\"https://github.com/creationix/nvm\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">nwm</a></li>\n<li>N·∫øu d√πng Windows: <a href=\"https://github.com/coreybutler/nvm/releases\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">NVM m·ªõi nh·∫•t</a></li>\n</ul>\n<p>V√≠ d·ª• b·∫°n c·∫ßn ch·∫°y Node version 10.18.0 v√† 12.16.1, ch·∫°y l·ªánh sau tr·ªçng PowerShell</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># installs the node version 10.19.0</span>\nnvm <span class=\"token function\">install</span> <span class=\"token number\">10.19</span>.0\n\n<span class=\"token comment\"># installs the node version 12.16.1</span>\nnvm <span class=\"token function\">install</span> <span class=\"token number\">12.16</span>.1</code></pre>\n<p>ƒê·ªÉ ch·ªâ ƒë·ªãnh version mu·ªën d√πng, ch·∫°y l·ªánh</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">nvm use <span class=\"token number\">12.16</span>.1\n// switch v·ªÅ <span class=\"token number\">10.19</span>.0\nnvm use <span class=\"token number\">10.19</span>.0</code></pre>\n<p>L∆∞u √Ω ch·∫°y b·∫±ng quy·ªÅn admin nh√©.</p>\n","cover_image":""}},{"node":{"id":"7faee24f9ee3fec6373997f1c4067e06","title":"ƒê·ªãnh d·∫°ng s·ªë trong JavaScript","path":"/2020-09-14-format-number-trong-javascript/","date":"2020-09-14","timeToRead":1,"desc":"C√πng nghi√™n c·ª©u xem Javascript h·ªï tr·ª£ s·∫µn nh·ªØng h√†m n√†o ƒë·ªÉ ƒë·ªãnh d·∫°ng ki·ªÉu s·ªë tr∆∞·ªõc khi nghƒ© ƒë·∫øn m·ªôt th∆∞ vi·ªán th·ª© 3","content":"<h2 id=\"numberprototypetolocalestring\"><a href=\"#numberprototypetolocalestring\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Number.prototype.toLocaleString()</h2>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> number <span class=\"token operator\">=</span> <span class=\"token number\">12345.6789</span>\n\n<span class=\"token comment\">// s·∫Ω l·∫•y local m·∫∑c ƒë·ªãnh c·ªßa tr√¨nh duy·ªát</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toLocaleString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 12,345.679 (en-US)</span>\n\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>number<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toLocaleString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'vi-VN'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 123.456,789</span></code></pre>\n<h2 id=\"ƒë·ªãnh-d·∫°ng-ti·ªÅn-t·ªá\"><a href=\"#%C4%91%E1%BB%8Bnh-d%E1%BA%A1ng-ti%E1%BB%81n-t%E1%BB%87\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒê·ªãnh d·∫°ng ti·ªÅn t·ªá</h2>\n<p>N·∫øu mu·ªën ƒë·ªãnh d·∫°ng ti·ªÅn t·ªá, b·∫°n c·∫ßn s·ª≠ d·ª•ng th√™m tham s·ªë th·ª© 2 c·ªßa h√†m <code class=\"language-text\">toLocaleString</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n    style<span class=\"token operator\">:</span> <span class=\"token string\">'currency'</span><span class=\"token punctuation\">,</span>\n    currency<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>gi√° tr·ªã <span class=\"token constant\">ISO</span> <span class=\"token number\">4217</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// tham s·ªë b·∫Øt bu·ªôc, ko truy·ªÅn l·ªói</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Tham kh·∫£o gi√° tr·ªã <a href=\"http://www.currency-iso.org/en/home/tables/table-a1.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ISO 3217</a></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> number <span class=\"token operator\">=</span> <span class=\"token number\">12345.6789</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>\n    number<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toLocaleString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'vi-VN'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        style<span class=\"token operator\">:</span> <span class=\"token string\">'currency'</span><span class=\"token punctuation\">,</span>\n        currency<span class=\"token operator\">:</span> <span class=\"token string\">'VND'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 12.346 ‚Ç´</span>\n\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>\n  number<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toLocaleString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ja-JP'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    style<span class=\"token operator\">:</span> <span class=\"token string\">'currency'</span><span class=\"token punctuation\">,</span>\n    currency<span class=\"token operator\">:</span> <span class=\"token string\">'JPY'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Ôø•12,346</span></code></pre>\n<h2 id=\"ph·∫ßn-trƒÉm\"><a href=\"#ph%E1%BA%A7n-tr%C4%83m\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ph·∫ßn trƒÉm</h2>\n<p>Chuy·ªÉn ƒë·ªìi th√†nh ƒë∆°n v·ªã ph·∫ßn % ngo√†i vi·ªác nh√¢n v·ªõi 100, ns c√≤n th√™m 2 t√πy ch·ªânh c≈©ng vui l√† <code class=\"language-text\">minimumFractionDigits</code> v√† <code class=\"language-text\">maximumFractionDigits</code> (m·∫∑c ƒë·ªãnh l√† 0 v√† 2 cho ki·ªÉu ti·ªÅn t·ªá) ƒë·ªÉ l·∫•y s·ªë l∆∞·ª£ng k√Ω t·ª± mu·ªën l·∫•y</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> number <span class=\"token operator\">=</span> <span class=\"token number\">0.1234</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>\n  number<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toLocaleString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'en-US'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    style<span class=\"token operator\">:</span> <span class=\"token string\">'percent'</span><span class=\"token punctuation\">,</span>\n    minimumFractionDigits<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 12.34%</span>\n\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>\n  number<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toLocaleString</span><span class=\"token punctuation\">(</span><span class=\"token string\">'en-US'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    style<span class=\"token operator\">:</span> <span class=\"token string\">'percent'</span><span class=\"token punctuation\">,</span>\n    minimumFractionDigits<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 12.3%</span></code></pre>\n<h2 id=\"intlnumberformat\"><a href=\"#intlnumberformat\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Intl.NumberFormat</h2>\n<p>N·∫øu h√¥ng ∆∞u <code class=\"language-text\">Number.prototype.toLocaleString()</code> c√≥ th·ªÉ d√πng constructor <code class=\"language-text\">Intl.NumberFormat</code>. N·∫øu nh∆∞ th·∫•y sao ph·∫£i lƒÉng tƒÉng gi·ªØa 2 th·∫±ng n√†y? Trong tr∆∞·ªùng h·ª£p b·∫°n c·∫ßn l√†m vi·ªác ƒë·ªãnh d·∫°ng n√†y t·ªõi lui nhi·ªÅu l·∫ßn cho c√πng m·ªôt locale, c√πng m·ªôt t√πy ch·ªçn c·ªë ƒë·ªãnh, th√¨ b·∫°n n√™n d√πng <code class=\"language-text\">Intl.NumberFormat</code> cho chu·∫©n t·ªëc ƒë·ªô.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> numberFormat <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Intl<span class=\"token punctuation\">.</span>NumberFormat</span><span class=\"token punctuation\">(</span><span class=\"token string\">'vi-VN'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  style<span class=\"token operator\">:</span> <span class=\"token string\">'currency'</span><span class=\"token punctuation\">,</span>\n  currency<span class=\"token operator\">:</span> <span class=\"token string\">'VND'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>numberFormat<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">format</span><span class=\"token punctuation\">(</span><span class=\"token number\">12345.6789</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 12.346 ‚Ç´</span>\n\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>numberFormat<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">format</span><span class=\"token punctuation\">(</span><span class=\"token number\">2345.67891</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 2.346 ‚Ç´</span></code></pre>\n<p><a href=\"https://elijahmanor.com/blog/format-js-numbers\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Natively Format JavaScript Numbers</a></p>\n<p>Happy coding üéâüôå</p>\n","cover_image":""}},{"node":{"id":"cd51997859f5174455685b3b08c3ed09","title":"Th√™m ki·ªÉm tra type trong Javascript v·ªõi VS Code","path":"/2020-08-06-them-type-check-cho-javascript-voi-vscode/","date":"2020-08-06","timeToRead":2,"desc":"B·∫°n th·∫•y r·∫±ng JavaScript ƒë√£ ƒë·ªß x√†i trong d·ª± √°n, b·∫°n kh√¥ng ∆∞a th·∫±ng TypeScript v√† b·∫°n ƒëang s·ª≠ d·ª•ng VS Code. B√†i vi·∫øt n√†y l√† d√†nh cho b·∫°n r·ªìi.","content":"<p>VS Code c√≥ m·ªôt c√¥ng c·ª• kh√¥ng th·ªÉ tuy·ªát v·ªùi h∆°n cho c√°c b·∫°n vi·∫øt JS m·ªôt c√°ch an to√†n ko s·ª£ sai type. T√∫m g·ªçn ch·ªâ b·∫±ng m·ªôt comment th·∫ßn th√°nh</p>\n<blockquote>\n<p>@ts-check</p>\n</blockquote>\n<p>V√≠ d·ª•, b·∫°n mu·ªën nghi√™m c·∫•m vi·ªác thay ƒë·ªïi type c·ªßa m·ªôt bi·∫øn ƒë√£ g√°n s·∫µn gi√° tr·ªã tr∆∞·ªõc ƒë√≥</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\nfoo <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre>\n<p>T·∫•t c·∫£ nh·ªØng g√¨ b·∫°n c·∫ßn l√†m</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// @ts-check</span>\n<span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\nfoo <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// indicates error</span></code></pre>\n<p>VS Code s·∫Ω th√¥ng b√°o cho b·∫°n m·ªôt l·ªói r·∫•t <em>d·ªÖ th∆∞∆°ng</em> nh∆∞ th·∫ø n√†y</p>\n<blockquote>\n<p>Type <code class=\"language-text\">false</code> is not assignable to type <code class=\"language-text\">Number</code></p>\n</blockquote>\n<p>M·ªôt v√†i v√≠ d·ª• s·ª≠ d·ª•ng ƒë·ªÉ b·∫°n tham kh·∫£o</p>\n<h2 id=\"ki·ªÉm-tra-params-c·ªßa-h√†m\"><a href=\"#ki%E1%BB%83m-tra-params-c%E1%BB%A7a-h%C3%A0m\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ki·ªÉm tra params c·ªßa h√†m</h2>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Code tr√™n v·∫´n ko sai nh√©, m·∫∑c d√π ch√∫ng ta kh√¥ng h·ªÅ khai b√°o param th·ª© 3. Th√™m // @ts-check ƒë·ªÉ th√¥ng b√°o khi <em>v√¥ t√¨nh</em> truy·ªÅn nhi·ªÅu h∆°n s·ªë param c·∫ßn thi·∫øt</p>\n<blockquote>\n<p>Expected 0-2 arguments but got 3</p>\n</blockquote>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// @ts-check</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// complains about the `3`</span></code></pre>\n<h2 id=\"ki·ªÉm-tra-object\"><a href=\"#ki%E1%BB%83m-tra-object\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ki·ªÉm tra Object</h2>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// @ts-check</span>\n<span class=\"token keyword\">let</span> gameObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  x<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  y<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  width<span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n  height<span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">getArea</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">width</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">height</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\ngameObject<span class=\"token punctuation\">.</span><span class=\"token property-access\">z</span><span class=\"token punctuation\">;</span></code></pre>\n<p>C√°i n√†y n√≥ s·∫Ω kh√¥ng b·∫Øt l·ªói, ch√∫ng ta v·∫´n ƒë∆∞·ª£c quy·ªÅn th√™m <code class=\"language-text\">z</code> sau khi ƒë√£ khai b√°o</p>\n<p>V·∫≠y sao? D√πng JsDoc</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// @ts-check</span>\n\n<span class=\"token doc-comment comment\">/** <span class=\"token keyword\">@type</span> <span class=\"token class-name\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>x<span class=\"token operator\">:</span> number<span class=\"token punctuation\">,</span> y<span class=\"token operator\">:</span> number<span class=\"token punctuation\">,</span> width<span class=\"token operator\">:</span> number<span class=\"token punctuation\">,</span> height<span class=\"token operator\">:</span> number<span class=\"token punctuation\">,</span> getArea<span class=\"token operator\">:</span> Function <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> */</span>\n<span class=\"token keyword\">let</span> gameObject <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  x<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  y<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  width<span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n  height<span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">getArea</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">width</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">height</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\ngameObject<span class=\"token punctuation\">.</span><span class=\"token property-access\">z</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"bi·∫øn-kh√¥ng-b·∫Øt-bu·ªôc\"><a href=\"#bi%E1%BA%BFn-kh%C3%B4ng-b%E1%BA%AFt-bu%E1%BB%99c\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Bi·∫øn kh√¥ng b·∫Øt bu·ªôc</h2>\n<p>Ch√∫ng ta c√≥ m·ªôt h√†m m√† gi√° tr·ªã param truy·ªÅn v√†o kh√¥ng b·∫Øt bu·ªôc l√∫c n√†o c√πng c√≥</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>config <span class=\"token operator\">&amp;&amp;</span> config<span class=\"token punctuation\">.</span><span class=\"token property-access\">shouldRun</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// run</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> shouldRun<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Ch·ªó n√†y ch√∫ng ta c≈©ng c·∫ßn s·ª± h·ªó tr·ª£ c·ªßa JsDoc nh∆∞ tr∆∞·ªùng h·ª£p tr√™n</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// @ts-check</span>\n\n<span class=\"token doc-comment comment\">/**\n * <span class=\"token keyword\">@param</span> <span class=\"token class-name\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> shouldRun<span class=\"token operator\">:</span> boolean <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token optional-parameter\"><span class=\"token punctuation\">[</span><span class=\"token parameter\">config</span><span class=\"token punctuation\">]</span></span> - Somebody's name.\n */</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>config <span class=\"token operator\">&amp;&amp;</span> config<span class=\"token punctuation\">.</span><span class=\"token property-access\">shouldRun</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// run</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> canRun<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// this now indicates an error</span>\n<span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> shouldRun<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>V·ªõi c√°ch thi·∫øt ƒë·∫∑t nh∆∞ v·∫≠y, ch√∫ng ta s·∫Ω nh·∫≠n ƒë∆∞·ª£c c·∫£nh b√°o khi truy·ªÅn v√†o m·ªôt <code class=\"language-text\">object</code> m√† kh√¥ng c√≥ gi√° tr·ªã <code class=\"language-text\">shouldRun</code></p>\n<h2 id=\"ngo·∫°i-l·ªá\"><a href=\"#ngo%E1%BA%A1i-l%E1%BB%87\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ngo·∫°i l·ªá</h2>\n<p>N·∫øu c√≥ tr∆∞·ªùng h·ª£p ngo·∫°i l·ªá n√†o ƒë√≥ b·∫°n mu·ªën b·ªè qua vi·ªác ki·ªÉm tra t√≠nh <em>chu·∫©n m·ª±c</em> c·ªßa type, d√πng th·∫ßn ch√∫ <code class=\"language-text\">//@ts-ignore</code> ho·∫∑c <code class=\"language-text\">//@ts-nocheck</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">//@ts-ignore</span>\n<span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> canRun<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Sau nhi·ªÅu nƒÉm chinh chi·∫øn, m√¨nh ng·ªô ra r·∫±ng TypeScript c≈©ng t·ªët, nh∆∞ng n√≥ kh√¥ng d√†nh cho t·∫•t c·∫£ m·ªçi ng∆∞·ªùi, t·∫•t c·∫£ d·ª± √°n. Nh·ªØng c√°i ki·ªÉm tra nh·ªè nh·ªè nh∆∞ v·∫≠y ƒë√¥i khi l·∫°i mang kh√°c bi·ªát ƒë·ªß l·ªõn khi b·∫°n vi·∫øt code.</p>\n<p><a href=\"https://www.typescriptlang.org/docs/handbook/type-checking-javascript-files.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Xem th√™m ki·ªÉm tra type cho JS</a></p>\n<p><a href=\"https://dev.to/itnext/type-checking-your-javascript-with-vs-code-the-superpowers-you-didn-t-know-you-had-1jp\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Type checking your JavaScript with VS Code - the superpowers you didn't know you had</a></p>\n","cover_image":""}},{"node":{"id":"4c10a4ea5b43449c00b3d2717f69c6a3","title":"S·ª≠ d·ª•ng ellipsis text v·ªõi flexbox","path":"/2020-07-22-su-dung-ellipsis-text-voi-flexbox/","date":"2020-07-22","timeToRead":1,"desc":"C√¢u chuy·ªÉn c·∫Øt chu·ªói khi qu√° d√†i b·∫±ng CSS, trong t√¨nh hu·ªëng sau, c√°i t√™n file c·ªßa b·∫°n qu√° d√†i, nh∆∞ng b·∫°n kh√¥ng mu·ªën c·∫Øt ·ªü cu·ªëi chu·ªói, m√† c·∫Øt ·ªü gi·ªØa ƒë·ªÉ v·∫´n th·∫•y ƒë∆∞·ª£c file extension","content":"<p><img src=\"https://leonardofaria.net/wp-content/uploads/2020/07/finder.jpg\" alt=\"Finder\"></p>\n<p>Chu·ªói ch∆∞a c·∫Øt</p>\n<pre class=\"language-text\"><code class=\"language-text\">mobile-phone-screenshot-long-fine-name.png</code></pre>\n<p>Chu·ªói sau khi c·∫Øt</p>\n<pre class=\"language-text\"><code class=\"language-text\">mobile-phone-sc...g-fine-name.png</code></pre>\n<p><img src=\"https://leonardofaria.net/wp-content/uploads/2020/07/filename.gif\" alt=\"Finder\"></p>\n<p>C√°i HTML structure dƒ© nhi√™n l√† ch√∫ng ta t√°ch c√°i ƒëu√¥i file ra ri√™ng, ƒë·ªôc l·∫≠p v·ªõi c√°i t√™n</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>filename<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>filename__base<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>this-file-has-a-really-really-really-long-filename.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>filename__extension<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>pdf<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>CSS:</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token class\">.filename</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">min-width</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\"><span class=\"token class\">.filename__base</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">text-overflow</span><span class=\"token punctuation\">:</span> ellipsis<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">white-space</span><span class=\"token punctuation\">:</span> nowrap<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\"><span class=\"token class\">.filename__extension</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">flex-shrink</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Vi·ªác ellipsis text s·∫Ω ƒë∆∞·ª£c th·ª±c hi·ªán b·ªüi k·∫øt h·ª£p ba thu·ªôc t√≠nh <code class=\"language-text\">text-overflow</code>, <code class=\"language-text\">white-space</code> v√† <code class=\"language-text\">overflow</code>. Tuy nhi√™n ch√∫ng ta v·∫´n ph·∫£i ∆∞·ªõc l∆∞·ª£ng ƒë∆∞·ª£c m·ªëi li√™n h·ªá gi·ªØa ph·∫ßn ch·ª©a file name <code class=\"language-text\">.filename__base</code> v√† element b·ªçc b√™n ngo√†i (·ªü ƒë√¢y l√† <code class=\"language-text\">.filename</code>)</p>\n<p>Th·ªß thu·∫≠t quan tr·ªçng ·ªü ƒë√¢y l√† d√πng thu·ªôc t√≠nh <strong><code class=\"language-text\">min-width: 0</code></strong>, ch√∫ng ta ƒë·∫∑t gi√° tr·ªã nh·ªè nh·∫•t cho ph√©p c·ªßa <code class=\"language-text\">.filename</code>, n√≥ s·∫Ω <em>√©p</em> c√°c th·∫±ng con b√™n d∆∞·ªõi co l·∫°i n·∫øu n√≥ kh√¥ng c√≥ khai b√°o thu·ªôc t√≠nh <code class=\"language-text\">flex-shrink</code></p>\n<p><a href=\"https://codepen.io/leonardofaria/pen/rNxZJad\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Demo c√°c b·∫°n xem ·ªü ƒë√¢y</a></p>\n<p><a href=\"https://leonardofaria.net/2020/07/18/using-flexbox-and-text-ellipsis-together/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Using Flexbox and text ellipsis together</a></p>\n","cover_image":""}},{"node":{"id":"d18d52ab708e1b700e4bcc10ebd3d7cc","title":"Hi·ªÉm nguy r√¨nh r·∫≠p khi d√πng to√°n t·ª≠ + trong javascript","path":"/2020-04-05-hiem-nguy-rinh-rap-khi-dung-toan-tu-cong-chuoi/","date":"2020-04-05","timeToRead":1,"desc":"M·ªôt to√°n t·ª≠ ph√¨nh ph∆∞·ªùng c√≥ th·ªÉ l√†m ch√∫ng ta ƒëi√™u ƒë·ª©ng","content":"<p>Nh∆∞ m·ªçi th·ª© ng√¥n ng·ªØ l·∫≠p tr√¨nh, ng√¥n ng·ªØ to√°n h·ªçc, Javascript d√πng d·∫•u <code class=\"language-text\">+</code> ƒë·ªÉ th·ª±c hi·ªán c·ªông gi√° tr·ªã. Tuy nhi√™n, v√¨ l√† Javascript, anh <em>c√≥ quy·ªÅn</em> kh√¥ng ƒëi theo quy chu·∫©n chung, anh c√≤n ƒë∆∞·ª£c d√πng cho vi·ªác <strong>n·ªëi chu·ªói</strong></p>\n<p>N·∫øu ch√∫ng ta d√πng n√≥ cho vi·ªác c·ªông s·ªë</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> giaKhauTrangBinhThuong <span class=\"token operator\">=</span> <span class=\"token number\">35000</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> doiGiaDichCovy <span class=\"token operator\">=</span> <span class=\"token number\">300000</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> tienShip <span class=\"token operator\">=</span> <span class=\"token number\">20000</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> chiPhiMuaHopKhauTrang <span class=\"token operator\">=</span> giaKhauTrangBinhThuong <span class=\"token operator\">*</span> doiGiaDichCovy <span class=\"token operator\">+</span> tienShip<span class=\"token punctuation\">;</span></code></pre>\n<p>Ch√∫ng ta d√πng n√≥ cho vi·ªác <strong>n·ªëi chu·ªói</strong></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> ten <span class=\"token operator\">=</span> <span class=\"token string\">\"Tui l√† An\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> nenLamGi <span class=\"token operator\">=</span> <span class=\"token string\">\"Tui ·ªü nh√† cho B√¨nh An\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> tuiLaAi <span class=\"token operator\">=</span> ten <span class=\"token operator\">+</span> <span class=\"token string\">' &amp; '</span> <span class=\"token operator\">+</span> nenLamGi<span class=\"token punctuation\">;</span></code></pre>\n<p>Ch√∫ng ta s·∫Ω c√≥ c√¢u \"Tui l√† An &#x26; Tui ·ªü nh√† cho B√¨nh An\", m·ªçi th·ª© ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng.</p>\n<p>Th√≠ d·ª• b·∫°n <strong>l·ª°</strong> vi·∫øt th·∫ø n√†y th√¨ sao</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> seRaSao <span class=\"token operator\">=</span> <span class=\"token number\">9</span> <span class=\"token operator\">+</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Khi c√≥ 2 gi√° tr·ªã kh√°c ki·ªÉu, n√≥ s·∫Ω ∆∞u ti√™n ki·ªÉu gi√° tr·ªã m·∫°nh h∆°n, l√† ki·∫øu <code class=\"language-text\">string</code> n√™n k·∫øt qu·∫£ ch√∫ng ta nh·∫≠n l√† \"91\" ch·ªØ kh√¥ng ph·∫£i <code class=\"language-text\">10</code></p>\n<p>ƒêi·ªÅu ƒë√∫c k·∫øt ·ªü ƒë√¢y l√† g√¨, h·ªÖ ch√∫ng ta mu·ªën c·ªông 2 con s·ªë l·∫°i, chuy·ªÉn n√≥ v·ªÅ gi√° tr·ªã s·ªë <code class=\"language-text\">Number(ten_bien)</code> tr∆∞·ªõc cho ch·∫Øc.</p>\n","cover_image":""}},{"node":{"id":"6dd172312a7c9858ab04392f1b780d3b","title":"N√™n d√πng g√¨ thay cho input number","path":"/2020-03-27-nen-dung-gi-thay-cho-input-number/","date":"2020-03-27","timeToRead":1,"desc":"Ngo√†i input type number, c√≤n nh·ªØng gi√° tr·ªã g√¨ b·∫°n n√™n c√¢n nh·∫Øc s·ª≠ d·ª•ng","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#tel\">tel</a></li>\n<li><a href=\"#decimal\">decimal</a></li>\n<li><a href=\"#email\">Email</a></li>\n<li><a href=\"#url\">Url</a></li>\n<li><a href=\"#search\">Search</a></li>\n</ul>\n<!-- /TOC -->\n<p>C√≥ th·ªÉ b·∫°n s·∫Ω nghƒ© ngay ƒë·∫øn <code class=\"language-text\">&lt;input type=&#39;number&#39; /&gt;</code> khi mu·ªën cho user nh·∫≠p s·ªë. Tuy nhi√™n <em>ƒë·ªùi kh√¥ng nh∆∞ l√† m∆°</em>, n√≥ c√≥ kha kh√° v·∫•n ƒë·ªÅ, ƒë√¥i khi c√≥ nh·ªØng gi√° tr·ªã nh√¨n th√¨ nh∆∞ <em>s·ªë</em>, nh∆∞ng kh√¥ng ph·∫£i (nh∆∞ credit card), ho·∫∑c m·ªôt d·∫°ng chu·ªói s·ªë.</p>\n<p>Tr√™n Gov.uk h·ªç d√πng ki·ªÉu n√†y</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">inputmode</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>numeric<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">pattern</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>[0-9]*<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre>\n<p>Thu·ªôc t√≠nh <code class=\"language-text\">inputmode</code> c≈©ng kh√° hay ho, ƒë∆∞·ª£c ƒë·ªÅ c·∫≠p r·∫•t c≈© th·ªÉ <a href=\"https://css-tricks.com/everything-you-ever-wanted-to-know-about-inputmode/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">·ªü ƒë√¢y</a></p>\n<p>T√≥m t·∫Øt l·∫°i cho b·∫°n n√†o l∆∞·ªùi ƒë·ªçc</p>\n<h3 id=\"tel\"><a href=\"#tel\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>tel</h3>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">inputmode</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tel<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre>\n<h3 id=\"decimal\"><a href=\"#decimal\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>decimal</h3>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">inputmode</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>decimal<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre>\n<p><img src=\"https://i0.wp.com/css-tricks.com/wp-content/uploads/2019/05/inputmode-03.png?ssl=1\"></p>\n<h3 id=\"email\"><a href=\"#email\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Email</h3>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">inputmode</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre>\n<p><img src=\"https://i1.wp.com/css-tricks.com/wp-content/uploads/2019/05/inputmode-04.png?ssl=1\"></p>\n<h3 id=\"url\"><a href=\"#url\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Url</h3>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">inputmode</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre>\n<p><img src=\"https://i1.wp.com/css-tricks.com/wp-content/uploads/2019/05/inputmode-05.png?ssl=1\"></p>\n<h3 id=\"search\"><a href=\"#search\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Search</h3>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">inputmode</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>search<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre>\n<p><img src=\"https://i0.wp.com/css-tricks.com/wp-content/uploads/2019/05/inputmode-06a.png?ssl=1\"></p>\n<p>Ho·∫∑c ƒë·ªÉ nh·∫≠p v√†o m√£ code x√°c th·ª±c, Twilio s·ª≠ d·ª•ng ƒë·ªãnh d·∫°ng n√†y</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n  <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>token<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>token<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">inputmode</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>numeric<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">pattern</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>[0-9]*<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">autocomplete</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>one-time-code<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">/></span></span></code></pre>\n<p>V·ªõi <code class=\"language-text\">autocomplete=&quot;one-time-code&quot;</code> ch√∫ng ta s·∫Ω c√≥ ƒë∆∞·ª£c <em>t√≠nh nƒÉng</em> t·ª± ƒëi·ªÅn nh∆∞ th·∫ø n√†y</p>\n<p><img src=\"https://i1.wp.com/css-tricks.com/wp-content/uploads/2020/03/two-factor-input.png\" alt=\"iOS screen with a numeric input and a text message offering to auto-fill the two-factor auth\"></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete#Values\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Xem danh s√°ch autocomplete ƒë·∫ßy ƒë·ªß</a></p>\n<p><a href=\"https://css-tricks.com/what-to-use-instead-of-number-inputs/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">What to Use Instead of Number Inputs</a></p>\n","cover_image":""}},{"node":{"id":"c1f11ca1c9a0c32bafe6c1af3ebe4aad","title":"V·∫•n ƒë·ªÅ c·ªßa React Context tr√™n c√°c x·ª≠ l√Ω async","path":"/2020-03-16-van-de-cua-react-context-tren-async/","date":"2020-03-16","timeToRead":6,"desc":"React Context c√≥ ph·∫£i l√† vi√™n ƒë·∫°n b·∫°c s·∫Ω gi·∫£i quy·∫øt m·ªçi v·∫•n ƒë·ªÅ thay cho Redux hay kh√¥ng?","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#ch%C3%BAng-ta-b%E1%BA%AFt-%C4%91%E1%BA%A7u-v%E1%BB%9Bi-m%E1%BB%99t-component-duy-nh%E1%BA%A5t\">Ch√∫ng ta b·∫Øt ƒë·∫ßu v·ªõi m·ªôt component duy nh·∫•t</a></li>\n<li><a href=\"#l%E1%BA%A5y-d%E1%BB%AF-li%E1%BB%87u-sau-khi-c%C3%B3-t%C6%B0%C6%A1ng-t%C3%A1c\">L·∫•y d·ªØ li·ªáu sau khi c√≥ t∆∞∆°ng t√°c</a></li>\n<li><a href=\"#%C4%91%C3%A2u-l%C3%A0-gi%E1%BA%A3i-ph%C3%A1p\">ƒê√¢u l√† gi·∫£i ph√°p</a></li>\n</ul>\n<!-- /TOC -->\n<p>ƒê·ªÉ chia s·∫ª <code class=\"language-text\">state</code> gi·ªØa c√°c component, React cung c·∫•p API Context, <em>v·ªõi l·ªùi h·ª©a ngon ng·ªçt</em> m√† b·∫°n c√≥ th·ªÉ d·ªÖ d√†ng ƒë·ªçc ƒë∆∞·ª£c tr√™n m·∫°ng \"c√≥ th·ªÉ thay th·∫ø redux\". T·ª´ kinh nghi·ªám th·ª±c t·∫ø c·ªßa team Atlassian c≈©ng nh∆∞ c·ªßa b·∫£n th√¢n m√¨nh (l√† tui luckyluu), s·ª≠ d·ª•ng n√≥ tr√™n c√°c module l·ªõn, ho·∫∑c tr√™n to√†n b·ªô App (g·ªëc tr√™n c√πng c·ªßa c√¢y React) l√† m·ªôt c∆°n <strong>√°c m·ªông</strong> tr∆∞·ªùng k·ª≥.</p>\n<h2 id=\"ch√∫ng-ta-b·∫Øt-ƒë·∫ßu-v·ªõi-m·ªôt-component-duy-nh·∫•t\"><a href=\"#ch%C3%BAng-ta-b%E1%BA%AFt-%C4%91%E1%BA%A7u-v%E1%BB%9Bi-m%E1%BB%99t-component-duy-nh%E1%BA%A5t\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ch√∫ng ta b·∫Øt ƒë·∫ßu v·ªõi m·ªôt component duy nh·∫•t</h2>\n<p>L·∫•y v√≠ d·ª•, ch√∫ng t·∫°o ra m·ªôt component Dropdown hi·ªÉn th·ªã danh s√°ch categories</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CategoriesQuery</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> data<span class=\"token operator\">:</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">,</span> loading<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> error<span class=\"token operator\">:</span> <span class=\"token keyword null nil\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function-variable function\">fetch</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> loading<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/categories'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> loading<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> error<span class=\"token punctuation\">,</span> loading<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">props</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">children</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">state</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// s·ª≠ d·ª•ng</span>\n<span class=\"token keyword\">const</span> <span class=\"token maybe-class-name\">CategoriesDropdown</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CategoriesQuery</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    ({ data, loading, error }) => </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dropdown</span></span> <span class=\"token attr-name\">...</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CategoriesQuery</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre>\n<p>Kh√° s·∫°ch ƒë·∫πp, ƒë√∫ng kh√¥ng? L√∫c component ƒë∆∞·ª£c <em>mount</em> v√†o DOM ch√∫ng ta <em>fetch</em> d·ªØ li·ªáu, ƒë·∫∑t gi√° tr·ªã cho state loading.</p>\n<p>T√¨nh hu·ªëng hay g·∫∑p l√† ch√∫ng ta c√≥ nhu c·∫ßu s·ª≠ d·ª•ng danh s√°ch categories n√†y tr√™n m·ªôt component n√†o ƒë√≥ kh√°c. Vi·ªác c·ª© ph·∫£i <em>wrap</em> component l·∫°i d·∫°ng cha con, r·ªìi truy·ªÅn danh s√°ch categories th√¥ng qua <code class=\"language-text\">props</code> kh√¥ng ph·∫£i l√† <em>l·ª±a ch·ªçn kh√¥n ngoan</em>, ch√∫ng ta c·∫ßn l∆∞u n√≥ ·ªü m·ªôt n∆°i t·∫≠p trung (store) v√† truy xu·∫•t ·ªü b·∫•t k·ª≥ ƒë√¢u, ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng <code class=\"language-text\">createContext</code>. Vi·ªác chuy·ªÉn qua d√πng <code class=\"language-text\">createContext</code> d·ªÖ nh∆∞ ƒÉn b√∫n</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token maybe-class-name\">Provider</span><span class=\"token punctuation\">,</span> <span class=\"token maybe-class-name\">Consumer</span><span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">CategoriesConsumer</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CategoriesProvider</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> data<span class=\"token operator\">:</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">,</span> loading<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> error<span class=\"token operator\">:</span> <span class=\"token keyword null nil\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function-variable function\">fetch</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> loading<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/categories'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> loading<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> error<span class=\"token punctuation\">,</span> loading<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">props</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">state</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// s·ª≠ d·ª•ng</span>\n<span class=\"token keyword\">const</span> <span class=\"token maybe-class-name\">CategoriesDropdown</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CategoriesConsumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    ({ data, loading, error }) => </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Dropdown</span></span> <span class=\"token attr-name\">...</span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CategoriesConsumer</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre>\n<p>Ch√∫ng ta <strong>\"ch·ªâ\"</strong> c√≤n l·∫°i 2 v·∫•n ƒë·ªÅ: ƒë·∫∑t <code class=\"language-text\">&lt;CategoriesProvider/&gt;</code> ·ªü ƒë√¢u v√† chuy·ªán g√¨ s·∫Ω x·∫£y ra n·∫øu Provider v√¨ l√Ω do n√†o ƒë√≥ kh√¥ng th·ªÉ l√† <em>cha ch√∫</em> c·ªßa m·ªôt component consumer?</p>\n<p>X·ª≠ l√Ω c√°c v·∫•n ƒë·ªÅ ph·ª©c t·∫°p xung quanh vi·ªác vi·∫øt context th·∫ø n√†o cho h·ª£p l√Ω, fallback ra l√†m sao s·∫Ω c·∫ßn ƒë·∫øn m·ªôt b√†i vi·∫øt d√†i d√≤ng kh·∫Øc, gi·ªù c·ª© t∆∞·ªüng t∆∞·ª£ng b·∫°n lu√¥n c·∫ßn Provider render \"·ªü ƒë√¢u ƒë√≥\" (nhi·ªÅu khi l√† c√πng v·ªõi c·∫£ t√° provider kh√°c n·ªØa khi b·∫°n c·ª© wrap th·∫±ng n√†y trong th·∫±ng kia li√™n t·ª•c).</p>\n<h2 id=\"l·∫•y-d·ªØ-li·ªáu-sau-khi-c√≥-t∆∞∆°ng-t√°c\"><a href=\"#l%E1%BA%A5y-d%E1%BB%AF-li%E1%BB%87u-sau-khi-c%C3%B3-t%C6%B0%C6%A1ng-t%C3%A1c\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>L·∫•y d·ªØ li·ªáu sau khi c√≥ t∆∞∆°ng t√°c</h2>\n<p>ƒêo·∫°n code fetch d·ªØ li·ªáu l√∫c mount component ·ªü tr√™n tr√¥ng r·∫•t h·ª£p l√Ω, nh∆∞ng s·∫Ω c√≥ t√¨nh hu·ªëng b·∫°n c·∫ßn trigger <code class=\"language-text\">fetch</code> kh√¥ng ph·∫£i l√∫c mount.</p>\n<pre class=\"language-text\"><code class=\"language-text\">Node A\n    - Node B\n        - Node C</code></pre>\n<p>N·∫øu ƒë·∫∑t t√¨nh hu·ªëng b·∫°n fetch d·ªØ li·ªáu categories ·ªü <code class=\"language-text\">&lt;Node A /&gt;</code>, ƒë∆∞·ª£c <code class=\"language-text\">&lt;Node C/&gt;</code> hi·ªÉn th·ªã, nh∆∞ng user l√∫c s·ª≠ d·ª•ng ƒë√¥i khi ch·∫£ bao gi·ªù th·∫•y ƒë·∫øn <code class=\"language-text\">&lt;Node C/&gt;</code>, h·ªç c√≥ th·ªÉ d·ª´ng l·∫°i ·ªü m√†n h√¨nh <code class=\"language-text\">&lt;Node A /&gt;</code>, vi·ªác b·∫Øt tr√¨nh duy·ªát ƒëi l·∫•y d·ªØ li·ªáu qu√° s·ªõm <em>kh√¥ng ph·∫£i l√† m·ªôt chuy·ªán n√™n l√†m</em>. Do ƒë√≥ ch√∫ng ta s·∫Ω c√≥ nhu c·∫ßu tr·∫£ v·ªÅ h√†m l·∫•y d·ªØ li·ªáu tr·ª±c ti·∫øp xu·ªëng <code class=\"language-text\">context</code>:</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">render</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> value <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token spread operator\">...</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">state</span><span class=\"token punctuation\">,</span> fetch<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">fetch</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">props</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">children</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p><strong>ƒê·ª™NG BAO GI·ªú L√ÄM NH∆Ø V·∫¨Y</strong>. B·∫°n c√≥ th·∫•y ƒë∆∞·ª£c con bug <strong>\"ng·∫ßm\"</strong> trong c√°ch vi·∫øt tr√™n kh√¥ng? M·ªói l·∫ßn <code class=\"language-text\">CategoriesProvider</code> re-render, ch√∫ng ta truy·ªÅn xu·ªëng m·ªôt gi√° tr·ªã ho√†n to√†n m·ªõi cho <code class=\"language-text\">value</code> - <em>m·ªôt object ƒë∆∞·ª£c kh·ªüi t·∫°o m·ªõi tinh</em>. T·∫°o ra m·ªôt object r·ªìi truy·ªÅn xu·ªëng th√†nh <code class=\"language-text\">props</code> l√† <strong>l·ªói cƒÉn b·∫£n</strong> c·∫ßn tr√°nh, tuy nhi√™n khi d√πng cho Context Provider n√≥ ƒë·∫∑c bi·ªát tr·∫ßm tr·ªçng. Khi ƒë·ªÉ √Ω th·∫•y l·ªói n√†y, ch√∫ng t√¥i ƒë√£ theo s·ª± ch·ªâ d·∫´n t·ª´ t√†i li·ªáu c·ªßa <a href=\"https://reactjs.org/docs/context.html#caveats\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Context guidelines</a>, l∆∞u ph∆∞∆°ng th·ª©c ƒë√≥ v√†o state</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CategoriesProvider</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">state</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      data<span class=\"token operator\">:</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">,</span>\n      loading<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      error<span class=\"token operator\">:</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">,</span>\n      fetch<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">fetch</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Sau ƒë√≥ trong component consumer, ch√∫ng ta s·∫Ω fetch d·ªØ li·ªáu categories khi th·∫±ng component consumer th·ª±c s·ª± render</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">CategoriesQuery</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span><span class=\"token maybe-class-name\">CategoriesContext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>context<span class=\"token punctuation\">.</span><span class=\"token property-access\">data</span><span class=\"token punctuation\">)</span> context<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>context<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">children</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Xong! <strong>Ch∆∞a th·∫≠t s·ª± xong ƒë√¢u</strong>, khi th√™m <code class=\"language-text\">&lt;CategoriesQuery/&gt;</code> ·ªü 2 n∆°i kh√°c nhau tr√™n c√¢y, n·∫øu 2 component ƒë∆∞·ª£c mount c√πng m·ªôt l√∫c, <code class=\"language-text\">fetch</code> s·∫Ω ch·∫°y <strong>2 l·∫ßn</strong>.</p>\n<p><em>Bug nh·ªè th√¥i m√† ƒë√∫ng kh√¥ng?</em> Ch√∫ng ta kh√¥ng ki·ªÉm tra state <code class=\"language-text\">loading</code> tr∆∞·ªõc khi g·ªçi <code class=\"language-text\">fetch</code>. S·ª≠a nhanh trong Provider:</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// class CategoriesProvider...</span>\n<span class=\"token function-variable function\">fetch</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">state</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">loading</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Th·ª≠ refresh l·∫°i trang, v·ªõi 2 <code class=\"language-text\">CategoriesQuery</code> mount v√†... <strong>B√ôM</strong> V·∫´n l√† 2 request network. Ki·ªÉm tra l·∫°i l·∫ßn n·ªØa n√†o, c√≥ g√¨ ƒë√≥ l·ªói r·ªìi, kh√¥ng l·ªói n·ªØa, l·∫°i l·ªói n·ªØa, ....</p>\n<p>....</p>\n<p>l·∫°i l·ªói\n....</p>\n<p>c√≤n l·ªói\n....</p>\n<p>ch∆∞a h·∫øt l·ªói\n....</p>\n<p>R·ªìi b·ªóng d∆∞ng ch√∫ng ta nh·∫≠n ra React <code class=\"language-text\">setState</code> l√† m·ªôt <code class=\"language-text\">async</code>. C√≥ nghƒ©a l√† vi·ªác gi√° tr·ªã <code class=\"language-text\">loading</code> v·∫´n l√† <code class=\"language-text\">false</code> trong c·∫£ 2 l·∫ßn g·ªçi th·∫≠m ch√≠ <code class=\"language-text\">setState</code> ƒë√£ ƒë∆∞·ª£c g·ªçi m·ªôt l·∫ßn. \"Shitty React\" (React nh∆∞ c*t)</p>\n<p>B·∫Øt ƒë·∫ßu t√¨m ki·∫øm m·ªôt c√°ch l√†m \"less shitty\" (b·ªõt nh·∫£m shit) v·ªõi chuy·ªán <code class=\"language-text\">setState</code> async trong Context Provider (c√≥ 4 nƒÉm c√°ch l√†m t√πy theo ƒë·ªô <em>s√°ng t·∫°o</em>), nh∆∞ng c√≥ th·ªÉ ƒë·∫£m b·∫£o r·∫±ng kh√¥ng c√≥ c√°ch n√†o <em>th·∫≠p to√†n th·∫≠p m·ªπ</em>. Lu√¥n c·∫£m th·∫•y ch√∫ng ta ƒëang <strong>ch·ªëng l·∫°i c√°ch l√†m ch√≠nh quy t·ª´ React</strong>.</p>\n<h2 id=\"ƒë√¢u-l√†-gi·∫£i-ph√°p\"><a href=\"#%C4%91%C3%A2u-l%C3%A0-gi%E1%BA%A3i-ph%C3%A1p\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ƒê√¢u l√† gi·∫£i ph√°p</h2>\n<p>Context API c√≥ r·∫•t nhi·ªÅu ƒëi·ªÉm c·ªông ngay c·∫£ khi so s√°nh v·ªõi Redux, c√°i ch√∫ng ta c·∫ßn l√† m·ªôt c√°ch v·∫πn to√†n c·∫£ cho c·∫£ 2.</p>\n<p>M√¨nh c≈©ng g·∫∑p v·∫•n ƒë·ªÅ y chang nh∆∞ v·∫≠y v·ªõi ·ª©ng d·ª•ng ƒëang l√†m. T√¨m ki·∫øm v√† cu·ªëi c√πng ch·ªët h·∫° d√πng <a href=\"https://atlassian.github.io/react-sweet-state/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react-sweet-state</a> cho c·∫£ team</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword module\">import</span> <span class=\"token punctuation\">{</span> createStore<span class=\"token punctuation\">,</span> createHook <span class=\"token punctuation\">}</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"react-sweet-state\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// gi√° tr·ªã kh·ªüi t·∫°o</span>\n<span class=\"token keyword\">const</span> initialState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  data<span class=\"token operator\">:</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">,</span>\n  loading<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  error<span class=\"token operator\">:</span> <span class=\"token keyword null nil\">null</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// define the actions that mutate the state</span>\n<span class=\"token keyword\">const</span> actions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">fetch</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> getState<span class=\"token punctuation\">,</span> setState <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">loading</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> loading<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/categories\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> loading<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> error<span class=\"token punctuation\">,</span> loading<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// t·∫°o store</span>\n<span class=\"token keyword\">const</span> <span class=\"token maybe-class-name\">CategoriesStore</span> <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> initialState<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// t·∫°o components ƒë·ªÉ truy c·∫≠p d·ªØ li·ªáu t·ª´ store</span>\n<span class=\"token keyword\">const</span> useCategories <span class=\"token operator\">=</span> <span class=\"token function\">createHook</span><span class=\"token punctuation\">(</span><span class=\"token maybe-class-name\">CategoriesStore</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// s·ª≠ d·ª•ng</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">CategoriesQuery</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useCategories</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>state<span class=\"token punctuation\">.</span><span class=\"token property-access\">data</span><span class=\"token punctuation\">)</span> actions<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">children</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>C√≥ nhi·ªÅu ƒëi·ªÉm c·ªông cho <a href=\"https://atlassian.github.io/react-sweet-state/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react-sweet-state</a> nh∆∞ n√≥ v·∫´n d√πng Context API, nh∆∞ng an to√†n h∆°n, c√°c action s·∫Ω d·ªÖ test h∆°n, l√†m vi·ªác ƒë∆∞·ª£c v·ªõi Redux DevTools, ƒë√£ x·ª≠ l√Ω nh·ªØng l·ªói v·∫´n hay g·∫∑p v·ªõi React Context. V√† nhi·ªÅu ƒëi·ªÅu hay ho kh√°c n·ªØa. C√°c b·∫°n nh·ªõ like cho repo n√†y tr√™n github.</p>\n<p>M·ªôt s·ªë d·∫´n ch·ª©ng kh√°c ƒë·ªÉ b·∫°n tham kh·∫£o</p>\n<ul>\n<li><a href=\"https://twitter.com/dan_abramov/status/1109595839347990528\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Context <strong>Kh√¥ng ƒë∆∞·ª£c thi·∫øt k·∫ø cho d·ªØ li·ªáu th∆∞·ªùng xuy√™n c·∫≠p nh·∫≠p</strong></a></li>\n<li><a href=\"https://github.com/facebook/react/issues/13739\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><strong>H·∫°n ch·∫ø hi·ªáu nƒÉng</strong> c·ªßa React Context</a></li>\n<li><a href=\"https://github.com/facebook/react/issues/14110\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Context <strong>Kh√¥ng h·ªó tr·ª£ selector</strong></a></li>\n<li><a href=\"https://github.com/facebook/react/issues/15156\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">React Context <strong>Kh√¥ng th·ªÉ ngƒÉn ch·∫∑n vi·ªác re-render</strong></a></li>\n</ul>\n<p><a href=\"https://medium.com/@albertogasparin/the-pitfalls-of-async-operations-via-react-context-api-ab987d4290e6\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">The pitfalls of async operations via React Context API</a></p>\n","cover_image":""}},{"node":{"id":"c764b91e3b81ee538e35cfc01d180b37","title":"Th·ªß thu·∫≠t s·ª≠ d·ª•ng ƒë∆°n v·ªã viewport tr√™n mobile","path":"/2020-03-12-thu-thuat-su-dung-don-vi-viewport-tren-mobile/","date":"2020-03-12","timeToRead":2,"desc":"ƒê·ªÉ c√≥ th·ªÉ qu·∫£n l√Ω ƒë∆∞·ª£c state c·ªßa ·ª©ng d·ª•ng m·ªôt c√°ch t·ªët nh·∫•t, ch√∫ng ta c·∫ßn s·ª± ph√¢n chia ph√π h·ª£p gi·ªØa local state (internal state c·ªßa component) v√† state c·ª≠a ·ª©ng d·ª•ng ƒë·∫∑t trong React Context. M·ªôt v√†i ƒëi·ªÅu mu·ªën chia s·∫Ω ƒë·ªÉ n√¢ng cao kh·∫£ nƒÉng b·∫£o tr√¨ v√† tr·∫£i nghi·ªám n·∫øu s·ª≠ d·ª•ng ƒë·∫øn context trong React.","content":"<p>ƒê∆°n v·ªã viewport trong css (<code class=\"language-text\">vh</code>, <code class=\"language-text\">vw</code>) kh√¥ng ph·∫£i l√∫c n√†o c≈©ng ch·∫°y ƒë√∫ng tr√™n m·ªçi tr√¨nh duy·ªát ƒëi·ªán tho·∫°i. Gi·ªëng nh∆∞ ch∆∞a ƒë·ªß kh·ªï cho dev n√™n m·ªói tr√¨nh duy·ªát mobile l·∫°i c√≥ c√°ch x·ª≠ l√Ω ri√™ng cho ƒë∆°n v·ªã n√†y.</p>\n<p>C√°ch m√† <a href=\"https://www.w3.org/TR/css-values-3/#viewport-relative-lengths\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">w3 ƒë·ªãnh nghƒ©a</a> c√°ch t√≠nh ƒë∆°n v·ªã n√†y. V·ªõi mobile c√°i ch√∫ng ta quan t√¢m nhi·ªÅu nh·∫•t l√† ƒë∆°n v·ªã <code class=\"language-text\">vh</code></p>\n<blockquote>\n<p>1vh = 1% ƒë·ªô cao kh·ªüi t·∫°o c·ªßa khu v·ª±c tr√¨nh duy·ªát d√πng ƒë·ªÉ hi·ªÉn th·ªã trang web.</p>\n</blockquote>\n<p>Nghƒ©a l√† gi√° tr·ªã n√†y kh√¥ng bao g·ªìm c√°c ph·∫ßn kh√°c c·ªßa tr√¨nh duy·ªát, nh∆∞ thanh address, thanh bookmark (<strong>n·∫øu c√≥</strong>), tab bar, ... v√† nh·ªØng th·ª© linh tinh kh√°c m√† user c√≥ th·ªÉ add th√™m v√†o tr√¨nh duy·ªát c·ªßa h·ªç.</p>\n<p>Nh∆∞ng khi b·∫°n b·∫Øt ƒë·∫ßu scroll tr√™n ƒëi·ªán tho·∫°i, c√¢u chuy·ªán tr·ªü n√™n ph·ª©c t·∫°p h∆°n, thanh address bar s·∫Ω bi·∫øn m·∫•t, gi√° tr·ªã c·ªßa <code class=\"language-text\">vh</code> c·∫ßn ph·∫£i c·∫≠p nh·∫≠p l·∫°i, hi·ªán t∆∞·ª£ng <em>c√† kh·ªãa</em> xu·∫•t hi·ªán tr√™n m√†n h√¨nh.</p>\n<p>Tr√¨nh duy·ªát Safari tr√™n iOS l√† ng∆∞·ªùi ti√™n phong s·ª≠ d·ª•ng lu√¥n m·ªôt gi√° tr·ªã c·ªë ƒë·ªãnh ƒë√∫ng v·ªõi k√≠ch th∆∞·ªõc m√†n h√¨nh (kh√¥ng ph·∫£i k√≠ch th∆∞·ªõc khung hi·ªÉn th·ªã c·ªßa tr√¨nh duy·ªát). Chrome mobile c≈©ng b·∫Øt ƒë·∫ßu √°p d·ª•ng c√°ch n√†y ƒë·ªÉ ch·∫∑n vi·ªác n·ªôi dung trang nh·∫£y lung tung.</p>\n<p>ƒêi·ªÅu n√†y c√≥ √Ω nghƒ©a nh∆∞ th·∫ø n√†o? Nghƒ©a l√† khi b·∫°n ƒë·∫∑t gi√° tr·ªã <code class=\"language-text\">100vh</code> n√≥ s·∫Ω v∆∞·ª£t ra ngo√†i, user s·∫Ω ph·∫£i scroll tr√™n tr√¨nh duy·ªát ƒë·ªÉ xem h·∫øt.</p>\n<p><img src=\"https://i2.wp.com/css-tricks.com/wp-content/uploads/2018/07/viewport-units-mobile-crop.jpg?ssl=1\"></p>\n<p>ƒê·ªÉ kh·∫Øc ph·ª•c nh∆∞·ª£c ƒëi·ªÉm n√†y. Ch√∫ng ta kh√¥ng th·ªÉ tr√¥ng c·∫≠y v√†o css, ph·∫£i d√πng ƒë·∫øn javascript t√∫m l·∫•y ƒë·ªô cao <code class=\"language-text\">window.innerHeight</code>, l∆∞u gi√° tr·ªã ƒë√≥ l·∫°i th√†nh m·ªôt bi·∫øn CSS v√† s·ª≠ d·ª•ng n√≥ thay cho ƒë∆°n v·ªã <code class=\"language-text\">vh</code></p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token class\">.my-element</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token unit\">vh</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">/* fallback khi tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ bi·∫øn css */</span>\n  <span class=\"token comment\">/* c√°i n√†y ch·ªâ c√≥ tr√™n webkit */</span>\n  <span class=\"token property\">min-height</span><span class=\"token punctuation\">:</span> -webkit-fill-available<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> <span class=\"token function\">calc</span><span class=\"token punctuation\">(</span><span class=\"token function\">var</span><span class=\"token punctuation\">(</span><span class=\"token variable\">--vh</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token unit\">vh</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Ch√∫ng ta s·∫Ω <em>t√∫m l·∫•y</em> v√† ƒë·ªãnh nghƒ©a <code class=\"language-text\">--vh</code> b·∫±ng javascript</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Tr∆∞·ªõc ti√™n l·∫•y viewport height v√† chuy·ªÉn th√†nh gi√° tr·ªã 1%</span>\n<span class=\"token keyword\">let</span> vh <span class=\"token operator\">=</span> <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">innerHeight</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ƒê·∫∑t bi·∫øn css</span>\n<span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">documentElement</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">style</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"--vh\"</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>vh<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>C√≤n m·ªôt v·∫•n ƒë·ªÅ nh·ªè c√≤n l·∫°i c·∫ßn ph·∫£i x·ª≠ l√Ω l√† c·∫≠p nh·∫≠p l·∫°i gi√° tr·ªã n√†y khi tr√¨nh duy·ªát thay ƒë·ªïi k√≠ch th∆∞·ªõc (xoay tr√°i, xoay ph·∫£i, xoay ngang, xoay d·ªçc)</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// ch·∫°y l·∫°i khi window resize</span>\n<span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"resize\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// l√†m t∆∞∆°ng t·ª± 2 b∆∞·ªõc ƒë√£ l√†m</span>\n  <span class=\"token keyword\">let</span> vh <span class=\"token operator\">=</span> <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">innerHeight</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">;</span>\n  <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">documentElement</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">style</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"--vh\"</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>vh<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p><a href=\"https://css-tricks.com/the-trick-to-viewport-units-on-mobile/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">The trick to viewport units on mobile</a></p>\n","cover_image":""}},{"node":{"id":"67335fb1f2a382145c69b99fe4e01d34","title":"S·ª≠ d·ª•ng React Context nh∆∞ th·∫ø n√†o cho hi·ªáu qu·∫£","path":"/2020-03-08-huong-dan-su-dung-react-context-nhu-the-nao-cho-hieu-qua/","date":"2020-03-08","timeToRead":9,"desc":"ƒê·ªÉ c√≥ th·ªÉ qu·∫£n l√Ω ƒë∆∞·ª£c state c·ªßa ·ª©ng d·ª•ng m·ªôt c√°ch t·ªët nh·∫•t, ch√∫ng ta c·∫ßn s·ª± ph√¢n chia ph√π h·ª£p gi·ªØa local state (internal state c·ªßa component) v√† state c·ª≠a ·ª©ng d·ª•ng ƒë·∫∑t trong React Context. M·ªôt v√†i ƒëi·ªÅu mu·ªën chia s·∫Ω ƒë·ªÉ n√¢ng cao kh·∫£ nƒÉng b·∫£o tr√¨ v√† tr·∫£i nghi·ªám n·∫øu s·ª≠ d·ª•ng ƒë·∫øn context trong React.","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#provider-component\">Provider Component</a></li>\n<li><a href=\"#consumer-hook\">Consumer Hook</a></li>\n<li><a href=\"#typescript--flow\">TypeScript / Flow</a></li>\n<li><a href=\"#v%E1%BA%ADy-c%C3%B2n-dispatch-type\">V·∫≠y c√≤n dispatch <code class=\"language-text\">type</code>?</a></li>\n<li><a href=\"#v%E1%BA%ADy-c%C3%B2n-c%C3%A1c-async-action-th%C3%AC-sao-\">V·∫≠y c√≤n c√°c async action th√¨ sao ?</a></li>\n<li><a href=\"#c%E1%BA%A3m-th%E1%BA%A5y-t%C3%A1ch-state-v%C3%A0-dispatch-r%E1%BA%A5t-kh%C3%B3-ch%E1%BB%8Bu\">C·∫£m th·∫•y t√°ch state v√† dispatch r·∫•t kh√≥ ch·ªãu</a></li>\n<li><a href=\"#to%C3%A0n-b%E1%BB%99-source-code\">To√†n b·ªô source code</a></li>\n</ul>\n<!-- /TOC -->\n<p>Ch√∫ng ta c√≥ m·ªôt <em>module</em> (m·ªôt nh√°nh tr√™n c√¢y react component cho d·ªÉ h√¨nh dung) mu·ªën s·ª≠ d·ª•ng Context l√† <code class=\"language-text\">count</code>, ch√∫ng ta t·∫°o file <code class=\"language-text\">count-context.js</code></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/count-context.js</span>\n<span class=\"token keyword module\">import</span> <span class=\"token maybe-class-name\">React</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token maybe-class-name\">CountStateContext</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token maybe-class-name\">CountDispatchContext</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>ƒêi·ªÅu mu·ªën n√≥i ƒë·∫ßu ti√™n l√† ch√∫ng ta c·ªë t√¨nh <strong>kh√¥ng khai b√°o gi√° tr·ªã kh·ªüi t·∫°o</strong> cho <code class=\"language-text\">CountStateContext</code>, n·∫øu mu·ªën b·∫°n c√≥ th·ªÉ g·ªçi <code class=\"language-text\">React.createContext({count: 0})</code>. Khai b√°o m·ªôt <code class=\"language-text\">defaultValue</code> ch·ªâ h·ªØu d·ª•ng trong tr∆∞·ªùng h·ª£p nh∆∞ b√™n d∆∞·ªõi</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\"><span class=\"token maybe-class-name\">CountDisplay</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> count <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useContext</span><span class=\"token punctuation\">(</span><span class=\"token maybe-class-name\">CountStateContext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>count<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>V√¨ kh√¥ng khai b√°o gi√° tr·ªã kh·ªüi t·∫°o, ch√∫ng ta s·∫Ω nh·∫≠n l·ªói khi vi·∫øt destructure gi√° tr·ªã tr·∫£ v·ªÅ t·ª´ <code class=\"language-text\">useContext</code>. V√¨ gi√° tr·ªã m·∫∑c ƒë·ªãnh l√† <code class=\"language-text\">undefined</code> v√† ch√∫ng ta kh√¥ng th·ªÉ destructure <code class=\"language-text\">undefined</code></p>\n<p>Kh√¥ng ai trong ch√∫ng ta mu·ªën nh·∫≠n l·ªói do kh√¥ng c√≥ gi√° tr·ªã kh·ªüi t·∫°o. Tuy nhi√™n, n·∫øu ch·ªâ s·ª≠ d·ª•ng gi√° tr·ªã m·∫∑c ƒë·ªãnh ƒë∆∞·ª£c cung c·∫•p, l·ª£i √≠ch s·∫Ω kh√¥ng nhi·ªÅu b·∫±ng vi·ªác linh ƒë·ªông gi√° tr·ªã n√†y. Kinh nghi·ªám th·ª±c t·∫ø cho th·∫•y khi kh·ªüi t·∫°o v√† s·ª≠ d·ª•ng context trong ·ª©ng d·ª•ng, ch√∫ng ta mu·ªën c√°c consumer context (component s·ª≠ d·ª•ng <code class=\"language-text\">useContext</code>) c√≥ th·ªÉ cung c·∫•p th√™m c√°c gi√° tr·ªã m·ªõi.</p>\n<p><em>Trong t√†i li·ªáu ch√≠nh th·ª©c c·ªßa React c√≥ ƒë·ªÅ c·∫≠p, \"cung c·∫•p gi√° tr·ªã m·∫∑c ƒë·ªãnh c√≥ th·∫ø gi√∫p vi·ªác test component ƒë·ªôc l·∫≠p m√† kh√¥ng c·∫ßn b·ªôc ch√∫ng l·∫°i (component l·ªìng v√†o nhau)\". Kh√¥ng c√πng quan ƒëi·ªÉm v·ªõi √Ω ki·∫øn n√†y, c√° nh√¢n t√°c gi·∫£ (Kent C. Dodds) cho r·∫±ng t·ªët h∆°n n√™n b·ªôc component v·ªõi c√°c context c·∫ßn thi·∫øt khi test. H√£y nh·ªõ l√† m·ªói l·∫ßn ch√∫ng ta l√†m g√¨ ƒë√≥ b√™n trong test, ch√∫ng ta kh√¥ng l√†m nh·ªØng vi·ªác nh∆∞ v·∫≠y trong ·ª©ng d·ª•ng, ch√∫ng ta gi·∫£m b·ªõt s·ª± t·ª± tin m√† unit test mang l·∫°i.</em></p>\n<blockquote>\n<p>L∆∞u √Ω: n·∫øu ƒëang s·ª≠ d·ª•ng Flow hay TypeScript, kh√¥ng cung c·∫•p gi√° tr·ªã m·∫∑c ƒë·ªãnh s·∫Ω b·ªã nh·∫≠n ngay th·∫ª \"c·∫£nh c√°o\", r·∫•t phi·ªÅn to√°i n·∫øu s·ª≠ d·ª•ng <code class=\"language-text\">React.useContext</code>. ƒê·ªçc ti·∫øp ph·∫ßn d∆∞·ªõi s·∫Ω ch·ªâ c√°ch kh·∫Øc ph·ª•c</p>\n</blockquote>\n<p>M·ª•c ƒë√≠ch c·ªßa <code class=\"language-text\">CountDispatchContext</code> l√† ƒë·ªÉ l√†m g√¨. M√¨nh ƒë√£ s·ª≠ d·ª•ng context trong m·ªôt th·ªùi gian, v√† n√≥i chuy·ªán v·ªõi m·ªôt s·ªë ng∆∞·ªùi ƒëang l√†m vi·ªác v·ªõi n√≥, c√≥ th·ªÉ chia s·∫ª v·ªõi b·∫°n l√† ƒë√¢y l√† <strong>c√°ch ƒë∆°n gi·∫£n nh·∫•t</strong> ƒë·ªÉ tr√°nh c√°c r·∫Øc r·ªëi v·ªõi context (ƒë·∫∑c bi·ªát khi b·∫°n b·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng <code class=\"language-text\">dispatch</code> trong effect) khi b·∫°n b·∫Øt ƒë·∫ßu t√°ch state v√† dispatch trong context. <strong>H√£y tin m√¨nh!</strong></p>\n<h2 id=\"provider-component\"><a href=\"#provider-component\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Provider Component</h2>\n<p>ƒê·ªÉ c√°c component b√™n d∆∞·ªõi c√≥ th·ªÉ s·ª≠ d·ª•ng context module, ch√∫ng ta ph·∫£i <em>b·ªôc</em> c√°c component l·∫°i v·ªÅ trong c√πng m·ªôt context, s·ª≠ d·ª•ng v·ªõi Provider Component, c√°i n√†y th√¨ ai c≈©ng bi·∫øt</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\"><span class=\"token maybe-class-name\">App</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountDisplay</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Counter</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountProvider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p><code class=\"language-text\">CountProvider</code> ƒë∆∞·ª£c ƒë∆∞a ra ƒë·ªÉ x√†i nh∆∞ th·∫ø n√†o cho hi·ªáu qu·∫£ th√¨ l·∫°i √≠ch ai quan t√¢m, ƒë√¢y l√† c√°ch m√† <code class=\"language-text\">CountProvider</code> ƒë∆∞·ª£c ƒë∆∞a ra cho th·∫ø gi·ªõi</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/count-context.js</span>\n<span class=\"token keyword module\">import</span> <span class=\"token maybe-class-name\">React</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token maybe-class-name\">CountStateContext</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token maybe-class-name\">CountDispatchContext</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">countReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span><span class=\"token property-access\">type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"increment\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> count<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span><span class=\"token property-access\">count</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"decrement\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> count<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span><span class=\"token property-access\">count</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword module\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Unhandled action type: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>action<span class=\"token punctuation\">.</span><span class=\"token property-access\">type</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\"><span class=\"token maybe-class-name\">CountProvider</span></span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useReducer</span><span class=\"token punctuation\">(</span>countReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> count<span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountStateContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountDispatchContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>dispatch<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountDispatchContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountStateContext.Provider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword module\">export</span> <span class=\"token punctuation\">{</span> <span class=\"token maybe-class-name\">CountProvider</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"consumer-hook\"><a href=\"#consumer-hook\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Consumer Hook</h2>\n<p>C√°c th∆∞ vi·ªán s·ª≠ d·ª•ng context t√¨m th·∫•y tr√™n m·∫°ng ƒëa ph·∫ßn s·∫Ω d√πng c√°ch n√†y</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword module\">import</span> <span class=\"token maybe-class-name\">React</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token maybe-class-name\">SomethingContext</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"some-context-package\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\"><span class=\"token maybe-class-name\">YourComponent</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> something <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useContext</span><span class=\"token punctuation\">(</span><span class=\"token maybe-class-name\">SomethingContext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>ƒê·ªÉ n√¢ng cao tr·∫£i nghi·ªám khi ch√∫ng ta s·ª≠ d·ª•ng, c√¢u l·ªánh n√†y <code class=\"language-text\">React.useContext(SomethingContext)</code> c·∫ßn ph·∫£i thay th·∫ø. N·∫øu c√≥ th·ªÉ vi·∫øt nh∆∞ th·∫ø n√†y, s·∫Ω tuy·ªát v·ªùi h∆°n r·∫•t nhi·ªÅu</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword module\">import</span> <span class=\"token maybe-class-name\">React</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">import</span> <span class=\"token punctuation\">{</span> useSomething <span class=\"token punctuation\">}</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"some-context-package\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\"><span class=\"token maybe-class-name\">YourComponent</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> something <span class=\"token operator\">=</span> <span class=\"token function\">useSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>ƒê·ªÉ c√≥ th·ªÉ d√πng <code class=\"language-text\">useSomething()</code> nh∆∞ b√™n tr√™n, ch√∫ng ta s·∫Ω c·∫ßn vi·∫øt l·∫°i context nh∆∞ sau</p>\n<pre class=\"language-jsx{32-38,40-46,48}\"><code class=\"language-jsx{32-38,40-46,48}\">// src/count-context.js\nimport React from \"react\";\n\nconst CountStateContext = React.createContext();\nconst CountDispatchContext = React.createContext();\n\nfunction countReducer(state, action) {\n  switch (action.type) {\n    case \"increment\": {\n      return { count: state.count + 1 };\n    }\n    case \"decrement\": {\n      return { count: state.count - 1 };\n    }\n    default: {\n      throw new Error(`Unhandled action type: ${action.type}`);\n    }\n  }\n}\n\nfunction CountProvider({ children }) {\n  const [state, dispatch] = React.useReducer(countReducer, { count: 0 });\n  return (\n    <CountStateContext.Provider value={state}>\n      <CountDispatchContext.Provider value={dispatch}>\n        {children}\n      </CountDispatchContext.Provider>\n    </CountStateContext.Provider>\n  );\n}\n\nfunction useCountState() {\n  const context = React.useContext(CountStateContext);\n  if (context === undefined) {\n    throw new Error(\"useCountState must be used within a CountProvider\");\n  }\n  return context;\n}\n\nfunction useCountDispatch() {\n  const context = React.useContext(CountDispatchContext);\n  if (context === undefined) {\n    throw new Error(\"useCountDispatch must be used within a CountProvider\");\n  }\n  return context;\n}\n\nexport { CountProvider, useCountState, useCountDispatch };</code></pre>\n<p>Ch√∫ng ta t·∫°o <code class=\"language-text\">useCountState</code> v√† <code class=\"language-text\">useCountDispatch</code> hook s·ª≠ d·ª•ng <code class=\"language-text\">React.useContext</code> ƒë·ªÉ l·∫•y ƒë∆∞·ª£c gi√° tr·ªã context cung c·∫•p t·ª´ <code class=\"language-text\">CountProvider</code>. Tuy nhi√™n, n·∫øu kh√¥ng c√≥ gi√° tr·ªã, ch√∫ng ta hi·ªÉn th·ªã th√¥ng b√°o l·ªói ƒë·ªÉ b√°o hook ch·ªâ ƒë∆∞·ª£c s·ª≠ d·ª•ng trong function component ƒë∆∞·ª£c render b√™n trong <code class=\"language-text\">CountProvider</code>. L·ªói n√†y r·∫•t hay qu√™n, n√™n nh·∫Øc tr∆∞·ªõc cho t·ªët.</p>\n<p>N·∫øu c·∫ßn s·ª≠ d·ª•ng v·ªõi React &#x3C; 16.8.0, ch√∫ng ta d√πng render-prop v·ªõi Consumer Component nh∆∞ sau</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\"><span class=\"token maybe-class-name\">CountConsumer</span></span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountStateContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span><span class=\"token parameter\">context</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>context <span class=\"token operator\">===</span> <span class=\"token keyword nil\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"CountConsumer must be used within a CountProvider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">children</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountStateContext.Consumer</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p><strong>N·∫øu b·∫°n ƒë√£ d√πng React c≈©, ho·∫∑c l√† n√¢ng c·∫•p m·ªõi nh·∫•t, ho·∫∑c gi·ªØ nguy√™n t√¨nh tr·∫°ng hi·ªán t·∫°i cho an to√†n?</strong></p>\n<h2 id=\"typescript--flow\"><a href=\"#typescript--flow\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>TypeScript / Flow</h2>\n<p>Nh∆∞ ƒë√£ h·ª©a ·ªü tr√™n, v·ªõi v·∫•n ƒë·ªÅ <code class=\"language-text\">defaultValue</code> khi s·ª≠ d·ª•ng TypeScript v√† Flow. Gi·∫£i quy·∫øt nh∆∞ sau</p>\n<pre class=\"language-tsx{9-12,40-44,48-52}\"><code class=\"language-tsx{9-12,40-44,48-52}\">// src/count-context.tsx\nimport * as React from 'react'\n\ntype Action = {type: 'increment'} | {type: 'decrement'}\ntype Dispatch = (action: Action) => void\ntype State = {count: number}\ntype CountProviderProps = {children: React.ReactNode}\n\nconst CountStateContext = React.createContext<State| undefined>(undefined)\nconst CountDispatchContext = React.createContext(<Dispatch | undefined>(\nundefined,\n)\n\nfunction countReducer(state: State, action: Action) {\n  switch (action.type) {\n    case 'increment': {\n      return {count: state.count + 1}\n    }\n    case 'decrement': {\n      return {count: state.count - 1}\n    }\n    default: {\n      throw new Error(`Unhandled action type: ${action.type}`)\n    }\n  }\n}\n\nfunction CountProvider({children}: CountProviderProps) {\n  const [state, dispatch] = React.useReducer(countReducer, {count: 0})\n\n  return (\n    <CountStateContext.Provider value={state}>\n      <CountDispatchContext.Provider value={dispatch}>\n        {children}\n      </CountDispatchContext.Provider>\n    </CountStateContext.Provider>\n  )\n}\n\nfunction useCountState() {\n  const context = React.useContext(CountStateContext)\n  if (context === undefined) {\n    throw new Error('useCountState must be used within a CountProvider')\n  }\n  return context\n}\n\nfunction useCountDispatch() {\n  const context = React.useContext(CountDispatchContext)\n  if (context === undefined) {\n    throw new Error('useCountDispatch must be used within a CountProvider')\n  }\n  return context\n}\n\nexport {CountProvider, useCountState, useCountDispatch}</code></pre>\n<p>V·ªõi c√°ch vi·∫øt n√†y, ai c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng <code class=\"language-text\">useCountState</code> ho·∫∑c <code class=\"language-text\">useCountDispatch</code> m√† kh√¥ng c·∫ßn ki·ªÉm tra <code class=\"language-text\">undefined</code></p>\n<p><a href=\"https://codesandbox.io/s/bitter-night-i5mhj\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Xem CodeSandbox</a></p>\n<h2 id=\"v·∫≠y-c√≤n-dispatch-type\"><a href=\"#v%E1%BA%ADy-c%C3%B2n-dispatch-type\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V·∫≠y c√≤n dispatch <code class=\"language-text\">type</code>?</h2>\n<p>N·∫øu b·∫°n t·ª´ng vi·∫øt Redux, s·∫Ω th·∫Øc m·∫Øc \"v·∫≠y action creator ƒë√¢u?\". N·∫øu <em>th√≠ch</em> b·∫°n c√≥ th·ªÉ t·ª± vi·∫øt n·∫øu mu·ªën. Nh∆∞ng m√¨nh kh√¥ng ph·∫£i l√† <em>fan</em> c·ªßa action creator (c√¥ th∆∞ k√Ω xinh ƒë·∫πp trong <a href=\"http://vuilaptrinh.com/2019-05-28-giai-thich-pattern-flux-trong-react/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">b√†i gi·∫£i th√≠ch v·ªÅ Flux Pattern c·ªßa m√¨nh</a>. M√¨nh lu√¥n c·∫£m th·∫•y em n√†y kh√° d∆∞ th·ª´a, kh√¥ng c·∫ßn thi·∫øt ph·∫£i ph·ª©c t·∫°p th√™m m·ªôt t·ªï ch·ª©c ƒë√£ qu√° ph·ª©c t·∫°p nh∆∞ Flux (<strong>ho√†n h·∫£o kh√¥ng ph·∫£i l√† kh√¥ng c√≤n g√¨ ƒë·ªÉ th√™m n·ªØa m√† l√† ko c√≤n g√¨ c√≥ th·ªÉ b·ªè ƒëi m√†</strong>). N·∫øu s·ª≠ d·ª•ng TypeScript ho·∫∑c Flow, n√≥ s·∫Ω gi√∫p ch√∫ng ta t·ª± ƒëi·ªÅn action type c√≥ th·ªÉ ƒëi·ªÅn</p>\n<p><img src=\"https://kentcdodds.com/static/d99d4329b1d7ebd2e63bf76471f540ab/e3189/auto-complete.png\" alt=\"S·ª≠ d·ª•ng React Context nh∆∞ th·∫ø n√†o cho hi·ªáu qu·∫£\"></p>\n<p><img src=\"https://kentcdodds.com/static/0d45ecb53470729181863636bdafc2b9/e3189/type-error.png\" alt=\"S·ª≠ d·ª•ng React Context nh∆∞ th·∫ø n√†o cho hi·ªáu qu·∫£\"></p>\n<p>M√¨nh th√≠ch ki·ªÉu g·ªçi <code class=\"language-text\">dispatch</code> nh∆∞ th·∫ø n√†y, n·∫øu ƒë·ªÉ √Ω b·∫°n s·∫Ω bi·∫øt <code class=\"language-text\">dispatch</code> s·∫Ω kh√¥ng thay ƒë·ªïi trong su·ªët qu√° tr√¨nh t·ªìn t·∫°i c·ªßa component, nghƒ©a l√† b·∫°n c√≥ th·ªÉ truy·ªÅn n√≥ v√†o m·∫£ng ph·ª• thu·ªôc c·ªßa <code class=\"language-text\">useEffect</code> v√¥ t∆∞.</p>\n<h2 id=\"v·∫≠y-c√≤n-c√°c-async-action-th√¨-sao-\"><a href=\"#v%E1%BA%ADy-c%C3%B2n-c%C3%A1c-async-action-th%C3%AC-sao-\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>V·∫≠y c√≤n c√°c async action th√¨ sao ?</h2>\n<p>M·ªôt c√¢u h·ªèi hay, b·∫°n g·∫∑p t√¨nh hu·ªëng c·∫ßn x·ª≠ l√Ω l√† m·ªôt async (thao t√°c b·∫•t ƒë·ªìng b·ªô nh∆∞ network request) v√† b·∫°n c·∫ßn dispatch nhi·ªÅu action c√πng l√∫c, dispatch m·ªôt action n√†o ƒë√≥ ph·ª• thu·ªôc v√†o k·∫øt qu·∫£ t·ª´ dispatch tr∆∞·ªõc ƒë√≥? B·∫°n c√≥ th·ªÉ l√†m ƒëi·ªÅu ƒë√≥ trong component, tuy nhi√™n <em>x·ª≠ l√Ω th·ªß c√¥ng</em> nh∆∞ th·∫ø tr√™n t·ª´ng component r·∫•t l√† phi·ªÅn.</p>\n<p>M√¨nh ƒë·ªÅ ngh·ªã t·∫°o m·ªôt helper function trong context module, nh·∫≠n <code class=\"language-text\">dispatch</code> v√† t·∫•t c·∫£ nh·ªØng d·ªØ li·ªáu b·∫°n c·∫ßn, helper function (AKA middleware) n√†y s·∫Ω ch·ªãu tr√°ch nhi·ªám x·ª≠ l√Ω t·∫•t c·∫£ nh·ªØng vi·ªác ƒë√£ n√™u tr√™n (theo ki·ªÉu state machine)</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// user-context.js</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">updateUser</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dispatch<span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">,</span> updates</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"start update\"</span><span class=\"token punctuation\">,</span> updates <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> updatedUser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> userClient<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">updateUser</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">,</span> updates<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"finish update\"</span><span class=\"token punctuation\">,</span> updatedUser <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"fail update\"</span><span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token punctuation\">{</span> <span class=\"token maybe-class-name\">UserProvider</span><span class=\"token punctuation\">,</span> useUserDispatch<span class=\"token punctuation\">,</span> useUserState<span class=\"token punctuation\">,</span> updateUser <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>S·ª≠ d·ª•ng n√≥ s·∫Ω nh∆∞ th·∫ø n√†y</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// user-profile.js</span>\n<span class=\"token keyword module\">import</span> <span class=\"token punctuation\">{</span> useUserState<span class=\"token punctuation\">,</span> useUserDispatch<span class=\"token punctuation\">,</span> updateUser <span class=\"token punctuation\">}</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"./user-context\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\"><span class=\"token maybe-class-name\">UserSettings</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> user<span class=\"token punctuation\">,</span> status<span class=\"token punctuation\">,</span> error <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useUserState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> userDispatch <span class=\"token operator\">=</span> <span class=\"token function\">useUserDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleSubmit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">updateUser</span><span class=\"token punctuation\">(</span>userDispatch<span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">,</span> formState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"c·∫£m-th·∫•y-t√°ch-state-v√†-dispatch-r·∫•t-kh√≥-ch·ªãu\"><a href=\"#c%E1%BA%A3m-th%E1%BA%A5y-t%C3%A1ch-state-v%C3%A0-dispatch-r%E1%BA%A5t-kh%C3%B3-ch%E1%BB%8Bu\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C·∫£m th·∫•y t√°ch state v√† dispatch r·∫•t kh√≥ ch·ªãu</h2>\n<p>Nhi·ªÅu ng∆∞·ªùi ph√†n n√†n t√°ch state v√† dispatch ri√™ng r·∫•t kh√≥ ch·ªãu</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token function\">useCountState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> dispatch <span class=\"token operator\">=</span> <span class=\"token function\">useCountDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>T·∫°i sao kh√¥ng <em>ƒë∆°n gi·∫£n</em> l√† l√†m th·∫ø n√†y</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>T·∫•t nhi√™n b·∫°n c√≥ th·ªÉ</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">useCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span><span class=\"token function\">useCountState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">useCountDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>C√°i n√†y t√πy c√°ch nh√¨n nh·∫≠n c·ªßa t·ª´ng ng∆∞·ªùi vi·∫øt, kh√¥ng c√≥ chuy·ªán ai ƒë√∫ng ai sai, ch·ªâ l√† b·∫°n c·∫£m th·∫•y <em>tho·∫£i m√°i</em>, <em>vui</em> h∆°n v·ªõi c√°ch vi·∫øt n√†o th√¥i.</p>\n<h2 id=\"to√†n-b·ªô-source-code\"><a href=\"#to%C3%A0n-b%E1%BB%99-source-code\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>To√†n b·ªô source code</h2>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/count-context.js</span>\n<span class=\"token keyword module\">import</span> <span class=\"token maybe-class-name\">React</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token maybe-class-name\">CountStateContext</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token maybe-class-name\">CountDispatchContext</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">countReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span><span class=\"token property-access\">type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"increment\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> count<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span><span class=\"token property-access\">count</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"decrement\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> count<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span><span class=\"token property-access\">count</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword module\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Unhandled action type: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>action<span class=\"token punctuation\">.</span><span class=\"token property-access\">type</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\"><span class=\"token maybe-class-name\">CountProvider</span></span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useReducer</span><span class=\"token punctuation\">(</span>countReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> count<span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountStateContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CountDispatchContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>dispatch<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountDispatchContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">CountStateContext.Provider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">useCountState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useContext</span><span class=\"token punctuation\">(</span><span class=\"token maybe-class-name\">CountStateContext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>context <span class=\"token operator\">===</span> <span class=\"token keyword nil\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"useCountState must be used within a CountProvider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> context<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">useCountDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useContext</span><span class=\"token punctuation\">(</span><span class=\"token maybe-class-name\">CountDispatchContext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>context <span class=\"token operator\">===</span> <span class=\"token keyword nil\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"useCountDispatch must be used within a CountProvider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> context<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token punctuation\">{</span> <span class=\"token maybe-class-name\">CountProvider</span><span class=\"token punctuation\">,</span> useCountState<span class=\"token punctuation\">,</span> useCountDispatch <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>·ªû ƒë√¢y, m√¨nh ƒëang c·ªë t√≠nh kh√¥ng <code class=\"language-text\">export CountContext</code>, ch√∫ng ta ch·ªâ cung c·∫•p m·ªôt c√°ch ƒë·ªÉ cung c·∫•p gi√° tr·ªã trong context v√† m·ªôt c√°ch ƒë·ªÉ l·∫•y v·ªÅ gi√° tr·ªã n√†y. Vi·ªác n√†y ƒë·∫£m b·∫£o ng∆∞·ªùi s·ª≠ d·ª•ng gi√° tr·ªã context ƒë√∫ng theo c√°i c√°ch ch√∫ng ta mu·ªën, cho ph√©p ch√∫ng ta h·∫°n ch·∫ø m·ªôt s·ªë code kh√¥ng c·∫ßn thi·∫øt khi l√∫c n√†o c≈©ng ph·∫£i khai b√°o <code class=\"language-text\">useContext</code> n√†o.</p>\n<p>Hy v·ªçng b√†i vi·∫øt mang ƒë·∫øn nhi·ªÅu ƒëi·ªÅu h·ªØu √≠ch cho b·∫°n.</p>\n<p><strong>T√¢m ni·ªám r·∫±ng:</strong></p>\n<ul>\n<li>Kh√¥ng n√™n ƒë·∫∑t tr·ªçn ni·ªÅm tin 100% v√†o context c√≥ th·ªÉ gi·∫£i quy·∫øt <strong>t·∫•t c·∫£</strong> v·∫•n ƒë·ªÅ li√™n quan ƒë·∫øn chia s·∫ª state</li>\n<li>Context kh√¥ng nh·∫•t thi·∫øt l√† m·ªôt global state cho to√†n b·ªô ·ª©ng d·ª•ng, n√≥ c√≥ th·ªÉ ƒë∆∞·ª£c √°p d·ª•ng tr√™n m·ªôt ph·∫ßn c·ªßa c√¢y component c·ª• th·ªÉ n√†o ƒë√≥.</li>\n<li>B·∫°n c√≥ th·ªÉ (v√† b·∫°n n√™n) chia c√°c logic kh√°c nhau tr√™n c√°c context kh√°c nhau.</li>\n</ul>\n<p><a href=\"https://codesandbox.io/s/react-codesandbox-je6cc\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Code Sandbox cho b·∫°n n√†o c·∫ßn v·ªçc v·∫°ch</a></p>\n<p><a href=\"https://kentcdodds.com/blog/how-to-use-react-context-effectively\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">How to use React Context effectively</a></p>\n<p><a href=\"https://kentcdodds.com/blog/application-state-management-with-react\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Application State Management with React</a></p>\n<p><a href=\"https://kentcdodds.com/blog/how-to-optimize-your-context-value\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">How to optimize your context value</a></p>\n","cover_image":""}},{"node":{"id":"596a942891a971c827be75655f6b0ffa","title":"5 kinh nghi·ªám khi vi·∫øt arrow function","path":"/2020-02-09-5-kinh-nghiem-khi-lam-viec-voi-arrow-function/","date":"2020-02-09","timeToRead":2,"desc":"S·ª≠ d·ª•ng arrow function ƒë√£ qu√° ph·ªï bi·∫øn, ai c≈©ng bi·∫øt n√≥ l√† g√¨, kh√¥ng c·∫ßn m·ªôt b√†i gi·ªõi thi·ªáu v√†i d√≤ng n·ªØa, b√†i vi·∫øt n√†y chia s·∫ª 5 kinh nghi·ªám ƒë·ªÉ b·∫°n l√†m vi·ªác v·ªõi arrow function th√™m m∆∞·ª£t m√†","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#g%C3%A1n-t%C3%AAn-cho-arrow-function\">G√°n t√™n cho arrow function</a></li>\n<li><a href=\"#inline-khi-n%C3%A0o-c%C3%B3-th%E1%BB%83\">Inline khi n√†o c√≥ th·ªÉ</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-v%E1%BB%9Bi-ph%C3%A9p-so-s%C3%A1nh\">S·ª≠ d·ª•ng v·ªõi ph√©p so s√°nh</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-v%E1%BB%9Bi-object-literal\">S·ª≠ d·ª•ng v·ªõi object literal</a></li>\n<li><a href=\"#h%E1%BA%A1n-ch%E1%BA%BF-l%E1%BB%93ng-nhi%E1%BB%81u-arrow-function\">H·∫°n ch·∫ø l·ªìng nhi·ªÅu arrow function</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"g√°n-t√™n-cho-arrow-function\"><a href=\"#g%C3%A1n-t%C3%AAn-cho-arrow-function\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>G√°n t√™n cho arrow function</h2>\n<p>arrow function trong javascript l√† m·ªôt <code class=\"language-text\">anonymous</code> (h√†m kh√¥ng c√≥ t√™n), n·∫øu g·ªçi v√†o <code class=\"language-text\">name</code> c·ªßa n√≥ ch√∫ng ta s·∫Ω nh·∫≠n ƒë∆∞·ª£c m·ªôt chu·ªói r·ªóng</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span> <span class=\"token arrow operator\">=></span> number <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">name</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// => ''</span></code></pre>\n<p>Trong l√∫c debug ho·∫∑c ph√¢n t√≠ch call stack, h√†m d·∫°ng <code class=\"language-text\">anonymous</code> r·∫•t kh√≥ ch·ªãu v√¨ kh√¥ng bi·∫øt ƒëang ch·∫°y <em>c√°i g√¨</em></p>\n<p><img src=\"https://dmitripavlutin.com/static/da011c996cd4544e2e5131e5862c85b6/f8b1b/anonymous-arrow-functions-3.webp\" alt=\"ƒê√≥ m√† bi·∫øt ƒë∆∞·ª£c ƒëang ch·∫°y c√°i g√¨ n·∫øu ch·ªâ hi·ªán th·ªã anonymous\"></p>\n<p>B√™n c·ªôt call stack c√≥ 2 function <code class=\"language-text\">anonymous</code>, kh√¥ng c√≥ b·∫•t k·ª≥ th√¥ng tin n√†o ƒë∆∞·ª£c tr√≠ch xu·∫•t ra cho ch√∫ng ta ·ªü ƒë√¢y.</p>\n<p>Nh∆∞ng n·∫øu ch√∫ng ta khai b√°o m·ªôt bi·∫øn n·∫Øm gi·ªØ arrow function, Javascript l√∫c n√†y l·∫°i <em>ng·∫ßm</em> hi·ªÉu n√≥ l√† t√™n cho function ƒë√≥ (c√°c ƒë·∫∑c t√≠nh kh√°c c·ªßa arrow function kh√¥ng ƒë·ªïi)</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">increaseNumber</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">number</span> <span class=\"token arrow operator\">=></span> number <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\nincreaseNumber<span class=\"token punctuation\">.</span><span class=\"token property-access\">name</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// => 'increaseNumber'</span></code></pre>\n<p>L√∫c debug, n√≥ ƒë√£ hi·ªán nguy√™n h√¨nh</p>\n<p><img src=\"https://dmitripavlutin.com/static/7cf0de61d6b0cd2fb01e9cfb145e8708/c04be/named-arrow-functions-2.png\" alt=\"Anonymous arrow functions call stack\" title=\"Anonymous arrow functions call stack\"></p>\n<h2 id=\"inline-khi-n√†o-c√≥-th·ªÉ\"><a href=\"#inline-khi-n%C3%A0o-c%C3%B3-th%E1%BB%83\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Inline khi n√†o c√≥ th·ªÉ</h2>\n<p>Thay v√¨ ph·∫£i vi·∫øt m·ªôt c√°ch d√†i d√≤ng</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> array <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\narray<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> number <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Ch√∫ng ta c√≥ th·ªÉ b·ªè h·∫≥n <code class=\"language-text\">{}</code> v√† <code class=\"language-text\">return</code>, ·ªü d·∫°ng m·ªôt expression</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> array <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\narray<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span> <span class=\"token arrow operator\">=></span> number <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"s·ª≠-d·ª•ng-v·ªõi-ph√©p-so-s√°nh\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-v%E1%BB%9Bi-ph%C3%A9p-so-s%C3%A1nh\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng v·ªõi ph√©p so s√°nh</h2>\n<p>C√°c ph√©p so s√°nh <code class=\"language-text\">&lt;=</code>, <code class=\"language-text\">&gt;=</code> nhi·ªÅu khi d·ªÖ g√¢y nh·∫ßm l·∫´n khi ƒë·ª©ng chung v·ªõi <code class=\"language-text\">=&gt;</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">negativeToZero</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">number</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span>number <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token operator\">:</span> number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>ƒê·ªÉ kh√¥ng <em>ƒë√°nh ƒë·ªë</em> ng∆∞·ªùi ƒë·ªçc, b·ªçc n√≥ l·∫°i trong d·∫•u ngo·∫∑c ƒë∆°n <code class=\"language-text\">()</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">negativeToZero</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">number</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span>number <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token operator\">:</span> number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//ho·∫∑c m·ªôt c√°ch t∆∞·ªùng minh</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">negativeToZero</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">number</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> number <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token operator\">:</span> number<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"s·ª≠-d·ª•ng-v·ªõi-object-literal\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-v%E1%BB%9Bi-object-literal\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>S·ª≠ d·ª•ng v·ªõi object literal</h2>\n<p>N·∫øu vi·∫øt object literal nh∆∞ b√™n d∆∞·ªõi ch·∫Øc ch·∫Øn b·∫°n b·ªã b√°o l·ªói</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> array <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// throws SyntaxError!</span>\narray<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token string\">'number'</span><span class=\"token operator\">:</span> number <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>ƒê·ª´ng qu√™n th√™m ngo·∫∑c ƒë∆°n cho n√≥</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> array <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Works!</span>\narray<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token string\">'number'</span><span class=\"token operator\">:</span> number <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// c√≥ nhi·ªÅu property</span>\narray<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">number</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token string\">'number'</span><span class=\"token operator\">:</span> number\n  <span class=\"token string\">'propA'</span><span class=\"token operator\">:</span> <span class=\"token string\">'value A'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'propB'</span><span class=\"token operator\">:</span> <span class=\"token string\">'value B'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"h·∫°n-ch·∫ø-l·ªìng-nhi·ªÅu-arrow-function\"><a href=\"#h%E1%BA%A1n-ch%E1%BA%BF-l%E1%BB%93ng-nhi%E1%BB%81u-arrow-function\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>H·∫°n ch·∫ø l·ªìng nhi·ªÅu arrow function</h2>\n<p>Th√≠ d·ª• c√≥ m·ªôt button, sau khi click ch√∫ng ta request l√™n server, sau khi nh·∫≠n ƒë∆∞·ª£c gi√° tr·ªã, log xu·ªëng tr√¨nh duy·ªát</p>\n<pre class=\"language-js\"><code class=\"language-js\">myButton<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/items.json'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token arrow operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">json</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n      json<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span><span class=\"token property-access\">name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Vi·∫øt v·∫≠y, <em>thi√™n h·∫°</em> ch√™ kh√≥ ƒë·ªçc. C√¢n nh·∫Øc c√°ch vi·∫øt sau</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">readItemsJson</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">json</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  json<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span><span class=\"token property-access\">name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleButtonClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/items.json'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token arrow operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span>readItemsJson<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nmyButton<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> handleButtonClick<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Mu·ªën <em>ngon</em> h∆°n l√† d√πng <code class=\"language-text\">async/await</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleButtonClick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/items.json\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> json <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  json<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span><span class=\"token property-access\">name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nmyButton<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> handleButtonClick<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p><a href=\"https://dmitripavlutin.com/javascript-arrow-functions-best-practices/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">5 Best Practices to Write Quality Arrow Functions</a></p>\n","cover_image":""}},{"node":{"id":"2f989fd0a23550e73b2ace01c0db24ad","title":"B·∫Øt s·ª± ki·ªán click b√™n ngo√†i Component React","path":"/2020-01-30-huong-dan-bat-su-kien-ben-ngoai-react-md/","date":"2020-01-30","timeToRead":1,"desc":"Th·ªß thu·∫≠t nh·ªè ƒë·ªÉ b·∫Øt s·ª± ki·ªán click c√≥ n·∫±m ngo√†i component kh√¥ng","content":"<p>N·∫øu b·∫°n t·ª± l√†m m·ªôt react component nh∆∞ <em>dropdown</em>, <em>modal</em>, <em>popover</em>, kh√¥ng s·ªõm th√¨ mu·ªôn b·∫°n s·∫Ω r∆°i v√†o t√¨nh hu·ªëng sao \"B·∫Øt s·ª± ki·ªán click b√™n ngo√†i component ƒë·ªÉ ƒë√≥ng n√≥ (modal, popover, dropdown) l·∫°i\"</p>\n<p><img src=\"https://miro.medium.com/max/546/1*7dmOCdkoDLfnWz6hBF0fYA.png\"></p>\n<p>ƒê√¢y l√† nh·ªØng g√¨ b·∫°n c·∫ßn l√†m</p>\n<ol>\n<li>ƒê·ªÉ bi·∫øt s·ª± ki·ªán n·∫±m trong hay ngo√†i component, ch√∫ng ta ph·∫£i l·∫•y ƒë∆∞·ª£c DOM c·ªßa element, d√πng <code class=\"language-text\">ref</code> ƒë·ªÉ l·∫•y tham chi·∫øu ƒë·∫øn DOM <em>th·ª±c</em> c·ªßa component</li>\n</ol>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> node <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token spread operator\">...</span>\n\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ref</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>node<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        ...\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre>\n<ol start=\"2\">\n<li>Th√™m m·ªôt event listener cho s·ª± ki·ªán click ( <em>mousedown</em> )</li>\n</ol>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//  th√™m khi ƒë√£ mount</span>\n    <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mousedown\"</span><span class=\"token punctuation\">,</span> handleClick<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// d·ªçn d·∫πp</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mousedown\"</span><span class=\"token punctuation\">,</span> handleClick<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<ol start=\"3\">\n<li>B√™n trong <code class=\"language-text\">handleClick</code> <strong>node.current.contains(e.target)</strong> s·∫Ω tr·∫£ v·ªÅ <code class=\"language-text\">true</code> n·∫øu click xu·∫•t ph√°t b√™n trong ref <code class=\"language-text\">node</code></li>\n</ol>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span><span class=\"token property-access\">current</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">contains</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token comment\">// outside</span>\n    <span class=\"token spread operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p><a href=\"https://codesandbox.io/s/w62xl39907\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Code</a>\n<a href=\"https://medium.com/@pitipatdop/little-neat-trick-to-capture-click-outside-react-component-5604830beb7f\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Little Neat trick to capture click outside with React Hook</a></p>\n","cover_image":""}},{"node":{"id":"9bf633f5feb195af4bd1b898f6354765","title":"Vi·∫øt v√† Deploy m·ªôt Lambda Function tr√™n Netlify","path":"/2020-01-10-huong-dan-viet-lambda-function-voi-netlify/","date":"2020-01-10","timeToRead":3,"desc":"","content":"<h2 id=\"lambda-function-l√†-g√¨\"><a href=\"#lambda-function-l%C3%A0-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Lambda function l√† g√¨?</h2>\n<p>Gi·∫£i th√≠ch v·ªÅ Serverless b·∫°n ƒë·ªçc b√†i tr∆∞·ªõc c√≥ ƒëƒÉng</p>\n<p>N·∫øu b·∫°n ch·ªâ c√≥ m·ªôt trang blog nh∆∞ th·∫ø n√†y, vi·∫øt b·∫±ng Gatsby, kh√¥ng c√≥ backend l√†m sao b·∫°n c√≥ th·ªÉ c√≥ ƒë∆∞·ª£c t√≠nh nƒÉng cho ph√©p user ƒëƒÉng k√Ω nh·∫≠n b·∫£n tin? V√≠ d·ª• d√πng d·ªãch v·ª• c·ªßa MailChimp ƒëi.</p>\n<p>Ch√∫ng ta ko th·ªÉ ƒë∆∞a API key v√†o trang frontend ƒë∆∞·ª£c, hi·ªÉn nhi√™n qu√° m√†! Ai c≈©ng c√≥ th·ªÉ l·∫•y ƒë∆∞·ª£c c√°i key n√†y th√¨ sao.</p>\n<p>Ch√∫ng ta ph·∫£i th√¥ng qua m·ªôt b√™n ·ªü gi·ªØa, l√† Lambda function tr√™n Netlify, ch√∫ng ta ƒë∆∞a key n√†y cho Netlify, n√≥ s·∫Ω c√≥ tr√°ch nhi·ªám b·∫£o m·∫≠t key n√†y v√† truy·ªÅn th√¥ng tin t·ªõi MailChimp</p>\n<p>Ch·ªØ Lambda ƒë∆∞·ª£c <strong>ph√°t minh</strong> ƒë·∫ßu ti√™n b·ªüi Amazon AWS, sau n√†y Netlify c≈©ng d√πng lu√¥n t√™n n√†y, n√≥ l√† ki·ªÉu c√°c <em>h√†m trung gian</em>, gi√∫p ch√∫ng ta giao ti·∫øp v·ªõi ph√≠a server (v√¨ ƒë√¢y l√† d·∫°ng serverless, ch√∫ng ta d√πng d·ªãch v·ª• c·ªßa n√≥ cung c·∫•p, gi·ªëng nh∆∞ vua ch√∫a, n·∫øu mu·ªën giao ti·∫øp v·ªõi anh th√¨ ch√∫ c·ª© th√¥ng qua th√°i d√°m, h·ªç s·∫Ω truy·ªÅn tin t·ªõi cho anh)</p>\n<p>C·ª© d√πng trang m·∫∑c ƒë·ªãnh c·ªßa Gatsby</p>\n<p><img src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540301648/sv9k9cv1zdtr4ebqpr09.png\" alt=\"Vi·∫øt v√† Deploy m·ªôt Lambda Function tr√™n Netlify\"></p>\n<p>T·∫°o m·ªôt th∆∞ m·ª•c b√™n trong source code, n√≥ s·∫Ω ch·ª©a to√†n b·ªô c√°c h√†m s·∫Ω giao ti·∫øp v·ªõi Lambda. Th∆∞ m·ª•c n√†y ƒë·∫∑t ƒë√¢u c≈©ng ƒë∆∞·ª£c, c·ª© ƒë·∫∑t v√†o d∆∞·ªõi th∆∞ m·ª•c g·ªëc t√™n <code class=\"language-text\">functions</code></p>\n<blockquote>\n<p>M·ªói file ch·ªâ ch·ª©a 1 function</p>\n</blockquote>\n<p>test.js</p>\n<pre class=\"language-js\"><code class=\"language-js\">exports<span class=\"token punctuation\">.</span><span class=\"token method-variable function-variable method function property-access\">handler</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>M·ªói function s·∫Ω nh·∫≠n 3 parameter </p>\n<ul>\n<li><code class=\"language-text\">event</code>: ch·ª©a post data, header</li>\n<li><code class=\"language-text\">context</code>: function n√†y ƒë∆∞·ª£c call ·ªü ƒë√¢u, th√¥ng tin user hi·ªán t·∫°i</li>\n<li><code class=\"language-text\">callback</code>: h√†m callback th√¥i, h√†m n√†y nh·∫≠n param ƒë√¢u ti·ªÅn l√† error n·∫øu c√≥ l·ªói</li>\n</ul>\n<p><img src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540301809/exdwztr8lfepei1x88ux.png\" alt=\"Vi·∫øt v√† Deploy m·ªôt Lambda Function tr√™n Netlify\"></p>\n<h2 id=\"ch·∫°y-c√°c-function-lambda-·ªü-local\"><a href=\"#ch%E1%BA%A1y-c%C3%A1c-function-lambda-%E1%BB%9F-local\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ch·∫°y c√°c function Lambda ·ªü local</h2>\n<p>C·∫ßn c√†i <code class=\"language-text\">netlify-lambda</code> ƒë·ªÉ ch·∫°y test d∆∞·ªõi local </p>\n<pre class=\"language-js\"><code class=\"language-js\">npm install netlify<span class=\"token operator\">-</span>lambda</code></pre>\n<p><img src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540301932/y8uyqgcmxa8i9sczpljo.png\" alt=\"Vi·∫øt v√† Deploy m·ªôt Lambda Function tr√™n Netlify\"></p>\n<pre class=\"language-powershell\"><code class=\"language-powershell\">netlify<span class=\"token operator\">-</span>lambda serve &lt;functions_directory></code></pre>\n<p><code class=\"language-text\">&lt;functions_directory&gt;</code> l√† th∆∞ m·ª•c ch·ª©a m·∫•y function ch√∫ng ta vi·∫øt</p>\n<p>Th√™m ƒëo·∫°n <em>shortcut</em> v√†o trong package.json ƒë·ªÉ ch·∫°y l·ªánh n√†y</p>\n<p><img src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540302074/xnpujx0smgs1ftul0hr2.png\" alt=\"Vi·∫øt v√† Deploy m·ªôt Lambda Function tr√™n Netlify\"></p>\n<p>B∆∞·ªõc cu·ªëi c√πng c·∫ßn l√†m, t·∫°o file config ƒë·ªÉ b√°o v·ªõi Netlify, ƒë√¢y kh√¥ng ph·∫£i l√† th∆∞ m·ª•c ch·ª©a source code c·ªßa ch√∫ng ta, ƒë√¢y l√† th∆∞ m·ª•c sau khi build. T·∫°o file <code class=\"language-text\">Netlify.toml</code> trong th∆∞ m·ª•c g·ªëc</p>\n<p><img src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540302243/gzlbxxtidpi0lukcxmmy.png\" alt=\"Vi·∫øt v√† Deploy m·ªôt Lambda Function tr√™n Netlify\"></p>\n<p>Sau khi build, file b√™n trong <code class=\"language-text\">functions</code> s·∫Ω ƒë∆∞·ª£c ƒë∆∞a v√†o th∆∞ m·ª•c t√™n <code class=\"language-text\">lambda</code></p>\n<p>Ch·∫°y l·∫°i ƒëo·∫°n script <em>shortcut</em> h·ªìi n√£y khai b√°o <code class=\"language-text\">npm run start:lambda</code>, b√™n d∆∞·ªõi h√¨nh n√†y ƒëo·∫°n ch·∫°y b·ªã l·ªói l√† khi ch∆∞a t·∫°o file <code class=\"language-text\">Netlify.toml</code>, ch√∫ng ta b·∫Øt bu·ªôc ph·∫£i t·∫°o file n√†y tr∆∞·ªõc khi ch·∫°y</p>\n<p><img src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540302301/vyr4hwlxacgkhvkvhzdn.png\" alt=\"Vi·∫øt v√† Deploy m·ªôt Lambda Function tr√™n Netlify\"></p>\n<p>M·ªü Postman l√™n g·ªçi test th·ª≠</p>\n<p><img src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540302549/jblo4vceh9ylxxipnct8.png\" alt=\"Vi·∫øt v√† Deploy m·ªôt Lambda Function tr√™n Netlify\"></p>\n<p>Function ƒë·∫ßu ti√™n ƒë√£ ch·∫°y th√†nh c√¥ng!!!</p>\n<p>Ch√∫ng ta truy·ªÅn th√™m m·ªôt object <code class=\"language-text\">{ &quot;name&quot; : &quot;James&quot; }</code>, v√† mu·ªën nh·∫≠n ƒë∆∞·ª£c m·ªôt JSON object thay v√¨ l√† m·ªôt <code class=\"language-text\">string</code>. Mu·ªën v·∫≠y trong ph·∫ßn body ch√∫ng ta ph·∫£i g·ªçi <code class=\"language-text\">JSON.stringify</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    statusCode<span class=\"token operator\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n    body<span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> msg<span class=\"token operator\">:</span> <span class=\"token string\">\"Thanks for visiting \"</span> <span class=\"token operator\">+</span> name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// n·∫øu kh√¥ng nh·∫≠n ƒë∆∞·ª£c name= james</span>\n\n<span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"You're not James\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p><img src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540303047/s7lrt4qmn8svganfbd6s.png\" alt=\"Vi·∫øt v√† Deploy m·ªôt Lambda Function tr√™n Netlify\"></p>\n<p>Test tr√™n Postman</p>\n<p><img src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540303082/gmlkczsp2hhlasrrko2d.png\" alt=\"Vi·∫øt v√† Deploy m·ªôt Lambda Function tr√™n Netlify\"></p>\n<p>Tr∆∞·ªùng h·ª£p ph√°t sinh l·ªói</p>\n<p><img src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540303092/y1uu9ipfgy0rq6p3mtwr.png\" alt=\"Vi·∫øt v√† Deploy m·ªôt Lambda Function tr√™n Netlify\"></p>\n<h2 id=\"deploy-l√™n-netlify\"><a href=\"#deploy-l%C3%AAn-netlify\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Deploy l√™n Netlify</h2>\n<p>N√£y gi·ªù ch√∫ng ta ƒëang ch·∫°y c√°c Lambda function ·ªü d∆∞·ªõi local b·∫±ng l·ªánh <code class=\"language-text\">serve</code>,  ƒë·ªÉ ƒë∆∞a l√™n Netlify, ch√∫ng ta c·∫ßn <code class=\"language-text\">build</code> source code tr∆∞·ªõc khi ƒë·∫©y l√™n Netlify</p>\n<p>Ch√∫ng ta ph·∫£i setup ch·∫°y 2 script, m·ªôt ƒë·ªÉ build Gatsby, sau ƒë√≥ build m·∫•y functions lambda</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"props\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run build; npm run build:lambda\"</span></code></pre>\n<p><img src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540315111/hv7omcr0angknnup175q.png\" alt=\"Vi·∫øt v√† Deploy m·ªôt Lambda Function tr√™n Netlify\"></p>\n<p>L∆∞u √Ω: do ƒëang d√πng gatsby, n√™n c·∫ßn 2 l·ªánh n√†y, n·∫øu b·∫°n d√πng m·ªôt th·∫±ng kh√°c, th√¨ l·ªánh s·∫Ω kh√°c, tuy c√°ch setup</p>\n<p>Ph·∫£i c·∫≠p nh·∫≠p l·∫°i <strong>Netlify.toml</strong>, ch√∫ng ta s·∫Ω b√°o v·ªõi Netlify: \"√ä, khi n√†o tao ch·∫°y xong <code class=\"language-text\">prop</code>, th√¨ m√†y deploy nhe\"</p>\n<p><img src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540315122/lytjmmofmjjgixzxycwo.png\" alt=\"Vi·∫øt v√† Deploy m·ªôt Lambda Function tr√™n Netlify\"></p>\n<p>Sau khi commit l√™n Github, Netlify s·∫Ω b·∫Øt ƒë·∫ßu trigger deploy, v√†o trang ch√≠nh c·ªßa Netlify, trong tab <strong>Deployment</strong>, b·∫°n c√≥ theo d√µi xem n√≥ ƒëang deploy t·ªõi ƒë√¢u r·ªìi</p>\n<p><img src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540315158/kulpc3u2tqftgxijpr6c.png\" alt=\"Vi·∫øt v√† Deploy m·ªôt Lambda Function tr√™n Netlify\"></p>\n<p>Sau khi deploy th√†nh c√¥ng, b·∫°n c√≥ th·ªÉ chuy·ªÉn qua tab <strong>Function</strong>, c√°c function n√†o ƒë√£ c√≥ s·∫Ω ƒë∆∞·ª£c li·ªát k√™ ·ªü ƒë√¢y</p>\n<p><img src=\"https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540315181/nblkoi0l6shvdvvybtje.png\" alt=\"Vi·∫øt v√† Deploy m·ªôt Lambda Function tr√™n Netlify\"></p>\n<p>C∆° b·∫£n l√† th·∫ø th√¥i, c√°c b·∫°n c√≥ th·ªÉ l√†m <em>\"m·ªçi th·ª©\"</em> v·ªõi function m√¨nh vi·∫øt (mi·ªÖn l√† n√≥ c√≥ cho), nh∆∞ g·ª≠i email, l∆∞u d·ªØ li·ªáu xu·ªëng DB, g·ªçi m·ªôt API</p>\n<p><a href=\"https://scotch.io/tutorials/build-and-deploy-a-serverless-function-to-netlify\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://scotch.io/tutorials/build-and-deploy-a-serverless-function-to-netlify</a></p>\n","cover_image":""}},{"node":{"id":"349aadd0da40a81b9f8c94db06172ce3","title":"S·ª≠ d·ª•ng useReducer v√† useContext ƒë·ªÉ l√†m global state","path":"/2020-01-08-su-dung-context-de-lam-global-store-trong-react/","date":"2020-01-08","timeToRead":3,"desc":"","content":"<p>Th√¥ng th∆∞·ªùng ch√∫ng ta s·∫Ω d√πng m·ªôt <em>nh√† kho</em> ƒë·ªÉ ch·ª©a d·ªØ li·ªáu <code class=\"language-text\">state</code> nh∆∞ <em>Redux</em>, m·ªôt component container b·ªçc ·ªü n√∫t ƒë·∫ßu ti√™n trong app, c√°c component con b√™n trong c√≥ th·ªÉ truy xu·∫•t v√† c·∫≠p nh·∫≠p c√°c d·ªØ li·ªáu m·ªôt c√°ch d·ªÖ d√†ng</p>\n<p>V·ªõi c√°c API m·ªõi ƒë∆∞·ª£c React b·ªï sung l√† <code class=\"language-text\">useState</code>, <code class=\"language-text\">createContext</code>, <code class=\"language-text\">useContext</code> ch√∫ng ta c√≥ <em>th√™m m·ªôt l·ª±a ch·ªçn</em> ƒë·ªÉ l√†m <em>nh√† kho</em> m√† ko c·∫ßn d√πng ƒë·∫øn Redux</p>\n<p>V√≠ d·ª• ch√∫ng ta c√≥ 3 d·ªØ li·ªáu nh∆∞ b√™n d∆∞·ªõi</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> teamMembersNames <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"John\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Mary\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Jason\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"David\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>sharing<span class=\"token punctuation\">,</span> setSharing<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>help<span class=\"token punctuation\">,</span> setHelp<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>pairing<span class=\"token punctuation\">,</span> setPairing<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useState</span><span class=\"token punctuation\">(</span>teamMembersNames<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>C√¢u h·ªèi l√† l√†m sao ch√∫ng ta ƒë∆∞a d·ªØ li·ªáu v√†o <em>nh√† kho</em>. Ch√∫ng ta s·∫Ω d√πng API <code class=\"language-text\">createContext</code> (t·∫°o em c√°i kho)</p>\n<p>Khi s·ª≠ d·ª•ng <code class=\"language-text\">React.createContext</code> ch√∫ng ta s·∫Ω nh·∫≠n v·ªÅ 2 component l√† <code class=\"language-text\">Provider</code> (anh tung) v√† <code class=\"language-text\">Consumer</code> (em h·ª©ng).</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ./src/utils/store.js</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token maybe-class-name\">StoreContext</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// c√°c em ƒë√£ v√†o nh√† kho</span>\n  <span class=\"token keyword\">const</span> teamMembersNames <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"John\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Mary\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Jason\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"David\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>sharing<span class=\"token punctuation\">,</span> setSharing<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>help<span class=\"token punctuation\">,</span> setHelp<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>pairing<span class=\"token punctuation\">,</span> setPairing<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useState</span><span class=\"token punctuation\">(</span>teamMembersNames<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    sharing<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>sharing<span class=\"token punctuation\">,</span> setSharing<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    help<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>help<span class=\"token punctuation\">,</span> setHelp<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    pairing<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>pairing<span class=\"token punctuation\">,</span> setPairing<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">StoreContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>store<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">StoreContext.Provider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>ƒê·ªÉ c√°c component b√™n trong <code class=\"language-text\">&lt;App/&gt;</code> ƒë·ªÅu d√πng ƒë∆∞·ª£c <code class=\"language-text\">&lt;Consumer /&gt;</code></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// ./index.js</span>\n<span class=\"token keyword module\">import</span> <span class=\"token maybe-class-name\">React</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">import</span> <span class=\"token maybe-class-name\">ReactDOM</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"react-dom\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">import</span> <span class=\"token maybe-class-name\">App</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"./App\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">import</span> <span class=\"token maybe-class-name\">StoreProvider</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"./utils/store\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token maybe-class-name\">ReactDOM</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">StoreProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">StoreProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>V·ªõi b·∫•t k·ª≥ component n√†o mu·ªën s·ª≠ d·ª•ng, ƒë·ªÉ l·∫•y ƒë∆∞·ª£c d·ªØ li·ªáu trong store, ch√∫ng ta s·ª≠ d·ª•ng <code class=\"language-text\">useContext</code></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword module\">import</span> <span class=\"token maybe-class-name\">React</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token maybe-class-name\">StoreContext</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"../utils/store\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">SomeComponent</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// d·ªØ li·ªáu d√πng chung</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> sharing <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">useContext</span><span class=\"token punctuation\">(</span><span class=\"token maybe-class-name\">StoreContext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Ho·∫∑c n·∫øu th√≠ch d√πng c√°ch vi·∫øt render props, c√≥ th·ªÉ d√πng lu√¥n component <code class=\"language-text\">&lt;Consumer/&gt;</code></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">StoreContext.Consumer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span><span class=\"token parameter\">store</span> <span class=\"token arrow operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">InputComponent</span></span> <span class=\"token attr-name\">store</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>store<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">StoreContext.Consumer</span></span><span class=\"token punctuation\">></span></span></code></pre>\n<h2 id=\"·ª©ng-d·ª•ng-l√†m-useauth\"><a href=\"#%E1%BB%A9ng-d%E1%BB%A5ng-l%C3%A0m-useauth\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>·ª®ng d·ª•ng l√†m <code class=\"language-text\">useAuth</code></h2>\n<p>M·ªôt trong nh·ªØng v√≠ d·ª• d·ªÖ th·∫•y, ph·∫ßn d·ªØ li·ªáu n√™n ƒë∆∞a v√†o <em>nh√† kho chung</em> l√† ph·∫ßn th√¥ng tin user ƒëang ƒëƒÉng nh·∫≠p</p>\n<p>Ch√∫ng ta s·∫Ω c·∫ßn 3 ph·∫ßn</p>\n<ol>\n<li>Khai b√°o m·ªôt nh√† kho b·∫±ng <code class=\"language-text\">createContext</code></li>\n<li>B·ªô <code class=\"language-text\">reducer</code> l√†m nhi·ªám v·ª• c·∫≠p nh·∫≠p x·ª≠ l√Ω <code class=\"language-text\">state</code></li>\n<li>M·ªôt hook t√πy bi·∫øn <code class=\"language-text\">useAuth</code> cung c·∫•p c√°c API c·∫ßn thi·∫øt ƒë·ªÉ t∆∞∆°ng t√°c v·ªõi <em>nh√† kho chung</em> ƒë√£ khai b√°o</li>\n</ol>\n<p>1) <strong>AuthProvider.js</strong> Khai b√°o nh√† kho (b·∫£n r√∫t g·ªçn)</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// AuthProvider.js</span>\n<span class=\"token keyword module\">import</span> authReducer <span class=\"token keyword module\">from</span> <span class=\"token string\">\"authReducer\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token maybe-class-name\">AuthContext</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">AuthProvider</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// kh·ªüi t·∫°o</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>authReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AuthContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">AuthContext.Provider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<ol start=\"2\">\n<li><strong>authReducer.js</strong> (b·∫£n r√∫t g·ªçn)</li>\n</ol>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// authReducer.js</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">authReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> action</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span><span class=\"token property-access\">type</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"login\"</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> authResult<span class=\"token punctuation\">,</span> user <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> action<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> expiresAt <span class=\"token operator\">=</span> authResult<span class=\"token punctuation\">.</span><span class=\"token property-access\">expiresIn</span> <span class=\"token operator\">*</span> <span class=\"token number\">1000</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token dom variable\">localStorage</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"expires_at\"</span><span class=\"token punctuation\">,</span> <span class=\"token known-class-name class-name\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">stringify</span><span class=\"token punctuation\">(</span>expiresAt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token dom variable\">localStorage</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span> <span class=\"token known-class-name class-name\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">stringify</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> user<span class=\"token punctuation\">,</span> expiresAt <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">\"logout\"</span><span class=\"token operator\">:</span>\n      <span class=\"token dom variable\">localStorage</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">removeItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"expires_at\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token dom variable\">localStorage</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">removeItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> user<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> expiresAt<span class=\"token operator\">:</span> <span class=\"token keyword null nil\">null</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword module\">default</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<ol start=\"3\">\n<li>M·ªôt hook t√πy bi·∫øn <strong><code class=\"language-text\">useAuth</code></strong></li>\n</ol>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// useAuth.js</span>\n<span class=\"token keyword module\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token maybe-class-name\">AuthProvider</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"AuthProvider\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useAuth</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> state<span class=\"token punctuation\">,</span> dispatch <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">userContext</span><span class=\"token punctuation\">(</span><span class=\"token maybe-class-name\">AuthContext</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">login</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// l√†m g√¨ ƒë√≥ ·ªü ƒë√¢y</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">logout</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// l√†m g√¨ ƒë√≥ ·ªü ƒë√¢y</span>\n        <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">\"logout\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// ...  c√≤n m·ªôt s·ªë th·ª©c kh√°c</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isAuthenticated</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">.</span><span class=\"token property-access\">expiresAt</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> state<span class=\"token punctuation\">.</span><span class=\"token property-access\">expiresAt</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// ...  c√≤n m·ªôt s·ªë th·ª©c kh√°c</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        isAuthenticated<span class=\"token punctuation\">,</span>\n        user<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span><span class=\"token property-access\">user</span><span class=\"token punctuation\">,</span>\n        userId<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span><span class=\"token property-access\">user</span> <span class=\"token operator\">?</span> state<span class=\"token punctuation\">.</span><span class=\"token property-access\">user</span> <span class=\"token operator\">:</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">;</span>\n        login<span class=\"token punctuation\">,</span>\n        logout<span class=\"token punctuation\">,</span>\n        handleAuthentication\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>V·ªõi c√°ch l√†m n√†y, b·∫•t k·ª≥ component n√†o s·ª≠ d·ª•ng <code class=\"language-text\">useAuth</code> ƒë·ªÅu s·∫Ω truy xu·∫•t ƒë·∫øn m·ªôt kho d·ªØ li·ªáu <em>chung</em></p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword module\">import</span> useAuth <span class=\"token keyword module\">from</span> <span class=\"token string\">\"useAuth\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">MyCom</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* qu√° tr·ªùi th·ª© linh tinh tr·∫£ v·ªÅ */</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useAuth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p><a href=\"https://swizec.com/blog/usereducer-usecontext-for-easy-global-state-without-libraries/swizec/9182\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">useReducer + useContext for easy global state without libraries</a></p>\n<p><a href=\"https://dev.to/nazmifeeroz/using-usecontext-and-usestate-hooks-as-a-store-mnm\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Using useContext and useState hooks as a store</a></p>\n","cover_image":""}},{"node":{"id":"e48f241d053eb1fd1df12d270dc6c371","title":"Khi n√†o n√™n s·ª≠ d·ª•ng useLayoutEffect thay v√¨ useEffect","path":"/2020-01-02-khi-nao-nen-su-dung-uselayouteffect-trong-react/","date":"2020-01-02","timeToRead":2,"desc":"2 React Hook l√†m nhi·ªám v·ª• kh√° gi·ªëng nhau l√† useEffect v√† useLayoutEffect b·∫°n ƒë√£ bi·∫øt c√°ch s·ª≠ d·ª•ng th·∫ø n√†o cho ƒë√∫ng","content":"<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// th·ª±c hi·ªán side effect</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token comment\">/* d·ªçn r√°c */</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>khai b√°o c√°c gi√° tr·ªã m√† n√≥ ph·ª• thu·ªôc<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">useLayoutEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// th·ª±c hi·ªán side effect</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token comment\">/* d·ªçn r√°c */</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>th·ª±c hi·ªán side effect<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>N·∫øu ko c√≥ kh√°c nhau th√¨ React team s·∫Ω kh√¥ng t·∫°o ra 2 th·∫±ng, hi·ªÉn nhi√™n?. (H·∫ßu nh∆∞ c√≥ th·ªÉ d·ª•ng <code class=\"language-text\">useEffect</code> trong m·ªçi t√¨nh hu·ªëng)</p>\n<p>Kh√°c nhau l√† ·ªü <strong>TH·ªúI GIAN TH·ª∞C HI·ªÜN</strong></p>\n<p><code class=\"language-text\">useEffect</code> ch·∫°y <strong>b·∫•t tu·∫ßn t·ª±</strong> v√† ƒë·ª£i <strong>sau</strong> khi vi·ªác component ƒë√£ xu·∫•t hi·ªán tr√™n m√†n h√¨nh (sau khi tr√¨nh duy·ªát <em>paint</em>)</p>\n<p>Qu√° tr√¨nh c·ª• th·∫ø l√† th·∫ø n√†y</p>\n<ol>\n<li>Component g·ªçi ƒë·∫øn <code class=\"language-text\">render</code></li>\n<li>M√†n h√¨nh c·∫≠p nh·∫≠p l·∫°i UI m·ªõi</li>\n<li><strong>SAU ƒê√ì</strong> ch·∫°y <code class=\"language-text\">useEffect</code></li>\n</ol>\n<p><code class=\"language-text\">useLayoutEffect</code>, ng∆∞·ª£c l·∫°i, ch·∫°y <strong>tu·∫ßn t·ª±</strong> sau khi render nh∆∞ng l√† <strong>tr∆∞·ªõc</strong> khi UI c·∫≠p nh·∫≠p</p>\n<p>Qu√° tr√¨nh</p>\n<ol>\n<li>Component g·ªçi ƒë·∫øn <code class=\"language-text\">render</code></li>\n<li><code class=\"language-text\">useLayoutEffect</code> ƒë∆∞·ª£c g·ªçi, ƒë·ª£i ch·∫°y xong m·ªõi ƒëi ti·∫øp</li>\n<li>M√†n h√¨nh c·∫≠p nh·∫≠p l·∫°i UI m·ªõi</li>\n</ol>\n<p>Trong 99% c√°c tr∆∞·ªùng h·ª£p, s·ª≠ d·ª•ng <code class=\"language-text\">useEffect</code>  s·∫Ω l√† c√°ch t·ªët nh·∫•t, v√¨ nh·ªØng effect c·ªßa ch√∫ng ta s·∫Ω c·∫ßn ƒë·ªìng b·ªô v·ªõi prop, state, kh√¥ng c·∫ßn x·∫£y ra <strong>NGAY L·∫¨P T·ª®C</strong> v√† kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn k·∫øt qu·∫£ cu·ªëi c√πng c·ªßa UI.</p>\n<p>V√≠ d·ª• nh∆∞ fetch d·ªØ li·ªáu s·∫Ω kh√¥ng c·∫ßn c√≥ k·∫øt qu·∫£ ngay l·∫≠p t·ª©c, hay ƒë·∫∑t ƒë·ªÉ c√°c event handler</p>\n<p>N·∫øu th·∫•y UI b·ªã <code class=\"language-text\">flickering</code> (gi·ªëng nh∆∞ xu·∫•t hi·ªán s·ªçc s·ªçc tr√™n m√†n h√¨nh tivi) khi c·∫≠p nh·∫≠p, nguy√™n nh√¢n do n√≥ ƒë√£ render khi <em>v·ª´a cos</em> state, sau ƒë√≥ l·∫°i re-render l·∫°i v·ªõi state nh·∫≠n ƒë∆∞·ª£c sau c√πng. ƒê√≥ l√† l√∫c b·∫°n d√πng <code class=\"language-text\">useLayoutEffect</code></p>\n<p>V√≠ d·ª• nh√©, b·∫°n cho user click ƒë·ªÉ thay ƒë·ªïi state <code class=\"language-text\">value</code>, n√≥ s·∫Ω re-render component, sau ƒë√≥ effect ch·∫°y, n√≥ l·∫°i set gi√° tr·ªã <code class=\"language-text\">value</code> th√†nh m·ªôt con s·ªë ng·∫´u nhi√™n => l·∫°i re-render component.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword module\">import</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  useState<span class=\"token punctuation\">,</span>\n  useLayoutEffect\n<span class=\"token punctuation\">}</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">import</span> <span class=\"token maybe-class-name\">ReactDOM</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'react-dom'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">BlinkyRender</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">,</span> setValue<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useLayoutEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span> <span class=\"token operator\">+</span> <span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'render'</span><span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      value: </span><span class=\"token punctuation\">{</span>value<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span> <span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token maybe-class-name\">ReactDOM</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">BlinkyRender</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#root'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>V·ªõi c√°ch d√πng <code class=\"language-text\">useLayoutEffect</code> ch√∫ng ta ch·ªâ c·∫≠p nh·∫≠p UI ƒë√∫ng <strong>1</strong> l·∫ßn, trong khi component g·ªçi render <strong>2</strong> l·∫ßn.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://daveceddia.com/useeffect-vs-uselayouteffect/\">üìú When to useLayoutEffect Instead of useEffect</a></p>\n","cover_image":""}},{"node":{"id":"a9ae01a44640fc379a2a587064d4d71b","title":"·ª®ng d·ª•ng JSON.parse ƒë·ªÉ c·∫£i thi·ªán t·ªëc ƒë·ªô?","path":"/2019-12-14-thu-thuat-tang-toc-bang-json-parse/","date":"2019-12-14","timeToRead":3,"desc":"Th·ªß thu·∫≠t ƒë·ªÉ c·∫£i thi·ªán t·ªëc ƒë·ªô b·∫±ng JSON.parse","content":"<p>V·ªõi c√°c ·ª©ng d·ª•ng web ng√†y nay, kh√¥ng kh√≥ b·∫Øt g·∫∑p vi·ªác s·ª≠ d·ª•ng object nh∆∞ m·ªôt n∆°i l∆∞u tr·ªØ state v√† c√°c d·∫°ng d·ªØ li·ªáu c·∫ßn thi·∫øt kh√°c cho ·ª©ng d·ª•ng. C·ª• th·ªÉ nh·∫•t ch√∫ng ta th∆∞·ªùng th·∫•y trong store c·ªßa Redux.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> foo<span class=\"token operator\">:</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span> bar<span class=\"token operator\">:</span> <span class=\"token number\">1337</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üêå</span></code></pre>\n<p>Trong th·ª±c t·∫ø n√≥ s·∫Ω kh√¥ng ƒë∆°n gi·∫£n nh∆∞ v√≠ d·ª• ·ªü tr√™n, m√† c·∫•u tr√∫c n·∫øu kh√¥ng ch·ªìng ch√©o th√¨ c≈©ng r·∫•t l·ªõn v√¨ ph·∫£i g√°nh v√°c to√†n b·ªô <code class=\"language-text\">state</code> c·ªßa ·ª©ng d·ª•ng. N·∫øu n√≥ l·∫°i d·ªØ li·ªáu c·∫ßn thi·∫øt trong l√∫c kh·ªüi t·∫°o ·ª©ng d·ª•ng l·∫ßn ƒë·∫ßu ti√™n. Vi·ªác n√†y s·∫Ω n·∫±m trong render critical path c·ªßa tr√¨nh duy·ªát, ƒë·ªìng nghƒ©a v·ªõi vi·ªác user kh√¥ng th·∫•y g√¨ h·∫øt cho ƒë·∫øn khi d·ªØ li·ªáu n√†y ƒë∆∞·ª£c load, parse, compile, execute b·ªüi Javascript engine b√™n d∆∞·ªõi.</p>\n<p>ƒê·ªÉ kh·∫Øc ph·ª•c vi·ªác n√†y m·ªôt trong nh·ªØng c√°ch l√†m l√† d√πng server side rendering, ch√∫ng ta ch·ªâ quƒÉng c√°i HTML ƒë√£ ch·ª©a to√†n b·ªô k·∫øt qu·∫£ c·ªßa qu√° tr√¨nh xu·ªëng user. Tr√¨nh duy·ªát user kh√¥ng c·∫ßn ƒë·∫£m ƒë∆∞∆°ng c√¥ng vi·ªác ƒë√≥ n·ªØa.</p>\n<p>Nh∆∞ng n·∫øu ch√∫ng ta kh√¥ng th·ªÉ d√πng server side rendering th√¨ sao?</p>\n<p>N·∫øu object ch√∫ng ta c·∫ßn kh√¥ng ch·ª©a nh·ªØng g√¨ m√† JSON kh√¥ng h·ªó tr·ª£, nh∆∞ BigInt, Maps, Sets,... Ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng <code class=\"language-text\">JSON.parse</code></p>\n<p>V√¨ c√∫ ph√°p c·ªßa JSON ƒë∆°n gi·∫£n h∆°n nhi·ªÅu so v·ªõi Javascript, n√™n qu√° tr√¨nh parse s·∫Ω √≠t t·ªën k√©m h∆°n so v·ªõi Javascript r·∫•t nhi·ªÅu.</p>\n<p>N·ªôi dung b√™n trong JSON ƒë·ªëi v·ªõi c√°c engine r·∫•t d·ªÖ ƒëo√°n, v√† ng∆∞·ª£c l·∫°i v·ªõi c√°c object. Th√≠ d·ª• n·∫øu b·∫°n l√† c√°i engine r·ªìi nh√¨n v√†o ƒë√¢y</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token known-class-name class-name\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">parse</span><span class=\"token punctuation\">(</span>'<span class=\"token punctuation\">{</span></code></pre>\n<p>Khi b·∫°n th·∫•y d·∫•u <code class=\"language-text\">{</code>, b·∫°n s·∫Ω bi·∫øt ƒë∆∞·ª£c ch·ªâ c√≥ 2 kh·∫£ nƒÉng c√≥ th·ªÉ x·∫£y ra: m·ªôt l√† b·∫Øt ƒë·∫ßu m·ªôt object, hai l√† m·ªôt JSON kh√¥ng h·ª£p l·ªá.</p>\n<p>Trong khi ƒë√≥ sau d·∫•u <code class=\"language-text\">{</code>  c·ªßa object, c√≥ r·∫•t nhi·ªÅu kh·∫£ nƒÉng x·∫£y ra</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> <span class=\"token number\">42</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">}</span></code></pre>\n<p>ƒê√¢y c√≥ ph·∫£i l√† object kh√¥ng? Gi√° tr·ªã x ƒëang tr·ªè t·ªõi ƒë√¢u? Kh√¥ng th·ªÉ n√†o c√≥ ƒë√°p √°n n·∫øu kh√¥ng xem h·∫øt to√†n b·ªô code</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// kh·ªüi t·∫°o object, x tr·ªü t·ªõi th·∫±ng khai b√°o tr∆∞·ªõc ƒë√≥</span>\n<span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// object destructuring, x kh√¥ng tr·ªè t·ªõi th·∫±ng ƒë·∫ßu</span>\n<span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> x<span class=\"token operator\">:</span> <span class=\"token number\">21</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// m·ªôt arrow function</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">y</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> x<span class=\"token punctuation\">;</span></code></pre>\n<p>Nh∆∞ v·∫≠y, n·∫øu g·∫∑p d·∫•u <code class=\"language-text\">{</code>, c√°c engine ph·∫£i v√¥ c√πng th·∫≠n tr·ªçng v√¨ ph·∫£i bi·∫øt ng·ªØ c·∫£nh hi·ªán t·∫°i m·ªõi bi·∫øt n√≥ l√† g√¨. </p>\n<p>L·ª£i d·ª•ng ƒë·∫∑c t√≠nh n√†y ch√∫ng ta c√≥ th·ªÉ c·∫£i thi·ªán t·ªëc ƒë·ªô c·ªßa c√°c ·ª©ng d·ª•ng web c√≥ s·ª≠ d·ª•ng m·ªôt object c√≥ c·∫•u tr√∫c t∆∞∆°ng t·ª± nh∆∞ JSON ( v√≠ d·ª• nh∆∞ Redux Store). Thay v√¨ s·ª≠ d·ª•ng m·ªôt khai b√°o object nh∆∞ th·∫ø n√†y</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> foo<span class=\"token operator\">:</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span> bar<span class=\"token operator\">:</span> <span class=\"token number\">1337</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üêå</span></code></pre>\n<p>C√≥ th·ªÉ tƒÉng t·ªëc b·∫±ng c√°ch vi·∫øt</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">parse</span><span class=\"token punctuation\">(</span><span class=\"token string\">'{\"foo\":42,\"bar\":1337}'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üöÄ</span></code></pre>\n<p>Mi·ªÖn l√† vi·ªác t√≠nh to√°n n√†y ch·ªâ c·∫ßn parse m·ªôt l·∫ßn b·∫±ng <code class=\"language-text\">JSON.parse</code>, n√≥ s·∫Ω nhanh h∆°n nhi·ªÅu so v·ªõi c√°ch khai bao object b√¨nh th∆∞·ªùng, v√† ch·ªâ n√™n suy nghƒ© √°p d·ª•ng khi object ƒë√£ v∆∞·ª£t qu√° k√≠ch th∆∞·ªõc 10kB. </p>\n<p>Th·ª±c hi·ªán ki·ªÉm tra t·ªëc ƒë·ªô c·ªßa m·ªôt object kho·∫£ng 8Mb dung l∆∞·ª£ng tr√™n c√°c engine kh√°c nhau. K·∫øt qu·∫£ nh·∫≠n ƒë∆∞·ª£c √≠t nh·∫•t c≈©ng tƒÉng t·ªëc g·∫•p 1.5 l·∫ßn tr√™n c√°c phi√™n b·∫£n kh√°c nhau c·ªßa V8</p>\n<p><img src=\"https://v8.dev/_img/cost-of-javascript-2019/json.svg\"></p>\n<p><a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://v8.dev/blog/cost-of-javascript-2019#json</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=ff4fgQxPaO0\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Faster apps with JSON.parse (Chrome Dev Summit 2019)</a></p>\n","cover_image":""}},{"node":{"id":"aef50f5a2dd43730cf89e8a944b6adec","title":"T·ªëi ∆∞u component React b·∫±ng React.memo, useMemo v√† useCallback","path":"/2019-12-13-huong-dan-cai-thien-hieu-nang-react-component/","date":"2019-12-13","timeToRead":2,"desc":"S·ª≠ d·ª•ng nh·ªØng h√†m c√≥ s·∫µn c·ªßa React ƒë·ªÉ vi·∫øt component ngon h∆°n","content":"<p>H·∫ßu h·∫øt c√°c tr∆∞·ªùng h·ª£p, hi·ªáu nƒÉng c·ªßa c√°c ·ª©ng d·ª•ng React kh√¥ng ph·∫£i l√† v·∫•n ƒë·ªÅ qu√° nghi√™m tr·ªçng. B·∫£n th√¢n th∆∞ vi·ªán React ƒë√£ h·ªó tr·ª£ t·∫≠n rƒÉng c√°c ph∆∞∆°ng ƒë·ªÉ c·∫£i thi·ªán l√∫c render component. Tuy nhi√™n c≈©ng c√≥ v√†i tr∆∞·ªùng h·ª£p c√°c component c·ªßa ch√∫ng ta render nhi·ªÅu h∆°n m·ª©c c·∫ßn thi·∫øt v√† l√†m ·∫£nh h∆∞·ªüng ƒë·∫øn hi·ªáu nƒÉng chung.</p>\n<p>L·∫•y v√≠ d·ª•</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">ListPage</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> title <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Header</span></span> <span class=\"token attr-name\">title</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span></span> <span class=\"token attr-name\">listItems</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Trong v√≠ d·ª• r·∫•t r·∫•t ƒë∆°n gi·∫£n tr√™n, n·∫øu <code class=\"language-text\">data</code> thay ƒë·ªïi, to√†n b·ªô <code class=\"language-text\">&lt;Listpage/&gt;</code> s·∫Ω render, bao g·ªìm c·∫£ <code class=\"language-text\">&lt;Header /&gt;</code> v·ªën kh√¥ng c√≥ thay ƒë·ªïi g√¨ n·∫øu gi√° tr·ªã <code class=\"language-text\">data</code> kh√°c ƒëi</p>\n<p>Th·ªùi b√¢y gi·ªù ch√∫ng ta chu·ªông ki·ªÉu vi·∫øt functional component h∆°n, 3 c√°ch ƒë·ªÉ t·ªëi ∆∞u cho m·ªôt functional component l√† s·ª≠ d·ª•ng: <code class=\"language-text\">React.memo</code>, <code class=\"language-text\">useMemo</code>, <code class=\"language-text\">useCallback</code></p>\n<h2 id=\"reactmemo\"><a href=\"#reactmemo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>React.Memo</h2>\n<p>L√† m·ªôt Higher order component d√πng ƒë·ªÉ <strong>ghi nh·ªõ</strong> k·∫øt qu·∫£ c·ªßa function component, t·∫•t nhi√™n n·∫øu truy·ªÅn c√πng m·ªôt prop th√¨ k·∫øt qu·∫£ tr·∫£ v·ªÅ s·∫Ω l√† kh√¥ng ƒë·ªïi, n√™n c√≥ th·ªÉ l·∫•y k·∫øt qu·∫£ <strong>ƒë√£ nh·ªõ</strong> tr∆∞·ªõc ƒë√≥</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">Header</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> title <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">memo</span><span class=\"token punctuation\">(</span><span class=\"token maybe-class-name\">Header</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>C√°ch vi·∫øt tr√™n l√† b·∫Øt bu·ªôc, v√¨ n·∫øu b·∫°n vi·∫øt nh∆∞ b√™n d∆∞·ªõi, component c·ªßa b·∫°n s·∫Ω kh√¥ng xu·∫•t hi·ªán trong devtool</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token maybe-class-name\">Header</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">memo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token maybe-class-name\">Header</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"usememo\"><a href=\"#usememo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>useMemo</h2>\n<p>T√™n c√≥ v·∫ª gi·ªëng, nh∆∞ng kh√¥ng gi·ªëng nhau, n·∫øu <code class=\"language-text\">React.memo</code> l√† m·ªôt HOC ƒë·ªÉ ghi nh·ªõ m·ªôt function component, <code class=\"language-text\">useMemo</code> l√† h√†m gi·ªëng nh∆∞ helper cho ph√©p ch·ªâ ƒë·ªãnh: l∆∞u l·∫°i k·∫øt qu·∫£ c·ªßa h√†m n√†o v√† nh·ªØng gi√° tr·ªã n√†o s·∫Ω l√†m thay ƒë·ªïi k·∫øt qu·∫£ ƒë√≥.</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> widgetList <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span>\n    widgets<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">w</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token spread operator\">...</span>w<span class=\"token punctuation\">,</span>\n      totalPrice<span class=\"token operator\">:</span> <span class=\"token function\">someComplexFunction</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">.</span><span class=\"token property-access\">price</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      estimatedDeliveryDate<span class=\"token operator\">:</span> <span class=\"token function\">someOtherComplexFunction</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">.</span><span class=\"token property-access\">warehouseAddress</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>widgets<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>·ªû ƒëo·∫°n code tr√™n, ch√∫ng ta mu·ªën <strong>ghi nh·ªõ</strong> gi√° tr·ªã c·ªßa <code class=\"language-text\">totalPrice</code> v√† <code class=\"language-text\">estimatedDeliveryDate</code> b·ªüi v√¨ vi·ªác t√≠nh to√°n c√°c gi√° tr·ªã n√†y v√¥ c√πng <em>t·ªën s·ª©c</em>. Ch√∫ng ta ch·ªâ ƒë·ªãnh <code class=\"language-text\">widgets</code> n·∫øu kh√¥ng thay ƒë·ªïi th√¨ ƒë·ª´ng ƒëi t√≠nh l·∫°i l√†m g√¨, m√† l·∫•y k·∫øt qu·∫£ l·∫ßn tr∆∞·ªõc ra.</p>\n<h2 id=\"usecallback\"><a href=\"#usecallback\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>useCallback</h2>\n<p>ƒê∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ ch·∫∑n vi·ªác render kh√¥ng c·∫ßn thi·∫øt gi·ªØa <code class=\"language-text\">parent</code> v√† <code class=\"language-text\">children</code> component</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">Parent</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showExtraDetails<span class=\"token punctuation\">,</span> setShowExtraDetails<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">[</span><span class=\"token spread operator\">...</span><span class=\"token punctuation\">]</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token maybe-class-name\">Child</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token function\">showData</span><span class=\"token punctuation\">(</span>showExtraDetails<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">[</span><span class=\"token spread operator\">...</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Component <code class=\"language-text\">Child</code> s·∫Ω lu√¥n re-render khi <code class=\"language-text\">Parent</code> render, th·∫≠m ch√≠ <code class=\"language-text\">Child</code> l√† m·ªôt <code class=\"language-text\">PureComponent</code> ho·∫∑c ƒë∆∞·ª£c b·ªçc trong <code class=\"language-text\">React.memo</code></p>\n<p><code class=\"language-text\">useCallback</code> ƒë∆∞·ª£c d√πng nh∆∞ b√™n d∆∞·ªõi</p>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">Parent</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showExtraDetails<span class=\"token punctuation\">,</span> setShowExtraDetails<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> handleClick <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">showData</span><span class=\"token punctuation\">(</span>showExtraDetails<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span>showExtraDetails<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token punctuation\">[</span><span class=\"token spread operator\">...</span><span class=\"token punctuation\">]</span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Child</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span>\n        <span class=\"token punctuation\">[</span><span class=\"token spread operator\">...</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p><a href=\"https://headway.io/blog/react-optimize-components-memo-usememo-usecallback/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://headway.io/blog/react-optimize-components-memo-usememo-usecallback/</a></p>\n","cover_image":""}},{"node":{"id":"539d1f59ba27536395acb80f6af2f914","title":"S·ª≠ d·ª•ng v-model tr√™n component l·ªìng nhau","path":"/2019-12-10-huong-dan-su-dung-v-model-tren-component-long-nhau/","date":"2019-12-10","timeToRead":3,"desc":"C√°ch vi·∫øt d√πng v-model ƒë·ªÉ t·ª± ƒë·ªìng b·ªô gi√° tr·ªã khi l·ªìng c√°c component","content":"<p>B·∫°n c√≥ component nh·∫≠n v√†o <code class=\"language-text\">prop</code>, mu·ªën s·ª≠ d·ª•ng <code class=\"language-text\">v-model</code> ƒë·ªÉ n√≥ t·ª± c·∫≠p nh·∫≠p gi√° tr·ªã khi c√≥ thay ƒë·ªïi</p>\n<pre class=\"language-html\"><code class=\"language-html\">// Address.vue\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>street<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>street<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>city<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>city<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>state<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>state<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>zip<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>zip<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">{</span>\n        props<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'street'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'city'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'state'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'zip'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>B·∫°n truy·ªÅn n√≥ v√†o nh∆∞ th·∫ø n√†y, v·ªõi hy v·ªçng m·ªçi th·ª© ch·∫°y ngon l√†nh</p>\n<pre class=\"language-html\"><code class=\"language-html\">// Form.vue\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mailing-address</span>\n            <span class=\"token attr-name\">:street</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>address.street<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">:city</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>address.city<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">:state</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>address.state<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">:zip</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>address.zip<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword module\">import</span> <span class=\"token maybe-class-name\">MailingAddress</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'./Address.vue'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">{</span>\n        components<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token maybe-class-name\">MailingAddress</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n                address<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                    street<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n                    city<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n                    state<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n                    zip<span class=\"token operator\">:</span> <span class=\"token string\">''</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Nh∆∞ng kh√¥ng üò≠ n√≥ s·∫Ω th√¥ng b√°o trong console</p>\n<blockquote>\n<p>‚ÄúAvoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. ‚Äú</p>\n</blockquote>\n<p>V·ªÅ nguy√™n t·∫Øc, ch√∫ng ta ko ƒë∆∞·ª£c thay ƒë·ªïi gi√° tr·ªã truy·ªÅn v√†o t·ª´ <code class=\"language-text\">prop</code>, n·∫øu kh√¥ng l√∫c re-render n√≥ s·∫Ω ko c√≤n ƒë√∫ng n·ªØa.</p>\n<p><strong><code class=\"language-text\">v-model</code> v·ªÅ b·∫£n ch·∫•t n√≥ l√† g√¨?</strong></p>\n<p><code class=\"language-text\">v-model</code> n√≥ l√†m cho ch√∫ng ta 2 vi·ªác</p>\n<ol>\n<li>bind gi√° tr·ªã v√†o bi·∫øn <code class=\"language-text\">value</code></li>\n<li>bind handle cho s·ª± ki·ªán <code class=\"language-text\">v-on:input</code>.</li>\n</ol>\n<pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// Form.vue</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        &lt;mailing-address\n            :value=\"address\"\n            @input=\"(newAddress) => {address = newAddress}\"\n        />\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    import MailingAddress from './Address.vue';\n    export default {\n        components: { MailingAddress },\n        data() {\n            return {\n                name: '',\n                email: '',\n                address: {\n                    street: '',\n                    city: '',\n                    state: '',\n                    zip: ''\n                }\n            }\n        }\n    }\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>C·∫≠p nh·∫≠p l·∫°i component Address c·ªßa ch√∫ng ta</p>\n<pre class=\"language-html\"><code class=\"language-html\">// Address.vue\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>street<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>value.street<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>city<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>value.city<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>state<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>value.state<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>zip<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>value.zip<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">{</span>\n        props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            value<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                type<span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Object</span><span class=\"token punctuation\">,</span>\n                required<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        watch<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">$emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>N·∫øu n√≥ th√™m m·ªôt c·∫•p n·ªØa th√¨ sao? V√≠ d·ª• b√™n trong <code class=\"language-text\">Address.vue</code> ch√∫ng ta nh√©t th√™m m·ªôt component ch√°u n·ªôi c·ªßa <code class=\"language-text\">Form</code> n·ªØa</p>\n<pre class=\"language-html\"><code class=\"language-html\">// Address.vue\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n        ...\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>state</span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>value.state<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword module\">import</span> <span class=\"token maybe-class-name\">State</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"./State\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">{</span>\n        components<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token maybe-class-name\">State</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            value<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                type<span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Object</span><span class=\"token punctuation\">,</span>\n                required<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        watch<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">value</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">$emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>State component</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>value<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">v-for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>(state, abbreviation) in states<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">:value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>abbreviation<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">v-html</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>state<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/babel<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">{</span>\n        props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            value<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                type<span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">String</span><span class=\"token punctuation\">,</span>\n                required<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n                states<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token constant\">NY</span><span class=\"token operator\">:</span> <span class=\"token string\">'New York'</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token constant\">WI</span><span class=\"token operator\">:</span> <span class=\"token string\">'Wisconsin'</span>\n                    <span class=\"token comment\">// + rest of the states</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>N√≥ s·∫Ω ti·∫øp t·ª•c ch·ª≠i b·ªõi ch√∫ng ta, v√¨ ch√∫ng ta ƒëi thay ƒë·ªïi prop n·ªØa r·ªìi, ch√∫ng ta c·∫ßn ƒë∆∞a n√≥ v·ªÅ <code class=\"language-text\">computed</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// State.vue</span>\n<span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>select v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"localState\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>option v<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"(state, abbreviation) in states\"</span>\n                <span class=\"token operator\">:</span>value<span class=\"token operator\">=</span><span class=\"token string\">\"abbreviation\"</span>\n                v<span class=\"token operator\">-</span>html<span class=\"token operator\">=</span><span class=\"token string\">\"state\"</span>\n        <span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>option<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>select<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>script type<span class=\"token operator\">=</span><span class=\"token string\">\"text/babel\"</span><span class=\"token operator\">></span>\n    <span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">{</span>\n        props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            value<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                type<span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">String</span><span class=\"token punctuation\">,</span>\n                required<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n                states<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token constant\">NY</span><span class=\"token operator\">:</span> <span class=\"token string\">'New York'</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token constant\">WI</span><span class=\"token operator\">:</span> <span class=\"token string\">'Wisconsin'</span>\n                    <span class=\"token comment\">// + rest of the states</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        computed<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            localState<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">value</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token function\">set</span><span class=\"token punctuation\">(</span>localState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">$emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span> localState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre>\n<p>C√°ch n√†y gi·ªëng nh∆∞ ch√∫ng ta d√πng controlled component trong React</p>\n<ul>\n<li>üìú <a href=\"https://zaengle.com/blog/using-v-model-on-nested-vue-components\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Using v-model on Nested Vue Components</a></li>\n</ul>\n","cover_image":""}},{"node":{"id":"70a3abdc0877fa63af8c4b82e829239c","title":"Thi·∫øt ƒë·∫∑t ESLint cho d·ª± √°n React","path":"/2019-11-23-thiet-dat-eslint/","date":"2019-11-23","timeToRead":2,"desc":"C√°c thi·∫øt ƒë·∫∑t v√† c√¥ng c·ª• c·∫ßn thi·∫øt ƒë·ªÉ eslint ho·∫°t ƒë·ªông t·ªët trong d·ª± √°n React","content":"<p>ESLint c√≥ th·ªÉ c√†i global, nh∆∞ng m√¨nh th·∫•y n√™n c√†i tr√™n t·ª´ng project s·∫Ω ti·ªán h∆°n khi ph·∫£i mang ƒëi mang l·∫°i. ƒê√¢y l√† nh·ªØng package c·∫ßn thi·∫øt cho eslint ch·∫°y tr√™n project React</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save-dev\neslint\nbabel-eslint\neslint-config-airbnb\neslint-config-babel\neslint-config-prettier\neslint-plugin-import\neslint-plugin-react</code></pre>\n<p>B√™n trong th∆∞ m·ª•c g·ªëc c·ªßa project, t·∫°o m·ªôt file <code class=\"language-text\">.eslintrc</code>, v·ªõi n·ªôi dung ng·∫Øn g·ªçn th·∫ø n√†y (mu·ªën th√™m b·ªõt nh∆∞ th·∫ø n√†y th√¨ m·ªçi ng∆∞·ªùi t·ª± t√πy ch·ªânh theo √Ω th√≠ch)</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"airbnb\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"plugin:prettier/recommended\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"plugin:jsx-a11y/recommended\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"plugins\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"prettier\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"jsx-a11y\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"parser\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"babel-eslint\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"env\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"browser\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>M·∫•y b·ªô config s·∫µn c·ªßa <strong>airbnb</strong>, <strong>prettier</strong> v√† <strong>jsx-a11y</strong> n·∫øu kh√¥ng ƒë·ªß d√πng, b·∫°n c√≥ th·ªÉ t·ª± th√™m m·∫Øm mu·ªëi v√†o trong file n√†y lu√¥n.</p>\n<p>Thay v√¨ m·ªói l·∫ßn ph·∫£i ch·∫°y lint th·ªß c√¥ng tr√™n t·ª´ng file/th∆∞ m·ª•c</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">npx eslint src/App.js</code></pre>\n<p><img src=\"https://miro.medium.com/max/1480/1*_P4YPpbVg4L-Utu7egF-vg.png\"></p>\n<p>Ch√∫ng ta c√≥ th·ªÉ th√™m m·ªôt ƒëo·∫°n shortcut v√†o trong <code class=\"language-text\">package.json</code></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"lint\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eslint .\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"lint:fix\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"eslint --fix .\"</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Sau n√†y ch√∫ng ta c√≥ th·ªÉ ch·∫°y</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">// ch·∫°y ki·ªÉm tra\n<span class=\"token function\">npm</span> run lint\n\n// ch·∫°y s·ª≠a l·ªói\n<span class=\"token function\">npm</span> run lint:fix</code></pre>\n<p>ƒê·ª£i n√≥ ch·∫°y m·ªõi b√°o l·ªói c≈©ng ƒë∆∞·ª£c, n·∫øu ƒëang x√†i VSCode, c√†i package <a href=\"https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint#overview\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">vscode-eslint</a> n√†y v√†o, n√≥ s·∫Ω highlight nh·ªØng l·ªói eslint ngay tr√™n giao di·ªán kh√¥ng c·∫ßn ph·∫£i ƒë·ª£i ch·∫°y m·ªõi b√°o</p>\n<p><img src=\"https://miro.medium.com/max/2880/1*O6Q5VDIKC4UM_sfJOlE82w.png\" alt=\"Ch∆∞a c√†i ESLint\"></p>\n<p><img src=\"https://miro.medium.com/max/2880/1*n20krHQQGci7D347-4HELQ.png\" alt=\"ƒê√£ c√†i ESlint\"></p>\n<p>ƒê·ªÉ h·ªó tr·ª£ team t·ªëi ƒëa, b·∫°n c√≥ th·ªÉ <em>export</em> nh·ªØng thi·∫øt ƒë·∫∑t c·ªßa VSCode v√†o 1 file trong th∆∞ m·ª•c <code class=\"language-text\">.vscode</code>, khi team nh·∫≠n ƒë∆∞·ª£c th∆∞ m·ª•c project ƒë·ªìng th·ªùi c≈©ng c√≥ lu√¥n c√°c plugin v√† thi·∫øt ƒë·∫∑t c·∫ßn thi·∫øt</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// file extensions.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"recommendations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"dbaeumer.vscode-eslint\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"esbenp.prettier-vscode\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"dzannotti.vscode-babel-coloring\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// File settings.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"eslint.validate\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"javascript\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"javascriptreact\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token property\">\"language\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"typescript\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"autoFix\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token property\">\"language\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"typescriptreact\"</span><span class=\"token punctuation\">,</span> <span class=\"token property\">\"autoFix\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"eslintConfig\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"react-app\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"shared-config\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"rules\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"additional-rule\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"warn\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"overrides\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"files\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"**/*.ts?(x)\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"rules\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"additional-typescript-only-rule\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"warn\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Ch√∫ng ta c≈©ng n√™n d√πng Prettier ƒë·ªÉ format code l·∫°i tr∆∞·ªõc khi commit l√™n git. C√†i ƒë·∫∑t c√°c package c·∫ßn thi·∫øt cho nhu c·∫ßu n√†y</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save\nhusky\nlint-staged\nprettier</code></pre>\n<ul>\n<li><code class=\"language-text\">husky</code> s·∫Ω gi√∫p ch√∫ng ta t∆∞∆°ng t√°c v·ªõi git hook</li>\n<li><code class=\"language-text\">lint-stated</code> cho ph√©p ch√∫ng ta ch·∫°y script tr√™n c√°c file ƒëang n·∫±m trong staged</li>\n<li><code class=\"language-text\">prettier</code> l√† c√¥ng c·ª• ƒë·ªÉ format code</li>\n</ul>\n<p>Ti·∫øp theo, m·ªü file <code class=\"language-text\">package.json</code></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"husky\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"hooks\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"pre-commit\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"lint-staged\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>B√™n d∆∞·ªõi ch·ªó dependencies c·ªßa file package.json</p>\n<pre class=\"language-diff\"><code class=\"language-diff\">\"dependencies\": {\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span><span class=\"token line\">   // ...\n</span><span class=\"token prefix unchanged\"> </span><span class=\"token line\"> },\n</span></span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span><span class=\"token line\"> \"lint-staged\": {\n</span><span class=\"token prefix inserted\">+</span><span class=\"token line\">   \"src/**/*.{js,jsx,ts,tsx,json,css,scss,md}\": [\n</span><span class=\"token prefix inserted\">+</span><span class=\"token line\">     \"prettier --write\",\n</span><span class=\"token prefix inserted\">+</span><span class=\"token line\">     \"git add\"\n</span><span class=\"token prefix inserted\">+</span><span class=\"token line\">   ]\n</span><span class=\"token prefix inserted\">+</span><span class=\"token line\"> },\n</span></span><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span><span class=\"token line\"> \"scripts\": {</span></span></code></pre>\n<p>H·∫øt ! üòâ</p>\n","cover_image":""}},{"node":{"id":"fc1ff3b7528e0a068b87722fc19b5e40","title":"G·∫Øn video l√†m background to√†n m√†n h√¨nh","path":"/2019-11-12-lam-video-fullscreen-voi-react/","date":"2019-11-12","timeToRead":3,"desc":"Chia s·∫Ω k·ªπ thu·∫≠t l√†m background video ƒë·ªÉ ch·∫°y full m√†n h√¨nh","content":"<p>K·∫øt qu·∫£ c√°c b·∫°n c√≥ th·ªÉ xem tr√™n trang m√¨nh m·ªõi l√†m\n<a href=\"http://chat-production.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://chat-production.com/</a></p>\n<p>ƒê·ªÉ c√≥ m·ªôt c√°i video ch·∫°y to√†n m√†n h√¨nh, ch√∫ng ta s·∫Ω nghƒ© ngay ƒë·∫øn vi·ªác d√πng th·∫ª <code class=\"language-text\">&lt;video /&gt;</code> c·ªßa HTML5, ƒë·∫∑t n√≥ trong m·ªôt c√°i <code class=\"language-text\">&lt;div/&gt;</code> c√≥ k√≠ch th∆∞·ªõc <code class=\"language-text\">width: 100%</code>, bu·ªìn thay n√≥ kh√¥ng ƒë√∫ng nh∆∞ ch√∫ng ta mong ƒë·ª£i.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- HTML --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>videoContainer<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span> <span class=\"token attr-name\">loop</span> <span class=\"token attr-name\">autoplay</span> <span class=\"token attr-name\">muted</span> <span class=\"token attr-name\">playsinline</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/show-reel.mp4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video/mp4<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<blockquote>\n<p>Th√™m <code class=\"language-text\">playsinline</code> ƒë·ªÉ c√≥ th·ªÉ ch·∫°y tr√™n IOS nh∆∞ iPhone</p>\n</blockquote>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token id\">#container</span></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> <span class=\"token number\">60</span><span class=\"token unit\">vw</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n \n<span class=\"token selector\">video</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token unit\">%</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token unit\">%</span><span class=\"token punctuation\">;</span>   \n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Th·ª© nh·∫•t l√† n√≥ s·∫Ω kh√¥ng t·ª± scale ra 100% c·ªßa m√†n h√¨nh, th·ª© 2 khi ch√∫ng ta k√©o to thu nh·ªè c·ª≠a s·ªï tr√¨nh duy·ªát, t·ª∑ l·ªá khung h√¨nh (ngang v√† ƒë·ª©ng) c≈©ng s·∫Ω kh√¥ng ƒë·∫°t ƒë√∫ng t·ªâ l·ªá th·∫≠t c·ªßa video.</p>\n<p>ƒê·ªÉ video c√≥ th·ªÉ thay ƒë·ªïi k√≠ch th∆∞·ªõc theo t·ª´ng gi√° tr·ªã m√†n h√¨nh kh√°c nhau, ch√∫ng ta ph·∫£i d√πng ƒë·∫øn javascript v√† css</p>\n<pre class=\"language-scss\"><code class=\"language-scss\"><span class=\"token selector\">#videoContainer </span><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token unit\">vh</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n  <span class=\"token atrule\"><span class=\"token rule\">@media</span> <span class=\"token punctuation\">(</span><span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> <span class=\"token number\">780</span><span class=\"token unit\">px</span><span class=\"token punctuation\">)</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> <span class=\"token number\">60</span><span class=\"token unit\">vw</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">video </span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token unit\">vw</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">/* canh video ngay gi·ªØa */</span>\n    <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> <span class=\"token number\">50</span><span class=\"token unit\">%</span><span class=\"token punctuation\">;</span> <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> <span class=\"token number\">50</span><span class=\"token unit\">%</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token number\">-50</span><span class=\"token unit\">%</span><span class=\"token punctuation\">,</span> <span class=\"token number\">-50</span><span class=\"token unit\">%</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Source n√†y ƒë∆∞·ª£c l·∫•y t·ª´ <a href=\"https://codetheory.in/html5-fullscreen-background-video/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://codetheory.in/html5-fullscreen-background-video/</a>, m√¨nh s·ª≠ d·ª•ng chung v·ªõi React</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// JS</span>\n  <span class=\"token keyword\">var</span> video <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"video\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    container <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#videoContainer\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">setVideoDimensions</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> w <span class=\"token operator\">=</span> video<span class=\"token punctuation\">.</span><span class=\"token property-access\">videoWidth</span><span class=\"token punctuation\">,</span>\n      h <span class=\"token operator\">=</span> video<span class=\"token punctuation\">.</span><span class=\"token property-access\">videoHeight</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Intrinsic Ratio</span>\n    <span class=\"token comment\">// Will be more than 1 if W > H and less if W &lt; H</span>\n    <span class=\"token keyword\">var</span> videoRatio <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>w <span class=\"token operator\">/</span> h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Get the container's computed styles</span>\n    <span class=\"token comment\">//</span>\n    <span class=\"token comment\">// Also calculate the min dimensions required (this will be</span>\n    <span class=\"token comment\">// the container dimensions)</span>\n    <span class=\"token keyword\">var</span> containerStyles <span class=\"token operator\">=</span> <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getComputedStyle</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      minW <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>containerStyles<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getPropertyValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"width\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      minH <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>containerStyles<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getPropertyValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"height\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// What's the min:intrinsic dimensions</span>\n    <span class=\"token comment\">//</span>\n    <span class=\"token comment\">// The idea is to get which of the container dimension</span>\n    <span class=\"token comment\">// has a higher value when compared with the equivalents</span>\n    <span class=\"token comment\">// of the video. Imagine a 1200x700 container and</span>\n    <span class=\"token comment\">// 1000x500 video. Then in order to find the right balance</span>\n    <span class=\"token comment\">// and do minimum scaling, we have to find the dimension</span>\n    <span class=\"token comment\">// with higher ratio.</span>\n    <span class=\"token comment\">//</span>\n    <span class=\"token comment\">// Ex: 1200/1000 = 1.2 and 700/500 = 1.4 - So it is best to</span>\n    <span class=\"token comment\">// scale 500 to 700 and then calculate what should be the</span>\n    <span class=\"token comment\">// right width. If we scale 1000 to 1200 then the height</span>\n    <span class=\"token comment\">// will become 600 proportionately.</span>\n    <span class=\"token keyword\">var</span> widthRatio <span class=\"token operator\">=</span> minW <span class=\"token operator\">/</span> w<span class=\"token punctuation\">,</span>\n      heightRatio <span class=\"token operator\">=</span> minH <span class=\"token operator\">/</span> h<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Whichever ratio is more, the scaling</span>\n    <span class=\"token comment\">// has to be done over that dimension</span>\n    <span class=\"token keyword\">let</span> newWidth <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> newHeight <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>widthRatio <span class=\"token operator\">></span> heightRatio<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      newWidth <span class=\"token operator\">=</span> minW<span class=\"token punctuation\">;</span>\n      newHeight <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">ceil</span><span class=\"token punctuation\">(</span>newWidth <span class=\"token operator\">/</span> videoRatio<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      newHeight <span class=\"token operator\">=</span> minH<span class=\"token punctuation\">;</span>\n      newWidth <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">ceil</span><span class=\"token punctuation\">(</span>newHeight <span class=\"token operator\">*</span> videoRatio<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    video<span class=\"token punctuation\">.</span><span class=\"token property-access\">style</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">width</span> <span class=\"token operator\">=</span> newWidth <span class=\"token operator\">+</span> <span class=\"token string\">\"px\"</span><span class=\"token punctuation\">;</span>\n    video<span class=\"token punctuation\">.</span><span class=\"token property-access\">style</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">height</span> <span class=\"token operator\">=</span> newHeight <span class=\"token operator\">+</span> <span class=\"token string\">\"px\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  video<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"loadedmetadata\"</span><span class=\"token punctuation\">,</span> setVideoDimensions<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"resize\"</span><span class=\"token punctuation\">,</span> setVideoDimensions<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>ƒêo·∫°n js tr√™n ƒë·ªÉ ƒë·∫£m b·∫£o k√≠ch th∆∞·ªõc c·ªßa video ƒë∆∞·ª£c scale ra h·∫øt khung h√¨nh v√† thay ƒë·ªïi cho ph√π h·ª£p khi tr√¨nh duy·ªát thay ƒë·ªïi k√≠ch th∆∞·ªõc</p>\n<blockquote>\n<p>D√πng 2 listener <code class=\"language-text\">loadedmetadata</code> tr√™n video v√† <code class=\"language-text\">resize</code> tr√™n window ƒë·ªÉ ch·ªânh l·∫°i k√≠ch th∆∞·ªõc th·∫ª video</p>\n</blockquote>\n","cover_image":""}},{"node":{"id":"ef4ae25807a906e17424d11a48e6b66d","title":"T√πy bi·∫øn code theo t·ªëc ƒë·ªô m·∫°ng","path":"/2019-08-23-tuy-bien-code-theo-toc-do-mang/","date":"2019-08-23","timeToRead":2,"desc":"Responsive v·ªõi CSS ch√∫ng ta t√πy bi·∫øn code b·∫±ng @media, v·∫≠y v·ªõi JS, ta th√™m c√°c ƒëi·ªÅu ki·ªán theo t·ªëc ƒë·ªô m·∫°ng b·∫±ng c√°ch n√†o?","content":"<p>Responsive v·ªõi CSS ch√∫ng ta t√πy bi·∫øn code b·∫±ng @media, v·∫≠y v·ªõi JS, ta th√™m c√°c ƒëi·ªÅu ki·ªán theo t·ªëc ƒë·ªô m·∫°ng b·∫±ng c√°ch n√†o?</p>\n<p>Ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng API c·ªßa tr√¨nh duy·ªát <code class=\"language-text\">navigator.connection.effectiveType</code> ƒë·ªÉ t·ªëi ∆∞u theo t·ªëc ƒë·ªô k·∫øt n·ªëi m·∫°ng c·ªßa user</p>\n<p>C√°c th√¥ng tin v·ªÅ m·∫°ng c·ªßa user c√≥ th·ªÉ l·∫•y qua <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Navigator/connection\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">navigator.connection</a>, trong ƒë√≥ c√≥ gi√° tr·ªã <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/NetworkInformation/effectiveType\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">effectiveType</a> l√† m·ªôt trong c√°c gi√° tr·ªã 'slow-2g', '2g', '3g', '4g'</p>\n<p>Chrome 62 tr·ªü v·ªÅ tr∆∞·ªõc, ch√∫ng ta ch·ªâ c√≥ gi√° tr·ªã <code class=\"language-text\">navigator.connection.type</code>, gi√° tr·ªã n√†y kh√¥ng ph·∫£i t·ªëc ƒë·ªô m·∫°ng. M·∫∑c d√π <code class=\"language-text\">type</code> l√† wifi, nh∆∞ng l·∫°i l√† m·ªôt wifi c√πi m√≠a, t·ªëc ƒë·ªô ngang ng·ª≠a 2g, Chrome sau n√†y c√≥ <em>ph√°t minh</em> th√™m gi√° tr·ªã <code class=\"language-text\">effectiveType</code>, t√≠nh theo t·ªëc ƒë·ªô ƒëi-v·ªÅ c·ªßa c·ª•c d·ªØ li·ªáu cho ch√≠nh x√°c.</p>\n<p><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--T54UF-7H--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/wqeuhx12frs3k126bmrv.png\" alt=\"ƒê√°p ·ª©ng theo t·ªëc ƒë·ªô m·∫°ng\"></p>\n<p>C√≤n tr∆∞·ªùng h·ª£p, trong nh√† c√≥ thanh ni√™n n√†o ƒë√≥ m·ªü link down film Nh·∫≠t, t·ªëc ƒë·ªô m·∫°ng ƒëang \"nh∆∞ tia ch·ªõp\", th√¨ chuy·ªÉn sang \"c√πi m√≠a\", bi·∫øt ƒë∆∞·ª£c s·ª± thay ƒë·ªïi n√†y c·∫ßn add th√™m c√°i listener cho ƒë·ªëi t∆∞·ª£ng <code class=\"language-text\">navigator.connection</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">onConnectionChange</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n        rtt<span class=\"token punctuation\">,</span>\n        downlink<span class=\"token punctuation\">,</span>\n        effectiveType<span class=\"token punctuation\">,</span>\n        saveData\n    <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token dom variable\">navigator</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">connection</span>\n\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Effective network connection type: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>effectiveType<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Downlink Speed/bandwidth estimate: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>downlink<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">Mb/s</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Round-trip time estimate: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>rtt<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">ms</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Data-saver mode on/requested: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>saveData<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token dom variable\">navigator</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">connection</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'change'</span><span class=\"token punctuation\">,</span> onConnectionChange<span class=\"token punctuation\">)</span></code></pre>\n<p>D√πng Chrome DevTools ƒë·ªÉ gi·∫£ l·∫≠p c√°c t·ªëc ƒë·ªô m·∫°ng kh√°c nhau ƒë·ªÉ test, ch·ª© ƒë·ª´ng down film ƒë·ªÉ test t·ªëc ƒë·ªô</p>\n<p><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--gdIz0VyD--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/t9zadl65erjhll14zbcp.png\" alt=\"ƒê√°p ·ª©ng theo t·ªëc ƒë·ªô m·∫°ng\"></p>\n<p>M·∫•y tr√¨nh duy·ªát x·ªãn x·ªãn nh∆∞ Chrome, Opera, Firefox l√† d√πng ƒë∆∞·ª£c <code class=\"language-text\">navigator.connection</code> ch·ª© kh√¥ng ri√™ng g√¨ Chrome</p>\n<p>D√πng m·ªôt regex ƒë·ªÉ gom m·∫•y k·∫øt qu·∫£ <em>g·ªù g·ªù</em> l√† m·∫°ng ch·∫≠m h·∫øt, 3g Vi·ªát Nam th√¨ c≈©ng nh∆∞ 2g th√¥i</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token language-regex\"><span class=\"token charclass class-name\">\\s</span>low-2g<span class=\"token alternation keyword\">|</span>2g<span class=\"token alternation keyword\">|</span>3g</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">test</span><span class=\"token punctuation\">(</span><span class=\"token dom variable\">navigator</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">connection</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">effectiveType</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">connection</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"slow\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">connection</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"fast\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>M√¨nh s·ª≠ d·ª•ng Vue.js, kh√¥ng ph·∫£i HTML thu·∫ßn n√™n ƒë·ª´ng th·∫Øc m·∫Øc sao c√≥ c√°i <code class=\"language-text\">v-if</code> nh√©</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>home<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">v-if</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>connection === <span class=\"token punctuation\">'</span>fast<span class=\"token punctuation\">'</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token comment\">&lt;!-- 1.3MB video --></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theatre<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">autoplay</span> <span class=\"token attr-name\">muted</span> <span class=\"token attr-name\">playsinline</span> <span class=\"token attr-name\">control</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/static/img/doodle-theatre.webm<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video/webm<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/static/img/doodle-theatre.mp4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video/mp4<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- 28KB image --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">v-if</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>connection === <span class=\"token punctuation\">'</span>slow<span class=\"token punctuation\">'</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theatre<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/static/img/doodle-theatre-poster.jpg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></code></pre>\n<p><img src=\"https://res.cloudinary.com/practicaldev/image/fetch/s--_tvmKtK---/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://thepracticaldev.s3.amazonaws.com/i/8jukzhdu62nbghw0cfx3.png\" alt=\"ƒê√°p ·ª©ng theo t·ªëc ƒë·ªô m·∫°ng\"></p>\n<p>N·∫øu b·∫°n vi·∫øt React, c√≥ <a href=\"https://mxb.dev/blog/connection-aware-components/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">b√†i n√†y c≈©ng hay</a>, n√≥i v·ªÅ vi·ªác l√†m component ƒë√°p ·ª©ng theo t·ªëc ƒë·ªô k·∫øt n·ªëi</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://dev.to/addyosmani/adaptive-serving-using-javascript-and-the-network-information-api-331p\">üìú Adaptive Serving using JavaScript and the Network Information API</a></p>\n","cover_image":""}},{"node":{"id":"5e248b4a520eaec55f161a88ec17d512","title":"6 v√≠ d·ª• ƒë·ªÉ b·∫°n y√™u lu√¥n observable","path":"/2019-07-09-6-vi-du-giup-ban-yeu-luon-rxjs-observable/","date":"2019-07-09","timeToRead":6,"desc":"Th√™m nh·ªØng l√Ω do ƒë·ªÉ d·ª• d·ªó b·∫°n x√†i Observable","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#Handle-c%C3%A1c-event-b%E1%BA%B1ng-Observable\">Handle c√°c event b·∫±ng Observable</a></li>\n<li><a href=\"#Operator-operator\">Operator, operator</a></li>\n<li><a href=\"#Ai-c%C3%B3-th%E1%BB%83-l%C3%A0-Observable\">Ai c√≥ th·ªÉ l√† Observable</a></li>\n<li><a href=\"#Observable-cho-c%C3%A1c-HTTP-request\">Observable cho c√°c HTTP request</a></li>\n<li><a href=\"#K%E1%BA%BFt-h%E1%BB%A3p-c%C3%A1c-Observable\">K·∫øt h·ª£p c√°c Observable</a></li>\n<li><a href=\"#K%E1%BA%BFt\">K·∫øt</a></li>\n</ul>\n<!-- /TOC -->\n<p><strong>Observable</strong> m√¨nh d·ªãch ra ti·∫øng vi·ªát th·∫ø n√†y cho b·∫°n d·ªÖ h√¨nh dung. M·ªôt khi b·∫°n b·∫≠t ch·∫ø ƒë·ªô <code class=\"language-text\">observable</code> v·ªõi m·ªôt ƒë·ª©a con g√°i n√†o ƒë√≥, l√† b·∫°n ƒëang trong giai ƒëo·∫°n b·ªã n√≥ √°m ·∫£nh, nh·∫•t c·ª≠ nh·∫•t ƒë·ªông c·ªßa n√≥ b·∫°n ƒëi·ªÅu ƒë·ªÉ √Ω, n√≥ h·∫Øc x√¨ b·∫°n c≈©ng bi·∫øt, m·ªôt tu·∫ßn n√≥ m·∫∑c m·∫•y b·ªô ƒë·ªì b·∫°n c≈©ng bi·∫øt. Ch·ªâ c·∫ßn nghe ti·∫øng b∆∞·ªõc ch√¢n l√† b·∫°n bi·∫øt ƒë∆∞·ª£c h√¥m nay n√≥ mang ƒë√¥i d√©p g√¨ (m·ª©c ƒë·ªô n√†y h∆°i kinh kh·ªßng l·∫Øm r·ªìi) l√† b·∫°n c√≥ nh·ªØng ph·∫£n x·∫° v√¥ ƒëi·ªÅu ki·ªán b·ªôc ph√°t n∆°i c·ª≠a mi·ªáng \"Chi·ªÅu nay tr·ªùi m∆∞a nhe em, mang d√©p l√†o ƒëi cho chu·∫©n\". Ph·∫£n x·∫° n√†y l√† g·ªçi l√† <strong>subscription</strong></p>\n<p>R·ªìi quay l·∫°i v·ªõi v·∫•n ƒë·ªÅ k·ªπ thu·∫≠t, b√†i n√†y kh√¥ng gi·∫£i th√≠ch r√µ Observable pattern, c√°c kh√°i ni·ªám ch√≠nh c·ªßa n√≥, n·∫øu mu·ªën b·∫°n ƒë·ªçc l·∫°i b√†i n√†y tr∆∞·ªõc ƒë√¢y <a href=\"https://luubinhan.github.io/blog/2018-10-30-gioi-thieu-reactive-programing-trong-javascript\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">c√≥ vi·∫øt r·ªìi</a>, nh∆∞ c√°i t·ª±a b√†i vi·∫øt n√≥ spoil h·∫øt c√°i n·ªôi dung r·ªìi \"V√≠ d·ª• ƒë·ªÉ th·∫•y t·∫°i sao ch√∫ng ta n√™n <em>b·∫≠t ch·∫ø ƒë·ªô</em> Observable v·ªõi m·ªôt em g√°i n√†o ƒë√≥\"</p>\n<p>Th·∫ßn ch√∫ m√¨nh mu·ªën b·∫°n thu·ªôc l·∫ßu</p>\n<blockquote>\n<p>L·∫≠p tr√¨nh Reactive l√† l√†m vi·ªác v·ªõi lu·ªìng d·ªØ li·ªáu b·∫•t ƒë·ªìng b·ªô</p>\n</blockquote>\n<p>L·∫°i ph·∫£i gi·∫£i th√≠ch c√¢u n√†y ch√∫t, <strong>N·∫øu nh·ªØng g√¨ di·ªÖn ra tr√™n ·ª©ng d·ª•ng ƒëang x·∫£y ra m·ªôt c√°ch b·∫•t ƒë·ªìng b·ªô, kh·∫£ nƒÉng r·∫•t cao l√† Observable s·∫Ω gi√∫p √≠ch cho cu·ªôc s·ªëng c·ªßa anh em ch√∫ng ta b·ªõt kh·ªï h∆°n</strong>.</p>\n<p>C√≥ nhi·ªÅu c√°ch l√†m v√† th∆∞ vi·ªán handle v·ª• lu·ªìng d·ªØ li·ªáu b·∫•t ƒë·ªìng b·ªô n√†y, tuy nhi√™n, Observable c√≥ g√¨ m√† cool, s·∫Øp ƒë∆∞·ª£c chu·∫©n h√≥a v√† ƒë∆∞a v√†o ECMAScript. Th∆∞ vi·ªán RxJS ƒëang ƒë∆∞·ª£c s·ª≠ d·ª•ng r·ªông r√£i v√† qu√° ngon r·ªìi.</p>\n<p>R·ªìi v√¥ lu√¥n v√≠ d·ª• nhe</p>\n<h2 id=\"handle-c√°c-event-b·∫±ng-observable\"><a href=\"#handle-c%C3%A1c-event-b%E1%BA%B1ng-observable\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Handle c√°c event b·∫±ng Observable</h2>\n<p>Ch√∫ng ta c√≥ 1 button, khi button n√†y click t·∫°o ra m·ªôt chu·ªói ng·∫´u nhi√™n. Vi·∫øt b·∫±ng c·∫£ 2 c√°ch javascript thu·∫ßn, v√† s·ª≠ d·ª•ng RxJS</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> output <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'output'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbutton<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">e</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    output<span class=\"token punctuation\">.</span><span class=\"token property-access\">textContent</span> <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toString</span><span class=\"token punctuation\">(</span><span class=\"token number\">36</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<p>B·∫±ng RxJS n√®</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> output <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'output'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        output<span class=\"token punctuation\">.</span><span class=\"token property-access\">textContent</span> <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toString</span><span class=\"token punctuation\">(</span><span class=\"token number\">36</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<p>N√≥ d√†i h∆°n khi vi·∫øt javascript thu·∫ßn m√† man üòÇ. Chi m√† ph·ª©c t·∫°p v·∫≠y? ƒê√∫ng lu√¥n, nh∆∞ng gi·ªù th√™m y√™u c·∫ßu n√†y v√†o th√¨ sao: <em>·ªû m·ªói l·∫ßn click ƒë·∫øn b·ªôi s·ªë c·ªßa 3 ( 3,6,9,12,...) th√¨ m·ªõi random m·ªôt string m·ªõi</em></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">bufferCount</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// m·ªôt d√≤ng duy nh·∫•t</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        output<span class=\"token punctuation\">.</span><span class=\"token property-access\">textContent</span> <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toString</span><span class=\"token punctuation\">(</span><span class=\"token number\">36</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<p>V·∫≠y b·∫°n vi·∫øt JS th√¥i th√¨ sao, kh·ªèi n√≥i c≈©ng bi·∫øt n√≥ s·∫Ω d√†i d√≤ng h∆°n.</p>\n<h2 id=\"operator-operator\"><a href=\"#operator-operator\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Operator, operator</h2>\n<p>Trong v√≠ d·ª• tr√™n, <code class=\"language-text\">.bufferCount</code> *ƒë√£ cho th·∫•y s·ª©c m·∫°nh v∆∞·ª£t tr·ªôi<strong> so v·ªõi c√°ch th√¥ng th∆∞·ªùng. C√≥ th·ªÉ n√≥i th·∫ø n√†y, </strong>ch√∫ng ta x√†i Observable n√†y l√† v√¨ nh·ªØng g√¨ ch√∫ng ta l√†m ƒë∆∞·ª£c b·∫±ng operator**. Trong th∆∞ vi·ªán RxJS n√≥ c·∫£ t√° Operator tha h·ªì m√† ch∆°i.</p>\n<p>M·ªôt v√≠ d·ª• kh√°c, c≈©ng l√† v·ª• random string ·ªü tr√™n, m√† gi·ªù ch·ªâ mu·ªën random <strong>khi n√≥ l√† m·ªôt c√∫ triple click</strong> (m·ªôt ph√°t 3 nh√°y, kh√¥ng ph·∫£i double click nhoa)</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> click$ <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nclick$<span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">bufferWhen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        click$<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// kkho·∫£ng th·ªùi gian c·ªßa m·ªôt c√∫ 3 click</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">events</span> <span class=\"token arrow operator\">=></span> events<span class=\"token punctuation\">.</span><span class=\"token property-access\">length</span> <span class=\"token operator\">>=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        output<span class=\"token punctuation\">.</span><span class=\"token property-access\">textContent</span> <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toString</span><span class=\"token punctuation\">(</span><span class=\"token number\">36</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<p>D·ªäch ra ng√¥n ng·ªØ con ng∆∞·ªùi n√≥ s·∫Ω nh∆∞ th·∫ø n√†y, <strong>trong kho·∫£ng th·ªùi gian l√† 400ms, trong ƒë√°m event ƒë∆∞·ª£c emit (t·ª•i n√†y ƒë∆∞·ª£c ƒë∆∞a v√†o m·∫£ng <code class=\"language-text\">events</code>), n·∫øu m·∫£ng n√†y l·ªõn h∆°n ho·∫∑c b·∫±ng 3, th·ª±c hi·ªán ƒë·ªëng vi·ªác ƒë√£ ƒëƒÉng k√Ω b√™n d∆∞·ªõi <code class=\"language-text\">subscribe</code></strong></p>\n<p>B·∫°n ƒë√£ b·∫Øt ƒë·∫ßu y√™u Observable ch∆∞a? M√¨nh ƒë√£ kho√°i kho√°i r·ªìi ƒë√≥.</p>\n<h2 id=\"ai-c√≥-th·ªÉ-l√†--observable\"><a href=\"#ai-c%C3%B3-th%E1%BB%83-l%C3%A0--observable\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ai c√≥ th·ªÉ l√†  Observable</h2>\n<p>ƒê∆°n gi·∫£n, b·∫•t k·ªÉ gi√† tr·∫ª l·ªõn b√©, trai g√°i, n·∫øu RxJS c√≥ h√†m ( khi n√£y l√† <code class=\"language-text\">.fromEvent</code>) th√¨ ch√∫ng ta c√≥ th·ªÉ bi·∫øn n√≥ th√†nh ƒë·ªëi t∆∞·ª£ng b·ªã theo d√µi li√™n t·ª•c.</p>\n<h2 id=\"observable-cho-c√°c-http-request\"><a href=\"#observable-cho-c%C3%A1c-http-request\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Observable cho c√°c HTTP request</h2>\n<p>M·ªôt s·ª©c m·∫°nh <em>si√™u nhi√™n</em> kh√°c c·ªßa RxJS: x·ª≠ l√Ω m·∫•y em HTTP request r·∫•t m∆∞·ª£t m√†</p>\n<p>V√≠ d·ª•, fetching m·ªôt danh s√°ch album v√† render.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> albumsApiUrl <span class=\"token operator\">=</span> <span class=\"token string\">'https://jsonplaceholder.typicode.com/albums'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">ajax</span><span class=\"token punctuation\">(</span>albumsApiUrl<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span>\n        <span class=\"token parameter\">res</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token parameter\">err</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span></code></pre>\n<p>Tr·ªôn chung v·ªõi v√≠ d·ª• ·ªü tr√™n, ch√∫ng ta l√†m c√°i t√≠nh nƒÉng awsome sau, click  l√† c√≥ danh s√°ch album ng·∫´u nhi√™n</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">flatMap</span><span class=\"token punctuation\">(</span>getAlbums<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span>\n        render<span class=\"token punctuation\">,</span>\n        <span class=\"token parameter\">err</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getAlbums</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> userId <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">round</span><span class=\"token punctuation\">(</span><span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">ajax</span><span class=\"token punctuation\">(</span>\n        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://jsonplaceholder.typicode.com/albums?userId=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>userId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n        <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<iframe height=\"265\" style=\"width: 100%;\" scrolling=\"no\" title=\"Observables 4\" src=\"//codepen.io/mmiszy/embed/WZOJjy/?height=265&theme-id=0&default-tab=js,result\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\">\n  See the Pen <a href='https://codepen.io/mmiszy/pen/WZOJjy/'>Observables 4</a> by Micha≈Ç Miszczyszyn\n  (<a href='https://codepen.io/mmiszy'>@mmiszy</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n<p>V√≠ d·ª• tr√™n c√≥ s·ª≠ d·ª•ng operator <code class=\"language-text\">flatMap</code>, 1 trong nh·ªØng operator si√™u kinh ƒëi·ªÉn c·ªßa RxJS, cho ph√©p merge 2 m·∫£ng ki·ªÉu Observable th√†nh 1</p>\n<p>N·∫øu ch√∫ng ta click li√™n t·ª•c trong th·ªùi gian ng·∫Øn, l√† c√≥ v·∫•n ƒë·ªÅ, re-render nhi·ªÅu l·∫ßn, ch√∫ng ta c≈©ng ko x√°c ƒë·ªãnh ƒë∆∞·ª£c request n√†o ƒë∆∞·ª£c resolve cu·ªëi c√πng. C·ª• th·ªÉ l√† th·∫ø n√†y, c√≥ th·ªÉ th·∫±ng xu·∫•t ph√°t tr∆∞·ªõc l·∫°i v·ªÅ ƒë√≠ch sau c√πng, chuy·ªán c·ªßa network ai m√† bi·∫øt ƒë∆∞·ª£c th·ªùi ƒëi·ªÉm ƒë√≥ n√≥ download film g√¨ l√†m ch·∫≠m m·∫°ng, th·∫±ng request sau c√≥ khi l·∫°i v·ªÅ ƒë√≠ch tr∆∞·ªõc, nh∆∞ v·∫≠y th√¨ d√πng c·ª•c response l√∫c n√†o ƒë·ªÉ render, m√¨nh mu·ªën response c·ªßa th·∫±ng request cu·ªëi c√πng.</p>\n<p>B·∫°n mu·ªën, trong c√¥ng cu·ªôc t√°n g√°i, ƒë·ª©a n√†o ·ªü l·∫°i ƒë·∫øn gi√¢y ph√∫t cu·ªëi c√πng l√† ƒë·ª©a chi·∫øn th·∫Øng, b·∫°n s·∫Ω d·∫πp lu√¥n nh·ªØng ƒë·ª©a n√†o th·∫£ th√≠nh tr∆∞·ªõc ƒë√≥? V√≠ von nh∆∞ v·∫≠y c≈©ng ch∆∞a chu·∫©n, ph·∫£i l√† ƒë·ª©a n√†o ƒë·∫øn sau c√πng th√¨ d·ªØ l·∫°i, d·∫πp m·∫π t·ª•i t·ªõi tr∆∞·ªõc (th·∫ø n√†y th√¨ b·∫•t c√¥ng vl m·∫•y b·∫°n)</p>\n<p>RxJS l√†m ƒë∆∞·ª£c chuy·ªán ƒë√≥ kh√¥ng? C√≥ ch·ª©, <strong>m·ªçi th·ª© ƒë√£ c√≥ operator</strong>, chuy·ªÉn qua d√πng <code class=\"language-text\">switchMap</code>, s·∫Ω ch·ªâ c√≥ <strong>response cu·ªëi c√πng ƒë∆∞·ª£c render</strong>, m·∫•y request tr∆∞·ªõc ƒë√≥ s·∫Ω b·ªã cancel h·∫øt</p>\n<p><img src=\"https://res.cloudinary.com/dukp6c7f7/image/upload/f_auto,fl_lossy,q_auto/s3-ghost/2017/09/Screen_Shot_2017_09_29_at_9_24_06_PM-1506713083152.png\"></p>\n<pre class=\"language-js{3}\"><code class=\"language-js{3}\">Rx.Observable\n    .fromEvent(button, 'click')\n    .switchMap(getAlbums)\n    .subscribe(\n        render,\n        err => console.error(err)\n    )</code></pre>\n<h2 id=\"k·∫øt-h·ª£p-c√°c-observable\"><a href=\"#k%E1%BA%BFt-h%E1%BB%A3p-c%C3%A1c-observable\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>K·∫øt h·ª£p c√°c Observable</h2>\n<p>M·ªôt use case kh√°c m√† ch√∫ng ta g·∫∑p ho√†i. Ch·ª©c nƒÉng filter ho·∫°t ƒë·ªông nh∆∞ sau: cho t·ª•i user nh·∫≠p v√†o <code class=\"language-text\">user id</code> b·∫±ng <code class=\"language-text\">&lt;input /&gt;</code>, v√† ch·ªçn th·ªÉ lo·∫°i √¢m nh·∫°c n√≥ mu·ªën b·∫±ng <code class=\"language-text\">&lt;select /&gt;</code>. ƒêi·ªÅu quan tr·ªçng l√† ch·ªâ t·∫°o request m·ªõi khi c·∫£ 2 gi√° tr·ªã trong ƒë√≥ ƒëi·ªÅu c√≥ d·ªØ li·ªáu, v√† re-render khi m·ªôt trong 2 gi√° tr·ªã n√†y b·ªã thay ƒë·ªïi.</p>\n<p>T·∫°o Observable tr∆∞·ªõc nh√©</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> id$ <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">,</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span> <span class=\"token arrow operator\">=></span> e<span class=\"token punctuation\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">value</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> resource$ <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>select<span class=\"token punctuation\">,</span> <span class=\"token string\">'change'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span> <span class=\"token arrow operator\">=></span> e<span class=\"token punctuation\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">value</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Ch√∫ng ta ph·∫£i h·ª£p th·ªÉ 2 th·∫±ng tr√™n v√†o m·ªôt, ƒë·ªÉ khi m·ªôt trong 2 th·∫±ng c√≥ thay ƒë·ªïi ch√∫ng ta l·∫•y ƒë∆∞·ª£c gi√° tr·ªã sau c√πng c·ªßa c·∫£ 2. <strong>m·ªçi th·ª© ƒë√£ c√≥ operator</strong>, nhi·ªÅu l·∫Øm, ·ªü ƒë√¢y d√πng <code class=\"language-text\">combineLatest</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">combineLatest</span><span class=\"token punctuation\">(</span>id$<span class=\"token punctuation\">,</span> resource$<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">switchMap</span><span class=\"token punctuation\">(</span>getResource<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span>render<span class=\"token punctuation\">)</span></code></pre>\n<iframe height=\"265\" style=\"width: 100%;\" scrolling=\"no\" title=\"Observables 6\" src=\"//codepen.io/mmiszy/embed/mBwLoX/?height=265&theme-id=0&default-tab=js,result\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\">\n  See the Pen <a href='https://codepen.io/mmiszy/pen/mBwLoX/'>Observables 6</a> by Micha≈Ç Miszczyszyn\n  (<a href='https://codepen.io/mmiszy'>@mmiszy</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n<h2 id=\"k·∫øt\"><a href=\"#k%E1%BA%BFt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>K·∫øt</h2>\n<p>B·∫°n ƒë√£ th·∫•y s·ª≠ d·ª•ng Observable th√∫ v·ªã d∆∞·ªùng n√†o ch∆∞a? N·∫øu c√¢u tr·∫£ l·ªùi l√† \"C√≥ ‚ù§Ô∏è, tr·ªçn ƒë·ªùi y√™u em\", b·∫°n h√£y nh√†o v√¥ document c·ªßa n√≥ ƒë·ªÉ nghi√™n c·ª©u chuy√™n s√¢u h∆°n. Ho·∫∑c <a href=\"https://luubinhan.github.io/blog/2018-10-30-gioi-thieu-reactive-programing-trong-javascript\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ƒë·ªçc l·∫°i b√†i tr∆∞·ªõc ƒë√¢y c·ªßa m√¨nh</a>.</p>\n<p>N·∫øu c√¢u tr·∫£ l·ªùi l√† \"No üí©, anh √©o care m·∫•y ƒë·ª©a ·∫°\". Th√¨ b·∫°n c≈©ng n√™n b·ªõt b·ªõt ƒë·ªëi x·ª≠ t·ªá v·ªõi n√≥ ƒëi, v√¨ trong t∆∞∆°ng lai JS s·∫Ω ƒë∆∞a n√†o v√†o nh∆∞ m·ªôt object ch√≠nh th·ª©c lu√¥n, kh√¥ng ch·∫°y ƒë·∫±ng tr·ªùi ƒë∆∞·ª£c ƒë√¢u c√°c b·∫°n ·∫°.</p>\n<p>Hy v·ªçng anh em h√¥m nay ƒë√£ h·ªçc th√™m ƒë∆∞·ª£c c√°i g√¨ ƒë√≥ th√∫ v·ªã, h·∫πn g·∫∑p l·∫°i anh em v√†o m·ªôt vi·∫øt th√∫ v·ªã kh√°c.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://x-team.com/blog/rxjs-observables/\">6 SIMPLE EXAMPLES WHICH WILL MAKE YOU LOVE OBSERVABLES (RXJS 5)</a></p>\n","cover_image":""}},{"node":{"id":"1231bcbf637198f90c7b6d52a56a2518","title":"3 b∆∞·ªõc t·ªëi ∆∞u hi·ªáu nƒÉng React App b·∫±ng c√°c API m·ªõi c·ªßa React","path":"/2019-06-17-huong-dan-toi-uu-hieu-nang-react-app/","date":"2019-06-17","timeToRead":3,"desc":"B√†i vi·∫øt h∆∞·ªõng d·∫´n t·ªëi ∆∞u hi·ªáu nƒÉng b·∫±ng memo, useMemo, useCallback","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#Reactmemo\">React.memo</a></li>\n<li><a href=\"#useMemo\">useMemo</a></li>\n<li><a href=\"#useCallback\">useCallback</a></li>\n</ul>\n<!-- /TOC -->\n<p>Khi s·ª≠ d·ª•ng function component, React cung c·∫•p 3 ph∆∞∆°ng th·ª©c ƒë·ªÉ t·ªëi ∆∞u: <code class=\"language-text\">React.memo</code>, <code class=\"language-text\">useMemo</code>, v√† <code class=\"language-text\">useCallback</code>, ch√∫ng ta c√πng ƒëi·ªÉm qua 3 th·∫±ng n√†y</p>\n<p>X√©t v√≠ d·ª•</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">ListPage</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> data<span class=\"token punctuation\">,</span> title <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token maybe-class-name\">Header</span> title<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token maybe-class-name\">List</span> listItems<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span></code></pre>\n<p>Component nh∆∞ tr√™n (<code class=\"language-text\">&lt;ListPage /&gt;</code>), khi nh·∫≠n m·ªôt <code class=\"language-text\">data</code> m·ªõi, t·∫•t c·∫£ component con b√™n trong l√† <code class=\"language-text\">Header</code> v√† <code class=\"language-text\">List</code> s·∫Ω re-render, m·∫∑c d√π c√°i <code class=\"language-text\">title</code> kh√¥ng h·ªÅ thay ƒë·ªïi. N·∫øu <code class=\"language-text\">Header</code> kh√¥ng t·ªën qu√° nhi·ªÅu th·ªùi gian ƒë·ªÉ render th√¨ ko c√≥ v·∫•n ƒë·ªÅ. Ng∆∞·ª£c l·∫°i dƒ© nhi√™n l√† n·∫øu render <code class=\"language-text\">Header</code> t·ªën r·∫•t nhi·ªÅu th·ªùi gian, ch√∫ng ta ph·∫£i <strong>x√¢y l·∫°i</strong> ƒë·ªÉ t·ªëi ∆∞u h∆°n.</p>\n<h2 id=\"reactmemo\"><a href=\"#reactmemo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>React.memo</h2>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token maybe-class-name\">MyComponent</span> <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">memo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\"><span class=\"token maybe-class-name\">MyComponent</span></span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* render using props */</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p><code class=\"language-text\">React.memo</code> l√† m·ªôt HOC, <a href=\"https://luubinhan.github.io/blog/2018-11-04-gioi-thieu-react-memo-moi-trong-react-16\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ƒë·ªçc l·∫°i b√†i n√†y</a>, n√≥ s·∫Ω <strong>nh·ªõ</strong> k·∫øt qu·∫£ render c·ªßa component. N·∫øu component tr·∫£ v·ªÅ m·ªôt output gi·ªëng h·ªát cho c√πng m·ªôt prop, ƒë∆∞a n√≥ v√†o <code class=\"language-text\">React.memo</code> s·∫Ω ti·∫øt ki·ªám t√≠ th·ªùi gian.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">Header</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> title <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token maybe-class-name\">Header</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Wrap l·∫°i trong <code class=\"language-text\">React.memo</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">Header</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> title <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token maybe-class-name\">React</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">memo</span><span class=\"token punctuation\">(</span><span class=\"token maybe-class-name\">Header</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"usememo\"><a href=\"#usememo\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>useMemo</h2>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> memoizedValue <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token function\">computeExpensiveValue</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>C≈©ng t∆∞∆°ng t·ª± n√≥ s·∫Ω nh·ªõ k·∫øt qu·∫£ tr·∫£ v·ªÅ, tuy nhi√™n n√≥ s·∫Ω c√≥ th√™m ph·∫ßn g·ªçi l√† <code class=\"language-text\">array dependencies</code>, l√† m·ªôt danh s√°ch c√°c <strong>th·∫±ng</strong> m√† n√≥ ph·ª• thu·ªôc, n·∫øu gi√° tr·ªã ph·ª• thu·ªôc thay ƒë·ªïi n√≥ m·ªõi r·ªçi render l·∫°i, kh√¥ng th·ªÉ tr·∫£ th·∫≥ng k·∫øt qu·∫£ l·∫ßn tr∆∞·ªõc</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> widgetList <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> \n        widgets<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">w</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token spread operator\">...</span>w<span class=\"token punctuation\">,</span>\n        totalPrice<span class=\"token operator\">:</span> <span class=\"token function\">someComplexFunction</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">.</span><span class=\"token property-access\">price</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        estimatedDeliveryDate<span class=\"token operator\">:</span> <span class=\"token function\">someOtherComplexFunction</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">.</span><span class=\"token property-access\">warehouse</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>widgets<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Trong v√≠ d·ª• tr√™n, 1 component nh·∫≠n m·ªôt danh s√°ch c√°c widget, c√°c widget n√†y tr∆∞·ªõc khi truy·ªÅn v√†o s·∫Ω ƒë∆∞·ª£c th√™m v√†o 2 gi√° tr·ªã l√† <em>total price</em> v√† <em>delivery date</em>. N·∫øu gi√° tr·ªã c√°c widget kh√¥ng thay ƒë·ªïi khi render l·∫°i component, th√¨ kh√¥ng c·∫ßn thi·∫øt ph·∫£i ch·∫°y qua c√°c h√†m <code class=\"language-text\">someComplexFunction</code>, <code class=\"language-text\">someOtherComplexFunction</code>. S·ª≠ d·ª•ng <code class=\"language-text\">useMemo</code> ƒë·ªÉ ghi nh·ªõ k·∫øt qu·∫£ v√† b·ªè qua trong tr∆∞·ªùng h·ª£p ƒë√≥.</p>\n<h2 id=\"usecallback\"><a href=\"#usecallback\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>useCallback</h2>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> memoizedCallback <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>M·ª•c ƒë√≠ch ƒë·ªÉ ch·∫∑n c√°c l·∫ßn render kh√¥ng c·∫ßn thi·∫øt gi·ªØa component cha v√† con</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">Parent</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showExtraDetails<span class=\"token punctuation\">,</span> setShowExtraDetails<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token maybe-class-name\">Child</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token function\">showData</span><span class=\"token punctuation\">(</span>showExtraDetails<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>1 component nh∆∞ v·∫≠y s·∫Ω re-render c·∫£ cha v√† con c√πng l√∫c, th·∫≠m ch√≠ component con c√≥ l√† <code class=\"language-text\">PureComponent</code> ƒë∆∞·ª£c wrap b√™n trong <code class=\"language-text\">React.memo</code> ƒëi n·ªØa, b·ªüi v√¨ <code class=\"language-text\">onClick</code> s·∫Ω kh√°c nhau tr√™n m·ªói l·∫ßn render. S·ª≠ d·ª•ng <code class=\"language-text\">useCallback</code> ch√∫ng ta vi·∫øt l·∫°i nh∆∞ sau</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\"><span class=\"token maybe-class-name\">Parent</span></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>showExtraDetails<span class=\"token punctuation\">,</span> setShowExtraDetails<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> handleClick <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">showData</span><span class=\"token punctuation\">(</span>showExtraDetails<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span>showExtraDetails<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token maybe-class-name\">Child</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Nh∆∞ v·∫≠y h√†m <code class=\"language-text\">handleClick</code> s·∫Ω gi·ªëng nhau cho c√°c l·∫ßn render kh√°c nhau, n√≥ ch·ªâ kh√°c khi <code class=\"language-text\">showExtraDetails</code> thay ƒë·ªïi.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://headway.io/blog/react-optimize-components-memo-usememo-usecallback\">React: Optimize Components with React.memo, useMemo, and useCallback</a></p>\n","cover_image":""}},{"node":{"id":"3fc010c23eda34d2e63e8432026d5760","title":"Kh√¥ng cho cu·ªôn trang khi m·ªü Modal","path":"/2019-06-07-huong-dang-xu-ly-modal-va-scroll/","date":"2019-06-07","timeToRead":1,"desc":"X·ª≠ l√Ω cu·ªôn trang khi m·ªü modal","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#C%C3%A1ch-%C4%91%C6%A1n-gi%E1%BA%A3n-nh%E1%BA%A5t\">C√°ch ƒë∆°n gi·∫£n nh·∫•t</a></li>\n<li><a href=\"#Tr%C3%AAn-mobile\">Tr√™n mobile</a></li>\n<li><a href=\"#Gi%E1%BA%A3i-ph%C3%A1p-cu%E1%BB%91i-c%C3%B9ng\">Gi·∫£i ph√°p cu·ªëi c√πng</a></li>\n</ul>\n<!-- /TOC -->\n<h2 id=\"c√°ch-ƒë∆°n-gi·∫£n-nh·∫•t\"><a href=\"#c%C3%A1ch-%C4%91%C6%A1n-gi%E1%BA%A3n-nh%E1%BA%A5t\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>C√°ch ƒë∆°n gi·∫£n nh·∫•t</h2>\n<p>ƒê·∫∑t ƒë·ªô cao c·ªßa body = 100% c·ªßa viewport, sau ƒë√≥ cho overflow th√†nh hidden, th√™m m·ª•c padding right = 15 ƒë·ªÉ fix tr∆∞·ªùng h·ª£p trang ƒë√£ c√≥ thanh cu·ªôn r·ªìi</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">body<span class=\"token class\">.model-open</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> <span class=\"token number\">100</span><span class=\"token unit\">vh</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">overflow-y</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">padding-right</span><span class=\"token punctuation\">:</span> <span class=\"token number\">15</span><span class=\"token unit\">px</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"tr√™n-mobile\"><a href=\"#tr%C3%AAn-mobile\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Tr√™n mobile</h2>\n<p>C√°ch tr√™n ch·∫°y t·ªët tr√™n desktop v√† android, bu·ªìn thay iOS v·∫´n cu·ªôn ƒë∆∞·ª£c, th√™m <code class=\"language-text\">position fixed</code> ƒë·ªÉ s·ª≠a bug n√†y</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">body</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> fixed<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Tuy nhi√™n, c√°ch n√†y v·∫´n b·ªã v·∫•n ƒë·ªÉ b·ª± kh√°c, n·∫øu cu·ªôn xu·ªëng d∆∞·ªõi, m·ªü modal l√™n, ƒë√≥ng l·∫°i th√¨ trang cu·ªôn l√™n ƒë·∫ßu</p>\n<h2 id=\"gi·∫£i-ph√°p-cu·ªëi-c√πng\"><a href=\"#gi%E1%BA%A3i-ph%C3%A1p-cu%E1%BB%91i-c%C3%B9ng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Gi·∫£i ph√°p cu·ªëi c√πng</h2>\n<p>ƒêi ƒë√¢u r·ªìi c≈©ng v·ªÅ javascript th√¥i. L∆∞u l·∫°i v·ªã tr√≠ scroll, set l·∫°i v·ªã tr√≠ n√†y khi ƒë√≥ng modal</p>\n<p>Khi bung modal</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">showDialog</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dialog'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">classList</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'show'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> scrollY <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">documentElement</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">style</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getPropertyValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">'--scroll-y'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> body <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">body</span><span class=\"token punctuation\">;</span>\n  body<span class=\"token punctuation\">.</span><span class=\"token property-access\">style</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">position</span> <span class=\"token operator\">=</span> <span class=\"token string\">'fixed'</span><span class=\"token punctuation\">;</span>\n  body<span class=\"token punctuation\">.</span><span class=\"token property-access\">style</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">top</span> <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>scrollY<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Khi ƒë√≥ng modal</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">closeDialog</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> body <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">body</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> scrollY <span class=\"token operator\">=</span> body<span class=\"token punctuation\">.</span><span class=\"token property-access\">style</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">top</span><span class=\"token punctuation\">;</span>\n  body<span class=\"token punctuation\">.</span><span class=\"token property-access\">style</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">position</span> <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  body<span class=\"token punctuation\">.</span><span class=\"token property-access\">style</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">top</span> <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>scrollY <span class=\"token operator\">||</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dialog'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">classList</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'show'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">documentElement</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">style</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">'--scroll-y'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">scrollY</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<iframe height=\"265\" style=\"width: 100%;\" scrolling=\"no\" title=\"Avoid body scrollable in safari when modal dialog shown\" src=\"//codepen.io/geoffgraham/embed/LogERe/?height=265&theme-id=0&default-tab=html,result\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\">\n  See the Pen <a href='https://codepen.io/geoffgraham/pen/LogERe/'>Avoid body scrollable in safari when modal dialog shown</a> by Geoff Graham\n  (<a href='https://codepen.io/geoffgraham'>@geoffgraham</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://css-tricks.com/prevent-page-scrolling-when-a-modal-is-open/\">Prevent Page Scrolling When a Modal is Open</a></p>\n","cover_image":""}},{"node":{"id":"d9b7334775e4e76d0ff03ef628719c56","title":"M·ªôt v√†i ·ª©ng d·ª•ng hay ho c·ªßa reduce","path":"/2019-05-26-ung-dung-cao-cap-cua-reduce/","date":"2019-05-26","timeToRead":5,"desc":"H√£y h·ªçc s·ª≠ d·ª•ng reduce, v∆∞·ª£t qua nh·ªØng v√≠ v·ª• cƒÉn b·∫£n b·∫±ng c·ªông, tr·ª´, nh√¢n, chia","content":"<p>Khi ƒë·ªçc t√†i li·ªáu tr√™n <a href=\"https://developer.mozilla.org/vi/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">MDN v·ªÅ Array.prototype.reduce()</a> ch√∫ng ta s·∫Ω c√≥ c√°i nh√¨n kh√° t·ªïng qu√°t v·ªÅ <code class=\"language-text\">.reduce()</code>, nh·ªØng v√≠ d·ª• c·ªông, nh√¢n s·ªë c∆° b·∫£n ƒë·ªÉ ch√∫ng ta d·ªÖ n·∫Øm c√°ch h√†m <code class=\"language-text\">.reduce()</code> ch·∫°y. Tuy nhi√™n v√¨ n√≥ qu√° cƒÉn b·∫£n, n√™n b·∫°n s·∫Ω kh√¥ng th·ªÉ th·∫•y h·∫øt ƒë∆∞·ª£c s·ª± <strong>l·ª£i h·∫°i</strong> c·ªßa <code class=\"language-text\">.reduce()</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">multiply</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> a <span class=\"token operator\">*</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> sampleArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> sum <span class=\"token operator\">=</span> sampleArray<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">reduce</span><span class=\"token punctuation\">(</span>add<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'T·ªïng:'</span><span class=\"token punctuation\">,</span> sum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ‚¶ò T·ªïng: 10</span>\n\n<span class=\"token keyword\">const</span> product <span class=\"token operator\">=</span> sampleArray<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">reduce</span><span class=\"token punctuation\">(</span>multiply<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Nh√¢n l·∫°i b·∫±ng:'</span><span class=\"token punctuation\">,</span> product<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ‚¶ò Nh√¢n l·∫°i b·∫±ng: 24</span></code></pre>\n<p>C√≥ th·ªÉ nhi·ªÅu ng∆∞·ªùi kh√¥ng ƒë·ªÉ √Ω, bi·∫øn t√≠ch l≈©y (accumulator = tham s·ªë ƒë·∫ßu ti√™n) v√† gi√° tr·ªã hi·ªán t·∫°i (tham s·ªë th·ª© 2) kh√¥ng nh·∫•t thi·∫øt ph·∫£i gi·ªëng nhau.</p>\n<p>Ch√∫ng ta c√≥ th·ªÉ khai b√°o m·ªôt h√†m reducer nh∆∞ sau l√† ho√†n to√†n h·ª£p l·ªá</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">fizzBuzzReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">acc<span class=\"token punctuation\">,</span> element</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>element <span class=\"token operator\">%</span> <span class=\"token number\">15</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>acc<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">Fizz Buzz\\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>element <span class=\"token operator\">%</span> <span class=\"token number\">5</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>acc<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">Fizz\\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>element <span class=\"token operator\">%</span> <span class=\"token number\">3</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>acc<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">Buzz\\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>acc<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>element<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> nums <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span> <span class=\"token number\">14</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>nums<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">reduce</span><span class=\"token punctuation\">(</span>fizzBuzzReducer<span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>V·ªõi b√†i vi·∫øt n√†y ch√∫ng ta c≈©ng xem x√©t nh·ªØng ·ª©ng d·ª•ng kh√°c, <strong>cao c·∫•p</strong> h∆°n c·ªßa <code class=\"language-text\">.reduce()</code>, s·ª≠ d·ª•ng vi·ªác thay ƒë·ªïi <em>ki·ªÉu</em> c·ªßa bi·∫øn t√≠ch l≈©y nh∆∞ v√≠ d·ª• tr√™n, m·ªü ra nhi·ªÅu ·ª©ng d·ª•ng b·∫£o ƒë·∫£m l√† <strong>hay</strong></p>\n<h2 id=\"chuy·ªÉn-m·ªôt-array-sang-object\"><a href=\"#chuy%E1%BB%83n-m%E1%BB%99t-array-sang-object\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Chuy·ªÉn m·ªôt array sang object</h2>\n<p>Ch√∫ng ta c√≥ m·ªôt array th·∫ø n√†y</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> peopleArr  <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        username<span class=\"token operator\">:</span>    <span class=\"token string\">'glestrade'</span><span class=\"token punctuation\">,</span>\n        displayname<span class=\"token operator\">:</span> <span class=\"token string\">'Inspector Lestrade'</span><span class=\"token punctuation\">,</span>\n        email<span class=\"token operator\">:</span>       <span class=\"token string\">'glestrade@met.police.uk'</span><span class=\"token punctuation\">,</span>\n        authHash<span class=\"token operator\">:</span>    <span class=\"token string\">'bdbf9920f42242defd9a7f76451f4f1d'</span><span class=\"token punctuation\">,</span>\n        lastSeen<span class=\"token operator\">:</span>    <span class=\"token string\">'2019-05-13T11:07:22+00:00'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        username<span class=\"token operator\">:</span>    <span class=\"token string\">'mholmes'</span><span class=\"token punctuation\">,</span>\n        displayname<span class=\"token operator\">:</span> <span class=\"token string\">'Mycroft Holmes'</span><span class=\"token punctuation\">,</span>\n        email<span class=\"token operator\">:</span>       <span class=\"token string\">'mholmes@gov.uk'</span><span class=\"token punctuation\">,</span>\n        authHash<span class=\"token operator\">:</span>    <span class=\"token string\">'b4d04ad5c4c6483cfea030ff4e7c70bc'</span><span class=\"token punctuation\">,</span>\n        lastSeen<span class=\"token operator\">:</span>    <span class=\"token string\">'2019-05-10T11:21:36+00:00'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        username<span class=\"token operator\">:</span>    <span class=\"token string\">'iadler'</span><span class=\"token punctuation\">,</span>\n        displayname<span class=\"token operator\">:</span> <span class=\"token string\">'Irene Adler'</span><span class=\"token punctuation\">,</span>\n        email<span class=\"token operator\">:</span>       <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">,</span>\n        authHash<span class=\"token operator\">:</span>    <span class=\"token string\">'319d55944f13760af0a07bf24bd1de28'</span><span class=\"token punctuation\">,</span>\n        lastSeen<span class=\"token operator\">:</span>    <span class=\"token string\">'2019-05-17T11:12:12+00:00'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre>\n<p>N·∫øu c·∫ßn chuy·ªÉn n√≥ qua d·∫°ng object, l·∫•y gi√° tr·ªã <code class=\"language-text\">username</code> l√†m key</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">keyByUsernameReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">acc<span class=\"token punctuation\">,</span> person</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token spread operator\">...</span>acc<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>person<span class=\"token punctuation\">.</span><span class=\"token property-access\">username</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> person <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> peopleObj <span class=\"token operator\">=</span> peopleArr<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">reduce</span><span class=\"token punctuation\">(</span>keyByUsernameReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ‚¶ò {</span>\n<span class=\"token comment\">//     \"glestrade\": {</span>\n<span class=\"token comment\">//         \"username\":    \"glestrade\",</span>\n<span class=\"token comment\">//         \"displayname\": \"Inspector Lestrade\",</span>\n<span class=\"token comment\">//         \"email\":       \"glestrade@met.police.uk\",</span>\n<span class=\"token comment\">//         \"authHash\":    \"bdbf9920f42242defd9a7f76451f4f1d\",</span>\n<span class=\"token comment\">//          \"lastSeen\":    \"2019-05-13T11:07:22+00:00\"</span>\n<span class=\"token comment\">//     },</span>\n<span class=\"token comment\">//     \"mholmes\": {</span>\n<span class=\"token comment\">//         \"username\":    \"mholmes\",</span>\n<span class=\"token comment\">//         \"displayname\": \"Mycroft Holmes\",</span>\n<span class=\"token comment\">//         \"email\":       \"mholmes@gov.uk\",</span>\n<span class=\"token comment\">//         \"authHash\":    \"b4d04ad5c4c6483cfea030ff4e7c70bc\",</span>\n<span class=\"token comment\">//          \"lastSeen\":    \"2019-05-10T11:21:36+00:00\"</span>\n<span class=\"token comment\">//     },</span>\n<span class=\"token comment\">//     \"iadler\":{</span>\n<span class=\"token comment\">//         \"username\":    \"iadler\",</span>\n<span class=\"token comment\">//         \"displayname\": \"Irene Adler\",</span>\n<span class=\"token comment\">//         \"email\":       null,</span>\n<span class=\"token comment\">//         \"authHash\":    \"319d55944f13760af0a07bf24bd1de28\",</span>\n<span class=\"token comment\">//          \"lastSeen\":    \"2019-05-17T11:12:12+00:00\"</span>\n<span class=\"token comment\">//     }</span>\n<span class=\"token comment\">// }</span></code></pre>\n<h2 id=\"chuy·ªÉn-m·ªôt-array-th√†nh-m·ªôt-array-kh√°c\"><a href=\"#chuy%E1%BB%83n-m%E1%BB%99t-array-th%C3%A0nh-m%E1%BB%99t-array-kh%C3%A1c\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Chuy·ªÉn m·ªôt array th√†nh m·ªôt array kh√°c</h2>\n<p>B√¨nh th∆∞·ªùng khi nghƒ© t·ªõi <code class=\"language-text\">.reduce()</code> ch√∫ng ta nghƒ© t·ªõi vi·∫øt l·∫•y m·ªôt m·∫£ng sau ƒë√≥ ƒë∆∞a n√≥ v·ªÅ 1 gi√° tr·ªã b·∫±ng bi·∫øn t√≠ch l≈©y, gi√° tr·ªã n√†y ho√†n to√†n c√≥ th·ªÉ l√† m·ªôt array kh√°c.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> fileLines <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'Inspector Algar,Inspector Bardle,Mr. Barker,Inspector Barton'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Inspector Baynes,Inspector Bradstreet,Inspector Sam Brown'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Monsieur Dubugue,Birdy Edwards,Inspector Forbes,Inspector Forrester'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Inspector Gregory,Inspector Tobias Gregson,Inspector Hill'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'Inspector Stanley Hopkins,Inspector Athelney Jones'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">splitLineReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">acc<span class=\"token punctuation\">,</span> line</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> acc<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">concat</span><span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">split</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token language-regex\">,</span><span class=\"token regex-delimiter\">/</span><span class=\"token regex-flags\">g</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> investigators <span class=\"token operator\">=</span> fileLines<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">reduce</span><span class=\"token punctuation\">(</span>splitLineReducer<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// [</span>\n<span class=\"token comment\">//   \"Inspector Algar\",</span>\n<span class=\"token comment\">//   \"Inspector Bardle\",</span>\n<span class=\"token comment\">//   \"Mr. Barker\",</span>\n<span class=\"token comment\">//   \"Inspector Barton\",</span>\n<span class=\"token comment\">//   \"Inspector Baynes\",</span>\n<span class=\"token comment\">//   \"Inspector Bradstreet\",</span>\n<span class=\"token comment\">//   \"Inspector Sam Brown\",</span>\n<span class=\"token comment\">//   \"Monsieur Dubugue\",</span>\n<span class=\"token comment\">//   \"Birdy Edwards\",</span>\n<span class=\"token comment\">//   \"Inspector Forbes\",</span>\n<span class=\"token comment\">//   \"Inspector Forrester\",</span>\n<span class=\"token comment\">//   \"Inspector Gregory\",</span>\n<span class=\"token comment\">//   \"Inspector Tobias Gregson\",</span>\n<span class=\"token comment\">//   \"Inspector Hill\",</span>\n<span class=\"token comment\">//   \"Inspector Stanley Hopkins\",</span>\n<span class=\"token comment\">//   \"Inspector Athelney Jones\"</span>\n<span class=\"token comment\">// ]</span></code></pre>\n<p>T·∫•t nhi√™n trong ƒëi·ªÅu ki·ªán c√≥ th·ªÉ s·ª≠ d·ª•ng <code class=\"language-text\">.flatMap()</code> (  kh√¥ng h·ªó tr·ª£ tr√™n edge v√† IE) th√¨ n√™n d√πng <code class=\"language-text\">.flatMap()</code> thay cho reduce</p>\n<h2 id=\"th·ª±c-hi·ªán-2-t√≠nh-to√°n-c√πng-l√∫c\"><a href=\"#th%E1%BB%B1c-hi%E1%BB%87n-2-t%C3%ADnh-to%C3%A1n-c%C3%B9ng-l%C3%BAc\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Th·ª±c hi·ªán 2 t√≠nh to√°n c√πng l√∫c</h2>\n<p>N·∫øu c·∫ßn th·ª±c hi·ªán 2 t√≠nh to√°n d·ª±a tr√™n 1 array, v√≠ d·ª• l·∫•y gi√° tr·ªã nh·ªè nh·∫•t v√† l·ªõn nh·∫•t trong d√£y s·ªë</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> readings <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3.4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3.2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> maxReading <span class=\"token operator\">=</span> readings<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">max</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token known-class-name class-name\">Number</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MIN_VALUE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> minReading <span class=\"token operator\">=</span> readings<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x<span class=\"token punctuation\">,</span> y</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">min</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token known-class-name class-name\">Number</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MAX_VALUE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p><code class=\"language-text\">.reduce</code> kh√¥ng ch·ªâ c√≥ th·ªÉ tr·∫£ v·ªÅ number, n√≥ c√≥ th·ªÉ tr·∫£ v·ªÅ b·∫•t c·ª© ki·ªÉu g√¨, ch√∫ng ta c√≥ th·ªÉ ƒë∆∞a 2 gi√° tr·ªã n√†y v√†o m·ªôt object</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">minMaxReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">acc<span class=\"token punctuation\">,</span> reading</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        minReading<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">Match</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">min</span><span class=\"token punctuation\">(</span>acc<span class=\"token punctuation\">.</span><span class=\"token property-access\">minReading</span><span class=\"token punctuation\">,</span> reading<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        maxReading<span class=\"token operator\">:</span> <span class=\"token maybe-class-name\">Match</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">max</span><span class=\"token punctuation\">(</span>acc<span class=\"token punctuation\">.</span><span class=\"token property-access\">maxReading</span><span class=\"token punctuation\">,</span> reading<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> initMinMax <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    minReading<span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Number</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MAX_VALUE</span><span class=\"token punctuation\">,</span>\n    maxReading<span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Number</span><span class=\"token punctuation\">.</span><span class=\"token constant\">MIN_VALUE</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> minMax <span class=\"token operator\">=</span> readings<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">reduce</span><span class=\"token punctuation\">(</span>minMaxReducer<span class=\"token punctuation\">,</span> initMinMax<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>V·∫•n ƒë·ªÅ duy nh·∫•t c·ªßa c√°ch th·ª© 2 n√†y l√† performance kh√¥ng t·ªët.</p>\n<h2 id=\"k·∫øt-h·ª£p-map-v√†-filter-c√πng-l√∫c\"><a href=\"#k%E1%BA%BFt-h%E1%BB%A3p-map-v%C3%A0-filter-c%C3%B9ng-l%C3%BAc\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>K·∫øt h·ª£p map v√† filter c√πng l√∫c</h2>\n<p>L·∫•y l·∫°i v√≠ d·ª• v·ªõi m·∫£ng <code class=\"language-text\">peopleArr</code> ·ªü tr√™n, ch√∫ng ta l·∫•y ng∆∞·ªùi v·ª´a ƒëƒÉng nh·∫≠p sau c√πng, kh√¥ng t√≠nh c√°c user kh√¥ng c√≥ email. C√°ch th·ª© nh·∫•t ƒë·ªÉ l√†m l√† t√°ch ra l√†m 3 b∆∞·ªõc</p>\n<ul>\n<li>L·ªçc h·∫øt c√°c user kh√¥ng c√≥ email</li>\n<li>L·∫•y gi√° tr·ªã <code class=\"language-text\">lastSeen</code></li>\n<li>T√¨m gi√° tr·ªã l·ªõn nh·∫•t</li>\n</ul>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">notEmptyEmail</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span><span class=\"token property-access\">email</span> <span class=\"token operator\">!==</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span><span class=\"token property-access\">email</span> <span class=\"token operator\">!==</span> <span class=\"token keyword nil\">undefined</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">getLastSeen</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> x<span class=\"token punctuation\">.</span><span class=\"token property-access\">lastSeen</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">greater</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">></span> b<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> a <span class=\"token operator\">:</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> peopleWithEmail <span class=\"token operator\">=</span> peopleArr<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">filter</span><span class=\"token punctuation\">(</span>notEmptyEmail<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> lastSeenDates   <span class=\"token operator\">=</span> peopleWithEmail<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span>getLastSeen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> mostRecent      <span class=\"token operator\">=</span> lastSeenDates<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">reduce</span><span class=\"token punctuation\">(</span>greater<span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>M·ªôt c√°ch kh√°c ƒë·ªÉ l√†m v·ªõi <code class=\"language-text\">reduce</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">notEmptyEmail</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span><span class=\"token property-access\">email</span> <span class=\"token operator\">!==</span> <span class=\"token keyword null nil\">null</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span><span class=\"token property-access\">email</span> <span class=\"token operator\">!==</span> <span class=\"token keyword nil\">undefined</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">greater</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">></span> b<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> a <span class=\"token operator\">:</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">notEmptyMostRecent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">currentRecent<span class=\"token punctuation\">,</span> person</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token function\">notEmptyEmail</span><span class=\"token punctuation\">(</span>person<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token function\">greater</span><span class=\"token punctuation\">(</span>currentRecent<span class=\"token punctuation\">,</span> person<span class=\"token punctuation\">.</span><span class=\"token property-access\">lastSeen</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> currentRecent<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> mostRecent <span class=\"token operator\">=</span> peopleArr<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">reduce</span><span class=\"token punctuation\">(</span>notEmptyMostRecent<span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"ch·∫°y-c√°c-ph∆∞∆°ng-th·ª©c-async-theo-h√†ng-ƒë·ª£i\"><a href=\"#ch%E1%BA%A1y-c%C3%A1c-ph%C6%B0%C6%A1ng-th%E1%BB%A9c-async-theo-h%C3%A0ng-%C4%91%E1%BB%A3i\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ch·∫°y c√°c ph∆∞∆°ng th·ª©c async theo h√†ng ƒë·ª£i</h2>\n<p>R·∫•t h·ªØu √≠ch khi c·∫ßn gi·ªõi h·∫°n s·ªë l∆∞·ª£ng request API, ho·∫∑c l·∫•y k·∫øt qu·∫£ c·ªßa m·ªôt Promise truy·ªÅn cho th·∫±ng k·∫ø ti·∫øp. V√≠ d·ª• l·∫•y message cho t·∫•t c·∫£ user trong m·∫£ng <code class=\"language-text\">peopleArr</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">fetchMessages</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">username</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://example.com/api/messages/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>username<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token arrow operator\">=></span> response<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getUsername</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">person</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> person<span class=\"token punctuation\">.</span><span class=\"token property-access\">username</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">chainedFetchMessages</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">p<span class=\"token punctuation\">,</span> username</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// p l√† m·ªôt promise</span>\n    <span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> p<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetchMessages</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token spread operator\">...</span>obj<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>username<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> data <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> msgObj <span class=\"token operator\">=</span> peopleArr\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span>getUsername<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">reduce</span><span class=\"token punctuation\">(</span>chainedFetchMessages<span class=\"token punctuation\">,</span> <span class=\"token known-class-name class-name\">Promise</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">then</span><span class=\"token punctuation\">(</span><span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">log</span><span class=\"token punctuation\">)</span></code></pre>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://jrsinclair.com/articles/2019/functional-js-do-more-with-reduce/\">FUNCTIONAL JAVASCRIPT: HOW TO USE ARRAY REDUCE FOR MORE THAN JUST NUMBERS\n</a></p>\n","cover_image":""}}]}}},"context":{}}