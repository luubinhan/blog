{"hash":"77f9911d0de2c3bc2ac0dba6f16f7769415b12b8","data":{"tag":{"title":"ui-ux","belongsTo":{"edges":[{"node":{"id":"6e12ee448b407c69e13739fd004305be","title":"Hướng dẫn dùng biến trong CSS để làm dark/light mode","path":"/2020-09-28-lam-theme-cho-web-nam-2020/","date":"2020-09-28","timeToRead":2,"desc":"Nếu bạn cũng như mình, mặc kệ những đứa xài IE11, mình chỉ hỗ  trợ cho đối tượng người sử dụng là những người trẻ thông minh, xài Edge, xài Chrome, xài Firefox, đọc ngay bài viết này mình chỉ cách làm.","content":"<p>Cách đây mười năm, nếu bạn hỏi mình có thể đặt biến trong CSS thì câu trả lời sẽ là KHÔNG, bạn cần viết bằng các ngôn ngữ như SCSS, LESS để có thể xài biến.</p>\n<blockquote>\n<p>Còn trong năm 2020, thì câu trả lời sẽ là CÓ.</p>\n</blockquote>\n<p>Tại sao chúng ta lại muốn đặt biến màu sắc kích thước? Để khi chúng ta muốn thay đổi bộ mặt một website từ xanh lá chuối sang đỏ rực lửa, chỉ cần \"búng tay\" là có liền.</p>\n<p>Ví dụ chúng ta theo trào lưu \"light và dark theme\" cho website, user có thể chọn kiểu sáng-sạch-sẽ hay đen-đuông-đuốc</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F11xwGmImm24QEBIRv6a0NzhW-wTc9rFh6%2Fdarktheme-darktheme-usage-availability-toggle.png\"></p>\n<p>Cú pháp đặt biến trong CSS, bắt đầu bằng dấu <code class=\"language-text\">--</code>, sau đó là tên biến</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\"><span class=\"token pseudo-class\">:root</span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">--my-background-color</span><span class=\"token punctuation\">:</span> <span class=\"token hexcode color\">#fff</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">--heading-1-font-size</span><span class=\"token punctuation\">:</span> <span class=\"token number\">15</span><span class=\"token unit\">em</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">--another-variable</span><span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token unit\">px</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Ví dụ sử dụng những biến đã khai báo</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">h1</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span><span class=\"token variable\">--my-background-color</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span><span class=\"token variable\">--heading-1-font-size</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    \n<span class=\"token punctuation\">}</span></code></pre>\n<p>Chúng ta đưa tất cả những giá trị cần thay đổi khi switch qua lại giữa 2 mode dark/light vào các biến số bên trong <code class=\"language-text\">body</code></p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">// Light theme\nbody</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">--bg-color</span><span class=\"token punctuation\">:</span> <span class=\"token hexcode color\">#F3F7F9</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">--bg-content-color</span><span class=\"token punctuation\">:</span> <span class=\"token hexcode color\">#fff</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">--bg-code</span><span class=\"token punctuation\">:</span> <span class=\"token hexcode color\">#fffbf3</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">--body-color</span><span class=\"token punctuation\">:</span> <span class=\"token hexcode color\">#444</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">--title-color</span><span class=\"token punctuation\">:</span> <span class=\"token hexcode color\">#111</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">--link-color</span><span class=\"token punctuation\">:</span> <span class=\"token hexcode color\">#6b17e6</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">--border-color</span><span class=\"token punctuation\">:</span>  <span class=\"token color\"><span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">.1</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">--space</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3.5</span><span class=\"token unit\">rem</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">--content-width</span><span class=\"token punctuation\">:</span> <span class=\"token number\">860</span><span class=\"token unit\">px</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">--header-height</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span><span class=\"token unit\">px</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">--radius</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token unit\">px</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Khi thay đổi giá trị sang dark mode</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">// Dark theme\nbody<span class=\"token attribute\"><span class=\"token punctuation\">[</span><span class=\"token attr-name\">data-theme</span><span class=\"token operator\">=</span><span class=\"token attr-value\">\"dark\"</span><span class=\"token punctuation\">]</span></span></span> <span class=\"token punctuation\">{</span>\n \t<span class=\"token variable\">--bg-color</span><span class=\"token punctuation\">:</span> <span class=\"token hexcode color\">#0D2538</span><span class=\"token punctuation\">;</span>\n \t<span class=\"token variable\">--bg-content-color</span><span class=\"token punctuation\">:</span> <span class=\"token hexcode color\">#0f2d44</span><span class=\"token punctuation\">;</span>\n \t<span class=\"token variable\">--bg-code</span><span class=\"token punctuation\">:</span> <span class=\"token color\"><span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">.3</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span>\n \t<span class=\"token variable\">--border-color</span><span class=\"token punctuation\">:</span>  <span class=\"token color\"><span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">.1</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n \t<span class=\"token variable\">--body-color</span><span class=\"token punctuation\">:</span> <span class=\"token hexcode color\">#ced8de</span><span class=\"token punctuation\">;</span>\n \t<span class=\"token variable\">--title-color</span><span class=\"token punctuation\">:</span> <span class=\"token hexcode color\">#fff</span><span class=\"token punctuation\">;</span>\n \t<span class=\"token variable\">--link-color</span><span class=\"token punctuation\">:</span> <span class=\"token hexcode color\">#af9cef</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Chúng ta sẽ thêm một số hàm cần thiết vào trong <code class=\"language-text\">window</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Mượn xài đỡ của overreacted.io</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method-variable function-variable method function property-access\">__onThemeChange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setTheme</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">newTheme</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">__theme</span> <span class=\"token operator\">=</span> newTheme<span class=\"token punctuation\">;</span>\n        preferredTheme <span class=\"token operator\">=</span> newTheme<span class=\"token punctuation\">;</span>\n        <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">body</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-theme'</span><span class=\"token punctuation\">,</span> newTheme<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">__onThemeChange</span><span class=\"token punctuation\">(</span>newTheme<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">var</span> preferredTheme<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n        preferredTheme <span class=\"token operator\">=</span> <span class=\"token dom variable\">localStorage</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'theme'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n\n    <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method-variable function-variable method function property-access\">__setPreferredTheme</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">newTheme</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setTheme</span><span class=\"token punctuation\">(</span>newTheme<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword control-flow\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token dom variable\">localStorage</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'theme'</span><span class=\"token punctuation\">,</span> newTheme<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword control-flow\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">var</span> darkQuery <span class=\"token operator\">=</span> <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">matchMedia</span><span class=\"token punctuation\">(</span><span class=\"token string\">'(prefers-color-scheme: dark)'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    darkQuery<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">__setPreferredTheme</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span><span class=\"token property-access\">matches</span> <span class=\"token operator\">?</span> <span class=\"token string\">'dark'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'light'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">setTheme</span><span class=\"token punctuation\">(</span>preferredTheme <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>darkQuery<span class=\"token punctuation\">.</span><span class=\"token property-access\">matches</span> <span class=\"token operator\">?</span> <span class=\"token string\">'dark'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'light'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Thao tác cuối cùng là một đoạn JS để trigger việc đổi mode</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Ví dụ hàm xử lý onClickChangeTheme sẽ được gắn vào một button</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">onClickChangeTheme</span><span class=\"token punctuation\">(</span>mode <span class=\"token operator\">=</span> <span class=\"token string\">'dark'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">__setPreferredTheme</span><span class=\"token punctuation\">(</span>mode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>Chúng ta cũng có thể check được theme mà user đã chọn trước đó</p>\n<pre class=\"language-js\"><code class=\"language-js\"> <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span><span class=\"token dom variable\">window</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">__theme</span> <span class=\"token operator\">==</span> <span class=\"token string\">'dark'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// làm gì đó thật vi diệu</span></code></pre>\n<p>Kỹ thuật là như vậy, còn nếu bạn hỏi mình sẽ cập nhập trang blog này cho có 2 mode light/dark theme? Mình sẽ không làm, một số website như trang của mình thì việc switch màu như vậy không đem lại nhiều giá trị cho người đọc.</p>\n<p>Bài viết của vuilaptrinh.com</p>\n","cover_image":""}}]}}},"context":{}}