{"hash":"b42727c700336131a477fb600bb04c628a9b0eca","data":{"post":{"title":"·ª®ng d·ª•ng JSON.parse ƒë·ªÉ c·∫£i thi·ªán t·ªëc ƒë·ªô?","path":"/ung-dung-json-parse-de-cai-thien-toc-do/","date":"2019-12-14","timeToRead":3,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"},{"id":"thu-thuat","title":"thu-thuat","path":"/tag/thu-thuat/"}],"desc":"Th·ªß thu·∫≠t ƒë·ªÉ c·∫£i thi·ªán t·ªëc ƒë·ªô b·∫±ng JSON.parse","content":"<p>V·ªõi c√°c ·ª©ng d·ª•ng web ng√†y nay, kh√¥ng kh√≥ b·∫Øt g·∫∑p vi·ªác s·ª≠ d·ª•ng object nh∆∞ m·ªôt n∆°i l∆∞u tr·ªØ state v√† c√°c d·∫°ng d·ªØ li·ªáu c·∫ßn thi·∫øt kh√°c cho ·ª©ng d·ª•ng. C·ª• th·ªÉ nh·∫•t ch√∫ng ta th∆∞·ªùng th·∫•y trong store c·ªßa Redux.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> foo<span class=\"token operator\">:</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span> bar<span class=\"token operator\">:</span> <span class=\"token number\">1337</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üêå</span></code></pre>\n<p>Trong th·ª±c t·∫ø n√≥ s·∫Ω kh√¥ng ƒë∆°n gi·∫£n nh∆∞ v√≠ d·ª• ·ªü tr√™n, m√† c·∫•u tr√∫c n·∫øu kh√¥ng ch·ªìng ch√©o th√¨ c≈©ng r·∫•t l·ªõn v√¨ ph·∫£i g√°nh v√°c to√†n b·ªô <code class=\"language-text\">state</code> c·ªßa ·ª©ng d·ª•ng. N·∫øu n√≥ l·∫°i d·ªØ li·ªáu c·∫ßn thi·∫øt trong l√∫c kh·ªüi t·∫°o ·ª©ng d·ª•ng l·∫ßn ƒë·∫ßu ti√™n. Vi·ªác n√†y s·∫Ω n·∫±m trong render critical path c·ªßa tr√¨nh duy·ªát, ƒë·ªìng nghƒ©a v·ªõi vi·ªác user kh√¥ng th·∫•y g√¨ h·∫øt cho ƒë·∫øn khi d·ªØ li·ªáu n√†y ƒë∆∞·ª£c load, parse, compile, execute b·ªüi Javascript engine b√™n d∆∞·ªõi.</p>\n<p>ƒê·ªÉ kh·∫Øc ph·ª•c vi·ªác n√†y m·ªôt trong nh·ªØng c√°ch l√†m l√† d√πng server side rendering, ch√∫ng ta ch·ªâ quƒÉng c√°i HTML ƒë√£ ch·ª©a to√†n b·ªô k·∫øt qu·∫£ c·ªßa qu√° tr√¨nh xu·ªëng user. Tr√¨nh duy·ªát user kh√¥ng c·∫ßn ƒë·∫£m ƒë∆∞∆°ng c√¥ng vi·ªác ƒë√≥ n·ªØa.</p>\n<p>Nh∆∞ng n·∫øu ch√∫ng ta kh√¥ng th·ªÉ d√πng server side rendering th√¨ sao?</p>\n<p>N·∫øu object ch√∫ng ta c·∫ßn kh√¥ng ch·ª©a nh·ªØng g√¨ m√† JSON kh√¥ng h·ªó tr·ª£, nh∆∞ BigInt, Maps, Sets,... Ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng <code class=\"language-text\">JSON.parse</code></p>\n<p>V√¨ c√∫ ph√°p c·ªßa JSON ƒë∆°n gi·∫£n h∆°n nhi·ªÅu so v·ªõi Javascript, n√™n qu√° tr√¨nh parse s·∫Ω √≠t t·ªën k√©m h∆°n so v·ªõi Javascript r·∫•t nhi·ªÅu.</p>\n<p>N·ªôi dung b√™n trong JSON ƒë·ªëi v·ªõi c√°c engine r·∫•t d·ªÖ ƒëo√°n, v√† ng∆∞·ª£c l·∫°i v·ªõi c√°c object. Th√≠ d·ª• n·∫øu b·∫°n l√† c√°i engine r·ªìi nh√¨n v√†o ƒë√¢y</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token known-class-name class-name\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">parse</span><span class=\"token punctuation\">(</span>'<span class=\"token punctuation\">{</span></code></pre>\n<p>Khi b·∫°n th·∫•y d·∫•u <code class=\"language-text\">{</code>, b·∫°n s·∫Ω bi·∫øt ƒë∆∞·ª£c ch·ªâ c√≥ 2 kh·∫£ nƒÉng c√≥ th·ªÉ x·∫£y ra: m·ªôt l√† b·∫Øt ƒë·∫ßu m·ªôt object, hai l√† m·ªôt JSON kh√¥ng h·ª£p l·ªá.</p>\n<p>Trong khi ƒë√≥ sau d·∫•u <code class=\"language-text\">{</code>  c·ªßa object, c√≥ r·∫•t nhi·ªÅu kh·∫£ nƒÉng x·∫£y ra</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> x <span class=\"token operator\">=</span> <span class=\"token number\">42</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">}</span></code></pre>\n<p>ƒê√¢y c√≥ ph·∫£i l√† object kh√¥ng? Gi√° tr·ªã x ƒëang tr·ªè t·ªõi ƒë√¢u? Kh√¥ng th·ªÉ n√†o c√≥ ƒë√°p √°n n·∫øu kh√¥ng xem h·∫øt to√†n b·ªô code</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// kh·ªüi t·∫°o object, x tr·ªü t·ªõi th·∫±ng khai b√°o tr∆∞·ªõc ƒë√≥</span>\n<span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// object destructuring, x kh√¥ng tr·ªè t·ªõi th·∫±ng ƒë·∫ßu</span>\n<span class=\"token keyword\">const</span> y <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> x<span class=\"token operator\">:</span> <span class=\"token number\">21</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// m·ªôt arrow function</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">y</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>x<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> x<span class=\"token punctuation\">;</span></code></pre>\n<p>Nh∆∞ v·∫≠y, n·∫øu g·∫∑p d·∫•u <code class=\"language-text\">{</code>, c√°c engine ph·∫£i v√¥ c√πng th·∫≠n tr·ªçng v√¨ ph·∫£i bi·∫øt ng·ªØ c·∫£nh hi·ªán t·∫°i m·ªõi bi·∫øt n√≥ l√† g√¨. </p>\n<p>L·ª£i d·ª•ng ƒë·∫∑c t√≠nh n√†y ch√∫ng ta c√≥ th·ªÉ c·∫£i thi·ªán t·ªëc ƒë·ªô c·ªßa c√°c ·ª©ng d·ª•ng web c√≥ s·ª≠ d·ª•ng m·ªôt object c√≥ c·∫•u tr√∫c t∆∞∆°ng t·ª± nh∆∞ JSON ( v√≠ d·ª• nh∆∞ Redux Store). Thay v√¨ s·ª≠ d·ª•ng m·ªôt khai b√°o object nh∆∞ th·∫ø n√†y</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> foo<span class=\"token operator\">:</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span> bar<span class=\"token operator\">:</span> <span class=\"token number\">1337</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üêå</span></code></pre>\n<p>C√≥ th·ªÉ tƒÉng t·ªëc b·∫±ng c√°ch vi·∫øt</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">parse</span><span class=\"token punctuation\">(</span><span class=\"token string\">'{\"foo\":42,\"bar\":1337}'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// üöÄ</span></code></pre>\n<p>Mi·ªÖn l√† vi·ªác t√≠nh to√°n n√†y ch·ªâ c·∫ßn parse m·ªôt l·∫ßn b·∫±ng <code class=\"language-text\">JSON.parse</code>, n√≥ s·∫Ω nhanh h∆°n nhi·ªÅu so v·ªõi c√°ch khai bao object b√¨nh th∆∞·ªùng, v√† ch·ªâ n√™n suy nghƒ© √°p d·ª•ng khi object ƒë√£ v∆∞·ª£t qu√° k√≠ch th∆∞·ªõc 10kB. </p>\n<p>Th·ª±c hi·ªán ki·ªÉm tra t·ªëc ƒë·ªô c·ªßa m·ªôt object kho·∫£ng 8Mb dung l∆∞·ª£ng tr√™n c√°c engine kh√°c nhau. K·∫øt qu·∫£ nh·∫≠n ƒë∆∞·ª£c √≠t nh·∫•t c≈©ng tƒÉng t·ªëc g·∫•p 1.5 l·∫ßn tr√™n c√°c phi√™n b·∫£n kh√°c nhau c·ªßa V8</p>\n<p><img src=\"https://v8.dev/_img/cost-of-javascript-2019/json.svg\"></p>\n<p><a href=\"https://v8.dev/blog/cost-of-javascript-2019#json\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://v8.dev/blog/cost-of-javascript-2019#json</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=ff4fgQxPaO0\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Faster apps with JSON.parse (Chrome Dev Summit 2019)</a></p>\n","cover_image":"","related":[{"id":"1b2de7c708c340c3c39f2150b714a897","path":"/4-ung-dung-cua-array-from/","title":"4 ·ª©ng d·ª•ng c·ªßa Array.from","desc":"V√†i ·ª©ng d·ª•ng nh·ªè c·ªßa h√†m Array.from"},{"id":"3cbd2588e65e7ca4b1ebac17d5d87485","path":"/mot-so-ung-dung-cua-middleware/","title":"M·ªôt s·ªë ·ª©ng d·ª•ng c·ªßa middleware","desc":"Ti·∫øp theo b√†i tr∆∞·ªõc v·ªÅ middleware, ·ª©ng d·ª•ng v·ªõi c√°c tr∆∞·ªùng h·ª£p th·ª±c t·∫ø"},{"id":"0da94706a1e6b0e733fc6085a9118cc2","path":"/mot-so-nguyen-tac-voi-hinh-anh-responsive/","title":"M·ªôt s·ªë nguy√™n t·∫Øc v·ªõi h√¨nh ·∫£nh responsive","desc":"N·∫øu b·∫°n ƒë√£ qu√™n ho·∫∑c ch∆∞a bi·∫øt, h√¨nh ti√™u t·ªën h∆°n 50% dung l∆∞·ª£ng t·∫£i trang. Responsive image tuy d·ªÖ nh∆∞ng kh√¥ng n√™n xem nh·∫π"},{"id":"ed20ea853375e5181c942b2bd43f7653","path":"/cai-thien-performance-cua-react-app/","title":"C·∫£i thi·ªán performance c·ªßa React App","desc":"Trong b√†i n√†y, ch√∫ng ta c√πng ƒëi qua c√°c b∆∞·ªõc ƒë·ªÉ fix nh·ªØng issue li√™n quan ƒë·∫øn performance th∆∞·ªùng th·∫•y."},{"id":"d9b7334775e4e76d0ff03ef628719c56","path":"/mot-vai-ung-dung-hay-ho-cua-reduce/","title":"M·ªôt v√†i ·ª©ng d·ª•ng hay ho c·ªßa reduce","desc":"H√£y h·ªçc s·ª≠ d·ª•ng reduce, v∆∞·ª£t qua nh·ªØng v√≠ v·ª• cƒÉn b·∫£n b·∫±ng c·ªông, tr·ª´, nh√¢n, chia"},{"id":"a8c04defa632eb7d8068cb4cac074ce9","path":"/lam-viec-voi-redux-trong-ung-dung-lon/","title":"L√†m vi·ªác v·ªõi Redux trong ·ª©ng d·ª•ng l·ªõn","desc":"C√πng th·∫£o lu·∫≠n xung quanh v·∫•n ƒë·ªÅ ·ª©ng d·ª•ng thi√™n v·ªÅ d·ªØ li·ªáu l·ªõn, r·∫•t l·ªõn"},{"id":"24b7e84e1d0d2990366d4f07829affcb","path":"/nhung-ung-dung-tuyet-voi-cua-renderless-component-trong-vue/","title":"Nh·ªØng ·ª©ng d·ª•ng tuy·ªát v·ªùi c·ªßa Renderless component trong Vue","desc":"C√πng ƒëi·ªÉm qua c√°c ph∆∞∆°ng ph√°p ƒë·ªÉ gi·∫£i quy·∫øt b√†i to√°n 'DRY' trong Vue, c√°c b·∫°n s·∫Ω bi·∫øt th√™m c√°c k·ªπ thu·∫≠t t∆∞∆°ng ƒë·ªëi n√¢ng cao ƒë·ªÉ l√™n b·∫≠t Vue l√£o l√†ng."},{"id":"0183c70aa00c719cd899fece97b05577","path":"/kinh-nghiem-to-chuc-vuex-cho-ung-dung-lon/","title":"Kinh nghi·ªám t·ªï ch·ª©c Vuex cho ·ª©ng d·ª•ng l·ªõn","desc":"N·∫øu b·∫°n ƒë√£ s·ª≠ d·ª•ng th√¥ng th·∫°o Vuex ƒë·ªÉ t·∫°o c√°c ·ª©ng d·ª•ng be b√© nh∆∞ ToDo list, Shopping Cart, h√£y n√¢ng tr√¨nh c·ªßa m√¨nh l√™n b·∫±ng c√°c ·ª©ng d·ª•ng c√≥ nhi·ªÅu d·ªØ li·ªáu h∆°n."},{"id":"8fcb6b1e1a20c4b805d798bcb88aa9dd","path":"/viet-cau-dieu-kien-tot-hon-trong-javascript/","title":"Vi·∫øt c√¢u ƒëi·ªÅu ki·ªán t·ªët h∆°n trong javascript","desc":"Xem x√©t m·ªôt trong nh·ªØng c√¢u l·ªánh ƒë∆∞·ª£c s·ª≠ d·ª•ng nhi·ªÅu nh·∫•t trong l·∫≠p tr√¨nh: c√¢u ƒëi·ªÅu ki·ªán"},{"id":"a488a7f0a330e799deba1b8bc5bb7105","path":"/nang-cao-toc-do-component/","title":"N√¢ng cao t·ªëc ƒë·ªô Component","desc":"B√†i vi·∫øt c·ªßa team l√†m Facebook Ads chia s·∫Ω, c√πng ƒëi·ªÉm qua c√°c v·∫•n ƒë·ªÅ cƒÉn b·∫£n ƒë·ªÉ t·ªëi ∆∞u component"}]}},"context":{}}