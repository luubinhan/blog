{"hash":"185c8bc97550c8db053262169b1d747bb2a28014","data":{"post":{"title":"Hướng dẫn dùng npm link","path":"/huong-dan-dung-npm-link/","date":"2018-11-01","timeToRead":1,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"}],"desc":"Cách dùng npm link để trỏ dependency đến thư mục local","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng\">Sử dụng</a></li>\n<li><a href=\"#debug\">Debug</a></li>\n<li><a href=\"#quay-l%E1%BA%A1i-b%C3%ACnh-th%C6%B0%E1%BB%9Dng\">Quay lại bình thường</a></li>\n</ul>\n<!-- /TOC -->\n<p>Nếu như bạn là tác giả của một module, bạn đang để nó ở một thư mục trên máy local, bạn không có viết test cho module này, bạn dùng chính app đang viết như là cách để test module luôn, tìm thấy lỗi trên module, sau khi sửa lỗi một cách thủ công trong thư mục <code class=\"language-text\">node_modules</code>, copy toàn bộ file qua git repository, rồi commit lên.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/880/0*wvDueqq35PXNE1qA\" alt=\"Cách dùng npm link để trỏ dependency đến thư mục local\"></p>\n<p>Có một cách làm <strong>sạch sẽ</strong> hơn: <code class=\"language-text\">npm link</code></p>\n<h1 id=\"sử-dụng\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sử dụng</h1>\n<p>Để link package, thực hiện bằng 2 bước</p>\n<ol>\n<li>Tạo một shortcut trên dependency với <code class=\"language-text\">npm link</code>. Shortcut này trỏ tới một thư một khác trên máy.</li>\n<li>Khai báo trên project sử dụng shortcut này, <code class=\"language-text\">npm link some-dep</code></li>\n</ol>\n<pre class=\"language-powershell\"><code class=\"language-powershell\">cd ~<span class=\"token operator\">/</span>projects<span class=\"token operator\">/</span>some<span class=\"token operator\">-</span>dep\nnpm link  <span class=\"token comment\"># Step 1.</span>\ncd ~<span class=\"token operator\">/</span>projects<span class=\"token operator\">/</span>my<span class=\"token operator\">-</span>app\nnpm link some<span class=\"token operator\">-</span>dep  <span class=\"token comment\"># Step 2.</span></code></pre>\n<p><img src=\"https://cdn-images-1.medium.com/max/880/0*x8jMbWUMifff9Eao\" alt=\"Cách dùng npm link để trỏ dependency đến thư mục local\"></p>\n<p>Bạn có thể sửa, transpile, chạy test, commit bình thường trên <code class=\"language-text\">some-dep</code>. Khi chạy <code class=\"language-text\">my-app</code> nó sẽ chạy với những thay đổi đã thực hiện trên <code class=\"language-text\">some-dep</code>. Shortcut đã tạo ra sẽ ko được commit lên git, nó chỉ có hiệu lực trên local</p>\n<h1 id=\"debug\"><a href=\"#debug\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Debug</h1>\n<p>Nếu đang sử dụng VSCode và muốn set breakpoint trong <code class=\"language-text\">some-dep</code>, trên debugger của <code class=\"language-text\">my-app</code>, bạn cần thiết đặt trong <code class=\"language-text\">launch.json</code></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"runtimeArgs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"--preserve-symlinks\"</span>\n<span class=\"token punctuation\">]</span></code></pre>\n<p><img src=\"https://cdn-images-1.medium.com/max/880/0*H1TB22svP8POFP8p\" alt=\"Cách dùng npm link để trỏ dependency đến thư mục local\"></p>\n<h1 id=\"quay-lại-bình-thường\"><a href=\"#quay-l%E1%BA%A1i-b%C3%ACnh-th%C6%B0%E1%BB%9Dng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Quay lại bình thường</h1>\n<p>Nếu không còn muốn sử dụng bản local của <code class=\"language-text\">some-dep</code> nửa, <code class=\"language-text\">npm unlink</code> chăng? Cũng được, nhưng thật ra nó sẽ chạy <code class=\"language-text\">npm uninstall</code>, nghĩa là bạn phải uninstall rồi install lại từ đầu</p>\n<pre class=\"language-powershell\"><code class=\"language-powershell\">cd ~<span class=\"token operator\">/</span>projects<span class=\"token operator\">/</span>my<span class=\"token operator\">-</span>app\nnpm uninstall <span class=\"token operator\">--</span>no<span class=\"token operator\">-</span>save some<span class=\"token operator\">-</span>dep &amp;&amp; npm install </code></pre>\n<p>Nếu xóa shortcut trên <code class=\"language-text\">some-dep</code> sẽ an toàn hơn, không đụng tới dependency của <code class=\"language-text\">my-app</code></p>\n<pre class=\"language-powershell\"><code class=\"language-powershell\">cd ~<span class=\"token operator\">/</span>projects<span class=\"token operator\">/</span>some<span class=\"token operator\">-</span>dep\nnpm uninstall  <span class=\"token comment\"># Delete global symlink</span></code></pre>\n<p><a href=\"https://medium.com/dailyjs/how-to-use-npm-link-7375b6219557\" target=\"_blank\" rel=\"noopener noreferrer\">Understanding npm-link</a></p>\n","cover_image":"","related":[{"id":"4489faa894256f0d6beb4e50c82ec5c7","path":"/huong-dan-inspect-animation-voi-chrome-dev-tools/","title":"Hướng dẫn inspect animation với Chrome DevTools","desc":"Học cách sử dụng công cụ inspection animation trong Chrome DevTools rất hữu ích khi làm animate."},{"id":"82094eb3a75f8e7cc086b97fe788ec2e","path":"/huong-dan-tao-mot-package-publish-no-len-npm/","title":"Hướng dẫn tạo một package, publish nó lên npm","desc":"Nếu bạn có một package nào đó muốn chia sẽ cùng mọi người trên npm, thì đây là cách bạn publish package make-by-me như vậy lên npm"},{"id":"86b4bdaecfd311e0ba6c74a0259cacf8","path":"/huong-dan-viet-unit-test-trong-react/","title":"Hướng dẫn viết unit test trong React","desc":"Một bài viết tổng hợp, sẽ cố gắng đề cập càng nhiều càng tốt các vấn đề có thể gặp khi đụng đến unit test với React."},{"id":"0f44ee174018384de200da37b4aac6d7","path":"/huong-dan-su-dung-cong-cu-de-check-contrast-trong-chrome/","title":"Hướng dẫn sử dụng công cụ để check contrast trong Chrome","desc":"Tip siêu ngắn để kiểm tra contrast có hợp nhãn với Chrome không"}]}},"context":{}}