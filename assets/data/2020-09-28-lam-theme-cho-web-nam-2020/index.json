{"hash":"781cb6d1d05b3001a1fbd40f8663d969bc85d117","data":{"post":{"title":"Hướng dẫn dùng biến trong CSS để làm dark/light mode","path":"/2020-09-28-lam-theme-cho-web-nam-2020/","slug":"2020-09-28-lam-theme-cho-web-nam-2020","date":"2020-09-28","timeToRead":2,"tags":[{"id":"css","title":"css","path":"/tag/css/"},{"id":"ui-ux","title":"ui-ux","path":"/tag/ui-ux/"}],"desc":"Nếu bạn cũng như mình, mặc kệ những đứa xài IE11, mình chỉ hỗ  trợ cho đối tượng người sử dụng là những người trẻ thông minh, xài Edge, xài Chrome, xài Firefox, đọc ngay bài viết này mình chỉ cách làm.","content":"<p>Cách đây mười năm, nếu bạn hỏi mình có thể đặt biến trong CSS thì câu trả lời sẽ là KHÔNG, bạn cần viết bằng các ngôn ngữ như SCSS, LESS để có thể xài biến.</p>\n<blockquote>\n<p>Còn trong năm 2020, thì câu trả lời sẽ là CÓ.</p>\n</blockquote>\n<p>Tại sao chúng ta lại muốn đặt biến màu sắc kích thước? Để khi chúng ta muốn thay đổi bộ mặt một website từ xanh lá chuối sang đỏ rực lửa, chỉ cần \"búng tay\" là có liền.</p>\n<p>Ví dụ chúng ta theo trào lưu \"light và dark theme\" cho website, user có thể chọn kiểu sáng-sạch-sẽ hay đen-đuông-đuốc</p>\n<p><img src=\"https://storage.googleapis.com/spec-host-backup/mio-design%2Fassets%2F11xwGmImm24QEBIRv6a0NzhW-wTc9rFh6%2Fdarktheme-darktheme-usage-availability-toggle.png\"></p>\n<p>Cú pháp đặt biến trong CSS, bắt đầu bằng dấu <code class=\"language-inline-text\">--</code>, sau đó là tên biến</p>\n<div class=\"gridsome-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">:root</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">--my-background-color</span><span class=\"token punctuation\">:</span> #fff<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--heading-1-font-size</span><span class=\"token punctuation\">:</span> 15em<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--another-variable</span><span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Ví dụ sử dụng những biến đã khai báo</p>\n<div class=\"gridsome-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">h1</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--my-background-color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--heading-1-font-size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Chúng ta đưa tất cả những giá trị cần thay đổi khi switch qua lại giữa 2 mode dark/light vào các biến số bên trong <code class=\"language-inline-text\">body</code></p>\n<div class=\"gridsome-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">// Light theme\nbody</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">--bg-color</span><span class=\"token punctuation\">:</span> #F3F7F9<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--bg-content-color</span><span class=\"token punctuation\">:</span> #fff<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--bg-code</span><span class=\"token punctuation\">:</span> #fffbf3<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--body-color</span><span class=\"token punctuation\">:</span> #444<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--title-color</span><span class=\"token punctuation\">:</span> #111<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--link-color</span><span class=\"token punctuation\">:</span> #6b17e6<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--border-color</span><span class=\"token punctuation\">:</span>  <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span>0<span class=\"token punctuation\">,</span>0<span class=\"token punctuation\">,</span>.1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--space</span><span class=\"token punctuation\">:</span> 3.5rem<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--content-width</span><span class=\"token punctuation\">:</span> 860px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--header-height</span><span class=\"token punctuation\">:</span> 80px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">--radius</span><span class=\"token punctuation\">:</span> 5px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Khi thay đổi giá trị sang dark mode</p>\n<div class=\"gridsome-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">// Dark theme\nbody[data-theme=\"dark\"]</span> <span class=\"token punctuation\">{</span>\n \t<span class=\"token property\">--bg-color</span><span class=\"token punctuation\">:</span> #0D2538<span class=\"token punctuation\">;</span>\n \t<span class=\"token property\">--bg-content-color</span><span class=\"token punctuation\">:</span> #0f2d44<span class=\"token punctuation\">;</span>\n \t<span class=\"token property\">--bg-code</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span>0<span class=\"token punctuation\">,</span>0<span class=\"token punctuation\">,</span>.3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \t<span class=\"token property\">--border-color</span><span class=\"token punctuation\">:</span>  <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>255<span class=\"token punctuation\">,</span>255<span class=\"token punctuation\">,</span>255<span class=\"token punctuation\">,</span>.1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span>\n \t<span class=\"token property\">--body-color</span><span class=\"token punctuation\">:</span> #ced8de<span class=\"token punctuation\">;</span>\n \t<span class=\"token property\">--title-color</span><span class=\"token punctuation\">:</span> #fff<span class=\"token punctuation\">;</span>\n \t<span class=\"token property\">--link-color</span><span class=\"token punctuation\">:</span> #af9cef<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Chúng ta sẽ thêm một số hàm cần thiết vào trong <code class=\"language-inline-text\">window</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Mượn xài đỡ của overreacted.io</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">__onThemeChange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">setTheme</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">newTheme</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        window<span class=\"token punctuation\">.</span>__theme <span class=\"token operator\">=</span> newTheme<span class=\"token punctuation\">;</span>\n        preferredTheme <span class=\"token operator\">=</span> newTheme<span class=\"token punctuation\">;</span>\n        document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-theme'</span><span class=\"token punctuation\">,</span> newTheme<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">__onThemeChange</span><span class=\"token punctuation\">(</span>newTheme<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">var</span> preferredTheme<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        preferredTheme <span class=\"token operator\">=</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'theme'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n\n    window<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">__setPreferredTheme</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">newTheme</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setTheme</span><span class=\"token punctuation\">(</span>newTheme<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'theme'</span><span class=\"token punctuation\">,</span> newTheme<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">var</span> darkQuery <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">matchMedia</span><span class=\"token punctuation\">(</span><span class=\"token string\">'(prefers-color-scheme: dark)'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    darkQuery<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">__setPreferredTheme</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>matches <span class=\"token operator\">?</span> <span class=\"token string\">'dark'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'light'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">setTheme</span><span class=\"token punctuation\">(</span>preferredTheme <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>darkQuery<span class=\"token punctuation\">.</span>matches <span class=\"token operator\">?</span> <span class=\"token string\">'dark'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'light'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Thao tác cuối cùng là một đoạn JS để trigger việc đổi mode</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Ví dụ hàm xử lý onClickChangeTheme sẽ được gắn vào một button</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">onClickChangeTheme</span><span class=\"token punctuation\">(</span>mode <span class=\"token operator\">=</span> <span class=\"token string\">'dark'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">__setPreferredTheme</span><span class=\"token punctuation\">(</span>mode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Chúng ta cũng có thể check được theme mà user đã chọn trước đó</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>__theme <span class=\"token operator\">==</span> <span class=\"token string\">'dark'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// làm gì đó thật vi diệu</span></code></pre></div>\n<p>Kỹ thuật là như vậy, còn nếu bạn hỏi mình sẽ cập nhập trang blog này cho có 2 mode light/dark theme? Mình sẽ không làm, một số website như trang của mình thì việc switch màu như vậy không đem lại nhiều giá trị cho người đọc.</p>\n<p>Bài viết của vuilaptrinh.com</p>\n","cover_image":"","related":[{"id":"495d1b2403bab34818b94aa36a7ac08d","path":"/2018-11-01-gioi-thieu-npm-link/","title":"Hướng dẫn dùng npm link","desc":"Cách dùng npm link để trỏ dependency đến thư mục local"},{"id":"936bd0d7d301376494576278881f51ac","path":"/2018-03-09-huong-dan-su-dung-bien-enviroment-nhu-the-nao/","title":"Sử dụng biến Node Environment","desc":"Biến environment là một phần cơ bản cần biết khi làm việc với Node"},{"id":"67b6f325941d1f641ba6144fc210f796","path":"/2020-10-07-ban-co-the-lam-gi-voi-bien-css/","title":"3 điều bạn có thể không biết về biến trong CSS","desc":"Bài này chúng ta sẽ đi qua ba thứ chúng ta có thể làm được với biến trong css, có thể bạn chưa biết"},{"id":"2bda1aea7bf5ac181ed1d3a656b277f5","path":"/2020-10-26-huong-dan-su-dung-usememo-react/","title":"Hướng dẫn sử dụng useMemo trong React","desc":"Nếu bạn thấy app của mình bắt đầu chậm, đó là lúc bạn nên bắt đầu cân nhắc các phương pháp để tối ưu tốc độ và đọc bài viết này."}]}},"context":{}}