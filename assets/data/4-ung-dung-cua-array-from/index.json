{"hash":"bb9d7e5a46c25f220b2fd3c7f9d26cdf170dba2b","data":{"post":{"title":"4 ứng dụng của Array.from","path":"/4-ung-dung-cua-array-from/","date":"2019-12-24","timeToRead":2,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"}],"desc":"Vài ứng dụng nhỏ của hàm Array.from","content":"<p><code class=\"language-text\">Array.from</code> được dùng để convert giá trị về kiểu <code class=\"language-text\">Array</code>, cú pháp như sau</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token known-class-name class-name\">Array</span><span class=\"token punctuation\">.</span><span class=\"token keyword module\">from</span><span class=\"token punctuation\">(</span>arrayLikeOrIterable <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> mapFunction <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> thisArg<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Có 3 tham số có thể truyền vào, 2 thằng sau không bắt buộc</p>\n<ul>\n<li><code class=\"language-text\">arrayLikeOrIterable</code> giá trị muốn chuyển</li>\n<li><code class=\"language-text\">mapFunction(item, index)</code> function sẽ chạy qua toàn bộ các phần tử</li>\n<li><code class=\"language-text\">thisArg</code> được sử dụng như giá trị <code class=\"language-text\">this</code> bên trong <code class=\"language-text\">mapFunction</code></li>\n</ul>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> someNumbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token string\">\"0\"</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"1\"</span><span class=\"token operator\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> length<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span>\n<span class=\"token known-class-name class-name\">Array</span><span class=\"token punctuation\">.</span><span class=\"token keyword module\">from</span><span class=\"token punctuation\">(</span>someNumbers<span class=\"token punctuation\">,</span> <span class=\"token parameter\">value</span> <span class=\"token arrow operator\">=></span> value <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// => [20, 30]</span></code></pre>\n<h2 id=\"ứng-dụng-1-khởi-tạo-một-dãy-số\"><a href=\"#%E1%BB%A9ng-d%E1%BB%A5ng-1-kh%E1%BB%9Fi-t%E1%BA%A1o-m%E1%BB%99t-d%C3%A3y-s%E1%BB%91\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ứng dụng 1: khởi tạo một dãy số</h2>\n<p>Khởi tạo dãy số từ 0 đến giá trị truyền vào</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">range</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">end</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token known-class-name class-name\">Array</span><span class=\"token punctuation\">.</span><span class=\"token keyword module\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token operator\">:</span> end <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> index<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// => [0,1,2,3]</span></code></pre>\n<h2 id=\"ứng-dụng-2-tạo-một-mảng-gồm-n-phần-tử-giống-nhau\"><a href=\"#%E1%BB%A9ng-d%E1%BB%A5ng-2-t%E1%BA%A1o-m%E1%BB%99t-m%E1%BA%A3ng-g%E1%BB%93m-n-ph%E1%BA%A7n-t%E1%BB%AD-gi%E1%BB%91ng-nhau\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ứng dụng 2: Tạo một mảng gồm n phần tử giống nhau</h2>\n<p>Input: số lượng phần tử, giá trị.\nOutput: toàn một mảng n phần tử giống với giá trị đã cho.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> <span class=\"token number\">3</span>\n<span class=\"token keyword\">const</span> init <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Array</span><span class=\"token punctuation\">.</span><span class=\"token keyword module\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> init <span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// => [0,0,0]</span></code></pre>\n<p>Thật ra chúng ta cũng có thể viết bằng <code class=\"language-text\">Array.fill()</code> dễ nhìn hơn</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> length <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> init   <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Array</span><span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fill</span><span class=\"token punctuation\">(</span>init<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<h2 id=\"ứng-dụng-3-sao-chép-một-array\"><a href=\"#%E1%BB%A9ng-d%E1%BB%A5ng-3-sao-ch%C3%A9p-m%E1%BB%99t-array\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ứng dụng 3: sao chép một array</h2>\n<p>Nếu chỉ đơn giản là sao chép array thì ta có thể viết</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> cloneArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token spread operator\">...</span>array1<span class=\"token punctuation\">,</span> array2<span class=\"token punctuation\">]</span></code></pre>\n<p>Nhưng nếu <code class=\"language-text\">array1</code> lại chứa một array bên trong đó thì sao? Hàm đệ quy để chép <em>tuốt</em></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">recursiveClone</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">val</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token known-class-name class-name\">Array</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">isArray</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token known-class-name class-name\">Array</span><span class=\"token punctuation\">.</span><span class=\"token keyword module\">from</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">,</span> recursiveClone<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> val<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'one'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'two'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'three'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> numbersClone <span class=\"token operator\">=</span> <span class=\"token function\">recursiveClone</span><span class=\"token punctuation\">(</span>numbers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nnumbersClone<span class=\"token punctuation\">;</span> <span class=\"token comment\">// => [[0, 1, 2], ['one', 'two', 'three']]</span>\nnumbers<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> numbersClone<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// => false</span></code></pre>\n<h2 id=\"ứng-dụng-4-tạo-một-array-không-trùng-lặp\"><a href=\"#%E1%BB%A9ng-d%E1%BB%A5ng-4-t%E1%BA%A1o-m%E1%BB%99t-array-kh%C3%B4ng-tr%C3%B9ng-l%E1%BA%B7p\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ứng dụng 4: Tạo một array không trùng lặp</h2>\n<p>Thật ra thì bản thân <code class=\"language-text\">Array.from</code> không làm được, chúng ta dùng <code class=\"language-text\">new Set()</code> rồi mới sau đó chuyển ngược lại về array</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">unique</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">arr</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token known-class-name class-name\">Array</span><span class=\"token punctuation\">.</span><span class=\"token keyword module\">from</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Set</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">unique</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// => [1, 2, 3]</span></code></pre>\n","cover_image":""}},"context":{}}