{"hash":"a024fab2966897089cf72f0b270a7db411a685ed","data":{"post":{"title":"Bức ảnh chế thú vị về so sánh trong Javascript","path":"/buc-anh-che-thu-vi-ve-so-sanh-trong-javascript/","slug":"/2019-09-15-anh-che-javascript","date":"2019-09-15","timeToRead":1,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"},{"id":"hoc-thuat","title":"hoc-thuat","path":"/tag/hoc-thuat/"}],"desc":"Qua bức ảnh chế này, chúng ta biết được nhiều điều hay ho về so sánh trong javascript","content":"<p>Bộ ảnh thú vị mô tả kể chuyện so sánh trong Javascript, vô tình lụm xem được cái hình này trên Reddit</p>\n<p><img src=\"https://miro.medium.com/max/500/0*kjcbVX8Y9TFoHGDO.png\" alt=\"Nguyên tắc bắt cầu javascript\"></p>\n<p>Bạn có thể copy nguyên đoạn code này paste vào trình duyệt để xem kết quả</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token number\">0</span> <span class=\"token operator\">==</span> <span class=\"token string\">'0'</span>\n<span class=\"token number\">0</span> <span class=\"token operator\">==</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// Nguyên tắc bắt cầu có đúng?</span>\n\n<span class=\"token string\">'0'</span> <span class=\"token operator\">==</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></code></pre>\n<p>Chuyện gì đã xảy ra vậy?</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token number\">0</span> <span class=\"token operator\">==</span> <span class=\"token string\">'0'</span> <span class=\"token comment\">// => true</span></code></pre>\n<p>Với các ngôn ngữ lập trình khác thì chưa biết, nhưng với javascript <code class=\"language-text\">==</code> sẽ tự ý <strong>chuyển 2 giá trị muốn so sánh về cùng một kiểu</strong>, hay người ta vẫn gọi là ko quan tâm đến kiểu dữ liệu khi so sánh.</p>\n<p>Trong nhiều trường hợp chúng ta cũng có thể sử dụng cách so sánh <code class=\"language-text\">==</code> để tiện, javascript tự động chuyển về một kiểu, tuy nhiên sẽ ko khuyến khích cách này</p>\n<p>Theo như <a href=\"https://www.ecma-international.org/ecma-262/5.1/#sec-11.9.3\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">specify</a></p>\n<blockquote>\n<p>Nếu x = Number, y = String, trả về x == ToNumber(y),</p>\n</blockquote>\n<p>Nó đưa giá trị bên phải về number mà không báo cho ai biết hết</p>\n<p><img src=\"https://miro.medium.com/max/581/0*njs7mQoUYjWG13Sm.jpeg\" alt=\"Tự động convert string sang number\"></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token number\">0</span> <span class=\"token operator\">==</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// => true</span></code></pre>\n<blockquote>\n<p>Nếu x là String hoặc Number, y là Object, trả về x == ToPrimitive(y)</p>\n</blockquote>\n<p><img src=\"https://miro.medium.com/max/618/0*qN97ouGakJx0Gthb.jpg\" alt=\"Array là object\"></p>\n<p>Đúng! Array trong javascript cũng là object</p>\n<p>ToPrimitive(y) ở đây, JS sẽ gọi vào hàm <code class=\"language-text\">.toString</code> để convert về kiểu primitive, trường hợp là array nó nối toàn bộ giá trị trong array thành chuỗi</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => \"1,2,3\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'world'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => \"hello,world\"</span>\n<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => \"\"</span></code></pre>\n<p>Toàn bộ những điều vô lý này đã được đưa vào <a href=\"https://www.ecma-international.org/ecma-262/5.1/#sec-8.12.8\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">văn bản chính quy!</a></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string\">'0'</span> <span class=\"token operator\">==</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></code></pre>\n<p><img src=\"https://miro.medium.com/max/500/0*69mYzhumogiPLSh6.png\" alt=\"So sánh string và array\"></p>\n<p>Cứ theo nguyên tắc đã quy định mà làm</p>\n<blockquote>\n<p>Nếu x là String hoặc Number, y là Object, trả về x == ToPrimitive(y)</p>\n</blockquote>\n<p>Bước một <code class=\"language-text\">ToPrimitive([])</code> => chúng ta sẽ trở thành so sánh <code class=\"language-text\">&#39;0&#39; == &quot;&quot;</code>, khác nhau rõ ràng hé.</p>\n","cover_image":"","related":[{"id":"c9b33110e10e3beff32157783f0b7e74","path":"/nguyen-ly-nen-tang-cua-lap-trinh-function/","title":"Nguyên lý nền tảng của lập trình function","desc":"Khái niệm ngàn người biết, bạn cũng phải biết"},{"id":"95442f9784ed9952265cdb585404dc96","path":"/lam-quen-voi-kien-truc-serverless/","title":"Làm quen với kiến trúc Serverless","desc":"Mình không phải chuyên gia trong lĩnh vực này, nghiên cứu để biết thêm, thấy cũng hay, chia sẽ cho mọi người cùng đọc"},{"id":"c4bb677484b7819976aa13db2c48fbab","path":"/gioi-thieu-typeof-trong-javascript-cho-nguoi-moi-bat-dau/","title":"Giới thiệu typeof trong Javascript cho người mới bắt đầu","desc":"Hiểu cách hoạt động của typeof, một số vấn đề liên quan đến check type"}]}},"context":{}}