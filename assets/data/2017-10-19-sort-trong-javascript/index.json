{"hash":"5d40f4d8ed43f512e4021e3d8491c32126632fe7","data":{"post":{"title":"Sort trong javascript","path":"/2017-10-19-sort-trong-javascript/","slug":"/2017-10-19-sort-trong-javascript","date":"2017-10-19","timeToRead":2,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"}],"desc":"Nếu nghĩ đã hiểu rõ hàm Array.sort() trong javascript, hãy nghĩ lại!","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#v%E1%BA%ADy-mu%E1%BB%91n-sort-m%E1%BA%A3ng-s%E1%BB%91-l%C3%A0m-sao-\">Vậy muốn <code class=\"language-inline-text\">sort</code> mảng số làm sao ?</a></li>\n<li><a href=\"#v%C3%A0-h%C6%A1n-th%E1%BA%BF-n%E1%BB%AFa\">Và hơn thế nữa</a></li>\n</ul>\n<!-- /TOC -->\n<p>Dù cho đang ở level nào của javascript thì trước sau, ít nhiều cũng đụng tới vấn để <strong>sort</strong> một mảng trong javascript, tài liệu trên mozila có câu này hết sức nguy hiểm <strong>sort is not necessarily stable.</strong>, giờ thử xem tại sao gọi là không <strong>stable</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">33</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">98</span><span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span>\nmyArray<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// [ 2, 25, 33, 4, 98 ]</span></code></pre></div>\n<p>Vâng, <strong>25 > 33 > 4</strong> </p>\n<p>Mảng số này sẽ được javascript sort theo thứ tự alphabet, mỗi giá trị số được đưa về <code class=\"language-inline-text\">string</code> để so sánh.</p>\n<p>Hàm <code class=\"language-inline-text\">sort</code> có thể số truyền vào là <code class=\"language-inline-text\">function</code> dùng để so sánh, nếu bạn không đưa hàm này vào, mặc định nó sẽ convert giá trị cần so sánh về <code class=\"language-inline-text\">string</code> và <strong>so sánh mã unicode</strong> của này</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> numbers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">]</span>\nnumbers<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// [80, 9]</span>\n\n<span class=\"token keyword\">const</span> strings <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'80'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'9'</span><span class=\"token punctuation\">]</span>\nstrings<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ['80', '9']</span></code></pre></div>\n<p>Như vậy thì viết như thế này cũng hoàn toàn hợp lệ</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> emojis <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"😍\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"😂\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"😰\"</span><span class=\"token punctuation\">]</span>\nemojis<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// [\"😂\", \"😍\", \"😰\"]</span>\n\n<span class=\"token keyword\">const</span> wtfJavaScript <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">390</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"😂\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"2325\"</span><span class=\"token punctuation\">]</span>  \nwtfJavaScript<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// [1, \"2325\", 390, \"😂\"]</span></code></pre></div>\n<h2 id=\"vậy-muốn-sort-mảng-số-làm-sao-\"><a href=\"#v%E1%BA%ADy-mu%E1%BB%91n-sort-m%E1%BA%A3ng-s%E1%BB%91-l%C3%A0m-sao-\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Vậy muốn <code class=\"language-inline-text\">sort</code> mảng số làm sao ?</h2>\n<p>Như đã đề cập, cần đưa một hàm dùng để so sánh, hàm này đặc điểm như sau</p>\n<ul>\n<li>Nếu giá trị trả về của hàm <code class=\"language-inline-text\">compareFunction(a,b)</code> &#x3C; 0, giá trị a sẽ đứng trước b</li>\n<li>Nếu giá trị trả về = 0, a và b bằng nhau</li>\n<li>Giá trị trả về > 0, a đứng sau b</li>\n</ul>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myArray <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">33</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">98</span><span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span>\nmyArray<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">-</span> b<span class=\"token punctuation\">)</span> <span class=\"token comment\">// [ 2, 4, 25, 33, 98 ]</span></code></pre></div>\n<h2 id=\"và-hơn-thế-nữa\"><a href=\"#v%C3%A0-h%C6%A1n-th%E1%BA%BF-n%E1%BB%AFa\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Và hơn thế nữa</h2>\n<p>ECMAScript không đưa ra chuẩn mực nào về thuật toán cho cách <code class=\"language-inline-text\">sort</code>, nghĩa là Javascript engine muốn áp dụng thuật toán nào thì tùy nó, Google's V8 (Javascript engine của Chrome) và NodeJS sử dụng thuật toán <code class=\"language-inline-text\">quick sort</code> và kết quả thì không hẳn là chính xác 100%. Do đó nên nhớ là <code class=\"language-inline-text\">sort</code> trên những trình duyệt khác nhau cũng có khả năng cho kết quả khác nhau nếu nó dùng khác Javascript Engine.</p>\n<p>Nếu rảnh, và có trình, thì nên tự implement một sort function để xài, một số thuật toán sort có thể nghiên cứu như <code class=\"language-inline-text\">InsertionSort</code>, <code class=\"language-inline-text\">MergeSort</code>, <code class=\"language-inline-text\">QuickSort</code></p>\n","cover_image":"","related":[{"id":"c8bb2cd2441cc63f232742b8d834b418","path":"/2018-11-13-copy-mot-object-trong-javascript/","title":"Copy object trong javascript","desc":"Luận bàn các cách mà chúng ta copy một object trong javascript, shallow copy và deep copy"},{"id":"fc54c01ac1f704671150e01ae52f8925","path":"/2018-11-16-cau-dieu-kien-trong-javascript-phan-nang-cao/","title":"Câu điều kiện trong javascript","desc":"Nắm vững conditional expression trong javascript để viết code sạch sẽ hơn"},{"id":"882ad6f29150ab1a42436ae7952bae27","path":"/2018-12-02-tao-array-trong-javascript/","title":"Tạo Array trong Javascript","desc":"Cùng xem qua các cách để tạo một array mới"},{"id":"bb5b6842e1c4dfe15bf0b527c27b770d","path":"/2018-06-24-huong-dan-lam-viec-voi-console-trong-javascript/","title":"Làm việc với console trong javascript","desc":"Một web developer chân chính là người biết sử dụng console.log :D. Tuy nhiên cũng nên biết rằng console nó còn rất nhiều phương thức khác nữa"}]}},"context":{}}