{"hash":"2b72ac8f4c6f1c3ca16ddcb79195ccd9af4224b8","data":{"post":{"title":"Viáº¿t Unit Test cho Vue component cho ngÆ°á»i má»›i báº¯t Ä‘áº§u","path":"/viet-unit-test-cho-vue-component-cho-nguoi-moi-bat-dau/","slug":"/2019-10-05-viet-unit-test-cho-vue-component-cho-nguoi-moi-bat-dau","date":"2019-10-05","timeToRead":8,"tags":[{"id":"vuejs","title":"vuejs","path":"/tag/vuejs/"}],"desc":"CÃ¡i nhÃ¬n vá» unit test cho component, test cÃ¡i gÃ¬, cÃ¡i gÃ¬ khÃ´ng test khi viáº¿t unit test","content":"<!-- TOC -->\n<ul>\n<li>\n<p><a href=\"#x%c3%a1c-%c4%91%e1%bb%8bnh-nh%e1%bb%afng-g%c3%ac-c%e1%ba%a7n-test\">XÃ¡c Ä‘á»‹nh nhá»¯ng gÃ¬ cáº§n test</a></p>\n<ul>\n<li><a href=\"#test-c%c3%a1i-g%c3%ac\">Test cÃ¡i gÃ¬?</a></li>\n<li><a href=\"#c%c3%a1i-g%c3%ac-kh%c3%94ng-c%e1%ba%a6n-test\">CÃ¡i gÃ¬ KHÃ”NG Cáº¦N test</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#v%c3%ad-d%e1%bb%a5\">VÃ­ dá»¥</a></p>\n<ul>\n<li><a href=\"#ph%c3%a2n-t%c3%adch\">PhÃ¢n tÃ­ch</a></li>\n<li>\n<p><a href=\"#unit-test\">Unit test</a></p>\n<ul>\n<li><a href=\"#test-case-1-render-html\">Test case 1: Render HTML</a></li>\n<li><a href=\"#test-case-2-router-login-%c4%91%c6%b0%e1%bb%a3c-g%e1%bb%8di-khi-click-button-m%c3%a0-ch%c6%b0a-%c4%91%c4%83ng-nh%e1%ba%adp\">Test case 2: router login Ä‘Æ°á»£c gá»i khi click button mÃ  chÆ°a Ä‘Äƒng nháº­p</a></li>\n<li><a href=\"#test-case-3-vuex-%c4%91%c6%b0%e1%bb%a3c-g%e1%bb%8di-khi-user-%c4%91%c3%a3-%c4%91%c4%83ng-nh%e1%ba%adp-v%c3%a0-click-button\">Test case 3: vuex Ä‘Æ°á»£c gá»i khi user Ä‘Ã£ Ä‘Äƒng nháº­p vÃ  click button</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#k%e1%ba%bft\">Káº¿t</a></li>\n</ul>\n<!-- /TOC -->\n<p>Khi viáº¿t unit test, mÃ¬nh tháº¥y khÃ´ng cáº§n bá» ra quÃ¡ nhiá»u thá»i gian Ä‘á»ƒ cover 100% cÃ¡c case sáº½ cÃ³, nhÆ°ng váº«n Ä‘áº£m báº£o Ä‘á»§ cÃ¡c trÆ°á»ng há»£p cáº§n thiáº¿t. Váº­y cÃ¢u há»i lÃ : nhÆ° tháº¿ nÃ o lÃ  <strong>Ä‘á»§</strong>? ÄÃ¢y lÃ  nhá»¯ng quan Ä‘iá»ƒm ráº¥t cÃ¡ nhÃ¢n, náº¿u báº¡n nÃ o Ä‘Ã£ lÃ  master of unit test rá»“i thÃ¬ mÃ¬nh hy vá»ng cÃ³ Ä‘Æ°á»£c sá»­ chá»‰ giÃ¡o.</p>\n<p>MÃ¬nh xem nhÆ° báº¡n Ä‘Ã£ biáº¿t chÃºt Ã­t vá» <a href=\"https://jestjs.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Jest</a> vÃ  <a href=\"https://vue-test-utils.vuejs.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Vue Test Utils</a>, Ä‘Ã£ cháº¡y vue-cli Ä‘á»ƒ setup má»™t dá»± Ã¡n má»›i vá»›i Jest</p>\n<hr>\n<p>ChÃºng ta sáº½ há»c Ä‘Æ°á»£c gÃ¬</p>\n<ul>\n<li>Táº¡i sao viáº¿t test, má»¥c Ä‘Ã­ch cá»§a viáº¿t test</li>\n<li>XÃ¡c Ä‘á»‹nh cÃ¡i nÃ o cáº§n vÃ  khÃ´ng cáº§n test</li>\n<li>VÃ­ dá»¥ Ä‘á»ƒ thá»±c hÃ nh</li>\n</ul>\n<hr>\n<h2 id=\"xÃ¡c-Ä‘á»‹nh-nhá»¯ng-gÃ¬-cáº§n-test\"><a href=\"#x%C3%A1c-%C4%91%E1%BB%8Bnh-nh%E1%BB%AFng-g%C3%AC-c%E1%BA%A7n-test\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>XÃ¡c Ä‘á»‹nh nhá»¯ng gÃ¬ cáº§n test</h2>\n<h3 id=\"test-cÃ¡i-gÃ¬\"><a href=\"#test-c%C3%A1i-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Test cÃ¡i gÃ¬?</h3>\n<p>Khi chÃºng ta viáº¿t test cho má»™t component, báº¯t Ä‘áº§u vá»›i nhá»¯ng public interface cá»§a component Ä‘Ã³. Äá»«ng nghe Ä‘áº¿n chá»© <em>public interface</em> mÃ  rung sá»£, nÃ³ chá»‰ lÃ  nhá»¯ng gÃ¬ component Ä‘Ã³ tÆ°Æ¡ng tÃ¡c vá»›i <em>tháº¿ giá»›i</em> bÃªn ngoÃ i. Náº¿u báº¡n viáº¿t <em>hÆ°á»›ng dáº«n sá»­ dá»¥ng</em> Ä‘á»ƒ ngÆ°á»i khÃ¡c xÃ i component Ä‘Ã³, báº¡n viáº¿t nhá»¯ng gÃ¬, Ä‘Ã³ lÃ  nhá»¯ng thá»© báº¡n sáº½ test, component nháº­n vÃ o nhá»¯ng gÃ¬ vÃ  output ra nhá»¯ng gÃ¬.</p>\n<p><img src=\"https://firebasestorage.googleapis.com/v0/b/vue-mastery.appspot.com/o/flamelink%2Fmedia%2F1569450315452_inputs%20%26%20outputs.png?alt=media&#x26;token=57071fae-3a80-46aa-a32a-7a7d51897b89\"></p>\n<p><strong>Äáº§u vÃ o</strong> cá»§a component</p>\n<ul>\n<li>props</li>\n<li>tÆ°Æ¡ng tÃ¡c cá»§a user, click, kÃ©o-tháº£</li>\n<li>store</li>\n<li>route params\n<strong>Äáº§u ra</strong> cá»§a component</li>\n<li>render ra DOM</li>\n<li>táº¡o ra sá»± kiá»‡n nÃ o Ä‘Ã³</li>\n<li>thay Ä‘á»•i route</li>\n<li>cáº­p nháº­p láº¡i store</li>\n</ul>\n<p>Khi táº­p trung vÃ o nhá»¯ng public interface nÃ y nghÄ©a lÃ  chÃºng ta cÅ©ng khÃ´ng táº­p trung vÃ o logic bÃªn trong cá»§a component, tá»«ng dÃ²ng code cá»§a component Ä‘Ã³ cháº¡y ra sao. Nghe cÃ³ váº» khÃ´ng há»£p lÃ½, nhÆ°ng unit test chá»‰ táº­p trung vÃ o káº¿t quáº£ tráº£ vá», khÃ´ng quan tÃ¢m <strong>lÃ m tháº¿ nÃ o</strong> Ä‘á»ƒ cÃ³ káº¿t quáº£ Ä‘Ã³.</p>\n<p>Component <code class=\"language-inline-text\">&lt;RandomNumberGenerator/></code> bÃªn dÆ°á»›i, nÃ³ sinh ra trong cuá»™c Ä‘á»i nÃ y lÃ  Ä‘á»ƒ táº¡o má»™t con sá»‘ ngáº«u nhiÃªn náº±m trong khoáº£ng <code class=\"language-inline-text\">min</code> vÃ  <code class=\"language-inline-text\">max</code>. TrÆ°á»›c khi tiáº¿p tá»¥c, báº¡n cÃ³ thá»ƒ xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c input vÃ  output cá»§a component nÃ y chÆ°a?</p>\n<div class=\"gridsome-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">// RandomNumberGenerator.vue\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>number<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>{{ randomNumber }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\"><span class=\"token namespace\">v-on:</span>click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>generateRandomNumber<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Generate Random Number<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n    \n    \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    min<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> Number<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    max<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> Number<span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      randomNumber<span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  methods<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">generateRandomNumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>randomNumber <span class=\"token operator\">=</span>\n        Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>max <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>min <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>min\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3 id=\"cÃ¡i-gÃ¬-khÃ´ng-cáº§n-test\"><a href=\"#c%C3%A1i-g%C3%AC-kh%C3%B4ng-c%E1%BA%A7n-test\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>CÃ¡i gÃ¬ KHÃ”NG Cáº¦N test</h3>\n<p>ChÃºng ta khÃ´ng cáº§n biáº¿t nÃ³ Ä‘Ã£ lÃ m <strong>nhÆ° tháº¿ nÃ o</strong>, cÃ¡ch lÃ m Ä‘Ã³ Ä‘Ãºng hay sai chÃºng ta khÃ´ng pháº£i lÃ  ngÆ°á»i Ä‘i kiá»ƒm tra, vÃ­ dá»¥ nhÆ° <code class=\"language-inline-text\">&lt;RandomNumberGenerator/></code>, chÃºng ta Ä‘Æ°a vÃ o 2 input <code class=\"language-inline-text\">min</code> vÃ  <code class=\"language-inline-text\">max</code>, hÃ m sáº½ thá»±c hiá»‡n viá»‡c Ä‘Ã³ lÃ </p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">generateRandomNumber</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>randomNumber <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>max <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>min <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>min<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Táº¥t cáº£ nhá»¯ng gÃ¬ chÃºng ta cáº§n Ä‘áº£m báº£o lÃ  con sá»‘ tráº£ vá» náº±m giá»¯a 2 giÃ¡ trá»‹ <code class=\"language-inline-text\">min</code> vÃ  <code class=\"language-inline-text\">max</code>, náº¿u sau nÃ y cÃ³ cáº­p nháº­p hay thay Ä‘á»•i cÃ¡ch hiá»‡n thá»±c cá»§a hÃ m nÃ y, dÃ¹ng thÆ° viá»‡n khÃ¡c Ä‘á»ƒ random, dÃ¹ng cÃ¡ch khÃ¡c Ä‘á»ƒ random, chÃºng ta khÃ´ng cáº§n kiá»ƒm tra cÃ¡ch lÃ m bÃªn trong.</p>\n<h2 id=\"vÃ­-dá»¥\"><a href=\"#v%C3%AD-d%E1%BB%A5\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>VÃ­ dá»¥</h2>\n<p>Component <code class=\"language-inline-text\">TestComponent.vue</code> bÃªn dÆ°á»›i, nÃ³ cÃ³ 3 dependency lÃ  Vuex (<code class=\"language-inline-text\">$store</code>), Vue Router (<code class=\"language-inline-text\">$router</code>) vÃ  Vue Auth (<code class=\"language-inline-text\">$auth</code>)</p>\n<div class=\"gridsome-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">// TestComponent.vue\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>{{ item.title }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>addToCart<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Add To Cart<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">:src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>item.image<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>â€â€/</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">\"ProductItem\"</span><span class=\"token punctuation\">,</span>\n  props<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"id\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  computed<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">item</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$store<span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span>\n        <span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> item<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  methods<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">addToCart</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$auth<span class=\"token punctuation\">.</span><span class=\"token function\">check</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$store<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ADD_TO_CART\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">\"login\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3 id=\"phÃ¢n-tÃ­ch\"><a href=\"#ph%C3%A2n-t%C3%ADch\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>PhÃ¢n tÃ­ch</h3>\n<p>Component nÃ y Ä‘Æ°á»£c sinh ra, nuÃ´i dáº¡y, cho Äƒn há»c Ä‘á»ƒ lá»›n lÃªn lÃ  Ä‘á»ƒ</p>\n<ul>\n<li>Hiá»ƒn thá»‹ má»™t sáº£n pháº©m dá»±a trÃªn prop <code class=\"language-inline-text\">id</code> (toÃ n bá»™ sáº£n pháº©m náº±m trong store)</li>\n<li>Náº¿u lÃ  chÆ°a Ä‘Äƒng nháº­p, click vÃ o nÃºt <em>Add to Card</em> sáº½ Ä‘áº©y vá» trang <em>Login</em></li>\n<li>Náº¿u user Ä‘Ã£ Ä‘Äƒng nháº­p, click vÃ o <em>Add to Card</em>, nÃ³ sáº½ báº¯n ra sá»± kiá»‡n  <code class=\"language-inline-text\">ADD_TO_CARD</code> Ä‘á»ƒ Vuex cáº­p nháº­p</li>\n</ul>\n<p><strong>Input cá»§a component nÃ y</strong></p>\n<ul>\n<li><code class=\"language-inline-text\">id</code></li>\n<li>state tá»« Vuex vÃ  Vue Auth</li>\n<li>User click nÃºt <em>Add to Card</em></li>\n</ul>\n<p><strong>Output cá»§a component nÃ y</strong></p>\n<ul>\n<li>Render html</li>\n<li>Vue Router Push (cho user chÆ°a Ä‘Äƒng nháº­p)</li>\n<li>Data Ä‘Æ°á»£c gá»­i tá»›i Vuex mutation (náº¿u user Ä‘Ã£ Ä‘Äƒng nháº­p)</li>\n</ul>\n<h3 id=\"unit-test\"><a href=\"#unit-test\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Unit test</h3>\n<p>ChÃºng ta sá»­ dá»¥ng má»™t function,  tráº£ vá» má»™t object dÃ¹ng Ä‘á»ƒ config, cho tiáº¿t kiá»‡m thá»i gian pháº£i viáº¿t Ä‘i viáº¿t láº¡i áº¥y</p>\n<p><strong>item.spec.js</strong></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> shallowMount <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@vue/test-utils'</span>\n<span class=\"token keyword\">import</span> TestComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/TestComponent'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">createConfig</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">overrides</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">const</span> mocks <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Vue Auth</span>\n        $auth<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function-variable function\">check</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">false</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Vue Router</span>\n        $router<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          push<span class=\"token operator\">:</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// Vuex</span>\n        $store<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          state<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n          commit<span class=\"token operator\">:</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> propsData <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> mocks<span class=\"token punctuation\">,</span> propsData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> overrides<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'TestComponent.vue'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4 id=\"test-case-1--render-html\"><a href=\"#test-case-1--render-html\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Test case 1:  Render HTML</h4>\n<p>CÃ³ ai Ä‘Ã³ vÃ´ tÃ¬nh Ä‘á»•i tÃªn biáº¿n <code class=\"language-inline-text\">title</code> thÃ nh <code class=\"language-inline-text\">name</code> vÃ  quÃªn máº¥t cáº­p nháº­p trong file template. CÃ³ váº» lÃ  má»™t tÃ¬nh huá»‘ng ráº¥t cáº§n Ä‘á»ƒ viáº¿t test Ä‘Ãºng khÃ´ng? NhÆ°ng viáº¿t tháº¿ nÃ o, sá»‘ lÆ°á»£ng biáº¿n nhÆ° váº­y trong template lÃ  nhiá»u vÃ´ sá»‘ ká»ƒ, viáº¿t test tá»«ng biáº¿n má»™t thÃ¬ cháº¯c háº¿t cáº£ tuá»•i thanh xuÃ¢n.</p>\n<p>CÃ¡ch tá»‘t nháº¥t Ä‘á»ƒ test trong trÆ°á»ng há»£p trÃªn lÃ  dÃ¹ng <strong>snapshot test</strong>. NÃ³ sáº½ khÃ´ng chá»‰ kiá»ƒm tra <code class=\"language-inline-text\">title</code> mÃ  cÃ²n gá»“m luÃ´n cáº£ image, button text, class,...</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'TEST CASE 1: Render HTML'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> wrapper  <span class=\"token operator\">=</span> <span class=\"token function\">shallowMount</span><span class=\"token punctuation\">(</span>Item<span class=\"token punctuation\">,</span> <span class=\"token function\">createConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>wrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatchSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><img src=\"https://i.imgur.com/ikNBg1Y.png\" alt=\"Viáº¿t unit test cho Vue Component\"></p>\n<p>ChÃºng ta khÃ´ng kiá»ƒm tra Ä‘oáº¡n text bÃªn trong cÃ³ render Ä‘Ãºng nhÆ° input khÃ´ng, nhÆ° tháº¿ nÃ y lÃ  thá»«a tháº£i</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'render correct'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> wrapper  <span class=\"token operator\">=</span> <span class=\"token function\">shallowMount</span><span class=\"token punctuation\">(</span>Item<span class=\"token punctuation\">,</span> <span class=\"token function\">createConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'h2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toBe</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4 id=\"test-case-2-router-login-Ä‘Æ°á»£c-gá»i-khi-click-button-mÃ -chÆ°a-Ä‘Äƒng-nháº­p\"><a href=\"#test-case-2-router-login-%C4%91%C6%B0%E1%BB%A3c-g%E1%BB%8Di-khi-click-button-m%C3%A0-ch%C6%B0a-%C4%91%C4%83ng-nh%E1%BA%ADp\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Test case 2: router login Ä‘Æ°á»£c gá»i khi click button mÃ  chÆ°a Ä‘Äƒng nháº­p</h4>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'TEST CASE 2: router login Ä‘Æ°á»£c gá»i khi click button mÃ  chÆ°a Ä‘Äƒng nháº­p'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token function\">createConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> wrapper <span class=\"token operator\">=</span> <span class=\"token function\">shallowMount</span><span class=\"token punctuation\">(</span>Item<span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">)</span>\n    wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trigger</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">/// thÃªm expect á»Ÿ bÃªn dÆ°á»›i</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>MÃ¬nh sáº½ khÃ´ng quan tÃ¢m, <code class=\"language-inline-text\">&lt;Login.vue/></code> cÃ³ Ä‘Æ°á»£c mount vÃ o sau khi click hay khÃ´ng, chÃºng ta chá»‰ expect khi click <code class=\"language-inline-text\">$router</code> sáº½ push vÃ o object <code class=\"language-inline-text\">{ name: \"login\" }</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> spy <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">spyOn</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>mocks<span class=\"token punctuation\">.</span>$router<span class=\"token punctuation\">,</span> <span class=\"token string\">'push'</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>spy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'login'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4 id=\"test-case-3-vuex-Ä‘Æ°á»£c-gá»i-khi-user-Ä‘Ã£-Ä‘Äƒng-nháº­p-vÃ -click-button\"><a href=\"#test-case-3-vuex-%C4%91%C6%B0%E1%BB%A3c-g%E1%BB%8Di-khi-user-%C4%91%C3%A3-%C4%91%C4%83ng-nh%E1%BA%ADp-v%C3%A0-click-button\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Test case 3: vuex Ä‘Æ°á»£c gá»i khi user Ä‘Ã£ Ä‘Äƒng nháº­p vÃ  click button</h4>\n<p>CÅ©ng tÆ°Æ¡ng tá»± nhÆ° trÃªn, chÃºng ta sáº½ test mutation cáº­p nháº­p Ä‘Ãºng giÃ¡ trá»‹ chÃºng ta mong muá»‘n khi viáº¿t test cho store, cÃ²n á»Ÿ component, chÃºng ta cáº§n biáº¿t component cÃ³ commit lÃªn cho Vuex chÆ°a</p>\n<p>Sá»­a láº¡i <code class=\"language-inline-text\">$auth.check</code> thÃ nh <code class=\"language-inline-text\">true</code> Ä‘á»ƒ giáº£ láº­p Ä‘Äƒng nháº­p thÃ nh cÃ´ng rá»“i, chÃºng ta kiá»ƒm tra phÆ°Æ¡ng thá»©c <code class=\"language-inline-text\">commit</code> cá»§a store</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'TEST CASE 3: vuex Ä‘Æ°á»£c gá»i khi user Ä‘Ã£ Ä‘Äƒng nháº­p vÃ  click button'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token function\">createConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mocks<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            $auth<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function-variable function\">check</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">true</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            $store<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n              state<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n              commit<span class=\"token operator\">:</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> wrapper <span class=\"token operator\">=</span> <span class=\"token function\">shallowMount</span><span class=\"token punctuation\">(</span>TestComponent<span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">)</span>\n    wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trigger</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> spy <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">spyOn</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>mocks<span class=\"token punctuation\">.</span>$store<span class=\"token punctuation\">,</span> <span class=\"token string\">'commit'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>spy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>ToÃ n bá»™ file spec lÃºc nÃ y</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> shallowMount <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@vue/test-utils'</span>\n<span class=\"token keyword\">import</span> TestComponent <span class=\"token keyword\">from</span> <span class=\"token string\">'@/components/TestComponent.vue'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">createConfig</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">overrides</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword\">const</span> mocks <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    $auth<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">check</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    $router<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      push<span class=\"token operator\">:</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    $store<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      commit<span class=\"token operator\">:</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">const</span> propsData <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">assign</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> mocks<span class=\"token punctuation\">,</span> propsData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> overrides<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">describe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'TestComponent'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'TEST CASE 1: Render HTML'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> wrapper <span class=\"token operator\">=</span> <span class=\"token function\">shallowMount</span><span class=\"token punctuation\">(</span>TestComponent<span class=\"token punctuation\">,</span> <span class=\"token function\">createConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>wrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toMatchSnapshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'TEST CASE 2: router login Ä‘Æ°á»£c gá»i khi click button mÃ  chÆ°a Ä‘Äƒng nháº­p'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token function\">createConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">const</span> wrapper <span class=\"token operator\">=</span> <span class=\"token function\">shallowMount</span><span class=\"token punctuation\">(</span>TestComponent<span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">)</span>\n        wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trigger</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">const</span> spy <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">spyOn</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>mocks<span class=\"token punctuation\">.</span>$router<span class=\"token punctuation\">,</span> <span class=\"token string\">'push'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>spy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalledWith</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">'login'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token string\">'TEST CASE 3: vuex Ä‘Æ°á»£c gá»i khi user Ä‘Ã£ Ä‘Äƒng nháº­p vÃ  click button'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token function\">createConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        mocks<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          $auth<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function-variable function\">check</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token boolean\">true</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          $store<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            state<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span> id<span class=\"token operator\">:</span> <span class=\"token number\">2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            commit<span class=\"token operator\">:</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">const</span> wrapper <span class=\"token operator\">=</span> <span class=\"token function\">shallowMount</span><span class=\"token punctuation\">(</span>TestComponent<span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">)</span>\n        wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">trigger</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">const</span> spy <span class=\"token operator\">=</span> jest<span class=\"token punctuation\">.</span><span class=\"token function\">spyOn</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>mocks<span class=\"token punctuation\">.</span>$store<span class=\"token punctuation\">,</span> <span class=\"token string\">'commit'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token function\">expect</span><span class=\"token punctuation\">(</span>spy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toHaveBeenCalled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"káº¿t\"><a href=\"#k%E1%BA%BFt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Káº¿t</h2>\n<p>Mindset khi chÃºng ta viáº¿t unit test component lÃ : <strong>má»i unit test Ä‘á»u dÆ° thá»«a, trá»« khi báº¡n cÃ³ lÃ½ do cho viá»‡c unit test Ä‘Ã³</strong></p>\n<p>CÃ¡c cÃ¢u há»i chÃºng ta Ä‘áº·t ra trÆ°á»›c khi viáº¿t</p>\n<ul>\n<li>Component sinh ra trÃªn trÃ¡i Ä‘áº¥t nÃ y Ä‘á»ƒ lÃ m gÃ¬</li>\n<li>Public interface cá»§a component lÃ  gÃ¬, input, output nÃ³ lÃ  gÃ¬</li>\n<li>Äoáº¡n test Ä‘Ã³ Ä‘á»ƒ kiá»ƒm tra code cá»§a mÃ¬nh, hay code cá»§a ngÆ°á»i ta?</li>\n</ul>\n<p>CÃ¡c bÃ i viáº¿t Ä‘Ã£ tham kháº£o</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.vuemastery.com/blog/unit-testing-vue-1/\">ğŸ“œ Unit Testing in Vue: What to Test?</a></p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://vuejsdevelopers.com/2019/08/26/vue-what-to-unit-test-components/\">ğŸ“œ Knowing What To Test - Vue Component Unit Testing</a></p>\n","cover_image":"","related":[{"id":"cae4956884d6ce9480251db3294a42ca","path":"/tong-quat-ve-viet-unit-test-cho-fe/","title":"Tá»•ng quÃ¡t vá» viáº¿t unit test cho FE","desc":"CÃ¡i nhÃ¬n tá»•ng quÃ¡t Ä‘á»ƒ báº¡n cÃ³ thá»ƒ báº¯t Ä‘áº§u lÃ m quen vá»›i test, nhá»¯ng khÃ¡i niá»‡m, váº¥n Ä‘á» gáº·p thÆ°á»ng xuyÃªn khi viáº¿t test"},{"id":"86b4bdaecfd311e0ba6c74a0259cacf8","path":"/huong-dan-viet-unit-test-trong-react/","title":"HÆ°á»›ng dáº«n viáº¿t unit test trong React","desc":"Má»™t bÃ i viáº¿t tá»•ng há»£p, sáº½ cá»‘ gáº¯ng Ä‘á» cáº­p cÃ ng nhiá»u cÃ ng tá»‘t cÃ¡c váº¥n Ä‘á» cÃ³ thá»ƒ gáº·p khi Ä‘á»¥ng Ä‘áº¿n unit test vá»›i React."},{"id":"6314a0ae5c8d97df66e38b0f4d856d99","path":"/viet-animation-cho-vue-component/","title":"Viáº¿t animation cho Vue Component","desc":"LÃ m má»™t sá»‘ animation Ä‘Æ¡n giáº£n báº±ng cÃ´ng cá»¥ cÃ³ sáºµn cá»§a Vue"},{"id":"0b0388dbdd5fb8e368d89c778ff54334","path":"/gioi-thieu-vuex-cho-nguoi-moi-bat-dau/","title":"Giá»›i thiá»‡u Vuex cho ngÆ°á»i má»›i báº¯t Ä‘áº§u","desc":"MÃ¬nh khÃ´ng giá»›i thiá»‡u cá»¥ thá»ƒ tá»«ng pháº§n trong Vuex, cÃ¡c báº¡n cáº§n náº¯m redux store cá»§a React Ä‘á»ƒ hiá»ƒu Ä‘Æ°á»£c bÃ i nÃ y, cÃ¡c khÃ¡i niá»‡m vÃ  nguyÃªn táº¯c gáº§n nhÆ° lÃ  giá»‘ng nhau, khÃ¡c cÃ¡ch Ä‘áº·t tÃªn thÃ´i."}]}},"context":{}}