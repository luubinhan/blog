{"hash":"08afebde8a18553ee035d598b7ec152099e4d381","data":{"post":{"title":"LÃ m quen khÃ¡i niá»‡m CORS cá»§a Web","path":"/2019-09-06-gioi-thieu-can-ban-ve-cors/","slug":"/2019-09-06-gioi-thieu-can-ban-ve-cors","date":"2019-09-06","timeToRead":3,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"},{"id":"hoc-thuat","title":"hoc-thuat","path":"/tag/hoc-thuat/"}],"desc":"BÃ i nÃ y khÃ¡ cÄƒn báº£n vÃ  cáº§n thiáº¿t cho báº¡n nÃ o chÆ°a biáº¿t gÃ¬ vá» CORS, nghe ai Ä‘Ã³ nÃ³i vá» tá»« khÃ³a ghÃª gá»›m nÃ y mÃ  ko biáº¿t nÃ³ lÃ  gÃ¬, khÃ´ng Ä‘á»ƒ cáº­p Ä‘áº¿n váº¥n Ä‘á» setup lÃ m sao Ä‘á»ƒ cháº¡y CORS trÃªn server - vÃ¬ mÃ¬nh ko biáº¿t code phÃ­a server Ä‘Ã¢u","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#access-control-allow-origin\">Access-Control-Allow-Origin</a></li>\n<li>\n<p><a href=\"#c%c3%a1c-ki%e1%bb%83u-request-cors\">CÃ¡c kiá»ƒu request CORS</a></p>\n<ul>\n<li><a href=\"#request-%c4%91%c6%a1n-thu%e1%ba%a7n-nh%c6%b0-get-post-head\">Request Ä‘Æ¡n thuáº§n nhÆ° <code class=\"language-inline-text\">GET</code>, <code class=\"language-inline-text\">POST</code>, <code class=\"language-inline-text\">HEAD</code></a></li>\n<li><a href=\"#preflight-request\">Preflight request</a></li>\n</ul>\n</li>\n</ul>\n<!-- /TOC -->\n<p>Cross-Origin Resource Sharing (CORS) lÃ  má»™t cÆ¡ cháº¿ sá»­ dá»¥ng thÃ´ng tin trÃªn HTTP header Ä‘á»ƒ bÃ¡o vá»›i trÃ¬nh duyá»‡t, cho phÃ©p á»©ng dá»¥ng web cháº¡y tá»« <em>nhÃ </em> nÃ y, cÃ³ quyá»n truy xuáº¥t resource tá»« 1 <strong>nhÃ </strong> khÃ¡c (2 tháº±ng gá»i lÃ  khÃ¡c nhÃ  khi khÃ¡c tÃªn miá»n, khÃ¡c port, khÃ¡c giao thá»©c http vÃ  https)</p>\n<p>VÃ­ dá»¥ má»™t request cross-origin: nhÃ  báº¡n á»Ÿ <a href=\"http://domain-a.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://domain-a.com</a> dÃ¹ng javascript gá»­i request bÃªn nhÃ  <a href=\"http://api.domain-b.com/data.json\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://api.domain-b.com/data.json</a></p>\n<p>VÃ¬ lÃ½ do báº£o máº­t, trÃ¬nh duyá»‡t sáº½ khÃ´ng cho thá»±c hiá»‡n cÃ¡c request cross-origin nhÆ° váº­y. NghÄ©a lÃ  cÃ¡c á»©ng dá»¥ng web gá»i API chá»‰ cÃ³ thá»ƒ sá»­ dá»¥ng resource tá»« cÃ¹ng <em>nhÃ </em> (same-origin policy lÃ  tá»« chuáº©n, náº¿u báº¡n cáº§n research thÃªm), trá»« khi response tá»« <em>nhÃ </em> khÃ¡c Ä‘Ã³ cho phÃ©p gá»i CORS (báº±ng cÃ¡ch thÃªm má»™t sá»‘ thÃ´ng tin trÃªn header)</p>\n<p>CÃ¡c request cÃ³ thá»ƒ dÃ¹ng CORS</p>\n<ul>\n<li>Gá»­i má»™t network request báº±ng <code class=\"language-inline-text\">fetch</code></li>\n<li>Web font, hoáº·c load <code class=\"language-inline-text\">@font-face</code> trong CSS</li>\n<li>WebGL texture</li>\n<li>Image, video</li>\n</ul>\n<p>Khi config thÃ nh cÃ´ng trÃªn server, server sáº½ tráº£ thÃªm má»™t sá»‘ thÃ´ng tin trÃªn header Ä‘á»ƒ trÃ¬nh duyá»‡t biáº¿t vÃ  cáº¥p phÃ©p cháº¡y</p>\n<h2 id=\"access-control-allow-origin\"><a href=\"#access-control-allow-origin\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Access-Control-Allow-Origin</h2>\n<p>Chá»‰ Ä‘á»‹nh cÃ¡c tÃªn miá»n nÃ o Ä‘Æ°á»£c phÃ©p truy cáº­p,  vÃ­ dá»¥ Ä‘á»ƒ cho phÃ©p táº¥t cáº£ tÃªn miá»n cÃ³ thá»ƒ gá»i tá»›i</p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">Access-Control-Allow-Origin<span class=\"token operator\">:</span> *</code></pre></div>\n<p>Cho phÃ©p 1 tÃªn miá»n cá»¥ thá»ƒ</p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">Access-Control-Allow-Origin<span class=\"token operator\">:</span> https<span class=\"token operator\">:</span><span class=\"token comment\">//example.com</span></code></pre></div>\n<h2 id=\"cÃ¡c-kiá»ƒu-request-cors\"><a href=\"#c%C3%A1c-ki%E1%BB%83u-request-cors\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>CÃ¡c kiá»ƒu request CORS</h2>\n<p>CÃ³ 2 kiá»ƒu CORS request: cÃ¡c request <em>Ä‘Æ¡n thuáº§n</em>, vÃ  cÃ¡c request <strong>preflight</strong>, 2 cÃ¡i nÃ y sáº½ do trÃ¬nh duyá»‡t xÃ¡c Ä‘á»‹nh sá»­ dá»¥ng cÃ¡i nÃ o, lÃ  má»™t developer chÃºng ta cÅ©ng tháº­t sá»± khÃ´ng cáº§n quan tÃ¢m.</p>\n<h3 id=\"request-Ä‘Æ¡n-thuáº§n-nhÆ°-get-post-head\"><a href=\"#request-%C4%91%C6%A1n-thu%E1%BA%A7n-nh%C6%B0-get-post-head\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Request Ä‘Æ¡n thuáº§n nhÆ° <code class=\"language-inline-text\">GET</code>, <code class=\"language-inline-text\">POST</code>, <code class=\"language-inline-text\">HEAD</code></h3>\n<p>CÃ¡c request Ä‘Æ°á»£c trÃ¬nh duyá»‡t xáº¿p loáº¡i <em>Ä‘Æ¡n thuáº§n</em> lÃ \nGET, POST, HEAD\nSá»­ dá»¥ng <a href=\"https://fetch.spec.whatwg.org/#cors-safelisted-request-header\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">CORS safe -listed header</a>\nKhi sá»­ dá»¥ng <code class=\"language-inline-text\">Content-Type</code>, chá»‰ cÃ¡c giÃ¡ trá»‹ sau lÃ  Ä‘Æ°á»£c cho phÃ©p <code class=\"language-inline-text\">application/x-www-form-urlencoded</code>, <code class=\"language-inline-text\">multipart/form-data</code>,  <code class=\"language-inline-text\">text/plain</code>\nKhÃ´ng cÃ³ cÃ¡c listener nÃ o Ä‘Æ°á»£c Ä‘Äƒng kÃ½ trÃªn <code class=\"language-inline-text\">XMLHttpRequestUpload</code>\nKhÃ´ng sá»­ dá»¥ng <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ReadableStream</a></p>\n<h3 id=\"preflight-request\"><a href=\"#preflight-request\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Preflight request</h3>\n<p>ÄÆ¡n giáº£n lÃ  ngÆ°á»£c láº¡i cÃ¡c trÆ°á»ng há»£p á»Ÿ trÃªn thÃ¬ sáº½ lÃ  dáº¡ng preflight, trÃ¬nh duyá»‡t sáº½ gá»­i Ä‘i má»™t request á»Ÿ phÆ°Æ¡ng thá»©c <code class=\"language-inline-text\">options</code> Ä‘á»ƒ xÃ¡c Ä‘á»‹nh server cÃ³ há»— trá»£ ko trÆ°á»›c khi thá»±c sá»± gá»­i Ä‘i request chÃ­nh.</p>\n<p>Äá»‘i vá»›i loáº¡i preflight request, ngoÃ i viá»‡c chuyá»ƒn phÆ°Æ¡ng thá»©c sang <code class=\"language-inline-text\">options</code>, nÃ³ sáº½ set thÃªm má»™t sá»‘ thuá»™c tÃ­nh trÃªn header</p>\n<p><code class=\"language-inline-text\">Access-Control-Request-Method</code>:  phÆ°Æ¡ng thá»©c GET hay POST nÃªn Ä‘Æ°á»£c sá»­ dá»¥ng\n<code class=\"language-inline-text\">Access-Control-Request-Headers</code>: kiá»ƒu header muá»‘n sá»­ dá»¥ng\n<code class=\"language-inline-text\">Origin</code>: nÆ¡i gá»­i request</p>\n<p>VÃ­ dá»¥</p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"># Request\ncurl -i -X OPTIONS localhost<span class=\"token operator\">:</span><span class=\"token number\">3001</span>/api/ping \\\n-H 'Access-Control-Request-Method<span class=\"token operator\">:</span> GET' \\\n-H 'Access-Control-Request-Headers<span class=\"token operator\">:</span> Content-Type<span class=\"token punctuation\">,</span> Accept' \\\n-H 'Origin<span class=\"token operator\">:</span> http<span class=\"token operator\">:</span><span class=\"token comment\">//localhost:3000'</span></code></pre></div>\n<p>ChÃºng ta cÃ³ thá»ƒ táº¡m dá»‹ch nÃ³ ra ngÃ´n ngá»¯ tá»± nhiÃªn lÃ  â€œTao muá»‘n thá»±c hiá»‡n má»™t request dáº¡ng GET vá»›i <code class=\"language-inline-text\">content-type</code> vÃ  <code class=\"language-inline-text\">Accept</code> header tá»« Ä‘á»‹a chá»‰ localhost:3000 cÃ³ Ä‘Æ°á»£c ko?â€</p>\n<p>Káº¿t quáº£ tráº£ vá» tá»« server sáº½ cho phÃ©p trÃ¬nh duyá»‡t tiáº¿n hÃ nh tiáº¿p, hay dá»«ng láº¡i á»Ÿ Ä‘Ã³. Response tá»« server sáº½ nhÆ° tháº¿ nÃ y</p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">HTTP/<span class=\"token number\">1.1</span> <span class=\"token number\">204</span> No Content\nAccess-Control-Allow-Origin<span class=\"token operator\">:</span> *\nAccess-Control-Allow-Methods<span class=\"token operator\">:</span> GET<span class=\"token punctuation\">,</span>HEAD<span class=\"token punctuation\">,</span>PUT<span class=\"token punctuation\">,</span>PATCH<span class=\"token punctuation\">,</span>POST<span class=\"token punctuation\">,</span>DELETE\nVary<span class=\"token operator\">:</span> Access-Control-Request-Headers\nAccess-Control-Allow-Headers<span class=\"token operator\">:</span> Content-Type<span class=\"token punctuation\">,</span> Accept\nContent-Length<span class=\"token operator\">:</span> <span class=\"token number\">0</span>\nDate<span class=\"token operator\">:</span> Fri<span class=\"token punctuation\">,</span> <span class=\"token number\">05</span> Apr <span class=\"token number\">2019</span> <span class=\"token number\">11</span><span class=\"token operator\">:</span><span class=\"token number\">41</span><span class=\"token operator\">:</span><span class=\"token number\">08</span> GMT\nConnection<span class=\"token operator\">:</span> keep-alive</code></pre></div>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://auth0.com/blog/cors-tutorial-a-guide-to-cross-origin-resource-sharing/\n\">ğŸ“œ CORS Tutorial: A Guide to Cross-Origin Resource Sharing</a></p>\n","cover_image":"","related":[{"id":"95442f9784ed9952265cdb585404dc96","path":"/2019-08-30-lam-quen-voi-kien-truc-serverless/","title":"LÃ m quen vá»›i kiáº¿n trÃºc Serverless","desc":"MÃ¬nh khÃ´ng pháº£i chuyÃªn gia trong lÄ©nh vá»±c nÃ y, nghiÃªn cá»©u Ä‘á»ƒ biáº¿t thÃªm, tháº¥y cÅ©ng hay, chia sáº½ cho má»i ngÆ°á»i cÃ¹ng Ä‘á»c"},{"id":"9358bcb7257ba0e35f104945857aa41f","path":"/2019-02-11-lam-quen-voi-react-hook-bang-vi-du/","title":"LÃ m quen vá»›i React Hook báº±ng vÃ­ dá»¥","desc":"ChÃºng ta cÃ¹ng báº¯t Ä‘áº§u há»c sá»­ dá»¥ng React Hook, nÃ³ giáº£i quyáº¿t váº¥n Ä‘á» gÃ¬, sá»­ dá»¥ng nÃ³ ra sao"},{"id":"8905cbcbcbfca00a569175a000425311","path":"/2017-09-25-10-khai-niem-javascript-can-biet/","title":"7 khÃ¡i niá»‡m JavaScript cáº§n biáº¿t","desc":"Má»™t vÃ i khÃ¡i niá»‡m cÄƒn báº£n trong javascript cáº§n náº¯m náº¿u báº¡n lÃ  frontend developer"},{"id":"b96fe15a72c8084949568607882b071a","path":"/2019-09-13-giai-thich-phuong-phap-atomic/","title":"LÃ m quen vá»›i phÆ°Æ¡ng phÃ¡p Atomic Ä‘á»ƒ structure source code, design","desc":"Atom, molecule, organism, template, vÃ  page lÃ  nhá»¯ng khÃ¡i niá»‡m chÃ­nh cá»§a phÆ°Æ¡ng phÃ¡p nÃ y"}]}},"context":{}}