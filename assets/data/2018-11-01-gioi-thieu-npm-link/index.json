{"hash":"0281ffacf02e407aef71fb6a89d922a636585707","data":{"post":{"title":"Hướng dẫn dùng npm link","path":"/2018-11-01-gioi-thieu-npm-link/","slug":"/2018-11-01-gioi-thieu-npm-link","date":"2018-11-01","timeToRead":2,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"}],"desc":"Cách dùng npm link để trỏ dependency đến thư mục local","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng\">Sử dụng</a></li>\n<li><a href=\"#debug\">Debug</a></li>\n<li><a href=\"#quay-l%E1%BA%A1i-b%C3%ACnh-th%C6%B0%E1%BB%9Dng\">Quay lại bình thường</a></li>\n</ul>\n<!-- /TOC -->\n<p>Nếu như bạn là tác giả của một module, bạn đang để nó ở một thư mục trên máy local, bạn không có viết test cho module này, bạn dùng chính app đang viết như là cách để test module luôn, tìm thấy lỗi trên module, sau khi sửa lỗi một cách thủ công trong thư mục <code class=\"language-inline-text\">node_modules</code>, copy toàn bộ file qua git repository, rồi commit lên.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/880/0*wvDueqq35PXNE1qA\" alt=\"Cách dùng npm link để trỏ dependency đến thư mục local\"></p>\n<p>Có một cách làm <strong>sạch sẽ</strong> hơn: <code class=\"language-inline-text\">npm link</code></p>\n<h1 id=\"sử-dụng\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sử dụng</h1>\n<p>Để link package, thực hiện bằng 2 bước</p>\n<ol>\n<li>Tạo một shortcut trên dependency với <code class=\"language-inline-text\">npm link</code>. Shortcut này trỏ tới một thư một khác trên máy.</li>\n<li>Khai báo trên project sử dụng shortcut này, <code class=\"language-inline-text\">npm link some-dep</code></li>\n</ol>\n<div class=\"gridsome-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">cd ~<span class=\"token operator\">/</span>projects/some-dep\nnpm link  <span class=\"token comment\"># Step 1.</span>\ncd ~<span class=\"token operator\">/</span>projects/my-app\nnpm link some-dep  <span class=\"token comment\"># Step 2.</span></code></pre></div>\n<p><img src=\"https://cdn-images-1.medium.com/max/880/0*x8jMbWUMifff9Eao\" alt=\"Cách dùng npm link để trỏ dependency đến thư mục local\"></p>\n<p>Bạn có thể sửa, transpile, chạy test, commit bình thường trên <code class=\"language-inline-text\">some-dep</code>. Khi chạy <code class=\"language-inline-text\">my-app</code> nó sẽ chạy với những thay đổi đã thực hiện trên <code class=\"language-inline-text\">some-dep</code>. Shortcut đã tạo ra sẽ ko được commit lên git, nó chỉ có hiệu lực trên local</p>\n<h1 id=\"debug\"><a href=\"#debug\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Debug</h1>\n<p>Nếu đang sử dụng VSCode và muốn set breakpoint trong <code class=\"language-inline-text\">some-dep</code>, trên debugger của <code class=\"language-inline-text\">my-app</code>, bạn cần thiết đặt trong <code class=\"language-inline-text\">launch.json</code></p>\n<div class=\"gridsome-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"runtimeArgs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"--preserve-symlinks\"</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p><img src=\"https://cdn-images-1.medium.com/max/880/0*H1TB22svP8POFP8p\" alt=\"Cách dùng npm link để trỏ dependency đến thư mục local\"></p>\n<h1 id=\"quay-lại-bình-thường\"><a href=\"#quay-l%E1%BA%A1i-b%C3%ACnh-th%C6%B0%E1%BB%9Dng\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Quay lại bình thường</h1>\n<p>Nếu không còn muốn sử dụng bản local của <code class=\"language-inline-text\">some-dep</code> nửa, <code class=\"language-inline-text\">npm unlink</code> chăng? Cũng được, nhưng thật ra nó sẽ chạy <code class=\"language-inline-text\">npm uninstall</code>, nghĩa là bạn phải uninstall rồi install lại từ đầu</p>\n<div class=\"gridsome-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">cd ~<span class=\"token operator\">/</span>projects/my-app\nnpm uninstall <span class=\"token operator\">--</span>no-save some-dep &amp;&amp; npm install </code></pre></div>\n<p>Nếu xóa shortcut trên <code class=\"language-inline-text\">some-dep</code> sẽ an toàn hơn, không đụng tới dependency của <code class=\"language-inline-text\">my-app</code></p>\n<div class=\"gridsome-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">cd ~<span class=\"token operator\">/</span>projects/some-dep\nnpm uninstall  <span class=\"token comment\"># Delete global symlink</span></code></pre></div>\n<p><a href=\"https://medium.com/dailyjs/how-to-use-npm-link-7375b6219557\" target=\"_blank\" rel=\"noopener noreferrer\">Understanding npm-link</a></p>\n","cover_image":"","related":[{"id":"6e12ee448b407c69e13739fd004305be","path":"/2020-09-28-lam-theme-cho-web-nam-2020/","title":"Hướng dẫn dùng biến trong CSS để làm dark/light mode","desc":"Nếu bạn cũng như mình, mặc kệ những đứa xài IE11, mình chỉ hỗ  trợ cho đối tượng người sử dụng là những người trẻ thông minh, xài Edge, xài Chrome, xài Firefox, đọc ngay bài viết này mình chỉ cách làm."},{"id":"2bda1aea7bf5ac181ed1d3a656b277f5","path":"/2020-10-26-huong-dan-su-dung-usememo-react/","title":"Hướng dẫn sử dụng useMemo trong React","desc":"Nếu bạn thấy app của mình bắt đầu chậm, đó là lúc bạn nên bắt đầu cân nhắc các phương pháp để tối ưu tốc độ và đọc bài viết này."},{"id":"4489faa894256f0d6beb4e50c82ec5c7","path":"/2018-10-21-huong-dan-dung-chrome-devtool-de-inspect-animation/","title":"Hướng dẫn inspect animation với Chrome DevTools","desc":"Học cách sử dụng công cụ inspection animation trong Chrome DevTools rất hữu ích khi làm animate."},{"id":"82094eb3a75f8e7cc086b97fe788ec2e","path":"/2019-06-06-huong-dan-publish-package-len-npm/","title":"Hướng dẫn tạo một package, publish nó lên npm","desc":"Nếu bạn có một package nào đó muốn chia sẽ cùng mọi người trên npm, thì đây là cách bạn publish package make-by-me như vậy lên npm"}]}},"context":{}}