{"hash":"5ee00dc0b71878963f9b5fb39ff7b4fecc0fc2a1","data":{"post":{"title":"Authentication bằng Token - Bài 2: Giới thiệu JWT","path":"/authentication-bang-token-bai-2-gioi-thieu-jwt/","date":"2019-10-02","timeToRead":2,"tags":[{"id":"hoc-thuat","title":"hoc-thuat","path":"/tag/hoc-thuat/"}],"desc":"Phần mềm ngày nay được phát triển theo hướng sử dụng token để làm authentication, để có thể tách chức năng này ra như một phần độc lập, cho phép phần mềm có thể scale ở mức cao nhất","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#jwt-l%c3%a0-g%c3%ac\">JWT là gì</a></li>\n<li><a href=\"#c%c6%a1-ch%e1%ba%bf-c%e1%bb%a7a-jwt\">Cơ chế của JWT</a></li>\n</ul>\n<!-- /TOC -->\n<p>Trước khi đọc bài này, các bạn hãy đọc bài <a href=\"/2019-10-01-giai-thich-authentication-bang-token\">Ví dụ thực tế để hiểu rõ hơn cách authentication bằng token</a>, để hiểu được cơ chế authentication bằng token, tiếng Việt mình có thể dịch ra là Xác thực tài khoản bằng một string đặc biệt (token là một dạng string được tạo ra theo một cơ chế đặc biệt <em>bí hiểm</em>)</p>\n<h2 id=\"jwt-là-gì\"><a href=\"#jwt-l%C3%A0-g%C3%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>JWT là gì</h2>\n<blockquote>\n<p>TOKEN = một dạng string được tạo ra theo một cơ chế</p>\n</blockquote>\n<p>JWT chính là tên 1 cơ chế để tạo ra token (tức, có nhiều cơ chế khác nữa không chỉ riêng JWT)</p>\n<p>JWT viết tắt của JSON Web Token</p>\n<p>Cái cơ chế JWT này, nó đã nhét cái gì vào trong string, mời bạn đọc tiếp là rõ</p>\n<h2 id=\"cơ-chế-của-jwt\"><a href=\"#c%C6%A1-ch%E1%BA%BF-c%E1%BB%A7a-jwt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Cơ chế của JWT</h2>\n<p>Một request sử dụng JWT sẽ gửi kèm trong header</p>\n<pre class=\"language-json\"><code class=\"language-json\">Authorization<span class=\"token operator\">:</span> Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.XbPfbIHMI6arZ3Y922BhjWgQzWXcXNrz0ogtVhfEd2o</code></pre>\n<p>Không cần quan tâm cái <strong>Bearer</strong>, nó là quy định thôi, cái cần quan tâm là đoạn hầm bà lằng phía sau nó</p>\n<pre class=\"language-json\"><code class=\"language-json\">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.XbPfbIHMI6arZ3Y922BhjWgQzWXcXNrz0ogtVhfEd2o</code></pre>\n<p>Dòm kỹ một tí bạn sẽ thấy nó có 2 dấu <code class=\"language-text\">.</code>, tách cái string này ra làm 3 phần <code class=\"language-text\">header.payload.signature</code></p>\n<ul>\n<li><strong>Header</strong>: chứa kiểu dữ liệu, thuật toán mã hóa chữ ký</li>\n<li><strong>Payload</strong>: một số thông tin như thời gian expire, thông tin user,... tùy thuộc server muốn đưa về cái gì.</li>\n<li><strong>Signature</strong>: chữ ký điện tử, chứa thông tin để server có thể verify cái JWT này</li>\n</ul>\n<p>Chữ ký sẽ được tạo ra ở server, có thể là như thế này (có nhiều cách khác)</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> signature <span class=\"token operator\">=</span> <span class=\"token function\"><span class=\"token maybe-class-name\">RS256Algorithm</span></span><span class=\"token punctuation\">(</span><span class=\"token function\">encode64</span><span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\".\"</span> <span class=\"token operator\">+</span> <span class=\"token function\">encode64</span><span class=\"token punctuation\">(</span>payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">,</span> secret<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// secret là một chìa khóa (như password ấy mà) chỉ có server mới biết</span></code></pre>\n<p>Còn cái JWT sẽ được cấp bằng thuật toán cao siêu nhất vũ trụ <strong>nối chuỗi</strong></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> jwt <span class=\"token operator\">=</span> <span class=\"token function\">encode64</span><span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\".\"</span> <span class=\"token operator\">+</span> <span class=\"token function\">encode64</span><span class=\"token punctuation\">(</span>payload<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\".\"</span> <span class=\"token operator\">+</span> signature<span class=\"token punctuation\">;</span></code></pre>\n<p><img src=\"https://blog.hasura.io/content/images/2019/08/Group.png\" alt=\"Authentication bằng Token - Bài 2: Giới thiệu JWT\"></p>\n<p>Đọc tiếp</p>\n<ul>\n<li><a href=\"/2019-10-01-giai-thich-authentication-bang-token\">Authentication bằng Token - Bài 1: cơ chế authentication bằng token</a></li>\n<li><a href=\"/2019-10-02-giai-thich-jwt-la-gi\">Authentication bằng Token - Bài 2: Giới thiệu JWT</a></li>\n<li>[Authentication bằng Token - Bài 3: Hướng dẫn authentication với React]</li>\n<li><a href=\"/2018-11-18-mot-so-van-de-can-quan-tam-de-bao-mat-web\">Bảo mật web - Một số kiểu tấn công</a></li>\n</ul>\n","cover_image":"","related":[{"id":"75909cd840de49c2190e4b04efc6e25c","path":"/authentication-bang-token-bai-1-co-che-authentication-bang-token/","title":"Authentication bằng Token - Bài 1: Cơ chế authentication bằng token","desc":"Phần mềm ngày nay được phát triển theo hướng sử dụng token để làm authentication, để có thể tách chức năng này ra như một phần độc lập, cho phép phần mềm có thể scale ở mức cao nhất"},{"id":"0b73c5d779773c72939b08d650b2f722","path":"/giai-bai-toan-cong-2-so-bang-javascript/","title":"Giải bài toán cộng 2 số bằng javascript","desc":"Một đề bài cũng không mới, thông qua đó chúng ta sẽ biết thêm tí về cách sử dụng object sao cho hiệu quả"},{"id":"0b0388dbdd5fb8e368d89c778ff54334","path":"/gioi-thieu-vuex-cho-nguoi-moi-bat-dau/","title":"Giới thiệu Vuex cho người mới bắt đầu","desc":"Mình không giới thiệu cụ thể từng phần trong Vuex, các bạn cần nắm redux store của React để hiểu được bài này, các khái niệm và nguyên tắc gần như là giống nhau, khác cách đặt tên thôi."},{"id":"e9d2a9d4a3ed5b8ecc39c580a3f2ffb8","path":"/gioi-thieu-markdown/","title":"Giới thiệu Markdown","desc":"Markdown vở lòng cho bạn nào chưa biết"},{"id":"0be257d7b6339261c05ba76120350279","path":"/gioi-thieu-react-router/","title":"Giới thiệu React Router","desc":"React không phải một framework, nó chỉ là một thư viện javascript, bởi vì vậy nó không thể giải quyết tất cả các yêu cầu một ứng dụng. Việc mà React làm rất tốt là tạo component và cách thức quản lý state của component, nhưng để tạo một Single Page App (sẽ viết tắt là SPA) phức tạp, nó cần những thư viện khác nữa, đầu tiên cần nhắc đến là React Router"},{"id":"5d93819d1a5c10be427112a7e0bf625b","path":"/gioi-thieu-react-memo/","title":"Giới thiệu React.memo","desc":"Api mới của React 16.6"},{"id":"fa886c080ce0cc5ae7c411b14a1be10f","path":"/gioi-thieu-react-portal/","title":"Giới thiệu React Portal","desc":"Tìm hiểu về Portals, bản hỗ trợ chính thức của react-dom"},{"id":"18de52b6667fae340629f0c5b1fb3c22","path":"/gioi-thieu-react-profiler/","title":"Giới thiệu React Profiler","desc":"Từ version React 16.5 bổ sung thêm một plugin DevTool profiler. Plugin này được dùng để thu thập các thông tin về thời gian render một component, xác định nguyên nhân làm trì trệ performance."},{"id":"c4bb677484b7819976aa13db2c48fbab","path":"/gioi-thieu-typeof-trong-javascript-cho-nguoi-moi-bat-dau/","title":"Giới thiệu typeof trong Javascript cho người mới bắt đầu","desc":"Hiểu cách hoạt động của typeof, một số vấn đề liên quan đến check type"},{"id":"f9b9d628fc5725a639e6c8edff449057","path":"/gioi-thieu-fetch-cua-javascript/","title":"Giới thiệu fetch() của javascript","desc":"Tạm biệt XMLHttpRequest và cách viết dài dòng, giờ đây ta đã có fetch API"}]}},"context":{}}