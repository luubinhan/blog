{"hash":"e1532d0aebaf3bcf47bbf8a08cbde03cecbbc9cf","data":{"post":{"title":"IIFE trong javascript l√† c√°i g√¨ v·∫°i","path":"/2019-09-20-gioi-thieu-iife-cua-javascript/","slug":"/2019-09-20-gioi-thieu-iife-cua-javascript","date":"2019-09-20","timeToRead":3,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"},{"id":"hoc-thuat","title":"hoc-thuat","path":"/tag/hoc-thuat/"}],"desc":"Gi·ªõi thi·ªáu v·ªÅ √çp-Phi trong javascript, tuy kh√¥ng c√≤n d√πng nhi·ªÅu n·ªØa, nh∆∞ng v·∫´n l√† m·ªôt ki·∫øn th·ª©c t·ªët c·∫ßn bi·∫øt","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#khai-b%c3%a1o-function\">Khai b√°o function</a></li>\n<li><a href=\"#iife\">IIFE</a></li>\n<li><a href=\"#es6-module\">ES6 Module</a></li>\n</ul>\n<!-- /TOC -->\n<p>M·ªôt trong nh·ªØng pattern c√≥ t√™n r·∫•t <em>ki√™u</em> trong javascript \"√≠p-phi\" - <strong>IIFE</strong></p>\n<p>Tr∆∞·ªõc khi t√¨m hi·ªÉu n√≥ l√† g√¨, t·∫°i sao ch√∫ng ta c·∫ßn n√≥, √¥n l·∫°i kh√°i ni·ªám function cƒÉn b·∫£n trong javascript</p>\n<h2 id=\"khai-b√°o-function\"><a href=\"#khai-b%C3%A1o-function\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Khai b√°o function</h2>\n<p>M·ªôt javascript developer ƒë·ªÅu bi·∫øt c√°ch khai b√°o ch√≠nh quy n√†y</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">sayHelloWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>‚ÄúHello world‚Äù<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">sayHelloWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>1 c√°ch kh√°c, g·ªçi l√† <strong>function expression</strong>, ƒë·∫∑t bi·∫øn v√† g√°n n√≥ v√†o function</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">sayHelloWorld</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello World\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">sayHelloWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>C√°c callback ch√∫ng ta vi·∫øt ƒëi·ªÅu l√† function expression ki·ªÉu n√†y</p>\n<blockquote>\n<p>Function trong javascript c√≥ th·ªÉ xem nh∆∞ nh·ªØng gi√° tr·ªã kh√°c, c√≥ th·ªÉ truy·ªÅn v√†o nh∆∞ tham s·ªë cho function kh√°c</p>\n</blockquote>\n<h2 id=\"iife\"><a href=\"#iife\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>IIFE</h2>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">!</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello IIFE\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>N·∫øu copy ƒëo·∫°n n√†y d√°n v√†o console c·ªßa tr√¨nh duy·ªát, c√¢u <code class=\"language-inline-text\">alert</code> s·∫Ω xu·∫•t hi·ªán, nh∆∞ng n√≥ s·∫Ω kh√¥ng bao gi·ªù c√≥ th·ªÉ hi·ªán l·∫°i l·∫ßn n·ªØa</p>\n<blockquote>\n<p>function n√†y sau khi ho√†n th√†nh nhi·ªám v·ª•, n√≥ ƒëi lu√¥n kh√¥ng quay l·∫°i</p>\n</blockquote>\n<p>N·∫øu b·∫°n tinh √Ω, b·∫°n s·∫Ω th·∫Øc m·∫Øc t·∫°i sao l·∫°i c√≥ <code class=\"language-inline-text\">!</code> ph√≠a tr∆∞·ªõc function v·∫≠y?</p>\n<p>Khi javascript th·∫•y keyword <strong>function</strong> n√≥ s·∫Ω xem kh√∫c sau l√† ph·∫ßn khai b√°o cho function. Nh∆∞ng khi ch√∫ng ta th√™m <strong>!</strong> ph√≠a tr∆∞·ªõc, ch√∫ng ta ƒëang √©p javascript xem n√≥ l√† m·ªôt <strong>expression</strong>, nghƒ©a l√† ph·∫£i tr·∫£ v·ªÅ m·ªôt gi√° tr·ªã</p>\n<p>ƒêi·ªÅu th√∫ v·ªã l√† ·ªü ch·ªï <code class=\"language-inline-text\">{}()</code>, <strong>n√≥ ch·∫°y function n√†y lu√¥n</strong></p>\n<blockquote>\n<p>M·ªôt function g·ªçi lu√¥n sau khi t·∫°o, g·ªçi xong th√¨ h·∫øt g·ªçi l·∫°i ƒë∆∞·ª£c g·ªçi l√† IIFE</p>\n</blockquote>\n<p>Kh√¥ng nh·∫•t thi·∫øt ph·∫£i d√πng <code class=\"language-inline-text\">!</code>, b·∫°n c√≥ th·ªÉ d√πng <code class=\"language-inline-text\">+</code>, <code class=\"language-inline-text\">-</code>, <code class=\"language-inline-text\">~</code>, <code class=\"language-inline-text\">void</code> ƒë·ªÉ √©p n√≥ v·ªÅ <em>expression</em></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">void</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> ‚Ä¶ <span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>M·ªôt c√°ch kh√°c n·ªØa, c√°ch n√†y v·∫´n hay d√πng nh·∫•t</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// ho·∫∑c</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Ch√∫ng ta v·∫´n s·ª≠ d·ª•ng IIFE nh∆∞ m·ªôt module trong javascript (tr∆∞·ªõc ƒë√¢y), v√¨ n√≥ cho ch√∫ng ta ƒë∆∞a bi·∫øn v√†o m·ªôt <em>ƒë·∫∑c khu kinh t·∫ø</em>, nh·ªØng th·∫±ng kh√°c s·∫Ω kh√¥ng truy c·∫≠p ƒë∆∞·ª£c bi·∫øn khai b√°o b√™n trong IIFE</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">initGame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// bi·∫øn private</span>\n\t<span class=\"token keyword\">var</span> live\n\t<span class=\"token keyword\">var</span> weapon\n\n\t<span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token comment\">// function private</span>\n\t<span class=\"token keyword\">function</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tlive <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n\t\tweapon <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>T·∫•t nhi√™n n·∫øu l√† module, th√¨ ph·∫£i c√≥ nh·ªØng th·ª© public ƒë·ªÉ th·∫±ng kh√°c g·ªçi t·ªõi, mu·ªën th·∫±ng n√†o public ch√∫ng ta return l√† ƒë∆∞·ª£c</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token function\">initGame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token comment\">// bi·∫øn private</span>\n\t<span class=\"token keyword\">var</span> live\n<span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token comment\">// function private</span>\n\t<span class=\"token keyword\">function</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tlive <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token literal-property property\">init</span><span class=\"token operator\">:</span> init\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>N·∫øu mu·ªën truy·ªÅn v√†o tham s·ªë cho IIFE </p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token constant\">IIFE</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">msg<span class=\"token punctuation\">,</span> times</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> times<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello!\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"es6-module\"><a href=\"#es6-module\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>ES6 Module</h2>\n<p>Khi ES6 ra ƒë·ªùi, c√°ch vi·∫øt IIFE kh√¥ng c√≤n ƒë∆∞·ª£c ‚Äúth·ªãnh h√†nh‚Äù nh∆∞ tr∆∞·ªõc</p>\n<p>Th√≠ d·ª•, tr∆∞·ªõc ƒë√¢y ƒë·ªÉ bi·∫øn private</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> scoped <span class=\"token operator\">=</span> <span class=\"token number\">42</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>scoped<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ReferenceError</span></code></pre></div>\n<p>Gi·ªù c√≥ <code class=\"language-inline-text\">let</code> v√† <code class=\"language-inline-text\">const</code> ƒë·∫∑t n√≥ v√†o block l√† xem nh∆∞ private</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> scoped <span class=\"token operator\">=</span> <span class=\"token number\">42</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>scoped<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ReferenceError</span></code></pre></div>\n<p>C√°ch vi·∫øt n√†y g·ªçn g√†ng, nh√¨n v√†o ai c≈©ng hi·ªÉu, ko c·∫ßn gi·∫£i th√≠ch nhi·ªÅu nh∆∞ IIFE</p>\n<p>Module ƒë∆∞·ª£c hi·ªÉu l√† <strong>t·ª´ng file</strong> javascript, nh·ªØng g√¨ kh√¥ng <code class=\"language-inline-text\">export</code> l√† private h·∫øt</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// myModule.js</span>\n<span class=\"token keyword\">let</span> counter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    counter<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>    \n\n<span class=\"token comment\">// logic.js</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> increment <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'myModule.js'</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>B√†i vi·∫øt ƒë√£ tham kh·∫£o</p>\n<ul>\n<li>üìú <a href=\"https://medium.com/@vvkchandra/essential-javascript-mastering-immediately-invoked-function-expressions-67791338ddc6\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Mastering Immediately-Invoked Function Expressions ‚Äï Chandra Gundamaraju</a></li>\n<li>üìú <a href=\"https://hashnode.com/post/do-es6-modules-make-the-case-of-iifes-obsolete-civ96wet80scqgc538un20es0\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Do ES6 Modules make the case of IIFEs obsolete?</a></li>\n</ul>\n","cover_image":"","related":[{"id":"dec66a9345d632cbe065f67437fb0729","path":"/2018-02-14-huong-dan-redux-la-gi-tai-sao-phai-dung/","title":"Redux l√† g√¨ v√† t·∫°i sao ph·∫£i d√πng?","desc":"N·∫øu ƒë√£ ƒë·ª•ng t·ªõi React th√¨ s·ªõm mu·ªôn g√¨ b·∫°n c≈©ng s·∫Ω nghe ƒë·∫øn Redux"},{"id":"9f5f4f8c111294ac9f85e2f30e060a75","path":"/2018-05-25-huong-dan-viet-code-javascript-tot-hon-voi-webpack/","title":"Webpack l√† g√¨ v√† t·∫°i sao ta ph·∫£i x√†i n√≥","desc":"B√†i n√†y s·∫Ω n√≥i r√µ t·∫°i sao Webpack l√† s·ª± l·ª±a ch·ªçn s√°ng su·ªët cho bundle javascript"},{"id":"d8d14c17494c1b1d1eacf29f78543356","path":"/2019-10-18-7-cau-hoi-phong-van-lac-leo-voi-js/","title":"7 C√¢u h·ªèi ph·ªèng v·∫•n l·∫Øc l√©o v·ªõi Javascript","desc":"Th·ª≠ ki·∫øn th·ª©c javascript c·ªßa b·∫°n ƒë√£ ƒë·ªß cho cu·ªôc ph·ªèng v·∫•n cam go s·∫Øp t·ªõi ch∆∞a"},{"id":"bb5b6842e1c4dfe15bf0b527c27b770d","path":"/2018-06-24-huong-dan-lam-viec-voi-console-trong-javascript/","title":"L√†m vi·ªác v·ªõi console trong javascript","desc":"M·ªôt web developer ch√¢n ch√≠nh l√† ng∆∞·ªùi bi·∫øt s·ª≠ d·ª•ng console.log :D. Tuy nhi√™n c≈©ng n√™n bi·∫øt r·∫±ng console n√≥ c√≤n r·∫•t nhi·ªÅu ph∆∞∆°ng th·ª©c kh√°c n·ªØa"}]}},"context":{}}