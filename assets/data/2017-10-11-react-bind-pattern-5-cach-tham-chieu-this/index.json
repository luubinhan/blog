{"hash":"781cb6d1d05b3001a1fbd40f8663d969bc85d117","data":{"post":{"title":"React Bind Pattern: 5 cách chỉ định tham chiếu this","path":"/2017-10-11-react-bind-pattern-5-cach-tham-chieu-this/","slug":"/2017-10-11-react-bind-pattern-5-cach-tham-chieu-this","date":"2017-10-11","timeToRead":2,"tags":[{"id":"react","title":"react","path":"/tag/react/"},{"id":"javascript","title":"javascript","path":"/tag/javascript/"}],"desc":"Để thay đổi ngữ cảnh của chữ this trong javascript, sử dụng ở đâu và như thế nào cho hợp lý nhất","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-reactcreateclass\">Sử dụng <code class=\"language-inline-text\">React.createClass</code></a></li>\n<li><a href=\"#bind-trong-l%C3%BAc-render\">Bind trong lúc render</a></li>\n<li><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-arrow-function\">Sử dụng Arrow function</a></li>\n<li><a href=\"#bind-trong-cunstructor\">Bind trong cunstructor</a></li>\n<li><a href=\"#s%E1%BB%AD--d%E1%BB%A5ng-arrow-function-trong-thu%E1%BB%99c-t%C3%ADnh-c%E1%BB%A7a-class\">Sử  dụng <code class=\"language-inline-text\">Arrow Function</code> trong thuộc tính của class</a></li>\n</ul>\n<!-- /TOC -->\n<h1 id=\"sử-dụng-reactcreateclass\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-reactcreateclass\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sử dụng <code class=\"language-inline-text\">React.createClass</code></h1>\n<p>Nếu sử dụng <code class=\"language-inline-text\">React.createClass</code> react tự động <strong>bind toàn bộ</strong> từ khóa <code class=\"language-inline-text\">this</code></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> Contacts <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Tuy nhiên từ khi ES6 có hỗ trợ <code class=\"language-inline-text\">class</code>, React.createClass có thể bị tách ra các release trong tương lai.</p>\n<h1 id=\"bind-trong-lúc-render\"><a href=\"#bind-trong-l%C3%BAc-render\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Bind trong lúc render</h1>\n<p>Nếu khai báo một component React bằng cách <code class=\"language-inline-text\">extends React.Component</code>, <code class=\"language-inline-text\">this</code> sẽ không được tự động bind như đã nói ở trên</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Contacts</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Cách này tuy là sạch sẽ gọn ràng dễ hiểu, tuy nhiên lại ảnh hưởng nhiều tới performance vì mỗi function sẽ <em>reallocated</em> lúc render. <strong>Kinh nghiệm không bind bằng cách này</strong></p>\n<h1 id=\"sử-dụng-arrow-function\"><a href=\"#s%E1%BB%AD-d%E1%BB%A5ng-arrow-function\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sử dụng Arrow function</h1>\n<p>Tương tự như cách trên, sử dụng <strong>arrow function</strong> để không thay đổi giá trị của <code class=\"language-inline-text\">this</code> lúc render</p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Contacts</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handChange<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Cách này cũng không nên làm vì ảnh hương tới performance luôn</p>\n<h1 id=\"bind-trong-cunstructor\"><a href=\"#bind-trong-cunstructor\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Bind trong cunstructor</h1>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleChange</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Đây là cách được khuyến cáo sử dụng, nếu thật sự quan tâm tới performance thì nên sử dụng cách này khi muốn bind từ khóa <code class=\"language-inline-text\">this</code>.</p>\n<h1 id=\"sử--dụng-arrow-function-trong-thuộc-tính-của-class\"><a href=\"#s%E1%BB%AD--d%E1%BB%A5ng-arrow-function-trong-thu%E1%BB%99c-t%C3%ADnh-c%E1%BB%A7a-class\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Sử  dụng <code class=\"language-inline-text\">Arrow Function</code> trong thuộc tính của class</h1>\n<p>Muốn sử dụng cách này, phải bật tính năng <em>transform-class-properties</em> trong Babel, xem thêm package này tại <a href=\"http://babeljs.io/docs/plugins/transform-class-properties\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://babeljs.io/docs/plugins/transform-class-properties</a></p>\n<div class=\"gridsome-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function-variable function\">handleChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// call this function from render </span>\n  <span class=\"token comment\">// and this.whatever in here works fine.</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Đây cũng là cách mà mình thường sử dụng nhất vì vừa sạch vừa tốt cho performance</p>\n","cover_image":"","related":[{"id":"5056f121bf99a2d9c1b987942c928592","path":"/2020-07-21-5-cau-hoi-phong-van-javascript/","title":"5 câu hỏi javascript và cách đánh bại chúng","desc":"Mỗi công ty mỗi kiểu phỏng vấn, điều hay bị phàn nàn trong các buổi phỏng vấn là phần lớn nó không liên quan tới những công việc hằng ngày mà vị trí đó đòi hỏi."},{"id":"83955bb941ea7b4b3979e074ed210fcf","path":"/2018-12-30-mot-so-pattern-hay-su-dung-trong-react/","title":"5 cách viết hay sử dụng trong React","desc":"Điểm qua 6 React Pattern hay gặp trong React"},{"id":"5832f92b763d62bb1a48e35b5132666e","path":"/2020-10-01-composition-la-cai-chi-chi/","title":"Composition là cái chi chi","desc":"Nhớ về 5 anh em siêu nhân kết hợp thành một con robot mãnh thú"},{"id":"8eedc3591fcf6d3c79f1d05a3ad61ae6","path":"/2018-04-04-huong-dan-danh-sach-doi-choi-voi-react-native/","title":"Danh sách đồ chơi để bắt đầu với React Native","desc":"Để bắt đầu và đào sâu vọc vạch với React Native, bạn sẽ cần đụng tới những món đồ chơi sau"}]}},"context":{}}