{"hash":"f761b32cc486b7bfe2ae86510c063c7ac35e02e7","data":{"post":{"title":"S·ª≠ d·ª•ng flat state trong Vue Store","path":"/su-dung-flat-state-trong-vue-store/","slug":"/2019-10-12-flat-state-trong-vue-store-de-toi-uu-toc-do","date":"2019-10-12","timeToRead":4,"tags":[{"id":"vuejs","title":"vuejs","path":"/tag/vuejs/"}],"desc":"Nh√©t nh·ªØng t·∫≠p d·ªØ li·ªáu l·ªõn trong Vuex store, ƒë·∫∑c bi·ªát l√† c√°c c·∫•u tr√∫c d·ªØ li·ªáu l·ªìng nhau lu√¥n g√¢y ra v·∫•n ƒë·ªÅ kh√¥ng s·ªõm th√¨ mu·ªôn. B√†i vi·∫øt gi·ªõi thi·ªáu c√°ch ti·∫øp c·∫≠n v·ªõi flat state trong Vuex store","content":"<p>ƒê·∫ßu ti√™n ch√∫ng ta c·∫ßn tr·∫£ l·ªùi c√¢u h·ªèi <strong>global state</strong> c√≥ ph·∫£i l√† ph∆∞∆°ng thu·ªëc ch·ªØa <em>b√° b·ªánh</em> cho c√°c v·∫•n ƒë·ªÅ li√™n quan t·ªõi <code>state</code>? M√¨nh ch·ªâ ƒë∆∞a d·ªØ li·ªáu v√†o Vuex store nh∆∞ l√† l·ª±a ch·ªçn cu·ªëi c√πng v√† c√≥ m·ªôt l√Ω do c·ª• th·∫ø ƒë·ªÉ ph·∫£i s·ª≠ d·ª•ng. ƒêi·ªÅu th·ª© 2, lu√¥n gi·ªØ global state ·ªü d·∫°ng c√¢y m·ªôt c·∫•p, nghƒ©a l√† ch√∫ng ta kh√¥ng l·ªìng d·ªØ li·ªáu li·ªáu v√†o nhau nh∆∞ b√™n d∆∞·ªõi</p>\n<p>ƒê·ªçc th√™m <a href=\"https://markus.oberlehner.net/blog/should-i-store-this-data-in-vuex/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://markus.oberlehner.net/blog/should-i-store-this-data-in-vuex/</a> ƒë·ªÉ c√≥ kh√°i ni·ªám khi n√†o c·∫ßn d·ªØ li·ªáu trong store v√† khi n√†o kh√¥ng.</p>\n<p>Quan ƒëi·ªÉm v·ªÅ flat state (kh√¥ng l∆∞u d·ªØ li·ªáu l·ªìng nhau trong store) ƒë∆∞·ª£c l·∫•y c·∫£m h·ª©ng t·ª´ ch√∫ <a href=\"https://twitter.com/biilmann\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Matt Biilmann</a> chia s·∫Ω v·ªÅ quan ƒëi·ªÉm v·ªÅ Redux sau khi l√†m c√°i dashboard cho Netlify trong b√†i ph·ªèng v·∫•n <a href=\"http://www.fullstackradio.com/122\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Architecting the Netlify Dashboard with React and Redux</a></p>\n<pre class=\"language-json\"><code class=\"language-json\">cap_1<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    cap_2<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        cap_3<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<blockquote>\n<p>R·∫•t kh√≥ ƒë·ªÉ sync d·ªØ li·ªáu ·ªü d·∫°ng l·ªìng gh√©p nh∆∞ v·∫≠y.</p>\n</blockquote>\n<p>V√≠ d·ª•, c√≥ danh s√°ch b√†i vi·∫øt, m·ªói b√†i vi·∫øt ƒë∆∞·ª£c nh√©t th√¥ng tin t√°c gi·∫£ b√™n trong, c√≥ nhi·ªÅu b√†i vi·∫øt c√≥ c√πng m·ªôt t√°c gi·∫£, r·ªìi ng√†y ƒë·∫πp tr·ªùi t√°c gi·∫£ n√†y ƒë·ªïi t√™n, th√¨ ch√∫ng ta ph·∫£i ƒëi sync l·∫°i to√†n b·ªô t·∫•t c·∫£ b√†i vi·∫øt c·ªßa ·ªïng.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> articles <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token comment\">// b√†i vi·∫øt n√†y ƒë∆∞·ª£c load tr∆∞·ªõc</span>\n  <span class=\"token punctuation\">{</span>\n    author<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      avatar<span class=\"token operator\">:</span> <span class=\"token string\">'https://picsum.photos/id/1011/25'</span><span class=\"token punctuation\">,</span>\n      id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      name<span class=\"token operator\">:</span> <span class=\"token string\">'Jane Doe'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    intro<span class=\"token operator\">:</span> <span class=\"token string\">'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'</span><span class=\"token punctuation\">,</span>\n    title<span class=\"token operator\">:</span> <span class=\"token string\">'Lorem Ipsum'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// t√°c gi·∫£ ƒë√≥ ·ªïng v√¥ ƒë·ªïi avatar,</span>\n  <span class=\"token comment\">// r·ªìi ch√∫ng ta load th√™m b√†i vi·∫øt</span>\n  <span class=\"token comment\">// avatar c·ªßa ·ªïng ƒë√£ kh√¥ng c√≤n nh∆∞ x∆∞a</span>\n  <span class=\"token punctuation\">{</span>\n    author<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      avatar<span class=\"token operator\">:</span> <span class=\"token string\">'https://picsum.photos/id/2000/25'</span><span class=\"token punctuation\">,</span>\n      id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      name<span class=\"token operator\">:</span> <span class=\"token string\">'Jane Doe'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    id<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    intro<span class=\"token operator\">:</span> <span class=\"token string\">'Stet clita kasd gubergren, no sea takimata sanctus est.'</span><span class=\"token punctuation\">,</span>\n    title<span class=\"token operator\">:</span> <span class=\"token string\">'Dolor sit'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre>\n<p>C√°ch m√† ch√∫ng ta n√™n l∆∞u, t√°ch ri√™ng 2 th·∫±ng</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> articles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token number\">1</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    author<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    intro<span class=\"token operator\">:</span> <span class=\"token string\">'Lorem ipsum dolor sit amet, consetetur sadipscing elitr.'</span><span class=\"token punctuation\">,</span>\n    title<span class=\"token operator\">:</span> <span class=\"token string\">'Lorem Ipsum'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token number\">2</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    author<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    id<span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    intro<span class=\"token operator\">:</span> <span class=\"token string\">'Stet clita kasd gubergren, no sea takimata sanctus est.'</span><span class=\"token punctuation\">,</span>\n    title<span class=\"token operator\">:</span> <span class=\"token string\">'Dolor sit'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> authors <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token number\">1</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    avatar<span class=\"token operator\">:</span> <span class=\"token string\">'https://picsum.photos/id/2000/25'</span><span class=\"token punctuation\">,</span>\n    id<span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'Jane Doe'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<p>Nh·ªØng ki·ªÉu th·ª±c th·ªÉ kh√°c nhau, ch√∫ng ta t√°ch ra th√†nh c√°c module ri√™ng bi·ªát, d√πng kh√°i ni·ªám <strong>foreign key</strong> (kh√≥a ngo·∫°i) nh∆∞ trong database</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// src/store/modules/article.js</span>\n<span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token maybe-class-name\">Vue</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> normalizeRelations<span class=\"token punctuation\">,</span> resolveRelations <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'../helpers'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">import</span> <span class=\"token imports\">articleService</span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'../../services/article'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  byId<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  allIds<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> getters <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// tr·∫£ v·ªÅ m·ªôt article v·ªõi gi√° tr·ªã id ƒë∆∞·ª£c truy·ªÅn v√†o</span>\n  <span class=\"token function-variable function\">find</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> _<span class=\"token punctuation\">,</span> __<span class=\"token punctuation\">,</span> rootGetters</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token parameter\">id</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// d√πng ID ƒë·ªÉ l·∫•y th√¥ng tin t√°c gi·∫£</span>\n    <span class=\"token keyword control-flow\">return</span> <span class=\"token function\">resolveRelations</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">.</span><span class=\"token property-access\">byId</span><span class=\"token punctuation\">[</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'author'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> rootGetters<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// tr·∫£ v·ªÅ danh s√°ch articles</span>\n  <span class=\"token function-variable function\">list</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> getters</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword control-flow\">return</span> state<span class=\"token punctuation\">.</span><span class=\"token property-access\">allIds</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span> <span class=\"token arrow operator\">=></span> getters<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">find</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> actions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">load</span><span class=\"token operator\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> commit <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> articles <span class=\"token operator\">=</span> <span class=\"token keyword control-flow\">await</span> articleService<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">list</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    articles<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'add'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">normalizeRelations</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'author'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// th√™m ho·∫∑c update order</span>\n      <span class=\"token function\">commit</span><span class=\"token punctuation\">(</span><span class=\"token string\">'author/add'</span><span class=\"token punctuation\">,</span> item<span class=\"token punctuation\">.</span><span class=\"token property-access\">author</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        root<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> mutations <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">add</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> item</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token maybe-class-name\">Vue</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">set</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">.</span><span class=\"token property-access\">byId</span><span class=\"token punctuation\">,</span> item<span class=\"token punctuation\">.</span><span class=\"token property-access\">id</span><span class=\"token punctuation\">,</span> item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword control-flow\">if</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">.</span><span class=\"token property-access\">allIds</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">includes</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span><span class=\"token property-access\">id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword control-flow\">return</span><span class=\"token punctuation\">;</span>\n    state<span class=\"token punctuation\">.</span><span class=\"token property-access\">allIds</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">push</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span><span class=\"token property-access\">id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">{</span>\n  actions<span class=\"token punctuation\">,</span>\n  getters<span class=\"token punctuation\">,</span>\n  mutations<span class=\"token punctuation\">,</span>\n  namespaced<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  state<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// src/store/helpers.js</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">normalizeRelations</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">,</span> fields</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token spread operator\">...</span>data<span class=\"token punctuation\">,</span>\n    <span class=\"token spread operator\">...</span>fields<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev<span class=\"token punctuation\">,</span> field</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token spread operator\">...</span>prev<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span>field<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Array</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">isArray</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">[</span>field<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">?</span> data<span class=\"token punctuation\">[</span>field<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span> <span class=\"token arrow operator\">=></span> x<span class=\"token punctuation\">.</span><span class=\"token property-access\">id</span><span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">:</span> data<span class=\"token punctuation\">[</span>field<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">id</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">resolveRelations</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">,</span> fields<span class=\"token punctuation\">,</span> rootGetters</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token spread operator\">...</span>data<span class=\"token punctuation\">,</span>\n    <span class=\"token spread operator\">...</span>fields<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev<span class=\"token punctuation\">,</span> field</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token spread operator\">...</span>prev<span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span>field<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Array</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">isArray</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">[</span>field<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">?</span> data<span class=\"token punctuation\">[</span>field<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span> <span class=\"token arrow operator\">=></span> rootGetters<span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>field<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/find</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">:</span> rootGetters<span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>field<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/find</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">[</span>field<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>S·ª≠ d·ª•ng</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ArticleList</span> <span class=\"token attr-name\">:articles</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>articles<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token comment\">// src/App.vue</span>\n<span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> mapActions<span class=\"token punctuation\">,</span> mapGetters <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'vuex'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token maybe-class-name\">ArticleList</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'./components/ArticleList'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'App'</span><span class=\"token punctuation\">,</span>\n  components<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token maybe-class-name\">ArticleList</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  computed<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token spread operator\">...</span><span class=\"token method function property-access\">mapGetters</span><span class=\"token punctuation\">(</span><span class=\"token string\">'article'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> articles<span class=\"token operator\">:</span> <span class=\"token string\">'list'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">created</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">loadArticles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  methods<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token spread operator\">...</span><span class=\"token method function property-access\">mapActions</span><span class=\"token punctuation\">(</span><span class=\"token string\">'article'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> loadArticles<span class=\"token operator\">:</span> <span class=\"token string\">'load'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Trong component <code>App.vue</code> ch√∫ng ta l·∫•y c√°c getter v√† action trong <code>article</code> module, khi v·ª´a kh·ªüi t·∫°o component, g·ªçi action <code>loadArticle</code> ƒë·ªÉ l·∫•y d·ªØ li·ªáu</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ArticleList<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span>\n      <span class=\"token attr-name\">v-for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>article in articles<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">:key</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>article.id<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span>{{ article.title }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>{{ article.intro }}<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ArticleList__author<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ArticleList__avatar<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">:src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>article.author.avatar<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">:alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>article.author.name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        {{ article.author.name }}\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'ArticleList'</span><span class=\"token punctuation\">,</span>\n  props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    articles<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      required<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      type<span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">Array</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Nh·ªù v√†o c√°c h√†m getter v√† <code>resolveRelations()</code>, ch√∫ng ta c√≥ th·ªÉ d·ªÖ d√†ng truy c·∫≠p author c·ªßa t·ª´ng article</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://markus.oberlehner.net/blog/make-your-vuex-state-flat-state-normalization-with-vuex/\">üìú Make your Vuex State Flat: State Normalization with Vuex</a></p>\n","cover_image":"","related":[{"id":"48aae53889a858c9c8e7e9f9428f8b84","path":"/function-component-trong-vue/","title":"Function Component trong Vue","desc":"Kh√¥ng ƒë∆∞·ª£c xu·∫•t ch√∫ng nh∆∞ l√† function component c·ªßa React, n√™n function component trong Vue kh√¥ng c√≥ nhi·ªÅu ng∆∞·ªùi ƒë·ªÉ √Ω. Hy v·ªçng t∆∞∆°ng lai n√≥ s·∫Ω ƒë∆∞·ª£c n√¢ng c·∫•p ƒë·ªÉ c·∫°nh tranh v·ªõi b√™n React ƒëang qu·∫£ng b√° qu√° r·∫ßm r·ªô."},{"id":"34e1a6e4e7dac657edca4c9832d737dc","path":"/su-dung-tabindex/","title":"S·ª≠ d·ª•ng tabindex","desc":"M·∫∑c ƒë·ªãnh th·ª© t·ª± tab theo v·ªã tr√≠ c·ªßa DOM r·∫•t h·ªØu d·ª•ng, tuy nhi√™n c√≥ tr∆∞·ªùng h·ª£p ch√∫ng ta s·∫Ω mu·ªën thay ƒë·ªïi th·ª© t·ª± tab n√†y. C√πng nghi√™n c·ª©u tabindex ƒë·ªÉ set th·ª© t·ª± tab"},{"id":"24b7e84e1d0d2990366d4f07829affcb","path":"/nhung-ung-dung-tuyet-voi-cua-renderless-component-trong-vue/","title":"Nh·ªØng ·ª©ng d·ª•ng tuy·ªát v·ªùi c·ªßa Renderless component trong Vue","desc":"C√πng ƒëi·ªÉm qua c√°c ph∆∞∆°ng ph√°p ƒë·ªÉ gi·∫£i quy·∫øt b√†i to√°n 'DRY' trong Vue, c√°c b·∫°n s·∫Ω bi·∫øt th√™m c√°c k·ªπ thu·∫≠t t∆∞∆°ng ƒë·ªëi n√¢ng cao ƒë·ªÉ l√™n b·∫≠t Vue l√£o l√†ng."},{"id":"349aadd0da40a81b9f8c94db06172ce3","path":"/su-dung-use-reducer-va-use-context-de-lam-global-state/","title":"S·ª≠ d·ª•ng useReducer v√† useContext ƒë·ªÉ l√†m global state","desc":""}]}},"context":{}}