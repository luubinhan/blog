{"hash":"2a4106ecca1a0d3da8cd127d6742ebf19d0f0109","data":{"post":{"title":"6 vÃ­ dá»¥ Ä‘á»ƒ báº¡n yÃªu luÃ´n observable","path":"/2019-07-09-6-vi-du-giup-ban-yeu-luon-rxjs-observable/","date":"2019-07-09","timeToRead":6,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"},{"id":"thu-thuat","title":"thu-thuat","path":"/tag/thu-thuat/"}],"desc":"ThÃªm nhá»¯ng lÃ½ do Ä‘á»ƒ dá»¥ dá»— báº¡n xÃ i Observable","content":"<!-- TOC -->\n<ul>\n<li><a href=\"#Handle-c%C3%A1c-event-b%E1%BA%B1ng-Observable\">Handle cÃ¡c event báº±ng Observable</a></li>\n<li><a href=\"#Operator-operator\">Operator, operator</a></li>\n<li><a href=\"#Ai-c%C3%B3-th%E1%BB%83-l%C3%A0-Observable\">Ai cÃ³ thá»ƒ lÃ  Observable</a></li>\n<li><a href=\"#Observable-cho-c%C3%A1c-HTTP-request\">Observable cho cÃ¡c HTTP request</a></li>\n<li><a href=\"#K%E1%BA%BFt-h%E1%BB%A3p-c%C3%A1c-Observable\">Káº¿t há»£p cÃ¡c Observable</a></li>\n<li><a href=\"#K%E1%BA%BFt\">Káº¿t</a></li>\n</ul>\n<!-- /TOC -->\n<p><strong>Observable</strong> mÃ¬nh dá»‹ch ra tiáº¿ng viá»‡t tháº¿ nÃ y cho báº¡n dá»… hÃ¬nh dung. Má»™t khi báº¡n báº­t cháº¿ Ä‘á»™ <code class=\"language-text\">observable</code> vá»›i má»™t Ä‘á»©a con gÃ¡i nÃ o Ä‘Ã³, lÃ  báº¡n Ä‘ang trong giai Ä‘oáº¡n bá»‹ nÃ³ Ã¡m áº£nh, nháº¥t cá»­ nháº¥t Ä‘á»™ng cá»§a nÃ³ báº¡n Ä‘iá»u Ä‘á»ƒ Ã½, nÃ³ háº¯c xÃ¬ báº¡n cÅ©ng biáº¿t, má»™t tuáº§n nÃ³ máº·c máº¥y bá»™ Ä‘á»“ báº¡n cÅ©ng biáº¿t. Chá»‰ cáº§n nghe tiáº¿ng bÆ°á»›c chÃ¢n lÃ  báº¡n biáº¿t Ä‘Æ°á»£c hÃ´m nay nÃ³ mang Ä‘Ã´i dÃ©p gÃ¬ (má»©c Ä‘á»™ nÃ y hÆ¡i kinh khá»§ng láº¯m rá»“i) lÃ  báº¡n cÃ³ nhá»¯ng pháº£n xáº¡ vÃ´ Ä‘iá»u kiá»‡n bá»™c phÃ¡t nÆ¡i cá»­a miá»‡ng \"Chiá»u nay trá»i mÆ°a nhe em, mang dÃ©p lÃ o Ä‘i cho chuáº©n\". Pháº£n xáº¡ nÃ y lÃ  gá»i lÃ  <strong>subscription</strong></p>\n<p>Rá»“i quay láº¡i vá»›i váº¥n Ä‘á» ká»¹ thuáº­t, bÃ i nÃ y khÃ´ng giáº£i thÃ­ch rÃµ Observable pattern, cÃ¡c khÃ¡i niá»‡m chÃ­nh cá»§a nÃ³, náº¿u muá»‘n báº¡n Ä‘á»c láº¡i bÃ i nÃ y trÆ°á»›c Ä‘Ã¢y <a href=\"https://luubinhan.github.io/blog/2018-10-30-gioi-thieu-reactive-programing-trong-javascript\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">cÃ³ viáº¿t rá»“i</a>, nhÆ° cÃ¡i tá»±a bÃ i viáº¿t nÃ³ spoil háº¿t cÃ¡i ná»™i dung rá»“i \"VÃ­ dá»¥ Ä‘á»ƒ tháº¥y táº¡i sao chÃºng ta nÃªn <em>báº­t cháº¿ Ä‘á»™</em> Observable vá»›i má»™t em gÃ¡i nÃ o Ä‘Ã³\"</p>\n<p>Tháº§n chÃº mÃ¬nh muá»‘n báº¡n thuá»™c láº§u</p>\n<blockquote>\n<p>Láº­p trÃ¬nh Reactive lÃ  lÃ m viá»‡c vá»›i luá»“ng dá»¯ liá»‡u báº¥t Ä‘á»“ng bá»™</p>\n</blockquote>\n<p>Láº¡i pháº£i giáº£i thÃ­ch cÃ¢u nÃ y chÃºt, <strong>Náº¿u nhá»¯ng gÃ¬ diá»…n ra trÃªn á»©ng dá»¥ng Ä‘ang xáº£y ra má»™t cÃ¡ch báº¥t Ä‘á»“ng bá»™, kháº£ nÄƒng ráº¥t cao lÃ  Observable sáº½ giÃºp Ã­ch cho cuá»™c sá»‘ng cá»§a anh em chÃºng ta bá»›t khá»• hÆ¡n</strong>.</p>\n<p>CÃ³ nhiá»u cÃ¡ch lÃ m vÃ  thÆ° viá»‡n handle vá»¥ luá»“ng dá»¯ liá»‡u báº¥t Ä‘á»“ng bá»™ nÃ y, tuy nhiÃªn, Observable cÃ³ gÃ¬ mÃ  cool, sáº¯p Ä‘Æ°á»£c chuáº©n hÃ³a vÃ  Ä‘Æ°a vÃ o ECMAScript. ThÆ° viá»‡n RxJS Ä‘ang Ä‘Æ°á»£c sá»­ dá»¥ng rá»™ng rÃ£i vÃ  quÃ¡ ngon rá»“i.</p>\n<p>Rá»“i vÃ´ luÃ´n vÃ­ dá»¥ nhe</p>\n<h2 id=\"handle-cÃ¡c-event-báº±ng-observable\"><a href=\"#handle-c%C3%A1c-event-b%E1%BA%B1ng-observable\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Handle cÃ¡c event báº±ng Observable</h2>\n<p>ChÃºng ta cÃ³ 1 button, khi button nÃ y click táº¡o ra má»™t chuá»—i ngáº«u nhiÃªn. Viáº¿t báº±ng cáº£ 2 cÃ¡ch javascript thuáº§n, vÃ  sá»­ dá»¥ng RxJS</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> output <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'output'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbutton<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">e</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n    output<span class=\"token punctuation\">.</span><span class=\"token property-access\">textContent</span> <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toString</span><span class=\"token punctuation\">(</span><span class=\"token number\">36</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Báº±ng RxJS nÃ¨</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> button <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> output <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'output'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        output<span class=\"token punctuation\">.</span><span class=\"token property-access\">textContent</span> <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toString</span><span class=\"token punctuation\">(</span><span class=\"token number\">36</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<p>NÃ³ dÃ i hÆ¡n khi viáº¿t javascript thuáº§n mÃ  man ğŸ˜‚. Chi mÃ  phá»©c táº¡p váº­y? ÄÃºng luÃ´n, nhÆ°ng giá» thÃªm yÃªu cáº§u nÃ y vÃ o thÃ¬ sao: <em>á» má»—i láº§n click Ä‘áº¿n bá»™i sá»‘ cá»§a 3 ( 3,6,9,12,...) thÃ¬ má»›i random má»™t string má»›i</em></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">bufferCount</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// má»™t dÃ²ng duy nháº¥t</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        output<span class=\"token punctuation\">.</span><span class=\"token property-access\">textContent</span> <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toString</span><span class=\"token punctuation\">(</span><span class=\"token number\">36</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Váº­y báº¡n viáº¿t JS thÃ´i thÃ¬ sao, khá»i nÃ³i cÅ©ng biáº¿t nÃ³ sáº½ dÃ i dÃ²ng hÆ¡n.</p>\n<h2 id=\"operator-operator\"><a href=\"#operator-operator\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Operator, operator</h2>\n<p>Trong vÃ­ dá»¥ trÃªn, <code class=\"language-text\">.bufferCount</code> *Ä‘Ã£ cho tháº¥y sá»©c máº¡nh vÆ°á»£t trá»™i<strong> so vá»›i cÃ¡ch thÃ´ng thÆ°á»ng. CÃ³ thá»ƒ nÃ³i tháº¿ nÃ y, </strong>chÃºng ta xÃ i Observable nÃ y lÃ  vÃ¬ nhá»¯ng gÃ¬ chÃºng ta lÃ m Ä‘Æ°á»£c báº±ng operator**. Trong thÆ° viá»‡n RxJS nÃ³ cáº£ tÃ¡ Operator tha há»“ mÃ  chÆ¡i.</p>\n<p>Má»™t vÃ­ dá»¥ khÃ¡c, cÅ©ng lÃ  vá»¥ random string á»Ÿ trÃªn, mÃ  giá» chá»‰ muá»‘n random <strong>khi nÃ³ lÃ  má»™t cÃº triple click</strong> (má»™t phÃ¡t 3 nhÃ¡y, khÃ´ng pháº£i double click nhoa)</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> click$ <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nclick$<span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">bufferWhen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        click$<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// kkhoáº£ng thá»i gian cá»§a má»™t cÃº 3 click</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">events</span> <span class=\"token arrow operator\">=></span> events<span class=\"token punctuation\">.</span><span class=\"token property-access\">length</span> <span class=\"token operator\">>=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n        output<span class=\"token punctuation\">.</span><span class=\"token property-access\">textContent</span> <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toString</span><span class=\"token punctuation\">(</span><span class=\"token number\">36</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre>\n<p>Dá»Šch ra ngÃ´n ngá»¯ con ngÆ°á»i nÃ³ sáº½ nhÆ° tháº¿ nÃ y, <strong>trong khoáº£ng thá»i gian lÃ  400ms, trong Ä‘Ã¡m event Ä‘Æ°á»£c emit (tá»¥i nÃ y Ä‘Æ°á»£c Ä‘Æ°a vÃ o máº£ng <code class=\"language-text\">events</code>), náº¿u máº£ng nÃ y lá»›n hÆ¡n hoáº·c báº±ng 3, thá»±c hiá»‡n Ä‘á»‘ng viá»‡c Ä‘Ã£ Ä‘Äƒng kÃ½ bÃªn dÆ°á»›i <code class=\"language-text\">subscribe</code></strong></p>\n<p>Báº¡n Ä‘Ã£ báº¯t Ä‘áº§u yÃªu Observable chÆ°a? MÃ¬nh Ä‘Ã£ khoÃ¡i khoÃ¡i rá»“i Ä‘Ã³.</p>\n<h2 id=\"ai-cÃ³-thá»ƒ-lÃ --observable\"><a href=\"#ai-c%C3%B3-th%E1%BB%83-l%C3%A0--observable\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Ai cÃ³ thá»ƒ lÃ   Observable</h2>\n<p>ÄÆ¡n giáº£n, báº¥t ká»ƒ giÃ  tráº» lá»›n bÃ©, trai gÃ¡i, náº¿u RxJS cÃ³ hÃ m ( khi nÃ£y lÃ  <code class=\"language-text\">.fromEvent</code>) thÃ¬ chÃºng ta cÃ³ thá»ƒ biáº¿n nÃ³ thÃ nh Ä‘á»‘i tÆ°á»£ng bá»‹ theo dÃµi liÃªn tá»¥c.</p>\n<h2 id=\"observable-cho-cÃ¡c-http-request\"><a href=\"#observable-cho-c%C3%A1c-http-request\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Observable cho cÃ¡c HTTP request</h2>\n<p>Má»™t sá»©c máº¡nh <em>siÃªu nhiÃªn</em> khÃ¡c cá»§a RxJS: xá»­ lÃ½ máº¥y em HTTP request ráº¥t mÆ°á»£t mÃ </p>\n<p>VÃ­ dá»¥, fetching má»™t danh sÃ¡ch album vÃ  render.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> albumsApiUrl <span class=\"token operator\">=</span> <span class=\"token string\">'https://jsonplaceholder.typicode.com/albums'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">ajax</span><span class=\"token punctuation\">(</span>albumsApiUrl<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span>\n        <span class=\"token parameter\">res</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token parameter\">err</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span></code></pre>\n<p>Trá»™n chung vá»›i vÃ­ dá»¥ á»Ÿ trÃªn, chÃºng ta lÃ m cÃ¡i tÃ­nh nÄƒng awsome sau, click  lÃ  cÃ³ danh sÃ¡ch album ngáº«u nhiÃªn</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">flatMap</span><span class=\"token punctuation\">(</span>getAlbums<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span>\n        render<span class=\"token punctuation\">,</span>\n        <span class=\"token parameter\">err</span> <span class=\"token arrow operator\">=></span> <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getAlbums</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> userId <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">round</span><span class=\"token punctuation\">(</span><span class=\"token known-class-name class-name\">Math</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">ajax</span><span class=\"token punctuation\">(</span>\n        <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://jsonplaceholder.typicode.com/albums?userId=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>userId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n        <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<iframe height=\"265\" style=\"width: 100%;\" scrolling=\"no\" title=\"Observables 4\" src=\"//codepen.io/mmiszy/embed/WZOJjy/?height=265&theme-id=0&default-tab=js,result\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\">\n  See the Pen <a href='https://codepen.io/mmiszy/pen/WZOJjy/'>Observables 4</a> by MichaÅ‚ Miszczyszyn\n  (<a href='https://codepen.io/mmiszy'>@mmiszy</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n<p>VÃ­ dá»¥ trÃªn cÃ³ sá»­ dá»¥ng operator <code class=\"language-text\">flatMap</code>, 1 trong nhá»¯ng operator siÃªu kinh Ä‘iá»ƒn cá»§a RxJS, cho phÃ©p merge 2 máº£ng kiá»ƒu Observable thÃ nh 1</p>\n<p>Náº¿u chÃºng ta click liÃªn tá»¥c trong thá»i gian ngáº¯n, lÃ  cÃ³ váº¥n Ä‘á», re-render nhiá»u láº§n, chÃºng ta cÅ©ng ko xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c request nÃ o Ä‘Æ°á»£c resolve cuá»‘i cÃ¹ng. Cá»¥ thá»ƒ lÃ  tháº¿ nÃ y, cÃ³ thá»ƒ tháº±ng xuáº¥t phÃ¡t trÆ°á»›c láº¡i vá» Ä‘Ã­ch sau cÃ¹ng, chuyá»‡n cá»§a network ai mÃ  biáº¿t Ä‘Æ°á»£c thá»i Ä‘iá»ƒm Ä‘Ã³ nÃ³ download film gÃ¬ lÃ m cháº­m máº¡ng, tháº±ng request sau cÃ³ khi láº¡i vá» Ä‘Ã­ch trÆ°á»›c, nhÆ° váº­y thÃ¬ dÃ¹ng cá»¥c response lÃºc nÃ o Ä‘á»ƒ render, mÃ¬nh muá»‘n response cá»§a tháº±ng request cuá»‘i cÃ¹ng.</p>\n<p>Báº¡n muá»‘n, trong cÃ´ng cuá»™c tÃ¡n gÃ¡i, Ä‘á»©a nÃ o á»Ÿ láº¡i Ä‘áº¿n giÃ¢y phÃºt cuá»‘i cÃ¹ng lÃ  Ä‘á»©a chiáº¿n tháº¯ng, báº¡n sáº½ dáº¹p luÃ´n nhá»¯ng Ä‘á»©a nÃ o tháº£ thÃ­nh trÆ°á»›c Ä‘Ã³? VÃ­ von nhÆ° váº­y cÅ©ng chÆ°a chuáº©n, pháº£i lÃ  Ä‘á»©a nÃ o Ä‘áº¿n sau cÃ¹ng thÃ¬ dá»¯ láº¡i, dáº¹p máº¹ tá»¥i tá»›i trÆ°á»›c (tháº¿ nÃ y thÃ¬ báº¥t cÃ´ng vl máº¥y báº¡n)</p>\n<p>RxJS lÃ m Ä‘Æ°á»£c chuyá»‡n Ä‘Ã³ khÃ´ng? CÃ³ chá»©, <strong>má»i thá»© Ä‘Ã£ cÃ³ operator</strong>, chuyá»ƒn qua dÃ¹ng <code class=\"language-text\">switchMap</code>, sáº½ chá»‰ cÃ³ <strong>response cuá»‘i cÃ¹ng Ä‘Æ°á»£c render</strong>, máº¥y request trÆ°á»›c Ä‘Ã³ sáº½ bá»‹ cancel háº¿t</p>\n<p><img src=\"https://res.cloudinary.com/dukp6c7f7/image/upload/f_auto,fl_lossy,q_auto/s3-ghost/2017/09/Screen_Shot_2017_09_29_at_9_24_06_PM-1506713083152.png\"></p>\n<pre class=\"language-js{3}\"><code class=\"language-js{3}\">Rx.Observable\n    .fromEvent(button, 'click')\n    .switchMap(getAlbums)\n    .subscribe(\n        render,\n        err => console.error(err)\n    )</code></pre>\n<h2 id=\"káº¿t-há»£p-cÃ¡c-observable\"><a href=\"#k%E1%BA%BFt-h%E1%BB%A3p-c%C3%A1c-observable\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Káº¿t há»£p cÃ¡c Observable</h2>\n<p>Má»™t use case khÃ¡c mÃ  chÃºng ta gáº·p hoÃ i. Chá»©c nÄƒng filter hoáº¡t Ä‘á»™ng nhÆ° sau: cho tá»¥i user nháº­p vÃ o <code class=\"language-text\">user id</code> báº±ng <code class=\"language-text\">&lt;input /&gt;</code>, vÃ  chá»n thá»ƒ loáº¡i Ã¢m nháº¡c nÃ³ muá»‘n báº±ng <code class=\"language-text\">&lt;select /&gt;</code>. Äiá»u quan trá»ng lÃ  chá»‰ táº¡o request má»›i khi cáº£ 2 giÃ¡ trá»‹ trong Ä‘Ã³ Ä‘iá»u cÃ³ dá»¯ liá»‡u, vÃ  re-render khi má»™t trong 2 giÃ¡ trá»‹ nÃ y bá»‹ thay Ä‘á»•i.</p>\n<p>Táº¡o Observable trÆ°á»›c nhÃ©</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> id$ <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>input<span class=\"token punctuation\">,</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span> <span class=\"token arrow operator\">=></span> e<span class=\"token punctuation\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">value</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> resource$ <span class=\"token operator\">=</span> <span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">fromEvent</span><span class=\"token punctuation\">(</span>select<span class=\"token punctuation\">,</span> <span class=\"token string\">'change'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span> <span class=\"token arrow operator\">=></span> e<span class=\"token punctuation\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">value</span><span class=\"token punctuation\">)</span></code></pre>\n<p>ChÃºng ta pháº£i há»£p thá»ƒ 2 tháº±ng trÃªn vÃ o má»™t, Ä‘á»ƒ khi má»™t trong 2 tháº±ng cÃ³ thay Ä‘á»•i chÃºng ta láº¥y Ä‘Æ°á»£c giÃ¡ trá»‹ sau cÃ¹ng cá»§a cáº£ 2. <strong>má»i thá»© Ä‘Ã£ cÃ³ operator</strong>, nhiá»u láº¯m, á»Ÿ Ä‘Ã¢y dÃ¹ng <code class=\"language-text\">combineLatest</code></p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token maybe-class-name\">Rx</span><span class=\"token punctuation\">.</span><span class=\"token property-access\"><span class=\"token maybe-class-name\">Observable</span></span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">combineLatest</span><span class=\"token punctuation\">(</span>id$<span class=\"token punctuation\">,</span> resource$<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">switchMap</span><span class=\"token punctuation\">(</span>getResource<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token method function property-access\">subscribe</span><span class=\"token punctuation\">(</span>render<span class=\"token punctuation\">)</span></code></pre>\n<iframe height=\"265\" style=\"width: 100%;\" scrolling=\"no\" title=\"Observables 6\" src=\"//codepen.io/mmiszy/embed/mBwLoX/?height=265&theme-id=0&default-tab=js,result\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\">\n  See the Pen <a href='https://codepen.io/mmiszy/pen/mBwLoX/'>Observables 6</a> by MichaÅ‚ Miszczyszyn\n  (<a href='https://codepen.io/mmiszy'>@mmiszy</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n<h2 id=\"káº¿t\"><a href=\"#k%E1%BA%BFt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Káº¿t</h2>\n<p>Báº¡n Ä‘Ã£ tháº¥y sá»­ dá»¥ng Observable thÃº vá»‹ dÆ°á»ng nÃ o chÆ°a? Náº¿u cÃ¢u tráº£ lá»i lÃ  \"CÃ³ â¤ï¸, trá»n Ä‘á»i yÃªu em\", báº¡n hÃ£y nhÃ o vÃ´ document cá»§a nÃ³ Ä‘á»ƒ nghiÃªn cá»©u chuyÃªn sÃ¢u hÆ¡n. Hoáº·c <a href=\"https://luubinhan.github.io/blog/2018-10-30-gioi-thieu-reactive-programing-trong-javascript\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ä‘á»c láº¡i bÃ i trÆ°á»›c Ä‘Ã¢y cá»§a mÃ¬nh</a>.</p>\n<p>Náº¿u cÃ¢u tráº£ lá»i lÃ  \"No ğŸ’©, anh Ã©o care máº¥y Ä‘á»©a áº¡\". ThÃ¬ báº¡n cÅ©ng nÃªn bá»›t bá»›t Ä‘á»‘i xá»­ tá»‡ vá»›i nÃ³ Ä‘i, vÃ¬ trong tÆ°Æ¡ng lai JS sáº½ Ä‘Æ°a nÃ o vÃ o nhÆ° má»™t object chÃ­nh thá»©c luÃ´n, khÃ´ng cháº¡y Ä‘áº±ng trá»i Ä‘Æ°á»£c Ä‘Ã¢u cÃ¡c báº¡n áº¡.</p>\n<p>Hy vá»ng anh em hÃ´m nay Ä‘Ã£ há»c thÃªm Ä‘Æ°á»£c cÃ¡i gÃ¬ Ä‘Ã³ thÃº vá»‹, háº¹n gáº·p láº¡i anh em vÃ o má»™t viáº¿t thÃº vá»‹ khÃ¡c.</p>\n<p><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://x-team.com/blog/rxjs-observables/\">6 SIMPLE EXAMPLES WHICH WILL MAKE YOU LOVE OBSERVABLES (RXJS 5)</a></p>\n","cover_image":"","related":[{"id":"b45d95c79e56de678f72394cf1129275","path":"/2019-11-16-ban-luan-settimout-va-setinterval-trong-javascript/","title":"BÃ n luáº­n vá» setTimeout vÃ  setInterval trong javascript","desc":"Má»™t sá»‘ váº¥n Ä‘á» vá» setTimeout Ä‘Ã¡ng Ä‘á»ƒ báº¡n cÃ¢n nháº¯c trÆ°á»›c khi sá»­ dá»¥ng"},{"id":"4a99bac4278d70e64efde99b10ec74df","path":"/2016-11-20-phan-6-es6-can-ban-khai-bao-let-const/","title":"Há»“i 6: ES6 cÄƒn báº£n - Khai bÃ¡o biáº¿n vá»›i let vÃ  const","desc":"Há»“i 6 trong series ES6 cÄƒn báº£n, nÃ³i vá» khai bÃ¡o biáº¿n vá»›i let vÃ  const"},{"id":"6d5aa5f38fabe4c7ea0a45fedf201568","path":"/2018-10-30-gioi-thieu-reactive-programing-trong-javascript/","title":"Giá»›i thiá»‡u vá» Reactive Programing trong javascript","desc":"Reactive programing lÃ  khÃ¡i niá»‡m khÃ¡ trá»«u tÆ°á»£ng vÃ  khÃ³ tiáº¿p cáº­n vá»›i ngÆ°á»i má»›i báº¯t Ä‘áº§u, chuáº©n bá»‹ tinh tháº§n Ä‘á»c bÃ i nÃ y vÃ i láº§n trong vÃ i ngÃ y thÃ¬ má»›i mong tháº©m tháº¥u háº¿t"}]}},"context":{}}