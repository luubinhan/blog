{"hash":"08afebde8a18553ee035d598b7ec152099e4d381","data":{"post":{"title":"Quản lý state: nhận định boolean tốt và không tốt","path":"/2021-05-31-huong-dan-viet-boolean/","slug":"2021-05-31-huong-dan-viet-boolean","date":"2021-05-31","timeToRead":1,"tags":[{"id":"javascript","title":"javascript","path":"/tag/javascript/"},{"id":"beginner","title":"beginner","path":"/tag/beginner/"},{"id":"thu-thuat","title":"thu-thuat","path":"/tag/thu-thuat/"}],"desc":"","content":"<p>Tóm tắt nếu bạn lười đọc:</p>\n<blockquote>\n<p><code class=\"language-inline-text\">boolean</code> không tốt đại diện cho <code class=\"language-inline-text\">state</code>, <code class=\"language-inline-text\">boolean</code> tốt là kết quả tính từ <code class=\"language-inline-text\">state</code></p>\n</blockquote>\n<p>Một ví dụ dễ thấy nhất với <code class=\"language-inline-text\">boolean</code> không tốt là cách thiết kế <code class=\"language-inline-text\">state</code> như vầy</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> isLoading <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> isComplete <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> hasError <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Thoạt nhìn chúng ta sẽ nghĩ nó tốt. Chúng ta đưa ra 3 <code class=\"language-inline-text\">state</code> khác nhau ứng với 3 giá trị <code class=\"language-inline-text\">boolean</code> riêng biệt, chỉ duy nhất một giá trị là <code class=\"language-inline-text\">true</code> </p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">makeFetch</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  isLoading <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/users'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    isComplete <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    hasErrored <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  isLoading <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Nhưng khi nghĩ kỹ lại, chúng ta sẽ nhận được 2 giá trị <code class=\"language-inline-text\">true</code> nếu <code class=\"language-inline-text\">makeFetch</code> được gọi lại lần nữa</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">isLoading <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nisComplete <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\nhasError <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Vậy làm sao để thiết kế một <code class=\"language-inline-text\">boolean</code> tốt cho trường hợp trên?</strong></p>\n<p><code class=\"language-inline-text\">State</code> ở đây chúng ta sẽ có tất cả các giá trị sau</p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> statusEnum <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token literal-property property\">idle</span><span class=\"token operator\">:</span> <span class=\"token string\">'idle'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token literal-property property\">loading</span><span class=\"token operator\">:</span> <span class=\"token string\">'loading'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token literal-property property\">complete</span><span class=\"token operator\">:</span> <span class=\"token string\">'complete'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token literal-property property\">error</span><span class=\"token operator\">:</span> <span class=\"token string\">'error'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Và chúng ta dùng nó trong hàm <code class=\"language-inline-text\">makeFetch</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">makeFetch</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  status <span class=\"token operator\">=</span> statusEnum<span class=\"token punctuation\">.</span>loading<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/users'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    status <span class=\"token operator\">=</span> statusEnum<span class=\"token punctuation\">.</span>complete<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    status <span class=\"token operator\">=</span> statusEnum<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Cần giá trị <code class=\"language-inline-text\">boolean</code> bạn <em>tính</em> từ giá trị <code class=\"language-inline-text\">state</code></p>\n<div class=\"gridsome-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isLoading</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> status <span class=\"token operator\">===</span> statusEnum<span class=\"token punctuation\">.</span>loading<span class=\"token punctuation\">;</span></code></pre></div>\n","cover_image":"","related":[{"id":"399b91323d4985064172d8d9c1bb57c4","path":"/2020-05-17-functional-programing-nen-va-khong-nen/","title":"Functional programing nên và không nên","desc":""},{"id":"d7c5a1be37f6b7aa2083d3afe80563b9","path":"/2018-08-06-huong-dan-bat-dau-voi-firebase/","title":"Những tính năng cở bản của Firebase","desc":"Năm 2016 google giới thiệu Firebase. Khi bắt đầu phát triển ứng dụng điện thoại, bạn sẽ cần đến server và một developer để làm việc với server"},{"id":"756b1766138731f4a766ba12486ddb4c","path":"/2020-12-03-browser-render-website-nhu-the-nao/","title":"Tóm tắt quá trình render của trình duyệt","desc":"Tóm lược các bước chính trình duyệt cần thực hiện để render một trang web"},{"id":"472aed2f456f73d1de1bf6c896eea774","path":"/2018-09-15-huong-dan-cho-nguoi-moi-bat-dau-voi-scrum-va-agile-project-manament/","title":"Quản lý dự án theo Agile và Scrum cho người mới bắt đầu","desc":"Giải thích một trong những thuật ngữ rất phổ biến của quy trình phát triển phần mềm"}]}},"context":{}}