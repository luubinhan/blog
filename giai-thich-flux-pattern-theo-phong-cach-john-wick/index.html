<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Giải thích Flux Pattern theo phong cách John Wick - VuiLapTrinh.com</title><meta name="gridsome:hash" content="bb9d7e5a46c25f220b2fd3c7f9d26cdf170dba2b"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.21"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="Tutorials, Blog, Hướng dẫn, chia sẽ kinh nghiệm về Frontend, react, vue, ux, ui"><meta data-vue-tag="ssr" name="desc" content="Điểm lại các khái niệm trong Flux action, dispatch, store, điều kiện tiên quyết đề đọc bài này là nên xem lại John Wick"><link rel="preload" href="/blog/assets/css/0.styles.6e7bce94.css" as="style"><link rel="preload" href="/blog/assets/js/app.dd109642.js" as="script"><link rel="preload" href="/blog/assets/js/page--src-templates-post-vue.980fbd47.js" as="script"><link rel="prefetch" href="/blog/assets/js/page--node-modules-gridsome-app-pages-404-vue.b044eecd.js"><link rel="prefetch" href="/blog/assets/js/page--src-pages-index-vue.bd4a2964.js"><link rel="prefetch" href="/blog/assets/js/page--src-templates-tag-vue.4999789e.js"><link rel="stylesheet" href="/blog/assets/css/0.styles.6e7bce94.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/blog/" class="logo active"><span class="logo__text">
    ← VuiLapTrinh.com
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">Giải thích Flux Pattern theo phong cách John Wick</h1><div class="post-meta">
  Đăng ngày 2019-05-28.
  
    Mất khoảng
    <strong>4 phút</strong> để đọc.
  </div></div><div class="post content-box"><div class="post__header"><!----></div><div class="post__content"><!-- TOC -->
<ul>
<li><a href="#v%E1%BA%A5n-%C4%91%E1%BB%81">Vấn đề</a></li>
<li><a href="#gi%E1%BA%A3i-ph%C3%A1p-c%E1%BB%A7a-facebook-lu%E1%BB%93ng-d%E1%BB%AF-li%E1%BB%87u-m%E1%BB%99t-chi%E1%BB%81u">Giải pháp của Facebook: luồng dữ liệu một chiều</a></li>
<li>
<p><a href="#gi%E1%BB%9Bi-thi%E1%BB%87u-c%C3%A1c-vai-ch%C3%ADnh">Giới thiệu các vai chính</a></p>
<ul>
<li><a href="#b%E1%BB%8Dn-action-creator">Bọn action creator</a></li>
<li><a href="#b%E1%BB%8Dn-dispatcher">Bọn dispatcher</a></li>
<li><a href="#b%E1%BB%8Dn-%C4%91%E1%BA%A7u-c%E1%BA%A7u-store">Bọn đầu cầu Store</a></li>
<li><a href="#b%E1%BB%8Dn-view">Bọn View</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h2 id="vấn-đề"><a href="#v%E1%BA%A5n-%C4%91%E1%BB%81" aria-hidden="true"><span class="icon icon-link"></span></a>Vấn đề</h2>
<p>Trước tiên chúng ta cần biết Flux giải quyết vấn đề gì. Flux là một pattern để xử lý luồng dữ liệu trong ứng dụng. Flux và React được sinh ra và lớn lên dưới ngôi nhà Facebook. 2 đứa chúng nó <strong>thường</strong> đi cùng nhau, chứ không phải <strong>dính</strong> vào nhau như hình với bóng</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*EfeNEshl8-uwZSuUw275Ag.png" alt="Giải thích Flux pattern"></p>
<p>Một trong những ví dụ phổ biến khi nói đến Flux là vòng lặp của tính năng notification. Khi đăng nhập vào Facebook, bạn thấy một thông báo mới trên icon cái chuông huyền diệu, một khi click vào cái chuông này, toàn bộ thông báo sẽ ko còn nằm trong <strong>new message</strong> nữa. Một vài phút sau, khi nhận được thông báo mới, cái chuông lại <strong>rung lên</strong>, báo bạn biết có thông báo mới, và cứ thế, vòng lặp cứ tiếp tục.</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*4xc1FzIHWiyAvb1iAQKSqQ.png" alt="Giải thích Flux pattern"></p>
<p>Với kiểu thiết kế Model-View</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*OcTeAqv8AU_z-O2HuucmeA.png" alt="Giải thích Flux pattern"></p>
<p>Các model sẽ <em>nắm giữ</em> dữ liệu và truyền dữ liệu này xuống các cục view -> nơi sẽ render, hiển thị dữ liệu này.</p>
<p>User tương tác thông qua view, view đôi lúc sẽ cập nhập lại dữ liệu của model, và đôi khi model này cần thay đổi dữ liệu trên model khác. Hơn nữa, nhiều khi một thay đổi của user kéo theo một chuỗi các thay đổi khác, có khi nó là một async. Tưởng tượng như đánh trái banh bàn, bạn ko thể biết được trái banh nó sẽ đập vào đâu hết.</p>
<p><img src="https://cdn-images-1.medium.com/max/400/1*7myoHOaUyFEmPC-dj61CKw.png" alt="Giải thích Flux pattern"></p>
<p>Khi ấy bạn sẽ không biết được dữ liệu bị <strong>rơi rớt</strong> ở đâu.</p>
<h2 id="giải-pháp-của-facebook-luồng-dữ-liệu-một-chiều"><a href="#gi%E1%BA%A3i-ph%C3%A1p-c%E1%BB%A7a-facebook-lu%E1%BB%93ng-d%E1%BB%AF-li%E1%BB%87u-m%E1%BB%99t-chi%E1%BB%81u" aria-hidden="true"><span class="icon icon-link"></span></a>Giải pháp của Facebook: luồng dữ liệu một chiều</h2>
<p>Đội ngũ Facebook giải quyết bằng một kiến trúc khác, <strong>luồng dữ liệu sẽ đi một chiều duy nhất</strong>, một khi cần thêm dữ liệu mới, luồng lại đi từ điểm xuất phát. Và họ gọi kiến trúc đó là <strong>Flux</strong></p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*lZM0yU9ExEMd7DggVxXkxA.png" alt="Giải thích Flux pattern"></p>
<p>Nhìn vào cái hình trên, bạn sẽ không thể cảm được của kiến trúc này ngay và luôn, không đọc tài liệu về Flux, có thể bạn sẽ chẳng hứng thú vì với nó.</p>
<p>Cùng đi chi tiết từng khái niệm một. Hình dung tổ chức <strong>hội bàn đào</strong> trong John Wick, với những nhóm nhân vật khác nhau, nắm giữ những vai trò khác nhau.</p>
<h2 id="giới-thiệu-các-vai-chính"><a href="#gi%E1%BB%9Bi-thi%E1%BB%87u-c%C3%A1c-vai-ch%C3%ADnh" aria-hidden="true"><span class="icon icon-link"></span></a>Giới thiệu các vai chính</h2>
<h3 id="bọn-action-creator"><a href="#b%E1%BB%8Dn-action-creator" aria-hidden="true"><span class="icon icon-link"></span></a>Bọn action creator</h3>
<p><img src="https://i.imgur.com/e2UBmM4.png" alt="Giải thích Flux pattern"></p>
<p>Nhiệm vụ của bọn này là tạo ra action, tất cả những thay đổi, tương tác phải tới gặp bọn này. Nó giống như bọn ngồi điều hành điện thoại trong phim John Wick, những đứa khác tới đây, phát đi 1 thông điệp, action creator sẽ "định dạng" lại thông điệp đó bằng một mật mã mà tất các những đứa khác nằm trong hệ thống hiểu được.</p>
<p><img src="https://i.imgur.com/lsLrRSV.png" alt="Giải thích Flux pattern"></p>
<p>Thông điệp được gửi đi bao gồm: kiểu thông điệp (type) và nội dung chính của thông điệp (payload). Trong đó kiểu thông điệp là một hằng số đã được định nghĩa trước đó.</p>
<p><strong>Tác dụng phụ</strong> của một hệ thống mà toàn bộ kiểu thông điệp đã được định nghĩa sẵn, <strong>lính mới</strong> vào chỉ cần mở file này ra là biết được ứng dụng đang làm, sẽ có những tình huống nào sẽ làm thay đổi trạng thái dữ liệu.</p>
<h3 id="bọn-dispatcher"><a href="#b%E1%BB%8Dn-dispatcher" aria-hidden="true"><span class="icon icon-link"></span></a>Bọn dispatcher</h3>
<p><img src="https://i.imgur.com/nnQAAj6.png" alt="Giải thích Flux pattern"></p>
<p>Trong John Wick, nói chung các bạn nên xem John Wick trước khi đọc bài này đó, bạn trực điện thoại nhận tin nhắn, format tin nhắn xong, bạn sẽ <strong>hét</strong> lên cho các bạn đứng trực chổ tổng đài điện thoại. Bạn <strong>trực điện thoại</strong> này biết danh sách các <strong>đầu cầu</strong> (store) cần gửi thông báo đến.</p>
<p>Quá trình này được thực hiện một cách <strong>tuần tự</strong>, không chen lấn, không xen ngang, nếu mỗi đầu cầu cần ràng buộc về thứ tự nhận thông tin, chúng ta có để anh dispatcher này quản lý.</p>
<p>Anh Dispatcher trong Flux sẽ khác với dispatcher trong các kiến trúc khác. Thông tin luôn được gửi đến hết các đầu cầu bất kể nó là thông tin gì. Nghĩa là mỗi đầu cầu không chỉ đăng ký một kênh thông tin nhất định, nó lắng nghe toàn bộ thông tin được gửi đi, chuyện nó quan tâm và xử lý trên từng thông tin nào là nó tự quyết định, giống như chú Bowery King nhận được yêu cầu truy sát John Wick, nhưng anh nhận tin rồi ko làm gì cả.</p>
<h3 id="bọn-đầu-cầu-store"><a href="#b%E1%BB%8Dn-%C4%91%E1%BA%A7u-c%E1%BA%A7u-store" aria-hidden="true"><span class="icon icon-link"></span></a>Bọn đầu cầu Store</h3>
<p>Gọi là đầu cầu thì cũng chưa đầy đủ, ngoài là nơi tiếp nhận và thực thông tin, nó còn là nơi chứa toàn bộ dữ liệu của ứng dụng, nguồn tiền của 1 tổ chức, mọi luật lệ, logic của dữ liệu sẽ nằm ở đây.</p>
<p><img src="https://media.comicbook.com/2019/05/john-wick-bowery-king-1171365-1280x0.jpeg" alt="Giải thích Flux pattern"></p>
<p>Anh Store này như chú <a href="https://www.imdb.com/title/tt6146586/characters/nm0000401?ref_=tt_cl_t4" target="_blank" rel="nofollow noopener noreferrer">Bowery King</a>, khi muốn anh ấy làm gì đó, chuyển tiền, nhận tiền, đóng tiền thì bạn buộc phải làm đúng quy trình từ trên xuống dưới action creator -> dispatcher</p>
<h3 id="bọn-view"><a href="#b%E1%BB%8Dn-view" aria-hidden="true"><span class="icon icon-link"></span></a>Bọn View</h3>
<p><img src="https://m.media-amazon.com/images/M/MV5BNTQ2MWYyYTMtOTg3NC00MjA1LWFmMTUtOWRjMWViMWIxZTBmXkEyXkFqcGdeQXVyNTc5OTMwOTQ@._V1_SY1000_CR0,0,1499,1000_AL_.jpg" alt="Giải thích Flux pattern"></p>
<p>Nhận dữ liệu, thay đổi thông tin hiển thị, tiếp nhận dữ liệu từ user, đưa ngược lên lại tổ chức là công dụng toàn bộ của bọn này.</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*MY5xNk_JeKvGsGdywYD4EA.png" alt="Giải thích Flux pattern"></p>
<p>Tổng hợp lại chúng ta có sơ đồ vận hành của tổ chức này như sau</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*GHrusKRFhQ0Y6rrwjqI6QQ.png" alt="Giải thích Flux pattern"></p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*66hoDpUhczSXrgH2cUUasw.png" alt="Giải thích Flux pattern"></p>
<p>Trong hình minh họa trên, còn một đứa nữa đứng giữa View và Store, được gọi là controller view, một dạng của <strong>người đưa tin</strong>, nó sẽ nhận thông báo từ đầu cầu store khi có dữ liệu thay đổi, rồi mới đưa xuống view</p>
<p>Khi user gửi đi một thông báo đến View</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*SusQ7Aip2fSWg6raQtPSnA.png" alt="Giải thích Flux pattern"></p>
<p>Thông tin được gửi lại action creator</p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*dkm9qsWuD9DtXzH-u-DjJQ.png" alt="Giải thích Flux pattern"></p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*RLrImTDeArSMoA4kZsajLQ.png" alt="Giải thích Flux pattern"></p>
<p><img src="https://cdn-images-1.medium.com/max/1600/1*fWBaUg9-_1-V5M2YQBWhWg.png" alt="Giải thích Flux pattern"></p>
<p><a target="_blank" rel="noopener noreferrer" href="https://code-cartoons.com/a-cartoon-guide-to-flux-6157355ab207">A cartoon guide to Flux
</a></p>
</div><div class="post__footer"><div class="post-tags"><a href="/blog/tag/react/" class="post-tags__link"><span>#</span> react
		</a><a href="/blog/tag/hoc-thuat/" class="post-tags__link"><span>#</span> hoc-thuat
		</a></div></div></div><div class="post-comments"></div><div class="author post-author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-52311ff214b737f722259e901102d6b3'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-52311ff214b737f722259e901102d6b3)' width='180' height='180' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAABwEDBAUGCAAC/8QAMxAAAQMCAwcBBgYDAAAAAAAAAQIDEQAEBRIhBhMxQVFhcQciIzJCgbEIFDORodEWgsH/xAAZAQEBAQEBAQAAAAAAAAAAAAAEAwUGAAH/xAAhEQABBAMAAgMBAAAAAAAAAAABAAIDEQQSISJBBRNRMf/aAAwDAQACEQMRAD8A6Pr1fOalmvLyUAk6AnxS5VROUx4oR%2bvmPXNjZYbhti48DcKUt9LRIJAHsgkaxMmO1ByzxnG8PeQ/a3d5bOIIUVJdUOHMifvWjB8c6aMP2q0CfPbC/TW119SVz9YetmOMLYRfWWH3TaSA4pKVNrWOuhgH6UYtkNrsK2stFvYU65nbjesOpyrbnhPIjuKhPhSwDZw4qw5kU5ph6r%2blpCYFNOLKflV5o1JSXMkDlS5xy1qtDo4mfrWe2/xhWEbJ3t400%2b6oZWyGpkBRiTGoSNJj/tVbEXEN/VMyAC1iPUTaS2xjG3bO3IS3ay2HNJc1lR6xPDx3oa4g0RvVlQcSfhFRLrEF3V0LpSAh10layOMzw7eKl3jqLhxsxLaRw4610MUYiAa1ZMxMosrPugpJJ0nlwiiJ%2bH69eZ28NulfuX7R0LTOhygKB8yKxWLaWoC0BJKpgfL2rdfh8sV3G1F9iBTLNnalGbkFuEADzAVVMpwOO6/xCx4izJaAuiSsT8UV8KKyBznmKih1J714OqIiCa5jVdJsqk4ggL9oRPSqDbty4/w/GnLVzKPyypBkaEif4p5N2RwA/anlPtvsrafAW0tJStChKVA8QR0p4ZqQQil1ilz5Y5nGloXKkcNev908G8iUoSCUiiHtVhFhhdou6wu2O6JyuNg/pzwUCdY5a8JrAXtwErWi3RmIEZwZE9utaccm/QEVzKVZjVrltN4JyJMqFdGemuz7OzmyFjbBGS5eQLm6PMuLAMf6iE/SgBavuMPNOON75wKC0tr4GDPtdqO%2bxm0i8ew0O3O7RfJnett6J4mCnXhH81DNDzGK/i%2b4/wBbZSb7S1xQ2IIVBHWvb2BAIioBcVxMCml3KgYFZQZadtSzAK460hCpkk%2bBTzahmmnXnRA0APmadsj0ol1uE2T6r5SEWgbO9K%2bARGs0H7stto3luczSyS3mEKUJIBI66VrvUnGWlJZwlKsuaHnjmgafCk/f9qwD6y%2b2pbjhKU%2bylWaJ8dabjxmtne0HInolrVcYThj18w5clKzl1KOZ/sVLRtJ%2bQbQ7akpum/01oEA9c3bvULB8WtGbRYuW1vvBOVtTivm48eVUt9Z3dwpKlIbaZIhJQZEdJq7fJxDxxHcdWgxnvtFbZz1ItsQCWMWyWb8hJcn3ZV3Pyz14eK2e9WpUBJoGYHhVpmCQyCtTZBMaHz1oq7DYxvmBh11IeZT7pR%2bZA5eR9vFCyoGs8owm4sz38kK//9k=' /%3e%3c/svg%3e" width="180" data-src="/blog/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" data-srcset="/blog/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/blog/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript><!----><p class="author__intro">Hiện tại site đang nâng cấp, các bạn xài tạm</p></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2020.</span><span class="footer__links">luckyluu</span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Giải thích Flux Pattern theo phong cách John Wick","path":"\u002Fgiai-thich-flux-pattern-theo-phong-cach-john-wick\u002F","date":"2019-05-28","timeToRead":4,"tags":[{"id":"react","title":"react","path":"\u002Ftag\u002Freact\u002F"},{"id":"hoc-thuat","title":"hoc-thuat","path":"\u002Ftag\u002Fhoc-thuat\u002F"}],"desc":"Điểm lại các khái niệm trong Flux action, dispatch, store, điều kiện tiên quyết đề đọc bài này là nên xem lại John Wick","content":"\u003C!-- TOC --\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81\"\u003EVấn đề\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#gi%E1%BA%A3i-ph%C3%A1p-c%E1%BB%A7a-facebook-lu%E1%BB%93ng-d%E1%BB%AF-li%E1%BB%87u-m%E1%BB%99t-chi%E1%BB%81u\"\u003EGiải pháp của Facebook: luồng dữ liệu một chiều\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\n\u003Cp\u003E\u003Ca href=\"#gi%E1%BB%9Bi-thi%E1%BB%87u-c%C3%A1c-vai-ch%C3%ADnh\"\u003EGiới thiệu các vai chính\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"#b%E1%BB%8Dn-action-creator\"\u003EBọn action creator\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#b%E1%BB%8Dn-dispatcher\"\u003EBọn dispatcher\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#b%E1%BB%8Dn-%C4%91%E1%BA%A7u-c%E1%BA%A7u-store\"\u003EBọn đầu cầu Store\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#b%E1%BB%8Dn-view\"\u003EBọn View\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C!-- \u002FTOC --\u003E\n\u003Ch2 id=\"vấn-đề\"\u003E\u003Ca href=\"#v%E1%BA%A5n-%C4%91%E1%BB%81\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EVấn đề\u003C\u002Fh2\u003E\n\u003Cp\u003ETrước tiên chúng ta cần biết Flux giải quyết vấn đề gì. Flux là một pattern để xử lý luồng dữ liệu trong ứng dụng. Flux và React được sinh ra và lớn lên dưới ngôi nhà Facebook. 2 đứa chúng nó \u003Cstrong\u003Ethường\u003C\u002Fstrong\u003E đi cùng nhau, chứ không phải \u003Cstrong\u003Edính\u003C\u002Fstrong\u003E vào nhau như hình với bóng\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F800\u002F1*EfeNEshl8-uwZSuUw275Ag.png\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EMột trong những ví dụ phổ biến khi nói đến Flux là vòng lặp của tính năng notification. Khi đăng nhập vào Facebook, bạn thấy một thông báo mới trên icon cái chuông huyền diệu, một khi click vào cái chuông này, toàn bộ thông báo sẽ ko còn nằm trong \u003Cstrong\u003Enew message\u003C\u002Fstrong\u003E nữa. Một vài phút sau, khi nhận được thông báo mới, cái chuông lại \u003Cstrong\u003Erung lên\u003C\u002Fstrong\u003E, báo bạn biết có thông báo mới, và cứ thế, vòng lặp cứ tiếp tục.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F800\u002F1*4xc1FzIHWiyAvb1iAQKSqQ.png\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EVới kiểu thiết kế Model-View\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F800\u002F1*OcTeAqv8AU_z-O2HuucmeA.png\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ECác model sẽ \u003Cem\u003Enắm giữ\u003C\u002Fem\u003E dữ liệu và truyền dữ liệu này xuống các cục view -\u003E nơi sẽ render, hiển thị dữ liệu này.\u003C\u002Fp\u003E\n\u003Cp\u003EUser tương tác thông qua view, view đôi lúc sẽ cập nhập lại dữ liệu của model, và đôi khi model này cần thay đổi dữ liệu trên model khác. Hơn nữa, nhiều khi một thay đổi của user kéo theo một chuỗi các thay đổi khác, có khi nó là một async. Tưởng tượng như đánh trái banh bàn, bạn ko thể biết được trái banh nó sẽ đập vào đâu hết.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F400\u002F1*7myoHOaUyFEmPC-dj61CKw.png\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EKhi ấy bạn sẽ không biết được dữ liệu bị \u003Cstrong\u003Erơi rớt\u003C\u002Fstrong\u003E ở đâu.\u003C\u002Fp\u003E\n\u003Ch2 id=\"giải-pháp-của-facebook-luồng-dữ-liệu-một-chiều\"\u003E\u003Ca href=\"#gi%E1%BA%A3i-ph%C3%A1p-c%E1%BB%A7a-facebook-lu%E1%BB%93ng-d%E1%BB%AF-li%E1%BB%87u-m%E1%BB%99t-chi%E1%BB%81u\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EGiải pháp của Facebook: luồng dữ liệu một chiều\u003C\u002Fh2\u003E\n\u003Cp\u003EĐội ngũ Facebook giải quyết bằng một kiến trúc khác, \u003Cstrong\u003Eluồng dữ liệu sẽ đi một chiều duy nhất\u003C\u002Fstrong\u003E, một khi cần thêm dữ liệu mới, luồng lại đi từ điểm xuất phát. Và họ gọi kiến trúc đó là \u003Cstrong\u003EFlux\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F1600\u002F1*lZM0yU9ExEMd7DggVxXkxA.png\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ENhìn vào cái hình trên, bạn sẽ không thể cảm được của kiến trúc này ngay và luôn, không đọc tài liệu về Flux, có thể bạn sẽ chẳng hứng thú vì với nó.\u003C\u002Fp\u003E\n\u003Cp\u003ECùng đi chi tiết từng khái niệm một. Hình dung tổ chức \u003Cstrong\u003Ehội bàn đào\u003C\u002Fstrong\u003E trong John Wick, với những nhóm nhân vật khác nhau, nắm giữ những vai trò khác nhau.\u003C\u002Fp\u003E\n\u003Ch2 id=\"giới-thiệu-các-vai-chính\"\u003E\u003Ca href=\"#gi%E1%BB%9Bi-thi%E1%BB%87u-c%C3%A1c-vai-ch%C3%ADnh\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EGiới thiệu các vai chính\u003C\u002Fh2\u003E\n\u003Ch3 id=\"bọn-action-creator\"\u003E\u003Ca href=\"#b%E1%BB%8Dn-action-creator\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBọn action creator\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002Fe2UBmM4.png\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ENhiệm vụ của bọn này là tạo ra action, tất cả những thay đổi, tương tác phải tới gặp bọn này. Nó giống như bọn ngồi điều hành điện thoại trong phim John Wick, những đứa khác tới đây, phát đi 1 thông điệp, action creator sẽ \"định dạng\" lại thông điệp đó bằng một mật mã mà tất các những đứa khác nằm trong hệ thống hiểu được.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FlsLrRSV.png\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThông điệp được gửi đi bao gồm: kiểu thông điệp (type) và nội dung chính của thông điệp (payload). Trong đó kiểu thông điệp là một hằng số đã được định nghĩa trước đó.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cstrong\u003ETác dụng phụ\u003C\u002Fstrong\u003E của một hệ thống mà toàn bộ kiểu thông điệp đã được định nghĩa sẵn, \u003Cstrong\u003Elính mới\u003C\u002Fstrong\u003E vào chỉ cần mở file này ra là biết được ứng dụng đang làm, sẽ có những tình huống nào sẽ làm thay đổi trạng thái dữ liệu.\u003C\u002Fp\u003E\n\u003Ch3 id=\"bọn-dispatcher\"\u003E\u003Ca href=\"#b%E1%BB%8Dn-dispatcher\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBọn dispatcher\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fi.imgur.com\u002FnnQAAj6.png\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETrong John Wick, nói chung các bạn nên xem John Wick trước khi đọc bài này đó, bạn trực điện thoại nhận tin nhắn, format tin nhắn xong, bạn sẽ \u003Cstrong\u003Ehét\u003C\u002Fstrong\u003E lên cho các bạn đứng trực chổ tổng đài điện thoại. Bạn \u003Cstrong\u003Etrực điện thoại\u003C\u002Fstrong\u003E này biết danh sách các \u003Cstrong\u003Eđầu cầu\u003C\u002Fstrong\u003E (store) cần gửi thông báo đến.\u003C\u002Fp\u003E\n\u003Cp\u003EQuá trình này được thực hiện một cách \u003Cstrong\u003Etuần tự\u003C\u002Fstrong\u003E, không chen lấn, không xen ngang, nếu mỗi đầu cầu cần ràng buộc về thứ tự nhận thông tin, chúng ta có để anh dispatcher này quản lý.\u003C\u002Fp\u003E\n\u003Cp\u003EAnh Dispatcher trong Flux sẽ khác với dispatcher trong các kiến trúc khác. Thông tin luôn được gửi đến hết các đầu cầu bất kể nó là thông tin gì. Nghĩa là mỗi đầu cầu không chỉ đăng ký một kênh thông tin nhất định, nó lắng nghe toàn bộ thông tin được gửi đi, chuyện nó quan tâm và xử lý trên từng thông tin nào là nó tự quyết định, giống như chú Bowery King nhận được yêu cầu truy sát John Wick, nhưng anh nhận tin rồi ko làm gì cả.\u003C\u002Fp\u003E\n\u003Ch3 id=\"bọn-đầu-cầu-store\"\u003E\u003Ca href=\"#b%E1%BB%8Dn-%C4%91%E1%BA%A7u-c%E1%BA%A7u-store\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBọn đầu cầu Store\u003C\u002Fh3\u003E\n\u003Cp\u003EGọi là đầu cầu thì cũng chưa đầy đủ, ngoài là nơi tiếp nhận và thực thông tin, nó còn là nơi chứa toàn bộ dữ liệu của ứng dụng, nguồn tiền của 1 tổ chức, mọi luật lệ, logic của dữ liệu sẽ nằm ở đây.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fmedia.comicbook.com\u002F2019\u002F05\u002Fjohn-wick-bowery-king-1171365-1280x0.jpeg\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAnh Store này như chú \u003Ca href=\"https:\u002F\u002Fwww.imdb.com\u002Ftitle\u002Ftt6146586\u002Fcharacters\u002Fnm0000401?ref_=tt_cl_t4\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EBowery King\u003C\u002Fa\u003E, khi muốn anh ấy làm gì đó, chuyển tiền, nhận tiền, đóng tiền thì bạn buộc phải làm đúng quy trình từ trên xuống dưới action creator -\u003E dispatcher\u003C\u002Fp\u003E\n\u003Ch3 id=\"bọn-view\"\u003E\u003Ca href=\"#b%E1%BB%8Dn-view\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBọn View\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fm.media-amazon.com\u002Fimages\u002FM\u002FMV5BNTQ2MWYyYTMtOTg3NC00MjA1LWFmMTUtOWRjMWViMWIxZTBmXkEyXkFqcGdeQXVyNTc5OTMwOTQ@._V1_SY1000_CR0,0,1499,1000_AL_.jpg\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ENhận dữ liệu, thay đổi thông tin hiển thị, tiếp nhận dữ liệu từ user, đưa ngược lên lại tổ chức là công dụng toàn bộ của bọn này.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F800\u002F1*MY5xNk_JeKvGsGdywYD4EA.png\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETổng hợp lại chúng ta có sơ đồ vận hành của tổ chức này như sau\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F1600\u002F1*GHrusKRFhQ0Y6rrwjqI6QQ.png\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F1600\u002F1*66hoDpUhczSXrgH2cUUasw.png\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETrong hình minh họa trên, còn một đứa nữa đứng giữa View và Store, được gọi là controller view, một dạng của \u003Cstrong\u003Engười đưa tin\u003C\u002Fstrong\u003E, nó sẽ nhận thông báo từ đầu cầu store khi có dữ liệu thay đổi, rồi mới đưa xuống view\u003C\u002Fp\u003E\n\u003Cp\u003EKhi user gửi đi một thông báo đến View\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F1600\u002F1*SusQ7Aip2fSWg6raQtPSnA.png\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EThông tin được gửi lại action creator\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F1600\u002F1*dkm9qsWuD9DtXzH-u-DjJQ.png\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F1600\u002F1*RLrImTDeArSMoA4kZsajLQ.png\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F1600\u002F1*fWBaUg9-_1-V5M2YQBWhWg.png\" alt=\"Giải thích Flux pattern\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca target=\"_blank\" rel=\"noopener noreferrer\" href=\"https:\u002F\u002Fcode-cartoons.com\u002Fa-cartoon-guide-to-flux-6157355ab207\"\u003EA cartoon guide to Flux\n\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n","cover_image":""}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/blog/assets/js/app.dd109642.js" defer></script><script src="/blog/assets/js/page--src-templates-post-vue.980fbd47.js" defer></script>
  </body>
</html>