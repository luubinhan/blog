<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Viết và Deploy một Lambda Function trên Netlify - VuiLapTrinh.com</title><meta name="gridsome:hash" content="bc20ea4b90b896b46bf3850cadfd5be1029329f0"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="theme-color" content="#01A1B1"><meta data-vue-tag="ssr" data-key="description" name="description" content="Tutorials, Blog, Hướng dẫn, chia sẽ kinh nghiệm về Frontend, react, vue, ux, ui"><meta data-vue-tag="ssr" name="description" content=""><meta data-vue-tag="ssr" property="og:type" content="article"><meta data-vue-tag="ssr" property="og:title" content="Viết và Deploy một Lambda Function trên Netlify"><meta data-vue-tag="ssr" property="og:description" cotent=""><meta data-vue-tag="ssr" property="og:image" content=""><meta data-vue-tag="ssr" property="image" content=""><meta data-vue-tag="ssr" name="twitter:card" content="summary"><meta data-vue-tag="ssr" name="twitter:creator" content="@luubinhan"><meta data-vue-tag="ssr" name="fb:app_id" content="445556375516928"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/svg+xml" sizes="16x16" href="/assets/static/luckyluu.ce0531f.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link data-vue-tag="ssr" rel="icon" type="image/svg+xml" sizes="32x32" href="/assets/static/luckyluu.ac8d93a.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link data-vue-tag="ssr" rel="icon" type="image/svg+xml" sizes="96x96" href="/assets/static/luckyluu.b9532cc.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/svg+xml" sizes="76x76" href="/assets/static/luckyluu.f22e9f3.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/svg+xml" sizes="152x152" href="/assets/static/luckyluu.62d22cb.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/svg+xml" sizes="120x120" href="/assets/static/luckyluu.1539b60.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/svg+xml" sizes="167x167" href="/assets/static/luckyluu.dc0cdc5.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/svg+xml" sizes="180x180" href="/assets/static/luckyluu.7b22250.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link data-vue-tag="ssr" rel="manifest" type="application/manifest+json" href="/manifest.json"><link rel="preload" href="/assets/css/0.styles.6d7a59e7.css" as="style"><link rel="preload" href="/assets/js/app.5b88909d.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-post-vue.5e88210e.js" as="script"><link rel="prefetch" href="/assets/js/page--src-pages-404-vue.7a134a53.js"><link rel="prefetch" href="/assets/js/page--src-pages-cheat-sheet-vue.9e7df976.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.b3ef9070.js"><link rel="prefetch" href="/assets/js/page--src-templates-tag-vue.5e1608d8.js"><link rel="stylesheet" href="/assets/css/0.styles.6d7a59e7.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute("data-theme", newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem("theme");
        } catch (err) {}

        window.__setPreferredTheme = function(newTheme) {
          console.log(newTheme);
          setTheme(newTheme);
          try {
            localStorage.setItem("theme", newTheme);
          } catch (err) {}
        };

        var darkQuery = window.matchMedia("(prefers-color-scheme: dark)");
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? "dark" : "light");
        });

        setTheme(preferredTheme || (darkQuery.matches ? "dark" : "light"));
      })();
    </script>

    <div id="app" data-server-rendered="true" class="layout-blog" data-v-4601cfee><div class="toggle-mobile" data-v-4601cfee><div class="toggle-theme" data-v-4601cfee><span role="checkbox" aria-checked="false" tabindex="0" class="toggle-wrapper" data-v-4df809e2 data-v-4601cfee><span class="toggle-background" style="background-color:#dae1e7;" data-v-4df809e2><span class="icon" data-v-4df809e2>
			🌞
		</span></span><span class="toggle-indicator" style="transform:translateX(0);" data-v-4df809e2></span></span></div></div><div class="sidebar" data-v-732b59ce data-v-4601cfee><div class="sidebar__inner" data-v-732b59ce><a href="/" class="go-home active" data-v-c946f688 data-v-732b59ce><span data-v-c946f688><img src="/assets/img/logo-main.3e2a7b64.png" alt="vuilaptrinh.com" data-v-c946f688></span></a><button type="button" aria-expanded="false" aria-label="nav" class="navbar-toggle collapsed" data-v-732b59ce><div class="hamburger hamburger-1" data-v-732b59ce><span class="line" data-v-732b59ce></span><span class="line" data-v-732b59ce></span><span class="line" data-v-732b59ce></span></div></button><div class="navigation-component" data-v-732b59ce><ul class="nav primary-menu collapsed" data-v-732b59ce><li class="javascript" data-v-732b59ce><a href="/tag/javascript" data-v-732b59ce><span class="primary-menu__icon" data-v-732b59ce><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" data-v-732b59ce><path d="M255.908 485.999c-6.116 0-12.323-1.642-17.708-4.746l-56.319-33.316c-8.397-4.747-4.29-6.389-1.551-7.303 11.226-3.925 13.508-4.745 25.465-11.592 1.279-.729 2.922-.457 4.199.366l43.266 25.648c1.552.912 3.741.912 5.202 0l168.592-97.304c1.553-.913 2.555-2.738 2.555-4.563V158.583c0-1.917-1.002-3.651-2.645-4.654L258.463 56.716c-1.551-.913-3.65-.913-5.202 0L84.852 154.019c-1.644.913-2.647 2.738-2.647 4.655v194.515c0 1.825 1.003 3.65 2.647 4.473l46.188 26.653c25.102 12.504 40.436-2.191 40.436-17.068V175.195c0-2.738 2.19-4.837 4.93-4.837h21.359c2.647 0 4.928 2.099 4.928 4.837v192.143c0 33.407-18.256 52.576-49.928 52.576-9.768 0-17.435 0-38.794-10.588l-44.179-25.467c-10.954-6.299-17.708-18.074-17.708-30.76V158.583c0-12.596 6.754-24.462 17.708-30.76L238.2 30.519c10.679-6.024 24.828-6.024 35.416 0l168.594 97.394c10.953 6.298 17.707 18.073 17.707 30.761v194.515c0 12.596-6.754 24.371-17.707 30.761l-168.594 97.303a35.5 35.5 0 01-17.708 4.746zm136.098-191.775c0-36.421-24.646-46.096-76.4-52.941-52.396-6.938-57.689-10.498-57.689-22.729 0-10.131 4.473-23.641 43.266-23.641 34.596 0 47.375 7.485 52.668 30.853.457 2.19 2.467 3.833 4.746 3.833h21.91c1.367 0 2.645-.547 3.559-1.552.914-1.003 1.369-2.373 1.275-3.743-3.375-40.252-30.121-58.965-84.158-58.965-48.103 0-76.764 20.264-76.764 54.311 0 36.876 28.569 47.101 74.664 51.662 55.225 5.387 59.514 13.511 59.514 24.373 0 18.805-15.15 26.835-50.658 26.835-44.635 0-54.403-11.227-57.689-33.406-.365-2.373-2.374-4.107-4.837-4.107h-21.817a4.81 4.81 0 00-4.836 4.836c0 28.39 15.426 62.254 89.271 62.254 53.305-.092 83.975-21.181 83.975-57.873z" fill="#539e43" data-v-732b59ce></path></svg></span><!----><!----><!----><!----><!----><span class="primary-menu__label" data-v-732b59ce>Javascript</span></a></li><li class="react" data-v-732b59ce><a href="/tag/react" data-v-732b59ce><!----><span class="primary-menu__icon" data-v-732b59ce><svg id="Layer_2" version="1.1" viewBox="0 0 600 600" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" data-v-732b59ce><circle cx="299.5" cy="299.6" r="50.2" class="st0" data-v-732b59ce></circle><path d="M299.5 414.6c-70.5 0-132.1-8.3-178.2-24.1-29.9-10.2-55.3-23.8-73.4-39.3-19.2-16.4-29.4-34.3-29.4-51.6 0-33.2 36.4-65.7 97.5-86.9 50-17.4 115.2-27.1 183.4-27.1 67 0 131.3 9.4 181 26.6 29.1 10 53.6 23 71 37.4 18.9 15.8 28.9 33.1 28.9 50 0 34.5-40.7 69.4-106.3 91.1-46.4 15.4-108.4 23.9-174.5 23.9zm0-205c-64.7 0-128.7 9.4-175.5 25.7-56.2 19.6-81.4 46.4-81.4 64.3 0 18.6 27.1 47.9 86.5 68.2 43.6 14.9 102.6 22.8 170.4 22.8 63.6 0 122.9-8 167-22.7 61.7-20.5 89.9-49.8 89.9-68.3 0-9.5-7.2-20.7-20.3-31.6-15.1-12.6-37.1-24.1-63.4-33.2-47.3-16.2-108.8-25.2-173.2-25.2z" class="st0" data-v-732b59ce></path><path d="M185.6 549.8c-10.2 0-19.2-2.2-26.8-6.6-28.7-16.6-38.7-64.4-26.6-127.9 9.9-52.1 34.1-113.3 68.2-172.4 33.5-58 73.7-109 113.4-143.5 23.2-20.2 46.7-35 67.9-42.8 23.1-8.5 43.1-8.5 57.7-.1 29.9 17.2 39.8 70 25.8 137.6-9.9 48-33.5 105.9-66.5 163.2-35.2 61-73.2 110.2-109.9 142.3-23.8 20.8-48.3 36-70.7 43.9-11.7 4.2-22.7 6.3-32.5 6.3zm25.1-300.9l10.4 6c-32.3 56-56.2 116.1-65.4 164.9-11.1 58.5-.4 93.7 15 102.6 3.8 2.2 8.8 3.4 14.9 3.4 19.9 0 51.2-12.6 87.4-44.2 34.7-30.3 71-77.5 104.9-136.2 31.8-55.1 54.4-110.5 63.8-156 13.1-63.7 1.8-102.7-14.3-112-8.2-4.7-21.5-4.1-37.5 1.8-18.5 6.8-39.4 20.1-60.4 38.4-37.7 32.8-76.2 81.6-108.4 137.4l-10.4-6.1z" class="st0" data-v-732b59ce></path><path d="M413.4 550.1c-27.2 0-61.7-16.4-97.7-47.4-40.2-34.6-81.1-86.1-115.3-145.2-33.6-58-57.6-118.3-67.7-170-5.9-30.2-7-57.9-3.2-80.2 4.2-24.3 14.1-41.6 28.8-50.1 29.8-17.3 80.5.5 132.1 46.4 36.6 32.5 75 81.9 108.1 139.1 35.3 61 59 118.5 68.4 166.3 6.1 31 7.1 59.8 2.8 83.2-4.6 24.9-15 42.6-30 51.3-7.5 4.4-16.4 6.6-26.3 6.6zM221.2 345.5c32.4 56 72.6 106.7 110.2 139 45.1 38.8 80.9 47.2 96.4 38.2 16.1-9.3 27.9-47.4 15.7-109-9-45.2-31.7-100.2-65.7-158.9-31.9-55.1-68.6-102.4-103.3-133.2-48.6-43.2-88-52.9-104.1-43.6-8.2 4.7-14.3 16.6-17.2 33.4-3.3 19.4-2.3 44.2 3.1 71.5 9.6 49.1 32.6 106.8 64.9 162.6z" class="st0" data-v-732b59ce></path></svg></span><!----><!----><!----><!----><span class="primary-menu__label" data-v-732b59ce>React</span></a></li><li class="vue" data-v-732b59ce><a href="/tag/vuejs" data-v-732b59ce><!----><!----><!----><!----><span class="primary-menu__icon" data-v-732b59ce><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" data-v-732b59ce><path fill="#41b883" d="M392.46 59.011H313.5l-57.499 90.972-49.285-90.972H26.001l230 393.978L485.999 59.011z" data-v-732b59ce></path><path fill="#35495e" d="M83.192 91.867h55.241l117.568 203.511L373.464 91.867h55.241l-172.704 295.92L83.192 91.867z" data-v-732b59ce></path></svg></span><!----><span class="primary-menu__label" data-v-732b59ce>Vue</span></a></li><li class="htmlCss" data-v-732b59ce><a href="/tag/css" data-v-732b59ce><!----><!----><!----><span class="primary-menu__icon" data-v-732b59ce><svg version="1.0" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" data-v-732b59ce><path fill="#E44D26" d="M27.377 28.889L16.001 32 4.625 28.889 2 0h28.002z" data-v-732b59ce></path><path fill="#FF6C39" d="M16 2v27.75l9.232-2.742L27.688 2z" data-v-732b59ce></path><path fill="#FFF" d="M24.363 6H7.607L8 10l.619 7h10.884l-.355 3.984L16 21.99l-3.143-1.006L12.648 19H8.803l.459 4.987L16 25.99l6.728-2.004.99-10.986H12.252l-.25-3H24z" data-v-732b59ce></path></svg></span><!----><!----><span class="primary-menu__label" data-v-732b59ce>HTML/CSS</span></a></li><li class="uxUi" data-v-732b59ce><a href="/tag/ux-ui" data-v-732b59ce><!----><!----><!----><!----><!----><span class="primary-menu__icon" data-v-732b59ce><svg viewBox="0 0 512 454.633" xmlns="http://www.w3.org/2000/svg" data-v-732b59ce><path d="M202.271 243.812c-9.741 10.73-12.13 18.428-24.884 38.588 8.237 5.752 24.104 19.055 35.095 41.959 21.953-12.592 32.188-14.514 43.821-24.309C332.24 236.092 518.244 6.836 511.839.204c-6.766-7.05-242.704 170.268-309.568 243.608zM155.442 300.209c-32.998-5.832-65.547 15.028-87.288 67.147C46.382 419.471 7.532 440.337.001 439.061c40.553 14.67 164.202 52.194 194.939-90.655-13.037-34.26-39.498-48.197-39.498-48.197z" data-v-732b59ce></path></svg></span><span class="primary-menu__label" data-v-732b59ce>UX/UI</span></a></li><li class="about" data-v-732b59ce><a href="https://luubinhan.github.io/" target="_blank" rel="noopener noreferrer" data-v-732b59ce>About</a></li></ul></div><div id="footer" data-v-7f12727f data-v-732b59ce><footer class="footer" data-v-7f12727f><section class="footer-inner" data-v-7f12727f><div class="social-links" data-v-7f12727f><a href="https://www.youtube.com/channel/UC0Te8s0b0aplS1ZoVLfjKHA" target="_blank" rel="noopener noreferrer" class="link-youtube" style="display: none;" data-v-7f12727f><span class="link-youtube__icon" data-v-7f12727f><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" data-v-7f12727f data-v-7f12727f><path d="M512 256c0 141.4-114.6 256-256 256S0 397.4 0 256 114.6 0 256 0s256 114.6 256 256z" fill="#CD201F" data-v-7f12727f data-v-7f12727f></path><path d="M391.1 194.6c-2.3-19.9-7.1-25.7-10.5-28.4-5.4-4.2-15.2-5.7-28.3-6.6-21-1.4-56.7-2.3-95.2-2.3-38.6 0-74.2.8-95.2 2.3-13.1.9-22.9 2.4-28.3 6.6-3.4 2.7-8.1 8.5-10.5 28.4-3.4 28.7-3.4 94.1 0 122.8 2.4 19.9 7.1 25.7 10.5 28.4 5.4 4.2 15.2 5.7 28.3 6.6 21 1.4 56.6 2.3 95.2 2.3s74.2-.9 95.2-2.3c13.1-.9 22.9-2.4 28.3-6.6 3.4-2.6 8.1-8.5 10.5-28.4 3.4-28.7 3.4-94.1 0-122.8zm-167 104.3V213l82.4 42.9-82.4 43z" fill="#FFF" data-v-7f12727f data-v-7f12727f></path></svg></span>
					Youtube
				</a></div><div class="credit" data-v-7f12727f>Since 2016. luckyluu</div></section></footer></div></div></div><div class="master-container" data-v-4601cfee><div class="aside" data-v-4601cfee><div class="aside__inner" data-v-4601cfee><div class="toggle-theme" data-v-4601cfee><span role="checkbox" aria-checked="false" tabindex="0" class="toggle-wrapper" data-v-4df809e2 data-v-4601cfee><span class="toggle-background" style="background-color:#dae1e7;" data-v-4df809e2><span class="icon" data-v-4df809e2>
			🌞
		</span></span><span class="toggle-indicator" style="transform:translateX(0);" data-v-4df809e2></span></span></div><div class="search-wrapper" data-v-78b27f33 data-v-4601cfee><div class="mb-2" data-v-78b27f33><div class="post-tags" data-v-78b27f33><a href="/tag/javascript" class="post-tags__link"><span>#</span>
    Javascript
  </a><a href="/tag/dam-dao" class="post-tags__link"><span>#</span>
    Đàm đạo chém gió chuyện nghề
  </a><a href="/tag/css" class="post-tags__link"><span>#</span>
    CSS từ căn bản tới nâng cao
  </a><a href="/tag/thu-thuat" class="post-tags__link"><span>#</span>
    Thủ thuật
  </a><a href="/tag/hoc-thuat" class="post-tags__link"><span>#</span>
    Kiến thức nền tảng
  </a><a href="/tag/react" class="post-tags__link"><span>#</span>
    React
  </a><a href="/tag/vuejs" class="post-tags__link"><span>#</span>
    Vue JS
  </a><a href="/tag/chrome" class="post-tags__link"><span>#</span>
    Chrome DevTools
  </a></div></div><div class="search__container" data-v-78b27f33><input type="text" placeholder="Tìm bài viết..." value="" class="search__input" data-v-78b27f33><!----></div><div class="search__list" data-v-78b27f33><!----><!----></div></div><div class="layout-blog__aside-footer" data-v-4601cfee></div></div></div><div class="master" data-v-4601cfee><main class="inner" data-v-4601cfee><div id="scrollTop" data-v-4601cfee></div><div class="single-post" data-v-4601cfee><div class="single-post-container" data-v-4601cfee><article data-v-4601cfee><header data-v-4601cfee><div class="post-title" data-v-4601cfee><h1 class="post-title__text single-post-title" data-v-4601cfee>
							Viết và Deploy một Lambda Function trên Netlify
						</h1><div class="post-meta">
  Đăng ngày
  <time dateTime="2020-01-10" itemprop="dateModified" content="2020-01-10">2020-01-10</time>.
  
    Mất khoảng
    <strong>4 phút</strong> để đọc.
  </div><a href="https://github.com/luubinhan/blog/edit/master/content/posts//2020-01-10-huong-dan-viet-lambda-function-voi-netlify.md" rel="noopener noreferrer" target="_blank" aria-label="Connect Facebook" class="link" data-v-4601cfee>
							Sửa bài viết này
						</a></div></header><div class="post content-box" data-v-4601cfee><div class="post__header" data-v-4601cfee><!----></div><div class="blog-post" data-v-4601cfee><div class="post-content" data-v-4601cfee><h2 id="lambda-function-là-gì"><a href="#lambda-function-l%C3%A0-g%C3%AC" aria-hidden="true"><span class="icon icon-link"></span></a>Lambda function là gì?</h2>
<p>Giải thích về Serverless bạn đọc bài trước có đăng</p>
<p>Nếu bạn chỉ có một trang blog như thế này, viết bằng Gatsby, không có backend làm sao bạn có thể có được tính năng cho phép user đăng ký nhận bản tin? Ví dụ dùng dịch vụ của MailChimp đi.</p>
<p>Chúng ta ko thể đưa API key vào trang frontend được, hiển nhiên quá mà! Ai cũng có thể lấy được cái key này thì sao.</p>
<p>Chúng ta phải thông qua một bên ở giữa, là Lambda function trên Netlify, chúng ta đưa key này cho Netlify, nó sẽ có trách nhiệm bảo mật key này và truyền thông tin tới MailChimp</p>
<p>Chữ Lambda được <strong>phát minh</strong> đầu tiên bởi Amazon AWS, sau này Netlify cũng dùng luôn tên này, nó là kiểu các <em>hàm trung gian</em>, giúp chúng ta giao tiếp với phía server (vì đây là dạng serverless, chúng ta dùng dịch vụ của nó cung cấp, giống như vua chúa, nếu muốn giao tiếp với anh thì chú cứ thông qua thái dám, họ sẽ truyền tin tới cho anh)</p>
<p>Cứ dùng trang mặc định của Gatsby</p>
<p><img src="https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540301648/sv9k9cv1zdtr4ebqpr09.png" alt="Viết và Deploy một Lambda Function trên Netlify"></p>
<p>Tạo một thư mục bên trong source code, nó sẽ chứa toàn bộ các hàm sẽ giao tiếp với Lambda. Thư mục này đặt đâu cũng được, cứ đặt vào dưới thư mục gốc tên <code class="language-inline-text">functions</code></p>
<blockquote>
<p>Mỗi file chỉ chứa 1 function</p>
</blockquote>
<p>test.js</p>
<div class="gridsome-highlight" data-language="js"><pre class="language-js"><code class="language-js">exports<span class="token punctuation">.</span><span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> context<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Mỗi function sẽ nhận 3 parameter </p>
<ul>
<li><code class="language-inline-text">event</code>: chứa post data, header</li>
<li><code class="language-inline-text">context</code>: function này được call ở đâu, thông tin user hiện tại</li>
<li><code class="language-inline-text">callback</code>: hàm callback thôi, hàm này nhận param đâu tiền là error nếu có lỗi</li>
</ul>
<p><img src="https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540301809/exdwztr8lfepei1x88ux.png" alt="Viết và Deploy một Lambda Function trên Netlify"></p>
<h2 id="chạy-các-function-lambda-ở-local"><a href="#ch%E1%BA%A1y-c%C3%A1c-function-lambda-%E1%BB%9F-local" aria-hidden="true"><span class="icon icon-link"></span></a>Chạy các function Lambda ở local</h2>
<p>Cần cài <code class="language-inline-text">netlify-lambda</code> để chạy test dưới local </p>
<div class="gridsome-highlight" data-language="js"><pre class="language-js"><code class="language-js">npm install netlify<span class="token operator">-</span>lambda</code></pre></div>
<p><img src="https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540301932/y8uyqgcmxa8i9sczpljo.png" alt="Viết và Deploy một Lambda Function trên Netlify"></p>
<div class="gridsome-highlight" data-language="powershell"><pre class="language-powershell"><code class="language-powershell">netlify<span class="token operator">-</span>lambda serve &lt;functions_directory></code></pre></div>
<p><code class="language-inline-text">&lt;functions_directory></code> là thư mục chứa mấy function chúng ta viết</p>
<p>Thêm đoạn <em>shortcut</em> vào trong package.json để chạy lệnh này</p>
<p><img src="https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540302074/xnpujx0smgs1ftul0hr2.png" alt="Viết và Deploy một Lambda Function trên Netlify"></p>
<p>Bước cuối cùng cần làm, tạo file config để báo với Netlify, đây không phải là thư mục chứa source code của chúng ta, đây là thư mục sau khi build. Tạo file <code class="language-inline-text">Netlify.toml</code> trong thư mục gốc</p>
<p><img src="https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540302243/gzlbxxtidpi0lukcxmmy.png" alt="Viết và Deploy một Lambda Function trên Netlify"></p>
<p>Sau khi build, file bên trong <code class="language-inline-text">functions</code> sẽ được đưa vào thư mục tên <code class="language-inline-text">lambda</code></p>
<p>Chạy lại đoạn script <em>shortcut</em> hồi nãy khai báo <code class="language-inline-text">npm run start:lambda</code>, bên dưới hình này đoạn chạy bị lỗi là khi chưa tạo file <code class="language-inline-text">Netlify.toml</code>, chúng ta bắt buộc phải tạo file này trước khi chạy</p>
<p><img src="https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540302301/vyr4hwlxacgkhvkvhzdn.png" alt="Viết và Deploy một Lambda Function trên Netlify"></p>
<p>Mở Postman lên gọi test thử</p>
<p><img src="https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540302549/jblo4vceh9ylxxipnct8.png" alt="Viết và Deploy một Lambda Function trên Netlify"></p>
<p>Function đầu tiên đã chạy thành công!!!</p>
<p>Chúng ta truyền thêm một object <code class="language-inline-text">{ "name" : "James" }</code>, và muốn nhận được một JSON object thay vì là một <code class="language-inline-text">string</code>. Muốn vậy trong phần body chúng ta phải gọi <code class="language-inline-text">JSON.stringify</code></p>
<div class="gridsome-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    statusCode<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    body<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> msg<span class="token operator">:</span> <span class="token string">"Thanks for visiting "</span> <span class="token operator">+</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// nếu không nhận được name= james</span>

<span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"You're not James"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><img src="https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540303047/s7lrt4qmn8svganfbd6s.png" alt="Viết và Deploy một Lambda Function trên Netlify"></p>
<p>Test trên Postman</p>
<p><img src="https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540303082/gmlkczsp2hhlasrrko2d.png" alt="Viết và Deploy một Lambda Function trên Netlify"></p>
<p>Trường hợp phát sinh lỗi</p>
<p><img src="https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540303092/y1uu9ipfgy0rq6p3mtwr.png" alt="Viết và Deploy một Lambda Function trên Netlify"></p>
<h2 id="deploy-lên-netlify"><a href="#deploy-l%C3%AAn-netlify" aria-hidden="true"><span class="icon icon-link"></span></a>Deploy lên Netlify</h2>
<p>Nãy giờ chúng ta đang chạy các Lambda function ở dưới local bằng lệnh <code class="language-inline-text">serve</code>,  để đưa lên Netlify, chúng ta cần <code class="language-inline-text">build</code> source code trước khi đẩy lên Netlify</p>
<p>Chúng ta phải setup chạy 2 script, một để build Gatsby, sau đó build mấy functions lambda</p>
<div class="gridsome-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"props"</span><span class="token operator">:</span> <span class="token string">"npm run build; npm run build:lambda"</span></code></pre></div>
<p><img src="https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540315111/hv7omcr0angknnup175q.png" alt="Viết và Deploy một Lambda Function trên Netlify"></p>
<p>Lưu ý: do đang dùng gatsby, nên cần 2 lệnh này, nếu bạn dùng một thằng khác, thì lệnh sẽ khác, tuy cách setup</p>
<p>Phải cập nhập lại <strong>Netlify.toml</strong>, chúng ta sẽ báo với Netlify: "Ê, khi nào tao chạy xong <code class="language-inline-text">prop</code>, thì mày deploy nhe"</p>
<p><img src="https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540315122/lytjmmofmjjgixzxycwo.png" alt="Viết và Deploy một Lambda Function trên Netlify"></p>
<p>Sau khi commit lên Github, Netlify sẽ bắt đầu trigger deploy, vào trang chính của Netlify, trong tab <strong>Deployment</strong>, bạn có theo dõi xem nó đang deploy tới đâu rồi</p>
<p><img src="https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540315158/kulpc3u2tqftgxijpr6c.png" alt="Viết và Deploy một Lambda Function trên Netlify"></p>
<p>Sau khi deploy thành công, bạn có thể chuyển qua tab <strong>Function</strong>, các function nào đã có sẽ được liệt kê ở đây</p>
<p><img src="https://scotch-res.cloudinary.com/image/upload/dpr_1,w_800,q_auto:good,f_auto/v1540315181/nblkoi0l6shvdvvybtje.png" alt="Viết và Deploy một Lambda Function trên Netlify"></p>
<p>Cơ bản là thế thôi, các bạn có thể làm <em>"mọi thứ"</em> với function mình viết (miễn là nó có cho), như gửi email, lưu dữ liệu xuống DB, gọi một API</p>
<p><a href="https://scotch.io/tutorials/build-and-deploy-a-serverless-function-to-netlify" target="_blank" rel="nofollow noopener noreferrer">https://scotch.io/tutorials/build-and-deploy-a-serverless-function-to-netlify</a></p>
</div></div><div class="post__footer" data-v-4601cfee><div class="post-tags"><a href="/tag/netlify/" class="post-tags__link"><span>#</span>
    netlify
  </a><a href="/tag/thu-thuat/" class="post-tags__link"><span>#</span>
    thu-thuat
  </a></div></div><div class="single-post__share" data-v-4601cfee><a href="javascript:void(0)" class="share-network-email" style="background-color:#333333;"><i class="mst-icon icon-mail"></i><span>Email</span></a><a href="javascript:void(0)" class="share-network-facebook" style="background-color:#1877f2;"><i class="mst-icon icon-facebook"></i><span>Facebook</span></a><a href="javascript:void(0)" class="share-network-linkedin" style="background-color:#007bb5;"><i class="mst-icon icon-linkedin"></i><span>LinkedIn</span></a><a href="javascript:void(0)" class="share-network-pocket" style="background-color:#ef4056;"><i class="mst-icon icon-get-pocket"></i><span>Pocket</span></a><a href="javascript:void(0)" class="share-network-skype" style="background-color:#00aff0;"><i class="mst-icon icon-skype"></i><span>Skype</span></a><a href="javascript:void(0)" class="share-network-twitter" style="background-color:#1da1f2;"><i class="mst-icon icon-twitter"></i><span>Twitter</span></a></div></div></article></div></div></main><div class="section-below-post" data-v-4601cfee><div class="post-comments" data-v-4601cfee><!----><div id="disqus_thread" style="min-height:200px;"></div></div><div class="related-posts" data-v-0ab71b42><h4 data-v-0ab71b42>Bài liên quan</h4><ul class="related-posts__container" data-v-0ab71b42><li class="related-posts__media" data-v-0ab71b42><div class="related-posts__index" data-v-0ab71b42>1.</div><div class="related-posts__content" data-v-0ab71b42><h4 class="related-posts__title" data-v-0ab71b42><a href="/2020-10-25-neu-ban-viet-css-co-tam/" data-v-0ab71b42>Một vài điểm nên nhớ khi viết CSS</a></h4><p data-v-0ab71b42>Nếu bạn là người viết CSS có tâm, bạn cần đọc bài này để tránh những lỗi edge case khi viết CSS</p></div></li><li class="related-posts__media" data-v-0ab71b42><div class="related-posts__index" data-v-0ab71b42>2.</div><div class="related-posts__content" data-v-0ab71b42><h4 class="related-posts__title" data-v-0ab71b42><a href="/2017-10-20-react-lifecycle-la-gi/" data-v-0ab71b42>Giải thích React Component Lifecycle</a></h4><p data-v-0ab71b42>Tìm hiểu vòng đời của một Component React, khi nào và sử dụng ra sao</p></div></li><li class="related-posts__media" data-v-0ab71b42><div class="related-posts__index" data-v-0ab71b42>3.</div><div class="related-posts__content" data-v-0ab71b42><h4 class="related-posts__title" data-v-0ab71b42><a href="/2019-09-13-giai-thich-phuong-phap-atomic/" data-v-0ab71b42>Làm quen với phương pháp Atomic để structure source code, design</a></h4><p data-v-0ab71b42>Atom, molecule, organism, template, và page là những khái niệm chính của phương pháp này</p></div></li></ul></div><div class="author post-author"><a href="https://luubinhan.github.io/" target="_blank"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-52311ff214b737f722259e901102d6b3'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-52311ff214b737f722259e901102d6b3)' width='180' height='180' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAABwEDBAUGCAAC/8QAMxAAAQMCAwcBBgYDAAAAAAAAAQIDEQAEBRIhBhMxQVFhcQciIzJCgbEIFDORodEWgsH/xAAZAQEBAQEBAQAAAAAAAAAAAAAEAwUGAAH/xAAhEQABBAMAAgMBAAAAAAAAAAABAAIDEQQSISJBBRNRMf/aAAwDAQACEQMRAD8A6Pr1fOalmvLyUAk6AnxS5VROUx4oR%2bvmPXNjZYbhti48DcKUt9LRIJAHsgkaxMmO1ByzxnG8PeQ/a3d5bOIIUVJdUOHMifvWjB8c6aMP2q0CfPbC/TW119SVz9YetmOMLYRfWWH3TaSA4pKVNrWOuhgH6UYtkNrsK2stFvYU65nbjesOpyrbnhPIjuKhPhSwDZw4qw5kU5ph6r%2blpCYFNOLKflV5o1JSXMkDlS5xy1qtDo4mfrWe2/xhWEbJ3t400%2b6oZWyGpkBRiTGoSNJj/tVbEXEN/VMyAC1iPUTaS2xjG3bO3IS3ay2HNJc1lR6xPDx3oa4g0RvVlQcSfhFRLrEF3V0LpSAh10layOMzw7eKl3jqLhxsxLaRw4610MUYiAa1ZMxMosrPugpJJ0nlwiiJ%2bH69eZ28NulfuX7R0LTOhygKB8yKxWLaWoC0BJKpgfL2rdfh8sV3G1F9iBTLNnalGbkFuEADzAVVMpwOO6/xCx4izJaAuiSsT8UV8KKyBznmKih1J714OqIiCa5jVdJsqk4ggL9oRPSqDbty4/w/GnLVzKPyypBkaEif4p5N2RwA/anlPtvsrafAW0tJStChKVA8QR0p4ZqQQil1ilz5Y5nGloXKkcNev908G8iUoSCUiiHtVhFhhdou6wu2O6JyuNg/pzwUCdY5a8JrAXtwErWi3RmIEZwZE9utaccm/QEVzKVZjVrltN4JyJMqFdGemuz7OzmyFjbBGS5eQLm6PMuLAMf6iE/SgBavuMPNOON75wKC0tr4GDPtdqO%2bxm0i8ew0O3O7RfJnett6J4mCnXhH81DNDzGK/i%2b4/wBbZSb7S1xQ2IIVBHWvb2BAIioBcVxMCml3KgYFZQZadtSzAK460hCpkk%2bBTzahmmnXnRA0APmadsj0ol1uE2T6r5SEWgbO9K%2bARGs0H7stto3luczSyS3mEKUJIBI66VrvUnGWlJZwlKsuaHnjmgafCk/f9qwD6y%2b2pbjhKU%2bylWaJ8dabjxmtne0HInolrVcYThj18w5clKzl1KOZ/sVLRtJ%2bQbQ7akpum/01oEA9c3bvULB8WtGbRYuW1vvBOVtTivm48eVUt9Z3dwpKlIbaZIhJQZEdJq7fJxDxxHcdWgxnvtFbZz1ItsQCWMWyWb8hJcn3ZV3Pyz14eK2e9WpUBJoGYHhVpmCQyCtTZBMaHz1oq7DYxvmBh11IeZT7pR%2bZA5eR9vFCyoGs8owm4sz38kK//9k=' /%3e%3c/svg%3e" width="180" data-src="/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" data-srcset="/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript></a><h2 class="author__site-title">VuiLapTrinh.com</h2><p class="author__intro">Nếu đọc bài viết thấy hay, bạn xài bớt cái bọc ni lông, ra đường mua tờ vé số giúp các cô các bác là đã cảm ơn mình</p></div></div></div></div></div> <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Viết và Deploy một Lambda Function trên Netlify","path":"\u002F2020-01-10-huong-dan-viet-lambda-function-voi-netlify\u002F","slug":"\u002F2020-01-10-huong-dan-viet-lambda-function-voi-netlify","date":"2020-01-10","timeToRead":4,"tags":[{"id":"netlify","title":"netlify","path":"\u002Ftag\u002Fnetlify\u002F"},{"id":"thu-thuat","title":"thu-thuat","path":"\u002Ftag\u002Fthu-thuat\u002F"}],"desc":"","content":"\u003Ch2 id=\"lambda-function-là-gì\"\u003E\u003Ca href=\"#lambda-function-l%C3%A0-g%C3%AC\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ELambda function là gì?\u003C\u002Fh2\u003E\n\u003Cp\u003EGiải thích về Serverless bạn đọc bài trước có đăng\u003C\u002Fp\u003E\n\u003Cp\u003ENếu bạn chỉ có một trang blog như thế này, viết bằng Gatsby, không có backend làm sao bạn có thể có được tính năng cho phép user đăng ký nhận bản tin? Ví dụ dùng dịch vụ của MailChimp đi.\u003C\u002Fp\u003E\n\u003Cp\u003EChúng ta ko thể đưa API key vào trang frontend được, hiển nhiên quá mà! Ai cũng có thể lấy được cái key này thì sao.\u003C\u002Fp\u003E\n\u003Cp\u003EChúng ta phải thông qua một bên ở giữa, là Lambda function trên Netlify, chúng ta đưa key này cho Netlify, nó sẽ có trách nhiệm bảo mật key này và truyền thông tin tới MailChimp\u003C\u002Fp\u003E\n\u003Cp\u003EChữ Lambda được \u003Cstrong\u003Ephát minh\u003C\u002Fstrong\u003E đầu tiên bởi Amazon AWS, sau này Netlify cũng dùng luôn tên này, nó là kiểu các \u003Cem\u003Ehàm trung gian\u003C\u002Fem\u003E, giúp chúng ta giao tiếp với phía server (vì đây là dạng serverless, chúng ta dùng dịch vụ của nó cung cấp, giống như vua chúa, nếu muốn giao tiếp với anh thì chú cứ thông qua thái dám, họ sẽ truyền tin tới cho anh)\u003C\u002Fp\u003E\n\u003Cp\u003ECứ dùng trang mặc định của Gatsby\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fscotch-res.cloudinary.com\u002Fimage\u002Fupload\u002Fdpr_1,w_800,q_auto:good,f_auto\u002Fv1540301648\u002Fsv9k9cv1zdtr4ebqpr09.png\" alt=\"Viết và Deploy một Lambda Function trên Netlify\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETạo một thư mục bên trong source code, nó sẽ chứa toàn bộ các hàm sẽ giao tiếp với Lambda. Thư mục này đặt đâu cũng được, cứ đặt vào dưới thư mục gốc tên \u003Ccode class=\"language-inline-text\"\u003Efunctions\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EMỗi file chỉ chứa 1 function\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003Etest.js\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"js\"\u003E\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Eexports\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function-variable function\"\u003Ehandler\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Eevent\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E context\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E callback\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EMỗi function sẽ nhận 3 parameter \u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-inline-text\"\u003Eevent\u003C\u002Fcode\u003E: chứa post data, header\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-inline-text\"\u003Econtext\u003C\u002Fcode\u003E: function này được call ở đâu, thông tin user hiện tại\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-inline-text\"\u003Ecallback\u003C\u002Fcode\u003E: hàm callback thôi, hàm này nhận param đâu tiền là error nếu có lỗi\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fscotch-res.cloudinary.com\u002Fimage\u002Fupload\u002Fdpr_1,w_800,q_auto:good,f_auto\u002Fv1540301809\u002Fexdwztr8lfepei1x88ux.png\" alt=\"Viết và Deploy một Lambda Function trên Netlify\"\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"chạy-các-function-lambda-ở-local\"\u003E\u003Ca href=\"#ch%E1%BA%A1y-c%C3%A1c-function-lambda-%E1%BB%9F-local\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EChạy các function Lambda ở local\u003C\u002Fh2\u003E\n\u003Cp\u003ECần cài \u003Ccode class=\"language-inline-text\"\u003Enetlify-lambda\u003C\u002Fcode\u003E để chạy test dưới local \u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"js\"\u003E\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003Enpm install netlify\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003Elambda\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fscotch-res.cloudinary.com\u002Fimage\u002Fupload\u002Fdpr_1,w_800,q_auto:good,f_auto\u002Fv1540301932\u002Fy8uyqgcmxa8i9sczpljo.png\" alt=\"Viết và Deploy một Lambda Function trên Netlify\"\u003E\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"powershell\"\u003E\u003Cpre class=\"language-powershell\"\u003E\u003Ccode class=\"language-powershell\"\u003Enetlify\u003Cspan class=\"token operator\"\u003E-\u003C\u002Fspan\u003Elambda serve &lt;functions_directory\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003E\u003Ccode class=\"language-inline-text\"\u003E&lt;functions_directory\u003E\u003C\u002Fcode\u003E là thư mục chứa mấy function chúng ta viết\u003C\u002Fp\u003E\n\u003Cp\u003EThêm đoạn \u003Cem\u003Eshortcut\u003C\u002Fem\u003E vào trong package.json để chạy lệnh này\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fscotch-res.cloudinary.com\u002Fimage\u002Fupload\u002Fdpr_1,w_800,q_auto:good,f_auto\u002Fv1540302074\u002Fxnpujx0smgs1ftul0hr2.png\" alt=\"Viết và Deploy một Lambda Function trên Netlify\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EBước cuối cùng cần làm, tạo file config để báo với Netlify, đây không phải là thư mục chứa source code của chúng ta, đây là thư mục sau khi build. Tạo file \u003Ccode class=\"language-inline-text\"\u003ENetlify.toml\u003C\u002Fcode\u003E trong thư mục gốc\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fscotch-res.cloudinary.com\u002Fimage\u002Fupload\u002Fdpr_1,w_800,q_auto:good,f_auto\u002Fv1540302243\u002Fgzlbxxtidpi0lukcxmmy.png\" alt=\"Viết và Deploy một Lambda Function trên Netlify\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ESau khi build, file bên trong \u003Ccode class=\"language-inline-text\"\u003Efunctions\u003C\u002Fcode\u003E sẽ được đưa vào thư mục tên \u003Ccode class=\"language-inline-text\"\u003Elambda\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EChạy lại đoạn script \u003Cem\u003Eshortcut\u003C\u002Fem\u003E hồi nãy khai báo \u003Ccode class=\"language-inline-text\"\u003Enpm run start:lambda\u003C\u002Fcode\u003E, bên dưới hình này đoạn chạy bị lỗi là khi chưa tạo file \u003Ccode class=\"language-inline-text\"\u003ENetlify.toml\u003C\u002Fcode\u003E, chúng ta bắt buộc phải tạo file này trước khi chạy\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fscotch-res.cloudinary.com\u002Fimage\u002Fupload\u002Fdpr_1,w_800,q_auto:good,f_auto\u002Fv1540302301\u002Fvyr4hwlxacgkhvkvhzdn.png\" alt=\"Viết và Deploy một Lambda Function trên Netlify\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EMở Postman lên gọi test thử\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fscotch-res.cloudinary.com\u002Fimage\u002Fupload\u002Fdpr_1,w_800,q_auto:good,f_auto\u002Fv1540302549\u002Fjblo4vceh9ylxxipnct8.png\" alt=\"Viết và Deploy một Lambda Function trên Netlify\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EFunction đầu tiên đã chạy thành công!!!\u003C\u002Fp\u003E\n\u003Cp\u003EChúng ta truyền thêm một object \u003Ccode class=\"language-inline-text\"\u003E{ \"name\" : \"James\" }\u003C\u002Fcode\u003E, và muốn nhận được một JSON object thay vì là một \u003Ccode class=\"language-inline-text\"\u003Estring\u003C\u002Fcode\u003E. Muốn vậy trong phần body chúng ta phải gọi \u003Ccode class=\"language-inline-text\"\u003EJSON.stringify\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"js\"\u003E\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token function\"\u003Ecallback\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    statusCode\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E200\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    body\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token constant\"\u003EJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estringify\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E msg\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Thanks for visiting \"\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E name \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F nếu không nhận được name= james\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token function\"\u003Ecallback\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"token class-name\"\u003EError\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"You're not James\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fscotch-res.cloudinary.com\u002Fimage\u002Fupload\u002Fdpr_1,w_800,q_auto:good,f_auto\u002Fv1540303047\u002Fs7lrt4qmn8svganfbd6s.png\" alt=\"Viết và Deploy một Lambda Function trên Netlify\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETest trên Postman\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fscotch-res.cloudinary.com\u002Fimage\u002Fupload\u002Fdpr_1,w_800,q_auto:good,f_auto\u002Fv1540303082\u002Fgmlkczsp2hhlasrrko2d.png\" alt=\"Viết và Deploy một Lambda Function trên Netlify\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETrường hợp phát sinh lỗi\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fscotch-res.cloudinary.com\u002Fimage\u002Fupload\u002Fdpr_1,w_800,q_auto:good,f_auto\u002Fv1540303092\u002Fy1uu9ipfgy0rq6p3mtwr.png\" alt=\"Viết và Deploy một Lambda Function trên Netlify\"\u003E\u003C\u002Fp\u003E\n\u003Ch2 id=\"deploy-lên-netlify\"\u003E\u003Ca href=\"#deploy-l%C3%AAn-netlify\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EDeploy lên Netlify\u003C\u002Fh2\u003E\n\u003Cp\u003ENãy giờ chúng ta đang chạy các Lambda function ở dưới local bằng lệnh \u003Ccode class=\"language-inline-text\"\u003Eserve\u003C\u002Fcode\u003E,  để đưa lên Netlify, chúng ta cần \u003Ccode class=\"language-inline-text\"\u003Ebuild\u003C\u002Fcode\u003E source code trước khi đẩy lên Netlify\u003C\u002Fp\u003E\n\u003Cp\u003EChúng ta phải setup chạy 2 script, một để build Gatsby, sau đó build mấy functions lambda\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"json\"\u003E\u003Cpre class=\"language-json\"\u003E\u003Ccode class=\"language-json\"\u003E\u003Cspan class=\"token property\"\u003E\"props\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"npm run build; npm run build:lambda\"\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fscotch-res.cloudinary.com\u002Fimage\u002Fupload\u002Fdpr_1,w_800,q_auto:good,f_auto\u002Fv1540315111\u002Fhv7omcr0angknnup175q.png\" alt=\"Viết và Deploy một Lambda Function trên Netlify\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ELưu ý: do đang dùng gatsby, nên cần 2 lệnh này, nếu bạn dùng một thằng khác, thì lệnh sẽ khác, tuy cách setup\u003C\u002Fp\u003E\n\u003Cp\u003EPhải cập nhập lại \u003Cstrong\u003ENetlify.toml\u003C\u002Fstrong\u003E, chúng ta sẽ báo với Netlify: \"Ê, khi nào tao chạy xong \u003Ccode class=\"language-inline-text\"\u003Eprop\u003C\u002Fcode\u003E, thì mày deploy nhe\"\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fscotch-res.cloudinary.com\u002Fimage\u002Fupload\u002Fdpr_1,w_800,q_auto:good,f_auto\u002Fv1540315122\u002Flytjmmofmjjgixzxycwo.png\" alt=\"Viết và Deploy một Lambda Function trên Netlify\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ESau khi commit lên Github, Netlify sẽ bắt đầu trigger deploy, vào trang chính của Netlify, trong tab \u003Cstrong\u003EDeployment\u003C\u002Fstrong\u003E, bạn có theo dõi xem nó đang deploy tới đâu rồi\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fscotch-res.cloudinary.com\u002Fimage\u002Fupload\u002Fdpr_1,w_800,q_auto:good,f_auto\u002Fv1540315158\u002Fkulpc3u2tqftgxijpr6c.png\" alt=\"Viết và Deploy một Lambda Function trên Netlify\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ESau khi deploy thành công, bạn có thể chuyển qua tab \u003Cstrong\u003EFunction\u003C\u002Fstrong\u003E, các function nào đã có sẽ được liệt kê ở đây\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fscotch-res.cloudinary.com\u002Fimage\u002Fupload\u002Fdpr_1,w_800,q_auto:good,f_auto\u002Fv1540315181\u002Fnblkoi0l6shvdvvybtje.png\" alt=\"Viết và Deploy một Lambda Function trên Netlify\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ECơ bản là thế thôi, các bạn có thể làm \u003Cem\u003E\"mọi thứ\"\u003C\u002Fem\u003E với function mình viết (miễn là nó có cho), như gửi email, lưu dữ liệu xuống DB, gọi một API\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fscotch.io\u002Ftutorials\u002Fbuild-and-deploy-a-serverless-function-to-netlify\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fscotch.io\u002Ftutorials\u002Fbuild-and-deploy-a-serverless-function-to-netlify\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n","cover_image":"","related":[{"id":"ac91020c4cb3f555dd43eb61a87000b8","path":"\u002F2020-10-25-neu-ban-viet-css-co-tam\u002F","title":"Một vài điểm nên nhớ khi viết CSS","desc":"Nếu bạn là người viết CSS có tâm, bạn cần đọc bài này để tránh những lỗi edge case khi viết CSS"},{"id":"bf4e1b9fbb5e25cb5df5a22e50560552","path":"\u002F2017-10-20-react-lifecycle-la-gi\u002F","title":"Giải thích React Component Lifecycle","desc":"Tìm hiểu vòng đời của một Component React, khi nào và sử dụng ra sao"},{"id":"b96fe15a72c8084949568607882b071a","path":"\u002F2019-09-13-giai-thich-phuong-phap-atomic\u002F","title":"Làm quen với phương pháp Atomic để structure source code, design","desc":"Atom, molecule, organism, template, và page là những khái niệm chính của phương pháp này"}]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.5b88909d.js" defer></script><script src="/assets/js/page--src-templates-post-vue.5e88210e.js" defer></script>
  </body>
</html>
