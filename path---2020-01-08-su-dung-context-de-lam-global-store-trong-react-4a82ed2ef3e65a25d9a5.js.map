{"version":3,"sources":["webpack:///./.cache/json/2020-01-08-su-dung-context-de-lam-global-store-trong-react.json"],"names":[],"mappings":";;;;;AAAA,mBAAkB,QAAQ,kBAAkB,utCAAutC,uhBAAuhB,+gBAA+gB,idAAid,q9BAAq9B,iNAAiN,oDAAoD,qIAAqI,0lBAA0lB,yhBAAyhB,ihBAAihB,mdAAmd,yIAAyI,itBAAitB,0CAA0C,mMAAmM,yQAAyQ,+CAA+C,kGAAkG,kDAAkD,iGAAiG,8MAA8M,4CAA4C,0CAA0C,oGAAoG,QAAQ,wDAAwD,cAAc,8UAA8U,4LAA4L,qLAAqL,qMAAqM,iPAAiP,oNAAoN,0MAA0M,wdAAwd,kcAAkc,wFAAwF,wDAAwD,2IAA2I,qUAAqU,uJAAuJ,mDAAmD,kRAAkR,4CAA4C,0CAA0C,gJAAgJ,aAAa,wMAAwM,mKAAmK,uLAAuL,kQAAkQ,+CAA+C,oGAAoG,mGAAmG,00DAA00D,wZAAwZ,4TAA4T,oDAAoD,qIAAqI,kdAAkd,0CAA0C,oFAAoF,iMAAiM,wQAAwQ,sLAAsL,0GAA0G,kDAAkD,uGAAuG,6MAA6M,4CAA4C,0CAA0C,gkBAAgkB,mOAAmO,oOAAoO,qGAAqG,yFAAyF,0pBAA0pB,siBAAsiB,2hBAA2hB,8FAA8F,oGAAoG,0CAA0C,saAAsa,wRAAwR,8FAA8F,0FAA0F,0CAA0C,mLAAmL,0CAA0C,+LAA+L,8CAA8C,4CAA4C,yXAAyX,wDAAwD,yIAAyI,2WAA2W,2FAA2F,oGAAoG,mOAAmO,+TAA+T,iHAAiH,gUAAgU,6MAA6M,yIAAyI,0FAA0F,gZAAgZ,0JAA0J,KAAK,gYAAgY,mGAAmG,gDAAgD,0CAA0C,mKAAmK,kiBAAkiB,iMAAiM,4CAA4C,6cAA6c,6TAA6T,yFAAyF,4HAA4H,oNAAoN,0FAA0F,0CAA0C,miBAAmiB,qJAAqJ,WAAW,uEAAuE,gBAAgB,6EAA6E,eAAe,kMAAkM,WAAW,uDAAuD,SAAS,eAAe,sRAAsR,WAAW,wE","file":"path---2020-01-08-su-dung-context-de-lam-global-store-trong-react-4a82ed2ef3e65a25d9a5.js","sourcesContent":["module.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<p>Thông thường chúng ta sẽ dùng một <em>nhà kho</em> để chứa dữ liệu <code class=\\\"language-text\\\">state</code> như <em>Redux</em>, một component container bọc ở nút đầu tiên trong app, các component con bên trong có thể truy xuất và cập nhập các dữ liệu một cách dễ dàng</p>\\n<p>Với các API mới được React bổ sung là <code class=\\\"language-text\\\">useState</code>, <code class=\\\"language-text\\\">createContext</code>, <code class=\\\"language-text\\\">useContext</code> chúng ta có <em>thêm một lựa chọn</em> để làm <em>nhà kho</em> mà ko cần dùng đến Redux</p>\\n<p>Ví dụ chúng ta có 3 dữ liệu như bên dưới</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token keyword\\\">const</span> teamMembersNames <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">\\\"John\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">\\\"Mary\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">\\\"Jason\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">\\\"David\\\"</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">[</span>sharing<span class=\\\"token punctuation\\\">,</span> setSharing<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">useState</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">[</span>help<span class=\\\"token punctuation\\\">,</span> setHelp<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">useState</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">[</span>pairing<span class=\\\"token punctuation\\\">,</span> setPairing<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">useState</span><span class=\\\"token punctuation\\\">(</span>teamMembersNames<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Câu hỏi là làm sao chúng ta đưa dữ liệu vào <em>nhà kho</em>. Chúng ta sẽ dùng API <code class=\\\"language-text\\\">createContext</code> (tạo em cái kho)</p>\\n<p>Khi sử dụng <code class=\\\"language-text\\\">React.createContext</code> chúng ta sẽ nhận về 2 component là <code class=\\\"language-text\\\">Provider</code> (anh tung) và <code class=\\\"language-text\\\">Consumer</code> (em hứng).</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token comment\\\">// ./src/utils/store.js</span>\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> StoreContext <span class=\\\"token operator\\\">=</span> React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createContext</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\"><span class=\\\"token punctuation\\\">{</span> children <span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token comment\\\">// các em đã vào nhà kho</span>\\n  <span class=\\\"token keyword\\\">const</span> teamMembersNames <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">\\\"John\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">\\\"Mary\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">\\\"Jason\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">\\\"David\\\"</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">[</span>sharing<span class=\\\"token punctuation\\\">,</span> setSharing<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">useState</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">[</span>help<span class=\\\"token punctuation\\\">,</span> setHelp<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">useState</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">[</span><span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">[</span>pairing<span class=\\\"token punctuation\\\">,</span> setPairing<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">useState</span><span class=\\\"token punctuation\\\">(</span>teamMembersNames<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">const</span> store <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">{</span>\\n    sharing<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>sharing<span class=\\\"token punctuation\\\">,</span> setSharing<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n    help<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>help<span class=\\\"token punctuation\\\">,</span> setHelp<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">,</span>\\n    pairing<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">[</span>pairing<span class=\\\"token punctuation\\\">,</span> setPairing<span class=\\\"token punctuation\\\">]</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">StoreContext.Provider</span></span> <span class=\\\"token attr-name\\\">value</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>store<span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token punctuation\\\">{</span>children<span class=\\\"token punctuation\\\">}</span><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">StoreContext.Provider</span></span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Để các component bên trong <code class=\\\"language-text\\\">&lt;App/&gt;</code> đều dùng được <code class=\\\"language-text\\\">&lt;Consumer /&gt;</code></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token comment\\\">// ./index.js</span>\\n<span class=\\\"token keyword\\\">import</span> React <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"react\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> ReactDOM <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"react-dom\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">import</span> App <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"./App\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> StoreProvider <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"./utils/store\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\nReactDOM<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span>\\n  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">StoreProvider</span></span><span class=\\\"token punctuation\\\">></span></span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">App</span></span> <span class=\\\"token punctuation\\\">/></span></span>\\n  <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">StoreProvider</span></span><span class=\\\"token punctuation\\\">></span></span><span class=\\\"token punctuation\\\">,</span>\\n  document<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getElementById</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"root\\\"</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Với bất kỳ component nào muốn sử dụng, để lấy được dữ liệu trong store, chúng ta sử dụng <code class=\\\"language-text\\\">useContext</code></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token keyword\\\">import</span> React <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"react\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token punctuation\\\">{</span> StoreContext <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"../utils/store\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">SomeComponent</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token comment\\\">// dữ liệu dùng chung</span>\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span> sharing <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">useContext</span><span class=\\\"token punctuation\\\">(</span>StoreContext<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Hoặc nếu thích dùng cách viết render props, có thể dùng luôn component <code class=\\\"language-text\\\">&lt;Consumer/&gt;</code></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">StoreContext.Consumer</span></span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">{</span><span class=\\\"token parameter\\\">store</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">InputComponent</span></span> <span class=\\\"token attr-name\\\">store</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span>store<span class=\\\"token punctuation\\\">}</span></span> <span class=\\\"token punctuation\\\">/></span></span><span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">StoreContext.Consumer</span></span><span class=\\\"token punctuation\\\">></span></span></code></pre>\\n      </div>\\n<h2 id=\\\"ứng-dụng-làm-code-classlanguage-textuseauthcode\\\"><a href=\\\"#%E1%BB%A9ng-d%E1%BB%A5ng-l%C3%A0m-code-classlanguage-textuseauthcode\\\" aria-hidden=\\\"true\\\" class=\\\"anchor\\\"><svg aria-hidden=\\\"true\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg></a>Ứng dụng làm <code class=\\\"language-text\\\">useAuth</code></h2>\\n<p>Một trong những ví dụ dễ thấy, phần dữ liệu nên đưa vào <em>nhà kho chung</em> là phần thông tin user đang đăng nhập</p>\\n<p>Chúng ta sẽ cần 3 phần</p>\\n<ol>\\n<li>\\n<p>Khai báo một nhà kho bằng <code class=\\\"language-text\\\">createContext</code></p>\\n</li>\\n<li>\\n<p>Bộ <code class=\\\"language-text\\\">reducer</code> làm nhiệm vụ cập nhập xử lý <code class=\\\"language-text\\\">state</code></p>\\n</li>\\n<li>\\n<p>Một hook tùy biến <code class=\\\"language-text\\\">useAuth</code> cung cấp các API cần thiết để tương tác với <em>nhà kho chung</em> đã khai báo</p>\\n</li>\\n<li>\\n<p><strong>AuthProvider.js</strong> Khai báo nhà kho (bản rút gọn)</p>\\n</li>\\n</ol>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token comment\\\">// AuthProvider.js</span>\\n<span class=\\\"token keyword\\\">import</span> authReducer <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"authReducer\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> AuthContext <span class=\\\"token operator\\\">=</span> React<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">createContext</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">AuthProvider</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\"><span class=\\\"token punctuation\\\">{</span> children <span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token comment\\\">// khởi tạo</span>\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">[</span>state<span class=\\\"token punctuation\\\">,</span> dispatch<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">useReducer</span><span class=\\\"token punctuation\\\">(</span>authReducer<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;</span><span class=\\\"token class-name\\\">AuthContext.Provider</span></span> <span class=\\\"token attr-name\\\">value</span><span class=\\\"token script language-javascript\\\"><span class=\\\"token script-punctuation punctuation\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">[</span>state<span class=\\\"token punctuation\\\">,</span> dispatch<span class=\\\"token punctuation\\\">]</span><span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">></span></span>\\n      <span class=\\\"token punctuation\\\">{</span>children<span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token tag\\\"><span class=\\\"token tag\\\"><span class=\\\"token punctuation\\\">&lt;/</span><span class=\\\"token class-name\\\">AuthContext.Provider</span></span><span class=\\\"token punctuation\\\">></span></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<ol start=\\\"2\\\">\\n<li><strong>authReducer.js</strong> (bản rút gọn)</li>\\n</ol>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// authReducer.js</span>\\n<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">authReducer</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">state<span class=\\\"token punctuation\\\">,</span> action</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">switch</span> <span class=\\\"token punctuation\\\">(</span>action<span class=\\\"token punctuation\\\">.</span>type<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">case</span> <span class=\\\"token string\\\">\\\"login\\\"</span><span class=\\\"token punctuation\\\">:</span>\\n      <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span> authResult<span class=\\\"token punctuation\\\">,</span> user <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> action<span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token keyword\\\">const</span> expiresAt <span class=\\\"token operator\\\">=</span> authResult<span class=\\\"token punctuation\\\">.</span>expiresIn <span class=\\\"token operator\\\">*</span> <span class=\\\"token number\\\">1000</span> <span class=\\\"token operator\\\">+</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Date</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getTime</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      localStorage<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setItem</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"expires_at\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token constant\\\">JSON</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stringify</span><span class=\\\"token punctuation\\\">(</span>expiresAt<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      localStorage<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">setItem</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"user\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token constant\\\">JSON</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">stringify</span><span class=\\\"token punctuation\\\">(</span>user<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">{</span> user<span class=\\\"token punctuation\\\">,</span> expiresAt <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">case</span> <span class=\\\"token string\\\">\\\"logout\\\"</span><span class=\\\"token punctuation\\\">:</span>\\n      localStorage<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">removeItem</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"expires_at\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      localStorage<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">removeItem</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\"user\\\"</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n      <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">{</span> user<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">,</span> expiresAt<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token keyword\\\">null</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">default</span><span class=\\\"token punctuation\\\">:</span>\\n      <span class=\\\"token keyword\\\">return</span> state<span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<ol start=\\\"3\\\">\\n<li>Một hook tùy biến <strong><code class=\\\"language-text\\\">useAuth</code></strong></li>\\n</ol>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-js\\\"><code class=\\\"language-js\\\"><span class=\\\"token comment\\\">// useAuth.js</span>\\n<span class=\\\"token keyword\\\">import</span> <span class=\\\"token punctuation\\\">{</span> AuthProvider <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"AuthProvider\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">useAuth</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span> state<span class=\\\"token punctuation\\\">,</span> dispatch <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">userContext</span><span class=\\\"token punctuation\\\">(</span>AuthContext<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">login</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// làm gì đó ở đây</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">logout</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token comment\\\">// làm gì đó ở đây</span>\\n        <span class=\\\"token function\\\">dispatch</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span> type<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token string\\\">\\\"logout\\\"</span> <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token comment\\\">// ...  còn một số thức khác</span>\\n    <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">isAuthenticated</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token keyword\\\">return</span> state<span class=\\\"token punctuation\\\">.</span>expiresAt <span class=\\\"token operator\\\">&amp;&amp;</span> <span class=\\\"token keyword\\\">new</span> <span class=\\\"token class-name\\\">Date</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getTime</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">&lt;</span> state<span class=\\\"token punctuation\\\">.</span>expiresAt<span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token comment\\\">// ...  còn một số thức khác</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">{</span>\\n        isAuthenticated<span class=\\\"token punctuation\\\">,</span>\\n        user<span class=\\\"token punctuation\\\">:</span> state<span class=\\\"token punctuation\\\">.</span>user<span class=\\\"token punctuation\\\">,</span>\\n        userId<span class=\\\"token punctuation\\\">:</span> state<span class=\\\"token punctuation\\\">.</span>user <span class=\\\"token operator\\\">?</span> state<span class=\\\"token punctuation\\\">.</span>user <span class=\\\"token punctuation\\\">:</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">;</span>\\n        login<span class=\\\"token punctuation\\\">,</span>\\n        logout<span class=\\\"token punctuation\\\">,</span>\\n        handleAuthentication\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<p>Với cách làm này, bất kỳ component nào sử dụng <code class=\\\"language-text\\\">useAuth</code> đều sẽ truy xuất đến một kho dữ liệu <em>chung</em></p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-jsx\\\"><code class=\\\"language-jsx\\\"><span class=\\\"token keyword\\\">import</span> useAuth <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">\\\"useAuth\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">MyCom</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token comment\\\">/* quá trời thứ linh tinh trả về */</span>\\n  <span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">useAuth</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token comment\\\">//...</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p><a href=\\\"https://swizec.com/blog/usereducer-usecontext-for-easy-global-state-without-libraries/swizec/9182\\\">useReducer + useContext for easy global state without libraries</a></p>\\n<p><a href=\\\"https://dev.to/nazmifeeroz/using-usecontext-and-usestate-hooks-as-a-store-mnm\\\">Using useContext and useState hooks as a store</a></p>\",\"timeToRead\":4,\"excerpt\":\"Thông thường chúng ta sẽ dùng một  nhà kho  để chứa dữ liệu   như  Redux , một component container bọc ở nút đầu tiên trong app, các…\",\"frontmatter\":{\"title\":\"Sử dụng useReducer và useContext để làm global state\",\"cover\":\"\",\"date\":\"2020-01-08\",\"category\":null,\"tags\":[\"thu-thuat\",\"react\"],\"desc\":\"\"},\"fields\":{\"slug\":\"/2020-01-08-su-dung-context-de-lam-global-store-trong-react\"}}},\"pathContext\":{\"slug\":\"/2020-01-08-su-dung-context-de-lam-global-store-trong-react\",\"prev\":{\"frontmatter\":{\"title\":\"Phương pháp test React Component\",\"desc\":\"Bài viết được dịch từ tài liệu chính thức của React\",\"type\":\"post\",\"category\":null,\"tags\":[\"hoc-thuat\",\"react\"],\"date\":\"2020-01-09\",\"cover\":\"\"},\"fields\":{\"slug\":\"/2020-01-09-phuong-phap-test-react-component\"}},\"next\":{\"frontmatter\":{\"title\":\"Khi nào nên sử dụng useLayoutEffect thay vì useEffect\",\"desc\":\"2 React Hook làm nhiệm vụ khá giống nhau là useEffect và useLayoutEffect bạn đã biết cách sử dụng thế nào cho đúng\",\"type\":\"post\",\"category\":null,\"tags\":[\"thu-thuat\",\"react\"],\"date\":\"2020-01-02\",\"cover\":\"\"},\"fields\":{\"slug\":\"/2020-01-02-khi-nao-nen-su-dung-uselayouteffect-trong-react\"}}}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/2020-01-08-su-dung-context-de-lam-global-store-trong-react.json\n// module id = 1615\n// module chunks = 21682294733211"],"sourceRoot":""}