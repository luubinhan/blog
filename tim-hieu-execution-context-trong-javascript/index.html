<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Tìm hiểu Execution context trong Javascript - VuiLapTrinh.com</title><meta name="gridsome:hash" content="0395a9475e6dcec202a1209b8bd40b74ee081359"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.21"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="Tutorials, Blog, Hướng dẫn, chia sẽ kinh nghiệm về Frontend, react, vue, ux, ui"><meta data-vue-tag="ssr" name="desc" content="Theo quan điểm của mình, khái niệm căn bản và quan trọng bật nhất của javascript là hiểu được Execution Context,"><link rel="preload" href="/assets/css/0.styles.4e7b3092.css" as="style"><link rel="preload" href="/assets/js/app.88e72233.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-post-vue.0d21aba4.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules-gridsome-app-pages-404-vue.204466f8.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.0b0d171f.js"><link rel="prefetch" href="/assets/js/page--src-templates-tag-vue.854eb99f.js"><link rel="stylesheet" href="/assets/css/0.styles.4e7b3092.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true" class="layout-blog"><header class="header"><div class="header__left"><a href="/" class="logo active"><span class="logo__text">
    ← VuiLapTrinh.com
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header><main class="main"><div class="single-post"><div class="single-post-container"><article><header><div class="post-title"><h1 class="post-title__text single-post-title">Tìm hiểu Execution context trong Javascript</h1><div class="post-meta">
  Đăng ngày 2018-11-09.
  
    Mất khoảng
    <strong>3 phút</strong> để đọc.
  </div></div></header><div class="post content-box"><div class="post__header"><!----></div><div className="blog-post"><div class="post-content"><div class="post__content"><!-- TOC -->
<ul>
<li><a href="#global-execution-context">Global Execution Context</a></li>
<li><a href="#function-execution-context">Function Execution Context</a></li>
</ul>
<!-- /TOC -->
<p>Sau khi nắm được nó chúng ta có thể giải thích những vấn đề <em>cao siêu</em> như <strong>hoisting</strong>, <strong>scope chain</strong>, <strong>closure</strong>.</p>
<p>Để hiểu Execution Context, ngẫm lại cách chúng ta viết code: chúng ta tách nó ra thành những phần nhỏ riêng biệt. Những “phần nhỏ” này có các tên gọi như function, module, package, tất cả là để chia nhỏ, dễ quản lý một mớ code vừa to vừa phức tạp.</p>
<p>Nếu Javascript là một người thực thi các đoạn code này, nó cũng dùng cách tương tự, thực thi từng phần code một, được gọi là Execution Context</p>
<div class="note">Mỗi Execution Context sẽ có 2 phase, **Creation phase** và **Execution phase**</div>
<p>Có 2 loại Execution Context: </p>
<ol>
<li>Global Execution Context</li>
<li>Function Execution Context</li>
</ol>
<h2 id="global-execution-context"><a href="#global-execution-context" aria-hidden="true"><span class="icon icon-link"></span></a>Global Execution Context</h2>
<p>Được tạo khi javascript chạy code của chúng ta, bình thường nó sẽ tạo ra 2 thứ: 1 global object và một biến gọi là <code class="language-text">this</code>. <code class="language-text">this</code> sẽ trỏ tới global object là window nếu chạy trên trình duyệt, trỏ tới <code class="language-text">global</code> nếu chạy trên Node</p>
<p><img src="https://tylermcginnis.com/images/posts/advanced-javascript/no-code.png" alt="Execution context, Hoisting, Scopes, Closures trong Javascript"></p>
<p>Khi chúng ta khai báo thêm biến</p>
<p><img src="https://tylermcginnis.com/images/posts/advanced-javascript/global-variables-in-creation-phase.png" alt="Execution context, Hoisting, Scopes, Closures trong Javascript">
<img src="https://tylermcginnis.com/images/posts/advanced-javascript/global-variables-in-execution-phase.png" alt="Execution context, Hoisting, Scopes, Closures trong Javascript"></p>
<p>Creation phase của Global Execution context sẽ có các bước</p>
<ol>
<li>Tạo global object</li>
<li>Tạo object tên là <code class="language-text">this</code></li>
<li>Setup vùng nhớ tạm thời cho biến và function</li>
<li>Gắn giá trị <code class="language-text">undefined</code> cho biến, trỏ từng function đến vùng nhớ.</li>
</ol>
<p>Thử log giá trị sau creation phase và trước execution phase</p>
<p><img src="https://tylermcginnis.com/images/posts/advanced-javascript/global-execution-context-gif.gif" alt="Thử log giá trị sau creation phase và trước execution phase"></p>
<p>Trước khi javascript thực sự chạy các dòng code, <em>creation phase</em> xảy ra trước, nên giá trị log ra sẽ là <code class="language-text">undefined</code>, function sẽ trỏ tới một vùng nhớ.</p>
<pre class="language-js"><code class="language-js"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'name: '</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token comment">// name: undefined</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'handle: '</span><span class="token punctuation">,</span> handle<span class="token punctuation">)</span> <span class="token comment">// handle: undefined</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'getUser :'</span><span class="token punctuation">,</span> getUser<span class="token punctuation">)</span> <span class="token comment">// getUser: ƒ getUser () {}</span>

<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Tyler'</span>
<span class="token keyword">var</span> handle <span class="token operator">=</span> <span class="token string">'@tylermcginnis'</span>

<span class="token keyword">function</span> <span class="token function">getUser</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> name<span class="token punctuation">,</span>
    handle<span class="token operator">:</span> handle
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<div class="note">Trong creation phase, quá trình gắn các biến được khai báo vào giá trị `undefined` được gọi là **hoisting**.</div>
<h2 id="function-execution-context"><a href="#function-execution-context" aria-hidden="true"><span class="icon icon-link"></span></a>Function Execution Context</h2>
<p>Được tạo ra khi thực thi hàm, cơ bản nó cũng giống với Global execution context, khác ở chỗ nó bỏ bước #1</p>
<ol>
<li><del>Tạo global object</del></li>
<li>Tạo một object tên <code class="language-text">arguments</code></li>
<li>Tạo object tên là <code class="language-text">this</code></li>
<li>Setup vùng nhớ tạm thời cho biến và function</li>
<li>Gắn giá trị <code class="language-text">undefined</code> cho biến, trỏ từng function đến vùng nhớ.</li>
</ol>
<p><img src="https://tylermcginnis.com/images/posts/advanced-javascript/function-execution-context-gif.gif" alt="Function execution context"></p>
<p>Bạn có thấy cái ô màu hồng hồng trên hình nó xuất hiện khi function được thực thi, sau đó bị remove sau khi chạy xong. Khi tạo một execution context, javascript đưa vào một hàng đợi gọi là <strong>Call Stack</strong>, sau khi đã chạy xong 2 phase nó remove khỏi Call Stack</p>
<p><img src="https://tylermcginnis.com/images/posts/advanced-javascript/javascript-execution-stack.gif" alt="sau khi đã chạy xong 2 phase nó remove khỏi Call Stack
"></p>
<p><a href="https://goo.gl/vjmnTa" target="_blank" rel="nofollow noopener noreferrer">Chạy thử</a></p>
<p>Với một function có khai báo biến bên trong</p>
<p><img src="https://tylermcginnis.com/images/posts/advanced-javascript/local-variables.gif" alt="Với một function có khai báo biến bên trong"></p>
<p>Quá hiển nhiên là biến <code class="language-text">handle</code> nằm trong Global Execution Context, nên bên trong function chúng ta có thể access đến nó, trong khi biến <code class="language-text">twitterURL</code> được khởi tạo ở trong function, nó chỉ có trong Function Execution Context khi hàm được thực thi. Đây chính là nền tảng của khái niệm <strong>SCOPE</strong></p>
<p>Chúng ta đã biết scope ám chỉ việc biến có thể truy xuất ở đâu. Trên MDN nó định nghĩa scope</p>
<blockquote>
<p>Scope: The current context of execution.</p>
</blockquote>
<p>Giờ bạn nghĩ xem, cái gì sẽ được log ra sau khi chạy hàm</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">first</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Jordyn'</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">second</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Jake'</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Tyler'</span>
<span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">second</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span></code></pre>
<p><img src="https://tylermcginnis.com/images/posts/advanced-javascript/unique-scopes.gif" alt="Execution context, Hoisting, Scopes, Closures"></p>
<p>Chúng ta sẽ có thứ tự log ra: <code class="language-text">undefined</code>, <code class="language-text">Jordyn</code>, <code class="language-text">Jake</code>, <code class="language-text">Tyler</code></p>
<p>Trong trường hợp biến không tồn tại trong execution context của function, liệu nó sẽ log ra cái gì, hay ngừng chạy?</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Tyler'</span>

<span class="token keyword">function</span> <span class="token function">logName</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">logName</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<p><img src="https://tylermcginnis.com/images/posts/advanced-javascript/parent-lookup.gif" alt="Trong trường hợp biến không tồn tại trong execution context của function"></p>
<p>Kết quả log ra là "Tyler", dù bên trong execution context của hàm không có biến, nó sẽ tìm đến thằng context cha xem có giá trị của biến này chưa, cho đến khi global execution context nó sẽ dừng.</p>
<div class="note">Đặc điểm này trọng javascript được gọi là Scope chain</div>
<p><img src="https://tylermcginnis.com/images/posts/advanced-javascript/closure-scope.gif" alt="Đặc điểm này trọng javascript được gọi là Scope chain"></p>
<div class="note">Khi chúng ta lồng một function bên trong 1 function như vậy, nó sẽ tạo ra một cái gọi là <b>Closure Scope</b></div>
<p>Tham khảo thêm</p>
<p>Mình đã viết bài này trên MDN <a href="https://developer.mozilla.org/vi/docs/Web/JavaScript/Closures" target="_blank" rel="noopener noreferrer">Closures</a></p>
<p><a href="https://tylermcginnis.com/ultimate-guide-to-execution-contexts-hoisting-scopes-and-closures-in-javascript/" target="_blank" rel="noopener noreferrer">The Ultimate Guide to Execution Contexts, Hoisting, Scopes, and Closures in JavaScript</a></p>
<p><a href="https://tylermcginnis.com/javascript-visualizer/" target="_blank" rel="noopener noreferrer">Diễn giải các khái niệm bằng công cụ do tác giả build </a></p>
</div></div></div><div class="post__footer"><div class="post-tags"><a href="/tag/javascript/" class="post-tags__link"><span>#</span> javascript
		</a></div></div></div><div class="post-comments"></div><div class="author post-author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-52311ff214b737f722259e901102d6b3'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-52311ff214b737f722259e901102d6b3)' width='180' height='180' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAABwEDBAUGCAAC/8QAMxAAAQMCAwcBBgYDAAAAAAAAAQIDEQAEBRIhBhMxQVFhcQciIzJCgbEIFDORodEWgsH/xAAZAQEBAQEBAQAAAAAAAAAAAAAEAwUGAAH/xAAhEQABBAMAAgMBAAAAAAAAAAABAAIDEQQSISJBBRNRMf/aAAwDAQACEQMRAD8A6Pr1fOalmvLyUAk6AnxS5VROUx4oR%2bvmPXNjZYbhti48DcKUt9LRIJAHsgkaxMmO1ByzxnG8PeQ/a3d5bOIIUVJdUOHMifvWjB8c6aMP2q0CfPbC/TW119SVz9YetmOMLYRfWWH3TaSA4pKVNrWOuhgH6UYtkNrsK2stFvYU65nbjesOpyrbnhPIjuKhPhSwDZw4qw5kU5ph6r%2blpCYFNOLKflV5o1JSXMkDlS5xy1qtDo4mfrWe2/xhWEbJ3t400%2b6oZWyGpkBRiTGoSNJj/tVbEXEN/VMyAC1iPUTaS2xjG3bO3IS3ay2HNJc1lR6xPDx3oa4g0RvVlQcSfhFRLrEF3V0LpSAh10layOMzw7eKl3jqLhxsxLaRw4610MUYiAa1ZMxMosrPugpJJ0nlwiiJ%2bH69eZ28NulfuX7R0LTOhygKB8yKxWLaWoC0BJKpgfL2rdfh8sV3G1F9iBTLNnalGbkFuEADzAVVMpwOO6/xCx4izJaAuiSsT8UV8KKyBznmKih1J714OqIiCa5jVdJsqk4ggL9oRPSqDbty4/w/GnLVzKPyypBkaEif4p5N2RwA/anlPtvsrafAW0tJStChKVA8QR0p4ZqQQil1ilz5Y5nGloXKkcNev908G8iUoSCUiiHtVhFhhdou6wu2O6JyuNg/pzwUCdY5a8JrAXtwErWi3RmIEZwZE9utaccm/QEVzKVZjVrltN4JyJMqFdGemuz7OzmyFjbBGS5eQLm6PMuLAMf6iE/SgBavuMPNOON75wKC0tr4GDPtdqO%2bxm0i8ew0O3O7RfJnett6J4mCnXhH81DNDzGK/i%2b4/wBbZSb7S1xQ2IIVBHWvb2BAIioBcVxMCml3KgYFZQZadtSzAK460hCpkk%2bBTzahmmnXnRA0APmadsj0ol1uE2T6r5SEWgbO9K%2bARGs0H7stto3luczSyS3mEKUJIBI66VrvUnGWlJZwlKsuaHnjmgafCk/f9qwD6y%2b2pbjhKU%2bylWaJ8dabjxmtne0HInolrVcYThj18w5clKzl1KOZ/sVLRtJ%2bQbQ7akpum/01oEA9c3bvULB8WtGbRYuW1vvBOVtTivm48eVUt9Z3dwpKlIbaZIhJQZEdJq7fJxDxxHcdWgxnvtFbZz1ItsQCWMWyWb8hJcn3ZV3Pyz14eK2e9WpUBJoGYHhVpmCQyCtTZBMaHz1oq7DYxvmBh11IeZT7pR%2bZA5eR9vFCyoGs8owm4sz38kK//9k=' /%3e%3c/svg%3e" width="180" data-src="/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" data-srcset="/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript><!----><p class="author__intro">Hiện tại site đang nâng cấp, các bạn xài tạm</p></div></article></div></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2020.</span><span class="footer__links">luckyluu</span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Tìm hiểu Execution context trong Javascript","path":"\u002Ftim-hieu-execution-context-trong-javascript\u002F","date":"2018-11-09","timeToRead":3,"tags":[{"id":"javascript","title":"javascript","path":"\u002Ftag\u002Fjavascript\u002F"}],"desc":"Theo quan điểm của mình, khái niệm căn bản và quan trọng bật nhất của javascript là hiểu được Execution Context,","content":"\u003C!-- TOC --\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"#global-execution-context\"\u003EGlobal Execution Context\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#function-execution-context\"\u003EFunction Execution Context\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C!-- \u002FTOC --\u003E\n\u003Cp\u003ESau khi nắm được nó chúng ta có thể giải thích những vấn đề \u003Cem\u003Ecao siêu\u003C\u002Fem\u003E như \u003Cstrong\u003Ehoisting\u003C\u002Fstrong\u003E, \u003Cstrong\u003Escope chain\u003C\u002Fstrong\u003E, \u003Cstrong\u003Eclosure\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EĐể hiểu Execution Context, ngẫm lại cách chúng ta viết code: chúng ta tách nó ra thành những phần nhỏ riêng biệt. Những “phần nhỏ” này có các tên gọi như function, module, package, tất cả là để chia nhỏ, dễ quản lý một mớ code vừa to vừa phức tạp.\u003C\u002Fp\u003E\n\u003Cp\u003ENếu Javascript là một người thực thi các đoạn code này, nó cũng dùng cách tương tự, thực thi từng phần code một, được gọi là Execution Context\u003C\u002Fp\u003E\n\u003Cdiv class=\"note\"\u003EMỗi Execution Context sẽ có 2 phase, **Creation phase** và **Execution phase**\u003C\u002Fdiv\u003E\n\u003Cp\u003ECó 2 loại Execution Context: \u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003EGlobal Execution Context\u003C\u002Fli\u003E\n\u003Cli\u003EFunction Execution Context\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Ch2 id=\"global-execution-context\"\u003E\u003Ca href=\"#global-execution-context\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EGlobal Execution Context\u003C\u002Fh2\u003E\n\u003Cp\u003EĐược tạo khi javascript chạy code của chúng ta, bình thường nó sẽ tạo ra 2 thứ: 1 global object và một biến gọi là \u003Ccode class=\"language-text\"\u003Ethis\u003C\u002Fcode\u003E. \u003Ccode class=\"language-text\"\u003Ethis\u003C\u002Fcode\u003E sẽ trỏ tới global object là window nếu chạy trên trình duyệt, trỏ tới \u003Ccode class=\"language-text\"\u003Eglobal\u003C\u002Fcode\u003E nếu chạy trên Node\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Ftylermcginnis.com\u002Fimages\u002Fposts\u002Fadvanced-javascript\u002Fno-code.png\" alt=\"Execution context, Hoisting, Scopes, Closures trong Javascript\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EKhi chúng ta khai báo thêm biến\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Ftylermcginnis.com\u002Fimages\u002Fposts\u002Fadvanced-javascript\u002Fglobal-variables-in-creation-phase.png\" alt=\"Execution context, Hoisting, Scopes, Closures trong Javascript\"\u003E\n\u003Cimg src=\"https:\u002F\u002Ftylermcginnis.com\u002Fimages\u002Fposts\u002Fadvanced-javascript\u002Fglobal-variables-in-execution-phase.png\" alt=\"Execution context, Hoisting, Scopes, Closures trong Javascript\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ECreation phase của Global Execution context sẽ có các bước\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003ETạo global object\u003C\u002Fli\u003E\n\u003Cli\u003ETạo object tên là \u003Ccode class=\"language-text\"\u003Ethis\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003ESetup vùng nhớ tạm thời cho biến và function\u003C\u002Fli\u003E\n\u003Cli\u003EGắn giá trị \u003Ccode class=\"language-text\"\u003Eundefined\u003C\u002Fcode\u003E cho biến, trỏ từng function đến vùng nhớ.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003EThử log giá trị sau creation phase và trước execution phase\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Ftylermcginnis.com\u002Fimages\u002Fposts\u002Fadvanced-javascript\u002Fglobal-execution-context-gif.gif\" alt=\"Thử log giá trị sau creation phase và trước execution phase\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETrước khi javascript thực sự chạy các dòng code, \u003Cem\u003Ecreation phase\u003C\u002Fem\u003E xảy ra trước, nên giá trị log ra sẽ là \u003Ccode class=\"language-text\"\u003Eundefined\u003C\u002Fcode\u003E, function sẽ trỏ tới một vùng nhớ.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token console class-name\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'name: '\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F name: undefined\u003C\u002Fspan\u003E\n\u003Cspan class=\"token console class-name\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'handle: '\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E handle\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F handle: undefined\u003C\u002Fspan\u003E\n\u003Cspan class=\"token console class-name\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'getUser :'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E getUser\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F getUser: ƒ getUser () {}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E name \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'Tyler'\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E handle \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'@tylermcginnis'\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EgetUser\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    name\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E name\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    handle\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E handle\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cdiv class=\"note\"\u003ETrong creation phase, quá trình gắn các biến được khai báo vào giá trị `undefined` được gọi là **hoisting**.\u003C\u002Fdiv\u003E\n\u003Ch2 id=\"function-execution-context\"\u003E\u003Ca href=\"#function-execution-context\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EFunction Execution Context\u003C\u002Fh2\u003E\n\u003Cp\u003EĐược tạo ra khi thực thi hàm, cơ bản nó cũng giống với Global execution context, khác ở chỗ nó bỏ bước #1\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Cdel\u003ETạo global object\u003C\u002Fdel\u003E\u003C\u002Fli\u003E\n\u003Cli\u003ETạo một object tên \u003Ccode class=\"language-text\"\u003Earguments\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003ETạo object tên là \u003Ccode class=\"language-text\"\u003Ethis\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003Cli\u003ESetup vùng nhớ tạm thời cho biến và function\u003C\u002Fli\u003E\n\u003Cli\u003EGắn giá trị \u003Ccode class=\"language-text\"\u003Eundefined\u003C\u002Fcode\u003E cho biến, trỏ từng function đến vùng nhớ.\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Ftylermcginnis.com\u002Fimages\u002Fposts\u002Fadvanced-javascript\u002Ffunction-execution-context-gif.gif\" alt=\"Function execution context\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EBạn có thấy cái ô màu hồng hồng trên hình nó xuất hiện khi function được thực thi, sau đó bị remove sau khi chạy xong. Khi tạo một execution context, javascript đưa vào một hàng đợi gọi là \u003Cstrong\u003ECall Stack\u003C\u002Fstrong\u003E, sau khi đã chạy xong 2 phase nó remove khỏi Call Stack\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Ftylermcginnis.com\u002Fimages\u002Fposts\u002Fadvanced-javascript\u002Fjavascript-execution-stack.gif\" alt=\"sau khi đã chạy xong 2 phase nó remove khỏi Call Stack\n\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fgoo.gl\u002FvjmnTa\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EChạy thử\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EVới một function có khai báo biến bên trong\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Ftylermcginnis.com\u002Fimages\u002Fposts\u002Fadvanced-javascript\u002Flocal-variables.gif\" alt=\"Với một function có khai báo biến bên trong\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EQuá hiển nhiên là biến \u003Ccode class=\"language-text\"\u003Ehandle\u003C\u002Fcode\u003E nằm trong Global Execution Context, nên bên trong function chúng ta có thể access đến nó, trong khi biến \u003Ccode class=\"language-text\"\u003EtwitterURL\u003C\u002Fcode\u003E được khởi tạo ở trong function, nó chỉ có trong Function Execution Context khi hàm được thực thi. Đây chính là nền tảng của khái niệm \u003Cstrong\u003ESCOPE\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EChúng ta đã biết scope ám chỉ việc biến có thể truy xuất ở đâu. Trên MDN nó định nghĩa scope\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003EScope: The current context of execution.\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003EGiờ bạn nghĩ xem, cái gì sẽ được log ra sau khi chạy hàm\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Efirst\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E name \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'Jordyn'\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token console class-name\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Esecond\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E name \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'Jake'\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token console class-name\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token console class-name\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E name \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'Tyler'\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003Efirst\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003Esecond\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token console class-name\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Ftylermcginnis.com\u002Fimages\u002Fposts\u002Fadvanced-javascript\u002Funique-scopes.gif\" alt=\"Execution context, Hoisting, Scopes, Closures\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EChúng ta sẽ có thứ tự log ra: \u003Ccode class=\"language-text\"\u003Eundefined\u003C\u002Fcode\u003E, \u003Ccode class=\"language-text\"\u003EJordyn\u003C\u002Fcode\u003E, \u003Ccode class=\"language-text\"\u003EJake\u003C\u002Fcode\u003E, \u003Ccode class=\"language-text\"\u003ETyler\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ETrong trường hợp biến không tồn tại trong execution context của function, liệu nó sẽ log ra cái gì, hay ngừng chạy?\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E name \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'Tyler'\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunction\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003ElogName\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token console class-name\"\u003Econsole\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token method function property-access\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ename\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token function\"\u003ElogName\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Ftylermcginnis.com\u002Fimages\u002Fposts\u002Fadvanced-javascript\u002Fparent-lookup.gif\" alt=\"Trong trường hợp biến không tồn tại trong execution context của function\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EKết quả log ra là \"Tyler\", dù bên trong execution context của hàm không có biến, nó sẽ tìm đến thằng context cha xem có giá trị của biến này chưa, cho đến khi global execution context nó sẽ dừng.\u003C\u002Fp\u003E\n\u003Cdiv class=\"note\"\u003EĐặc điểm này trọng javascript được gọi là Scope chain\u003C\u002Fdiv\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Ftylermcginnis.com\u002Fimages\u002Fposts\u002Fadvanced-javascript\u002Fclosure-scope.gif\" alt=\"Đặc điểm này trọng javascript được gọi là Scope chain\"\u003E\u003C\u002Fp\u003E\n\u003Cdiv class=\"note\"\u003EKhi chúng ta lồng một function bên trong 1 function như vậy, nó sẽ tạo ra một cái gọi là \u003Cb\u003EClosure Scope\u003C\u002Fb\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003ETham khảo thêm\u003C\u002Fp\u003E\n\u003Cp\u003EMình đã viết bài này trên MDN \u003Ca href=\"https:\u002F\u002Fdeveloper.mozilla.org\u002Fvi\u002Fdocs\u002FWeb\u002FJavaScript\u002FClosures\" target=\"_blank\" rel=\"noopener noreferrer\"\u003EClosures\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Ftylermcginnis.com\u002Fultimate-guide-to-execution-contexts-hoisting-scopes-and-closures-in-javascript\u002F\" target=\"_blank\" rel=\"noopener noreferrer\"\u003EThe Ultimate Guide to Execution Contexts, Hoisting, Scopes, and Closures in JavaScript\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Ftylermcginnis.com\u002Fjavascript-visualizer\u002F\" target=\"_blank\" rel=\"noopener noreferrer\"\u003EDiễn giải các khái niệm bằng công cụ do tác giả build \u003C\u002Fa\u003E\u003C\u002Fp\u003E\n","cover_image":""}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.88e72233.js" defer></script><script src="/assets/js/page--src-templates-post-vue.0d21aba4.js" defer></script>
  </body>
</html>