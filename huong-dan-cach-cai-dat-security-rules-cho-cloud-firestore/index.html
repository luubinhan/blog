<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Hướng dẫn cách cài đặt security rules cho Cloud Firestore - VuiLapTrinh.com</title><meta name="gridsome:hash" content="0ea6a5c7ec18fcd2d372c0c225289996c79af9fc"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.21"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="Tutorials, Blog, Hướng dẫn, chia sẽ kinh nghiệm về Frontend, react, vue, ux, ui"><meta data-vue-tag="ssr" name="desc" content="Series hướng dẫn sử dụng các service Firebase"><link rel="preload" href="/blog/assets/css/0.styles.d493c61a.css" as="style"><link rel="preload" href="/blog/assets/js/app.f8d91bd5.js" as="script"><link rel="preload" href="/blog/assets/js/page--src-templates-post-vue.980fbd47.js" as="script"><link rel="prefetch" href="/blog/assets/js/page--node-modules-gridsome-app-pages-404-vue.b044eecd.js"><link rel="prefetch" href="/blog/assets/js/page--src-pages-index-vue.bd4a2964.js"><link rel="prefetch" href="/blog/assets/js/page--src-templates-tag-vue.4999789e.js"><link rel="stylesheet" href="/blog/assets/css/0.styles.d493c61a.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/blog/" class="logo active"><span class="logo__text">
    ← VuiLapTrinh.com
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">Hướng dẫn cách cài đặt security rules cho Cloud Firestore</h1><div class="post-meta">
  Đăng ngày 2018-08-17.
  
    Mất khoảng
    <strong>3 phút</strong> để đọc.
  </div></div><div class="post content-box"><div class="post__header"><!----></div><div class="post__content"><!-- TOC -->
<ul>
<li><a href="#khai-b%C3%A1o">Khai báo</a></li>
<li><a href="#rules-readwrite">Rules read/write</a></li>
<li><a href="#chia-nh%E1%BB%8F-thao-t%C3%A1c-ra">Chia nhỏ thao tác ra</a></li>
<li><a href="#k%E1%BA%BF-th%E1%BB%ABa">Kế thừa</a></li>
</ul>
<!-- /TOC -->
<p>Cloud FireStore Security Rules cho phép chúng ta tùy chỉnh việc cấp quyền truy cập đến <strong>documents</strong> và <strong>collection</strong> trong database. Chúng ta có thể thiết lập quyền trên toàn bộ database hoặc một <strong>document</strong> xác định.</p>
<h1 id="khai-báo"><a href="#khai-b%C3%A1o" aria-hidden="true"><span class="icon icon-link"></span></a>Khai báo</h1>
<p>Câu lệnh khai báo của Firestore Security Rules </p>
<pre class="language-shell"><code class="language-shell"><span class="token function">service</span> cloud.firestore <span class="token punctuation">{</span>
  match /databases/<span class="token punctuation">{</span>database<span class="token punctuation">}</span>/documents <span class="token punctuation">{</span>
    // <span class="token punctuation">..</span>.
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p><code class="language-text">service cloud.firestore</code> để giới hạn chúng ta chỉ áp rule này xuống Cloud Firestore, tránh xung đột với các service khác của Firebase</p>
<p><code class="language-text">match /databases/{database}/documents</code> chỉ định rule này chỉ áp dụng cho các database trong project. Hiện tại mỗi project trên Firebase sẽ chỉ hỗ trợ một database Firestore</p>
<h1 id="rules-readwrite"><a href="#rules-readwrite" aria-hidden="true"><span class="icon icon-link"></span></a>Rules read/write</h1>
<p>Câu lệnh <code class="language-text">match</code> sẽ chỉ định đường dẫn của <em>document</em> bị ảnh hưởng, bên trong đó ta dùng lệnh <code class="language-text">allow</code> để diễn giải chi tiết về rule</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">service</span> cloud.firestore <span class="token punctuation">{</span>
  match /databases/<span class="token punctuation">{</span>database<span class="token punctuation">}</span>/documents <span class="token punctuation">{</span>
    // tất cả document trong collection cities
    match /cities/<span class="token punctuation">{</span>city<span class="token punctuation">}</span> <span class="token punctuation">{</span>
      allow read: <span class="token keyword">if</span> <span class="token operator">&lt;</span>condition<span class="token operator">></span><span class="token punctuation">;</span>
      allow write: <span class="token keyword">if</span> <span class="token operator">&lt;</span>condition<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Tất cả câu <code class="language-text">match</code> phải chỉ đến <strong>documents</strong>, không trỏ tới <strong>collections</strong>, có thể dùng <code class="language-text">match /cities/HCM</code> hoặc sử dụng ký tự đại diện bất kỳ document nào bên trong <code class="language-text">cities</code> như ví dụ <code class="language-text">match /cities/{city}</code></p>
<h1 id="chia-nhỏ-thao-tác-ra"><a href="#chia-nh%E1%BB%8F-thao-t%C3%A1c-ra" aria-hidden="true"><span class="icon icon-link"></span></a>Chia nhỏ thao tác ra</h1>
<p>Tình huống: chúng ta muốn lúc tạo có những điều khác với lúc xóa document, hoặc cho phép read 1 document nhưng không cho phép đọc toàn bộ</p>
<p>Câu điều kiện <code class="language-text">read</code> có thể chia nhỏ ra thành <code class="language-text">get</code> và <code class="language-text">list</code>, trong khi <code class="language-text">write</code> có thể chia nhỏ thành <code class="language-text">create</code>, <code class="language-text">update</code>, <code class="language-text">delete</code></p>
<pre class="language-shell"><code class="language-shell"><span class="token function">service</span> cloud.firestore <span class="token punctuation">{</span>
  match /databases/<span class="token punctuation">{</span>database<span class="token punctuation">}</span>/documents <span class="token punctuation">{</span>
    match /cities/<span class="token punctuation">{</span>city<span class="token punctuation">}</span> <span class="token punctuation">{</span>
      // điều kiện trên <span class="token number">1</span> document
      allow get: <span class="token keyword">if</span> <span class="token operator">&lt;</span>condition<span class="token operator">></span><span class="token punctuation">;</span>

      // điều kiện khi queries nhiều document, hoặc gọi hết collection
      allow list: <span class="token keyword">if</span> <span class="token operator">&lt;</span>condition<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    match /cities/<span class="token punctuation">{</span>city<span class="token punctuation">}</span> <span class="token punctuation">{</span>
      // lúc tạo
      allow create: <span class="token keyword">if</span> <span class="token operator">&lt;</span>condition<span class="token operator">></span><span class="token punctuation">;</span>

      // lúc update
      allow update: <span class="token keyword">if</span> <span class="token operator">&lt;</span>condition<span class="token operator">></span><span class="token punctuation">;</span>

      // lúc delete
      allow delete: <span class="token keyword">if</span> <span class="token operator">&lt;</span>condition<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h1 id="kế-thừa"><a href="#k%E1%BA%BF-th%E1%BB%ABa" aria-hidden="true"><span class="icon icon-link"></span></a>Kế thừa</h1>
<p>Như đã biết, nếu chưa biết thì giờ mình giải thích nhanh, database trên Firebase lưu dạng collections(giống như array), trong các collection là document (một object). Trên mỗi document nó có thể chứa các collection khác nữa. Vậy thì các rules trên document nó sẽ ảnh hưởng thế nào đến các sub collection này.</p>
<p>Với ví dụ ở trên, trong <code class="language-text">cities</code> chúng ta chứa một sub collection là <code class="language-text">landmarks</code>. Rule trên <code class="language-text">cities</code> sẽ không ảnh hưởng đến <code class="language-text">landmarks</code>, trừ khi chúng ta cố tình set nó như sau</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">service</span> cloud.firestore <span class="token punctuation">{</span>
  match /databases/<span class="token punctuation">{</span>database<span class="token punctuation">}</span>/documents <span class="token punctuation">{</span>
    match /cities/<span class="token punctuation">{</span>city<span class="token punctuation">}</span> <span class="token punctuation">{</span>
      allow read, write: <span class="token keyword">if</span> <span class="token operator">&lt;</span>condition<span class="token operator">></span><span class="token punctuation">;</span>
        // áp dụng luôn cho collections con
        match /landmarks/<span class="token punctuation">{</span>landmark<span class="token punctuation">}</span> <span class="token punctuation">{</span>
          allow read, write: <span class="token keyword">if</span> <span class="token operator">&lt;</span>condition<span class="token operator">></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Khi viết lồng câu <code class="language-text">match</code> như vậy, câu <code class="language-text">match</code> bên dưới sẽ <strong>luôn relative</strong> với thằng trên. Và chúng ta cũng có thể viết như sau, kết quả tương tự với cách viết ở trên</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">service</span> cloud.firestore <span class="token punctuation">{</span>
  match /databases/<span class="token punctuation">{</span>database<span class="token punctuation">}</span>/documents <span class="token punctuation">{</span>
    match /cities/<span class="token punctuation">{</span>city<span class="token punctuation">}</span> <span class="token punctuation">{</span>
      match /landmarks/<span class="token punctuation">{</span>landmark<span class="token punctuation">}</span> <span class="token punctuation">{</span>
        allow read, write: <span class="token keyword">if</span> <span class="token operator">&lt;</span>condition<span class="token operator">></span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<pre class="language-shell"><code class="language-shell"><span class="token function">service</span> cloud.firestore <span class="token punctuation">{</span>
  match /databases/<span class="token punctuation">{</span>database<span class="token punctuation">}</span>/documents <span class="token punctuation">{</span>
    match /cities/<span class="token punctuation">{</span>city<span class="token punctuation">}</span>/landmarks/<span class="token punctuation">{</span>landmark<span class="token punctuation">}</span> <span class="token punctuation">{</span>
      allow read, write: <span class="token keyword">if</span> <span class="token operator">&lt;</span>condition<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Nếu không chỉ áp dụng rule cho đúng thằng <code class="language-text">landmarks</code>, sử dụng cú pháp đại diện cho toàn bộ collection nằm dưới <code class="language-text">cities</code>, <code class="language-text">{name=**}</code></p>
<pre class="language-shell"><code class="language-shell"><span class="token function">service</span> cloud.firestore <span class="token punctuation">{</span>
  match /database/<span class="token punctuation">{</span>database<span class="token punctuation">}</span>/documents <span class="token punctuation">{</span>
    match /cities/<span class="token punctuation">{</span>document<span class="token operator">=</span>**<span class="token punctuation">}</span> <span class="token punctuation">{</span>
      allow read, write: <span class="token keyword">if</span> <span class="token operator">&lt;</span>condition<span class="token operator">></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Với cách viết trên toàn bộ document nằm ở <code class="language-text">/cities/hochiminh/landmarks/landmark81</code>, <code class="language-text">/cities/hochiminh/landmarks/bitexco</code>, <code class="language-text">cities/hochiminh</code></p>
<p>Nếu chúng ta viết lại <code class="language-text">match /cities/{city}/{document=**} thì nó chỉ ảnh hưởng đến sub collection, thằng</code>cities/hochiminh` sẽ không bị ảnh hưởng.</p>
<p>Nếu có nhiều câu <code class="language-text">allow</code> khớp với <code class="language-text">match</code>, thì kết quả sẽ là một phép <code class="language-text">hoặc</code>, bất kỳ thằng nào thõa điều kiện thì <code class="language-text">allow</code></p>
<pre class="language-shell"><code class="language-shell"><span class="token function">service</span> cloud.firestore <span class="token punctuation">{</span>
  match /databases/<span class="token punctuation">{</span>database<span class="token punctuation">}</span>/documents <span class="token punctuation">{</span>
    // <span class="token string">'cities'</span> collection.
    match /cities/<span class="token punctuation">{</span>city<span class="token punctuation">}</span> <span class="token punctuation">{</span>
      allow read, write: <span class="token keyword">if</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    // <span class="token string">'cities'</span> collection hoặc subcollections.
    match /cities/<span class="token punctuation">{</span>document<span class="token operator">=</span>**<span class="token punctuation">}</span> <span class="token punctuation">{</span>
      allow read, write: <span class="token keyword">if</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Ví dụ ở trên toàn bộ collection cities sẽ cho phép read, write vì điều kiện thứ 2 luôn <code class="language-text">true</code>, mặc dù thằng trước nó luôn <code class="language-text">false</code></p>
<p><a href="https://firebase.google.com/docs/firestore/security/rules-structure" target="_blank" rel="nofollow noopener noreferrer">Link bài gốc của Google</a></p>
</div><div class="post__footer"><div class="post-tags"><a href="/blog/tag/firestore/" class="post-tags__link"><span>#</span> firestore
		</a><a href="/blog/tag/firebase/" class="post-tags__link"><span>#</span> firebase
		</a><a href="/blog/tag/security/" class="post-tags__link"><span>#</span> security
		</a></div></div></div><div class="post-comments"></div><div class="author post-author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-52311ff214b737f722259e901102d6b3'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-52311ff214b737f722259e901102d6b3)' width='180' height='180' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAABwEDBAUGCAAC/8QAMxAAAQMCAwcBBgYDAAAAAAAAAQIDEQAEBRIhBhMxQVFhcQciIzJCgbEIFDORodEWgsH/xAAZAQEBAQEBAQAAAAAAAAAAAAAEAwUGAAH/xAAhEQABBAMAAgMBAAAAAAAAAAABAAIDEQQSISJBBRNRMf/aAAwDAQACEQMRAD8A6Pr1fOalmvLyUAk6AnxS5VROUx4oR%2bvmPXNjZYbhti48DcKUt9LRIJAHsgkaxMmO1ByzxnG8PeQ/a3d5bOIIUVJdUOHMifvWjB8c6aMP2q0CfPbC/TW119SVz9YetmOMLYRfWWH3TaSA4pKVNrWOuhgH6UYtkNrsK2stFvYU65nbjesOpyrbnhPIjuKhPhSwDZw4qw5kU5ph6r%2blpCYFNOLKflV5o1JSXMkDlS5xy1qtDo4mfrWe2/xhWEbJ3t400%2b6oZWyGpkBRiTGoSNJj/tVbEXEN/VMyAC1iPUTaS2xjG3bO3IS3ay2HNJc1lR6xPDx3oa4g0RvVlQcSfhFRLrEF3V0LpSAh10layOMzw7eKl3jqLhxsxLaRw4610MUYiAa1ZMxMosrPugpJJ0nlwiiJ%2bH69eZ28NulfuX7R0LTOhygKB8yKxWLaWoC0BJKpgfL2rdfh8sV3G1F9iBTLNnalGbkFuEADzAVVMpwOO6/xCx4izJaAuiSsT8UV8KKyBznmKih1J714OqIiCa5jVdJsqk4ggL9oRPSqDbty4/w/GnLVzKPyypBkaEif4p5N2RwA/anlPtvsrafAW0tJStChKVA8QR0p4ZqQQil1ilz5Y5nGloXKkcNev908G8iUoSCUiiHtVhFhhdou6wu2O6JyuNg/pzwUCdY5a8JrAXtwErWi3RmIEZwZE9utaccm/QEVzKVZjVrltN4JyJMqFdGemuz7OzmyFjbBGS5eQLm6PMuLAMf6iE/SgBavuMPNOON75wKC0tr4GDPtdqO%2bxm0i8ew0O3O7RfJnett6J4mCnXhH81DNDzGK/i%2b4/wBbZSb7S1xQ2IIVBHWvb2BAIioBcVxMCml3KgYFZQZadtSzAK460hCpkk%2bBTzahmmnXnRA0APmadsj0ol1uE2T6r5SEWgbO9K%2bARGs0H7stto3luczSyS3mEKUJIBI66VrvUnGWlJZwlKsuaHnjmgafCk/f9qwD6y%2b2pbjhKU%2bylWaJ8dabjxmtne0HInolrVcYThj18w5clKzl1KOZ/sVLRtJ%2bQbQ7akpum/01oEA9c3bvULB8WtGbRYuW1vvBOVtTivm48eVUt9Z3dwpKlIbaZIhJQZEdJq7fJxDxxHcdWgxnvtFbZz1ItsQCWMWyWb8hJcn3ZV3Pyz14eK2e9WpUBJoGYHhVpmCQyCtTZBMaHz1oq7DYxvmBh11IeZT7pR%2bZA5eR9vFCyoGs8owm4sz38kK//9k=' /%3e%3c/svg%3e" width="180" data-src="/blog/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" data-srcset="/blog/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/blog/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript><!----><p class="author__intro">Hiện tại site đang nâng cấp, các bạn xài tạm</p></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2020.</span><span class="footer__links">luckyluu</span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Hướng dẫn cách cài đặt security rules cho Cloud Firestore","path":"\u002Fhuong-dan-cach-cai-dat-security-rules-cho-cloud-firestore\u002F","date":"2018-08-17","timeToRead":3,"tags":[{"id":"firestore","title":"firestore","path":"\u002Ftag\u002Ffirestore\u002F"},{"id":"firebase","title":"firebase","path":"\u002Ftag\u002Ffirebase\u002F"},{"id":"security","title":"security","path":"\u002Ftag\u002Fsecurity\u002F"}],"desc":"Series hướng dẫn sử dụng các service Firebase","content":"\u003C!-- TOC --\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"#khai-b%C3%A1o\"\u003EKhai báo\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#rules-readwrite\"\u003ERules read\u002Fwrite\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#chia-nh%E1%BB%8F-thao-t%C3%A1c-ra\"\u003EChia nhỏ thao tác ra\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#k%E1%BA%BF-th%E1%BB%ABa\"\u003EKế thừa\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C!-- \u002FTOC --\u003E\n\u003Cp\u003ECloud FireStore Security Rules cho phép chúng ta tùy chỉnh việc cấp quyền truy cập đến \u003Cstrong\u003Edocuments\u003C\u002Fstrong\u003E và \u003Cstrong\u003Ecollection\u003C\u002Fstrong\u003E trong database. Chúng ta có thể thiết lập quyền trên toàn bộ database hoặc một \u003Cstrong\u003Edocument\u003C\u002Fstrong\u003E xác định.\u003C\u002Fp\u003E\n\u003Ch1 id=\"khai-báo\"\u003E\u003Ca href=\"#khai-b%C3%A1o\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EKhai báo\u003C\u002Fh1\u003E\n\u003Cp\u003ECâu lệnh khai báo của Firestore Security Rules \u003C\u002Fp\u003E\n\u003Cpre class=\"language-shell\"\u003E\u003Ccode class=\"language-shell\"\u003E\u003Cspan class=\"token function\"\u003Eservice\u003C\u002Fspan\u003E cloud.firestore \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  match \u002Fdatabases\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Edatabase\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u002Fdocuments \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u002F\u002F \u003Cspan class=\"token punctuation\"\u003E..\u003C\u002Fspan\u003E.\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Ccode class=\"language-text\"\u003Eservice cloud.firestore\u003C\u002Fcode\u003E để giới hạn chúng ta chỉ áp rule này xuống Cloud Firestore, tránh xung đột với các service khác của Firebase\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode class=\"language-text\"\u003Ematch \u002Fdatabases\u002F{database}\u002Fdocuments\u003C\u002Fcode\u003E chỉ định rule này chỉ áp dụng cho các database trong project. Hiện tại mỗi project trên Firebase sẽ chỉ hỗ trợ một database Firestore\u003C\u002Fp\u003E\n\u003Ch1 id=\"rules-readwrite\"\u003E\u003Ca href=\"#rules-readwrite\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ERules read\u002Fwrite\u003C\u002Fh1\u003E\n\u003Cp\u003ECâu lệnh \u003Ccode class=\"language-text\"\u003Ematch\u003C\u002Fcode\u003E sẽ chỉ định đường dẫn của \u003Cem\u003Edocument\u003C\u002Fem\u003E bị ảnh hưởng, bên trong đó ta dùng lệnh \u003Ccode class=\"language-text\"\u003Eallow\u003C\u002Fcode\u003E để diễn giải chi tiết về rule\u003C\u002Fp\u003E\n\u003Cpre class=\"language-shell\"\u003E\u003Ccode class=\"language-shell\"\u003E\u003Cspan class=\"token function\"\u003Eservice\u003C\u002Fspan\u003E cloud.firestore \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  match \u002Fdatabases\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Edatabase\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u002Fdocuments \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u002F\u002F tất cả document trong collection cities\n    match \u002Fcities\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Ecity\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      allow read: \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Econdition\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n      allow write: \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Econdition\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ETất cả câu \u003Ccode class=\"language-text\"\u003Ematch\u003C\u002Fcode\u003E phải chỉ đến \u003Cstrong\u003Edocuments\u003C\u002Fstrong\u003E, không trỏ tới \u003Cstrong\u003Ecollections\u003C\u002Fstrong\u003E, có thể dùng \u003Ccode class=\"language-text\"\u003Ematch \u002Fcities\u002FHCM\u003C\u002Fcode\u003E hoặc sử dụng ký tự đại diện bất kỳ document nào bên trong \u003Ccode class=\"language-text\"\u003Ecities\u003C\u002Fcode\u003E như ví dụ \u003Ccode class=\"language-text\"\u003Ematch \u002Fcities\u002F{city}\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Ch1 id=\"chia-nhỏ-thao-tác-ra\"\u003E\u003Ca href=\"#chia-nh%E1%BB%8F-thao-t%C3%A1c-ra\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EChia nhỏ thao tác ra\u003C\u002Fh1\u003E\n\u003Cp\u003ETình huống: chúng ta muốn lúc tạo có những điều khác với lúc xóa document, hoặc cho phép read 1 document nhưng không cho phép đọc toàn bộ\u003C\u002Fp\u003E\n\u003Cp\u003ECâu điều kiện \u003Ccode class=\"language-text\"\u003Eread\u003C\u002Fcode\u003E có thể chia nhỏ ra thành \u003Ccode class=\"language-text\"\u003Eget\u003C\u002Fcode\u003E và \u003Ccode class=\"language-text\"\u003Elist\u003C\u002Fcode\u003E, trong khi \u003Ccode class=\"language-text\"\u003Ewrite\u003C\u002Fcode\u003E có thể chia nhỏ thành \u003Ccode class=\"language-text\"\u003Ecreate\u003C\u002Fcode\u003E, \u003Ccode class=\"language-text\"\u003Eupdate\u003C\u002Fcode\u003E, \u003Ccode class=\"language-text\"\u003Edelete\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"language-shell\"\u003E\u003Ccode class=\"language-shell\"\u003E\u003Cspan class=\"token function\"\u003Eservice\u003C\u002Fspan\u003E cloud.firestore \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  match \u002Fdatabases\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Edatabase\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u002Fdocuments \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    match \u002Fcities\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Ecity\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      \u002F\u002F điều kiện trên \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E document\n      allow get: \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Econdition\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n      \u002F\u002F điều kiện khi queries nhiều document, hoặc gọi hết collection\n      allow list: \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Econdition\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n    match \u002Fcities\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Ecity\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      \u002F\u002F lúc tạo\n      allow create: \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Econdition\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n      \u002F\u002F lúc update\n      allow update: \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Econdition\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n      \u002F\u002F lúc delete\n      allow delete: \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Econdition\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch1 id=\"kế-thừa\"\u003E\u003Ca href=\"#k%E1%BA%BF-th%E1%BB%ABa\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EKế thừa\u003C\u002Fh1\u003E\n\u003Cp\u003ENhư đã biết, nếu chưa biết thì giờ mình giải thích nhanh, database trên Firebase lưu dạng collections(giống như array), trong các collection là document (một object). Trên mỗi document nó có thể chứa các collection khác nữa. Vậy thì các rules trên document nó sẽ ảnh hưởng thế nào đến các sub collection này.\u003C\u002Fp\u003E\n\u003Cp\u003EVới ví dụ ở trên, trong \u003Ccode class=\"language-text\"\u003Ecities\u003C\u002Fcode\u003E chúng ta chứa một sub collection là \u003Ccode class=\"language-text\"\u003Elandmarks\u003C\u002Fcode\u003E. Rule trên \u003Ccode class=\"language-text\"\u003Ecities\u003C\u002Fcode\u003E sẽ không ảnh hưởng đến \u003Ccode class=\"language-text\"\u003Elandmarks\u003C\u002Fcode\u003E, trừ khi chúng ta cố tình set nó như sau\u003C\u002Fp\u003E\n\u003Cpre class=\"language-shell\"\u003E\u003Ccode class=\"language-shell\"\u003E\u003Cspan class=\"token function\"\u003Eservice\u003C\u002Fspan\u003E cloud.firestore \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  match \u002Fdatabases\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Edatabase\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u002Fdocuments \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    match \u002Fcities\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Ecity\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      allow read, write: \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Econdition\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u002F\u002F áp dụng luôn cho collections con\n        match \u002Flandmarks\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Elandmark\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n          allow read, write: \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Econdition\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EKhi viết lồng câu \u003Ccode class=\"language-text\"\u003Ematch\u003C\u002Fcode\u003E như vậy, câu \u003Ccode class=\"language-text\"\u003Ematch\u003C\u002Fcode\u003E bên dưới sẽ \u003Cstrong\u003Eluôn relative\u003C\u002Fstrong\u003E với thằng trên. Và chúng ta cũng có thể viết như sau, kết quả tương tự với cách viết ở trên\u003C\u002Fp\u003E\n\u003Cpre class=\"language-shell\"\u003E\u003Ccode class=\"language-shell\"\u003E\u003Cspan class=\"token function\"\u003Eservice\u003C\u002Fspan\u003E cloud.firestore \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  match \u002Fdatabases\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Edatabase\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u002Fdocuments \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    match \u002Fcities\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Ecity\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      match \u002Flandmarks\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Elandmark\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n        allow read, write: \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Econdition\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cpre class=\"language-shell\"\u003E\u003Ccode class=\"language-shell\"\u003E\u003Cspan class=\"token function\"\u003Eservice\u003C\u002Fspan\u003E cloud.firestore \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  match \u002Fdatabases\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Edatabase\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u002Fdocuments \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    match \u002Fcities\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Ecity\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u002Flandmarks\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Elandmark\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      allow read, write: \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Econdition\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENếu không chỉ áp dụng rule cho đúng thằng \u003Ccode class=\"language-text\"\u003Elandmarks\u003C\u002Fcode\u003E, sử dụng cú pháp đại diện cho toàn bộ collection nằm dưới \u003Ccode class=\"language-text\"\u003Ecities\u003C\u002Fcode\u003E, \u003Ccode class=\"language-text\"\u003E{name=**}\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"language-shell\"\u003E\u003Ccode class=\"language-shell\"\u003E\u003Cspan class=\"token function\"\u003Eservice\u003C\u002Fspan\u003E cloud.firestore \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  match \u002Fdatabase\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Edatabase\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u002Fdocuments \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    match \u002Fcities\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Edocument\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E**\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      allow read, write: \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;\u003C\u002Fspan\u003Econdition\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EVới cách viết trên toàn bộ document nằm ở \u003Ccode class=\"language-text\"\u003E\u002Fcities\u002Fhochiminh\u002Flandmarks\u002Flandmark81\u003C\u002Fcode\u003E, \u003Ccode class=\"language-text\"\u003E\u002Fcities\u002Fhochiminh\u002Flandmarks\u002Fbitexco\u003C\u002Fcode\u003E, \u003Ccode class=\"language-text\"\u003Ecities\u002Fhochiminh\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ENếu chúng ta viết lại \u003Ccode class=\"language-text\"\u003Ematch \u002Fcities\u002F{city}\u002F{document=**} thì nó chỉ ảnh hưởng đến sub collection, thằng\u003C\u002Fcode\u003Ecities\u002Fhochiminh` sẽ không bị ảnh hưởng.\u003C\u002Fp\u003E\n\u003Cp\u003ENếu có nhiều câu \u003Ccode class=\"language-text\"\u003Eallow\u003C\u002Fcode\u003E khớp với \u003Ccode class=\"language-text\"\u003Ematch\u003C\u002Fcode\u003E, thì kết quả sẽ là một phép \u003Ccode class=\"language-text\"\u003Ehoặc\u003C\u002Fcode\u003E, bất kỳ thằng nào thõa điều kiện thì \u003Ccode class=\"language-text\"\u003Eallow\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"language-shell\"\u003E\u003Ccode class=\"language-shell\"\u003E\u003Cspan class=\"token function\"\u003Eservice\u003C\u002Fspan\u003E cloud.firestore \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  match \u002Fdatabases\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Edatabase\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u002Fdocuments \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u002F\u002F \u003Cspan class=\"token string\"\u003E'cities'\u003C\u002Fspan\u003E collection.\n    match \u002Fcities\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Ecity\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      allow read, write: \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Efalse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n    \u002F\u002F \u003Cspan class=\"token string\"\u003E'cities'\u003C\u002Fspan\u003E collection hoặc subcollections.\n    match \u002Fcities\u002F\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003Edocument\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E**\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      allow read, write: \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EVí dụ ở trên toàn bộ collection cities sẽ cho phép read, write vì điều kiện thứ 2 luôn \u003Ccode class=\"language-text\"\u003Etrue\u003C\u002Fcode\u003E, mặc dù thằng trước nó luôn \u003Ccode class=\"language-text\"\u003Efalse\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Ffirebase.google.com\u002Fdocs\u002Ffirestore\u002Fsecurity\u002Frules-structure\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ELink bài gốc của Google\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n","cover_image":""}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/blog/assets/js/app.f8d91bd5.js" defer></script><script src="/blog/assets/js/page--src-templates-post-vue.980fbd47.js" defer></script>
  </body>
</html>