<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Tại sao lại sinh ra React hook - VuiLapTrinh.com</title><meta name="gridsome:hash" content="ba240abf71cdde6b3af4623b32e99a1d26d651b2"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.21"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="Tutorials, Blog, Hướng dẫn, chia sẽ kinh nghiệm về Frontend, react, vue, ux, ui"><meta data-vue-tag="ssr" name="description" content="Tại sao và lợi ích mà react hook đem lại là gì, mà thiên hạ cứ rần rần lên vậy?"><meta data-vue-tag="ssr" property="og:type" content="article"><meta data-vue-tag="ssr" property="og:title" content="Tại sao lại sinh ra React hook"><meta data-vue-tag="ssr" property="og:description" cotent="Tại sao và lợi ích mà react hook đem lại là gì, mà thiên hạ cứ rần rần lên vậy?"><meta data-vue-tag="ssr" property="og:image" content=""><meta data-vue-tag="ssr" property="image" content=""><meta data-vue-tag="ssr" name="twitter:card" content="summary"><meta data-vue-tag="ssr" name="twitter:creator" content="@luubinhan"><meta data-vue-tag="ssr" name="fb:app_id" content="445556375516928"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/svg+xml" sizes="16x16" href="/assets/static/luckyluu.ce0531f.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link data-vue-tag="ssr" rel="icon" type="image/svg+xml" sizes="32x32" href="/assets/static/luckyluu.ac8d93a.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link data-vue-tag="ssr" rel="icon" type="image/svg+xml" sizes="96x96" href="/assets/static/luckyluu.b9532cc.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/svg+xml" sizes="76x76" href="/assets/static/luckyluu.f22e9f3.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/svg+xml" sizes="152x152" href="/assets/static/luckyluu.62d22cb.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/svg+xml" sizes="120x120" href="/assets/static/luckyluu.1539b60.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/svg+xml" sizes="167x167" href="/assets/static/luckyluu.dc0cdc5.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/svg+xml" sizes="180x180" href="/assets/static/luckyluu.7b22250.735bb1a8acbae8ddedf73f03eb1579c3.svg"><link rel="preload" href="/assets/css/0.styles.aabe8b1a.css" as="style"><link rel="preload" href="/assets/js/app.0245d1f8.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-post-vue.350c7cba.js" as="script"><link rel="prefetch" href="/assets/js/page--src-pages-404-vue.681877db.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.bd19d92a.js"><link rel="prefetch" href="/assets/js/page--src-templates-tag-vue.fba48a12.js"><link rel="stylesheet" href="/assets/css/0.styles.aabe8b1a.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div id="fb-root"></div>
    <script
      async
      defer
      crossorigin="anonymous"
      src="https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v8.0&appId=445556375516928&autoLogAppEvents=1"
      nonce="NM6X5rUi"
    ></script>
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute("data-theme", newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem("theme");
        } catch (err) {}

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem("theme", newTheme);
          } catch (err) {}
        };

        var darkQuery = window.matchMedia("(prefers-color-scheme: dark)");
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? "dark" : "light");
        });

        setTheme(preferredTheme || (darkQuery.matches ? "dark" : "light"));
      })();
    </script>

    <div id="app" data-server-rendered="true" class="layout-blog"><div class="sidebar" data-v-782466da><div class="sidebar__inner" data-v-782466da><a href="/" class="go-home active" data-v-782466da>VuiLapTrinh.com</a><button type="button" aria-expanded="false" aria-label="nav" class="navbar-toggle collapsed" data-v-782466da><div class="hamburger hamburger-1" data-v-782466da><span class="line" data-v-782466da></span><span class="line" data-v-782466da></span><span class="line" data-v-782466da></span></div></button><div class="navigation-component" data-v-782466da><ul class="nav primary-menu collapsed" data-v-782466da><li class="javascript" data-v-782466da><a href="/tag/javascript" aria-label="Kiến thức Javascript" title="Kiến thức Javascript" target="" data-v-782466da><span class="primary-menu__icon" data-v-782466da><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" data-v-782466da><path d="M255.908 485.999c-6.116 0-12.323-1.642-17.708-4.746l-56.319-33.316c-8.397-4.747-4.29-6.389-1.551-7.303 11.226-3.925 13.508-4.745 25.465-11.592 1.279-.729 2.922-.457 4.199.366l43.266 25.648c1.552.912 3.741.912 5.202 0l168.592-97.304c1.553-.913 2.555-2.738 2.555-4.563V158.583c0-1.917-1.002-3.651-2.645-4.654L258.463 56.716c-1.551-.913-3.65-.913-5.202 0L84.852 154.019c-1.644.913-2.647 2.738-2.647 4.655v194.515c0 1.825 1.003 3.65 2.647 4.473l46.188 26.653c25.102 12.504 40.436-2.191 40.436-17.068V175.195c0-2.738 2.19-4.837 4.93-4.837h21.359c2.647 0 4.928 2.099 4.928 4.837v192.143c0 33.407-18.256 52.576-49.928 52.576-9.768 0-17.435 0-38.794-10.588l-44.179-25.467c-10.954-6.299-17.708-18.074-17.708-30.76V158.583c0-12.596 6.754-24.462 17.708-30.76L238.2 30.519c10.679-6.024 24.828-6.024 35.416 0l168.594 97.394c10.953 6.298 17.707 18.073 17.707 30.761v194.515c0 12.596-6.754 24.371-17.707 30.761l-168.594 97.303a35.5 35.5 0 01-17.708 4.746zm136.098-191.775c0-36.421-24.646-46.096-76.4-52.941-52.396-6.938-57.689-10.498-57.689-22.729 0-10.131 4.473-23.641 43.266-23.641 34.596 0 47.375 7.485 52.668 30.853.457 2.19 2.467 3.833 4.746 3.833h21.91c1.367 0 2.645-.547 3.559-1.552.914-1.003 1.369-2.373 1.275-3.743-3.375-40.252-30.121-58.965-84.158-58.965-48.103 0-76.764 20.264-76.764 54.311 0 36.876 28.569 47.101 74.664 51.662 55.225 5.387 59.514 13.511 59.514 24.373 0 18.805-15.15 26.835-50.658 26.835-44.635 0-54.403-11.227-57.689-33.406-.365-2.373-2.374-4.107-4.837-4.107h-21.817a4.81 4.81 0 00-4.836 4.836c0 28.39 15.426 62.254 89.271 62.254 53.305-.092 83.975-21.181 83.975-57.873z" fill="#539e43" data-v-782466da></path></svg></span><!----><!----><!----><!----><!----><span class="primary-menu__label" data-v-782466da>Javascript</span></a></li><li class="react" data-v-782466da><a href="/tag/react" aria-label="Kiến thức React" title="Kiến thức React" target="" data-v-782466da><!----><span class="primary-menu__icon" data-v-782466da><svg id="Layer_2" version="1.1" viewBox="0 0 600 600" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" data-v-782466da><circle cx="299.5" cy="299.6" r="50.2" class="st0" data-v-782466da></circle><path d="M299.5 414.6c-70.5 0-132.1-8.3-178.2-24.1-29.9-10.2-55.3-23.8-73.4-39.3-19.2-16.4-29.4-34.3-29.4-51.6 0-33.2 36.4-65.7 97.5-86.9 50-17.4 115.2-27.1 183.4-27.1 67 0 131.3 9.4 181 26.6 29.1 10 53.6 23 71 37.4 18.9 15.8 28.9 33.1 28.9 50 0 34.5-40.7 69.4-106.3 91.1-46.4 15.4-108.4 23.9-174.5 23.9zm0-205c-64.7 0-128.7 9.4-175.5 25.7-56.2 19.6-81.4 46.4-81.4 64.3 0 18.6 27.1 47.9 86.5 68.2 43.6 14.9 102.6 22.8 170.4 22.8 63.6 0 122.9-8 167-22.7 61.7-20.5 89.9-49.8 89.9-68.3 0-9.5-7.2-20.7-20.3-31.6-15.1-12.6-37.1-24.1-63.4-33.2-47.3-16.2-108.8-25.2-173.2-25.2z" class="st0" data-v-782466da></path><path d="M185.6 549.8c-10.2 0-19.2-2.2-26.8-6.6-28.7-16.6-38.7-64.4-26.6-127.9 9.9-52.1 34.1-113.3 68.2-172.4 33.5-58 73.7-109 113.4-143.5 23.2-20.2 46.7-35 67.9-42.8 23.1-8.5 43.1-8.5 57.7-.1 29.9 17.2 39.8 70 25.8 137.6-9.9 48-33.5 105.9-66.5 163.2-35.2 61-73.2 110.2-109.9 142.3-23.8 20.8-48.3 36-70.7 43.9-11.7 4.2-22.7 6.3-32.5 6.3zm25.1-300.9l10.4 6c-32.3 56-56.2 116.1-65.4 164.9-11.1 58.5-.4 93.7 15 102.6 3.8 2.2 8.8 3.4 14.9 3.4 19.9 0 51.2-12.6 87.4-44.2 34.7-30.3 71-77.5 104.9-136.2 31.8-55.1 54.4-110.5 63.8-156 13.1-63.7 1.8-102.7-14.3-112-8.2-4.7-21.5-4.1-37.5 1.8-18.5 6.8-39.4 20.1-60.4 38.4-37.7 32.8-76.2 81.6-108.4 137.4l-10.4-6.1z" class="st0" data-v-782466da></path><path d="M413.4 550.1c-27.2 0-61.7-16.4-97.7-47.4-40.2-34.6-81.1-86.1-115.3-145.2-33.6-58-57.6-118.3-67.7-170-5.9-30.2-7-57.9-3.2-80.2 4.2-24.3 14.1-41.6 28.8-50.1 29.8-17.3 80.5.5 132.1 46.4 36.6 32.5 75 81.9 108.1 139.1 35.3 61 59 118.5 68.4 166.3 6.1 31 7.1 59.8 2.8 83.2-4.6 24.9-15 42.6-30 51.3-7.5 4.4-16.4 6.6-26.3 6.6zM221.2 345.5c32.4 56 72.6 106.7 110.2 139 45.1 38.8 80.9 47.2 96.4 38.2 16.1-9.3 27.9-47.4 15.7-109-9-45.2-31.7-100.2-65.7-158.9-31.9-55.1-68.6-102.4-103.3-133.2-48.6-43.2-88-52.9-104.1-43.6-8.2 4.7-14.3 16.6-17.2 33.4-3.3 19.4-2.3 44.2 3.1 71.5 9.6 49.1 32.6 106.8 64.9 162.6z" class="st0" data-v-782466da></path></svg></span><!----><!----><!----><!----><span class="primary-menu__label" data-v-782466da>React</span></a></li><li class="vue" data-v-782466da><a href="/tag/vuejs" aria-label="Kiến thức Vue" title="Kiến thức Vue" target="" data-v-782466da><!----><!----><!----><!----><span class="primary-menu__icon" data-v-782466da><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" data-v-782466da><path fill="#41b883" d="M392.46 59.011H313.5l-57.499 90.972-49.285-90.972H26.001l230 393.978L485.999 59.011z" data-v-782466da></path><path fill="#35495e" d="M83.192 91.867h55.241l117.568 203.511L373.464 91.867h55.241l-172.704 295.92L83.192 91.867z" data-v-782466da></path></svg></span><!----><span class="primary-menu__label" data-v-782466da>Vue</span></a></li><li class="htmlCss" data-v-782466da><a href="/tag/css" aria-label="Kiến thức HTML/CSS" title="Kiến thức HTML/CSS" target="" data-v-782466da><!----><!----><!----><span class="primary-menu__icon" data-v-782466da><svg version="1.0" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" data-v-782466da><path fill="#E44D26" d="M27.377 28.889L16.001 32 4.625 28.889 2 0h28.002z" data-v-782466da></path><path fill="#FF6C39" d="M16 2v27.75l9.232-2.742L27.688 2z" data-v-782466da></path><path fill="#FFF" d="M24.363 6H7.607L8 10l.619 7h10.884l-.355 3.984L16 21.99l-3.143-1.006L12.648 19H8.803l.459 4.987L16 25.99l6.728-2.004.99-10.986H12.252l-.25-3H24z" data-v-782466da></path></svg></span><!----><!----><span class="primary-menu__label" data-v-782466da>HTML/CSS</span></a></li><li class="uxUi" data-v-782466da><a href="/tag/ux-ui" aria-label="Kiến thức UX/UI" title="Kiến thức UX/UI" target="" data-v-782466da><!----><!----><!----><!----><!----><span class="primary-menu__icon" data-v-782466da><svg viewBox="0 0 512 454.633" xmlns="http://www.w3.org/2000/svg" data-v-782466da><path d="M202.271 243.812c-9.741 10.73-12.13 18.428-24.884 38.588 8.237 5.752 24.104 19.055 35.095 41.959 21.953-12.592 32.188-14.514 43.821-24.309C332.24 236.092 518.244 6.836 511.839.204c-6.766-7.05-242.704 170.268-309.568 243.608zM155.442 300.209c-32.998-5.832-65.547 15.028-87.288 67.147C46.382 419.471 7.532 440.337.001 439.061c40.553 14.67 164.202 52.194 194.939-90.655-13.037-34.26-39.498-48.197-39.498-48.197z" data-v-782466da></path></svg></span><span class="primary-menu__label" data-v-782466da>UX/UI</span></a></li><li class="about" data-v-782466da><a href="https://luubinhan.github.io/" target="_blank" data-v-782466da>About</a></li></ul></div></div><div id="footer" data-v-782466da><footer class="footer" data-v-782466da><section class="footer-inner" data-v-782466da><div class="social-links" data-v-782466da><a href="https://www.youtube.com/channel/UC0Te8s0b0aplS1ZoVLfjKHA" target="_blank" rel="noopener noreferrer" class="link-youtube" data-v-782466da><span class="link-youtube__icon" data-v-782466da><svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" data-v-782466da data-v-782466da><path d="M512 256c0 141.4-114.6 256-256 256S0 397.4 0 256 114.6 0 256 0s256 114.6 256 256z" fill="#CD201F" data-v-782466da data-v-782466da></path><path d="M391.1 194.6c-2.3-19.9-7.1-25.7-10.5-28.4-5.4-4.2-15.2-5.7-28.3-6.6-21-1.4-56.7-2.3-95.2-2.3-38.6 0-74.2.8-95.2 2.3-13.1.9-22.9 2.4-28.3 6.6-3.4 2.7-8.1 8.5-10.5 28.4-3.4 28.7-3.4 94.1 0 122.8 2.4 19.9 7.1 25.7 10.5 28.4 5.4 4.2 15.2 5.7 28.3 6.6 21 1.4 56.6 2.3 95.2 2.3s74.2-.9 95.2-2.3c13.1-.9 22.9-2.4 28.3-6.6 3.4-2.6 8.1-8.5 10.5-28.4 3.4-28.7 3.4-94.1 0-122.8zm-167 104.3V213l82.4 42.9-82.4 43z" fill="#FFF" data-v-782466da data-v-782466da></path></svg></span>
            Youtube
          </a></div><div class="credit" data-v-782466da>Copyright © 2019. luckyluu</div></section></footer></div></div><div class="master"><main class="inner"><div class="master__search"><div class="search-wrapper"><div class="mb-2"><div class="post-tags"><a href="/tag/javascript" class="post-tags__link"><span>#</span>
    Javascript
  </a><a href="/tag/dam-dao" class="post-tags__link"><span>#</span>
    Đàm đạo chém gió chuyện nghề
  </a><a href="/tag/css" class="post-tags__link"><span>#</span>
    CSS từ căn bản tới nâng cao
  </a><a href="/tag/thu-thuat" class="post-tags__link"><span>#</span>
    Thủ thuật
  </a><a href="/tag/hoc-thuat" class="post-tags__link"><span>#</span>
    Kiến thức nền tảng
  </a><a href="/tag/react" class="post-tags__link"><span>#</span>
    React
  </a><a href="/tag/vuejs" class="post-tags__link"><span>#</span>
    Vue JS
  </a><a href="/tag/chrome" class="post-tags__link"><span>#</span>
    Chrome DevTools
  </a><a href="/tag/javascript" class="post-tags__link"><span>#</span>
    Javascript
  </a></div></div><div class="search__container"><input id="search" type="text" placeholder="Tìm bài viết..." value="" class="search__input"><!----></div><div class="search__list"><!----><!----></div></div></div><div class="single-post"><div class="single-post-container"><article><header><div class="post-title"><h1 class="post-title__text single-post-title">Tại sao lại sinh ra React hook</h1><div class="post-meta">
  Đăng ngày
  <time dateTime="2019-11-17" itemprop="dateModified" content="2019-11-17">2019-11-17</time>.
  
    Mất khoảng
    <strong>9 phút</strong> để đọc.
  </div></div></header><div class="post content-box"><div class="post__header"><!----></div><div class="blog-post"><div class="post-content"><!-- TOC -->
<ul>
<li>
<p><a href="#l%e1%bb%8bch-s%e1%bb%ad">Lịch sử</a></p>
<ul>
<li><a href="#th%c3%a1ng-5-2013">Tháng 5, 2013</a></li>
<li><a href="#th%c3%a1ng-gi%c3%aang-2015">Tháng giêng, 2015</a></li>
</ul>
</li>
<li>
<p><a href="#v%e1%ba%a5n-%c4%91%e1%bb%81-t%e1%bb%93n-%c4%91%e1%bb%8dng">Vấn đề tồn đọng</a></p>
<ul>
<li><a href="#logic-tr%c3%b9ng-l%e1%ba%b7p">Logic trùng lặp</a></li>
<li><a href="#chia-s%e1%ba%bd-logic">Chia sẽ logic</a></li>
</ul>
</li>
<li><a href="#gi%e1%ba%a3i-quy%e1%ba%bft">Giải quyết</a></li>
</ul>
<!-- /TOC -->
<p>Qua bài viết này chúng ta sẽ cùng trả lời 2 câu hỏi bạn cần đặt ra khi tiếp cận một <strong>đồ chơi mới</strong> như React Hook</p>
<ol>
<li>Tại sao nó lại tồn tại trên trái đất này?</li>
<li>Nó tồn tại trên trái đất này có lợi ích gì không?</li>
</ol>
<h2 id="lịch-sử"><a href="#l%E1%BB%8Bch-s%E1%BB%AD" aria-hidden="true"><span class="icon icon-link"></span></a>Lịch sử</h2>
<h3 id="tháng-5-2013"><a href="#th%C3%A1ng-5-2013" aria-hidden="true"><span class="icon icon-link"></span></a>Tháng 5, 2013</h3>
<p>Nếu bạn còn nhớ về cách viết một component trong React bằng <code class="language-text">React.createClass</code>, chứng tỏ bạn đã là già làng trong React, ngày mới ra đời khi javascript không hề có khai báo <code class="language-text">class</code>, chúng ta sẽ khai báo component như thế này</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">const</span> <span class="token maybe-class-name">ReposGrid</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">getInitialState</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>      
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">componentDidMount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">componentDidUpdate</span> <span class="token punctuation">(</span><span class="token parameter">prevProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token punctuation">/></span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
<h3 id="tháng-giêng-2015"><a href="#th%C3%A1ng-gi%C3%AAng-2015" aria-hidden="true"><span class="icon icon-link"></span></a>Tháng giêng, 2015</h3>
<p>Tổ chức <em>Ác ma</em> thế giới công bố chuẩn EcmaScript 2015, còn gọi với tên thân thương ES6. <strong>class</strong> chính thức có mặt trong javascript. Đội ngũ phát triển của React lúc đó kết luận, chúng ta <em>không cần phát minh lại cái bánh xe</em> (don't reinvent the wheel), cứ xài theo chuẩn đã có. Thế là từ đó chúng ta khai báo component bằng <code class="language-text">class extends</code></p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">ReposGrid</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
      repos<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      loading<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">updateRepos</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">updateRepos</span><span class="token punctuation">.</span><span class="token method function property-access">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentDidMount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentDidUpdate</span> <span class="token punctuation">(</span><span class="token parameter">prevProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token punctuation">/></span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Khi khai báo component bằng <code class="language-text">class</code>, chúng ta khởi tạo giá trị của <code class="language-text">state</code> bên trong phương thức <code class="language-text">constructor</code> và nó sẽ được nhét vào trong <code class="language-text">this</code>. Tuy nhiên, với cách khai báo đã <em>quốc tế hóa</em> của <code class="language-text">class</code>, nếu chúng ta <code class="language-text">extends</code> từ một <code class="language-text">class</code>, chúng ta phải gọi <code class="language-text">super()</code> trước khi có thể sử dụng <code class="language-text">this</code>. Và riêng với React, chúng ta còn phải truyền thêm <code class="language-text">props</code> vào trong <code class="language-text">super</code>. Các bạn lập trình viên <em>phát bệnh</em> vì cách viết chướng mắt này.</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token comment">// 🤮</span>
<span class="token punctuation">}</span></code></pre>
<p>Ngày xưa khi dùng <code class="language-text">createClass</code> của React, bên trong hàm đó nó sẽ làm luôn chuyện binding toàn bộ <code class="language-text">this</code> vào các phương thức cho một instance của component. Tuy nhiên khi viết <code class="language-text">extends React.Component</code> chuyện đó ko còn tự động xảy ra <em>như phép màu</em> nữa, chúng ta phải đi <code class="language-text">.bind</code> từng phương thức một trong <code class="language-text">constructor</code></p>
<pre class="language-jsx"><code class="language-jsx"><span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">updateRepos</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">updateRepos</span><span class="token punctuation">.</span><span class="token method function property-access">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// 😭</span>
<span class="token punctuation">}</span></code></pre>
<p>Nếu nhìn vào các bạn sẽ nói, ồ cái này chả to tác gì đâu, chỉ là phải viết thêm mấy dòng ấy mà. Cũng vì lầm đường lạc lối theo class <em>Ác ma</em> mà React bị ko biết bao nhiều lời phàn nàn từ những lập trình viên khắp mọi nơi.</p>
<p>Hên sao, không lâu sau đó Class Field được thêm vào trong <code class="language-text">class</code>, chúng ta có thể khai báo một biến bên trong <code class="language-text">class</code> mà không cần dùng <code class="language-text">constructor</code>, thay vì <code class="language-text">.bind</code> chúng ta dùng arrow function</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">ReposGrid</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  
  <span class="token function-variable function">updateRepos</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="vấn-đề-tồn-đọng"><a href="#v%E1%BA%A5n-%C4%91%E1%BB%81-t%E1%BB%93n-%C4%91%E1%BB%8Dng" aria-hidden="true"><span class="icon icon-link"></span></a>Vấn đề tồn đọng</h2>
<p>Vấn đề đã được giải quyết tương đối ổn thỏa? Tuy nhiên vẫn còn vấn đề khác React team cảm thấy chưa hài lòng lắm phiên bản hiện tại.</p>
<p>Ý tưởng chính của React là để chúng ta có thể quản lý những ứng dụng phức tạp bằng cách chia ra thành từng component nhỏ rồi <em>kết hợp</em> (compose) lại với nhau. Đây là cách làm tạo ra <em>thương hiệu</em> sáng ngời của React. Cách tiếp cận theo kiểu component chả có vấn đề gì, cách <strong>hiện thực</strong> những component hiện tại đang có vấn đề.</p>
<h3 id="logic-trùng-lặp"><a href="#logic-tr%C3%B9ng-l%E1%BA%B7p" aria-hidden="true"><span class="icon icon-link"></span></a>Logic trùng lặp</h3>
<p>Trước đây chúng ta thiết kế component dựa rất nhiều vào component lifecycle. Chúng ta đặt để logic vào trong các từng lifecycle này, thí dụ như chúng ta cần phải gọi cùng một hàm bên trong cả 2 phương thức lifecycle <code class="language-text">componentDidMount</code>, <code class="language-text">componentDidUpdate</code></p>
<pre class="language-js"><code class="language-js"><span class="token function">componentDidMount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">updateRepos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">componentDidUpdate</span> <span class="token punctuation">(</span><span class="token parameter">prevProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>prevProps<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">updateRepos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function-variable function">updateRepos</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> loading<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">fetchRepos</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">repos</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      repos<span class="token punctuation">,</span>
      loading<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<p>Để giải quyết vấn đề side effect (hàm <code class="language-text">fetchRepos</code> làm cái quần gì ở ngoài đường ai mà biết, rõ ràng nó không thuộc phạm vi quản lý của component). Chúng ta <strong>cần một cách tiếp cận khác không thể sử dụng lifecycle nữa</strong></p>
<h3 id="chia-sẽ-logic"><a href="#chia-s%E1%BA%BD-logic" aria-hidden="true"><span class="icon icon-link"></span></a>Chia sẽ logic</h3>
<p>Khi nghĩ về sự kết hợp giữa các component trong React, chúng ta sẽ nghĩ về cách các đối tượng UI kết hợp với nhau.</p>
<pre class="language-js"><code class="language-js">view <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span></code></pre>
<p>Trong thực tế, viết một ứng dụng không phải chỉ bao gồm tầng UI, rất nhiều trường hợp chúng ta cần <strong>tái sử dụng logic, kết hợp các logic lại với nhau</strong>. Trước đây React chưa hề có cách nào đáp ứng được nhu cầu này.</p>
<p>Ví dụ nếu có một component khác, nó cũng cần xài biến state <code class="language-text">repos</code> và tất cả những logic liên quan, mà những cái đó nó đang nằm bên trong component <code class="language-text">ReposGrid</code>. Làm sao chúng ta lấy ra xài lại? Cách bình thường là chúng ta copy-paste toàn bộ code bên trong qua một component mới. Cũng nhiều người làm vậy, ai có kinh nghiệm hơn thì dùng Higher-Order Component</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">withRepos</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">Component</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">WithRepos</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
      repos<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      loading<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token function">componentDidMount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">updateRepos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">componentDidUpdate</span> <span class="token punctuation">(</span><span class="token parameter">prevProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>prevProps<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">updateRepos</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">updateRepos</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> loading<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token function">fetchRepos</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">repos</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          repos<span class="token punctuation">,</span>
          loading<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Component</span></span>
          <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">this</span><span class="token punctuation">.</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span>
          <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">this</span><span class="token punctuation">.</span><span class="token attr-value">state</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">/></span></span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Rồi giờ có bất kỳ component nào muốn dùng <code class="language-text">repos</code> thì cứ mẹ-bồng-con thế này</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token comment">// ReposGrid.js</span>
<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ReposGrid</span></span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> loading<span class="token punctuation">,</span> repos <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token spread operator">...</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">withRepos</span><span class="token punctuation">(</span><span class="token maybe-class-name">ReposGrid</span><span class="token punctuation">)</span>

<span class="token comment">// Profile.js</span>
<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Profile</span></span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> loading<span class="token punctuation">,</span> repos <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token spread operator">...</span>
<span class="token punctuation">}</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">withRepos</span><span class="token punctuation">(</span><span class="token maybe-class-name">Profile</span><span class="token punctuation">)</span></code></pre>
<p><em>Hồi xưa</em> chúng ta hay làm vậy, hoặc là dùng Render Props để chia sẻ những logic dùng tới dùng lui. Tuy nhiên, đây là cách tiếp cận không dành cho dân nghiệp dư, vì không phải dễ mà hiểu được cách tụi HOC nó chạy, thứ 2 nếu bạn cho chục mẹ bồng một đứa con thì sẽ sinh ra chuyện <code class="language-text">wrapper hell</code> giống như callback hell</p>
<pre class="language-js"><code class="language-js"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function">withHover</span><span class="token punctuation">(</span>
  <span class="token function">withTheme</span><span class="token punctuation">(</span>
    <span class="token function">withAuth</span><span class="token punctuation">(</span>
      <span class="token function">withRepos</span><span class="token punctuation">(</span><span class="token maybe-class-name">Profile</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre>
<p>Vận động não để hiểu đoạn này chạy kết quả thể nào</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>WithHover</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>WithTheme</span> <span class="token attr-name">hovering</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{false}</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>WithAuth</span> <span class="token attr-name">hovering</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{false}</span> <span class="token attr-name">theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>dark<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>WithRepos</span> <span class="token attr-name">hovering</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{false}</span> <span class="token attr-name">theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>dark<span class="token punctuation">'</span></span> <span class="token attr-name">authed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{true}</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Profile</span> 
          <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>JavaScript<span class="token punctuation">'</span></span>
          <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{true}</span> 
          <span class="token attr-name">repos</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{[]}</span>
          <span class="token attr-name">authed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{true}</span>
          <span class="token attr-name">theme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>dark<span class="token punctuation">'</span></span>
          <span class="token attr-name">hovering</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{false}</span>
        <span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>WithRepos</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>WithAuth</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>WithTheme</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>WithHover</span><span class="token punctuation">></span></span></code></pre>
<p>Tóm lại những vấn đề trước mặt cần giải quyết là gì</p>
<ul>
<li>gọi <code class="language-text">super(props)</code> là quá xàm xí đú</li>
<li><code class="language-text">this</code> là thứ mơ hồ mà không dễ biết cách nó hoạt động, bạn có thể là chuyên gia và biết đấy, nhưng chúng ta tuân thủ nguyên tắc khi code <strong>KISS</strong>, ngu ngốc nhất có thể, đừng tỏ ra thông minh</li>
<li>Tổ chức logic theo các phương thức lifecycle không còn hợp lý hợp tình</li>
<li>React chưa có câu trả lời chính thức nào cho việc chia sẻ logic (HOC là từ pattern của javascript, không phải đặc sản nhà React, nên không tính)</li>
</ul>
<h2 id="giải-quyết"><a href="#gi%E1%BA%A3i-quy%E1%BA%BFt" aria-hidden="true"><span class="icon icon-link"></span></a>Giải quyết</h2>
<p>Từ React 0.14 chúng ta có 2 cách tạo component, dùng class hoặc dùng function. Nếu cần state và các lifecycle thì dùng class, nếu chỉ nhận props rồi trả về UI thì dùng function. Đó là cách chúng ta được dạy.</p>
<p>Bác CTO John Carmack nói, em xin lỗi sửa câu văn của bác chút</p>
<blockquote>
<p>Tụi bây dẹp phương thức, class, framework hết dùm tao cái, Dùng hết function đi</p>
</blockquote>
<p>React team, chân lý đây rồi, chúng ta tìm cách biến function component đáp ứng được những gì class component làm được đi.</p>
<p>Với function component, chúng ta chả cần quan tâm tới <code class="language-text">super(props)</code>, <code class="language-text">this</code> chạy thế nào. Chúng ta sẽ bổ sung state, giải quyết lifecycle, chia sẻ logic nữa là xong.</p>
<p>Và thế là các hook của React ra đời: <code class="language-text">useState</code>, <code class="language-text">useEffect</code>, custom hook</p>
<p>Để sử dụng state, chúng ta dùng hook là <code class="language-text">React.useState</code></p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ReposGrid</span></span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span> repos<span class="token punctuation">,</span> setRepos <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span> loading<span class="token punctuation">,</span> setLoading <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<p>Lifecycle thì có thể bạn sẽ buồn (hoặc vui) khi nghe tin này. Nếu bắt đầu sử dụng React hook, function component, dẹp hết những gì bạn đã từng biết về lifecycle của component đi, quên đi những việc cần làm ở giai đoạn này, giai đoạn kia của component. Bạn hay tiếp cận <em>cách tư duy khác</em> hoàn toàn <strong>Đồng bộ hóa</strong></p>
<p>Thử nghĩ những gì bạn làm ở một sự kiện của lifecycle, có thể là đổi state, fetch dữ liệu, cập nhập DOM, tất cả đều gom về một mục đích duy nhất <strong>Đồng bộ hóa</strong>. Những gì chúng ta cần đồng bộ thường là những thứ nằm ngoài React (gọi API, DOM, đại loại như thế) với những thứ bên trong React (state) hoặc ngược lại</p>
<p>Khi tiếp cận theo hướng đồng bộ hóa thay vì lifecycle event, nó cho phép chúng ta gom các logic liên quan lại với nhau. Để làm việc đó React cho chúng ta một Hook gọi là <code class="language-text">React.useEffect</code></p>
<p>Theo định nghĩa, <code class="language-text">useEffect</code> cho phép chúng ta thực hiện side effect bên trong function component. Hàm này sẽ dùng để <strong>re-sync</strong> (thực hiện đồng bộ hóa các giá trị)</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">title</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>username<span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre>
<p>Đoạn code trên sẽ chạy lại bất cứ khi nào giá trị state <code class="language-text">username</code> có thay đổi</p>
<p>Để gọi lại <code class="language-text">fetchRepos</code> khi có thay đổi từ state <code class="language-text">repos</code> ở ví dụ trên</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ReposGrid</span></span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span> repos<span class="token punctuation">,</span> setRepos <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span> loading<span class="token punctuation">,</span> setLoading <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>

    <span class="token function">fetchRepos</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">repos</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setRepos</span><span class="token punctuation">(</span>repos<span class="token punctuation">)</span>
        <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>loading <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Loading</span></span> <span class="token punctuation">/></span></span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token punctuation">/></span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
<p>Như vậy, chúng ta đã có thể nói lời chia tay mãi mãi với <code class="language-text">React.Component</code>, <code class="language-text">constructor</code>, <code class="language-text">super</code>, <code class="language-text">this</code>, lifecycle</p>
<p>Còn lại với cuộc chiến chống Higher-Order Component và Render Props. Để dùng lại logic, chúng ta sẽ vẫn dùng Hook, nhưng không phải do React làm sẵn cho <em>xơi</em>, chúng ta phải tự viết những custom Hook</p>
<p>Giờ chúng ta sẽ viết một custom hook <code class="language-text">useRepos</code>, nó sẽ nhận một <code class="language-text">id</code> lấy dữ liệu tương ứng.</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">useRepos</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span> repos<span class="token punctuation">,</span> setRepos <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span> loading<span class="token punctuation">,</span> setLoading <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>

  <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>

    <span class="token function">fetchRepos</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">repos</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setRepos</span><span class="token punctuation">(</span>repos<span class="token punctuation">)</span>
        <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span> loading<span class="token punctuation">,</span> repos <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<p>Điều ngon lành ở đây là tất cả những gì liên quan đến <code class="language-text">repos</code> điều gói gọn trong hook, ở đây mình muốn nói đến <code class="language-text">loading</code>, <code class="language-text">repos</code></p>
<p>Sử dụng custom hook này trên các component khác nhau</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ReposGrid</span></span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span> loading<span class="token punctuation">,</span> repos <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useRepos</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>

  <span class="token spread operator">...</span>
<span class="token punctuation">}</span></code></pre>
<pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">Profile</span></span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> user <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span> loading<span class="token punctuation">,</span> repos <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useRepos</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span>

  <span class="token spread operator">...</span>
<span class="token punctuation">}</span></code></pre>
<p>Thật không thể tin được bạn có thể khai báo và setState bên trong một function bình thường. Chúng ta đã có một React mạnh mẽ với các đặc tính sau</p>
<ul>
<li>Đơn giản hóa</li>
<li>Đóng gói</li>
<li>Linh động</li>
<li>Mở rộng</li>
</ul>
<p>Không những giải quyết vấn đề đang có, như cách mà các bạn làm marketing cho React tuyên truyền: sử dụng Hook để có <code class="language-text">state</code> bên trong function component. Thật ra nó còn mang tới những giá trị to lớn khác là tăng khả năng tái sử dụng và kết hợp logic.</p>
<p><a target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/watch?v=eX_L39UvZes">📜 Why React Hooks?</a></p>
</div></div><div class="post__footer"><div class="post-tags"><a href="/tag/hoc-thuat/" class="post-tags__link"><span>#</span>
    hoc-thuat
  </a><a href="/tag/react/" class="post-tags__link"><span>#</span>
    react
  </a></div></div><div class="single-post__share"><a class="share-network-email" style="background-color:#333333;"><i class="mst-icon icon-mail"></i><span>Email</span></a><a class="share-network-facebook" style="background-color:#1877f2;"><i class="mst-icon icon-facebook"></i><span>Facebook</span></a><a class="share-network-linkedin" style="background-color:#007bb5;"><i class="mst-icon icon-linkedin"></i><span>LinkedIn</span></a><a class="share-network-pocket" style="background-color:#ef4056;"><i class="mst-icon icon-get-pocket"></i><span>Pocket</span></a><a class="share-network-skype" style="background-color:#00aff0;"><i class="mst-icon icon-skype"></i><span>Skype</span></a><a class="share-network-twitter" style="background-color:#1da1f2;"><i class="mst-icon icon-twitter"></i><span>Twitter</span></a></div></div></article><div class="section-below-post"><div class="post-comments"><div data-href="https://vuilaptrinh.com/tai-sao-lai-sinh-ra-react-hook/" data-numposts="10" data-width="100%" class="fb-comments"></div><div id="disqus_thread" style="min-height:200px;"></div></div><div class="author post-author"><a href="https://luubinhan.github.io/" target="_blank"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-52311ff214b737f722259e901102d6b3'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-52311ff214b737f722259e901102d6b3)' width='180' height='180' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAABwEDBAUGCAAC/8QAMxAAAQMCAwcBBgYDAAAAAAAAAQIDEQAEBRIhBhMxQVFhcQciIzJCgbEIFDORodEWgsH/xAAZAQEBAQEBAQAAAAAAAAAAAAAEAwUGAAH/xAAhEQABBAMAAgMBAAAAAAAAAAABAAIDEQQSISJBBRNRMf/aAAwDAQACEQMRAD8A6Pr1fOalmvLyUAk6AnxS5VROUx4oR%2bvmPXNjZYbhti48DcKUt9LRIJAHsgkaxMmO1ByzxnG8PeQ/a3d5bOIIUVJdUOHMifvWjB8c6aMP2q0CfPbC/TW119SVz9YetmOMLYRfWWH3TaSA4pKVNrWOuhgH6UYtkNrsK2stFvYU65nbjesOpyrbnhPIjuKhPhSwDZw4qw5kU5ph6r%2blpCYFNOLKflV5o1JSXMkDlS5xy1qtDo4mfrWe2/xhWEbJ3t400%2b6oZWyGpkBRiTGoSNJj/tVbEXEN/VMyAC1iPUTaS2xjG3bO3IS3ay2HNJc1lR6xPDx3oa4g0RvVlQcSfhFRLrEF3V0LpSAh10layOMzw7eKl3jqLhxsxLaRw4610MUYiAa1ZMxMosrPugpJJ0nlwiiJ%2bH69eZ28NulfuX7R0LTOhygKB8yKxWLaWoC0BJKpgfL2rdfh8sV3G1F9iBTLNnalGbkFuEADzAVVMpwOO6/xCx4izJaAuiSsT8UV8KKyBznmKih1J714OqIiCa5jVdJsqk4ggL9oRPSqDbty4/w/GnLVzKPyypBkaEif4p5N2RwA/anlPtvsrafAW0tJStChKVA8QR0p4ZqQQil1ilz5Y5nGloXKkcNev908G8iUoSCUiiHtVhFhhdou6wu2O6JyuNg/pzwUCdY5a8JrAXtwErWi3RmIEZwZE9utaccm/QEVzKVZjVrltN4JyJMqFdGemuz7OzmyFjbBGS5eQLm6PMuLAMf6iE/SgBavuMPNOON75wKC0tr4GDPtdqO%2bxm0i8ew0O3O7RfJnett6J4mCnXhH81DNDzGK/i%2b4/wBbZSb7S1xQ2IIVBHWvb2BAIioBcVxMCml3KgYFZQZadtSzAK460hCpkk%2bBTzahmmnXnRA0APmadsj0ol1uE2T6r5SEWgbO9K%2bARGs0H7stto3luczSyS3mEKUJIBI66VrvUnGWlJZwlKsuaHnjmgafCk/f9qwD6y%2b2pbjhKU%2bylWaJ8dabjxmtne0HInolrVcYThj18w5clKzl1KOZ/sVLRtJ%2bQbQ7akpum/01oEA9c3bvULB8WtGbRYuW1vvBOVtTivm48eVUt9Z3dwpKlIbaZIhJQZEdJq7fJxDxxHcdWgxnvtFbZz1ItsQCWMWyWb8hJcn3ZV3Pyz14eK2e9WpUBJoGYHhVpmCQyCtTZBMaHz1oq7DYxvmBh11IeZT7pR%2bZA5eR9vFCyoGs8owm4sz38kK//9k=' /%3e%3c/svg%3e" width="180" data-src="/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" data-srcset="/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript></a><h2 class="author__site-title">VuiLapTrinh.com</h2><p class="author__intro">Nếu đọc bài viết thấy hay, bạn xài bớt cái bọc ni lông, ra đường mua tờ vé số giúp các cô các bác là đã cảm ơn mình</p></div></div></div></div></main></div><div class="layout-blog__aside"><div class="layout-blog__aside-inner"><div class="search-wrapper"><div class="mb-2"><div class="post-tags"><a href="/tag/javascript" class="post-tags__link"><span>#</span>
    Javascript
  </a><a href="/tag/dam-dao" class="post-tags__link"><span>#</span>
    Đàm đạo chém gió chuyện nghề
  </a><a href="/tag/css" class="post-tags__link"><span>#</span>
    CSS từ căn bản tới nâng cao
  </a><a href="/tag/thu-thuat" class="post-tags__link"><span>#</span>
    Thủ thuật
  </a><a href="/tag/hoc-thuat" class="post-tags__link"><span>#</span>
    Kiến thức nền tảng
  </a><a href="/tag/react" class="post-tags__link"><span>#</span>
    React
  </a><a href="/tag/vuejs" class="post-tags__link"><span>#</span>
    Vue JS
  </a><a href="/tag/chrome" class="post-tags__link"><span>#</span>
    Chrome DevTools
  </a><a href="/tag/javascript" class="post-tags__link"><span>#</span>
    Javascript
  </a></div></div><div class="search__container"><input id="search" type="text" placeholder="Tìm bài viết..." value="" class="search__input"><!----></div><div class="search__list"><!----><!----></div></div><div class="layout-blog__aside-footer"><div class="related-posts"><h4>Bài liên quan</h4><ul class="related-posts__container"><li class="related-posts__media"><div class="related-posts__index">1.</div><div class="related-posts__content"><h4 class="related-posts__title"><a href="/tai-sao-lai-viet-super-props/">Tại sao lại viết Super(props)</a></h4><p>Bài cũ, dịch cũng lâu rồi, giờ mới đăng lên trang cá nhân của mình</p></div></li><li class="related-posts__media"><div class="related-posts__index">2.</div><div class="related-posts__content"><h4 class="related-posts__title"><a href="/su-dung-react-hook-effect/">Sử dụng React Hook Effect</a></h4><p>Bài này mình contribute cho http://vi.reactjs.org về cách sử dụng React Hook Effect</p></div></li><li class="related-posts__media"><div class="related-posts__index">3.</div><div class="related-posts__content"><h4 class="related-posts__title"><a href="/lam-sao-de-fetch-du-lieu-bang-react-hook/">Làm sao để fetch dữ liệu bằng React Hook</a></h4><p>Trong bài này chúng ta sẽ sử dụng React.useState, React.useEffect, React.useReducer để fetch dữ liệu từ API, đồng thời cũng viết một custom hook để có thể sử dụng ở bất kỳ đâu</p></div></li><li class="related-posts__media"><div class="related-posts__index">4.</div><div class="related-posts__content"><h4 class="related-posts__title"><a href="/lam-quen-voi-react-hook-bang-vi-du/">Làm quen với React Hook bằng ví dụ</a></h4><p>Chúng ta cùng bắt đầu học sử dụng React Hook, nó giải quyết vấn đề gì, sử dụng nó ra sao</p></div></li></ul></div></div></div></div></div> <script src="/assets/js/app.0245d1f8.js" defer></script><script src="/assets/js/page--src-templates-post-vue.350c7cba.js" defer></script>
  </body>
</html>
