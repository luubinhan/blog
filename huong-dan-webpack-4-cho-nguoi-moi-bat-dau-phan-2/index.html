<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Hướng dẫn webpack 4 cho người mới bắt đầu - Phần 2 - VuiLapTrinh.com</title><meta name="gridsome:hash" content="bb9d7e5a46c25f220b2fd3c7f9d26cdf170dba2b"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.21"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" data-key="description" name="description" content="Tutorials, Blog, Hướng dẫn, chia sẽ kinh nghiệm về Frontend, react, vue, ux, ui"><meta data-vue-tag="ssr" name="desc" content="Phần 2 trong series về webpack, mình sẽ nói về code slitting, loaders"><link rel="preload" href="/blog/assets/css/0.styles.6e7bce94.css" as="style"><link rel="preload" href="/blog/assets/js/app.dd109642.js" as="script"><link rel="preload" href="/blog/assets/js/page--src-templates-post-vue.980fbd47.js" as="script"><link rel="prefetch" href="/blog/assets/js/page--node-modules-gridsome-app-pages-404-vue.b044eecd.js"><link rel="prefetch" href="/blog/assets/js/page--src-pages-index-vue.bd4a2964.js"><link rel="prefetch" href="/blog/assets/js/page--src-templates-tag-vue.4999789e.js"><link rel="stylesheet" href="/blog/assets/css/0.styles.6e7bce94.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <script>
      // Add dark / light detection that runs before Vue.js load. Borrowed from overreacted.io
      (function() {
        window.__onThemeChange = function() {};
        function setTheme(newTheme) {
          window.__theme = newTheme;
          preferredTheme = newTheme;
          document.body.setAttribute('data-theme', newTheme);
          window.__onThemeChange(newTheme);
        }

        var preferredTheme;
        try {
          preferredTheme = localStorage.getItem('theme');
        } catch (err) { }

        window.__setPreferredTheme = function(newTheme) {
          setTheme(newTheme);
          try {
            localStorage.setItem('theme', newTheme);
          } catch (err) {}
        }

        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)');
        darkQuery.addListener(function(e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        });

        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'));
      })();
    </script>

    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/blog/" class="logo active"><span class="logo__text">
    ← VuiLapTrinh.com
  </span></a></div><div class="header__right"><button role="button" aria-label="Toggle dark/light" class="toggle-theme"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></button></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">Hướng dẫn webpack 4 cho người mới bắt đầu - Phần 2</h1><div class="post-meta">
  Đăng ngày 2018-05-27.
  
    Mất khoảng
    <strong>4 phút</strong> để đọc.
  </div></div><div class="post content-box"><div class="post__header"><!----></div><div class="post__content"><p>Trong Series này</p>
<ol>
<li><a href="2018-05-25-viet-code-javascript-tot-hon-voi-webpack">Webpack là gì và tại sao ta phải xài nó</a></li>
<li><a href="2018-05-27-huong-dan-webpack-4-cho-nguoi-moi-bat-dau">Dùng Loaders, code slitting trong webpack</a></li>
<li><a href="2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3">Plugins, Development Server</a></li>
</ol>
<!-- TOC -->
<ul>
<li><a href="#loaders">Loaders</a></li>
<li><a href="#babel-loader">Babel Loader</a></li>
<li><a href="#sass-loader">SASS Loader</a></li>
<li><a href="#image">Image</a></li>
<li><a href="#code-splitting">Code splitting</a></li>
</ul>
<!-- /TOC -->
<p>Chúng ta mở lại file <strong>package.json</strong>, sửa lại chút</p>
<pre class="language-diff"><code class="language-diff">{
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ...
</span><span class="token prefix unchanged"> </span><span class="token line">   "scripts": {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     "develop": "webpack --mode development --watch",
</span><span class="token prefix inserted">+</span><span class="token line">     "build": "webpack --mode production"
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   ...
</span></span>}</code></pre>
<p>Với cách setup này, chỉ cần chạy <code class="language-text">npm run develop</code> chúng ta sẽ chạy webpack ở development mode và bật tính năng detect thay đổi để chạy lại.</p>
<p>Khi chạy <code class="language-text">npm run build</code> chúng ta sẽ chạy webpack ở mode production, khi chạy ở mode này code sẽ được minified lại bằng Uglify JS, size nhỏ hơn khi chạy dev mode.</p>
<h1 id="loaders"><a href="#loaders" aria-hidden="true"><span class="icon icon-link"></span></a>Loaders</h1>
<p>Loaders là gì? loaders là những thư viện sẽ can thiệp trước lúc chúng ta import file, nó cho phép webpack mở rộng khả năng không chỉ còn là bundle javascript thôi, mà cả những static resource khác, như css, image, svg, ...</p>
<h1 id="babel-loader"><a href="#babel-loader" aria-hidden="true"><span class="icon icon-link"></span></a>Babel Loader</h1>
<p>Thời điểm hiện tại chắc ai cũng viết JS kiểu mới, để transpile cái ES6 mà ta viết, chúng ta sẽ cần <code class="language-text">babel-loader</code></p>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev babel-loader  @babel/core @babel/preset-env</code></pre>
<p>Mở lại file <strong>webpack.config.js</strong></p>
<pre class="language-diff"><code class="language-diff">const path = require('path')

<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   entry: './src/index.js',
</span><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span><span class="token prefix unchanged"> </span><span class="token line">     filename: 'bundle.js',
</span><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, 'dist')
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   module: {
</span><span class="token prefix inserted">+</span><span class="token line">     rules: [
</span><span class="token prefix inserted">+</span><span class="token line">       {
</span><span class="token prefix inserted">+</span><span class="token line">         test: /\.js$/,
</span><span class="token prefix inserted">+</span><span class="token line">         exclude: /(node_modules|bower_components)/,
</span><span class="token prefix inserted">+</span><span class="token line">         use: {
</span><span class="token prefix inserted">+</span><span class="token line">           loader: 'babel-loader',
</span><span class="token prefix inserted">+</span><span class="token line">         }
</span><span class="token prefix inserted">+</span><span class="token line">       }
</span><span class="token prefix inserted">+</span><span class="token line">     ]
</span><span class="token prefix inserted">+</span><span class="token line">   }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<p>Để cấu hình cách transpile của babel, chúng ta add thêm file <code class="language-text">.babelrc</code> vào cùng thư mục với <strong>webpack.config.js</strong></p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"presets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">"@babel/env"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token property">"modules"</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"plugins"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"syntax-dynamic-import"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre>
<p>Đoạn trên chúng ta đang cấu hình để khi Babel transpile, nó không đổi câu <code class="language-text">import</code> và <code class="language-text">export</code> về ES5 và cho phép import linh động, sau này dùng đến trong phần slitting code</p>
<p>Giờ thì cứ vô tư viết ES6 nhé, vì khi bundle, webpack sẽ transpile code của chúng về thành ES5</p>
<h1 id="sass-loader"><a href="#sass-loader" aria-hidden="true"><span class="icon icon-link"></span></a>SASS Loader</h1>
<p>Trước tiên cài một số package để làm việc với SASS</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> --save-dev style-loader css-loader sass-loader node-sass</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre class="language-diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   ...
</span><span class="token prefix unchanged"> </span><span class="token line">   module: {
</span><span class="token prefix unchanged"> </span><span class="token line">     rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">       ...
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       {
</span><span class="token prefix inserted">+</span><span class="token line">         test: /\.scss$/,
</span><span class="token prefix inserted">+</span><span class="token line">         use: [{
</span><span class="token prefix inserted">+</span><span class="token line">           loader: 'style-loader'
</span><span class="token prefix inserted">+</span><span class="token line">         }, {
</span><span class="token prefix inserted">+</span><span class="token line">           loader: 'css-loader'
</span><span class="token prefix inserted">+</span><span class="token line">         }, {
</span><span class="token prefix inserted">+</span><span class="token line">           loader: 'sass-loader'
</span><span class="token prefix inserted">+</span><span class="token line">         }]
</span><span class="token prefix inserted">+</span><span class="token line">       }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     ]
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<p>Mấy cái loader này sẽ được thực hiện theo thứ tự</p>
<ul>
<li><code class="language-text">sass-loader</code> transforms Sass thành CSS.</li>
<li><code class="language-text">css-loader</code> parses CSS vào JavaScript và resolve dependencies.</li>
<li><code class="language-text">style-loader</code> chèn CSS vào bên trong thẻ <code class="language-text">&lt;style&gt;</code></li>
</ul>
<p>Có thể hình dung nó như một function với callback là một function khác</p>
<pre class="language-js"><code class="language-js"><span class="token function">styleLoader</span><span class="token punctuation">(</span><span class="token function">cssLoader</span><span class="token punctuation">(</span><span class="token function">sassLoader</span><span class="token punctuation">(</span><span class="token string">"source"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<p>Sau khi cấu hình như vậy chúng ta có thể import file  <code class="language-text">.scss</code> bên trong file javascript</p>
<pre class="language-diff"><code class="language-diff">import { groupBy } from 'lodash-es'
import people from './people'

<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import './style.scss'
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> ...</span></span></code></pre>
<p>Tại sao chúng ta lại đi import CSS vào trong file js? Nếu bạn thời kỳ trước việc chèn hầm bà lằng kiểu này là cực kỳ bị lên án, nhưng bây giờ thời thế khác, một số lý do để trọn CSS vào trong js trong development</p>
<ul>
<li>Một component javascript sẽ có thể phụ thuộc vào CSS, images, SVG. Nếu được đóng gói thành 1 cục, chúng ta dễ mang nó sử dụng ở nơi khác hơn</li>
<li>Nếu chúng ta không sử dụng component, đoạn css import trong component cũng sẽ không được import luôn, tránh những việc load css ở tất cả</li>
<li>Trước đây nếu dùng OOP trong CSS, việc chỉnh sửa một đoạn css sẽ dễ bị side effect, ảnh hướng đến những chổ ta không mong muốn. CSS module để CSS chỉ hoạt động local thôi</li>
<li>Giảm số lượng HTTP request xuống</li>
</ul>
<h1 id="image"><a href="#image" aria-hidden="true"><span class="icon icon-link"></span></a>Image</h1>
<p>Dùng <code class="language-text">file-loader</code> để đọc file image. Với HTML chuẩn, image được sử dụng bằng 2 cách là dùng tag <code class="language-text">img</code> hoặc thuộc tính <code class="language-text">background-image</code>. Với Webpack, chúng ta có thể optimize cho trường hợp dung lượng image với kích thước nhỏ thành dạng <code class="language-text">string</code> bên trong javascript luôn. Lúc này trình duyệt không cần load riêng file image nữa</p>
<p>Cài cái loader</p>
<pre class="language-bash"><code class="language-bash">nmp <span class="token function">install</span> --save-dev file-loader</code></pre>
<p>webpack.config.js</p>
<pre class="language-diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">module.exports = {
</span><span class="token prefix unchanged"> </span><span class="token line">   ...
</span><span class="token prefix unchanged"> </span><span class="token line">   module: {
</span><span class="token prefix unchanged"> </span><span class="token line">     rules: [
</span><span class="token prefix unchanged"> </span><span class="token line">       ...
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       {
</span><span class="token prefix inserted">+</span><span class="token line">         test: /\.(png|svg|jpg|gif)$/,
</span><span class="token prefix inserted">+</span><span class="token line">         use: [
</span><span class="token prefix inserted">+</span><span class="token line">           {
</span><span class="token prefix inserted">+</span><span class="token line">             loader: 'file-loader'
</span><span class="token prefix inserted">+</span><span class="token line">           }
</span><span class="token prefix inserted">+</span><span class="token line">         ]
</span><span class="token prefix inserted">+</span><span class="token line">       }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     ]
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<p>Trong lúc code chúng ta vẫn viết bình thường</p>
<pre class="language-jsx"><code class="language-jsx"><span class="token keyword module">import</span> codeURL <span class="token keyword module">from</span> <span class="token string">'./code.png'</span><span class="token punctuation">;</span>

<span class="token spread operator">...</span>
<span class="token method function property-access">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>codeURL<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token spread operator">...</span></code></pre>
<p>Kết quả bundle</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data:image/png;base64,iVBO...<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre>
<p>Có thể đọc thêm trên docs của <code class="language-text">file-loader</code> để xem cách chỉnh kích thước nào thì chuyển nội dung ảnh thành data URI. File loader còn thể thể xử lý trên một số dạng file khác nữa, chứ không chỉ là hình thôi không.</p>
<h1 id="code-splitting"><a href="#code-splitting" aria-hidden="true"><span class="icon icon-link"></span></a>Code splitting</h1>
<p>Trích từ trang chủ webpack</p>
<blockquote>
<p>Code splitting là một trong những tính năng hấp dẫn nhất của Webpack. Tính năng này cho phép bạn tách code ra thành nhiều file bundle để load khi cần thiết hoặc load song song. Cái này có thể dùng để giảm kích thước file bundle và kiểm soát được load resource hợp lý hơn, nếu sử dụng đúng cách, sẽ giảm đảng kể thời gian load trang</p>
</blockquote>
<p>Trước giờ chúng ta chỉ setup để bundle ra 1 file duy nhất từ <code class="language-text">src/index.js</code> ra file <code class="language-text">dist/bundle.js</code>. Khi ứng dúng phình ra, chúng ta cần tách code ra thành nhiều file, toàn bộ code đầu cần phải load hết ngay từ đầu đâu nhỉ? Dùng <a href="https://webpack.js.org/guides/code-splitting/" target="_blank" rel="nofollow noopener noreferrer">Code Slitting</a> và <a href="https://webpack.js.org/guides/lazy-loading/" target="_blank" rel="nofollow noopener noreferrer">Lazy Loading</a> để chỉ load khi cần.</p>
<pre class="language-diff"><code class="language-diff"><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  const path = require('path')
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> module.exports = {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">   entry: './src/index.js',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   entry: {
</span><span class="token prefix inserted">+</span><span class="token line">     app: './src/app.js'
</span><span class="token prefix inserted">+</span><span class="token line">   },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   output: {
</span></span><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">     filename: 'bundle.js',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     filename: '[name].bundle.js',
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     path: path.resolve(__dirname, 'dist')
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span><span class="token prefix unchanged"> </span><span class="token line">   ...
</span><span class="token prefix unchanged"> </span><span class="token line"> }</span></span></code></pre>
<p>Với setup như thế này, nếu chúng ta có 2 file trong thư mục <code class="language-text">src</code> là <code class="language-text">app.js</code> và <code class="language-text">chat.js</code>, webpack sẽ bundle ra 2 file <code class="language-text">chat.bundle.js</code>, <code class="language-text">app.bundle.js</code></p>
<p>Bài sau nói tiếp plugins nhé, kết thúc với loaders ở đây</p>
<p><a href="https://www.sitepoint.com/beginners-guide-webpack-module-bundling/" target="_blank" rel="nofollow noopener noreferrer">Link bài gốc</a>
Tác giả: Mark Brown</p>
<p>Chỉnh sửa theo sự hiểu của mình một tí</p>
</div><div class="post__footer"><div class="post-tags"><a href="/blog/tag/javascript/" class="post-tags__link"><span>#</span> javascript
		</a><a href="/blog/tag/webpack/" class="post-tags__link"><span>#</span> webpack
		</a></div></div></div><div class="post-comments"></div><div class="author post-author"><img alt="Author image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-52311ff214b737f722259e901102d6b3'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-52311ff214b737f722259e901102d6b3)' width='180' height='180' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABAAEADASIAAhEBAxEB/8QAHAAAAQUBAQEAAAAAAAAAAAAABwEDBAUGCAAC/8QAMxAAAQMCAwcBBgYDAAAAAAAAAQIDEQAEBRIhBhMxQVFhcQciIzJCgbEIFDORodEWgsH/xAAZAQEBAQEBAQAAAAAAAAAAAAAEAwUGAAH/xAAhEQABBAMAAgMBAAAAAAAAAAABAAIDEQQSISJBBRNRMf/aAAwDAQACEQMRAD8A6Pr1fOalmvLyUAk6AnxS5VROUx4oR%2bvmPXNjZYbhti48DcKUt9LRIJAHsgkaxMmO1ByzxnG8PeQ/a3d5bOIIUVJdUOHMifvWjB8c6aMP2q0CfPbC/TW119SVz9YetmOMLYRfWWH3TaSA4pKVNrWOuhgH6UYtkNrsK2stFvYU65nbjesOpyrbnhPIjuKhPhSwDZw4qw5kU5ph6r%2blpCYFNOLKflV5o1JSXMkDlS5xy1qtDo4mfrWe2/xhWEbJ3t400%2b6oZWyGpkBRiTGoSNJj/tVbEXEN/VMyAC1iPUTaS2xjG3bO3IS3ay2HNJc1lR6xPDx3oa4g0RvVlQcSfhFRLrEF3V0LpSAh10layOMzw7eKl3jqLhxsxLaRw4610MUYiAa1ZMxMosrPugpJJ0nlwiiJ%2bH69eZ28NulfuX7R0LTOhygKB8yKxWLaWoC0BJKpgfL2rdfh8sV3G1F9iBTLNnalGbkFuEADzAVVMpwOO6/xCx4izJaAuiSsT8UV8KKyBznmKih1J714OqIiCa5jVdJsqk4ggL9oRPSqDbty4/w/GnLVzKPyypBkaEif4p5N2RwA/anlPtvsrafAW0tJStChKVA8QR0p4ZqQQil1ilz5Y5nGloXKkcNev908G8iUoSCUiiHtVhFhhdou6wu2O6JyuNg/pzwUCdY5a8JrAXtwErWi3RmIEZwZE9utaccm/QEVzKVZjVrltN4JyJMqFdGemuz7OzmyFjbBGS5eQLm6PMuLAMf6iE/SgBavuMPNOON75wKC0tr4GDPtdqO%2bxm0i8ew0O3O7RfJnett6J4mCnXhH81DNDzGK/i%2b4/wBbZSb7S1xQ2IIVBHWvb2BAIioBcVxMCml3KgYFZQZadtSzAK460hCpkk%2bBTzahmmnXnRA0APmadsj0ol1uE2T6r5SEWgbO9K%2bARGs0H7stto3luczSyS3mEKUJIBI66VrvUnGWlJZwlKsuaHnjmgafCk/f9qwD6y%2b2pbjhKU%2bylWaJ8dabjxmtne0HInolrVcYThj18w5clKzl1KOZ/sVLRtJ%2bQbQ7akpum/01oEA9c3bvULB8WtGbRYuW1vvBOVtTivm48eVUt9Z3dwpKlIbaZIhJQZEdJq7fJxDxxHcdWgxnvtFbZz1ItsQCWMWyWb8hJcn3ZV3Pyz14eK2e9WpUBJoGYHhVpmCQyCtTZBMaHz1oq7DYxvmBh11IeZT7pR%2bZA5eR9vFCyoGs8owm4sz38kK//9k=' /%3e%3c/svg%3e" width="180" data-src="/blog/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" data-srcset="/blog/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg 180w" data-sizes="(max-width: 180px) 100vw, 180px" class="author__image g-image g-image--lazy g-image--loading"><noscript><img src="/blog/assets/static/author.e6b6009.95c26cbf81b488daf3af4259c9393a66.jpg" class="author__image g-image g-image--loaded" width="180" alt="Author image"></noscript><!----><p class="author__intro">Hiện tại site đang nâng cấp, các bạn xài tạm</p></div></main><footer class="footer"><span class="footer__copyright">Copyright © 2020.</span><span class="footer__links">luckyluu</span></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Hướng dẫn webpack 4 cho người mới bắt đầu - Phần 2","path":"\u002Fhuong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-2\u002F","date":"2018-05-27","timeToRead":4,"tags":[{"id":"javascript","title":"javascript","path":"\u002Ftag\u002Fjavascript\u002F"},{"id":"webpack","title":"webpack","path":"\u002Ftag\u002Fwebpack\u002F"}],"desc":"Phần 2 trong series về webpack, mình sẽ nói về code slitting, loaders","content":"\u003Cp\u003ETrong Series này\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E\u003Ca href=\"2018-05-25-viet-code-javascript-tot-hon-voi-webpack\"\u003EWebpack là gì và tại sao ta phải xài nó\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"2018-05-27-huong-dan-webpack-4-cho-nguoi-moi-bat-dau\"\u003EDùng Loaders, code slitting trong webpack\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"2018-05-28-huong-dan-webpack-4-cho-nguoi-moi-bat-dau-phan-3\"\u003EPlugins, Development Server\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003C!-- TOC --\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"#loaders\"\u003ELoaders\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#babel-loader\"\u003EBabel Loader\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#sass-loader\"\u003ESASS Loader\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#image\"\u003EImage\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ca href=\"#code-splitting\"\u003ECode splitting\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003C!-- \u002FTOC --\u003E\n\u003Cp\u003EChúng ta mở lại file \u003Cstrong\u003Epackage.json\u003C\u002Fstrong\u003E, sửa lại chút\u003C\u002Fp\u003E\n\u003Cpre class=\"language-diff\"\u003E\u003Ccode class=\"language-diff\"\u003E{\n\u003Cspan class=\"token unchanged\"\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   ...\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   \"scripts\": {\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token inserted-sign inserted\"\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E     \"develop\": \"webpack --mode development --watch\",\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E     \"build\": \"webpack --mode production\"\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token unchanged\"\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   },\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   ...\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EVới cách setup này, chỉ cần chạy \u003Ccode class=\"language-text\"\u003Enpm run develop\u003C\u002Fcode\u003E chúng ta sẽ chạy webpack ở development mode và bật tính năng detect thay đổi để chạy lại.\u003C\u002Fp\u003E\n\u003Cp\u003EKhi chạy \u003Ccode class=\"language-text\"\u003Enpm run build\u003C\u002Fcode\u003E chúng ta sẽ chạy webpack ở mode production, khi chạy ở mode này code sẽ được minified lại bằng Uglify JS, size nhỏ hơn khi chạy dev mode.\u003C\u002Fp\u003E\n\u003Ch1 id=\"loaders\"\u003E\u003Ca href=\"#loaders\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ELoaders\u003C\u002Fh1\u003E\n\u003Cp\u003ELoaders là gì? loaders là những thư viện sẽ can thiệp trước lúc chúng ta import file, nó cho phép webpack mở rộng khả năng không chỉ còn là bundle javascript thôi, mà cả những static resource khác, như css, image, svg, ...\u003C\u002Fp\u003E\n\u003Ch1 id=\"babel-loader\"\u003E\u003Ca href=\"#babel-loader\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EBabel Loader\u003C\u002Fh1\u003E\n\u003Cp\u003EThời điểm hiện tại chắc ai cũng viết JS kiểu mới, để transpile cái ES6 mà ta viết, chúng ta sẽ cần \u003Ccode class=\"language-text\"\u003Ebabel-loader\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003Ccode class=\"language-bash\"\u003E\u003Cspan class=\"token function\"\u003Enpm\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Einstall\u003C\u002Fspan\u003E --save-dev babel-loader  @babel\u002Fcore @babel\u002Fpreset-env\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EMở lại file \u003Cstrong\u003Ewebpack.config.js\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"language-diff\"\u003E\u003Ccode class=\"language-diff\"\u003Econst path = require('path')\n\n\u003Cspan class=\"token unchanged\"\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E module.exports = {\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   entry: '.\u002Fsrc\u002Findex.js',\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   output: {\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E     filename: 'bundle.js',\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E     path: path.resolve(__dirname, 'dist')\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   },\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token inserted-sign inserted\"\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   module: {\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E     rules: [\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E       {\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E         test: \u002F\\.js$\u002F,\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E         exclude: \u002F(node_modules|bower_components)\u002F,\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E         use: {\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E           loader: 'babel-loader',\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E         }\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E       }\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E     ]\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   }\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token unchanged\"\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E }\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EĐể cấu hình cách transpile của babel, chúng ta add thêm file \u003Ccode class=\"language-text\"\u003E.babelrc\u003C\u002Fcode\u003E vào cùng thư mục với \u003Cstrong\u003Ewebpack.config.js\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"language-json\"\u003E\u003Ccode class=\"language-json\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token property\"\u003E\"presets\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"@babel\u002Fenv\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token property\"\u003E\"modules\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Efalse\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token property\"\u003E\"plugins\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"syntax-dynamic-import\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EĐoạn trên chúng ta đang cấu hình để khi Babel transpile, nó không đổi câu \u003Ccode class=\"language-text\"\u003Eimport\u003C\u002Fcode\u003E và \u003Ccode class=\"language-text\"\u003Eexport\u003C\u002Fcode\u003E về ES5 và cho phép import linh động, sau này dùng đến trong phần slitting code\u003C\u002Fp\u003E\n\u003Cp\u003EGiờ thì cứ vô tư viết ES6 nhé, vì khi bundle, webpack sẽ transpile code của chúng về thành ES5\u003C\u002Fp\u003E\n\u003Ch1 id=\"sass-loader\"\u003E\u003Ca href=\"#sass-loader\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ESASS Loader\u003C\u002Fh1\u003E\n\u003Cp\u003ETrước tiên cài một số package để làm việc với SASS\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003Ccode class=\"language-bash\"\u003E\u003Cspan class=\"token function\"\u003Enpm\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Einstall\u003C\u002Fspan\u003E --save-dev style-loader css-loader sass-loader node-sass\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Cstrong\u003Ewebpack.config.js\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"language-diff\"\u003E\u003Ccode class=\"language-diff\"\u003E\u003Cspan class=\"token unchanged\"\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003Emodule.exports = {\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   ...\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   module: {\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E     rules: [\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E       ...\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token inserted-sign inserted\"\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E       {\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E         test: \u002F\\.scss$\u002F,\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E         use: [{\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E           loader: 'style-loader'\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E         }, {\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E           loader: 'css-loader'\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E         }, {\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E           loader: 'sass-loader'\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E         }]\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E       }\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token unchanged\"\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E     ]\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   }\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E }\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EMấy cái loader này sẽ được thực hiện theo thứ tự\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003Esass-loader\u003C\u002Fcode\u003E transforms Sass thành CSS.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003Ecss-loader\u003C\u002Fcode\u003E parses CSS vào JavaScript và resolve dependencies.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode class=\"language-text\"\u003Estyle-loader\u003C\u002Fcode\u003E chèn CSS vào bên trong thẻ \u003Ccode class=\"language-text\"\u003E&lt;style&gt;\u003C\u002Fcode\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003ECó thể hình dung nó như một function với callback là một function khác\u003C\u002Fp\u003E\n\u003Cpre class=\"language-js\"\u003E\u003Ccode class=\"language-js\"\u003E\u003Cspan class=\"token function\"\u003EstyleLoader\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EcssLoader\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EsassLoader\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"source\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ESau khi cấu hình như vậy chúng ta có thể import file  \u003Ccode class=\"language-text\"\u003E.scss\u003C\u002Fcode\u003E bên trong file javascript\u003C\u002Fp\u003E\n\u003Cpre class=\"language-diff\"\u003E\u003Ccode class=\"language-diff\"\u003Eimport { groupBy } from 'lodash-es'\nimport people from '.\u002Fpeople'\n\n\u003Cspan class=\"token inserted-sign inserted\"\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E import '.\u002Fstyle.scss'\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token unchanged\"\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E ...\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ETại sao chúng ta lại đi import CSS vào trong file js? Nếu bạn thời kỳ trước việc chèn hầm bà lằng kiểu này là cực kỳ bị lên án, nhưng bây giờ thời thế khác, một số lý do để trọn CSS vào trong js trong development\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EMột component javascript sẽ có thể phụ thuộc vào CSS, images, SVG. Nếu được đóng gói thành 1 cục, chúng ta dễ mang nó sử dụng ở nơi khác hơn\u003C\u002Fli\u003E\n\u003Cli\u003ENếu chúng ta không sử dụng component, đoạn css import trong component cũng sẽ không được import luôn, tránh những việc load css ở tất cả\u003C\u002Fli\u003E\n\u003Cli\u003ETrước đây nếu dùng OOP trong CSS, việc chỉnh sửa một đoạn css sẽ dễ bị side effect, ảnh hướng đến những chổ ta không mong muốn. CSS module để CSS chỉ hoạt động local thôi\u003C\u002Fli\u003E\n\u003Cli\u003EGiảm số lượng HTTP request xuống\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch1 id=\"image\"\u003E\u003Ca href=\"#image\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EImage\u003C\u002Fh1\u003E\n\u003Cp\u003EDùng \u003Ccode class=\"language-text\"\u003Efile-loader\u003C\u002Fcode\u003E để đọc file image. Với HTML chuẩn, image được sử dụng bằng 2 cách là dùng tag \u003Ccode class=\"language-text\"\u003Eimg\u003C\u002Fcode\u003E hoặc thuộc tính \u003Ccode class=\"language-text\"\u003Ebackground-image\u003C\u002Fcode\u003E. Với Webpack, chúng ta có thể optimize cho trường hợp dung lượng image với kích thước nhỏ thành dạng \u003Ccode class=\"language-text\"\u003Estring\u003C\u002Fcode\u003E bên trong javascript luôn. Lúc này trình duyệt không cần load riêng file image nữa\u003C\u002Fp\u003E\n\u003Cp\u003ECài cái loader\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003Ccode class=\"language-bash\"\u003Enmp \u003Cspan class=\"token function\"\u003Einstall\u003C\u002Fspan\u003E --save-dev file-loader\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003Ewebpack.config.js\u003C\u002Fp\u003E\n\u003Cpre class=\"language-diff\"\u003E\u003Ccode class=\"language-diff\"\u003E\u003Cspan class=\"token unchanged\"\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003Emodule.exports = {\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   ...\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   module: {\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E     rules: [\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E       ...\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token inserted-sign inserted\"\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E       {\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E         test: \u002F\\.(png|svg|jpg|gif)$\u002F,\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E         use: [\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E           {\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E             loader: 'file-loader'\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E           }\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E         ]\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E       }\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token unchanged\"\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E     ]\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   }\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E }\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ETrong lúc code chúng ta vẫn viết bình thường\u003C\u002Fp\u003E\n\u003Cpre class=\"language-jsx\"\u003E\u003Ccode class=\"language-jsx\"\u003E\u003Cspan class=\"token keyword module\"\u003Eimport\u003C\u002Fspan\u003E codeURL \u003Cspan class=\"token keyword module\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'.\u002Fcode.png'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token spread operator\"\u003E...\u003C\u002Fspan\u003E\n\u003Cspan class=\"token method function property-access\"\u003Erender\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Eimg\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Esrc\u003C\u002Fspan\u003E\u003Cspan class=\"token script language-javascript\"\u003E\u003Cspan class=\"token script-punctuation punctuation\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003EcodeURL\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Ealt\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation attr-equals\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E\u002F\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token spread operator\"\u003E...\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EKết quả bundle\u003C\u002Fp\u003E\n\u003Cpre class=\"language-html\"\u003E\u003Ccode class=\"language-html\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token tag\"\u003E\u003Cspan class=\"token punctuation\"\u003E&lt;\u003C\u002Fspan\u003Eimg\u003C\u002Fspan\u003E \u003Cspan class=\"token attr-name\"\u003Esrc\u003C\u002Fspan\u003E\u003Cspan class=\"token attr-value\"\u003E\u003Cspan class=\"token punctuation attr-equals\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003Edata:image\u002Fpng;base64,iVBO...\u003Cspan class=\"token punctuation\"\u003E\"\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E\u002F\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ECó thể đọc thêm trên docs của \u003Ccode class=\"language-text\"\u003Efile-loader\u003C\u002Fcode\u003E để xem cách chỉnh kích thước nào thì chuyển nội dung ảnh thành data URI. File loader còn thể thể xử lý trên một số dạng file khác nữa, chứ không chỉ là hình thôi không.\u003C\u002Fp\u003E\n\u003Ch1 id=\"code-splitting\"\u003E\u003Ca href=\"#code-splitting\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECode splitting\u003C\u002Fh1\u003E\n\u003Cp\u003ETrích từ trang chủ webpack\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\n\u003Cp\u003ECode splitting là một trong những tính năng hấp dẫn nhất của Webpack. Tính năng này cho phép bạn tách code ra thành nhiều file bundle để load khi cần thiết hoặc load song song. Cái này có thể dùng để giảm kích thước file bundle và kiểm soát được load resource hợp lý hơn, nếu sử dụng đúng cách, sẽ giảm đảng kể thời gian load trang\u003C\u002Fp\u003E\n\u003C\u002Fblockquote\u003E\n\u003Cp\u003ETrước giờ chúng ta chỉ setup để bundle ra 1 file duy nhất từ \u003Ccode class=\"language-text\"\u003Esrc\u002Findex.js\u003C\u002Fcode\u003E ra file \u003Ccode class=\"language-text\"\u003Edist\u002Fbundle.js\u003C\u002Fcode\u003E. Khi ứng dúng phình ra, chúng ta cần tách code ra thành nhiều file, toàn bộ code đầu cần phải load hết ngay từ đầu đâu nhỉ? Dùng \u003Ca href=\"https:\u002F\u002Fwebpack.js.org\u002Fguides\u002Fcode-splitting\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ECode Slitting\u003C\u002Fa\u003E và \u003Ca href=\"https:\u002F\u002Fwebpack.js.org\u002Fguides\u002Flazy-loading\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ELazy Loading\u003C\u002Fa\u003E để chỉ load khi cần.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-diff\"\u003E\u003Ccode class=\"language-diff\"\u003E\u003Cspan class=\"token unchanged\"\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E  const path = require('path')\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token unchanged\"\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E module.exports = {\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token deleted-sign deleted\"\u003E\u003Cspan class=\"token prefix deleted\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   entry: '.\u002Fsrc\u002Findex.js',\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token inserted-sign inserted\"\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   entry: {\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E     app: '.\u002Fsrc\u002Fapp.js'\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   },\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token unchanged\"\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   output: {\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token deleted-sign deleted\"\u003E\u003Cspan class=\"token prefix deleted\"\u003E-\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E     filename: 'bundle.js',\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token inserted-sign inserted\"\u003E\u003Cspan class=\"token prefix inserted\"\u003E+\u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E     filename: '[name].bundle.js',\n\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token unchanged\"\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E     path: path.resolve(__dirname, 'dist')\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   },\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E   ...\n\u003C\u002Fspan\u003E\u003Cspan class=\"token prefix unchanged\"\u003E \u003C\u002Fspan\u003E\u003Cspan class=\"token line\"\u003E }\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EVới setup như thế này, nếu chúng ta có 2 file trong thư mục \u003Ccode class=\"language-text\"\u003Esrc\u003C\u002Fcode\u003E là \u003Ccode class=\"language-text\"\u003Eapp.js\u003C\u002Fcode\u003E và \u003Ccode class=\"language-text\"\u003Echat.js\u003C\u002Fcode\u003E, webpack sẽ bundle ra 2 file \u003Ccode class=\"language-text\"\u003Echat.bundle.js\u003C\u002Fcode\u003E, \u003Ccode class=\"language-text\"\u003Eapp.bundle.js\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EBài sau nói tiếp plugins nhé, kết thúc với loaders ở đây\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fwww.sitepoint.com\u002Fbeginners-guide-webpack-module-bundling\u002F\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ELink bài gốc\u003C\u002Fa\u003E\nTác giả: Mark Brown\u003C\u002Fp\u003E\n\u003Cp\u003EChỉnh sửa theo sự hiểu của mình một tí\u003C\u002Fp\u003E\n","cover_image":""}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/blog/assets/js/app.dd109642.js" defer></script><script src="/blog/assets/js/page--src-templates-post-vue.980fbd47.js" defer></script>
  </body>
</html>